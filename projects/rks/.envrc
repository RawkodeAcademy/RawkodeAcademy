# Local development defaults
# Toggle progressive ISO upload (keep false for local).
dotenv_if_exists .env

# Cloudflare auth (mirrors website repo). Wrangler reads CLOUDFLARE_API_TOKEN.
export CLOUDFLARE_API_TOKEN="op://sa.rawkode.academy/cloudflare/password"

# Local development defaults
export PUBLIC_RKS_PROGRESSIVE_UPLOAD=false
export PUBLIC_RKS_WORKER_URL="https://studio-worker.rawkodeacademy.workers.dev"

# Realtime (local dev): resolved via 1Password
export RTK_APP_ID="6b1a591c-4317-4f86-95bd-9fd37b04b379"
export RTK_BASE_URL="https://rtc.live.cloudflare.com"
export RTK_APP_SECRET="op://Employee/w3etxulw37bsqb2rsna5px7y4u/api-tokens/studio-realtime"

# If available, use devenv (Nix) for patched workerd like our website repo
if command -v devenv >/dev/null 2>&1; then
  eval "$(devenv direnvrc)"
  use devenv
else
  # Fallback: attempt patch with system patchelf when entering shell
  if [[ -x ./scripts/patch-workerd.sh ]]; then
    ./scripts/patch-workerd.sh || true
  fi
fi
