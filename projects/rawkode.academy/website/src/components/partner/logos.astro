---
interface Logo {
	image: typeof import("*?raw");
	fillLight: string;
	fillDark: string;
}

interface Partner {
	name: string;
	url: string;
	since: string;
	logo: Logo;
	description?: string;
	industry?: string;
}

type Partners = Partner[];

const currentPartners: Partners = [
	{
		name: "Heroku",
		since: "2025",
		logo: {
			image: await import("./logos/heroku.svg?raw"),
			fillLight: "#5A1BA9",
			fillDark: "#D7BFF2",
		},
		url: "https://heroku.com",
		description:
			"Pioneering platform-as-a-service provider enabling developers to build, run, and operate applications entirely in the cloud.",
		industry: "Cloud Platform",
	},
	{
		name: "Spectro Cloud",
		since: "2025",
		logo: {
			image: await import("./logos/spectrocloud.svg?raw"),
			fillLight: "#012121",
			fillDark: "#f7f1ed",
		},
		url: "https://spectrocloud.com",
		description:
			"Kubernetes management platform that simplifies the deployment, management, and operations of Kubernetes clusters.",
		industry: "Kubernetes",
	},
	{
		name: "WunderGraph",
		since: "2025",
		logo: {
			image: await import("./logos/wundergraph.svg?raw"),
			fillLight: "#000000",
			fillDark: "#FFFFFF",
		},
		url: "https://wundergraph.com",
		description:
			"The API Gateway that understands GraphQL, REST and more. Build, publish and maintain APIs with a unified workflow.",
		industry: "API Development",
	},
	{
		name: "Zitadel",
		since: "2025",
		logo: {
			image: await import("./logos/zitadel.svg?raw"),
			fillLight: "#101010",
			fillDark: "white",
		},
		url: "https://zitadel.com",
		description:
			"Cloud-native identity and access management platform providing authentication, authorization, and user management.",
		industry: "Identity & Security",
	},
	{
		name: "Guidepad",
		since: "2024",
		logo: {
			image: await import("./logos/guidepad.svg?raw"),
			fillLight: "black",
			fillDark: "white",
		},
		url: "https://guidepad.io",
		description:
			"The Development Framework for managing complexity and expanding capabilities.",
		industry: "Developer Experience",
	},
];

const previousPartners: Partners = [
	{
		name: "Microsoft Azure",
		since: "2024",
		logo: {
			image: await import("./logos/microsoft.svg?raw"),
			fillLight: "#706d6e",
			fillDark: "#706d6e",
		},
		url: "https://azure.com",
		description:
			"Cloud computing service for building, testing, deploying, and managing applications through Microsoft-managed data centers.",
		industry: "Cloud Services",
	},
	{
		name: "Fermyon",
		since: "2024",
		logo: {
			image: await import("./logos/fermyon.svg?raw"),
			fillLight: "#0d203f",
			fillDark: "#34E8BD",
		},
		url: "https://www.fermyon.com/?utm_source=rawkode&utm_medium=logo&utm_campaign=acad-sponsor",
		description:
			"Pioneering serverless WebAssembly platform enabling developers to build microservices with unprecedented efficiency.",
		industry: "WebAssembly",
	},
	{
		name: "ControlPlane",
		since: "2024",
		logo: {
			image: await import("./logos/controlplane.svg?raw"),
			fillLight: "black",
			fillDark: "white",
		},
		url: "https://controlplane.io",
		description:
			"Security engineering specialists helping organizations build and operate secure cloud native infrastructure.",
		industry: "Cloud Security",
	},
	{
		name: "ngrok",
		since: "2024",
		logo: {
			image: await import("./logos/ngrok.svg?raw"),
			fillLight: "#10239E",
			fillDark: "white",
		},
		url: "https://ngrok.com",
		description:
			"Secure tunneling solution that enables developers to expose local servers to the internet and build secure webhook consumers.",
		industry: "Developer Tools",
	},
];

---

<div class="partner-showcase space-y-12">
	<div class="partner-intro text-center max-w-3xl mx-auto">
		<p class="text-lg text-gray-600 dark:text-gray-300">
			We collaborate with engineering-first companies that share our obsession with developer experience.
			Each partnership helps us tell richer stories, build better tooling, and push the Cloud Native ecosystem forward.
		</p>
	</div>

	<div class="grid gap-6 sm:gap-8 md:grid-cols-2 xl:grid-cols-3">
		{currentPartners.map(async (partner) => (
			<article
				class="partner-card group"
				style={`--partner-fill-light: ${partner.logo.fillLight}; --partner-fill-dark: ${partner.logo.fillDark};`}
			>
				<div class="partner-top">
					<div class="partner-logo-tile">
						<div
							class="partner-logo"
							style={`color: light-dark(${partner.logo.fillLight}, ${partner.logo.fillDark});`}
						>
							<Fragment set:html={partner.logo.image.default} />
						</div>
					</div>
					<div class="partner-since">
						<span>Partner since</span>
						<strong>{partner.since}</strong>
					</div>
				</div>

				<div class="space-y-3">
					<div>
						<h3 class="text-xl font-semibold text-white">{partner.name}</h3>
						{partner.industry && (
							<p class="text-xs uppercase tracking-[0.2em] text-white/70">
								{partner.industry}
							</p>
						)}
					</div>
					{partner.description && (
						<p class="text-sm leading-relaxed text-white/85">
							{partner.description}
						</p>
					)}
				</div>

				<a
					href={partner.url}
					title={`Visit ${partner.name} website`}
					target="_blank"
					rel="noopener noreferrer"
					class="partner-link inline-flex items-center gap-2 text-sm font-semibold"
				>
					Visit {partner.name}
					<svg
						aria-hidden="true"
						class="w-4 h-4"
						xmlns="http://www.w3.org/2000/svg"
						viewBox="0 0 20 20"
						fill="currentColor"
					>
						<path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
						<path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
					</svg>
				</a>
			</article>
		))}
	</div>

	<div class="partner-wall rounded-[28px] p-6 sm:p-8">
		<div class="flex flex-wrap items-center justify-between gap-4 mb-6">
			<div>
				<h3 class="text-xl font-semibold text-gray-900 dark:text-white">
					Previous Partners
				</h3>
				<p class="text-sm text-gray-600 dark:text-gray-300 max-w-2xl">
					Thank you to the teams who trusted us to tell their story and educate developers around the world.
				</p>
			</div>
			<span class="partner-wall-chip">
				{previousPartners.length}+ brands
			</span>
		</div>

		<div class="partner-wall-grid grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
			{previousPartners.map(async (partner) => (
				<div
					class="partner-wall-logo"
					title={partner.name}
					style={`--partner-fill-light: ${partner.logo.fillLight}; --partner-fill-dark: ${partner.logo.fillDark};`}
				>
					<Fragment set:html={partner.logo.image.default} />
				</div>
			))}
		</div>
	</div>
</div>

<style is:global>
	.partner-card {
		position: relative;
		display: flex;
		flex-direction: column;
		gap: 1.5rem;
		border-radius: 1.75rem;
		padding: 1.75rem;
		background-image: linear-gradient(
			135deg,
			color-mix(in srgb, var(--partner-fill-light) 60%, #0f172a 40%),
			color-mix(in srgb, var(--partner-fill-dark) 70%, #020617 30%)
		);
		border: 1px solid color-mix(in srgb, var(--partner-fill-dark), transparent 55%);
		color: #fff;
		box-shadow: 0 30px 60px rgba(15, 23, 42, 0.35);
		overflow: hidden;
	}

	.partner-card::after {
		content: "";
		position: absolute;
		inset: 0;
		background: radial-gradient(circle at 120% -15%, rgba(255, 255, 255, 0.35), transparent 55%);
		opacity: 0.6;
		pointer-events: none;
	}

	.partner-card > * {
		position: relative;
		z-index: 1;
	}

	.partner-top {
		display: flex;
		flex-wrap: wrap;
		align-items: center;
		justify-content: space-between;
		gap: 1.25rem;
	}

	.partner-logo-tile {
		width: 5.5rem;
		height: 5.5rem;
		border-radius: 1.25rem;
		border: 1px solid rgba(255, 255, 255, 0.18);
		background: rgba(255, 255, 255, 0.08);
		display: grid;
		place-items: center;
		padding: 0.75rem;
		flex-shrink: 0;
	}

	.partner-logo {
		width: 100%;
		height: 100%;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.partner-logo svg {
		max-width: 100%;
		max-height: 3.25rem;
		width: 100%;
		height: auto;
		display: block;
		color: inherit;
	}

	.partner-logo svg * {
		fill: currentColor !important;
		stroke: currentColor !important;
	}

	.partner-since {
		text-transform: uppercase;
		font-size: 0.65rem;
		letter-spacing: 0.28em;
		color: rgba(255, 255, 255, 0.7);
		text-align: right;
	}

	.partner-since strong {
		display: block;
		margin-top: 0.2rem;
		letter-spacing: normal;
		font-size: 1rem;
		color: #fff;
	}

	.partner-link {
		color: #fff;
		position: relative;
		width: fit-content;
	}

	.partner-link::after {
		content: "";
		position: absolute;
		left: 0;
		right: 0;
		bottom: -2px;
		height: 1px;
		background: rgba(255, 255, 255, 0.6);
		transition: transform 0.2s ease;
		transform-origin: left;
	}

	.partner-link:hover::after {
		transform: scaleX(1.1);
	}

	.partner-wall {
		background: linear-gradient(120deg, rgba(15, 23, 42, 0.04), rgba(99, 102, 241, 0.12));
		border: 1px solid rgba(99, 102, 241, 0.15);
		box-shadow: 0 20px 50px rgba(15, 23, 42, 0.15);
	}

	.partner-wall-chip {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 0.5rem 1.25rem;
		border-radius: 999px;
		background: rgba(15, 23, 42, 0.06);
		color: rgba(15, 23, 42, 0.7);
		font-size: 0.85rem;
		font-weight: 600;
	}

	.dark .partner-wall-chip {
		background: rgba(255, 255, 255, 0.08);
		color: rgba(255, 255, 255, 0.85);
	}

	.partner-wall-logo {
		border-radius: 1.25rem;
		border: 1px solid color-mix(in srgb, var(--partner-fill-dark, #94a3b8), rgba(148, 163, 184, 0.7));
		background: color-mix(in srgb, var(--partner-fill-light, #f5f5f5), rgba(255, 255, 255, 0.9));
		padding: 0.75rem 1rem;
		display: flex;
		align-items: center;
		justify-content: center;
		min-height: 4.5rem;
		opacity: 0.85;
		transition: transform 0.2s ease, opacity 0.2s ease;
	}

	.partner-wall-logo:hover {
		transform: translateY(-2px);
		opacity: 1;
	}
</style>
