---
import Card from "@/components/ui/Card.astro";
import Button from "@/components/ui/Button.astro";

interface Logo {
	image: typeof import("*?raw");
	fillLight: string;
	fillDark: string;
}

interface Partner {
	name: string;
	url: string;
	since: string;
	logo: Logo;
	level: "Malt" | "Blend" | "Dram" | "Nip";
	description?: string;
	industry?: string;
}

type Partners = Partner[];

const partners: Partners = [
	{
		name: "Heroku",
		level: "Malt",
		since: "2025",
		logo: {
			image: await import(`./logos/heroku.svg?raw`),
			fillLight: "#5A1BA9",
			fillDark: "#D7BFF2",
		},
		url: "https://heroku.com",
		description:
			"Pioneering platform-as-a-service provider enabling developers to build, run, and operate applications entirely in the cloud.",
		industry: "Cloud Platform",
	},
	{
		name: "Spectro Cloud",
		level: "Malt",
		since: "2025",
		logo: {
			image: await import(`./logos/spectrocloud.svg?raw`),
			fillLight: "#012121",
			fillDark: "#f7f1ed",
		},
		url: "https://spectrocloud.com",
		description:
			"Kubernetes management platform that simplifies the deployment, management, and operations of Kubernetes clusters.",
		industry: "Kubernetes",
	},
	{
		name: "ngrok",
		level: "Blend",
		since: "2024",
		logo: {
			image: await import(`./logos/ngrok.svg?raw`),
			fillLight: "#10239E",
			fillDark: "white",
		},
		url: "https://ngrok.com",
		description:
			"Secure tunneling solution that enables developers to expose local servers to the internet and build secure webhook consumers.",
		industry: "Developer Tools",
	},
	{
		name: "Zitadel",
		level: "Blend",
		since: "2025",
		logo: {
			image: await import(`./logos/zitadel.svg?raw`),
			fillLight: "#101010",
			fillDark: "white",
		},
		url: "https://zitadel.com",
		description:
			"Cloud-native identity and access management platform providing authentication, authorization, and user management.",
		industry: "Identity & Security",
	},
	{
		name: "ControlPlane",
		level: "Dram",
		since: "2024",
		logo: {
			image: await import(`./logos/controlplane.svg?raw`),
			fillLight: "black",
			fillDark: "white",
		},
		url: "https://controlplane.io",
		description:
			"Security engineering specialists helping organizations build and operate secure cloud native infrastructure.",
		industry: "Cloud Security",
	},
	{
		name: "Guidepad",
		level: "Dram",
		since: "2024",
		logo: {
			image: await import(`./logos/guidepad.svg?raw`),
			fillLight: "black",
			fillDark: "white",
		},
		url: "https://guidepad.io",
		description:
			"The Development Framework for managing complexity and expanding capabilities.",
		industry: "Developer Experience",
	},
	{
		name: "Microsoft Azure",
		level: "Nip",
		since: "2024",
		logo: {
			image: await import(`./logos/microsoft.svg?raw`),
			fillLight: "#706d6e",
			fillDark: "#706d6e",
		},
		url: "https://azure.com",
		description:
			"Cloud computing service for building, testing, deploying, and managing applications through Microsoft-managed data centers.",
		industry: "Cloud Services",
	},
	{
		name: "Fermyon",
		level: "Nip",
		since: "2024",
		logo: {
			image: await import(`./logos/fermyon.svg?raw`),
			fillLight: "#0d203f",
			fillDark: "#34E8BD",
		},
		url: "https://www.fermyon.com/?utm_source=rawkode&utm_medium=logo&utm_campaign=acad-sponsor",
		description:
			"Pioneering serverless WebAssembly platform enabling developers to build microservices with unprecedented efficiency.",
		industry: "WebAssembly",
	},
];
---

<!-- Flow spacing for consistent rhythm -->
<div class="flow mb-8" style="--flow-space: var(--spacing-8);">
	<p class="text-center text-lg text-gray-600 dark:text-gray-300">
		We're proud to collaborate with industry leaders who share our commitment to developer excellence.
		Our partnerships drive innovation and create valuable opportunities for the developer community.
	</p>
</div>

<!-- Partner grid using consistent spacing -->
<div
	class="grid grid-cols-1 text-center gap-8 md:grid-cols-2 xl:grid-cols-3"
>
	{
		partners.map(async (partner) => (
			<Card variant="elevated" hoverable class="group">
				<div class="flex flex-col h-full">
					<div class="grow">
						<!-- Logo container with consistent height -->
						<div
							class="flex justify-center items-center w-full h-24 mx-auto mb-4 transition-transform duration-[--duration-base] group-hover:scale-105"
							style=`fill: light-dark(${partner.logo.fillLight}, ${partner.logo.fillDark});`
						>
							<div class="w-48 flex items-center justify-center">
								<Fragment set:html={partner.logo.image.default} />
							</div>
						</div>

						<!-- Partner metadata with consistent spacing -->
						<div class="flex items-center justify-center gap-2 mt-3 mb-4">
							<span class={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${
								partner.level === "Malt"
									? "bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"
									: partner.level === "Blend"
									? "bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"
									: partner.level === "Dram"
									? "bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"
									: "bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"
							}`}>
								{partner.level} Partner
							</span>
							<span class="text-sm text-gray-500 dark:text-gray-400">
								Since {partner.since}
							</span>
						</div>

						{partner.industry && (
							<div class="mb-3">
								<span class="text-sm font-semibold text-gray-700 dark:text-gray-300">
									{partner.industry}
								</span>
							</div>
						)}

						{partner.description && (
							<p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
								{partner.description}
							</p>
						)}
					</div>
					
					<!-- CTA using normalized Button component -->
					<div class="mt-auto">
						<Button
							variant="outline"
							size="sm"
							href={partner.url}
							target="_blank"
							ariaLabel={`Visit ${partner.name} website`}
						>
							<svg
								aria-hidden="true"
								class="w-4 h-4"
								xmlns="http://www.w3.org/2000/svg"
								viewBox="0 0 20 20"
								fill="currentColor"
							>
								<path d="M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z" />
								<path d="M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z" />
							</svg>
							Visit {partner.name}
						</Button>
					</div>
				</div>
			</Card>
		))
	}
</div>
