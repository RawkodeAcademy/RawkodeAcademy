---
import { actions } from "astro:actions";
import Button from "@/components/common/Button.vue";
import PageHero from "@/components/common/PageHero.vue";
import H2Highlight from "@/components/title/h2-highlight.vue";
import Page from "@/wrappers/page.astro";

const result = Astro.getActionResult(actions.signupForKlustered);

export const prerender = false;
---

<Page title="Klustered" description="Sign up to be notified about the next season of Klustered.">
        <PageHero
                title="Klustered"
                subtitle="Get notified when the new season launches."
        >
                <Fragment slot="actions">
                        <Button href="#signup" variant="primary" size="lg">Notify Me</Button>
                </Fragment>
        </PageHero>

        <div id="signup" class="relative isolate px-6 lg:px-8 py-16">
                <div class="mx-auto max-w-4xl">
                        <H2Highlight title="Stay Updated" highlightWords="Updated" />
                        <div class="relative">
                                <div class="absolute inset-0 bg-linear-to-r from-primary/20 to-secondary/20 blur-xl opacity-30 rounded-xl gradient-animation"></div>
                                <div class="relative bg-white dark:bg-gray-800 p-8 rounded-xl shadow-lg border border-gray-200/50 dark:border-gray-700/50 backdrop-blur-sm">
                                        {result && result.data ? (
                                                <div class="text-center py-8 animate-fadeIn">
                                                        <div class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-green-100 dark:bg-green-900/30 mb-6 animate-float">
                                                                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-green-600 dark:text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                                                </svg>
                                                        </div>
                                                        <h3 class="text-2xl font-bold bg-linear-to-r from-primary to-secondary inline-block text-transparent bg-clip-text mb-3 gradient-animation">Thank You!</h3>
                                                        <p class="text-lg text-gray-700 dark:text-gray-300 mb-6 animate-slideUp animate-delay-200">
                                                                We've added your email to our notification list. We'll let you know as soon as the new season starts!
                                                        </p>
                                                </div>
                                        ) : (
                                                <>
                                                        {result && result.error && (
                                                                <div class="mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg text-red-800 dark:text-red-300 animate-fadeIn">
                                                                        <p class="font-medium">Error: {result.error.message}</p>
                                                                </div>
                                                        )}

                                                        <form method="POST" action={actions.signupForKlustered} class="space-y-6 animate-fadeIn">
                                                                <div>
                                                                        <label for="email" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Email address</label>
                                                                        <div class="relative">
                                                                                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                                                                                        </svg>
                                                                                </div>
                                                                                <input type="email" id="email" name="email" required placeholder="your@email.com" class="w-full pl-12 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-xl focus:ring-2 focus:ring-primary focus:border-primary bg-white dark:bg-gray-700 text-gray-900 dark:text-white transition-all duration-300 hover:shadow-md" />
                                                                        </div>
                                                                </div>

                                                                <button type="submit" class="w-full bg-linear-to-r from-primary to-secondary hover:from-primary/90 hover:to-secondary/90 text-white font-medium py-3 px-4 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 flex items-center justify-center hover:scale-[1.02] gradient-animation">
                                                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                                                                        </svg>
                                                                        <span>Sign Up for Updates</span>
                                                                </button>
                                                        </form>
                                                </>
                                        )}
                                </div>
                        </div>
                </div>
        </div>
</Page>
