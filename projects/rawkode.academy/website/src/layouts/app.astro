---
import Navbar from "@/components/nav/Navbar.astro";
import Sidebar from "@/components/sidebar/index.vue";
import CommandPaletteWrapper from "@/components/command-palette/wrapper.tsx";
import Footer from "@/components/footer/Footer.astro";
---

<div class="antialiased">
	<Navbar height="64px" />

	<Sidebar client:only="vue" />

	<div class="flex flex-col min-h-screen">
		<div class="flex overflow-hidden flex-1">
			<main class="w-full md:ml-64 h-auto pt-20 px-4 md:px-8 overflow-x-hidden">
			<div
				class="relative overflow-hidden bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-700 text-white"
			>
				<div
					class="absolute inset-0 bg-gradient-to-r from-purple-600/90 via-blue-600/80 to-indigo-700/90 animate-pulse pointer-events-none"
				>
				</div>

				<!-- Desktop Layout -->
				<div
					class="relative hidden sm:flex items-center justify-center py-2 px-4 z-10"
				>
					<div class="flex items-center space-x-6">
						<div class="flex items-center space-x-2">
							<svg
								class="w-4 h-4 text-yellow-300"
								fill="currentColor"
								viewBox="0 0 20 20"
							>
								<path
									fill-rule="evenodd"
									d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
									clip-rule="evenodd"></path>
							</svg>
							<span class="font-semibold text-yellow-300 text-sm tracking-wide"
								>OPEN SOURCE</span
							>
						</div>
						<div class="flex items-center space-x-2">
							<a
								target="_blank"
								href="https://github.com/RawkodeAcademy/RawkodeAcademy/issues/new"
								class="bg-white/15 hover:bg-white/25 text-white text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"
							>
								Create an Issue
							</a>
							<a
								target="_blank"
								href="https://github.com/RawkodeAcademy/RawkodeAcademy"
								class="bg-yellow-400/90 hover:bg-yellow-400 text-purple-900 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"
							>
								Contribute
							</a>
						</div>
					</div>
				</div>

				<!-- Mobile Layout -->
				<div class="relative sm:hidden py-2 px-3 z-10">
					<div class="flex flex-col items-center space-y-2">
						<div class="flex items-center space-x-2">
							<svg
								class="w-4 h-4 text-yellow-300"
								fill="currentColor"
								viewBox="0 0 20 20"
							>
								<path
									fill-rule="evenodd"
									d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zm7.44 5.252a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
									clip-rule="evenodd"></path>
							</svg>
							<span class="font-semibold text-yellow-300 text-sm tracking-wide"
								>OPEN SOURCE</span
							>
						</div>
						<div class="flex items-center space-x-2">
							<a
								target="_blank"
								href="https://github.com/RawkodeAcademy/RawkodeAcademy/issues/new"
								class="bg-white/15 hover:bg-white/25 text-white text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"
							>
								Create an Issue
							</a>
							<a
								target="_blank"
								href="https://github.com/RawkodeAcademy/RawkodeAcademy"
								class="bg-yellow-400/90 hover:bg-yellow-400 text-purple-900 text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200"
							>
								Contribute
							</a>
						</div>
					</div>
				</div>

				<div
					class="absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none"
				>
					<div
						class="absolute top-2 left-4 w-2 h-2 bg-white rounded-full animate-ping"
					>
					</div>
					<div
						class="absolute top-4 right-8 w-1 h-1 bg-yellow-300 rounded-full animate-ping"
						style="animation-delay: 0.5s;"
					>
					</div>
					<div
						class="absolute bottom-2 left-1/4 w-1.5 h-1.5 bg-purple-300 rounded-full animate-ping"
						style="animation-delay: 1s;"
					>
					</div>
					<div
						class="absolute bottom-3 right-1/3 w-1 h-1 bg-blue-300 rounded-full animate-ping"
						style="animation-delay: 1.5s;"
					>
					</div>
				</div>
			</div>
				<slot />
			</main>
		</div>
		<div class="md:ml-64">
			<Footer />
		</div>
	</div>

	<CommandPaletteWrapper client:only="react" />

	<!-- Floating Action Button for mobile search -->
	<button
		id="fab-search"
		class="md:hidden fixed bottom-6 right-6 z-50 w-14 h-14 bg-gradient-to-r from-primary to-secondary text-white rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200 flex items-center justify-center"
		aria-label="Open search"
	>
		<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
			<path
				stroke-linecap="round"
				stroke-linejoin="round"
				stroke-width="2"
				d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
		</svg>
	</button>

	<script>
		// Function to open command palette (shared utility)
		function openCommandPalette() {
			const isMac = navigator.userAgent.toLowerCase().includes("mac");
			document.dispatchEvent(
				new KeyboardEvent("keydown", {
					key: "k",
					metaKey: isMac,
					ctrlKey: !isMac,
					bubbles: true,
				}),
			);
		}

		// Add FAB search button handler
		const fabSearch = document.getElementById("fab-search");
		if (fabSearch) {
			fabSearch.addEventListener("click", (e) => {
				e.preventDefault();
				openCommandPalette();
			});
		}
	</script>
</div>
