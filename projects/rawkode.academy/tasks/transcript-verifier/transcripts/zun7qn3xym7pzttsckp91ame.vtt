WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: a455356c-90da-4d9a-853d-61ae759ef15c
Created: 2025-04-29T19:38:25.612Z
Duration: 7245.1084
Channels: 1

00:03:18.320 --> 00:03:19.200
<v Speaker 0>Hello,

00:03:19.200 --> 00:03:21.920
<v Speaker 0>and welcome to today's episode of Rawkode live.

00:03:21.920 --> 00:03:24.480
<v Speaker 0>This is the fifth episode of clustered,

00:03:24.480 --> 00:03:27.120
<v Speaker 0>a show in which we have two Kubernetes

00:03:27.120 --> 00:03:29.840
<v Speaker 0>clusters broken by members of the community,

00:03:29.920 --> 00:03:32.265
<v Speaker 0>and we will try to fix them live.

00:03:32.265 --> 00:03:34.185
<v Speaker 0>Now before we get started and I introduce

00:03:34.185 --> 00:03:35.305
<v Speaker 0>my guest for today,

00:03:35.625 --> 00:03:37.865
<v Speaker 0>I'm gonna remember to do my housekeeping.

00:03:37.944 --> 00:03:38.505
<v Speaker 0>So

00:03:39.385 --> 00:03:41.864
<v Speaker 0>please remember, we have a Discord channel. Come

00:03:41.864 --> 00:03:43.705
<v Speaker 0>and join us in the chat. Right now,

00:03:43.705 --> 00:03:45.385
<v Speaker 0>we are giving away a cluster t shirt.

00:03:45.650 --> 00:03:46.850
<v Speaker 0>All you have to do is join a

00:03:46.850 --> 00:03:48.930
<v Speaker 0>cluster channel and thumbs up on the contest,

00:03:48.930 --> 00:03:50.290
<v Speaker 0>and you'll have a chance to win. The

00:03:50.290 --> 00:03:52.690
<v Speaker 0>prize should be drawn in roughly one hour.

00:03:53.330 --> 00:03:55.970
<v Speaker 0>Also, remember to subscribe to us on YouTube

00:03:55.970 --> 00:03:57.730
<v Speaker 0>and text that bell. That helps other people

00:03:57.730 --> 00:03:58.775
<v Speaker 0>find their content.

00:03:59.415 --> 00:04:02.375
<v Speaker 0>And I wanna thank Equinix Medal, my employer.

00:04:02.855 --> 00:04:04.935
<v Speaker 0>They donate bare

00:04:04.935 --> 00:04:06.935
<v Speaker 0>metal, the resources, and the time for me

00:04:06.935 --> 00:04:07.815
<v Speaker 0>to do this.

00:04:08.455 --> 00:04:09.735
<v Speaker 0>As much as I hate it and enjoy

00:04:09.735 --> 00:04:11.015
<v Speaker 0>it at the same time, I've gotta thank

00:04:11.015 --> 00:04:12.215
<v Speaker 0>them. It's a pleasure.

00:04:12.890 --> 00:04:15.930
<v Speaker 0>Alright. Let's crack on. Today, I am joined

00:04:15.930 --> 00:04:18.410
<v Speaker 0>by a friend and colleague, Jason DeTibbers. Hey,

00:04:18.410 --> 00:04:19.690
<v Speaker 0>Jason. How are you?

00:04:20.250 --> 00:04:22.890
<v Speaker 1>Hey. Thanks for having me. I'm doing well.

00:04:23.290 --> 00:04:24.730
<v Speaker 1>So for those who don't know me,

00:04:25.725 --> 00:04:26.925
<v Speaker 1>my name is Jason.

00:04:27.245 --> 00:04:31.165
<v Speaker 1>I've been involved with Kubernetes now for, oh,

00:04:31.165 --> 00:04:31.645
<v Speaker 1>wow,

00:04:32.205 --> 00:04:33.965
<v Speaker 1>about six years now.

00:04:34.765 --> 00:04:36.525
<v Speaker 1>Been doing mostly

00:04:36.685 --> 00:04:38.445
<v Speaker 1>cluster life cycle management

00:04:39.250 --> 00:04:39.970
<v Speaker 1>and

00:04:40.530 --> 00:04:43.330
<v Speaker 1>trying to help people get Kubernetes clusters.

00:04:43.730 --> 00:04:45.570
<v Speaker 1>So it should be fun to help try

00:04:45.570 --> 00:04:48.210
<v Speaker 1>to rescue some broken ones. It's been a

00:04:48.210 --> 00:04:51.490
<v Speaker 1>while since I've had to troubleshoot and and

00:04:51.490 --> 00:04:52.770
<v Speaker 1>fix live clusters.

00:04:54.585 --> 00:04:57.305
<v Speaker 0>Yes. Yes. Definitely. I think that your experience

00:04:57.305 --> 00:04:59.705
<v Speaker 0>is gonna be fantastic today with all the

00:04:59.705 --> 00:05:01.224
<v Speaker 0>the things that you've done in the Kubernetes

00:05:01.224 --> 00:05:02.824
<v Speaker 0>community and the projects that you've worked on.

00:05:02.824 --> 00:05:03.945
<v Speaker 0>It's like I'm hoping

00:05:04.185 --> 00:05:05.865
<v Speaker 0>we're we're gonna sail through this in the

00:05:05.865 --> 00:05:07.544
<v Speaker 0>record time. That's what I'm hoping for today.

00:05:09.510 --> 00:05:10.390
<v Speaker 0>Okay.

00:05:10.390 --> 00:05:13.510
<v Speaker 0>Let's see. We have two great clusters today.

00:05:13.750 --> 00:05:17.110
<v Speaker 0>Our first cluster was broken by Thomas Stromberg,

00:05:17.350 --> 00:05:19.270
<v Speaker 0>a name that people from the Kubernetes community

00:05:19.270 --> 00:05:21.990
<v Speaker 0>may be familiar with. He is responsible

00:05:21.990 --> 00:05:24.070
<v Speaker 0>for the mini cube project

00:05:25.145 --> 00:05:25.865
<v Speaker 0>and

00:05:26.185 --> 00:05:28.265
<v Speaker 0>has set a little bit of fear into

00:05:28.265 --> 00:05:29.545
<v Speaker 0>my life today.

00:05:29.545 --> 00:05:31.305
<v Speaker 0>I'm gonna pull up a tweet.

00:05:33.385 --> 00:05:35.625
<v Speaker 0>Oh, scroll, scroll, scroll. There we go.

00:05:36.930 --> 00:05:40.289
<v Speaker 0>Thomas was concerned that the break was too

00:05:40.289 --> 00:05:42.530
<v Speaker 0>breaky if that's the thing and

00:05:43.490 --> 00:05:45.169
<v Speaker 0>isn't actually sure if we'll be able to

00:05:45.169 --> 00:05:46.770
<v Speaker 0>fix it, but I'm hoping we can surprise

00:05:46.770 --> 00:05:48.530
<v Speaker 0>him a little bit here. So let's crack

00:05:48.530 --> 00:05:51.250
<v Speaker 0>on that and Thomas has joined the chat.

00:05:51.250 --> 00:05:51.650
<v Speaker 0>There we go.

00:05:52.615 --> 00:05:55.175
<v Speaker 0>Thomas is a horrible goose. Yes. Thank you.

00:05:55.175 --> 00:05:56.775
<v Speaker 0>We're excited excited

00:05:56.775 --> 00:05:58.215
<v Speaker 0>to tackle this one.

00:05:59.014 --> 00:05:59.735
<v Speaker 0>Alright.

00:05:59.815 --> 00:06:02.294
<v Speaker 0>Let's see. Let's pull up my screen share.

00:06:02.294 --> 00:06:05.310
<v Speaker 0>We should have a shared teleport instance. We

00:06:05.310 --> 00:06:08.750
<v Speaker 0>use Teleport to, commoditize access to the server,

00:06:08.750 --> 00:06:11.310
<v Speaker 0>and, hopefully, it means that Jason and I

00:06:11.310 --> 00:06:13.390
<v Speaker 0>can share a terminal. Let me remove the

00:06:13.390 --> 00:06:14.750
<v Speaker 0>Discord chat for now.

00:06:14.990 --> 00:06:16.590
<v Speaker 0>Alright. Jason, you should be able to join

00:06:16.590 --> 00:06:18.590
<v Speaker 0>the session by going to active sessions and

00:06:18.590 --> 00:06:19.310
<v Speaker 0>clicking join.

00:06:21.465 --> 00:06:22.425
<v Speaker 0>We hope.

00:06:23.065 --> 00:06:24.905
<v Speaker 0>And feel free just to type a echo

00:06:24.905 --> 00:06:26.185
<v Speaker 0>hello if you can.

00:06:26.665 --> 00:06:27.465
<v Speaker 0>Yep.

00:06:29.865 --> 00:06:30.825
<v Speaker 0>Let's see.

00:06:31.625 --> 00:06:32.665
<v Speaker 0>That's me.

00:06:34.104 --> 00:06:34.985
<v Speaker 1>Oh, there we go.

00:06:41.289 --> 00:06:42.410
<v Speaker 1>There we go.

00:06:43.289 --> 00:06:45.050
<v Speaker 0>Hey. Nice. Okay.

00:06:45.370 --> 00:06:47.530
<v Speaker 0>So we both have a shared terminal. Our

00:06:47.530 --> 00:06:50.169
<v Speaker 0>cluster is a single control plane. I have

00:06:50.169 --> 00:06:53.155
<v Speaker 0>learned that now after four episodes, three episodes

00:06:53.155 --> 00:06:55.155
<v Speaker 0>that I don't wanna replicate my fixes to

00:06:55.155 --> 00:06:57.475
<v Speaker 0>three different cluster nodes.

00:06:57.875 --> 00:06:59.635
<v Speaker 0>Although we do still have

00:07:00.435 --> 00:07:02.435
<v Speaker 0>three Oh, there's only two worker nodes here.

00:07:02.435 --> 00:07:03.555
<v Speaker 0>I wonder if one of them is dead.

00:07:04.060 --> 00:07:05.260
<v Speaker 0>We're gonna find out.

00:07:05.900 --> 00:07:07.500
<v Speaker 0>So what would you like to do first,

00:07:07.500 --> 00:07:09.100
<v Speaker 0>Jason? What do you wanna check?

00:07:09.979 --> 00:07:11.979
<v Speaker 1>Well, I think the first thing we should

00:07:11.979 --> 00:07:13.740
<v Speaker 1>probably do is try to see if we

00:07:13.740 --> 00:07:15.900
<v Speaker 1>can reach the API server and go from

00:07:15.900 --> 00:07:16.540
<v Speaker 1>there.

00:07:16.780 --> 00:07:17.020
<v Speaker 0>So

00:07:28.385 --> 00:07:30.625
<v Speaker 1>and it looks like we do not have

00:07:30.625 --> 00:07:31.825
<v Speaker 1>access. So

00:07:33.130 --> 00:07:34.170
<v Speaker 0>Go figure.

00:07:36.650 --> 00:07:39.130
<v Speaker 1>That's at least telling us something. We're already

00:07:39.130 --> 00:07:41.290
<v Speaker 1>on the control plane machine, so we don't

00:07:41.290 --> 00:07:43.530
<v Speaker 1>have to move to a different host.

00:07:45.064 --> 00:07:48.104
<v Speaker 1>So we're using container d here. So I

00:07:48.104 --> 00:07:51.065
<v Speaker 1>can do a a CTR

00:07:51.625 --> 00:07:54.264
<v Speaker 1>namespaces because I can't remember exactly what the

00:07:54.264 --> 00:07:55.145
<v Speaker 1>namespace

00:07:57.750 --> 00:07:59.270
<v Speaker 1>is for Kubernetes,

00:07:59.270 --> 00:08:00.870
<v Speaker 1>and it's kates dot I o.

00:08:04.070 --> 00:08:06.470
<v Speaker 1>And I don't have tab completion, but

00:08:08.950 --> 00:08:10.790
<v Speaker 0>I'm just gonna reload that. That's that weird

00:08:10.790 --> 00:08:11.670
<v Speaker 0>thing. We're good.

00:08:14.625 --> 00:08:16.224
<v Speaker 0>And I So I've never used the ctr

00:08:16.224 --> 00:08:17.264
<v Speaker 0>command before.

00:08:18.065 --> 00:08:19.745
<v Speaker 1>I think I can do c l s

00:08:19.745 --> 00:08:21.985
<v Speaker 1>to look at all the containers in there.

00:08:26.380 --> 00:08:28.620
<v Speaker 1>Now, alternatively, I could probably use

00:08:29.259 --> 00:08:29.580
<v Speaker 1>the

00:08:31.419 --> 00:08:33.020
<v Speaker 1>I don't even know how you would pronounce

00:08:33.020 --> 00:08:34.620
<v Speaker 1>it. The c r I c t l

00:08:34.620 --> 00:08:35.340
<v Speaker 1>tool,

00:08:36.220 --> 00:08:37.500
<v Speaker 1>which would let us see pods.

00:08:40.004 --> 00:08:42.964
<v Speaker 0>Okay. So we have an API server that's

00:08:42.964 --> 00:08:43.924
<v Speaker 0>not responding.

00:08:46.404 --> 00:08:47.845
<v Speaker 0>Would you not just use p s? Is

00:08:47.845 --> 00:08:49.685
<v Speaker 0>there an added value to maybe going through

00:08:49.685 --> 00:08:50.884
<v Speaker 0>the CTR command?

00:08:51.830 --> 00:08:53.990
<v Speaker 1>Yeah. I mean, I I think

00:08:54.550 --> 00:08:57.030
<v Speaker 1>probably not. I mean, either way would work.

00:08:57.910 --> 00:08:59.990
<v Speaker 1>Normally, if it was a docker based host,

00:08:59.990 --> 00:09:01.670
<v Speaker 1>I'd just do a docker p s and

00:09:01.670 --> 00:09:03.430
<v Speaker 1>and go from there, and then docker logs

00:09:03.430 --> 00:09:05.190
<v Speaker 1>to get the logs for the host.

00:09:10.425 --> 00:09:11.145
<v Speaker 0>Okay.

00:09:12.024 --> 00:09:14.185
<v Speaker 0>Alright. But Cool. We can do a p

00:09:14.185 --> 00:09:15.385
<v Speaker 1>s. That'll work.

00:09:18.505 --> 00:09:19.785
<v Speaker 1>It helps if I grep. Right?

00:09:23.010 --> 00:09:24.610
<v Speaker 1>No API server.

00:09:24.610 --> 00:09:25.970
<v Speaker 1>Do we have an etcd?

00:09:26.930 --> 00:09:28.930
<v Speaker 1>It looks like we at least have etcd.

00:09:29.490 --> 00:09:32.210
<v Speaker 0>Oh, I see something very suspicious already with

00:09:32.210 --> 00:09:35.090
<v Speaker 0>a a whale a

00:09:35.090 --> 00:09:36.210
<v Speaker 0>whale true there.

00:09:38.205 --> 00:09:39.165
<v Speaker 1>Yes.

00:09:39.885 --> 00:09:42.845
<v Speaker 0>So I mean, I'm I'm does it we've

00:09:42.845 --> 00:09:43.645
<v Speaker 0>seen that?

00:09:44.685 --> 00:09:46.205
<v Speaker 0>I'm assuming we can just go ahead and

00:09:46.205 --> 00:09:47.805
<v Speaker 0>kill that. We probably don't want that to

00:09:47.805 --> 00:09:48.765
<v Speaker 0>be running. Right?

00:09:49.860 --> 00:09:51.940
<v Speaker 1>Yeah. Probably not.

00:09:52.420 --> 00:09:53.140
<v Speaker 1>So

00:09:53.300 --> 00:09:55.940
<v Speaker 1>let's go ahead and Thomas has commented and

00:09:55.940 --> 00:09:58.900
<v Speaker 0>says that cry control is crying cuddle,

00:09:58.980 --> 00:10:00.660
<v Speaker 0>which is I think is our advice for

00:10:00.660 --> 00:10:00.980
<v Speaker 0>today.

00:10:09.115 --> 00:10:11.355
<v Speaker 1>Alright. That at least got rid of that.

00:10:11.355 --> 00:10:13.595
<v Speaker 1>We'll see if it responds again at least.

00:10:15.035 --> 00:10:16.555
<v Speaker 0>Yeah. So I think that was just killing

00:10:16.555 --> 00:10:18.875
<v Speaker 0>EdCT. Anyway, I don't think it was

00:10:19.730 --> 00:10:21.730
<v Speaker 0>Yeah. And we can see EdCD there, so

00:10:21.730 --> 00:10:22.449
<v Speaker 0>that's good.

00:10:23.329 --> 00:10:24.850
<v Speaker 1>Yep. The other thing we can do is

00:10:24.850 --> 00:10:27.170
<v Speaker 1>we can also look at the kubelet logs

00:10:27.170 --> 00:10:27.889
<v Speaker 1>as well.

00:10:31.250 --> 00:10:33.904
<v Speaker 0>And that's because the kubelet is responsible for

00:10:33.904 --> 00:10:36.225
<v Speaker 0>spinning up through static manifests all of the

00:10:36.225 --> 00:10:38.065
<v Speaker 0>control plane controllers. Right?

00:10:38.865 --> 00:10:39.585
<v Speaker 1>Exactly.

00:10:42.385 --> 00:10:44.065
<v Speaker 1>So in this case, we can see that

00:10:44.065 --> 00:10:44.865
<v Speaker 1>there's

00:10:44.945 --> 00:10:46.464
<v Speaker 1>a crash back off loop.

00:10:54.560 --> 00:10:56.320
<v Speaker 1>Failed to get status for

00:10:57.440 --> 00:10:59.200
<v Speaker 1>cube API server,

00:10:59.279 --> 00:11:00.880
<v Speaker 1>TLS handshake time out.

00:11:01.655 --> 00:11:04.055
<v Speaker 1>That's not too surprising there.

00:11:05.575 --> 00:11:07.655
<v Speaker 0>We've got quite a lot going on here.

00:11:13.175 --> 00:11:15.095
<v Speaker 1>So I I think

00:11:18.090 --> 00:11:19.050
<v Speaker 0>So should we take a look at the

00:11:19.130 --> 00:11:21.450
<v Speaker 1>look at logs. The API server logs. Right?

00:11:21.770 --> 00:11:23.850
<v Speaker 1>Yeah. Let's go there. Okay.

00:11:26.890 --> 00:11:27.450
<v Speaker 1>I

00:11:28.410 --> 00:11:30.250
<v Speaker 1>think they get output to the bar log

00:11:30.250 --> 00:11:30.730
<v Speaker 1>somewhere.

00:11:32.005 --> 00:11:34.485
<v Speaker 0>Duffy is suggesting we restart the kubelet and

00:11:34.485 --> 00:11:36.325
<v Speaker 0>I'm I'm not falling for that one again.

00:11:40.165 --> 00:11:42.485
<v Speaker 0>It caused me more problems than than it

00:11:42.485 --> 00:11:43.285
<v Speaker 0>fixed last time.

00:11:49.480 --> 00:11:51.080
<v Speaker 1>What do we have here?

00:11:54.280 --> 00:11:56.600
<v Speaker 1>We got cube API server.

00:11:57.800 --> 00:11:59.880
<v Speaker 0>Oh, I think I need to reload again.

00:12:00.520 --> 00:12:01.965
<v Speaker 0>Oh, no. You were just looking at tab

00:12:01.965 --> 00:12:03.645
<v Speaker 0>completion. Okay. That does That's not shared.

00:12:15.569 --> 00:12:17.010
<v Speaker 0>Alright. Hey.

00:12:19.250 --> 00:12:21.170
<v Speaker 0>So does that mean it's unable to speak

00:12:21.170 --> 00:12:22.930
<v Speaker 0>to etcd?

00:12:23.410 --> 00:12:25.810
<v Speaker 0>I see a context. Cd speaking to local

00:12:25.810 --> 00:12:28.370
<v Speaker 0>host two three seven nine. Remember right that

00:12:28.370 --> 00:12:29.730
<v Speaker 0>it's the etcd ports.

00:12:30.209 --> 00:12:33.225
<v Speaker 1>It is. So we can probably go there

00:12:33.225 --> 00:12:34.345
<v Speaker 1>to s c d.

00:12:38.185 --> 00:12:38.905
<v Speaker 0>Alright.

00:12:39.385 --> 00:12:41.145
<v Speaker 0>And we have fixed s c d, so

00:12:41.145 --> 00:12:43.465
<v Speaker 0>I guess we just need to either wait

00:12:43.465 --> 00:12:44.745
<v Speaker 0>or hurry up a little bit.

00:12:49.980 --> 00:12:50.700
<v Speaker 1>So

00:12:50.860 --> 00:12:52.300
<v Speaker 1>looks like we have

00:12:52.779 --> 00:12:53.899
<v Speaker 1>two logs here.

00:12:58.355 --> 00:13:01.075
<v Speaker 1>I'm guessing at one point, we had multiple

00:13:01.235 --> 00:13:02.274
<v Speaker 1>containers.

00:13:05.475 --> 00:13:06.595
<v Speaker 0>Oh, that's good.

00:13:10.514 --> 00:13:12.195
<v Speaker 0>Yeah. That one looked good.

00:13:14.140 --> 00:13:16.140
<v Speaker 1>At least no obvious failures.

00:13:26.235 --> 00:13:28.155
<v Speaker 0>So the only error we've seen in API

00:13:28.155 --> 00:13:30.795
<v Speaker 0>server logs was the the context design for

00:13:30.795 --> 00:13:31.675
<v Speaker 0>etcd.

00:13:31.675 --> 00:13:35.035
<v Speaker 0>Etcd was broken by, we think, the infinite

00:13:35.035 --> 00:13:37.755
<v Speaker 0>sleep or well true sleep kill, which we've

00:13:37.755 --> 00:13:38.075
<v Speaker 0>stopped.

00:13:39.740 --> 00:13:41.340
<v Speaker 0>Should we just be should we just check

00:13:41.340 --> 00:13:43.100
<v Speaker 0>the API server's running again?

00:13:44.860 --> 00:13:45.740
<v Speaker 1>We can.

00:13:46.220 --> 00:13:47.980
<v Speaker 1>One of the other things, because we saw

00:13:47.980 --> 00:13:50.060
<v Speaker 1>that not being able to connect to twenty

00:13:50.060 --> 00:13:51.500
<v Speaker 1>three seventy nine, we can just do a

00:13:51.500 --> 00:13:52.380
<v Speaker 1>netstat and see

00:13:53.325 --> 00:13:55.805
<v Speaker 1>if we're actually listening there. And it looks

00:13:55.805 --> 00:13:56.685
<v Speaker 1>like we are.

00:14:00.925 --> 00:14:03.725
<v Speaker 0>I don't see a 2379,

00:14:03.725 --> 00:14:04.365
<v Speaker 0>do you?

00:14:06.045 --> 00:14:06.845
<v Speaker 1>Oh, I guess.

00:14:08.200 --> 00:14:10.040
<v Speaker 1>I I scrolled up, but I guess we

00:14:10.040 --> 00:14:11.800
<v Speaker 1>don't share the same scroll button. No. We

00:14:11.800 --> 00:14:13.959
<v Speaker 0>don't show the Yeah. Oh, yeah. Okay. Yeah.

00:14:13.959 --> 00:14:14.920
<v Speaker 0>It is there.

00:14:15.640 --> 00:14:17.320
<v Speaker 0>Cool. Looks good.

00:14:19.000 --> 00:14:20.920
<v Speaker 1>So we at least have an etcd port.

00:14:22.145 --> 00:14:23.985
<v Speaker 1>We can go ahead and take a look

00:14:23.985 --> 00:14:26.545
<v Speaker 1>at the API server logs again, or we

00:14:26.545 --> 00:14:28.785
<v Speaker 1>can see if there was a second container

00:14:28.785 --> 00:14:29.825
<v Speaker 1>there too.

00:14:32.625 --> 00:14:34.065
<v Speaker 0>Alright. Whatever you think is best.

00:14:39.490 --> 00:14:40.290
<v Speaker 0>Alright.

00:14:40.770 --> 00:14:42.290
<v Speaker 0>It looks like there's only

00:14:42.530 --> 00:14:43.810
<v Speaker 1>the one there.

00:14:45.170 --> 00:14:46.530
<v Speaker 0>So if that was in a crash lit

00:14:46.530 --> 00:14:49.490
<v Speaker 0>back off rather than like

00:14:49.135 --> 00:14:50.975
<v Speaker 1>It probably just hasn't

00:14:51.695 --> 00:14:52.095
<v Speaker 0>Yeah.

00:14:52.815 --> 00:14:54.334
<v Speaker 0>There'll be some sort of exponential back off

00:14:54.334 --> 00:14:56.095
<v Speaker 0>on that one there. So can we

00:14:56.894 --> 00:14:58.015
<v Speaker 0>we encovage it?

00:14:59.055 --> 00:15:00.815
<v Speaker 0>Yeah. I should be able to just touch

00:15:00.815 --> 00:15:02.334
<v Speaker 1>the file in here. But

00:15:02.910 --> 00:15:04.750
<v Speaker 1>since I have watched an episode or two

00:15:04.750 --> 00:15:06.670
<v Speaker 1>before before I touch it,

00:15:07.550 --> 00:15:09.070
<v Speaker 1>it doesn't hurt to take a look at

00:15:09.070 --> 00:15:11.230
<v Speaker 1>the the time stamps here.

00:15:12.910 --> 00:15:14.910
<v Speaker 1>And it looks like the time stamps are

00:15:14.910 --> 00:15:18.110
<v Speaker 1>relatively normal, so it's not gonna hurt to

00:15:18.110 --> 00:15:18.670
<v Speaker 1>touch it.

00:15:23.525 --> 00:15:24.245
<v Speaker 0>Now.

00:15:24.725 --> 00:15:27.125
<v Speaker 0>Thomas is dropping us a small hint. He

00:15:27.125 --> 00:15:29.205
<v Speaker 0>says, it's listening, but does it answer?

00:15:33.080 --> 00:15:34.920
<v Speaker 0>We may have to dust off our

00:15:35.720 --> 00:15:38.680
<v Speaker 0>Telnet command or something or etcd commands. I

00:15:38.680 --> 00:15:40.600
<v Speaker 0>need to pull up my my famous cheat

00:15:40.600 --> 00:15:42.040
<v Speaker 0>sheet that I keep borrowing.

00:15:44.200 --> 00:15:45.560
<v Speaker 1>So we don't have

00:15:46.074 --> 00:15:47.595
<v Speaker 1>We don't have etcd

00:15:47.755 --> 00:15:49.195
<v Speaker 1>cuddle installed.

00:15:49.915 --> 00:15:52.475
<v Speaker 1>We should be on an Ubuntu host here.

00:15:52.875 --> 00:15:55.035
<v Speaker 1>I don't know if it's prepackaged for Ubuntu

00:15:55.035 --> 00:15:56.875
<v Speaker 1>or not. Etcd dash claim.

00:15:57.834 --> 00:15:58.714
<v Speaker 1>That'll work.

00:15:59.370 --> 00:16:01.530
<v Speaker 0>Yeah. I've done that a few times now.

00:16:02.410 --> 00:16:03.130
<v Speaker 1>If I can.

00:16:16.345 --> 00:16:18.825
<v Speaker 0>Something a little bit effy was a networking

00:16:18.825 --> 00:16:19.545
<v Speaker 0>here.

00:16:21.625 --> 00:16:22.745
<v Speaker 0>And the plot seconds.

00:16:25.480 --> 00:16:27.000
<v Speaker 1>So we have connectivity,

00:16:27.000 --> 00:16:29.959
<v Speaker 1>but we don't have DNS that appears. Hold

00:16:29.959 --> 00:16:31.720
<v Speaker 0>on. Someone said there's always DNS. I need

00:16:31.720 --> 00:16:33.399
<v Speaker 0>to I need to pop that up there.

00:16:34.279 --> 00:16:36.040
<v Speaker 0>Well, he's he was in early with that.

00:16:36.040 --> 00:16:36.600
<v Speaker 0>There we go.

00:16:45.715 --> 00:16:47.155
<v Speaker 1>Well, that's an interesting

00:16:47.395 --> 00:16:49.715
<v Speaker 1>name server that we have there. Yeah. I

00:16:49.715 --> 00:16:51.235
<v Speaker 0>think we could probably just drop that out

00:16:51.235 --> 00:16:52.915
<v Speaker 0>for 8.8.8.eight.

00:16:59.880 --> 00:17:01.639
<v Speaker 1>And I know some people are probably screaming

00:17:01.639 --> 00:17:04.440
<v Speaker 1>at the screen because I don't remember my

00:17:04.599 --> 00:17:07.799
<v Speaker 1>VI short code short codes to do things

00:17:07.799 --> 00:17:08.919
<v Speaker 1>like delete stuff.

00:17:12.494 --> 00:17:15.294
<v Speaker 0>Do you wanna try curling Google or yeah.

00:17:15.294 --> 00:17:16.654
<v Speaker 0>I'll ping Google. There we So

00:17:19.694 --> 00:17:20.654
<v Speaker 1>we have that.

00:17:21.855 --> 00:17:23.054
<v Speaker 0>K. So

00:17:23.454 --> 00:17:24.255
<v Speaker 0>that wouldn't have

00:17:24.815 --> 00:17:27.160
<v Speaker 0>I think that was just yeah. Luck that

00:17:27.160 --> 00:17:28.520
<v Speaker 0>we found out trying to do an update.

00:17:28.520 --> 00:17:30.040
<v Speaker 0>That won't be our NCD problem, so we

00:17:30.040 --> 00:17:31.240
<v Speaker 0>still need NCD control.

00:17:40.295 --> 00:17:41.415
<v Speaker 0>Do you want me to grab the cheat

00:17:41.415 --> 00:17:43.415
<v Speaker 0>sheet or are you have you got this?

00:17:44.775 --> 00:17:46.455
<v Speaker 0>If you have the cheat sheet handy, let's

00:17:46.455 --> 00:17:48.375
<v Speaker 0>go ahead and use that. Otherwise, I'm gonna

00:17:48.375 --> 00:17:48.855
<v Speaker 1>be

00:17:49.575 --> 00:17:51.975
<v Speaker 1>fighting with the I really need to bookmark

00:17:51.975 --> 00:17:53.655
<v Speaker 0>it at this point I feel just because

00:17:53.655 --> 00:17:55.320
<v Speaker 0>I use it so much,

00:17:55.799 --> 00:17:58.280
<v Speaker 0>but these are the way my favorite. I'm

00:17:58.280 --> 00:17:59.559
<v Speaker 0>gonna put this on the show notes actually.

00:17:59.559 --> 00:18:01.480
<v Speaker 0>I keep forgetting to do that. So if

00:18:01.480 --> 00:18:03.400
<v Speaker 0>I just, if I just paste this,

00:18:07.485 --> 00:18:10.045
<v Speaker 0>So that last command was the etcd get

00:18:10.045 --> 00:18:11.085
<v Speaker 0>Kubernetes.

00:18:12.925 --> 00:18:14.764
<v Speaker 0>So we can speak to etcd.

00:18:15.005 --> 00:18:16.845
<v Speaker 0>I'm not sure if that mumbo jumbo is

00:18:16.845 --> 00:18:18.205
<v Speaker 0>what we wanna see though.

00:18:19.805 --> 00:18:21.725
<v Speaker 0>I don't remember there being

00:18:22.720 --> 00:18:24.960
<v Speaker 0>UTF or binary values there.

00:18:25.360 --> 00:18:27.760
<v Speaker 1>Well, so a little while back,

00:18:28.080 --> 00:18:29.360
<v Speaker 1>native Kubernetes

00:18:29.360 --> 00:18:31.600
<v Speaker 1>resources were switched to

00:18:34.000 --> 00:18:37.200
<v Speaker 1>a more binary protocol. So the native Kubernetes

00:18:37.200 --> 00:18:39.724
<v Speaker 1>resources aren't stored in JSON. The

00:18:39.965 --> 00:18:42.605
<v Speaker 1>only CRD resources should be stored in JSON

00:18:42.605 --> 00:18:44.445
<v Speaker 1>and etcd. So it don't surprise me to

00:18:44.445 --> 00:18:44.924
<v Speaker 1>see

00:18:45.804 --> 00:18:48.284
<v Speaker 1>kind of funkiness from from the result.

00:18:49.164 --> 00:18:49.965
<v Speaker 0>Okay.

00:18:51.030 --> 00:18:52.470
<v Speaker 0>And we got a

00:18:52.710 --> 00:18:54.230
<v Speaker 0>comment from Duffy,

00:18:54.310 --> 00:18:56.950
<v Speaker 0>suggests that the running containers will probably still

00:18:56.950 --> 00:18:59.110
<v Speaker 0>be have an old copy of that DNS

00:18:59.110 --> 00:19:00.710
<v Speaker 0>as well. Something for us to keep in

00:19:00.710 --> 00:19:03.350
<v Speaker 0>mind if we just get further along.

00:19:04.150 --> 00:19:06.914
<v Speaker 1>So it probably wouldn't hurt to go ahead

00:19:06.914 --> 00:19:07.475
<v Speaker 1>and

00:19:08.035 --> 00:19:09.874
<v Speaker 1>touch all of these and

00:19:10.515 --> 00:19:12.914
<v Speaker 1>that should trigger the cubelet to

00:19:14.515 --> 00:19:15.315
<v Speaker 1>pick those up.

00:19:17.720 --> 00:19:18.760
<v Speaker 0>Okay. So I

00:19:19.320 --> 00:19:21.880
<v Speaker 0>we got etcd configured with the cheat sheet.

00:19:21.880 --> 00:19:24.200
<v Speaker 0>We've confirmed that we can query etcd, so

00:19:24.200 --> 00:19:26.120
<v Speaker 0>I'm not sure of that comment from Thomas

00:19:26.120 --> 00:19:27.320
<v Speaker 0>about it's

00:19:28.040 --> 00:19:29.720
<v Speaker 0>lessening but not answering it. It looked to

00:19:29.720 --> 00:19:30.600
<v Speaker 0>me like it did answer.

00:19:31.325 --> 00:19:32.765
<v Speaker 0>I wonder if we have an API server

00:19:32.765 --> 00:19:34.044
<v Speaker 0>running. Like,

00:19:34.685 --> 00:19:35.565
<v Speaker 0>should we check?

00:19:38.685 --> 00:19:39.885
<v Speaker 0>Ta da. And

00:19:40.125 --> 00:19:40.764
<v Speaker 1>yeah.

00:19:41.885 --> 00:19:43.245
<v Speaker 1>So that's progress.

00:19:44.445 --> 00:19:46.285
<v Speaker 0>So should we try running get nodes?

00:19:47.620 --> 00:19:49.460
<v Speaker 1>Let's go ahead. Why not?

00:19:52.980 --> 00:19:53.860
<v Speaker 1>Hey.

00:19:55.380 --> 00:19:58.179
<v Speaker 1>So there we go. We only had the

00:19:58.179 --> 00:20:00.419
<v Speaker 1>two worker nodes in teleport, but we have

00:20:00.419 --> 00:20:01.780
<v Speaker 1>three here. So

00:20:02.225 --> 00:20:04.465
<v Speaker 1>it looks like one of those isn't accessible

00:20:04.465 --> 00:20:06.865
<v Speaker 1>to teleport for some reason, but it does

00:20:06.865 --> 00:20:07.985
<v Speaker 1>appear at least

00:20:08.945 --> 00:20:10.304
<v Speaker 1>superficially healthy

00:20:10.945 --> 00:20:11.664
<v Speaker 1>here.

00:20:14.065 --> 00:20:16.730
<v Speaker 0>Alright. Let's see we can find any other

00:20:16.730 --> 00:20:18.889
<v Speaker 0>symptoms. You wanna run a get pods on

00:20:18.889 --> 00:20:20.649
<v Speaker 0>the cube system namespace.

00:20:20.809 --> 00:20:22.009
<v Speaker 0>See if things are

00:20:22.409 --> 00:20:24.250
<v Speaker 0>happy, we'll try and schedule a workload and

00:20:24.250 --> 00:20:26.009
<v Speaker 0>then maybe maybe we're fixed.

00:20:26.409 --> 00:20:28.330
<v Speaker 0>Oh, no. We got our CCM off. Hello.

00:20:28.330 --> 00:20:29.929
<v Speaker 0>That's

00:20:29.929 --> 00:20:31.525
<v Speaker 0>happened a few times now. I don't know

00:20:31.525 --> 00:20:33.445
<v Speaker 0>if that Thomas, let us know if that's

00:20:33.445 --> 00:20:35.365
<v Speaker 0>intentional or something else.

00:20:36.165 --> 00:20:39.125
<v Speaker 1>So this could be related to the DNS

00:20:39.125 --> 00:20:40.245
<v Speaker 1>configuration.

00:20:40.485 --> 00:20:41.924
<v Speaker 1>So I wouldn't

00:20:42.965 --> 00:20:45.200
<v Speaker 1>get too worried about that yet, but we

00:20:45.200 --> 00:20:46.559
<v Speaker 1>can just look at the logs and see

00:20:46.559 --> 00:20:47.759
<v Speaker 1>what we get there.

00:20:49.600 --> 00:20:50.799
<v Speaker 1>Not longs.

00:20:58.095 --> 00:21:00.335
<v Speaker 0>So we got a question from William in

00:21:00.335 --> 00:21:02.735
<v Speaker 0>the chat. What did the touch star command

00:21:02.735 --> 00:21:03.534
<v Speaker 0>cause?

00:21:04.095 --> 00:21:04.815
<v Speaker 0>So,

00:21:05.375 --> 00:21:05.855
<v Speaker 0>apparently,

00:21:06.175 --> 00:21:08.175
<v Speaker 0>if we touch the files in the static

00:21:08.175 --> 00:21:11.615
<v Speaker 0>manifest directory, the kubelet will

00:21:11.080 --> 00:21:13.720
<v Speaker 0>notice the change and then restart

00:21:13.720 --> 00:21:14.600
<v Speaker 0>those

00:21:14.680 --> 00:21:16.920
<v Speaker 0>pods for us. Is that correct?

00:21:17.800 --> 00:21:18.760
<v Speaker 1>Yes.

00:21:18.760 --> 00:21:19.800
<v Speaker 1>Exactly. So

00:21:20.120 --> 00:21:21.559
<v Speaker 1>what it does is,

00:21:21.880 --> 00:21:23.880
<v Speaker 1>basically, the kubelet looks in the static pod

00:21:23.880 --> 00:21:24.440
<v Speaker 1>directory,

00:21:24.765 --> 00:21:26.845
<v Speaker 1>and whenever it notices any change, it tries

00:21:26.845 --> 00:21:29.085
<v Speaker 1>to reload it. And if things are running

00:21:29.085 --> 00:21:29.885
<v Speaker 1>healthy

00:21:30.445 --> 00:21:33.245
<v Speaker 1>after it reconciles, you should see a mirror

00:21:33.245 --> 00:21:34.365
<v Speaker 1>pod for it,

00:21:35.165 --> 00:21:36.845
<v Speaker 1>which are the pod resources that we see

00:21:36.845 --> 00:21:39.165
<v Speaker 1>here. But it's the kubelet that actually controls

00:21:40.160 --> 00:21:42.799
<v Speaker 1>anything defined in the static manifests.

00:21:43.600 --> 00:21:44.960
<v Speaker 0>Cool. Perfect.

00:21:46.400 --> 00:21:48.799
<v Speaker 0>So our DNS is still broken in the

00:21:48.799 --> 00:21:49.679
<v Speaker 0>CCM.

00:21:50.160 --> 00:21:52.080
<v Speaker 0>Should we just start restarting stuff now that

00:21:52.080 --> 00:21:54.640
<v Speaker 0>we've fixed the DNS configuration on the host?

00:21:55.505 --> 00:21:57.585
<v Speaker 1>I think so. So

00:21:58.145 --> 00:22:01.425
<v Speaker 1>the cloud controller manager is a deployment.

00:22:03.425 --> 00:22:05.745
<v Speaker 1>So what we can do is basically

00:22:05.745 --> 00:22:07.425
<v Speaker 1>do a

00:22:07.860 --> 00:22:11.220
<v Speaker 1>a rollout of the deployment to kinda restart

00:22:11.220 --> 00:22:11.860
<v Speaker 1>things.

00:22:14.500 --> 00:22:16.500
<v Speaker 0>Yes. That's such a nice way of doing

00:22:16.500 --> 00:22:18.100
<v Speaker 0>it. I I tend to just kill all

00:22:18.100 --> 00:22:18.899
<v Speaker 0>the pods.

00:22:20.660 --> 00:22:23.380
<v Speaker 0>Keep control, delete dash l, label selector,

00:22:23.625 --> 00:22:24.664
<v Speaker 0>off you go.

00:22:26.825 --> 00:22:28.745
<v Speaker 1>Normally, have tab completion

00:22:28.745 --> 00:22:31.625
<v Speaker 1>and because I don't set it up very

00:22:31.625 --> 00:22:33.465
<v Speaker 1>much, I'm going to look at how to

00:22:33.465 --> 00:22:34.825
<v Speaker 1>re enable it here.

00:22:35.145 --> 00:22:36.539
<v Speaker 0>We could set up that. I think you

00:22:36.539 --> 00:22:39.340
<v Speaker 0>can do kubectl complete yeah. And then source

00:22:39.340 --> 00:22:40.459
<v Speaker 0>that into the

00:22:40.779 --> 00:22:42.299
<v Speaker 0>completion and then bash.

00:22:43.179 --> 00:22:44.700
<v Speaker 0>And then you can source that. It's a

00:22:44.700 --> 00:22:46.220
<v Speaker 0>little big sub shell. Yeah. Cool.

00:22:51.405 --> 00:22:53.005
<v Speaker 0>Oh, you'll the sub shell will be the

00:22:53.005 --> 00:22:54.205
<v Speaker 0>source. Yeah. We should be okay with just

00:22:54.205 --> 00:22:55.405
<v Speaker 0>the sub shell, I think.

00:22:57.725 --> 00:22:59.725
<v Speaker 0>Will that work? Yeah. No.

00:23:01.645 --> 00:23:02.925
<v Speaker 0>Or do we have to do a source

00:23:02.925 --> 00:23:03.965
<v Speaker 0>and then

00:23:04.559 --> 00:23:05.279
<v Speaker 0>dash

00:23:05.840 --> 00:23:07.120
<v Speaker 0>for standard and

00:23:07.360 --> 00:23:08.879
<v Speaker 0>or redirect it in?

00:23:09.519 --> 00:23:10.159
<v Speaker 0>Oh,

00:23:10.320 --> 00:23:12.320
<v Speaker 0>I feel like I'm failing basic Linux knowledge

00:23:12.320 --> 00:23:14.639
<v Speaker 0>test here. Yeah. Me too.

00:23:15.360 --> 00:23:16.080
<v Speaker 0>Yeah. Try that.

00:23:19.554 --> 00:23:21.315
<v Speaker 0>Okay. I've got the I've got the docs.

00:23:21.315 --> 00:23:23.475
<v Speaker 0>I've got the docs. Kubernetes

00:23:23.715 --> 00:23:24.674
<v Speaker 0>completion

00:23:24.674 --> 00:23:25.955
<v Speaker 0>source bash.

00:23:28.595 --> 00:23:29.715
<v Speaker 0>Yeah. There's the docs.

00:23:33.190 --> 00:23:35.190
<v Speaker 0>Oh, you have to do echo

00:23:35.270 --> 00:23:36.390
<v Speaker 0>source. Yeah.

00:23:41.670 --> 00:23:42.870
<v Speaker 0>You want me just to copy this?

00:23:46.105 --> 00:23:47.384
<v Speaker 0>Oh, sorry.

00:23:47.784 --> 00:23:49.625
<v Speaker 1>Oh, we got it. There we go. We

00:23:49.625 --> 00:23:50.985
<v Speaker 1>got it twice in there. Alright.

00:24:00.260 --> 00:24:01.139
<v Speaker 1>Thank you.

00:24:02.580 --> 00:24:04.500
<v Speaker 1>I see Duffy in the chat with the

00:24:04.500 --> 00:24:05.700
<v Speaker 1>with the help.

00:24:06.260 --> 00:24:08.419
<v Speaker 0>Oh, yeah. There's a while it's saying no

00:24:08.419 --> 00:24:10.659
<v Speaker 0>sub shell, and then Duffy got the command

00:24:10.659 --> 00:24:11.460
<v Speaker 0>as well.

00:24:12.020 --> 00:24:12.740
<v Speaker 0>Cool. Alright.

00:24:17.755 --> 00:24:19.674
<v Speaker 0>Is it working now? Yeah.

00:24:23.355 --> 00:24:25.354
<v Speaker 1>I gotta remember cube system.

00:24:27.274 --> 00:24:29.274
<v Speaker 0>Something weird with the control codes that they

00:24:29.274 --> 00:24:30.475
<v Speaker 0>are all complete only

00:24:31.250 --> 00:24:32.770
<v Speaker 0>goes to you, I think.

00:24:39.170 --> 00:24:41.250
<v Speaker 0>Need to send that to the teleport team.

00:24:42.210 --> 00:24:43.090
<v Speaker 0>We want that fixed.

00:24:46.125 --> 00:24:48.445
<v Speaker 0>Well, core DNS isn't very happy either.

00:24:48.845 --> 00:24:51.005
<v Speaker 1>So

00:24:52.605 --> 00:24:55.165
<v Speaker 1>before we continue with the controller manager, we

00:24:55.325 --> 00:24:57.485
<v Speaker 1>or the cloud controller manager, we probably wanna

00:24:57.485 --> 00:24:58.685
<v Speaker 1>take a look at DNS.

00:25:05.130 --> 00:25:06.490
<v Speaker 1>Kube system.

00:25:16.525 --> 00:25:17.245
<v Speaker 0>Okay.

00:25:22.925 --> 00:25:25.885
<v Speaker 1>That wasn't very helpful, No. It was not.

00:25:27.150 --> 00:25:28.670
<v Speaker 0>Is it running? Can you see it on

00:25:28.670 --> 00:25:30.110
<v Speaker 0>PS? Like, I don't know if it's just

00:25:30.110 --> 00:25:32.669
<v Speaker 0>not ready. Is it and it's running but

00:25:32.750 --> 00:25:34.910
<v Speaker 0>failing? Like, I'm not really sure what

00:25:35.230 --> 00:25:36.669
<v Speaker 0>session it's in at the moment.

00:25:38.270 --> 00:25:40.430
<v Speaker 1>Let's do a rollout of core DNS because

00:25:40.430 --> 00:25:43.345
<v Speaker 1>it might actually be affected by the DNS

00:25:43.345 --> 00:25:44.065
<v Speaker 1>issue.

00:25:44.225 --> 00:25:44.864
<v Speaker 0>Okay.

00:25:54.784 --> 00:25:55.904
<v Speaker 1>And

00:25:57.310 --> 00:25:58.990
<v Speaker 1>it's been a while since

00:26:00.030 --> 00:26:02.110
<v Speaker 1>I gotta give it a restart. That's why.

00:26:10.385 --> 00:26:11.664
<v Speaker 1>And I gotta give it

00:26:14.304 --> 00:26:14.945
<v Speaker 0>Oh,

00:26:20.705 --> 00:26:21.345
<v Speaker 0>it'll be

00:26:22.784 --> 00:26:24.784
<v Speaker 1>And I forgot the namespace.

00:26:25.039 --> 00:26:27.440
<v Speaker 1>And

00:26:38.559 --> 00:26:40.320
<v Speaker 1>we still don't have anything there.

00:26:50.105 --> 00:26:52.825
<v Speaker 0>So it's running. It's just not passing its

00:26:53.550 --> 00:26:56.190
<v Speaker 0>probe, which means the service won't be adding

00:26:56.190 --> 00:26:57.230
<v Speaker 0>the endpoints.

00:26:57.390 --> 00:26:58.350
<v Speaker 0>Do we wanna

00:26:58.910 --> 00:27:00.270
<v Speaker 0>check the probes?

00:27:03.150 --> 00:27:04.990
<v Speaker 1>Let's take a look at those logs one

00:27:04.990 --> 00:27:05.710
<v Speaker 1>more time.

00:27:08.575 --> 00:27:09.855
<v Speaker 0>I don't think we have enough time to

00:27:09.855 --> 00:27:11.135
<v Speaker 0>go through all those logs.

00:27:13.215 --> 00:27:14.894
<v Speaker 1>Yeah. That might take a while.

00:27:16.495 --> 00:27:18.015
<v Speaker 1>One of the things that I didn't think

00:27:18.015 --> 00:27:19.695
<v Speaker 1>about is is

00:27:20.269 --> 00:27:21.789
<v Speaker 1>we fixed the local

00:27:22.029 --> 00:27:23.309
<v Speaker 1>DNS issue,

00:27:23.710 --> 00:27:26.429
<v Speaker 1>but you can also set DNS policy on

00:27:27.710 --> 00:27:29.229
<v Speaker 1>the deployments as well.

00:27:31.470 --> 00:27:32.830
<v Speaker 0>So should we take a look at the

00:27:32.830 --> 00:27:34.830
<v Speaker 0>manifest for core DNS here? See what we're

00:27:34.830 --> 00:27:35.870
<v Speaker 0>doing with it? I think so.

00:27:44.935 --> 00:27:45.654
<v Speaker 1>So,

00:27:48.455 --> 00:27:49.575
<v Speaker 1>here we have this.

00:27:51.910 --> 00:27:53.830
<v Speaker 0>Well, I need to scroll up because we're

00:27:54.950 --> 00:27:55.510
<v Speaker 1>Yeah.

00:27:57.910 --> 00:27:59.510
<v Speaker 0>I just sat back letting you do all

00:27:59.510 --> 00:28:01.670
<v Speaker 0>the work, but that's that's not gonna work

00:28:01.670 --> 00:28:02.950
<v Speaker 0>now. Okay. Let's see.

00:28:09.125 --> 00:28:10.885
<v Speaker 0>I'm always really bad for going through this

00:28:10.885 --> 00:28:13.045
<v Speaker 0>too quickly and not actually paying attention. So

00:28:13.045 --> 00:28:14.725
<v Speaker 0>I'm gonna focus this thing.

00:28:15.285 --> 00:28:17.365
<v Speaker 0>So the liveness probe is set for slash

00:28:17.365 --> 00:28:19.445
<v Speaker 0>health on port 8,080.

00:28:19.445 --> 00:28:21.285
<v Speaker 0>I don't know if that's correct. We might

00:28:21.285 --> 00:28:23.140
<v Speaker 0>need to check that.

00:28:24.020 --> 00:28:26.020
<v Speaker 0>And there's a dash red. Oh, the readiness

00:28:26.020 --> 00:28:27.940
<v Speaker 0>probe is 8181. I don't think those will

00:28:27.940 --> 00:28:29.299
<v Speaker 0>be on different port numbers.

00:28:31.140 --> 00:28:32.820
<v Speaker 0>So should we you

00:28:33.780 --> 00:28:35.620
<v Speaker 0>should maybe try and check that, and I'm

00:28:35.620 --> 00:28:37.300
<v Speaker 0>just gonna scan for anything else.

00:28:46.635 --> 00:28:47.914
<v Speaker 0>I think

00:28:49.515 --> 00:28:51.995
<v Speaker 0>everything else okay. So I'm gonna assume that

00:28:51.995 --> 00:28:53.035
<v Speaker 0>one of those

00:28:53.870 --> 00:28:55.870
<v Speaker 0>probes is on the wrong port, which is

00:28:55.870 --> 00:28:57.389
<v Speaker 0>causing it not to add the endpoints to

00:28:57.389 --> 00:28:58.349
<v Speaker 0>the service.

00:29:01.789 --> 00:29:04.029
<v Speaker 1>That is definitely a possibility.

00:29:05.070 --> 00:29:05.950
<v Speaker 1>And

00:29:07.255 --> 00:29:08.855
<v Speaker 1>my default here is

00:29:09.415 --> 00:29:11.654
<v Speaker 1>basically to look at the code because

00:29:12.054 --> 00:29:13.894
<v Speaker 1>that's how I've learned

00:29:14.615 --> 00:29:16.134
<v Speaker 1>quite a bit about

00:29:16.615 --> 00:29:18.135
<v Speaker 1>troubleshooting clusters,

00:29:18.135 --> 00:29:18.695
<v Speaker 1>especially

00:29:19.015 --> 00:29:20.135
<v Speaker 1>in the case of

00:29:20.940 --> 00:29:23.499
<v Speaker 1>lack of documentation in the early days. So

00:29:23.980 --> 00:29:26.299
<v Speaker 1>what I'm gonna do is I'm gonna look

00:29:27.740 --> 00:29:30.299
<v Speaker 1>into the manifest code that we actually deploy

00:29:30.299 --> 00:29:31.019
<v Speaker 1>from

00:29:33.820 --> 00:29:34.539
<v Speaker 1>Cube ATM.

00:29:35.755 --> 00:29:37.915
<v Speaker 0>Well, I've pulled up a random manifest

00:29:37.915 --> 00:29:39.755
<v Speaker 0>from the Internet or from the core DNS

00:29:39.755 --> 00:29:43.595
<v Speaker 0>organization though, and those reports are are correct.

00:29:43.595 --> 00:29:45.995
<v Speaker 0>They do run health and readiness on different

00:29:45.995 --> 00:29:46.715
<v Speaker 0>ports.

00:29:46.795 --> 00:29:47.195
<v Speaker 0>Interesting.

00:29:52.250 --> 00:29:54.250
<v Speaker 1>That is true. Code never lies.

00:29:56.170 --> 00:29:58.410
<v Speaker 1>You just gotta make sure that you're looking

00:29:58.410 --> 00:30:00.169
<v Speaker 1>at the right code sometimes.

00:30:01.530 --> 00:30:05.050
<v Speaker 1>The other thing that we have too is

00:30:04.745 --> 00:30:07.385
<v Speaker 1>we have the DNS policy default,

00:30:08.745 --> 00:30:11.545
<v Speaker 1>which default is not actually the default DNS

00:30:11.545 --> 00:30:13.625
<v Speaker 1>policy, if I remember correctly.

00:30:15.225 --> 00:30:16.505
<v Speaker 0>Where did you see that? Sorry.

00:30:19.020 --> 00:30:22.140
<v Speaker 1>In the Oh, here. Yeah. Deployment config. Yep.

00:30:22.140 --> 00:30:24.460
<v Speaker 0>So what does the default DNS policy mean

00:30:24.460 --> 00:30:25.020
<v Speaker 0>here?

00:30:27.020 --> 00:30:28.860
<v Speaker 1>I have to look.

00:30:30.540 --> 00:30:32.620
<v Speaker 1>It it's been a while, and I remember

00:30:32.620 --> 00:30:33.580
<v Speaker 1>it being confusing.

00:30:37.705 --> 00:30:39.785
<v Speaker 1>So what I'm doing is I basically just

00:30:39.785 --> 00:30:40.905
<v Speaker 1>googled for

00:30:42.105 --> 00:30:43.945
<v Speaker 1>documentation around it.

00:30:45.705 --> 00:30:47.305
<v Speaker 1>See if I can see Default is not

00:30:47.305 --> 00:30:49.145
<v Speaker 1>the default DNS policy.

00:30:49.145 --> 00:30:52.479
<v Speaker 1>If DNS policy is not explicitly configured,

00:30:52.480 --> 00:30:53.599
<v Speaker 1>then it's

00:30:54.080 --> 00:30:56.079
<v Speaker 1>usually used as cluster first.

00:30:56.480 --> 00:30:58.480
<v Speaker 1>And you also have cluster first with host

00:30:58.480 --> 00:30:59.119
<v Speaker 1>net

00:31:01.440 --> 00:31:04.005
<v Speaker 1>when you need something with host network set

00:31:04.005 --> 00:31:06.485
<v Speaker 1>to true. We don't actually core DNS doesn't

00:31:06.485 --> 00:31:09.125
<v Speaker 1>use host network, so that's not an issue.

00:31:11.125 --> 00:31:14.245
<v Speaker 0>Okay. So the default policy uses a node

00:31:15.125 --> 00:31:17.525
<v Speaker 0>DNS configuration, which makes sense for core DNS.

00:31:17.525 --> 00:31:18.965
<v Speaker 0>Right? That probably is

00:31:19.580 --> 00:31:20.220
<v Speaker 0>correct

00:31:21.500 --> 00:31:23.980
<v Speaker 0>since core DNS is providing the end cluster

00:31:23.980 --> 00:31:24.779
<v Speaker 0>DNS.

00:31:25.820 --> 00:31:28.300
<v Speaker 1>Quite possibly. And and I'm going into the

00:31:28.300 --> 00:31:30.380
<v Speaker 1>kubeadm code just to

00:31:30.860 --> 00:31:33.340
<v Speaker 1>verify at this point because that's

00:31:34.155 --> 00:31:35.434
<v Speaker 1>just what I do.

00:31:36.075 --> 00:31:36.794
<v Speaker 0>Yep.

00:31:37.035 --> 00:31:39.195
<v Speaker 0>And I'm looking at the deployment on the

00:31:39.195 --> 00:31:41.355
<v Speaker 0>core DNS organization and they do have a

00:31:41.355 --> 00:31:43.835
<v Speaker 0>DNS policy of default. So I'm I'm inclined

00:31:43.835 --> 00:31:45.355
<v Speaker 0>to think that's maybe alright.

00:31:48.010 --> 00:31:49.049
<v Speaker 0>I'm gonna

00:31:51.450 --> 00:31:53.210
<v Speaker 0>I'm gonna type stuff just because I'm not

00:31:53.210 --> 00:31:54.249
<v Speaker 0>sure what else to do.

00:31:56.250 --> 00:31:57.929
<v Speaker 0>So if we don't get services,

00:31:58.010 --> 00:32:00.010
<v Speaker 0>we've got kubed n s. I'm assuming if

00:32:00.010 --> 00:32:01.770
<v Speaker 0>I describe that, we're just gonna see no

00:32:01.770 --> 00:32:02.250
<v Speaker 0>end points.

00:32:02.875 --> 00:32:03.595
<v Speaker 0>So

00:32:07.434 --> 00:32:09.034
<v Speaker 0>Yeah. Okay. So

00:32:11.195 --> 00:32:12.874
<v Speaker 0>we need to work out why

00:32:12.875 --> 00:32:15.354
<v Speaker 0>Oh, I'm gonna alias that in a second.

00:32:15.434 --> 00:32:16.875
<v Speaker 0>Alias k equals.

00:32:20.670 --> 00:32:22.670
<v Speaker 0>Oh, okay. Weird stuff going on with our

00:32:22.670 --> 00:32:24.430
<v Speaker 0>CCM as well, but we'll come back to

00:32:24.430 --> 00:32:25.150
<v Speaker 0>that later.

00:32:25.710 --> 00:32:27.950
<v Speaker 0>Yeah. One is effective, the one is pending.

00:32:27.950 --> 00:32:30.110
<v Speaker 0>But I k. Core DNS. Where can we

00:32:30.110 --> 00:32:31.150
<v Speaker 0>get more logs from Core

00:32:35.794 --> 00:32:38.915
<v Speaker 1>I don't think there's another source of logs

00:32:38.915 --> 00:32:41.554
<v Speaker 1>for CoreDNS outside of the pod logs.

00:32:44.370 --> 00:32:46.930
<v Speaker 1>Outside of checking the manifest, we can also

00:32:46.930 --> 00:32:48.929
<v Speaker 1>check the config map as well

00:32:49.730 --> 00:32:52.210
<v Speaker 1>because it gets its configuration from the config

00:32:52.210 --> 00:32:52.769
<v Speaker 1>map.

00:32:53.730 --> 00:32:54.450
<v Speaker 1>Nice.

00:32:55.250 --> 00:32:57.570
<v Speaker 0>Had we not run get pods yet? That's

00:32:57.730 --> 00:32:58.370
<v Speaker 1>We did not.

00:32:59.684 --> 00:33:01.205
<v Speaker 0>Alright. So what I want you At least

00:33:01.205 --> 00:33:02.804
<v Speaker 1>not in the default namespace.

00:33:03.684 --> 00:33:05.125
<v Speaker 0>Yeah. What I want you to do is

00:33:05.125 --> 00:33:07.044
<v Speaker 0>jump inside one of these and actually try

00:33:07.044 --> 00:33:09.445
<v Speaker 0>and use the deck command against score DNS

00:33:09.445 --> 00:33:12.004
<v Speaker 0>to see if we're getting any responses.

00:33:12.005 --> 00:33:12.965
<v Speaker 0>But we

00:33:13.590 --> 00:33:15.669
<v Speaker 0>we can't do that from anything here.

00:33:18.710 --> 00:33:20.789
<v Speaker 0>Okay. Do we have anything running? Yeah. We

00:33:20.789 --> 00:33:22.149
<v Speaker 0>must have some stuff running.

00:33:25.030 --> 00:33:25.510
<v Speaker 0>Alright.

00:33:30.365 --> 00:33:32.764
<v Speaker 0>I'm pretty sure core DNS is distroless or

00:33:32.764 --> 00:33:34.845
<v Speaker 0>scratch, so I can't actually get inside of

00:33:34.845 --> 00:33:35.404
<v Speaker 0>that.

00:33:38.044 --> 00:33:39.485
<v Speaker 0>Are any of these other ones gonna be

00:33:39.485 --> 00:33:40.845
<v Speaker 0>able can I exec in any of these?

00:33:40.845 --> 00:33:41.725
<v Speaker 0>Do you know off the top of your

00:33:41.725 --> 00:33:41.965
<v Speaker 0>head?

00:33:46.220 --> 00:33:48.140
<v Speaker 1>Not off the top of my head. I

00:33:48.140 --> 00:33:49.820
<v Speaker 1>don't think etcd

00:33:51.340 --> 00:33:53.500
<v Speaker 1>is, but I could be wrong there as

00:33:53.500 --> 00:33:53.979
<v Speaker 1>well.

00:33:55.659 --> 00:33:57.740
<v Speaker 1>And I finally got to the manifest for

00:33:57.740 --> 00:33:58.539
<v Speaker 1>core DNS.

00:34:02.175 --> 00:34:04.414
<v Speaker 0>I got him one of the cube proxies,

00:34:05.775 --> 00:34:07.855
<v Speaker 0>but we've got the same DNS problem that

00:34:07.855 --> 00:34:10.094
<v Speaker 0>we have there. And I'm kinda worried right

00:34:10.094 --> 00:34:12.094
<v Speaker 0>now if that if we try restarting any

00:34:12.094 --> 00:34:13.455
<v Speaker 0>of these ones that are running,

00:34:15.210 --> 00:34:16.969
<v Speaker 0>they're probably not coming back

00:34:17.929 --> 00:34:19.290
<v Speaker 0>based on what I see in the default

00:34:19.290 --> 00:34:20.969
<v Speaker 0>namespace on our CCM.

00:34:26.090 --> 00:34:27.530
<v Speaker 0>So what's what are you thinking just now?

00:34:30.864 --> 00:34:33.185
<v Speaker 1>So I'm still looking and just comparing against

00:34:33.185 --> 00:34:33.825
<v Speaker 1>the

00:34:35.265 --> 00:34:36.465
<v Speaker 1>the manifest

00:34:36.465 --> 00:34:38.625
<v Speaker 1>for that's laid down by

00:34:39.905 --> 00:34:40.545
<v Speaker 1>Cube ATM.

00:34:43.119 --> 00:34:45.679
<v Speaker 1>And so far it looks like everything lines

00:34:45.679 --> 00:34:46.960
<v Speaker 1>up pretty well.

00:34:49.440 --> 00:34:50.320
<v Speaker 0>I guess,

00:34:51.040 --> 00:34:53.920
<v Speaker 0>could we port forward to core DNS and

00:34:53.920 --> 00:34:55.824
<v Speaker 0>use that locally to see if we're getting

00:34:55.824 --> 00:34:57.505
<v Speaker 0>a response. Is that worth doing just now,

00:34:57.505 --> 00:34:58.785
<v Speaker 0>or is there something else you wanna chase

00:34:58.785 --> 00:34:59.425
<v Speaker 0>down?

00:35:00.305 --> 00:35:01.585
<v Speaker 1>Let's go ahead and

00:35:02.625 --> 00:35:03.665
<v Speaker 1>do that

00:35:04.225 --> 00:35:06.145
<v Speaker 1>outside of well, actually,

00:35:06.145 --> 00:35:07.825
<v Speaker 1>I wanna double check the core file real

00:35:07.825 --> 00:35:09.265
<v Speaker 1>quick just because

00:35:11.760 --> 00:35:13.360
<v Speaker 0>So is that mounted then as a config

00:35:13.360 --> 00:35:14.000
<v Speaker 0>map?

00:35:15.840 --> 00:35:16.880
<v Speaker 1>Yep. It is.

00:35:22.805 --> 00:35:24.885
<v Speaker 1>It doesn't look like that's been modified though

00:35:24.885 --> 00:35:26.005
<v Speaker 1>because the age is

00:35:31.845 --> 00:35:33.525
<v Speaker 0>Yeah. But I don't think the age shows

00:35:33.525 --> 00:35:34.725
<v Speaker 0>you updates to it.

00:35:36.450 --> 00:35:38.290
<v Speaker 0>I think we ran into that before.

00:35:39.170 --> 00:35:40.930
<v Speaker 0>I'm looking forward to all these clusters being

00:35:40.930 --> 00:35:42.770
<v Speaker 0>one twenty one and never seen managed fields

00:35:42.770 --> 00:35:43.330
<v Speaker 0>again.

00:35:45.010 --> 00:35:45.650
<v Speaker 1>Right.

00:35:46.450 --> 00:35:48.130
<v Speaker 1>So we got the core file,

00:35:48.369 --> 00:35:49.650
<v Speaker 1>port 53,

00:35:49.810 --> 00:35:50.770
<v Speaker 1>errors health.

00:35:52.724 --> 00:35:54.164
<v Speaker 0>So I put But it looks like that

00:35:54.164 --> 00:35:55.605
<v Speaker 1>health has been modified.

00:35:57.684 --> 00:35:59.525
<v Speaker 0>Oh, did you lose your session?

00:36:01.045 --> 00:36:01.845
<v Speaker 1>I did not.

00:36:09.819 --> 00:36:11.819
<v Speaker 0>I'm not sure if something destructive has just

00:36:11.819 --> 00:36:12.940
<v Speaker 0>happened, but

00:36:15.180 --> 00:36:16.780
<v Speaker 0>there's no active sessions,

00:36:20.275 --> 00:36:22.115
<v Speaker 0>and I cannot start a shell.

00:36:25.395 --> 00:36:27.315
<v Speaker 0>Is your is your session still good?

00:36:27.635 --> 00:36:28.435
<v Speaker 1>Yeah.

00:36:28.435 --> 00:36:29.795
<v Speaker 1>I'm still connected here.

00:36:31.000 --> 00:36:32.840
<v Speaker 0>You need to run double check. Run a

00:36:32.840 --> 00:36:33.480
<v Speaker 0>command?

00:36:35.800 --> 00:36:36.840
<v Speaker 1>That's funny.

00:36:37.240 --> 00:36:40.280
<v Speaker 1>It's it's also still showing no active sessions.

00:36:43.095 --> 00:36:45.015
<v Speaker 1>Yeah. No. I can still run a command

00:36:45.015 --> 00:36:46.215
<v Speaker 1>and everything. So this is

00:36:50.535 --> 00:36:52.615
<v Speaker 1>But we can go ahead and rejoin.

00:36:53.335 --> 00:36:55.190
<v Speaker 1>Well, I guess we can't because No. I

00:36:55.190 --> 00:36:56.950
<v Speaker 0>can't. Do you wanna try starting a new

00:36:56.950 --> 00:36:58.550
<v Speaker 0>one and I can maybe join that?

00:36:59.109 --> 00:37:00.790
<v Speaker 0>Oh, I I don't know.

00:37:02.950 --> 00:37:03.589
<v Speaker 1>Oh,

00:37:03.990 --> 00:37:06.309
<v Speaker 1>alright. I'm seeing an active session now, it

00:37:06.309 --> 00:37:06.630
<v Speaker 1>seems.

00:37:11.755 --> 00:37:13.435
<v Speaker 1>And that says it's only a few seconds

00:37:13.435 --> 00:37:14.155
<v Speaker 1>ago.

00:37:18.475 --> 00:37:19.275
<v Speaker 0>Oh.

00:37:20.635 --> 00:37:22.715
<v Speaker 0>So Thomas is gonna fix that.

00:37:23.275 --> 00:37:23.675
<v Speaker 0>Apparently,

00:37:26.330 --> 00:37:28.810
<v Speaker 0>the resource exhaustion went too far. So something

00:37:28.810 --> 00:37:30.570
<v Speaker 0>they've configured in our cluster.

00:37:33.130 --> 00:37:35.930
<v Speaker 1>And, yep, there there have been disconnected

00:37:35.930 --> 00:37:37.370
<v Speaker 1>as well. So yeah.

00:37:41.555 --> 00:37:43.235
<v Speaker 0>I guess we'll wait a moment.

00:37:50.275 --> 00:37:53.530
<v Speaker 0>I think there's been a proper proper breakage

00:37:53.530 --> 00:37:55.290
<v Speaker 0>happened on this machine. I didn't even think

00:37:55.290 --> 00:37:57.849
<v Speaker 0>to check what was going on. Although, I

00:37:57.849 --> 00:38:00.810
<v Speaker 0>wonder if that recursive honk pod we've seen.

00:38:01.050 --> 00:38:02.730
<v Speaker 0>I wonder if there was something moving on

00:38:02.730 --> 00:38:04.570
<v Speaker 0>there. Maybe I should have checked the CPU

00:38:04.570 --> 00:38:05.849
<v Speaker 0>utilization or

00:38:06.775 --> 00:38:07.255
<v Speaker 0>So

00:38:11.975 --> 00:38:14.215
<v Speaker 0>I'll cover some of the rules.

00:38:14.935 --> 00:38:16.375
<v Speaker 0>Carlos has asked seem

00:38:16.695 --> 00:38:18.375
<v Speaker 1>to be able to connect to

00:38:19.575 --> 00:38:20.695
<v Speaker 1>Teleport at all now.

00:38:23.039 --> 00:38:25.519
<v Speaker 0>Carlos has asked if there's cron eating resources.

00:38:25.519 --> 00:38:26.799
<v Speaker 0>Yeah. One of the things I said I

00:38:26.799 --> 00:38:28.319
<v Speaker 0>won't do on this show is is look

00:38:28.319 --> 00:38:29.680
<v Speaker 0>at the cron so people could use it

00:38:29.680 --> 00:38:31.519
<v Speaker 0>in creative ways. And so I'm not sure

00:38:31.519 --> 00:38:32.400
<v Speaker 0>what's going on there,

00:38:34.035 --> 00:38:35.875
<v Speaker 0>But maybe we can Maybe Thomas will maybe

00:38:35.875 --> 00:38:36.995
<v Speaker 0>get us back in.

00:38:38.035 --> 00:38:39.955
<v Speaker 0>Oh, it's it's it's gone.

00:38:40.595 --> 00:38:40.915
<v Speaker 0>Yeah.

00:38:46.610 --> 00:38:47.490
<v Speaker 0>Alright.

00:38:47.490 --> 00:38:49.010
<v Speaker 0>So Thomas says problem

00:38:55.330 --> 00:38:57.490
<v Speaker 0>with SSH is not being able to share

00:38:57.490 --> 00:38:58.210
<v Speaker 0>the session.

00:39:00.335 --> 00:39:01.535
<v Speaker 0>Alright.

00:39:03.454 --> 00:39:05.214
<v Speaker 0>Let me pop open a terminal.

00:39:11.615 --> 00:39:12.575
<v Speaker 0>IP address.

00:39:19.300 --> 00:39:21.620
<v Speaker 0>No. Right. So I'm gonna just quickly debug

00:39:21.620 --> 00:39:23.780
<v Speaker 0>what's going on from a normal terminal and

00:39:23.780 --> 00:39:26.020
<v Speaker 0>see if can get teleport working again. Let's

00:39:26.020 --> 00:39:27.060
<v Speaker 0>see if we can deal with that.

00:39:33.315 --> 00:39:35.475
<v Speaker 0>Oh, SSH is not working.

00:39:40.595 --> 00:39:42.035
<v Speaker 0>Thomas is just laughing there.

00:39:45.660 --> 00:39:46.380
<v Speaker 0>Alright.

00:39:47.180 --> 00:39:49.099
<v Speaker 0>Let's move on to the second cluster just

00:39:49.099 --> 00:39:50.380
<v Speaker 0>now, and then we'll try and come back

00:39:50.380 --> 00:39:51.260
<v Speaker 0>to this one.

00:39:52.300 --> 00:39:54.780
<v Speaker 0>If I can't SSHN for the terminal,

00:39:55.099 --> 00:39:56.380
<v Speaker 0>I don't think there's much we can do

00:39:56.380 --> 00:39:57.820
<v Speaker 0>right now. So will we jump over to

00:39:57.820 --> 00:39:58.460
<v Speaker 0>Cluster 10?

00:40:00.405 --> 00:40:02.965
<v Speaker 1>Yes. I'm working on trying to

00:40:03.365 --> 00:40:05.525
<v Speaker 1>re log in to the teleport session there

00:40:05.525 --> 00:40:06.725
<v Speaker 1>right now though.

00:40:09.125 --> 00:40:09.845
<v Speaker 0>Okay.

00:40:09.925 --> 00:40:10.725
<v Speaker 0>This

00:40:10.725 --> 00:40:10.965
<v Speaker 0>is.

00:40:13.720 --> 00:40:15.240
<v Speaker 0>This one looks okay.

00:40:15.880 --> 00:40:18.200
<v Speaker 0>Oh, I've got a terminal open.

00:40:18.440 --> 00:40:20.039
<v Speaker 0>I'll cover the basics just now if you

00:40:20.039 --> 00:40:21.880
<v Speaker 0>wanna just take a minute to get in.

00:40:22.519 --> 00:40:23.960
<v Speaker 0>I'm pretty sure I'm not getting my victory

00:40:23.960 --> 00:40:24.839
<v Speaker 0>beer today.

00:40:26.119 --> 00:40:27.319
<v Speaker 0>I have a nice

00:40:28.695 --> 00:40:30.375
<v Speaker 0>rhubarb custard server.

00:40:30.535 --> 00:40:31.335
<v Speaker 0>There

00:40:31.335 --> 00:40:32.855
<v Speaker 0>we go. Show people.

00:40:34.855 --> 00:40:36.055
<v Speaker 0>Yeah. Thomas,

00:40:37.015 --> 00:40:39.335
<v Speaker 0>if you can SSH in, try and get

00:40:39.335 --> 00:40:41.095
<v Speaker 0>us back in the game, please. Otherwise,

00:40:43.610 --> 00:40:44.570
<v Speaker 0>destroyed it.

00:40:46.090 --> 00:40:47.530
<v Speaker 0>Which is very funny. I guess we took

00:40:47.530 --> 00:40:48.810
<v Speaker 0>too long to fix it.

00:40:49.450 --> 00:40:50.730
<v Speaker 0>That's funny.

00:40:51.610 --> 00:40:53.610
<v Speaker 0>Thomas does that. I guess it's my turn

00:40:53.610 --> 00:40:55.050
<v Speaker 0>to debug what the hell is going on.

00:40:55.050 --> 00:40:55.370
<v Speaker 0>Alright.

00:40:57.455 --> 00:40:58.255
<v Speaker 0>So

00:40:58.255 --> 00:41:01.055
<v Speaker 0>alias k equals kube control

00:41:01.055 --> 00:41:03.855
<v Speaker 0>export kube config equals

00:41:03.855 --> 00:41:05.455
<v Speaker 0>our control plan.

00:41:05.455 --> 00:41:06.015
<v Speaker 0>Get

00:41:08.175 --> 00:41:10.815
<v Speaker 0>notes. Okay. We have no API server. Go

00:41:10.815 --> 00:41:12.015
<v Speaker 0>figure standard

00:41:12.015 --> 00:41:12.735
<v Speaker 0>practice now.

00:41:13.990 --> 00:41:15.430
<v Speaker 0>Did you manage to join the session at

00:41:15.430 --> 00:41:16.710
<v Speaker 0>all? Or are still having a little bit

00:41:16.710 --> 00:41:19.670
<v Speaker 0>trouble there? I am joining it at this

00:41:19.670 --> 00:41:22.230
<v Speaker 1>moment. Alright. Cool. So I'm gonna do some

00:41:22.230 --> 00:41:24.150
<v Speaker 0>basic checks. I'm gonna look for the API

00:41:24.150 --> 00:41:24.470
<v Speaker 0>server.

00:41:27.755 --> 00:41:28.395
<v Speaker 0>No, but

00:41:29.194 --> 00:41:31.115
<v Speaker 0>I do love the watch cat command, so

00:41:31.115 --> 00:41:33.035
<v Speaker 0>I'm gonna take a w w on this

00:41:33.035 --> 00:41:34.875
<v Speaker 0>so we can see the build.

00:41:35.035 --> 00:41:36.315
<v Speaker 0>Why did that not show me the full

00:41:36.315 --> 00:41:38.154
<v Speaker 0>thing? Oh, this must be a teleport bug.

00:41:43.570 --> 00:41:45.570
<v Speaker 0>Oh, and the watch has disappeared now.

00:41:46.290 --> 00:41:48.450
<v Speaker 0>Oh, I saw it though. It's coming back.

00:41:53.065 --> 00:41:55.465
<v Speaker 0>Oh, right. Okay. I missed my opportunity to

00:41:55.465 --> 00:41:56.665
<v Speaker 0>see what that command was.

00:41:56.905 --> 00:41:58.825
<v Speaker 0>Okay. We have no API server.

00:41:59.785 --> 00:42:01.625
<v Speaker 0>What else do we need to check for?

00:42:02.105 --> 00:42:03.065
<v Speaker 0>Qubelet.

00:42:03.625 --> 00:42:05.785
<v Speaker 0>Okay. So we do have a running Qubelet.

00:42:06.369 --> 00:42:07.810
<v Speaker 0>Let's do the

00:42:08.130 --> 00:42:08.930
<v Speaker 0>same

00:42:09.410 --> 00:42:10.210
<v Speaker 0>thing.

00:42:10.849 --> 00:42:11.730
<v Speaker 0>Kubernetes

00:42:11.970 --> 00:42:13.010
<v Speaker 0>manifest.

00:42:14.450 --> 00:42:16.290
<v Speaker 0>We have fails that have been modified and

00:42:16.290 --> 00:42:17.330
<v Speaker 0>we have what loosely

00:42:18.395 --> 00:42:21.035
<v Speaker 0>I even remember what uses tilde backup fails,

00:42:21.035 --> 00:42:21.995
<v Speaker 0>nano maybe.

00:42:23.115 --> 00:42:25.275
<v Speaker 0>So now we know this cluster is broken

00:42:25.275 --> 00:42:28.875
<v Speaker 0>by Lewis, Dan and Patty, organizer of CloudNative

00:42:28.875 --> 00:42:29.675
<v Speaker 0>Wales

00:42:29.675 --> 00:42:32.250
<v Speaker 0>and and a little assist

00:42:32.250 --> 00:42:34.250
<v Speaker 0>from the control plane team. So I'm looking

00:42:34.250 --> 00:42:36.330
<v Speaker 0>forward to fixing this one. Thomas, we will

00:42:36.330 --> 00:42:37.690
<v Speaker 0>come back to your cluster in a minute.

00:42:37.690 --> 00:42:40.250
<v Speaker 0>Thomas has said that Teleport is back online.

00:42:41.290 --> 00:42:42.810
<v Speaker 1>I'm actually wondering if

00:42:43.815 --> 00:42:45.655
<v Speaker 1>they they made this one a little easy

00:42:45.655 --> 00:42:48.855
<v Speaker 1>for us by those tilde files actually being

00:42:48.855 --> 00:42:50.055
<v Speaker 1>the originals

00:42:50.214 --> 00:42:52.855
<v Speaker 1>looking at the time stamps and the

00:42:53.575 --> 00:42:54.775
<v Speaker 1>and the size differences.

00:42:56.580 --> 00:42:57.380
<v Speaker 0>Alright.

00:42:57.620 --> 00:42:59.700
<v Speaker 0>We'll be trying to fix this one in

00:42:59.700 --> 00:43:01.220
<v Speaker 0>quickly, or do you wanna go back to

00:43:01.220 --> 00:43:02.580
<v Speaker 0>nine while it's still fresh in your head?

00:43:02.580 --> 00:43:04.340
<v Speaker 0>I'll let you to save. We can go

00:43:04.340 --> 00:43:05.860
<v Speaker 1>ahead and jump back to nine and then

00:43:06.100 --> 00:43:08.260
<v Speaker 0>Right. Okay. Come back to this one. We

00:43:08.260 --> 00:43:10.235
<v Speaker 1>haven't gotten too far in, but it looks

00:43:10.235 --> 00:43:11.515
<v Speaker 1>like I'm gonna have to try to log

00:43:11.515 --> 00:43:14.075
<v Speaker 1>back into the Telescope session there too.

00:43:15.835 --> 00:43:17.595
<v Speaker 0>And do I have a session? I do

00:43:17.595 --> 00:43:19.515
<v Speaker 0>have a session. Thank you, Thomas.

00:43:20.475 --> 00:43:20.875
<v Speaker 0>So

00:43:23.440 --> 00:43:25.520
<v Speaker 0>kindly shared the error with us as well.

00:43:25.520 --> 00:43:28.160
<v Speaker 0>Runtime error, invalid memory address or no pointer.

00:43:28.160 --> 00:43:29.840
<v Speaker 0>Yeah. You definitely broke it.

00:43:30.080 --> 00:43:30.560
<v Speaker 0>Okay.

00:43:34.640 --> 00:43:35.440
<v Speaker 0>So

00:43:36.234 --> 00:43:38.234
<v Speaker 0>it's only been like two minutes and already

00:43:38.234 --> 00:43:39.435
<v Speaker 0>I have no idea what I was doing

00:43:39.435 --> 00:43:41.035
<v Speaker 0>with this cluster. So we

00:43:44.234 --> 00:43:46.315
<v Speaker 0>we got the API server back online, core

00:43:46.315 --> 00:43:48.395
<v Speaker 0>DNS wasn't running. There was all sorts of

00:43:48.395 --> 00:43:50.474
<v Speaker 0>crazy nonsense going on in I've lost my

00:43:50.474 --> 00:43:50.875
<v Speaker 0>alias.

00:43:51.960 --> 00:43:54.040
<v Speaker 0>The default namespace.

00:43:55.160 --> 00:43:57.400
<v Speaker 0>They say API server is down again.

00:43:57.560 --> 00:43:59.480
<v Speaker 0>Oh no, I've not got the export.

00:44:06.135 --> 00:44:06.855
<v Speaker 0>Okay.

00:44:08.535 --> 00:44:10.215
<v Speaker 0>You've joined, which means we have that weird

00:44:10.215 --> 00:44:11.975
<v Speaker 0>reload bug. Okay. So

00:44:13.255 --> 00:44:15.335
<v Speaker 0>should we just start I don't

00:44:16.135 --> 00:44:18.855
<v Speaker 0>all these things have fixed. Is this that

00:44:18.855 --> 00:44:19.975
<v Speaker 0>should have been indicative

00:44:20.260 --> 00:44:23.460
<v Speaker 0>of resource exhaustion. Things are being moved off

00:44:23.460 --> 00:44:26.500
<v Speaker 0>of this thing. That makes sense? So like,

00:44:27.380 --> 00:44:28.580
<v Speaker 0>we have top.

00:44:31.460 --> 00:44:33.780
<v Speaker 0>The load average isn't exactly revealing too much

00:44:33.780 --> 00:44:34.100
<v Speaker 0>there.

00:44:36.345 --> 00:44:38.025
<v Speaker 0>Let's check the memory. Oh, the memory is

00:44:38.025 --> 00:44:38.745
<v Speaker 0>there too.

00:44:42.185 --> 00:44:44.025
<v Speaker 1>So we don't have a lot used now,

00:44:44.025 --> 00:44:45.625
<v Speaker 1>but Yeah. We don't know what was happening

00:44:45.625 --> 00:44:46.905
<v Speaker 0>ten minutes ago, dude.

00:44:47.385 --> 00:44:47.865
<v Speaker 1>Exactly.

00:44:49.440 --> 00:44:51.200
<v Speaker 1>The other thing we can do is we

00:44:51.200 --> 00:44:51.760
<v Speaker 1>can look at

00:44:52.800 --> 00:44:54.320
<v Speaker 1>so far, I think we've only looked at

00:44:54.320 --> 00:44:56.079
<v Speaker 1>the default namespace, and we've only looked at

00:44:56.079 --> 00:44:57.680
<v Speaker 1>the cube system namespace.

00:44:58.079 --> 00:44:59.520
<v Speaker 1>So we can also look to see if

00:44:59.520 --> 00:45:02.000
<v Speaker 1>we have pods and other namespaces that may

00:45:02.000 --> 00:45:03.440
<v Speaker 1>be taking up resources.

00:45:04.745 --> 00:45:06.985
<v Speaker 0>Okay. So we wanna do an all namespaces.

00:45:08.185 --> 00:45:09.465
<v Speaker 0>That's a bit funny. Let's see if I

00:45:09.465 --> 00:45:11.145
<v Speaker 0>can maybe just make that a bit smaller.

00:45:11.145 --> 00:45:14.425
<v Speaker 0>Yeah. That helps. Okay. So Selium is running,

00:45:14.505 --> 00:45:15.305
<v Speaker 0>which I like.

00:45:17.160 --> 00:45:18.280
<v Speaker 0>Hubble's not.

00:45:18.839 --> 00:45:20.119
<v Speaker 0>I don't know what's going on with the

00:45:20.119 --> 00:45:20.920
<v Speaker 0>honks.

00:45:24.280 --> 00:45:26.359
<v Speaker 0>But they're all evicted anyway, so probably not

00:45:26.359 --> 00:45:27.160
<v Speaker 0>a problem.

00:45:27.640 --> 00:45:29.320
<v Speaker 0>I'm saying with a bit of hope rather

00:45:29.320 --> 00:45:30.200
<v Speaker 0>than any knowledge.

00:45:31.415 --> 00:45:33.095
<v Speaker 0>Our WordPress application

00:45:33.494 --> 00:45:36.135
<v Speaker 0>is not working. Core DNS is running, but

00:45:36.135 --> 00:45:37.095
<v Speaker 0>not healthy.

00:45:37.175 --> 00:45:39.335
<v Speaker 0>HCT is okay. APIs server is okay. In

00:45:39.335 --> 00:45:40.615
<v Speaker 0>fact, the control plane

00:45:40.855 --> 00:45:43.415
<v Speaker 0>besides core DNS appears to be alright. So

00:45:43.415 --> 00:45:44.455
<v Speaker 0>let's work out this.

00:45:46.610 --> 00:45:48.290
<v Speaker 0>Oh, no. Rawk is

00:45:49.170 --> 00:45:50.450
<v Speaker 0>dead in the water too.

00:45:50.850 --> 00:45:51.570
<v Speaker 1>Yep.

00:45:51.970 --> 00:45:52.610
<v Speaker 1>And

00:45:52.850 --> 00:45:55.330
<v Speaker 1>I I do like Thomas' suggestion of looking

00:45:55.330 --> 00:45:56.930
<v Speaker 1>at the eviction reasons,

00:45:56.930 --> 00:45:58.850
<v Speaker 1>so we can probably do a describe on

00:45:58.850 --> 00:46:00.370
<v Speaker 1>one of those pods to

00:46:01.015 --> 00:46:03.255
<v Speaker 1>and and get the the reason for the

00:46:03.255 --> 00:46:05.335
<v Speaker 1>eviction or or events.

00:46:06.935 --> 00:46:08.535
<v Speaker 0>Do you wanna as well. Take the controls

00:46:08.535 --> 00:46:10.295
<v Speaker 0>and they destroy it? Yeah.

00:46:11.815 --> 00:46:12.855
<v Speaker 1>So

00:46:15.990 --> 00:46:18.470
<v Speaker 1>so we know the honk ones are evicted.

00:46:19.910 --> 00:46:21.349
<v Speaker 1>But I

00:46:21.349 --> 00:46:23.029
<v Speaker 1>don't know if there's going to be any

00:46:23.029 --> 00:46:25.830
<v Speaker 1>type of a red herring there. So

00:46:28.065 --> 00:46:30.225
<v Speaker 0>You don't trust the one of the

00:46:30.465 --> 00:46:31.825
<v Speaker 1>WordPress ones.

00:46:33.185 --> 00:46:34.865
<v Speaker 0>K. Question for

00:46:34.945 --> 00:46:36.785
<v Speaker 0>mister Rawkode. Is this the first or second

00:46:36.785 --> 00:46:38.305
<v Speaker 0>cluster? It's the first.

00:46:38.625 --> 00:46:40.545
<v Speaker 1>Yes. We are back on the first cluster.

00:46:42.690 --> 00:46:45.650
<v Speaker 1>So I'm able to attach or mount volumes.

00:46:47.890 --> 00:46:50.130
<v Speaker 0>So which pod was this you described? Sorry.

00:46:51.650 --> 00:46:53.810
<v Speaker 1>This is the WordPress pod.

00:46:56.424 --> 00:46:58.105
<v Speaker 0>Oh, yeah. Those volumes won't be able to

00:46:58.105 --> 00:47:00.505
<v Speaker 0>able to mount because Rawkode is evicted as

00:47:00.505 --> 00:47:00.984
<v Speaker 0>well.

00:47:01.545 --> 00:47:02.265
<v Speaker 1>Yep.

00:47:05.785 --> 00:47:06.425
<v Speaker 1>So

00:47:08.424 --> 00:47:09.865
<v Speaker 0>Why don't we take a look at

00:47:11.360 --> 00:47:13.600
<v Speaker 0>I think you may you probably should describe

00:47:13.600 --> 00:47:15.040
<v Speaker 0>a honk. Let's just see what his talent

00:47:15.040 --> 00:47:15.680
<v Speaker 0>is. Yeah. Let's

00:47:23.535 --> 00:47:24.734
<v Speaker 1>So failed

00:47:24.734 --> 00:47:26.575
<v Speaker 1>to pull an unpack image.

00:47:27.775 --> 00:47:29.215
<v Speaker 1>Resolve failed.

00:47:30.415 --> 00:47:32.335
<v Speaker 0>Oh, yeah. That's using that old DNS entry

00:47:32.335 --> 00:47:34.415
<v Speaker 0>192168587.

00:47:34.415 --> 00:47:35.055
<v Speaker 0>So

00:47:36.130 --> 00:47:37.410
<v Speaker 0>that was the one that we fixed on

00:47:37.410 --> 00:47:39.810
<v Speaker 0>the load on the the machine itself.

00:47:40.770 --> 00:47:41.810
<v Speaker 1>But also,

00:47:42.210 --> 00:47:43.890
<v Speaker 1>there's another issue up here.

00:47:44.930 --> 00:47:48.050
<v Speaker 1>The node was low on resources on iNodes.

00:47:49.115 --> 00:47:50.075
<v Speaker 0>Ah.

00:47:53.515 --> 00:47:57.515
<v Speaker 0>Okay. So the resource exhaustion was iNodes rather

00:47:57.515 --> 00:47:59.115
<v Speaker 0>than memory or CPU.

00:48:00.315 --> 00:48:02.075
<v Speaker 1>So there's a couple of things

00:48:03.300 --> 00:48:05.140
<v Speaker 1>system could be configured with

00:48:05.860 --> 00:48:07.220
<v Speaker 1>a low number.

00:48:10.500 --> 00:48:12.580
<v Speaker 1>But just to double check that,

00:48:13.300 --> 00:48:14.820
<v Speaker 1>you know, it or it could just be

00:48:14.820 --> 00:48:17.700
<v Speaker 1>exhaustion on the actual file system device.

00:48:19.805 --> 00:48:21.405
<v Speaker 0>So we can look at d f has

00:48:21.405 --> 00:48:23.565
<v Speaker 0>a flag to show I node consumption. Right?

00:48:26.684 --> 00:48:28.285
<v Speaker 1>If it does, then I just learned it

00:48:28.285 --> 00:48:31.085
<v Speaker 1>today. Yeah. Because I've I've had this a

00:48:31.085 --> 00:48:31.484
<v Speaker 0>few times.

00:48:32.079 --> 00:48:33.360
<v Speaker 0>Yeah. Dash I.

00:48:34.559 --> 00:48:35.840
<v Speaker 0>Yeah. %

00:48:36.640 --> 00:48:38.560
<v Speaker 0>on a few things here.

00:48:41.040 --> 00:48:42.400
<v Speaker 0>Root fail system.

00:48:42.480 --> 00:48:43.680
<v Speaker 0>Now I don't know if that's gonna be

00:48:43.680 --> 00:48:45.680
<v Speaker 0>normal for an overlay root fail system to

00:48:45.680 --> 00:48:48.375
<v Speaker 0>show a % I node, but oh, and

00:48:48.375 --> 00:48:50.375
<v Speaker 0>there's our root file system actually.

00:48:51.255 --> 00:48:51.975
<v Speaker 0>It's run out of almost

00:48:52.775 --> 00:48:54.375
<v Speaker 0>run out of inodes as well.

00:48:54.695 --> 00:48:56.695
<v Speaker 0>And I wonder if that's So Sorry. I'm

00:48:56.695 --> 00:48:57.175
<v Speaker 0>gonna go.

00:48:58.215 --> 00:48:58.535
<v Speaker 1>Yeah.

00:49:00.140 --> 00:49:01.900
<v Speaker 0>So that would tell me there's a process

00:49:01.900 --> 00:49:02.780
<v Speaker 0>running

00:49:03.100 --> 00:49:03.980
<v Speaker 0>somewhere

00:49:04.860 --> 00:49:06.220
<v Speaker 0>open and fails.

00:49:09.420 --> 00:49:11.100
<v Speaker 0>Yeah. Would you agree with that?

00:49:11.420 --> 00:49:11.900
<v Speaker 1>Yes.

00:49:13.115 --> 00:49:15.994
<v Speaker 0>Alright. So we could use l s o

00:49:15.994 --> 00:49:18.475
<v Speaker 0>f to see if we see anything?

00:49:20.155 --> 00:49:22.474
<v Speaker 1>We can, but that's probably gonna be pretty

00:49:22.474 --> 00:49:25.195
<v Speaker 1>noisy as well because we are running a

00:49:25.195 --> 00:49:26.714
<v Speaker 1>system that's running containers.

00:49:28.460 --> 00:49:29.180
<v Speaker 0>Okay.

00:49:29.339 --> 00:49:31.020
<v Speaker 0>What's what's plan b?

00:49:35.900 --> 00:49:36.540
<v Speaker 1>So

00:49:37.260 --> 00:49:38.540
<v Speaker 1>I see

00:49:39.500 --> 00:49:41.100
<v Speaker 1>Thomas is suggesting

00:49:41.500 --> 00:49:42.780
<v Speaker 1>a d f command there.

00:49:44.115 --> 00:49:46.035
<v Speaker 0>Dash l root. You can go ahead.

00:49:46.675 --> 00:49:48.835
<v Speaker 1>I believe so. I'm having trouble

00:49:49.715 --> 00:49:51.235
<v Speaker 1>reading that small. But

00:49:56.270 --> 00:49:59.230
<v Speaker 1>And, yes, iNodes are not equal to open

00:49:59.230 --> 00:50:00.030
<v Speaker 1>files.

00:50:01.710 --> 00:50:03.630
<v Speaker 0>But they are part of the problem. Right?

00:50:03.630 --> 00:50:06.830
<v Speaker 0>I'm like, you either writing files,

00:50:06.910 --> 00:50:09.470
<v Speaker 0>opening file oh, maybe I'm failing miserably there.

00:50:10.545 --> 00:50:12.464
<v Speaker 1>Well, I mean, the files could already be

00:50:12.464 --> 00:50:13.505
<v Speaker 1>closed too.

00:50:14.305 --> 00:50:16.464
<v Speaker 1>But let yeah. Let's go ahead and do

00:50:16.704 --> 00:50:19.105
<v Speaker 1>well, we can do an l s on

00:50:19.265 --> 00:50:21.425
<v Speaker 1>various directories. We could do

00:50:22.545 --> 00:50:23.905
<v Speaker 1>we could try the l s o f

00:50:23.905 --> 00:50:24.305
<v Speaker 1>approach.

00:50:26.750 --> 00:50:27.630
<v Speaker 0>Okay. So we should

00:50:28.750 --> 00:50:30.830
<v Speaker 0>nothing in the root file system. So, you

00:50:30.830 --> 00:50:32.190
<v Speaker 0>know, it would have been helpful if it's

00:50:32.190 --> 00:50:33.070
<v Speaker 0>seen 65,000

00:50:33.070 --> 00:50:35.470
<v Speaker 0>files sitting there. But Exactly.

00:50:36.910 --> 00:50:37.310
<v Speaker 0>Okay.

00:50:40.135 --> 00:50:41.815
<v Speaker 0>What do you think that packer file is?

00:50:41.815 --> 00:50:43.655
<v Speaker 0>Should we just use the metadata? Like, if

00:50:43.655 --> 00:50:44.855
<v Speaker 0>we do a dash l,

00:50:46.455 --> 00:50:48.775
<v Speaker 0>see any timestamps that are recent.

00:50:53.260 --> 00:50:53.980
<v Speaker 0>No.

00:51:01.580 --> 00:51:02.940
<v Speaker 0>I mean, I'm tempted just to reach for

00:51:02.940 --> 00:51:05.020
<v Speaker 0>LSOF because I feel like I'm swinging though

00:51:05.020 --> 00:51:05.900
<v Speaker 0>for any idea.

00:51:13.385 --> 00:51:15.065
<v Speaker 1>So I know if we were looking at

00:51:15.065 --> 00:51:17.065
<v Speaker 1>actual file sizes,

00:51:17.065 --> 00:51:18.265
<v Speaker 1>I would use DU.

00:51:19.350 --> 00:51:20.870
<v Speaker 1>I don't know if there's a flag in

00:51:20.870 --> 00:51:22.630
<v Speaker 1>d u that would give us something

00:51:23.030 --> 00:51:24.870
<v Speaker 1>to look at inode usage.

00:51:25.510 --> 00:51:27.430
<v Speaker 0>I'm not aware of anything,

00:51:28.390 --> 00:51:30.630
<v Speaker 0>but we could do c tame.

00:51:31.365 --> 00:51:33.205
<v Speaker 0>I I don't know the find syntax that

00:51:33.205 --> 00:51:35.365
<v Speaker 0>well, but I'm sure we can do like

00:51:37.125 --> 00:51:38.565
<v Speaker 0>five days.

00:51:40.325 --> 00:51:42.005
<v Speaker 0>Create a time within five days. Is that

00:51:42.005 --> 00:51:42.165
<v Speaker 0>right?

00:51:46.340 --> 00:51:47.300
<v Speaker 0>Think so.

00:51:49.300 --> 00:51:51.140
<v Speaker 0>Fancy time. There is a way to do

00:51:51.140 --> 00:51:51.700
<v Speaker 0>it.

00:51:53.940 --> 00:51:55.060
<v Speaker 0>Google is my friend.

00:51:57.855 --> 00:51:59.775
<v Speaker 1>So he's given us a hint that it's

00:51:59.855 --> 00:52:02.415
<v Speaker 1>it was sitting right there in Oh.

00:52:03.295 --> 00:52:04.495
<v Speaker 1>In the root.

00:52:08.815 --> 00:52:10.095
<v Speaker 1>And d u dash I.

00:52:15.609 --> 00:52:16.650
<v Speaker 0>I

00:52:23.049 --> 00:52:24.410
<v Speaker 0>I forgot how to Linux.

00:52:25.925 --> 00:52:26.645
<v Speaker 1>Right.

00:52:26.965 --> 00:52:29.205
<v Speaker 0>D u dash d one. Oh, yeah. D

00:52:29.205 --> 00:52:29.925
<v Speaker 0>h.

00:52:30.245 --> 00:52:31.765
<v Speaker 0>Depth one and that will show me the

00:52:31.765 --> 00:52:32.885
<v Speaker 0>file sizes,

00:52:33.045 --> 00:52:34.805
<v Speaker 0>but not necessarily the nodes.

00:52:36.085 --> 00:52:38.485
<v Speaker 1>I think I caught something about the temp

00:52:38.485 --> 00:52:39.365
<v Speaker 1>directory there.

00:52:41.660 --> 00:52:42.780
<v Speaker 0>With this?

00:52:44.540 --> 00:52:45.340
<v Speaker 1>Yep.

00:52:47.020 --> 00:52:47.900
<v Speaker 0>Oh, yeah.

00:52:54.700 --> 00:52:55.820
<v Speaker 0>So you want to take a look in

00:52:55.820 --> 00:52:56.140
<v Speaker 0>temp?

00:52:59.795 --> 00:53:01.875
<v Speaker 1>I mean, four hundred and seventy four seventy

00:53:01.875 --> 00:53:03.475
<v Speaker 1>five megs does not look

00:53:03.635 --> 00:53:06.835
<v Speaker 0>because that stash l is taken taken time.

00:53:07.795 --> 00:53:09.395
<v Speaker 1>If you wanna consume

00:53:09.395 --> 00:53:10.675
<v Speaker 1>a lot of I nodes

00:53:11.070 --> 00:53:12.350
<v Speaker 1>and not consume

00:53:12.510 --> 00:53:14.590
<v Speaker 1>a lot of disk space, you're gonna write

00:53:14.590 --> 00:53:16.270
<v Speaker 1>a lot of really small files.

00:53:21.070 --> 00:53:22.590
<v Speaker 0>Yeah. Most of my

00:53:23.085 --> 00:53:25.005
<v Speaker 0>most of my commands I would use are

00:53:25.005 --> 00:53:26.525
<v Speaker 0>taking a very long time here.

00:53:33.484 --> 00:53:35.244
<v Speaker 0>Alright. Let's jump to the comments for help.

00:53:35.244 --> 00:53:36.125
<v Speaker 0>What have we got?

00:53:36.525 --> 00:53:38.125
<v Speaker 1>Is that a dot dot dot file?

00:53:42.020 --> 00:53:42.820
<v Speaker 0>Yes.

00:53:43.380 --> 00:53:45.220
<v Speaker 0>But I I can we can't run l

00:53:45.220 --> 00:53:46.580
<v Speaker 0>s in this directory.

00:53:47.140 --> 00:53:48.500
<v Speaker 0>At least not in

00:53:49.140 --> 00:53:50.820
<v Speaker 0>I'm not sure if that's ever gonna finish.

00:54:00.225 --> 00:54:02.465
<v Speaker 0>And that's a good point actually from

00:54:02.465 --> 00:54:04.145
<v Speaker 0>Thomas. Four hundred and seventy five meg is

00:54:04.145 --> 00:54:05.985
<v Speaker 0>huge for a directory. I mean, that's right.

00:54:05.985 --> 00:54:07.585
<v Speaker 0>Normally, I would always expect a directory just

00:54:07.585 --> 00:54:08.225
<v Speaker 0>to be four k.

00:54:08.950 --> 00:54:11.590
<v Speaker 0>So I've I've I I don't even know

00:54:11.590 --> 00:54:12.870
<v Speaker 0>what would cause that.

00:54:14.550 --> 00:54:16.950
<v Speaker 0>What causes that directory to be bigger? That

00:54:16.950 --> 00:54:18.470
<v Speaker 0>would tell me it's still a directory

00:54:19.110 --> 00:54:20.710
<v Speaker 0>or it's

00:54:21.795 --> 00:54:24.355
<v Speaker 0>something else? In fact, maybe is there something

00:54:24.355 --> 00:54:26.275
<v Speaker 0>on Well, the directory entry

00:54:26.435 --> 00:54:27.075
<v Speaker 1>has

00:54:27.714 --> 00:54:29.795
<v Speaker 1>a listing of all the

00:54:31.795 --> 00:54:33.315
<v Speaker 1>pointers to all the I nodes of the

00:54:33.315 --> 00:54:34.675
<v Speaker 1>files that are in there, doesn't it?

00:54:35.760 --> 00:54:36.800
<v Speaker 0>Right. Okay.

00:54:42.080 --> 00:54:44.960
<v Speaker 0>So Thomas has suggested to an echo star.

00:54:47.600 --> 00:54:47.920
<v Speaker 0>Nice.

00:54:55.715 --> 00:54:58.435
<v Speaker 1>Yeah. I'm almost kinda partial to taking the

00:54:58.595 --> 00:54:59.795
<v Speaker 1>RM approach.

00:55:01.315 --> 00:55:03.875
<v Speaker 0>Oh, the EchoStar has been

00:55:04.115 --> 00:55:05.315
<v Speaker 0>a terrible guess itself.

00:55:10.039 --> 00:55:12.200
<v Speaker 0>We should we should check the I node

00:55:12.200 --> 00:55:13.400
<v Speaker 0>exhaustion before

00:55:13.799 --> 00:55:15.240
<v Speaker 0>things get out of hand again.

00:55:18.765 --> 00:55:20.684
<v Speaker 0>Assuming I ever get the ability to write

00:55:20.684 --> 00:55:21.724
<v Speaker 0>to this terminal.

00:55:22.045 --> 00:55:22.605
<v Speaker 0>Yeah.

00:55:23.005 --> 00:55:24.365
<v Speaker 0>I'm gonna see if I can open a

00:55:24.365 --> 00:55:25.805
<v Speaker 0>new one. Let's see.

00:55:28.605 --> 00:55:29.645
<v Speaker 0>DFI.

00:55:31.230 --> 00:55:32.990
<v Speaker 0>And it still gets 35,000

00:55:32.990 --> 00:55:34.990
<v Speaker 0>I nodes, which is what was free previously.

00:55:34.990 --> 00:55:36.110
<v Speaker 0>So I'm assuming

00:55:37.150 --> 00:55:38.190
<v Speaker 0>that the

00:55:38.270 --> 00:55:40.510
<v Speaker 0>process in question has potentially been halted.

00:55:47.265 --> 00:55:48.465
<v Speaker 0>Do you wanna just

00:55:48.944 --> 00:55:50.625
<v Speaker 0>attempt deleting it?

00:55:51.585 --> 00:55:52.865
<v Speaker 0>Is that where we're at?

00:55:56.464 --> 00:55:58.545
<v Speaker 1>Yeah. Let's let's go ahead and

00:56:01.720 --> 00:56:04.600
<v Speaker 1>I like that. Thomas is feeling pity on

00:56:04.600 --> 00:56:06.600
<v Speaker 1>us and giving us a fine command to

00:56:06.600 --> 00:56:07.800
<v Speaker 1>help

00:56:07.800 --> 00:56:08.760
<v Speaker 1>clean it out.

00:56:10.760 --> 00:56:12.840
<v Speaker 0>That's assuming it can read enough off the

00:56:12.840 --> 00:56:14.440
<v Speaker 0>disk to make it work too.

00:56:16.164 --> 00:56:17.365
<v Speaker 0>Fingers crossed.

00:56:22.885 --> 00:56:24.484
<v Speaker 0>Guess we sit back and wait.

00:56:26.885 --> 00:56:29.605
<v Speaker 1>I I have a feeling that

00:56:30.880 --> 00:56:33.280
<v Speaker 1>there's a potential that those Honk pods may

00:56:33.280 --> 00:56:35.680
<v Speaker 1>be contributing to this. So even after we

00:56:35.680 --> 00:56:36.800
<v Speaker 1>clean this out,

00:56:38.480 --> 00:56:40.400
<v Speaker 1>we may see it come back.

00:56:41.200 --> 00:56:42.924
<v Speaker 0>Okay. We've we've also had a comment saying

00:56:42.924 --> 00:56:45.565
<v Speaker 0>d u can show I node exhaustion dash

00:56:45.565 --> 00:56:47.164
<v Speaker 0>dash I nodes. That's good to know. We

00:56:47.164 --> 00:56:48.445
<v Speaker 0>can try that in a minute.

00:56:50.125 --> 00:56:52.365
<v Speaker 0>Thomas not filling me with confidence after giving

00:56:52.365 --> 00:56:53.805
<v Speaker 0>us the command to help fix it as

00:56:53.805 --> 00:56:54.525
<v Speaker 0>I said, uh-oh.

00:56:58.260 --> 00:56:59.540
<v Speaker 0>Just another day.

00:57:00.579 --> 00:57:01.300
<v Speaker 0>Let's

00:57:01.539 --> 00:57:03.619
<v Speaker 0>do it. Okay. Let's terminal's back. So let's

00:57:03.619 --> 00:57:06.099
<v Speaker 0>try that flag that was suggested to us.

00:57:09.845 --> 00:57:11.525
<v Speaker 0>Alright. The fact that that's been out no

00:57:11.525 --> 00:57:13.205
<v Speaker 0>such fail, I think means the files were

00:57:13.205 --> 00:57:15.685
<v Speaker 0>being deleted as we ran the DU,

00:57:16.085 --> 00:57:17.925
<v Speaker 0>which is good. So hopefully that same command

00:57:17.925 --> 00:57:18.805
<v Speaker 0>is working.

00:57:19.285 --> 00:57:22.540
<v Speaker 0>And the syntax or the style of naming

00:57:22.540 --> 00:57:24.380
<v Speaker 0>on that temp makes me think that there's

00:57:24.380 --> 00:57:26.700
<v Speaker 0>a process running m k temp on a

00:57:26.700 --> 00:57:27.340
<v Speaker 0>loop.

00:57:27.819 --> 00:57:30.300
<v Speaker 0>That's the default file name, I believe.

00:57:31.980 --> 00:57:32.700
<v Speaker 0>So

00:57:33.180 --> 00:57:34.700
<v Speaker 0>we could just run.

00:57:35.180 --> 00:57:37.265
<v Speaker 0>Oh, look at that. We've got over a

00:57:37.265 --> 00:57:39.905
<v Speaker 0>million I nodes now and 89% usage.

00:57:40.225 --> 00:57:41.745
<v Speaker 0>So things are getting better.

00:57:42.705 --> 00:57:45.505
<v Speaker 0>Yes. Now, I guess our concern is

00:57:46.465 --> 00:57:47.505
<v Speaker 0>those Honk pods.

00:57:48.560 --> 00:57:49.920
<v Speaker 0>Are they gonna come back?

00:57:50.480 --> 00:57:53.280
<v Speaker 1>I I I like the comments right now

00:57:53.280 --> 00:57:55.680
<v Speaker 1>because he's suggesting that we go check out

00:57:55.680 --> 00:57:56.640
<v Speaker 1>DNS

00:57:56.880 --> 00:57:58.560
<v Speaker 1>while Find is running.

00:58:01.359 --> 00:58:02.320
<v Speaker 0>If you want to take over.

00:58:03.335 --> 00:58:05.415
<v Speaker 1>So that also tells me that

00:58:06.134 --> 00:58:08.775
<v Speaker 1>this is likely to refill up on us

00:58:08.775 --> 00:58:09.415
<v Speaker 1>again.

00:58:09.654 --> 00:58:11.494
<v Speaker 0>Ah, that's a good point. Like, if our

00:58:11.494 --> 00:58:12.535
<v Speaker 0>core DNS

00:58:12.694 --> 00:58:15.575
<v Speaker 0>wasn't if the deployment looked okay and the

00:58:15.575 --> 00:58:17.494
<v Speaker 0>probes were right, there's a reason it's not

00:58:17.494 --> 00:58:19.630
<v Speaker 0>responding to traffic, and it's probably that it's

00:58:19.630 --> 00:58:20.830
<v Speaker 0>not core DNS.

00:58:21.710 --> 00:58:22.910
<v Speaker 0>Is that potentially?

00:58:24.590 --> 00:58:26.350
<v Speaker 0>The image could be swapped out.

00:58:27.950 --> 00:58:29.870
<v Speaker 1>Yeah. We can go ahead and take a

00:58:29.870 --> 00:58:30.350
<v Speaker 1>look at that.

00:58:41.005 --> 00:58:42.525
<v Speaker 1>Oh, we're getting slow again.

00:58:50.339 --> 00:58:51.780
<v Speaker 1>So looking here,

00:58:52.740 --> 00:58:53.940
<v Speaker 1>we're looking for

00:58:54.660 --> 00:58:56.260
<v Speaker 0>Containers image.

00:58:56.580 --> 00:58:57.300
<v Speaker 1>Yep.

00:58:58.820 --> 00:59:01.300
<v Speaker 1>So that looks like an official image. I'm

00:59:01.300 --> 00:59:03.755
<v Speaker 1>not sure about the version. I think we

00:59:03.755 --> 00:59:06.075
<v Speaker 0>should change the pill policy to always just

00:59:06.075 --> 00:59:06.315
<v Speaker 0>to

00:59:07.115 --> 00:59:08.555
<v Speaker 0>we don't know how sneaky.

00:59:13.435 --> 00:59:14.795
<v Speaker 0>Yeah. Should we change that?

00:59:16.235 --> 00:59:16.715
<v Speaker 0>Nice.

00:59:22.290 --> 00:59:23.809
<v Speaker 1>Yeah. We can go ahead and change that

00:59:23.809 --> 00:59:24.850
<v Speaker 1>to always.

00:59:26.290 --> 00:59:27.090
<v Speaker 1>So

00:59:27.250 --> 00:59:28.610
<v Speaker 1>kubectl

00:59:28.849 --> 00:59:29.570
<v Speaker 1>edit

00:59:30.210 --> 00:59:30.690
<v Speaker 1>deployment,

00:59:32.095 --> 00:59:33.615
<v Speaker 1>cube system

00:59:34.255 --> 00:59:35.615
<v Speaker 1>for DNS.

00:59:43.055 --> 00:59:45.775
<v Speaker 0>Because that f not present means that Thomas

00:59:45.775 --> 00:59:48.130
<v Speaker 0>could have built their own image on the

00:59:48.130 --> 00:59:50.050
<v Speaker 0>machine running an MK template.

00:59:51.170 --> 00:59:52.050
<v Speaker 0>And just for

00:59:53.330 --> 00:59:56.130
<v Speaker 1>fun, I'm I'm also gonna double check the

00:59:57.090 --> 00:59:58.690
<v Speaker 1>so it looks like the latest version accordion

00:59:58.690 --> 01:00:00.450
<v Speaker 1>s is one dot eight dot three. So

01:00:00.450 --> 01:00:02.370
<v Speaker 1>I don't think one dot seven

01:00:03.035 --> 01:00:04.475
<v Speaker 1>seems unreasonable.

01:00:05.755 --> 01:00:07.355
<v Speaker 0>Yeah. And a good point from Wily as

01:00:07.355 --> 01:00:08.635
<v Speaker 0>well is we haven't even looked at the

01:00:08.635 --> 01:00:10.635
<v Speaker 0>core DNS config map yet. We got we

01:00:10.635 --> 01:00:12.155
<v Speaker 0>got very much sidetracked.

01:00:13.035 --> 01:00:14.955
<v Speaker 1>Yeah. I had started looking at that, and

01:00:14.955 --> 01:00:16.315
<v Speaker 1>I did notice that there was

01:00:18.190 --> 01:00:20.110
<v Speaker 1>the start of a diff there. So

01:00:33.265 --> 01:00:36.065
<v Speaker 1>So looking through, and I'm I'm comparing this

01:00:36.065 --> 01:00:37.345
<v Speaker 1>basically to the

01:00:37.745 --> 01:00:39.665
<v Speaker 1>kubeadm code right now.

01:00:40.225 --> 01:00:43.025
<v Speaker 1>So we have the config map, core file,

01:00:43.105 --> 01:00:44.465
<v Speaker 1>port 53,

01:00:45.025 --> 01:00:47.265
<v Speaker 1>errors. There's a difference in health.

01:00:49.240 --> 01:00:49.960
<v Speaker 1>So

01:00:56.519 --> 01:00:58.680
<v Speaker 1>so it's lame duck,

01:00:58.680 --> 01:00:59.559
<v Speaker 1>five seconds.

01:01:04.435 --> 01:01:05.795
<v Speaker 1>No comma there.

01:01:07.955 --> 01:01:10.195
<v Speaker 1>We're

01:01:10.195 --> 01:01:11.235
<v Speaker 1>also missing

01:01:12.115 --> 01:01:13.075
<v Speaker 1>ready, I believe.

01:01:18.790 --> 01:01:19.830
<v Speaker 1>Kubernetes

01:01:19.830 --> 01:01:21.430
<v Speaker 1>cluster dot local.

01:01:23.910 --> 01:01:27.190
<v Speaker 1>That looks the same. Pods and secure fall

01:01:27.190 --> 01:01:27.670
<v Speaker 1>through

01:01:29.275 --> 01:01:30.635
<v Speaker 1>TTL of 30.

01:01:53.549 --> 01:01:55.150
<v Speaker 1>And all of this, like I said, I'm

01:01:55.150 --> 01:01:56.670
<v Speaker 1>just pulling straight out of the code.

01:02:04.695 --> 01:02:05.895
<v Speaker 1>Hash 30

01:02:06.055 --> 01:02:06.935
<v Speaker 1>loop,

01:02:08.055 --> 01:02:09.095
<v Speaker 1>reload,

01:02:09.095 --> 01:02:10.135
<v Speaker 1>and load balance.

01:02:12.130 --> 01:02:14.290
<v Speaker 0>And maybe we'll get a working core DNS

01:02:14.290 --> 01:02:14.690
<v Speaker 0>again.

01:02:27.515 --> 01:02:29.835
<v Speaker 1>And gonna go ahead and do the rollout

01:02:29.835 --> 01:02:33.515
<v Speaker 1>because, generally, updating config map does not cause

01:02:33.515 --> 01:02:35.915
<v Speaker 1>a deployment to roll out an update.

01:02:37.990 --> 01:02:39.910
<v Speaker 1>So at this point,

01:02:47.190 --> 01:02:49.270
<v Speaker 1>they're still not running,

01:02:49.270 --> 01:02:51.654
<v Speaker 1>but that could just be We don't know

01:02:51.654 --> 01:02:53.255
<v Speaker 0>how long the probes need to be healthy

01:02:53.255 --> 01:02:54.214
<v Speaker 0>before.

01:02:55.494 --> 01:02:57.974
<v Speaker 1>Exactly. And the container's not even created yet.

01:02:57.974 --> 01:02:58.775
<v Speaker 0>Okay. So

01:03:00.454 --> 01:03:02.535
<v Speaker 0>little bit of patience to be exercised here.

01:03:07.970 --> 01:03:09.810
<v Speaker 0>I guess that pill policy of always, it

01:03:09.810 --> 01:03:11.570
<v Speaker 0>may just be pulling down the real image

01:03:11.570 --> 01:03:12.290
<v Speaker 0>now.

01:03:18.130 --> 01:03:19.730
<v Speaker 1>I didn't want the

01:03:20.405 --> 01:03:21.445
<v Speaker 1>grip in there.

01:03:22.085 --> 01:03:22.805
<v Speaker 1>So

01:03:23.845 --> 01:03:26.085
<v Speaker 1>looks like it's failing to create the pod

01:03:26.085 --> 01:03:27.125
<v Speaker 1>sandbox.

01:03:29.765 --> 01:03:32.405
<v Speaker 0>Failed to fill and unpack the pause image.

01:03:34.405 --> 01:03:35.045
<v Speaker 1>Indeed.

01:03:36.510 --> 01:03:39.630
<v Speaker 1>Is this still DNS? Oh, connection refused.

01:03:42.590 --> 01:03:45.310
<v Speaker 0>Trying to look up kates.gcr.i0

01:03:45.310 --> 01:03:46.110
<v Speaker 0>on

01:03:47.870 --> 01:03:49.470
<v Speaker 0>local port 53.

01:04:05.150 --> 01:04:06.910
<v Speaker 0>So what's the response is that container deal

01:04:06.910 --> 01:04:08.830
<v Speaker 0>responsible for pulling the images?

01:04:11.390 --> 01:04:12.190
<v Speaker 1>So

01:04:14.430 --> 01:04:16.590
<v Speaker 1>I believe it's a responsibility

01:04:16.590 --> 01:04:19.950
<v Speaker 1>of the cubelet to interact with CRI to

01:04:20.495 --> 01:04:22.415
<v Speaker 1>pull the necessary images.

01:04:30.015 --> 01:04:31.375
<v Speaker 1>So we're seeing

01:04:31.695 --> 01:04:33.295
<v Speaker 1>that we can go ahead and check the

01:04:33.295 --> 01:04:34.575
<v Speaker 1>container d configuration.

01:04:35.430 --> 01:04:37.590
<v Speaker 0>Yeah. I'm wondering if there's anything funny.

01:04:38.390 --> 01:04:39.590
<v Speaker 0>I don't know.

01:04:39.990 --> 01:04:41.270
<v Speaker 0>Touching it, draws.

01:04:43.030 --> 01:04:44.710
<v Speaker 0>And Thomas has suggested we take a look

01:04:44.710 --> 01:04:46.950
<v Speaker 0>at our resolve config again. Although, I'm sure

01:04:46.950 --> 01:04:47.589
<v Speaker 0>we fixed it.

01:04:51.515 --> 01:04:52.395
<v Speaker 0>Oh, no.

01:04:59.355 --> 01:05:01.195
<v Speaker 0>Is that a just in time hack? I

01:05:01.195 --> 01:05:02.635
<v Speaker 0>don't know what you're saying up there, Thomas.

01:05:07.240 --> 01:05:08.359
<v Speaker 0>Alright.

01:05:08.359 --> 01:05:10.920
<v Speaker 0>Well, let's get that 8888

01:05:10.920 --> 01:05:13.240
<v Speaker 0>back in there and get core DNS running.

01:05:19.175 --> 01:05:21.415
<v Speaker 1>I like how it modified it differently this

01:05:21.415 --> 01:05:21.975
<v Speaker 1>time.

01:05:23.735 --> 01:05:25.735
<v Speaker 0>See, that's what I don't like about it.

01:05:27.095 --> 01:05:28.535
<v Speaker 0>You wait to see if it's gonna change

01:05:28.535 --> 01:05:28.775
<v Speaker 0>again?

01:05:32.030 --> 01:05:37.710
<v Speaker 1>Hasn't yet, at least. Let's

01:05:40.510 --> 01:05:42.510
<v Speaker 0>yeah. There's something in cron. Okay. So since

01:05:42.510 --> 01:05:44.345
<v Speaker 0>we have permission to look in cron, even

01:05:44.345 --> 01:05:45.785
<v Speaker 0>though I said that I'll I won't look

01:05:45.785 --> 01:05:46.585
<v Speaker 0>in cron,

01:05:47.145 --> 01:05:49.065
<v Speaker 0>we can check out what's going on there.

01:05:53.065 --> 01:05:53.385
<v Speaker 0>So

01:05:53.865 --> 01:05:55.704
<v Speaker 0>Resolver, I guess. Either resolver.

01:06:06.430 --> 01:06:06.829
<v Speaker 1>Nice.

01:06:14.095 --> 01:06:15.934
<v Speaker 0>They're actually running every minute, so it's probably

01:06:15.934 --> 01:06:17.295
<v Speaker 0>already goosed again.

01:06:22.095 --> 01:06:23.055
<v Speaker 1>And I'm not over

01:06:23.934 --> 01:06:26.654
<v Speaker 1>familiar with running

01:06:26.090 --> 01:06:28.330
<v Speaker 1>Ubuntu as a host OS

01:06:28.970 --> 01:06:31.210
<v Speaker 1>to know whether those other

01:06:31.930 --> 01:06:34.250
<v Speaker 1>cron jobs in there are Let's cat them.

01:06:34.250 --> 01:06:35.690
<v Speaker 0>Let's see what's going on.

01:06:36.250 --> 01:06:38.570
<v Speaker 0>I mean, the Scrubble did not sound particularly

01:06:38.570 --> 01:06:38.970
<v Speaker 0>healthy.

01:06:50.035 --> 01:06:50.835
<v Speaker 1>That

01:06:50.994 --> 01:06:53.474
<v Speaker 1>doesn't seem

01:06:59.740 --> 01:07:02.140
<v Speaker 0>I don't know what you two scribble is.

01:07:07.660 --> 01:07:09.500
<v Speaker 0>Some sort of LDM thing. Yeah. We can

01:07:09.500 --> 01:07:10.380
<v Speaker 0>maybe just ignore it.

01:07:11.885 --> 01:07:14.125
<v Speaker 0>Do you wanna fix our resolve Conf again

01:07:14.125 --> 01:07:16.045
<v Speaker 0>and get let's check for DNS?

01:07:16.125 --> 01:07:18.125
<v Speaker 0>Because I'm assuming that we maybe got caught

01:07:18.125 --> 01:07:19.565
<v Speaker 0>by it. Yeah. There we go.

01:07:20.204 --> 01:07:21.005
<v Speaker 0>Before

01:07:22.204 --> 01:07:23.165
<v Speaker 0>we remove that.

01:07:28.400 --> 01:07:29.280
<v Speaker 0>Alright.

01:07:32.320 --> 01:07:34.240
<v Speaker 0>The rest are normal. Thomas has confirmed.

01:07:37.135 --> 01:07:39.295
<v Speaker 0>And then politely followed up with don't sweat

01:07:39.295 --> 01:07:40.255
<v Speaker 0>it. Thanks.

01:07:43.855 --> 01:07:46.095
<v Speaker 0>Alright. Let's see. Come on, Courtney.

01:07:46.975 --> 01:07:48.255
<v Speaker 0>Let's see if you're happy.

01:07:49.770 --> 01:07:51.690
<v Speaker 0>Oh, image pulled back off.

01:07:53.050 --> 01:07:55.050
<v Speaker 0>So that'll be that pulled back off.

01:07:57.130 --> 01:07:59.770
<v Speaker 1>So it could be a modified

01:08:00.570 --> 01:08:04.825
<v Speaker 1>tag version because not all core DNS versions

01:08:04.825 --> 01:08:06.505
<v Speaker 1>are tagged with the

01:08:07.785 --> 01:08:09.945
<v Speaker 1>Kubernetes release artifacts.

01:08:12.025 --> 01:08:13.625
<v Speaker 1>Or it could just be that

01:08:16.984 --> 01:08:18.265
<v Speaker 1>Nearing the finish line.

01:08:20.010 --> 01:08:21.130
<v Speaker 0>Yeah. So

01:08:21.849 --> 01:08:24.090
<v Speaker 0>why don't we just try and pull that

01:08:24.090 --> 01:08:25.130
<v Speaker 0>manually?

01:08:25.609 --> 01:08:27.130
<v Speaker 0>I guess I can always just pull it

01:08:27.130 --> 01:08:28.409
<v Speaker 0>from my local machine.

01:08:29.449 --> 01:08:31.210
<v Speaker 0>Or maybe we're just being impatient and the

01:08:31.210 --> 01:08:33.689
<v Speaker 0>back off happened during the DNS break and

01:08:33.765 --> 01:08:35.045
<v Speaker 0>oh, there we go. Let's pull it up.

01:08:35.045 --> 01:08:35.685
<v Speaker 0>Okay.

01:08:37.765 --> 01:08:39.444
<v Speaker 0>It's running unhealthy.

01:08:39.765 --> 01:08:41.845
<v Speaker 0>Perfect. So we have core DNS at this

01:08:41.845 --> 01:08:42.404
<v Speaker 1>point.

01:08:42.885 --> 01:08:45.604
<v Speaker 1>We have etcd. We have the API server,

01:08:46.980 --> 01:08:48.899
<v Speaker 1>and the controller manager and

01:08:49.620 --> 01:08:52.340
<v Speaker 1>scheduler are at least running from a pod

01:08:52.340 --> 01:08:54.020
<v Speaker 1>level, not necessarily

01:08:55.140 --> 01:08:57.780
<v Speaker 1>beyond that. But since core DNS is rescheduled,

01:08:57.780 --> 01:09:00.835
<v Speaker 1>I assume that the scheduler is actually functioning

01:09:00.835 --> 01:09:01.314
<v Speaker 1>here.

01:09:01.795 --> 01:09:02.514
<v Speaker 0>Yep.

01:09:05.074 --> 01:09:08.434
<v Speaker 0>So that should bring other containers online.

01:09:10.114 --> 01:09:11.795
<v Speaker 1>Now we still have the evicted

01:09:12.560 --> 01:09:16.080
<v Speaker 1>packet cloud controller manager, but that could very

01:09:16.080 --> 01:09:16.639
<v Speaker 1>well,

01:09:19.520 --> 01:09:21.359
<v Speaker 1>you know, be residual here.

01:09:21.840 --> 01:09:24.000
<v Speaker 1>So we can go ahead and restart that.

01:09:24.399 --> 01:09:26.560
<v Speaker 0>Shall we just grab one of the Honk

01:09:26.560 --> 01:09:28.160
<v Speaker 0>pods before they stick coming back?

01:09:32.455 --> 01:09:34.215
<v Speaker 0>Just one, this is called honk.

01:09:47.470 --> 01:09:49.069
<v Speaker 0>And what's it trying to run?

01:09:51.710 --> 01:09:53.870
<v Speaker 0>Busy box, well true, sleep, done.

01:09:56.945 --> 01:09:59.025
<v Speaker 0>Yeah. I don't think they're actually doing anything,

01:10:02.545 --> 01:10:03.665
<v Speaker 0>which is good.

01:10:04.785 --> 01:10:07.105
<v Speaker 0>For fun, let's do a get all and

01:10:07.105 --> 01:10:07.824
<v Speaker 1>see

01:10:08.785 --> 01:10:09.744
<v Speaker 1>thing here.

01:10:09.985 --> 01:10:12.360
<v Speaker 1>The pod just seemed to be sitting there.

01:10:12.360 --> 01:10:12.679
<v Speaker 1>I'd

01:10:14.120 --> 01:10:16.120
<v Speaker 1>let's take a look at the describe again

01:10:16.120 --> 01:10:18.440
<v Speaker 1>and see if there's anything indicating

01:10:18.920 --> 01:10:23.559
<v Speaker 1>Yeah. What created them. Still using that 182168587

01:10:23.960 --> 01:10:25.000
<v Speaker 0>DNS setting.

01:10:32.275 --> 01:10:34.275
<v Speaker 0>You wanna try a rule out on our

01:10:35.315 --> 01:10:37.635
<v Speaker 0>WordPress deployment and see if it's healthy?

01:10:38.355 --> 01:10:40.515
<v Speaker 1>Yeah. We can go ahead and well, first,

01:10:40.515 --> 01:10:42.355
<v Speaker 1>we probably need to check the

01:10:43.290 --> 01:10:45.530
<v Speaker 1>the status of our storage.

01:10:50.250 --> 01:10:51.770
<v Speaker 1>So that would be in Rawkode.

01:11:01.025 --> 01:11:03.105
<v Speaker 0>Okay. So one of the operators has come

01:11:03.105 --> 01:11:05.505
<v Speaker 0>back. One of the managers has also come

01:11:05.505 --> 01:11:05.825
<v Speaker 0>back.

01:11:11.960 --> 01:11:13.880
<v Speaker 0>I mean, we'll I I would just take

01:11:13.880 --> 01:11:15.640
<v Speaker 0>the sledgehammer approach here and do a delete

01:11:15.640 --> 01:11:17.880
<v Speaker 0>pod all namespace rick staff just to force

01:11:17.880 --> 01:11:19.560
<v Speaker 0>all that to come right back up.

01:11:23.720 --> 01:11:25.480
<v Speaker 0>Yeah. I got you to do one delete

01:11:25.480 --> 01:11:27.880
<v Speaker 0>all, which means that I

01:11:27.395 --> 01:11:29.555
<v Speaker 0>consider that a victorious stream.

01:11:32.755 --> 01:11:33.635
<v Speaker 0>And

01:11:34.035 --> 01:11:36.755
<v Speaker 0>hopefully, that gets our storage system back online,

01:11:36.755 --> 01:11:38.675
<v Speaker 0>then WordPress can come back online.

01:11:38.675 --> 01:11:40.275
<v Speaker 0>And I think that's it.

01:11:41.075 --> 01:11:41.875
<v Speaker 0>Fingers crossed.

01:11:44.150 --> 01:11:46.070
<v Speaker 0>Let's just see if we've got that coming

01:11:46.070 --> 01:11:46.949
<v Speaker 0>back here.

01:11:48.310 --> 01:11:50.309
<v Speaker 1>Oh, that was fun. I didn't even

01:11:50.710 --> 01:11:53.190
<v Speaker 1>Oh, you control c that's why. I did.

01:11:53.670 --> 01:11:55.670
<v Speaker 0>Get pods dash watch.

01:11:59.645 --> 01:12:01.645
<v Speaker 0>And the ordering will be important for a

01:12:01.645 --> 01:12:03.005
<v Speaker 0>lot of these just because of the way

01:12:03.005 --> 01:12:04.445
<v Speaker 0>that Rickettseth works.

01:12:04.605 --> 01:12:06.605
<v Speaker 0>I can see our

01:12:07.725 --> 01:12:09.085
<v Speaker 0>provisioner is just coming on.

01:12:14.690 --> 01:12:16.130
<v Speaker 0>Let's see what's running.

01:12:25.330 --> 01:12:26.690
<v Speaker 0>Yeah. I think this is gonna take a

01:12:26.690 --> 01:12:27.250
<v Speaker 0>minute or two.

01:12:37.775 --> 01:12:40.255
<v Speaker 0>Yeah. Cool. Okay. So let's assume our storage

01:12:40.255 --> 01:12:41.535
<v Speaker 0>system is gonna be online.

01:12:44.230 --> 01:12:46.469
<v Speaker 0>I delete all has never hurt anybody.

01:12:46.949 --> 01:12:47.669
<v Speaker 0>Yeah.

01:12:48.790 --> 01:12:51.429
<v Speaker 1>Making a lot of assumptions now though, so

01:12:53.030 --> 01:12:53.989
<v Speaker 1>let's see.

01:12:54.630 --> 01:12:56.630
<v Speaker 0>Hope is definitely a strategy when it comes

01:12:56.630 --> 01:12:57.670
<v Speaker 0>to clustered, I've found.

01:13:02.815 --> 01:13:04.815
<v Speaker 0>The thing was Yes. We still didn't remove

01:13:04.815 --> 01:13:06.095
<v Speaker 1>the honk pods.

01:13:06.815 --> 01:13:08.415
<v Speaker 1>I suppose we can go ahead and do

01:13:08.415 --> 01:13:08.655
<v Speaker 1>that.

01:13:12.139 --> 01:13:13.499
<v Speaker 0>They seemed harmless.

01:13:13.739 --> 01:13:15.100
<v Speaker 0>At least the first one we looked at

01:13:15.100 --> 01:13:17.260
<v Speaker 0>was just running asleep for a very long

01:13:17.260 --> 01:13:17.900
<v Speaker 0>time.

01:13:19.340 --> 01:13:20.780
<v Speaker 0>Wonder if he was kind enough to stick

01:13:20.780 --> 01:13:22.139
<v Speaker 0>a common label on it that we could

01:13:22.139 --> 01:13:22.780
<v Speaker 0>delete them all.

01:13:34.284 --> 01:13:35.084
<v Speaker 0>No.

01:13:36.605 --> 01:13:37.485
<v Speaker 0>No labels.

01:13:38.445 --> 01:13:40.120
<v Speaker 0>In fact, there was an anode message right

01:13:40.120 --> 01:13:41.640
<v Speaker 0>on that. We should have described that a

01:13:41.640 --> 01:13:42.360
<v Speaker 0>lot earlier.

01:13:44.280 --> 01:13:45.080
<v Speaker 0>Oops.

01:13:51.000 --> 01:13:53.160
<v Speaker 0>Want me to do some hockey magic to

01:13:53.160 --> 01:13:54.120
<v Speaker 0>delete all the honks?

01:14:00.224 --> 01:14:01.505
<v Speaker 0>Or we can do that. I'm also trying

01:14:01.505 --> 01:14:02.864
<v Speaker 1>to keep an eye out to see if

01:14:02.864 --> 01:14:04.224
<v Speaker 1>they start coming back too.

01:14:26.525 --> 01:14:28.605
<v Speaker 0>Carlos, there was no common label and no

01:14:28.605 --> 01:14:31.244
<v Speaker 0>owner ref. There was a straight up pod.

01:14:31.565 --> 01:14:32.525
<v Speaker 0>Evil, I know.

01:14:39.570 --> 01:14:41.330
<v Speaker 0>Oh, so we got a container created now

01:14:41.330 --> 01:14:43.650
<v Speaker 0>in one of our WordPress. That's exciting. And

01:14:43.650 --> 01:14:45.250
<v Speaker 0>one of the MySQL.

01:14:48.930 --> 01:14:51.410
<v Speaker 0>Although Rawkode isn't particularly looking much healthier.

01:14:53.085 --> 01:14:55.725
<v Speaker 1>Still sitting and pending on some of those

01:14:55.725 --> 01:14:56.764
<v Speaker 1>Mon and

01:14:57.885 --> 01:14:58.605
<v Speaker 0>Yeah. Instances.

01:14:59.805 --> 01:15:01.565
<v Speaker 0>Well, maybe we need to describe one of

01:15:01.565 --> 01:15:02.125
<v Speaker 0>those.

01:15:03.405 --> 01:15:04.844
<v Speaker 0>See why it's pending.

01:15:06.685 --> 01:15:08.364
<v Speaker 0>Let's grab the

01:15:18.239 --> 01:15:20.000
<v Speaker 0>oh, there's some tents on the notes.

01:15:30.645 --> 01:15:33.285
<v Speaker 1>So why doesn't give it, but we can

01:15:33.285 --> 01:15:35.685
<v Speaker 1>just do a describe on them. Yeah. Describe

01:15:35.685 --> 01:15:37.285
<v Speaker 0>note and let it all

01:15:37.980 --> 01:15:39.099
<v Speaker 0>All flooders.

01:15:48.460 --> 01:15:50.380
<v Speaker 0>Yeah. Locked through no execute.

01:15:54.045 --> 01:15:56.044
<v Speaker 0>Let me just do an edit nodes and

01:15:56.045 --> 01:15:57.324
<v Speaker 0>delete them?

01:15:57.645 --> 01:15:58.045
<v Speaker 0>Yep.

01:16:05.430 --> 01:16:25.430
<v Speaker 0>I

01:16:19.205 --> 01:16:20.885
<v Speaker 0>wonder if it's funny. Yeah.

01:16:26.245 --> 01:16:28.085
<v Speaker 0>Okay. Let's try.

01:16:31.045 --> 01:16:31.925
<v Speaker 0>Oh, there we go.

01:16:40.909 --> 01:16:42.670
<v Speaker 0>Oh, yeah. That's coming up much faster now.

01:16:42.670 --> 01:16:43.790
<v Speaker 0>There we go. Okay. So

01:16:46.190 --> 01:16:46.590
<v Speaker 0>And

01:16:49.415 --> 01:16:52.695
<v Speaker 0>maybe not too much movement quite there.

01:16:53.095 --> 01:16:56.054
<v Speaker 1>I see a container creating there on

01:16:56.375 --> 01:16:57.175
<v Speaker 0>Yeah.

01:16:58.455 --> 01:17:00.215
<v Speaker 0>Let's see if we're missing anything here.

01:17:01.050 --> 01:17:03.290
<v Speaker 0>No. Right. Okay. So everything on the Ceph

01:17:03.290 --> 01:17:04.409
<v Speaker 0>side is running.

01:17:05.849 --> 01:17:08.169
<v Speaker 0>I'm gonna try and speed up

01:17:11.369 --> 01:17:11.690
<v Speaker 1>this.

01:17:24.545 --> 01:17:26.065
<v Speaker 1>Well, it looks like it's been

01:17:26.785 --> 01:17:30.190
<v Speaker 1>creating for forty seven minutes now, so I

01:17:30.190 --> 01:17:31.949
<v Speaker 1>only wanna delete that one.

01:17:33.630 --> 01:17:36.749
<v Speaker 0>Yeah. So it it's not getting the volume.

01:17:40.030 --> 01:17:42.270
<v Speaker 0>PVC is those seem okay. Yeah. We can

01:17:42.270 --> 01:17:44.110
<v Speaker 0>probably just encourage that along.

01:17:57.445 --> 01:17:58.085
<v Speaker 0>Terminating.

01:18:11.570 --> 01:18:13.330
<v Speaker 1>So we might wanna do a describe on

01:18:13.330 --> 01:18:15.125
<v Speaker 1>that MySQL pod to see if we have

01:18:15.125 --> 01:18:15.925
<v Speaker 1>any new

01:18:16.405 --> 01:18:17.285
<v Speaker 1>information.

01:18:22.485 --> 01:18:25.125
<v Speaker 0>The volume is previously attached.

01:18:25.125 --> 01:18:27.045
<v Speaker 0>Was that just the terminating one now?

01:18:27.780 --> 01:18:28.500
<v Speaker 1>Yes.

01:18:28.660 --> 01:18:31.060
<v Speaker 0>Okay. So let's delete pod

01:18:32.260 --> 01:18:33.300
<v Speaker 0>force

01:18:33.860 --> 01:18:34.820
<v Speaker 0>grace period.

01:18:48.775 --> 01:18:50.055
<v Speaker 0>Should be quicker than that.

01:19:00.520 --> 01:19:02.280
<v Speaker 1>That is a good point. Is there an

01:19:03.400 --> 01:19:06.039
<v Speaker 1>are we supposed to have an NGINX

01:19:06.920 --> 01:19:07.800
<v Speaker 1>No. Out here?

01:19:13.005 --> 01:19:14.925
<v Speaker 0>Yeah. Let's just Wait a minute.

01:19:15.405 --> 01:19:16.925
<v Speaker 1>What was that one that you were just

01:19:16.925 --> 01:19:17.724
<v Speaker 1>describing?

01:19:19.244 --> 01:19:21.965
<v Speaker 0>That was nginx? The busy box one? I'm

01:19:21.965 --> 01:19:22.844
<v Speaker 0>just gonna delete it.

01:19:25.970 --> 01:19:27.010
<v Speaker 0>Get pods.

01:19:28.450 --> 01:19:30.130
<v Speaker 0>I don't know why we're in a multi

01:19:30.130 --> 01:19:31.570
<v Speaker 0>detach thing here.

01:19:31.970 --> 01:19:34.130
<v Speaker 0>I'm gonna try one more time to hurry

01:19:34.130 --> 01:19:34.770
<v Speaker 0>up.

01:19:36.530 --> 01:19:37.570
<v Speaker 0>Maybe we should Is

01:19:38.370 --> 01:19:39.650
<v Speaker 1>that still giving the same error?

01:19:40.265 --> 01:19:41.785
<v Speaker 0>Yeah. It was still saying it was attached

01:19:41.785 --> 01:19:44.425
<v Speaker 0>to another pod, which isn't scheduled anymore.

01:19:46.505 --> 01:19:48.985
<v Speaker 0>But I wonder if that's just collateral damage.

01:19:52.985 --> 01:19:53.625
<v Speaker 0>There we go.

01:20:07.935 --> 01:20:08.735
<v Speaker 0>Alright.

01:20:09.055 --> 01:20:10.335
<v Speaker 0>What's going on here?

01:20:17.855 --> 01:20:19.375
<v Speaker 0>I think this is just

01:20:20.015 --> 01:20:22.175
<v Speaker 0>a weird situation. Need to wait for things

01:20:22.175 --> 01:20:23.295
<v Speaker 1>to

01:20:26.660 --> 01:20:28.420
<v Speaker 0>I think we've fixed this cluster.

01:20:29.540 --> 01:20:31.699
<v Speaker 0>Will we move on to 10? You happy?

01:20:32.580 --> 01:20:33.059
<v Speaker 1>I

01:20:34.020 --> 01:20:36.820
<v Speaker 1>think I'd like to see that WordPress pod

01:20:36.165 --> 01:20:38.805
<v Speaker 1>still up yet, because I'm not entirely sure

01:20:38.805 --> 01:20:40.085
<v Speaker 1>there isn't another

01:20:41.925 --> 01:20:44.324
<v Speaker 1>another curveball that he's thrown at us here.

01:20:44.645 --> 01:20:45.925
<v Speaker 0>You just don't want me to have my

01:20:45.925 --> 01:20:46.885
<v Speaker 0>beer. That's Riz.

01:20:49.010 --> 01:20:52.130
<v Speaker 0>Alright. So the problem is, this week, a

01:20:52.130 --> 01:20:53.970
<v Speaker 0>standard is attached to another pod.

01:20:54.050 --> 01:20:55.810
<v Speaker 0>Thomas says he has no idea, so I

01:20:55.810 --> 01:20:57.410
<v Speaker 0>I don't think this is intended.

01:20:58.050 --> 01:21:00.050
<v Speaker 0>But it's still as a

01:21:00.210 --> 01:21:02.770
<v Speaker 0>problem. So it seems to think it's attached

01:21:02.770 --> 01:21:03.730
<v Speaker 0>to another pod.

01:21:07.304 --> 01:21:08.905
<v Speaker 0>So it can't be attached to another.

01:21:19.520 --> 01:21:21.440
<v Speaker 0>It's definitely not attached.

01:21:23.920 --> 01:21:24.719
<v Speaker 0>Alright.

01:21:28.240 --> 01:21:30.560
<v Speaker 0>No. The MySQL container is running.

01:21:31.425 --> 01:21:34.304
<v Speaker 0>The PVC on the WordPress one

01:21:34.705 --> 01:21:36.465
<v Speaker 0>isn't particularly important.

01:21:37.585 --> 01:21:38.945
<v Speaker 0>I could delete it.

01:21:39.985 --> 01:21:40.385
<v Speaker 0>Yeah.

01:21:44.880 --> 01:21:47.680
<v Speaker 0>Oh, wrong one. K a get PVC.

01:21:48.160 --> 01:21:48.960
<v Speaker 0>Delete

01:21:49.040 --> 01:21:49.920
<v Speaker 0>PVC.

01:21:53.040 --> 01:21:55.200
<v Speaker 0>That's the MySQL. Delete the WordPress one.

01:21:57.825 --> 01:21:59.105
<v Speaker 0>And then if we

01:22:00.385 --> 01:22:02.945
<v Speaker 0>encourage the pod to request a new one,

01:22:11.010 --> 01:22:11.810
<v Speaker 0>Hopefully,

01:22:11.810 --> 01:22:12.769
<v Speaker 0>that pending

01:22:14.449 --> 01:22:15.010
<v Speaker 0>changes.

01:22:39.610 --> 01:22:41.210
<v Speaker 0>Okay. So now

01:22:42.410 --> 01:22:43.050
<v Speaker 1>Oh,

01:22:43.850 --> 01:22:45.530
<v Speaker 1>we deleted the claim.

01:22:46.090 --> 01:22:48.570
<v Speaker 1>So now there's no claim for it to

01:22:51.610 --> 01:22:52.410
<v Speaker 0>to use.

01:22:55.465 --> 01:22:58.025
<v Speaker 1>Yes. Yes. We are teaching bad

01:22:58.025 --> 01:22:59.785
<v Speaker 1>practices at this point.

01:23:01.145 --> 01:23:02.265
<v Speaker 0>Well, no. The WordPress

01:23:02.665 --> 01:23:05.145
<v Speaker 0>WordPress doesn't actually need a persistent volume. It's

01:23:05.145 --> 01:23:05.865
<v Speaker 0>only for cache.

01:23:06.490 --> 01:23:08.730
<v Speaker 0>As I I I do not encourage anyone

01:23:08.730 --> 01:23:10.409
<v Speaker 0>to ever delete any real So

01:23:12.170 --> 01:23:13.210
<v Speaker 1>yes and no.

01:23:14.730 --> 01:23:16.810
<v Speaker 1>If if it was an actual running

01:23:17.050 --> 01:23:19.930
<v Speaker 1>WordPress instance, it would have deleted any of

01:23:19.930 --> 01:23:20.090
<v Speaker 1>the

01:23:21.985 --> 01:23:24.625
<v Speaker 1>file system assets that you upload.

01:23:24.865 --> 01:23:27.025
<v Speaker 1>If you upload any media content, that doesn't

01:23:27.025 --> 01:23:28.785
<v Speaker 1>go into the database. It goes onto the

01:23:28.785 --> 01:23:29.665
<v Speaker 1>file system.

01:23:29.825 --> 01:23:30.225
<v Speaker 0>Oops.

01:23:33.630 --> 01:23:35.550
<v Speaker 1>That that's one of the reasons why I

01:23:35.550 --> 01:23:37.789
<v Speaker 1>generally dislike the idea of

01:23:39.630 --> 01:23:42.030
<v Speaker 1>WordPress as, like, an example app for systems

01:23:42.030 --> 01:23:42.670
<v Speaker 1>like

01:23:42.830 --> 01:23:43.710
<v Speaker 1>Kubernetes

01:23:43.710 --> 01:23:47.630
<v Speaker 1>because it's really difficult to actually scale WordPress

01:23:46.875 --> 01:23:49.275
<v Speaker 1>horizontally for that reason. You need to end

01:23:49.275 --> 01:23:49.994
<v Speaker 1>up having

01:23:50.315 --> 01:23:52.475
<v Speaker 1>shared storage that can be mounted on multiple

01:23:52.475 --> 01:23:53.915
<v Speaker 1>places to be able to

01:23:54.475 --> 01:23:56.474
<v Speaker 1>actually access that content.

01:23:58.955 --> 01:24:00.475
<v Speaker 0>Thomas had no idea that we would help

01:24:00.475 --> 01:24:01.995
<v Speaker 0>him make the cluster even more broken.

01:24:02.850 --> 01:24:04.210
<v Speaker 1>You

01:24:04.210 --> 01:24:05.810
<v Speaker 1>underestimate me, Thomas.

01:24:09.010 --> 01:24:09.810
<v Speaker 1>Alright.

01:24:10.850 --> 01:24:13.410
<v Speaker 1>So at this point, we we likely

01:24:13.410 --> 01:24:16.770
<v Speaker 1>need to recreate a PVC claim for the

01:24:16.770 --> 01:24:17.650
<v Speaker 1>WordPress app.

01:24:23.305 --> 01:24:23.945
<v Speaker 0>Okay.

01:24:25.705 --> 01:24:28.025
<v Speaker 1>But I don't know exactly what that looked

01:24:28.025 --> 01:24:28.665
<v Speaker 1>like.

01:24:31.225 --> 01:24:32.505
<v Speaker 0>I have it on a disk.

01:24:36.360 --> 01:24:37.240
<v Speaker 0>Export.

01:24:39.160 --> 01:24:41.080
<v Speaker 0>Our PVC should be

01:24:42.200 --> 01:24:43.320
<v Speaker 0>workload.

01:24:46.200 --> 01:24:47.640
<v Speaker 0>Let's just pop this open.

01:24:57.895 --> 01:25:00.055
<v Speaker 0>There. Yeah. So let's just apply that over

01:25:00.055 --> 01:25:00.535
<v Speaker 0>the top.

01:25:06.380 --> 01:25:07.899
<v Speaker 0>Jump back over here.

01:25:08.699 --> 01:25:09.980
<v Speaker 0>We have our PVCs.

01:25:14.655 --> 01:25:16.655
<v Speaker 0>I guess I maybe need to

01:25:17.695 --> 01:25:20.335
<v Speaker 0>either be patient. Yeah. I was gonna say,

01:25:20.335 --> 01:25:22.014
<v Speaker 0>just delete the pod, but I'll be patient.

01:25:31.119 --> 01:25:32.880
<v Speaker 0>Yeah. It's just pulling the image now. Okay.

01:25:32.880 --> 01:25:34.320
<v Speaker 0>That looks much better. Alright.

01:25:35.040 --> 01:25:37.040
<v Speaker 0>So I never actually deleted any data. I

01:25:37.040 --> 01:25:38.639
<v Speaker 0>only did the claim.

01:25:39.520 --> 01:25:40.079
<v Speaker 0>The

01:25:41.199 --> 01:25:42.320
<v Speaker 0>preview is still there.

01:25:46.575 --> 01:25:48.574
<v Speaker 0>So that that worked. It's running.

01:25:49.775 --> 01:25:50.655
<v Speaker 0>You happy?

01:25:53.695 --> 01:25:54.415
<v Speaker 1>I

01:25:54.655 --> 01:25:55.695
<v Speaker 1>think so.

01:25:55.855 --> 01:25:58.735
<v Speaker 1>I I don't know that

01:25:58.460 --> 01:26:01.020
<v Speaker 1>I've seen anything else to indicate anything else

01:26:01.020 --> 01:26:02.940
<v Speaker 1>has been wrong at this point. And we

01:26:02.940 --> 01:26:05.340
<v Speaker 1>do have some encouragement to jump over to

01:26:06.139 --> 01:26:07.179
<v Speaker 1>Cluster 10.

01:26:08.060 --> 01:26:10.219
<v Speaker 0>Alright. Let's see. Okay.

01:26:10.300 --> 01:26:12.460
<v Speaker 0>Thank you, Thomas. That was painful.

01:26:16.265 --> 01:26:17.065
<v Speaker 0>Okay.

01:26:17.385 --> 01:26:18.905
<v Speaker 0>9 go away.

01:26:20.105 --> 01:26:21.625
<v Speaker 0>9 go away.

01:26:22.265 --> 01:26:24.185
<v Speaker 0>I don't even know if that's 10 anymore.

01:26:24.185 --> 01:26:24.825
<v Speaker 0>Let's

01:26:25.785 --> 01:26:26.585
<v Speaker 0>pop this open.

01:26:28.900 --> 01:26:30.420
<v Speaker 1>And I'm going to go ahead and try

01:26:30.420 --> 01:26:32.340
<v Speaker 1>to get logged back into teleport.

01:26:38.740 --> 01:26:39.940
<v Speaker 0>Come on, teleport.

01:26:41.060 --> 01:26:41.860
<v Speaker 0>Timed out.

01:26:43.344 --> 01:26:44.465
<v Speaker 0>Bad ass.

01:26:54.385 --> 01:26:54.945
<v Speaker 0>What?

01:27:02.820 --> 01:27:03.780
<v Speaker 0>That's not good.

01:27:10.515 --> 01:27:12.515
<v Speaker 0>Pull up the IP address for Cluster 10

01:27:12.515 --> 01:27:14.515
<v Speaker 0>in case something has gone wrong.

01:27:15.395 --> 01:27:17.555
<v Speaker 0>Was logged to this seeing a similar thing.

01:27:17.555 --> 01:27:19.235
<v Speaker 0>Yeah. I was logged on to this earlier.

01:27:26.969 --> 01:27:28.729
<v Speaker 0>Oh, it should be s.

01:27:30.809 --> 01:27:32.090
<v Speaker 0>That's for ten.

01:27:36.730 --> 01:27:39.130
<v Speaker 0>Alright. Let's see if we've got SSH access.

01:27:45.025 --> 01:27:47.665
<v Speaker 0>And I will restart.

01:27:49.825 --> 01:27:50.385
<v Speaker 0>Teleport.

01:27:55.800 --> 01:27:56.760
<v Speaker 0>There we go.

01:27:58.120 --> 01:27:59.400
<v Speaker 0>Alright.

01:27:59.400 --> 01:28:00.520
<v Speaker 0>Okay.

01:28:02.840 --> 01:28:05.640
<v Speaker 0>So we have our cluster. I believe I

01:28:05.640 --> 01:28:06.440
<v Speaker 0>already checked.

01:28:06.945 --> 01:28:09.184
<v Speaker 0>Someone ran a watch. I should know that.

01:28:11.264 --> 01:28:12.624
<v Speaker 0>Kubect config,

01:28:12.864 --> 01:28:14.624
<v Speaker 0>etcetera. Kubernetes

01:28:14.864 --> 01:28:15.505
<v Speaker 0>admin

01:28:15.744 --> 01:28:18.065
<v Speaker 0>Conf get node. Okay. So we don't have

01:28:18.065 --> 01:28:21.025
<v Speaker 0>a working API server. Are you on the

01:28:21.025 --> 01:28:23.410
<v Speaker 0>session? Just let me confirm. Yes. I joined

01:28:23.410 --> 01:28:24.210
<v Speaker 1>the session.

01:28:24.530 --> 01:28:25.090
<v Speaker 1>Okay.

01:28:26.050 --> 01:28:27.730
<v Speaker 1>So we can go ahead and look to

01:28:27.730 --> 01:28:30.370
<v Speaker 1>see if we have the API server

01:28:30.530 --> 01:28:32.930
<v Speaker 1>and probably etcd as well running at this

01:28:32.930 --> 01:28:35.090
<v Speaker 1>point since we can't actually connect to the

01:28:35.090 --> 01:28:35.810
<v Speaker 1>API server.

01:28:38.765 --> 01:28:40.045
<v Speaker 0>Okay. Etcd

01:28:41.085 --> 01:28:43.405
<v Speaker 0>looks good. API server

01:28:44.205 --> 01:28:46.205
<v Speaker 0>well, I mean, it's running. Doesn't mean that

01:28:46.205 --> 01:28:47.245
<v Speaker 0>it's good.

01:28:49.165 --> 01:28:49.645
<v Speaker 0>Okay.

01:28:51.020 --> 01:28:53.660
<v Speaker 0>I see a node restriction plugin right away

01:28:53.660 --> 01:28:55.260
<v Speaker 0>on the API server here.

01:28:57.980 --> 01:29:00.140
<v Speaker 0>What does what does that admission plugin do?

01:29:00.140 --> 01:29:00.540
<v Speaker 0>Do you know?

01:29:04.935 --> 01:29:07.175
<v Speaker 1>I don't know off the top of my

01:29:07.175 --> 01:29:08.935
<v Speaker 1>head, but we can look it up.

01:29:11.175 --> 01:29:13.255
<v Speaker 0>There's no restrictions that is dangerous.

01:29:23.760 --> 01:29:26.000
<v Speaker 0>Okay. So this admission controller limits the node

01:29:26.000 --> 01:29:28.320
<v Speaker 0>and pod objects that Kubelet can modify.

01:29:30.960 --> 01:29:32.560
<v Speaker 1>Okay. So that's not a big deal.

01:29:35.555 --> 01:29:38.915
<v Speaker 0>Alright. So let's go check out our manifest

01:29:38.915 --> 01:29:39.795
<v Speaker 0>directory.

01:29:40.675 --> 01:29:43.075
<v Speaker 0>We're assuming something has changed on our API

01:29:43.075 --> 01:29:43.875
<v Speaker 0>server.

01:29:45.635 --> 01:29:46.515
<v Speaker 0>It's running,

01:29:47.690 --> 01:29:49.130
<v Speaker 0>but when we do

01:29:49.850 --> 01:29:51.929
<v Speaker 0>We should just export it keep config and

01:29:51.929 --> 01:29:52.489
<v Speaker 0>stuff

01:29:52.969 --> 01:29:54.730
<v Speaker 0>before I start typing things I don't wanna

01:29:54.730 --> 01:29:55.369
<v Speaker 0>type.

01:29:56.090 --> 01:29:58.250
<v Speaker 1>I think we might be on separate sessions

01:29:58.250 --> 01:30:00.824
<v Speaker 1>at this point. What? Oh, no. I'm on

01:30:00.824 --> 01:30:02.104
<v Speaker 0>my actual sorry.

01:30:02.344 --> 01:30:03.304
<v Speaker 0>Okay.

01:30:07.385 --> 01:30:09.545
<v Speaker 0>I thought my terminal felt a little familiar

01:30:09.545 --> 01:30:09.945
<v Speaker 0>there.

01:30:13.190 --> 01:30:16.150
<v Speaker 0>Okay. So let's export config.

01:30:16.630 --> 01:30:20.070
<v Speaker 0>And if we run alias k qptl.

01:30:23.510 --> 01:30:25.350
<v Speaker 0>So it's trying to speak to the IP

01:30:25.350 --> 01:30:27.030
<v Speaker 0>address, which I'll assume for the time being

01:30:27.030 --> 01:30:29.445
<v Speaker 0>is this machine on 6443.

01:30:29.605 --> 01:30:31.845
<v Speaker 0>API server does appear to be running. So

01:30:31.845 --> 01:30:33.445
<v Speaker 0>if we check the manifest and make sure

01:30:33.445 --> 01:30:35.285
<v Speaker 0>the port hasn't been touched, I guess is

01:30:35.285 --> 01:30:36.805
<v Speaker 0>the first thing, and then

01:30:37.365 --> 01:30:38.485
<v Speaker 0>look at other things.

01:30:39.045 --> 01:30:40.405
<v Speaker 1>The other thing we can do is we

01:30:40.405 --> 01:30:42.645
<v Speaker 1>probably can do a netstat and see what

01:30:42.645 --> 01:30:45.550
<v Speaker 1>we're actually listening on too. Alright. Feel free

01:30:45.550 --> 01:30:46.989
<v Speaker 0>to tapey tapey.

01:30:51.390 --> 01:30:53.070
<v Speaker 1>It doesn't like me trying to get

01:30:56.350 --> 01:30:56.830
<v Speaker 1>alright.

01:31:01.105 --> 01:31:03.265
<v Speaker 1>Now I see the Kubelet, and I'm just

01:31:03.265 --> 01:31:04.704
<v Speaker 1>scrolling through here.

01:31:05.344 --> 01:31:06.864
<v Speaker 1>I see etcd.

01:31:10.145 --> 01:31:12.145
<v Speaker 1>I do not see

01:31:12.540 --> 01:31:14.060
<v Speaker 1>the API server.

01:31:15.020 --> 01:31:15.739
<v Speaker 1>So

01:31:20.140 --> 01:31:21.660
<v Speaker 0>Yep. But I don't see the API server

01:31:21.660 --> 01:31:22.300
<v Speaker 0>either.

01:31:23.180 --> 01:31:25.260
<v Speaker 1>So that one that makes me wonder if

01:31:25.260 --> 01:31:27.500
<v Speaker 1>we're not act if the manifest's been modified

01:31:27.500 --> 01:31:29.395
<v Speaker 1>so that it's not actually running with host

01:31:29.395 --> 01:31:30.195
<v Speaker 1>networking.

01:31:32.115 --> 01:31:33.715
<v Speaker 0>Okay. So should we pop up in the

01:31:33.715 --> 01:31:34.435
<v Speaker 0>manifest?

01:31:34.835 --> 01:31:35.235
<v Speaker 1>Yeah.

01:31:43.120 --> 01:31:44.800
<v Speaker 0>Did we just get Rickrolled?

01:31:44.960 --> 01:31:46.719
<v Speaker 0>I think we did. I think we did.

01:31:47.120 --> 01:31:49.120
<v Speaker 1>If I remember correctly from the last time

01:31:49.120 --> 01:31:50.480
<v Speaker 1>we were on this cluster,

01:31:51.600 --> 01:31:53.920
<v Speaker 1>there was a another file there

01:31:54.800 --> 01:31:56.160
<v Speaker 1>appended with a tilde.

01:31:58.245 --> 01:32:00.245
<v Speaker 1>But it's not the actual API server. It's

01:32:00.245 --> 01:32:01.845
<v Speaker 0>not the API server. I wonder if one

01:32:01.845 --> 01:32:03.125
<v Speaker 0>of the tildes is

01:32:03.525 --> 01:32:05.205
<v Speaker 0>the other one, but

01:32:06.245 --> 01:32:08.645
<v Speaker 0>no. That's actually a cube controller manager.

01:32:09.045 --> 01:32:10.965
<v Speaker 1>What's that etcd one look like?

01:32:18.190 --> 01:32:18.989
<v Speaker 0>Uh-oh.

01:32:22.750 --> 01:32:24.349
<v Speaker 1>Oh, I think that's just empty.

01:32:26.005 --> 01:32:28.244
<v Speaker 0>But I it's not popped up in Vim.

01:32:30.485 --> 01:32:32.405
<v Speaker 0>Or is it just my size that's frozen?

01:32:33.284 --> 01:32:34.724
<v Speaker 1>No. It's

01:32:39.120 --> 01:32:40.479
<v Speaker 0>Guess I'm reloading.

01:32:44.080 --> 01:32:46.959
<v Speaker 0>Oh, no. That session's no That that's gone.

01:32:50.480 --> 01:32:52.000
<v Speaker 0>Nice. And that fail.

01:32:56.735 --> 01:32:58.895
<v Speaker 0>Oh, it killed teleport.

01:32:59.695 --> 01:33:00.415
<v Speaker 0>Oh, god.

01:33:03.615 --> 01:33:05.215
<v Speaker 0>I don't have this session either.

01:33:07.250 --> 01:33:09.410
<v Speaker 0>So my normal SSH and my teleporter are

01:33:09.410 --> 01:33:10.290
<v Speaker 0>now both dead.

01:33:12.450 --> 01:33:15.730
<v Speaker 0>Oh, is it coming? I think teleports back

01:33:15.730 --> 01:33:16.530
<v Speaker 1>at least.

01:33:17.810 --> 01:33:22.690
<v Speaker 0>Yeah. Okay. So my SSH is there to

01:33:21.724 --> 01:33:23.324
<v Speaker 0>teleport that. Okay. So

01:33:32.684 --> 01:33:35.324
<v Speaker 0>etcetera Kubernetes manifest is a symlink.

01:33:40.620 --> 01:33:42.139
<v Speaker 0>They never got any.

01:33:45.260 --> 01:33:46.219
<v Speaker 0>And then

01:33:46.780 --> 01:33:47.500
<v Speaker 0>these

01:33:48.540 --> 01:33:49.660
<v Speaker 0>well, it's crashed again.

01:33:50.625 --> 01:33:52.785
<v Speaker 0>There's 44 files in this directory and did

01:33:52.785 --> 01:33:53.985
<v Speaker 0>an LSE.

01:34:01.905 --> 01:34:03.425
<v Speaker 0>Gonna be one of those days, Jason.

01:34:07.539 --> 01:34:08.340
<v Speaker 1>Alright.

01:34:10.420 --> 01:34:13.539
<v Speaker 1>So we know the ETCD manifest isn't happy

01:34:13.539 --> 01:34:13.940
<v Speaker 1>either.

01:34:16.335 --> 01:34:17.375
<v Speaker 0>And it's only

01:34:17.775 --> 01:34:19.055
<v Speaker 0>38 bytes.

01:34:26.975 --> 01:34:27.855
<v Speaker 0>Okay.

01:34:27.855 --> 01:34:29.295
<v Speaker 0>I don't know where to reload it.

01:34:31.080 --> 01:34:33.159
<v Speaker 0>Okay. So whatever we are doing is

01:34:33.880 --> 01:34:34.599
<v Speaker 0>pausing.

01:34:35.960 --> 01:34:37.960
<v Speaker 0>So that SSH session has come back. I'm

01:34:37.960 --> 01:34:40.199
<v Speaker 0>assuming teleporter is gonna be right behind it.

01:34:40.440 --> 01:34:41.560
<v Speaker 0>It's really peculiar.

01:34:51.704 --> 01:34:53.304
<v Speaker 0>I don't know where just to be patient

01:34:53.304 --> 01:34:56.025
<v Speaker 0>with it or prod or no. My SSH

01:34:56.025 --> 01:34:56.905
<v Speaker 0>session is

01:34:58.665 --> 01:34:59.145
<v Speaker 0>going to.

01:35:03.590 --> 01:35:04.630
<v Speaker 1>That

01:35:04.630 --> 01:35:06.150
<v Speaker 1>is a good point to see if it

01:35:06.150 --> 01:35:06.710
<v Speaker 1>is

01:35:07.030 --> 01:35:07.909
<v Speaker 1>overlaid.

01:35:12.230 --> 01:35:14.390
<v Speaker 0>This is what happens when you get security

01:35:14.390 --> 01:35:17.590
<v Speaker 0>people

01:35:16.395 --> 01:35:17.994
<v Speaker 0>to mess with your cluster.

01:35:19.355 --> 01:35:22.474
<v Speaker 0>Oh, and there's there's Ivan, a control plane.

01:35:23.275 --> 01:35:24.875
<v Speaker 0>I don't know what you call yourselves. Control

01:35:24.875 --> 01:35:25.275
<v Speaker 0>planer.

01:35:27.930 --> 01:35:30.730
<v Speaker 1>Okay. So I think teleport's back at least.

01:35:30.890 --> 01:35:34.010
<v Speaker 0>Is it? Let me oh, that session's gone.

01:35:34.010 --> 01:35:35.770
<v Speaker 0>Okay. Let's start. Are you in a different

01:35:35.770 --> 01:35:36.410
<v Speaker 0>session?

01:35:36.650 --> 01:35:38.890
<v Speaker 1>I did not start a session. Alright. Okay.

01:35:40.415 --> 01:35:42.014
<v Speaker 0>Okay. We have a new session.

01:35:42.895 --> 01:35:44.015
<v Speaker 0>Let's

01:35:44.015 --> 01:35:46.175
<v Speaker 0>be a bit more care I'm speaking to

01:35:46.175 --> 01:35:48.335
<v Speaker 0>myself there, not to you. Let's be a

01:35:48.335 --> 01:35:51.055
<v Speaker 0>bit more careful and not trust anything that

01:35:51.055 --> 01:35:53.135
<v Speaker 0>control plane have done to this cluster. Screw

01:35:53.135 --> 01:35:54.255
<v Speaker 0>you this. Alright.

01:35:57.410 --> 01:35:58.050
<v Speaker 0>So

01:35:58.690 --> 01:36:01.410
<v Speaker 0>I I didn't like that this was

01:36:04.130 --> 01:36:05.810
<v Speaker 0>a assembling and

01:36:05.810 --> 01:36:08.450
<v Speaker 0>was it no that suggested just removing assembling.

01:36:08.450 --> 01:36:08.610
<v Speaker 0>Correct?

01:36:09.425 --> 01:36:10.145
<v Speaker 0>Yes.

01:36:11.745 --> 01:36:13.345
<v Speaker 0>Oh, it froze on me again.

01:36:19.905 --> 01:36:21.825
<v Speaker 0>You get two people to break a cluster

01:36:21.825 --> 01:36:23.730
<v Speaker 0>and they both managed to break it so

01:36:23.730 --> 01:36:25.810
<v Speaker 0>much that we can't even debug it. I

01:36:25.810 --> 01:36:26.050
<v Speaker 0>mean

01:36:29.490 --> 01:36:31.650
<v Speaker 0>You know what? I'm cracking open this beer.

01:36:31.650 --> 01:36:32.290
<v Speaker 0>I've had enough.

01:36:38.645 --> 01:36:39.365
<v Speaker 0>Right.

01:36:39.925 --> 01:36:40.965
<v Speaker 0>Take six.

01:36:42.325 --> 01:36:43.925
<v Speaker 0>SSH still dead.

01:36:47.925 --> 01:36:49.205
<v Speaker 0>I'll try a new session.

01:36:50.800 --> 01:36:53.280
<v Speaker 1>I think teleport's hung up right now again.

01:37:07.455 --> 01:37:09.935
<v Speaker 0>Alright. We're back. Does that mean the session's

01:37:09.935 --> 01:37:11.055
<v Speaker 0>alive again?

01:37:11.935 --> 01:37:14.495
<v Speaker 0>Yes. Okay. Yeah. Alright. So I'm assuming we've

01:37:14.495 --> 01:37:15.855
<v Speaker 0>got a very fitting amount of time to

01:37:15.855 --> 01:37:17.935
<v Speaker 0>do something. So What you wanna do? We

01:37:17.935 --> 01:37:20.199
<v Speaker 1>do anything more, I I wanna just see

01:37:20.199 --> 01:37:22.280
<v Speaker 1>what's mounted on the system right now.

01:37:22.840 --> 01:37:24.920
<v Speaker 0>Good call. I'll drink my beer. You you

01:37:24.920 --> 01:37:25.959
<v Speaker 0>do what you have to do.

01:37:28.520 --> 01:37:28.840
<v Speaker 0>So

01:37:29.719 --> 01:37:32.040
<v Speaker 0>Thomas, we do have serial access if needed.

01:37:32.040 --> 01:37:32.360
<v Speaker 0>Yes.

01:37:34.165 --> 01:37:36.485
<v Speaker 0>It just means going through my standard SSH

01:37:36.485 --> 01:37:38.405
<v Speaker 0>tools instead of teleport, which I try to

01:37:38.405 --> 01:37:39.045
<v Speaker 0>avoid.

01:37:39.844 --> 01:37:41.204
<v Speaker 0>Session are you typing on?

01:37:42.885 --> 01:37:44.965
<v Speaker 1>I thought it was the same one and

01:37:44.965 --> 01:37:47.605
<v Speaker 1>I just typed mount to see what's going

01:37:47.605 --> 01:37:48.804
<v Speaker 1>on now on the system.

01:37:49.470 --> 01:37:52.110
<v Speaker 1>And I see quite a bit of rick

01:37:52.110 --> 01:37:53.310
<v Speaker 1>rolling happening.

01:37:56.190 --> 01:37:58.830
<v Speaker 0>Yes. We got a a lot of it's

01:37:58.830 --> 01:38:00.270
<v Speaker 0>just like a recursive

01:38:00.270 --> 01:38:02.830
<v Speaker 0>some link thing going on here. Over the

01:38:02.830 --> 01:38:03.550
<v Speaker 0>file system.

01:38:05.605 --> 01:38:07.124
<v Speaker 1>Quite interesting.

01:38:15.045 --> 01:38:15.364
<v Speaker 1>So

01:38:19.080 --> 01:38:20.680
<v Speaker 1>we can go ahead and just try to

01:38:20.680 --> 01:38:23.560
<v Speaker 1>start unmounting these. I'm not entirely sure that

01:38:23.560 --> 01:38:25.160
<v Speaker 1>they won't come back, though.

01:38:29.160 --> 01:38:30.440
<v Speaker 1>Well, maybe because

01:38:32.565 --> 01:38:35.125
<v Speaker 0>Alright. So what if we be frozen again.

01:38:36.645 --> 01:38:38.804
<v Speaker 0>Oh, we are frozen again. Oh,

01:38:41.925 --> 01:38:42.485
<v Speaker 0>come on.

01:38:55.030 --> 01:38:57.430
<v Speaker 0>How's your taping, Jason? This actually reminds me

01:38:57.430 --> 01:38:58.150
<v Speaker 1>of

01:38:58.310 --> 01:39:00.150
<v Speaker 1>an issue that I've seen in production.

01:39:00.745 --> 01:39:01.545
<v Speaker 1>Not

01:39:02.185 --> 01:39:03.385
<v Speaker 1>quite identical,

01:39:03.385 --> 01:39:03.864
<v Speaker 1>but

01:39:04.985 --> 01:39:06.505
<v Speaker 1>I I once had to deal with an

01:39:06.505 --> 01:39:07.385
<v Speaker 1>issue where

01:39:08.344 --> 01:39:10.745
<v Speaker 1>we would get traffic in at the same

01:39:10.745 --> 01:39:12.105
<v Speaker 1>time every day

01:39:12.505 --> 01:39:14.390
<v Speaker 1>once a week, and

01:39:15.830 --> 01:39:17.590
<v Speaker 1>we only had the window

01:39:18.550 --> 01:39:20.790
<v Speaker 1>a small window to actually inspect what was

01:39:20.790 --> 01:39:21.510
<v Speaker 1>happening.

01:39:22.230 --> 01:39:24.870
<v Speaker 1>Because once we hit the threshold of the

01:39:24.870 --> 01:39:25.190
<v Speaker 1>event,

01:39:26.145 --> 01:39:28.065
<v Speaker 1>it would lock up our entire network. We'd

01:39:28.065 --> 01:39:29.344
<v Speaker 1>have to restart

01:39:29.665 --> 01:39:30.864
<v Speaker 1>our main routers,

01:39:31.105 --> 01:39:31.824
<v Speaker 1>and then

01:39:32.545 --> 01:39:34.625
<v Speaker 1>we didn't have any more traffic until the

01:39:34.625 --> 01:39:35.344
<v Speaker 1>next week.

01:39:35.985 --> 01:39:37.264
<v Speaker 1>So it took us a couple of months

01:39:37.264 --> 01:39:39.105
<v Speaker 1>to figure out exactly what was going on

01:39:39.105 --> 01:39:42.230
<v Speaker 1>because we only had that, like, fifteen minute

01:39:42.230 --> 01:39:43.030
<v Speaker 1>window

01:39:43.510 --> 01:39:45.750
<v Speaker 1>one day a week to actually troubleshoot it.

01:39:45.750 --> 01:39:46.950
<v Speaker 1>And, like,

01:39:47.990 --> 01:39:49.910
<v Speaker 1>the limited time that we actually have on

01:39:49.910 --> 01:39:52.230
<v Speaker 1>here is reminding me quite a bit of

01:39:52.230 --> 01:39:52.550
<v Speaker 1>that.

01:40:02.675 --> 01:40:04.515
<v Speaker 0>Take that control plan.

01:40:04.755 --> 01:40:05.635
<v Speaker 0>And

01:40:07.795 --> 01:40:08.995
<v Speaker 0>I wonder if he'll come back.

01:40:17.160 --> 01:40:18.920
<v Speaker 0>I hope they've kept the scripts that set

01:40:18.920 --> 01:40:20.120
<v Speaker 0>this up. I need to be I need

01:40:20.120 --> 01:40:21.160
<v Speaker 0>to see what they did here.

01:40:23.255 --> 01:40:25.414
<v Speaker 0>Because Lewis sent me a message saying,

01:40:26.135 --> 01:40:27.894
<v Speaker 0>didn't really have a lot of time,

01:40:28.054 --> 01:40:29.335
<v Speaker 0>so you might be able to fix it

01:40:29.335 --> 01:40:31.735
<v Speaker 0>really, really quickly, but good luck. I

01:40:34.775 --> 01:40:37.175
<v Speaker 0>don't know if that was a joke or

01:40:37.175 --> 01:40:38.135
<v Speaker 0>or not anymore.

01:40:39.330 --> 01:40:40.929
<v Speaker 0>Hopefully, that's unmount.

01:40:41.889 --> 01:40:43.489
<v Speaker 0>I really hope it's working.

01:40:46.690 --> 01:40:48.369
<v Speaker 0>I don't even know. How many were there?

01:40:48.369 --> 01:40:49.729
<v Speaker 0>Hundreds? Thousands?

01:40:50.290 --> 01:40:52.770
<v Speaker 1>I I don't think there were hundreds. Alright.

01:40:52.770 --> 01:40:52.929
<v Speaker 0>Okay.

01:40:54.555 --> 01:40:55.594
<v Speaker 0>Millions.

01:41:01.114 --> 01:41:01.914
<v Speaker 1>And

01:41:01.915 --> 01:41:02.954
<v Speaker 1>teleporters.

01:41:03.915 --> 01:41:06.315
<v Speaker 0>Yeah. Don't think I again. I don't think

01:41:06.909 --> 01:41:09.630
<v Speaker 0>unmounted everything because I grabbed through never, so

01:41:09.630 --> 01:41:12.190
<v Speaker 0>it should have been quite targeted. However, they're

01:41:12.190 --> 01:41:15.789
<v Speaker 0>all busy, so this unmount has failed disastrously.

01:41:18.349 --> 01:41:20.429
<v Speaker 0>Worth a shot, though. What you got, Jason?

01:41:20.429 --> 01:41:20.909
<v Speaker 0>You're up.

01:41:22.045 --> 01:41:23.644
<v Speaker 1>So we can go ahead and

01:41:24.284 --> 01:41:25.565
<v Speaker 1>try to see if we can get in

01:41:25.565 --> 01:41:28.045
<v Speaker 1>an LSOF here to see what actually is

01:41:28.764 --> 01:41:29.324
<v Speaker 1>well,

01:41:30.284 --> 01:41:32.525
<v Speaker 1>we know that the static manifests are in

01:41:32.525 --> 01:41:32.684
<v Speaker 1>there.

01:41:36.429 --> 01:41:36.989
<v Speaker 0>So

01:41:38.670 --> 01:41:40.110
<v Speaker 0>So knows that there were no RX to

01:41:40.110 --> 01:41:40.670
<v Speaker 0>human

01:41:41.150 --> 01:41:43.309
<v Speaker 0>there were pass through XRX.

01:41:43.789 --> 01:41:45.389
<v Speaker 0>We should have been okay.

01:41:45.869 --> 01:41:48.030
<v Speaker 1>So with the static manifest in there, I'm

01:41:48.030 --> 01:41:48.669
<v Speaker 1>wondering

01:41:48.989 --> 01:41:50.590
<v Speaker 1>if we might need to actually

01:41:52.925 --> 01:41:55.405
<v Speaker 1>stop the cubelet before we can actually unmount

01:41:55.405 --> 01:41:56.044
<v Speaker 1>these.

01:41:56.525 --> 01:41:59.485
<v Speaker 0>Okay. So you wanna do a stop cubelet?

01:42:04.460 --> 01:42:06.619
<v Speaker 1>Yep. And let's go ahead and give that

01:42:10.780 --> 01:42:11.660
<v Speaker 1>another try.

01:42:23.705 --> 01:42:25.864
<v Speaker 1>We could also try passing it

01:42:28.824 --> 01:42:30.264
<v Speaker 1>the force flag as well.

01:42:34.770 --> 01:42:36.449
<v Speaker 0>Well, I can still type, so the system

01:42:36.449 --> 01:42:38.050
<v Speaker 0>hasn't locked up on us

01:42:38.449 --> 01:42:40.449
<v Speaker 0>again yet. But if you wanna control c

01:42:40.449 --> 01:42:42.449
<v Speaker 0>and try something, please feel free.

01:42:43.410 --> 01:42:45.330
<v Speaker 1>No. I think we should let it

01:42:46.545 --> 01:42:47.344
<v Speaker 1>go out.

01:43:04.360 --> 01:43:05.560
<v Speaker 1>Though I am

01:43:05.720 --> 01:43:08.520
<v Speaker 1>thinking about opening up a second terminal.

01:43:10.280 --> 01:43:13.080
<v Speaker 1>Looks like it's still busy, though. Yeah. Okay.

01:43:13.080 --> 01:43:13.960
<v Speaker 0>That didn't work.

01:43:24.605 --> 01:43:25.885
<v Speaker 1>We're hung again.

01:43:27.085 --> 01:43:28.285
<v Speaker 0>No. That's okay.

01:43:28.685 --> 01:43:29.565
<v Speaker 0>Yep. Are

01:43:29.885 --> 01:43:31.680
<v Speaker 1>we? Okay. Oh.

01:43:36.160 --> 01:43:36.960
<v Speaker 0>That

01:43:36.960 --> 01:43:38.480
<v Speaker 0>was most unfortunate

01:43:38.480 --> 01:43:40.320
<v Speaker 0>double type in the enter of return.

01:44:01.750 --> 01:44:04.150
<v Speaker 0>Interesting question from Carlos. I thought the task

01:44:04.150 --> 01:44:06.469
<v Speaker 0>was to break Kubernetes, not the operating system.

01:44:06.870 --> 01:44:09.510
<v Speaker 0>Well, in theory, practice, they have broken Kubernetes

01:44:09.510 --> 01:44:11.030
<v Speaker 0>through the operating system.

01:44:13.745 --> 01:44:16.305
<v Speaker 0>Well, this may not be a production outage

01:44:16.305 --> 01:44:18.385
<v Speaker 0>that you may necessarily face. Your clusters are

01:44:18.385 --> 01:44:20.945
<v Speaker 0>still susceptible to wild geese. So

01:44:23.745 --> 01:44:24.865
<v Speaker 0>It's

01:44:24.865 --> 01:44:25.185
<v Speaker 0>funny.

01:44:26.880 --> 01:44:28.639
<v Speaker 0>I'd be laughing more if I wasn't crying

01:44:28.639 --> 01:44:29.599
<v Speaker 0>on the inside.

01:44:33.120 --> 01:44:35.040
<v Speaker 0>Yeah. We're we're kinda struggling

01:44:35.040 --> 01:44:35.920
<v Speaker 0>with this one here.

01:44:41.125 --> 01:44:41.925
<v Speaker 1>So

01:44:44.085 --> 01:44:45.684
<v Speaker 1>on the other

01:44:46.965 --> 01:44:49.925
<v Speaker 1>session that I opened up, the LSOF

01:44:49.925 --> 01:44:51.445
<v Speaker 1>did start returning.

01:44:55.320 --> 01:44:58.680
<v Speaker 1>And I see there's at least a sleep

01:44:58.680 --> 01:45:00.920
<v Speaker 1>going on. I see a process

01:45:01.720 --> 01:45:03.800
<v Speaker 1>that looks to be rick rolling us as

01:45:03.800 --> 01:45:07.175
<v Speaker 1>well. Should we start killing some wild processes?

01:45:07.175 --> 01:45:09.655
<v Speaker 0>I have another session here as well. So

01:45:09.655 --> 01:45:11.414
<v Speaker 0>we just start seeing what we're looking.

01:45:13.014 --> 01:45:13.655
<v Speaker 0>Oh.

01:45:14.454 --> 01:45:16.934
<v Speaker 1>I I think we're gonna see a process

01:45:17.175 --> 01:45:19.414
<v Speaker 1>that is Rick rolling us as well.

01:45:20.760 --> 01:45:22.440
<v Speaker 0>Oh, my sessions are

01:45:23.160 --> 01:45:25.480
<v Speaker 0>or Alice or Wes finished as well.

01:45:26.360 --> 01:45:26.840
<v Speaker 0>Alright.

01:45:38.724 --> 01:45:39.604
<v Speaker 1>So

01:45:39.605 --> 01:45:41.685
<v Speaker 1>we do have the shell script here that

01:45:41.685 --> 01:45:42.564
<v Speaker 1>is running.

01:45:46.645 --> 01:45:48.005
<v Speaker 0>So I reckon we killed that.

01:45:50.449 --> 01:45:51.170
<v Speaker 0>Yep.

01:45:51.410 --> 01:45:53.250
<v Speaker 0>Are you okay with a Kelminus name, or

01:45:53.250 --> 01:45:54.210
<v Speaker 0>do you want me to?

01:45:54.610 --> 01:45:57.170
<v Speaker 1>I'd I'd think we can safely kill this

01:45:57.170 --> 01:45:57.969
<v Speaker 1>process

01:45:58.690 --> 01:45:59.889
<v Speaker 1>ungracefully.

01:46:01.410 --> 01:46:02.610
<v Speaker 0>Let's see if it comes back.

01:46:04.114 --> 01:46:05.155
<v Speaker 1>Not immediately.

01:46:10.515 --> 01:46:12.035
<v Speaker 0>Okay. Do we wanna take a look at

01:46:12.035 --> 01:46:12.995
<v Speaker 0>it and see what they've done?

01:46:18.290 --> 01:46:21.090
<v Speaker 0>Or just think that's a I'm

01:46:21.090 --> 01:46:22.770
<v Speaker 1>gonna go ahead and try to rerun that

01:46:22.770 --> 01:46:25.090
<v Speaker 1>LSOF in the other terminal.

01:46:25.650 --> 01:46:28.290
<v Speaker 1>While over here, we can potentially just try

01:46:28.290 --> 01:46:29.810
<v Speaker 1>the unmount again, but.

01:46:33.225 --> 01:46:35.305
<v Speaker 0>Yeah. Okay. Let's try the unmount again.

01:46:41.945 --> 01:46:43.305
<v Speaker 0>Nope. Still busy.

01:46:43.545 --> 01:46:46.390
<v Speaker 1>Still busy. But that returned quicker this time,

01:46:46.390 --> 01:46:47.190
<v Speaker 1>so that's something.

01:46:48.390 --> 01:46:51.270
<v Speaker 0>Okay. So we got some sleep processes running.

01:46:53.190 --> 01:46:54.790
<v Speaker 0>Never has not come back, though.

01:46:59.935 --> 01:47:03.215
<v Speaker 1>So the sleep processes could potentially just be

01:47:03.295 --> 01:47:04.975
<v Speaker 1>POS containers as well.

01:47:06.495 --> 01:47:06.975
<v Speaker 1>Yep.

01:47:15.090 --> 01:47:16.450
<v Speaker 0>And it's hard to tell how many of

01:47:16.450 --> 01:47:19.170
<v Speaker 0>those random best sessions are actually just us.

01:47:23.075 --> 01:47:24.995
<v Speaker 0>I think this looks

01:47:25.395 --> 01:47:27.074
<v Speaker 0>more sensible now.

01:47:30.115 --> 01:47:31.155
<v Speaker 0>But

01:47:32.755 --> 01:47:34.595
<v Speaker 0>we do still have the big crazy weird

01:47:34.595 --> 01:47:35.395
<v Speaker 0>mount thing.

01:47:41.130 --> 01:47:43.050
<v Speaker 1>And it looks like that process has come

01:47:43.050 --> 01:47:43.690
<v Speaker 1>back.

01:47:48.490 --> 01:47:49.130
<v Speaker 0>I've never

01:47:50.250 --> 01:47:51.130
<v Speaker 0>oh, I don't see it.

01:47:52.415 --> 01:47:53.614
<v Speaker 1>No. Oh,

01:47:53.935 --> 01:47:55.295
<v Speaker 1>okay. Never mind.

01:47:57.535 --> 01:47:58.655
<v Speaker 1>But we do

01:48:00.735 --> 01:48:02.175
<v Speaker 1>we do have

01:48:03.055 --> 01:48:04.494
<v Speaker 1>some shell somewhere

01:48:04.495 --> 01:48:06.895
<v Speaker 1>sitting out that is

01:48:08.060 --> 01:48:09.020
<v Speaker 1>in that

01:48:09.340 --> 01:48:10.860
<v Speaker 1>dot never directory.

01:48:14.620 --> 01:48:16.780
<v Speaker 0>Okay. So what do you wanna try?

01:48:19.020 --> 01:48:19.740
<v Speaker 0>So

01:48:20.995 --> 01:48:23.555
<v Speaker 0>I've got ten minutes before my next call.

01:48:23.555 --> 01:48:24.994
<v Speaker 0>Let's see if we can get this done.

01:48:27.075 --> 01:48:27.795
<v Speaker 1>So

01:48:30.594 --> 01:48:32.675
<v Speaker 1>there's a total of

01:48:34.750 --> 01:48:36.670
<v Speaker 1>four shell sessions open.

01:48:36.989 --> 01:48:38.670
<v Speaker 1>I'm assuming that's our

01:48:39.949 --> 01:48:40.989
<v Speaker 0>IPs.

01:48:42.429 --> 01:48:44.030
<v Speaker 1>I would expect so.

01:48:46.095 --> 01:48:48.335
<v Speaker 0>I think I'm the 8082.

01:48:51.455 --> 01:48:53.535
<v Speaker 1>So I think we can probably kill the

01:48:53.535 --> 01:48:54.735
<v Speaker 1>early ones here.

01:49:00.710 --> 01:49:03.350
<v Speaker 1>So 1824.

01:49:08.390 --> 01:49:09.270
<v Speaker 1>I can get it.

01:49:17.775 --> 01:49:20.655
<v Speaker 1>Having all sorts of problems with My teleport

01:49:20.655 --> 01:49:21.775
<v Speaker 0>gets a little bit Oh.

01:49:24.495 --> 01:49:24.895
<v Speaker 0>Did I?

01:49:26.520 --> 01:49:28.760
<v Speaker 0>Start a new session. I think I got

01:49:28.760 --> 01:49:30.119
<v Speaker 0>a little confused there.

01:49:32.679 --> 01:49:34.439
<v Speaker 0>Okay. So I think we need to

01:49:35.000 --> 01:49:36.280
<v Speaker 0>unmount

01:49:37.000 --> 01:49:37.719
<v Speaker 0>that stuff.

01:49:53.505 --> 01:49:55.080
<v Speaker 0>Okay. So we still don't have any APIs

01:49:55.080 --> 01:49:57.000
<v Speaker 0>ever. So let's let's try and get this

01:49:57.000 --> 01:49:57.800
<v Speaker 0>worked out.

01:49:59.800 --> 01:50:00.520
<v Speaker 1>So

01:50:01.800 --> 01:50:03.240
<v Speaker 1>those shells are still there.

01:50:11.175 --> 01:50:12.375
<v Speaker 0>Okay. Let's kill them.

01:50:19.640 --> 01:50:22.040
<v Speaker 0>Alright. Those are gone. We're now just got

01:50:22.040 --> 01:50:23.080
<v Speaker 0>this one shell,

01:50:23.480 --> 01:50:25.160
<v Speaker 0>which I think you might be on or

01:50:25.160 --> 01:50:26.440
<v Speaker 0>maybe not. I'm not sure.

01:50:30.200 --> 01:50:31.400
<v Speaker 0>Let's

01:50:32.865 --> 01:50:34.065
<v Speaker 0>Why don't we just try

01:50:40.225 --> 01:50:41.665
<v Speaker 1>So I think we're gonna have to remove

01:50:41.665 --> 01:50:42.784
<v Speaker 1>that SIM link.

01:50:42.945 --> 01:50:44.705
<v Speaker 1>Potentially, I have to remove that SIM link

01:50:44.705 --> 01:50:45.025
<v Speaker 1>too.

01:50:50.159 --> 01:50:51.760
<v Speaker 1>But we should still be able to unmount

01:50:51.760 --> 01:50:53.119
<v Speaker 1>it and it just be a broken SIM

01:50:53.119 --> 01:50:55.360
<v Speaker 1>link. It's

01:50:56.400 --> 01:50:57.360
<v Speaker 0>stalled on me again.

01:51:02.074 --> 01:51:03.275
<v Speaker 1>Still seem to be going.

01:51:15.710 --> 01:51:17.469
<v Speaker 0>Okay. So now we don't have a manifest

01:51:17.469 --> 01:51:18.349
<v Speaker 0>directory.

01:51:20.510 --> 01:51:21.389
<v Speaker 1>Alright.

01:51:21.630 --> 01:51:23.630
<v Speaker 1>We probably still need to unmount those.

01:51:41.040 --> 01:51:42.719
<v Speaker 0>So Kubernetes isn't

01:51:43.520 --> 01:51:46.080
<v Speaker 0>isn't assembling or amount or anything.

01:51:49.600 --> 01:51:51.600
<v Speaker 0>So how do we configure the static manifest

01:51:51.600 --> 01:51:53.679
<v Speaker 0>directory? Could that be put in somewhere else?

01:51:53.840 --> 01:51:55.280
<v Speaker 0>We take a look at the kubelet comp.

01:51:58.365 --> 01:52:00.445
<v Speaker 1>We can, but at this point, the kubelet

01:52:00.445 --> 01:52:02.925
<v Speaker 1>should still be stopped right now.

01:52:04.845 --> 01:52:07.405
<v Speaker 0>But we did have an API server and

01:52:07.405 --> 01:52:09.085
<v Speaker 0>a oh, yeah. We stopped the. Okay.

01:52:10.960 --> 01:52:12.800
<v Speaker 0>So we don't have anything right now. Okay.

01:52:12.800 --> 01:52:13.599
<v Speaker 0>Oh, no.

01:52:14.400 --> 01:52:16.719
<v Speaker 1>Well, we'll still have any containers that we're

01:52:16.719 --> 01:52:17.999
<v Speaker 1>running prior to

01:52:18.239 --> 01:52:19.679
<v Speaker 1>stopping the kubelet.

01:52:20.639 --> 01:52:21.360
<v Speaker 0>Okay.

01:52:23.760 --> 01:52:26.239
<v Speaker 0>Okay. That doesn't configure the thing.

01:52:28.534 --> 01:52:31.094
<v Speaker 0>What did I do there? Kubelet dot conf.

01:52:33.574 --> 01:52:35.175
<v Speaker 0>I thought that kubelet dot conf had the

01:52:35.175 --> 01:52:37.175
<v Speaker 0>static manifest path and stuff in it. Am

01:52:37.175 --> 01:52:37.815
<v Speaker 0>I wrong?

01:52:38.295 --> 01:52:41.100
<v Speaker 1>No. So there's there that cubelet dot conf

01:52:41.100 --> 01:52:41.980
<v Speaker 1>is the

01:52:45.179 --> 01:52:46.620
<v Speaker 1>the client configuration

01:52:46.620 --> 01:52:47.820
<v Speaker 1>for the cubelet.

01:52:47.900 --> 01:52:49.739
<v Speaker 1>There's varlib.

01:52:51.020 --> 01:52:52.780
<v Speaker 1>Somewhere in varlib is the actual

01:52:54.475 --> 01:52:56.155
<v Speaker 1>bootstrap config for

01:52:56.795 --> 01:52:58.235
<v Speaker 1>the cubelet and

01:52:59.595 --> 01:53:01.195
<v Speaker 1>the actual configuration.

01:53:02.715 --> 01:53:04.795
<v Speaker 0>Okay. So the static pod path as Kubernetes

01:53:04.795 --> 01:53:05.355
<v Speaker 0>manifest.

01:53:05.980 --> 01:53:07.420
<v Speaker 1>Yeah. So I think we're gonna end up

01:53:07.420 --> 01:53:09.019
<v Speaker 1>having to recreate those.

01:53:11.099 --> 01:53:13.179
<v Speaker 1>At this point, we can probably just copy

01:53:13.179 --> 01:53:14.219
<v Speaker 1>them over from

01:53:16.219 --> 01:53:18.940
<v Speaker 1>yes. We could potentially use kubeadm to bring

01:53:18.940 --> 01:53:20.380
<v Speaker 1>back the control plane manifest,

01:53:21.065 --> 01:53:23.864
<v Speaker 1>or we can just copy them over from

01:53:24.665 --> 01:53:26.264
<v Speaker 1>Cluster 09 too.

01:53:28.665 --> 01:53:30.425
<v Speaker 0>Okay. Do you know what the kubeadm command

01:53:30.425 --> 01:53:31.065
<v Speaker 0>would be?

01:53:33.304 --> 01:53:35.784
<v Speaker 1>It's going to be one of the phases.

01:53:40.960 --> 01:53:43.119
<v Speaker 1>So it'll be cube a d m

01:53:43.920 --> 01:53:46.000
<v Speaker 1>in it, and then there should be phases.

01:53:57.685 --> 01:53:59.765
<v Speaker 0>Rawk phase. Rawk phase.

01:54:02.725 --> 01:54:05.205
<v Speaker 0>And then

01:54:09.510 --> 01:54:10.390
<v Speaker 1>the

01:54:11.270 --> 01:54:12.710
<v Speaker 1>control plane one.

01:54:13.110 --> 01:54:14.870
<v Speaker 1>Well, we'll probably have to do etcd and

01:54:14.870 --> 01:54:15.670
<v Speaker 1>control plane.

01:54:25.935 --> 01:54:28.574
<v Speaker 0>And it says, etcd, generate a static pod

01:54:28.574 --> 01:54:30.655
<v Speaker 0>manifest for a local etcd.

01:54:34.735 --> 01:54:35.375
<v Speaker 0>Local.

01:54:37.420 --> 01:54:38.219
<v Speaker 0>Yeah?

01:54:38.300 --> 01:54:39.019
<v Speaker 0>Local?

01:54:39.820 --> 01:54:40.619
<v Speaker 1>Yep.

01:54:42.780 --> 01:54:44.539
<v Speaker 0>And then control plan.

01:54:48.619 --> 01:54:49.179
<v Speaker 0>All

01:54:52.225 --> 01:54:54.305
<v Speaker 0>and then will we start the kubelet?

01:54:56.545 --> 01:54:58.865
<v Speaker 1>Do we still have those directories mounted?

01:55:04.850 --> 01:55:07.250
<v Speaker 1>I'm thinking so by how long that took.

01:55:07.410 --> 01:55:08.130
<v Speaker 0>Yes.

01:55:14.690 --> 01:55:16.850
<v Speaker 1>I think we probably wanna try another unmount

01:55:16.850 --> 01:55:17.410
<v Speaker 1>on those.

01:55:21.065 --> 01:55:21.865
<v Speaker 0>Okay.

01:55:23.145 --> 01:55:25.145
<v Speaker 0>Let's

01:55:25.145 --> 01:55:26.745
<v Speaker 0>try one of them and see what happens.

01:55:26.745 --> 01:55:28.025
<v Speaker 0>So let's try

01:55:29.545 --> 01:55:30.985
<v Speaker 0>if we can get that to work first.

01:55:32.350 --> 01:55:34.270
<v Speaker 0>Yeah. Okay. So that looks better.

01:55:34.910 --> 01:55:36.990
<v Speaker 0>I've lost my history. Okay. So

01:55:38.350 --> 01:55:39.150
<v Speaker 0>mount,

01:55:40.350 --> 01:55:41.230
<v Speaker 0>awk,

01:55:42.510 --> 01:55:42.990
<v Speaker 0>never

01:55:45.465 --> 01:55:47.145
<v Speaker 0>print three.

01:55:51.065 --> 01:55:52.265
<v Speaker 0>XRX.

01:55:52.345 --> 01:55:53.545
<v Speaker 0>That look okay?

01:55:54.745 --> 01:55:55.625
<v Speaker 1>Yep.

01:55:55.625 --> 01:55:58.640
<v Speaker 1>And there was a suggestion to use a

01:55:58.640 --> 01:55:59.920
<v Speaker 1>lazy on mount.

01:56:01.120 --> 01:56:02.880
<v Speaker 0>Do know the flag? I don't wanna delete

01:56:02.880 --> 01:56:03.440
<v Speaker 0>my

01:56:04.640 --> 01:56:05.760
<v Speaker 0>my text.

01:56:06.720 --> 01:56:08.800
<v Speaker 1>I wanna say it was yeah. Dash l.

01:56:13.175 --> 01:56:13.815
<v Speaker 0>Okay.

01:56:15.655 --> 01:56:17.335
<v Speaker 0>Looks better. Okay.

01:56:21.255 --> 01:56:23.415
<v Speaker 0>Okay. So we've now started the Kubelet. We

01:56:23.415 --> 01:56:25.255
<v Speaker 0>generated

01:56:26.580 --> 01:56:29.139
<v Speaker 0>static manifests with QBDM

01:56:30.020 --> 01:56:31.699
<v Speaker 0>and all of it. I always say that

01:56:31.699 --> 01:56:33.860
<v Speaker 0>QBDM is cheating for the purposes of this,

01:56:33.860 --> 01:56:35.219
<v Speaker 0>but I think that we debugged the problem

01:56:35.219 --> 01:56:36.580
<v Speaker 0>and we were just skipping out of the

01:56:36.580 --> 01:56:38.675
<v Speaker 0>really boring bit of pasting in YAML. So

01:56:38.675 --> 01:56:40.514
<v Speaker 0>I'm okay with it in this instance.

01:56:40.755 --> 01:56:42.675
<v Speaker 0>If we run a PSEUX,

01:56:44.435 --> 01:56:46.355
<v Speaker 0>do we have a kubelet? We at least

01:56:46.355 --> 01:56:47.554
<v Speaker 0>got a kubelet,

01:56:50.515 --> 01:56:52.995
<v Speaker 0>but not much else yet. So maybe

01:56:55.570 --> 01:56:57.170
<v Speaker 0>give that I mean, look at the kubelet

01:56:57.170 --> 01:56:59.730
<v Speaker 1>log, see if there's anything standing out there.

01:57:04.370 --> 01:57:05.170
<v Speaker 0>That's here.

01:57:09.054 --> 01:57:09.695
<v Speaker 0>No

01:57:10.014 --> 01:57:10.814
<v Speaker 0>pager.

01:57:15.375 --> 01:57:18.094
<v Speaker 0>That looks a lot healthier. No. Connection refused.

01:57:20.430 --> 01:57:23.230
<v Speaker 1>And I expect that if the API server

01:57:23.230 --> 01:57:24.830
<v Speaker 1>is not necessarily

01:57:24.830 --> 01:57:25.550
<v Speaker 1>up.

01:57:26.350 --> 01:57:27.790
<v Speaker 0>Oh, yeah. I think it's coming. There we

01:57:27.790 --> 01:57:28.349
<v Speaker 0>go.

01:57:31.070 --> 01:57:32.590
<v Speaker 0>Guess we could just follow it.

01:57:40.545 --> 01:57:41.264
<v Speaker 1>So

01:57:43.185 --> 01:57:45.105
<v Speaker 1>let's go ahead and see

01:57:46.780 --> 01:57:48.940
<v Speaker 1>see if we have etcd running, see if

01:57:48.940 --> 01:57:50.940
<v Speaker 1>we have the API server running.

01:57:53.100 --> 01:57:56.540
<v Speaker 0>API server looks good. Etcd, I've seen earlier.

01:57:56.540 --> 01:57:57.580
<v Speaker 0>I think that's alright.

01:57:59.385 --> 01:57:59.705
<v Speaker 0>Does

01:58:01.145 --> 01:58:03.065
<v Speaker 1>I wonder if the API server is responding

01:58:03.065 --> 01:58:04.105
<v Speaker 1>at this point.

01:58:06.985 --> 01:58:07.945
<v Speaker 0>It is.

01:58:09.065 --> 01:58:10.344
<v Speaker 0>Pods are running.

01:58:12.265 --> 01:58:12.985
<v Speaker 0>It's fixed.

01:58:14.300 --> 01:58:15.260
<v Speaker 0>Ish.

01:58:15.900 --> 01:58:18.860
<v Speaker 0>Ish. I mean, Rawkode and Seth, I wouldn't

01:58:18.860 --> 01:58:20.060
<v Speaker 0>expect to be

01:58:20.540 --> 01:58:21.900
<v Speaker 0>up so quickly.

01:58:23.180 --> 01:58:24.700
<v Speaker 0>But I think we fixed it.

01:58:27.500 --> 01:58:28.620
<v Speaker 1>How does our

01:58:29.034 --> 01:58:31.114
<v Speaker 1>WordPress deployment look?

01:58:31.835 --> 01:58:32.954
<v Speaker 0>Happy and healthy.

01:58:33.514 --> 01:58:34.394
<v Speaker 1>Alright.

01:58:34.394 --> 01:58:36.554
<v Speaker 1>And just double check cube system as well

01:58:36.554 --> 01:58:37.514
<v Speaker 1>just to

01:58:38.235 --> 01:58:39.195
<v Speaker 1>be sure.

01:58:40.715 --> 01:58:42.394
<v Speaker 0>Running, running, running, running, running.

01:58:44.620 --> 01:58:46.540
<v Speaker 0>I mean, I think Rick and Seth will

01:58:46.540 --> 01:58:47.820
<v Speaker 0>just need the moment. But

01:58:49.100 --> 01:58:50.780
<v Speaker 0>based on, you know, Lewis telling me they

01:58:50.780 --> 01:58:52.780
<v Speaker 0>didn't have a lot of time, I think

01:58:52.780 --> 01:58:53.420
<v Speaker 0>their

01:58:53.980 --> 01:58:55.260
<v Speaker 0>hack was the

01:58:56.335 --> 01:58:58.255
<v Speaker 0>Mountie overlay craziness

01:58:58.815 --> 01:59:00.974
<v Speaker 0>and that script running in the background doing

01:59:00.974 --> 01:59:02.655
<v Speaker 0>whatever the hell that was doing that we

01:59:02.655 --> 01:59:04.334
<v Speaker 0>killed, we got the unmount.

01:59:05.054 --> 01:59:06.334
<v Speaker 0>I think we did it.

01:59:07.775 --> 01:59:09.215
<v Speaker 1>That was that

01:59:09.215 --> 01:59:10.895
<v Speaker 1>was quite interesting for sure.

01:59:12.540 --> 01:59:13.580
<v Speaker 0>That

01:59:13.580 --> 01:59:16.940
<v Speaker 0>that was two really tough clusters. Thank you,

01:59:16.940 --> 01:59:19.179
<v Speaker 0>Lewis and Control Plane. Thank you, Thomas.

01:59:19.420 --> 01:59:21.420
<v Speaker 0>You definitely put us through our paces there.

01:59:21.420 --> 01:59:22.780
<v Speaker 0>Not only did we have to try and

01:59:22.780 --> 01:59:23.340
<v Speaker 0>fix

01:59:23.660 --> 01:59:26.220
<v Speaker 0>Kubernetes in a multitude of ways, but we

01:59:26.525 --> 01:59:28.844
<v Speaker 0>even struggled to keep our debugging tools running

01:59:28.844 --> 01:59:29.885
<v Speaker 0>at one point.

01:59:32.445 --> 01:59:33.005
<v Speaker 0>Well,

01:59:33.804 --> 01:59:36.284
<v Speaker 0>that was a tough one. Thanks, Jason, for

01:59:36.284 --> 01:59:38.525
<v Speaker 0>joining me and guiding us through that. You

01:59:38.525 --> 01:59:40.445
<v Speaker 0>kept very calm all the way through, which

01:59:40.445 --> 01:59:41.165
<v Speaker 0>is

01:59:41.940 --> 01:59:43.700
<v Speaker 0>not easy, at least not for me.

01:59:44.580 --> 01:59:47.620
<v Speaker 0>No. It's definitely not. There were definitely some

01:59:47.700 --> 01:59:50.340
<v Speaker 1>interesting curve balls that were thrown our way

01:59:50.980 --> 01:59:52.820
<v Speaker 1>to try to debug. So

01:59:53.380 --> 01:59:54.180
<v Speaker 0>Oh, yeah. Definitely.

01:59:56.585 --> 01:59:58.425
<v Speaker 1>It was a fun adventure, though. Thank you

01:59:58.425 --> 01:59:59.385
<v Speaker 1>for having me.

01:59:59.785 --> 02:00:02.105
<v Speaker 0>Alright. Well, thank you to our breakers. Thank

02:00:02.105 --> 02:00:03.865
<v Speaker 0>you, Jason, for joining me on Team Fix.

02:00:03.865 --> 02:00:05.465
<v Speaker 0>Remember, you can open an issue on the

02:00:05.465 --> 02:00:07.305
<v Speaker 0>GitHub page if you wanna join and do

02:00:07.305 --> 02:00:09.065
<v Speaker 0>one of these sessions. Thank you all for

02:00:09.065 --> 02:00:10.265
<v Speaker 0>watching, and I'll speak to you all again

02:00:10.265 --> 02:00:11.220
<v Speaker 0>soon. Thank you.
