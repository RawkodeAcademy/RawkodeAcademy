WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: 4c4afbbb-2bad-4116-b5bc-942d9099d72d
Created: 2025-04-29T19:58:27.890Z
Duration: 5715.099
Channels: 1

00:00:38.230 --> 00:00:39.110
<v Speaker 0>Hello,

00:00:39.110 --> 00:00:41.695
<v Speaker 0>and welcome to this episode of Rawkode live.

00:00:41.695 --> 00:00:43.855
<v Speaker 0>I am your host, Rawkode.

00:00:44.095 --> 00:00:46.495
<v Speaker 0>Today, we're doing something a little different. We're

00:00:46.495 --> 00:00:49.855
<v Speaker 0>gonna do some live debugging of production

00:00:49.855 --> 00:00:53.055
<v Speaker 0>ish Kubernetes clusters that have been broken

00:00:53.180 --> 00:00:55.580
<v Speaker 0>by some Kubernetes community members.

00:00:56.300 --> 00:00:58.300
<v Speaker 0>Now I'm not gonna do this alone. I

00:00:58.300 --> 00:01:01.260
<v Speaker 0>am joined by Waleed Shari, a very active

00:01:01.260 --> 00:01:04.860
<v Speaker 0>Kubernetes community member regarding all around awesome dude.

00:01:04.860 --> 00:01:05.900
<v Speaker 0>Hey, how is it going?

00:01:06.645 --> 00:01:08.885
<v Speaker 1>Thank you. Hi David, how are you? I'm

00:01:08.885 --> 00:01:10.645
<v Speaker 0>very well, thank you. I'm very excited for

00:01:10.645 --> 00:01:12.885
<v Speaker 0>today's, I'm gonna call it a mission. I

00:01:12.885 --> 00:01:14.965
<v Speaker 0>think this is gonna be a very interesting

00:01:14.965 --> 00:01:17.925
<v Speaker 0>episode and I hope we can you know

00:01:17.925 --> 00:01:19.605
<v Speaker 0>through the process of what we're gonna do

00:01:19.605 --> 00:01:19.925
<v Speaker 0>today,

00:01:20.450 --> 00:01:22.049
<v Speaker 0>share some of our knowledge and the way

00:01:22.049 --> 00:01:24.369
<v Speaker 0>that we work with everybody and everyone will

00:01:24.369 --> 00:01:26.289
<v Speaker 0>be a little bit more familiar with Kubernetes.

00:01:26.850 --> 00:01:29.490
<v Speaker 1>I'm hopeful I'm hoping to do so also.

00:01:29.729 --> 00:01:31.810
<v Speaker 1>Mean, it's I don't know what what I

00:01:31.810 --> 00:01:33.329
<v Speaker 1>have put myself into, but yes.

00:01:35.865 --> 00:01:39.225
<v Speaker 0>Yeah, I mean, I've definitely got some concerns.

00:01:39.465 --> 00:01:40.585
<v Speaker 0>Let's

00:01:40.585 --> 00:01:42.585
<v Speaker 0>set the scene right, we've got two Kubernetes

00:01:42.585 --> 00:01:43.384
<v Speaker 0>clusters.

00:01:43.704 --> 00:01:46.505
<v Speaker 0>They're both deployed with the cluster API project

00:01:46.505 --> 00:01:49.305
<v Speaker 0>on Equinix metal. They're highly available control planes

00:01:49.305 --> 00:01:51.790
<v Speaker 0>with the worker nodes each. I've thrown on

00:01:51.790 --> 00:01:55.070
<v Speaker 0>some sample workloads onto them, a WordPress blog

00:01:55.070 --> 00:01:56.590
<v Speaker 0>and MySQL database

00:01:56.830 --> 00:01:58.509
<v Speaker 0>and I'm just was

00:01:58.830 --> 00:02:00.590
<v Speaker 0>silly enough to say hey who wants to

00:02:00.590 --> 00:02:02.030
<v Speaker 0>keep configs for this and this happened to

00:02:02.030 --> 00:02:03.790
<v Speaker 0>break them for them and we had two

00:02:03.790 --> 00:02:04.270
<v Speaker 0>people

00:02:05.085 --> 00:02:06.685
<v Speaker 0>offer, well we had more than two people,

00:02:06.685 --> 00:02:08.044
<v Speaker 0>but we're gonna do two today, so the

00:02:08.044 --> 00:02:10.605
<v Speaker 0>first two clusters were broken courtesy of Dan

00:02:10.605 --> 00:02:12.525
<v Speaker 0>Fennerin, who is also a colleague of mine

00:02:12.525 --> 00:02:15.725
<v Speaker 0>at Ecnic Metal and Lee Briggs, a developer

00:02:15.725 --> 00:02:17.565
<v Speaker 0>and developer advocate for Pulumi.

00:02:18.590 --> 00:02:19.230
<v Speaker 0>Now

00:02:19.549 --> 00:02:21.070
<v Speaker 0>I don't really know anything,

00:02:21.230 --> 00:02:22.670
<v Speaker 0>which is I think what has us both

00:02:22.670 --> 00:02:24.350
<v Speaker 0>slightly worried. We don't know

00:02:25.150 --> 00:02:27.150
<v Speaker 0>if the API server is gonna respond, we

00:02:27.150 --> 00:02:28.510
<v Speaker 0>don't know if the mess with the workloads,

00:02:28.510 --> 00:02:29.549
<v Speaker 0>we don't know if the mess we've had,

00:02:29.549 --> 00:02:31.455
<v Speaker 0>we don't know anything. Let's just We don't

00:02:31.455 --> 00:02:33.135
<v Speaker 0>know anything about these customers.

00:02:33.615 --> 00:02:34.015
<v Speaker 0>So

00:02:35.055 --> 00:02:36.415
<v Speaker 0>I guess what we need to do is

00:02:36.415 --> 00:02:38.175
<v Speaker 0>just get our screen shared

00:02:39.055 --> 00:02:42.015
<v Speaker 0>and then run some basic health checks and

00:02:42.015 --> 00:02:42.895
<v Speaker 0>and see

00:02:43.295 --> 00:02:44.255
<v Speaker 0>what happens.

00:02:44.895 --> 00:02:47.959
<v Speaker 1>Yes. So we need to, like, day one

00:02:47.959 --> 00:02:50.520
<v Speaker 1>on the job, discover what the clusters are,

00:02:51.000 --> 00:02:52.920
<v Speaker 1>what's working, what's not working,

00:02:53.720 --> 00:02:55.319
<v Speaker 1>get to know the clusters,

00:02:55.319 --> 00:02:56.920
<v Speaker 1>and see if there is any

00:02:57.480 --> 00:03:00.495
<v Speaker 1>apparent errors. Just assess the situation first.

00:03:01.055 --> 00:03:03.055
<v Speaker 1>And then I'm going to use my

00:03:03.055 --> 00:03:03.775
<v Speaker 1>favorite

00:03:04.895 --> 00:03:07.535
<v Speaker 1>strategy from a bridge documentary,

00:03:08.175 --> 00:03:09.775
<v Speaker 1>a bridge IT documentary.

00:03:09.775 --> 00:03:11.135
<v Speaker 1>It's called the IT Crowd.

00:03:12.030 --> 00:03:12.750
<v Speaker 1>So

00:03:14.830 --> 00:03:17.470
<v Speaker 1>they have a principle. Their first principle is

00:03:17.470 --> 00:03:19.310
<v Speaker 1>turn it off and turn it on again.

00:03:19.310 --> 00:03:20.830
<v Speaker 1>Did you turn it off? So

00:03:22.830 --> 00:03:24.989
<v Speaker 1>that's the principle that I usually do in

00:03:24.989 --> 00:03:25.790
<v Speaker 1>troubleshooting.

00:03:26.270 --> 00:03:28.065
<v Speaker 0>Well, we'll certainly give it a shot.

00:03:28.545 --> 00:03:30.305
<v Speaker 0>And just to I don't know if it

00:03:30.305 --> 00:03:32.144
<v Speaker 0>makes matters worse or better, but we have

00:03:32.144 --> 00:03:34.705
<v Speaker 0>a comment from Dan, who's watching along with

00:03:34.705 --> 00:03:35.905
<v Speaker 0>us today. So,

00:03:36.385 --> 00:03:37.985
<v Speaker 0>yeah, if we need Yes, please. If we

00:03:37.985 --> 00:03:39.265
<v Speaker 0>need tests, we will definitely

00:03:39.825 --> 00:03:41.665
<v Speaker 1>I'm not watching the YouTube, but yes.

00:03:43.320 --> 00:03:45.000
<v Speaker 0>Okay, so let's see.

00:03:45.400 --> 00:03:48.200
<v Speaker 0>I have my screen shared and ready.

00:03:48.760 --> 00:03:51.000
<v Speaker 0>We've got the Kubernetes documentation.

00:03:51.480 --> 00:03:53.800
<v Speaker 0>Walid and I certainly do not know everything

00:03:53.800 --> 00:03:55.735
<v Speaker 0>nor do we remember everything we learned at

00:03:55.735 --> 00:03:57.095
<v Speaker 0>one point in time, so we will be

00:03:57.095 --> 00:03:58.455
<v Speaker 0>leveraging the documentation

00:03:58.455 --> 00:03:59.495
<v Speaker 0>where we need.

00:04:00.535 --> 00:04:02.055
<v Speaker 0>We also have the IP addresses of all

00:04:02.055 --> 00:04:03.895
<v Speaker 0>the nodes, we do have SSH access and

00:04:03.895 --> 00:04:05.575
<v Speaker 0>hopefully we have control

00:04:06.055 --> 00:04:07.655
<v Speaker 0>access, but we will see that in a

00:04:07.655 --> 00:04:07.815
<v Speaker 0>moment.

00:04:09.420 --> 00:04:12.380
<v Speaker 0>For anyone not familiar, Waleed has an amazing

00:04:12.380 --> 00:04:14.700
<v Speaker 0>set of resources on his GitHub profile so

00:04:14.700 --> 00:04:16.060
<v Speaker 0>that is Waleed Shari.

00:04:16.140 --> 00:04:17.339
<v Speaker 0>The username,

00:04:17.500 --> 00:04:19.579
<v Speaker 0>really helpful for anyone looking to take their

00:04:19.579 --> 00:04:21.660
<v Speaker 0>CKA, CTD or CKS

00:04:21.660 --> 00:04:22.865
<v Speaker 0>exams. Exams and

00:04:23.585 --> 00:04:24.545
<v Speaker 0>I

00:04:25.585 --> 00:04:27.425
<v Speaker 0>have an SCD cheat sheet because I can

00:04:27.425 --> 00:04:29.345
<v Speaker 0>never remember how to work at SCD.

00:04:29.825 --> 00:04:30.465
<v Speaker 0>So

00:04:30.785 --> 00:04:31.905
<v Speaker 0>step one,

00:04:32.945 --> 00:04:35.900
<v Speaker 0>we have kube config for cluster one here.

00:04:35.900 --> 00:04:39.500
<v Speaker 0>This one is the cluster broken by Lee.

00:04:40.940 --> 00:04:43.020
<v Speaker 0>So first things first, should we run a

00:04:43.020 --> 00:04:45.740
<v Speaker 0>get notes? Is that Yes please. But can

00:04:45.740 --> 00:04:47.875
<v Speaker 1>you run cluster info first? Let's see the

00:04:47.875 --> 00:04:50.435
<v Speaker 1>API. Okay, anything. Yeah, let's see if the

00:04:50.435 --> 00:04:51.555
<v Speaker 1>API is responding.

00:04:53.074 --> 00:04:54.515
<v Speaker 1>Yeah, that's good at least.

00:04:55.074 --> 00:04:56.355
<v Speaker 0>That is good.

00:04:56.915 --> 00:04:59.235
<v Speaker 1>That's good. The network is working. Okay, we

00:04:59.235 --> 00:05:00.195
<v Speaker 1>can tell that

00:05:00.514 --> 00:05:02.435
<v Speaker 1>the CNI is working because all the nodes

00:05:02.435 --> 00:05:02.835
<v Speaker 1>are ready.

00:05:03.600 --> 00:05:05.440
<v Speaker 1>And we can tell the API is responding

00:05:05.440 --> 00:05:07.920
<v Speaker 1>because it responded to our Q control command.

00:05:08.160 --> 00:05:10.720
<v Speaker 1>So we can assume the controller is okay.

00:05:10.720 --> 00:05:12.880
<v Speaker 1>Can we do get bots minus capital A

00:05:12.880 --> 00:05:13.680
<v Speaker 1>to see?

00:05:14.400 --> 00:05:17.280
<v Speaker 1>Oh, we have I've ran out get component

00:05:16.905 --> 00:05:19.385
<v Speaker 0>statuses and we can see the scheduler and

00:05:19.385 --> 00:05:21.545
<v Speaker 0>the control manager. The scheduler. Okay.

00:05:21.545 --> 00:05:24.105
<v Speaker 1>Control manager. Okay. But I'm really happy that

00:05:24.105 --> 00:05:25.305
<v Speaker 0>HCD is happy.

00:05:25.945 --> 00:05:26.745
<v Speaker 1>Okay.

00:05:27.065 --> 00:05:29.145
<v Speaker 1>So what we can do, we can check

00:05:29.360 --> 00:05:31.920
<v Speaker 1>the manifest for the scheduler and the controller

00:05:31.920 --> 00:05:34.320
<v Speaker 1>manager on the master node.

00:05:35.120 --> 00:05:37.440
<v Speaker 1>In that case, we have three master nodes.

00:05:40.160 --> 00:05:41.360
<v Speaker 0>Do you want to see the outputs of

00:05:41.360 --> 00:05:43.735
<v Speaker 0>get pods all namespaces first? Most

00:05:44.935 --> 00:05:47.575
<v Speaker 1>likely we'll see bending. Do we see bending?

00:05:48.455 --> 00:05:50.215
<v Speaker 1>Can we grip for bending?

00:05:51.655 --> 00:05:52.775
<v Speaker 0>Yeah. Sure.

00:05:54.855 --> 00:05:57.575
<v Speaker 1>Strange. I mean, the scheduler is so basically

00:05:57.575 --> 00:05:58.375
<v Speaker 1>these were run.

00:05:59.000 --> 00:06:01.000
<v Speaker 1>So nothing Okay. Can you schedule

00:06:01.720 --> 00:06:03.080
<v Speaker 1>Can you run an

00:06:03.560 --> 00:06:04.840
<v Speaker 1>NGINX image?

00:06:07.160 --> 00:06:09.320
<v Speaker 1>Can you run a cube control run bot?

00:06:11.800 --> 00:06:13.960
<v Speaker 1>Run NGINX image NGINX. Yeah.

00:06:15.855 --> 00:06:17.455
<v Speaker 1>Dash dash. Okay,

00:06:21.535 --> 00:06:22.255
<v Speaker 1>let's see.

00:06:24.175 --> 00:06:25.055
<v Speaker 1>Container, oh.

00:06:27.599 --> 00:06:28.720
<v Speaker 1>So basically

00:06:29.199 --> 00:06:31.520
<v Speaker 1>maybe one, okay, maybe not all the schedulers

00:06:31.520 --> 00:06:32.320
<v Speaker 1>are down

00:06:33.919 --> 00:06:35.759
<v Speaker 1>because we just need one scheduler to be

00:06:35.759 --> 00:06:36.320
<v Speaker 1>up.

00:06:37.840 --> 00:06:38.479
<v Speaker 0>Well,

00:06:38.960 --> 00:06:40.639
<v Speaker 0>I would expect the image to pull it

00:06:40.639 --> 00:06:42.565
<v Speaker 0>a little faster than that. Let's give it

00:06:42.565 --> 00:06:43.925
<v Speaker 0>a few more seconds and see if we

00:06:43.925 --> 00:06:46.005
<v Speaker 0>actually get a running container, but it does.

00:06:46.005 --> 00:06:47.925
<v Speaker 1>If you do, can you do cube control

00:06:47.925 --> 00:06:50.325
<v Speaker 1>describe on the NGINX because we will see

00:06:50.325 --> 00:06:51.445
<v Speaker 1>that it was scheduled.

00:06:52.405 --> 00:06:53.925
<v Speaker 1>So successfully assigned, you see.

00:06:54.710 --> 00:06:56.550
<v Speaker 1>So it was assigned to the node. That

00:06:56.550 --> 00:06:58.470
<v Speaker 1>means that the scheduler was working.

00:06:59.430 --> 00:06:59.990
<v Speaker 1>So

00:07:00.310 --> 00:07:02.390
<v Speaker 1>maybe not all the schedulers are down.

00:07:04.710 --> 00:07:07.190
<v Speaker 1>We can go one I mean

00:07:08.855 --> 00:07:09.495
<v Speaker 1>so

00:07:09.815 --> 00:07:12.135
<v Speaker 1>it's helpful if you have a better SH

00:07:12.135 --> 00:07:14.935
<v Speaker 1>command like BDSH or Ansible or whatever.

00:07:15.175 --> 00:07:17.495
<v Speaker 1>But let's go the traditional way, one node

00:07:17.495 --> 00:07:18.375
<v Speaker 1>at a time.

00:07:20.375 --> 00:07:23.330
<v Speaker 0>Okay, so let's say talk about what's your

00:07:23.330 --> 00:07:25.250
<v Speaker 0>hypothesis? Do you have anything right now or

00:07:25.250 --> 00:07:27.250
<v Speaker 0>are we still just kinda looking around? What

00:07:27.250 --> 00:07:29.810
<v Speaker 0>are you thinking here? Okay. Let's do

00:07:30.210 --> 00:07:31.889
<v Speaker 1>if you do cube control minus

00:07:32.690 --> 00:07:34.530
<v Speaker 1>and the namespace cube system

00:07:36.050 --> 00:07:37.409
<v Speaker 1>and get bots, yes.

00:07:39.225 --> 00:07:39.945
<v Speaker 1>And

00:07:40.505 --> 00:07:42.265
<v Speaker 1>let's grab for a schedule.

00:07:43.705 --> 00:07:44.745
<v Speaker 1>So I see

00:07:45.145 --> 00:07:46.824
<v Speaker 0>Yeah. We have three schedulers here. Do you

00:07:46.824 --> 00:07:47.865
<v Speaker 0>wanna get the logs?

00:07:48.425 --> 00:07:50.905
<v Speaker 1>So they are running, correct? It looks like

00:07:50.905 --> 00:07:51.385
<v Speaker 0>it, yeah.

00:07:52.650 --> 00:07:53.770
<v Speaker 1>Let

00:07:53.770 --> 00:07:56.330
<v Speaker 1>me check. So everything is running.

00:07:58.170 --> 00:08:01.130
<v Speaker 1>Scheduler cluster, yeah. Let's check it along with

00:08:01.130 --> 00:08:01.370
<v Speaker 0>one of Okay,

00:08:02.970 --> 00:08:05.530
<v Speaker 1>good. Successfully required leads, yeah.

00:08:06.625 --> 00:08:08.545
<v Speaker 1>There was a leader election done.

00:08:12.625 --> 00:08:13.345
<v Speaker 1>Okay.

00:08:14.705 --> 00:08:15.585
<v Speaker 1>Interesting.

00:08:15.585 --> 00:08:16.785
<v Speaker 1>K. Interesting.

00:08:16.785 --> 00:08:18.945
<v Speaker 1>Yes. Can you do again the

00:08:19.425 --> 00:08:20.945
<v Speaker 1>cube control cluster info?

00:08:25.590 --> 00:08:26.310
<v Speaker 1>So

00:08:26.470 --> 00:08:29.190
<v Speaker 1>control is running. Kubectl is fine.

00:08:29.590 --> 00:08:33.830
<v Speaker 1>Okay. Now do the component again. Get component

00:08:34.309 --> 00:08:35.110
<v Speaker 1>status.

00:08:35.830 --> 00:08:36.549
<v Speaker 1>So get.

00:08:37.394 --> 00:08:38.995
<v Speaker 1>It's doing get.

00:08:40.674 --> 00:08:43.074
<v Speaker 1>So the unhealthy

00:08:43.074 --> 00:08:44.915
<v Speaker 1>connect, connect refuse.

00:08:44.995 --> 00:08:46.915
<v Speaker 1>So if you look at the address,

00:08:48.595 --> 00:08:49.475
<v Speaker 1>yeah? Mhmm.

00:08:50.380 --> 00:08:51.580
<v Speaker 1>It's a local

00:08:53.019 --> 00:08:55.420
<v Speaker 1>loopback address. Yeah, so this is the probes

00:08:55.420 --> 00:08:57.899
<v Speaker 0>on the scheduler, should we take a look

00:08:57.899 --> 00:08:57.660
<v Speaker 0>at Yes.

00:09:00.699 --> 00:09:02.540
<v Speaker 0>So if we just do

00:09:03.275 --> 00:09:04.475
<v Speaker 0>get pods,

00:09:05.275 --> 00:09:08.875
<v Speaker 0>describe pods, pop open a scheduler.

00:09:10.395 --> 00:09:12.875
<v Speaker 0>I can't scroll in t mux. Let's use

00:09:12.875 --> 00:09:13.675
<v Speaker 0>a pager.

00:09:14.075 --> 00:09:14.795
<v Speaker 1>Yes. Yes.

00:09:19.940 --> 00:09:21.700
<v Speaker 1>Okay, I want to check if there is

00:09:21.700 --> 00:09:24.820
<v Speaker 1>a reason or anything. State started, yeah, ready

00:09:24.820 --> 00:09:26.820
<v Speaker 1>through, that's fine. This one it looks The

00:09:27.060 --> 00:09:27.860
<v Speaker 0>ports are different.

00:09:28.260 --> 00:09:29.220
<v Speaker 0>The

00:09:30.020 --> 00:09:31.695
<v Speaker 0>ports on this is one zero two five

00:09:31.695 --> 00:09:34.095
<v Speaker 0>nine, one zero two five nine whereas our

00:09:34.095 --> 00:09:35.375
<v Speaker 0>error message was

00:09:35.935 --> 00:09:38.095
<v Speaker 0>one zero Let me run that get CS

00:09:38.095 --> 00:09:38.815
<v Speaker 0>again.

00:09:39.615 --> 00:09:40.655
<v Speaker 0>10252

00:09:40.815 --> 00:09:42.255
<v Speaker 0>1 0 2 5 1. I wonder if

00:09:42.255 --> 00:09:42.815
<v Speaker 0>the

00:09:43.695 --> 00:09:45.295
<v Speaker 0>probes

00:09:44.670 --> 00:09:46.830
<v Speaker 0>are changed on one of the schedulers.

00:09:48.110 --> 00:09:49.310
<v Speaker 0>Maybe we should check them Let's be

00:09:50.350 --> 00:09:51.390
<v Speaker 1>open minded

00:09:54.830 --> 00:09:57.630
<v Speaker 1>and let's check the API server.

00:09:57.630 --> 00:10:00.305
<v Speaker 1>What's the configuration for the controller manager at

00:10:00.305 --> 00:10:01.985
<v Speaker 1>what board it's listening to?

00:10:04.065 --> 00:10:05.584
<v Speaker 0>Sorry, can you say that again?

00:10:06.384 --> 00:10:07.024
<v Speaker 1>So

00:10:08.065 --> 00:10:11.185
<v Speaker 1>our source of truth for board's numbers would

00:10:11.185 --> 00:10:11.904
<v Speaker 1>be the

00:10:12.464 --> 00:10:13.425
<v Speaker 1>ABI,

00:10:13.584 --> 00:10:14.625
<v Speaker 1>the cube ABI.

00:10:15.070 --> 00:10:17.070
<v Speaker 1>Correct?

00:10:17.389 --> 00:10:18.110
<v Speaker 1>So if

00:10:18.510 --> 00:10:20.510
<v Speaker 1>we check the manifest for the cube ABI

00:10:20.510 --> 00:10:21.390
<v Speaker 1>to see

00:10:22.589 --> 00:10:24.990
<v Speaker 1>what ports configured for

00:10:26.430 --> 00:10:27.870
<v Speaker 1>the controller manager.

00:10:28.985 --> 00:10:29.705
<v Speaker 1>Okay.

00:10:30.185 --> 00:10:32.745
<v Speaker 1>What do you think? Yeah. Let's

00:10:33.065 --> 00:10:34.904
<v Speaker 0>let's so you want to describe

00:10:35.945 --> 00:10:38.345
<v Speaker 1>I want I want to one of nodes.

00:10:38.345 --> 00:10:39.945
<v Speaker 0>Right? Oh, I want to go to one

00:10:39.945 --> 00:10:41.945
<v Speaker 1>of the master nodes. Yes. Alright. Alright. Let's

00:10:41.945 --> 00:10:43.880
<v Speaker 0>grab this IP address then. So

00:10:44.520 --> 00:10:46.600
<v Speaker 0>we can do a SSH.

00:10:49.560 --> 00:10:51.160
<v Speaker 0>And these should be deployed through a static

00:10:51.160 --> 00:10:52.600
<v Speaker 0>manifest. Is that right?

00:10:52.920 --> 00:10:53.880
<v Speaker 1>Yes. Correct.

00:10:54.685 --> 00:10:57.004
<v Speaker 1>So let's minus L. Yeah,

00:10:57.004 --> 00:10:59.004
<v Speaker 1>can we or

00:10:59.004 --> 00:11:01.165
<v Speaker 1>yeah, the Kube API server?

00:11:01.404 --> 00:11:02.445
<v Speaker 1>Okay,

00:11:02.605 --> 00:11:03.884
<v Speaker 1>you would need You want the API server?

00:11:03.884 --> 00:11:06.285
<v Speaker 1>No, no, it's okay. In fact,

00:11:06.605 --> 00:11:08.524
<v Speaker 0>this is the future, right? You could type

00:11:08.524 --> 00:11:09.529
<v Speaker 0>in my machine.

00:11:10.730 --> 00:11:11.370
<v Speaker 0>Yes.

00:11:12.410 --> 00:11:15.050
<v Speaker 0>There you go. I'll just I'll just chill

00:11:15.050 --> 00:11:16.730
<v Speaker 0>back a little bit. You've got this.

00:11:26.545 --> 00:11:28.865
<v Speaker 1>Okay. I don't see anything related to the

00:11:28.865 --> 00:11:29.665
<v Speaker 1>controller.

00:11:32.385 --> 00:11:33.745
<v Speaker 1>Secure port.

00:11:37.505 --> 00:11:39.505
<v Speaker 1>Okay. Actually, it's the other way around.

00:11:55.385 --> 00:11:57.625
<v Speaker 1>So it is 10257.

00:11:59.705 --> 00:12:01.945
<v Speaker 1>This is the liveness probe.

00:12:02.665 --> 00:12:03.305
<v Speaker 1>Okay.

00:12:03.785 --> 00:12:05.785
<v Speaker 0>So I've I've got a question. Right? Like,

00:12:05.960 --> 00:12:07.640
<v Speaker 0>we we run and get pods on the

00:12:07.640 --> 00:12:09.160
<v Speaker 0>cube system namespace

00:12:09.160 --> 00:12:10.840
<v Speaker 0>and what we see is three

00:12:11.080 --> 00:12:14.280
<v Speaker 0>schedulers appear to be healthy. One controller manager

00:12:14.280 --> 00:12:15.560
<v Speaker 0>that appears to be healthy.

00:12:16.200 --> 00:12:16.920
<v Speaker 0>However,

00:12:17.640 --> 00:12:19.960
<v Speaker 0>component status is the same as unhealthy.

00:12:20.155 --> 00:12:22.075
<v Speaker 0>Now how are we getting this disconnect here?

00:12:22.075 --> 00:12:24.075
<v Speaker 0>Do we know what could cause that?

00:12:25.835 --> 00:12:28.395
<v Speaker 1>It could be the health checks are the

00:12:28.395 --> 00:12:29.355
<v Speaker 1>wrong ones.

00:12:29.995 --> 00:12:32.075
<v Speaker 1>Yeah. So basically it is listening on a

00:12:32.075 --> 00:12:33.755
<v Speaker 1>different port, but the health checks are doing

00:12:33.755 --> 00:12:34.555
<v Speaker 1>a different port.

00:12:36.779 --> 00:12:38.060
<v Speaker 1>One zero two.

00:12:43.100 --> 00:12:44.860
<v Speaker 1>Sorry. Two.

00:12:46.940 --> 00:12:48.540
<v Speaker 1>So

00:12:54.895 --> 00:12:55.695
<v Speaker 1>okay.

00:12:59.455 --> 00:13:01.375
<v Speaker 1>So now I saw a roll of course

00:13:01.375 --> 00:13:01.935
<v Speaker 0>there.

00:13:02.895 --> 00:13:05.055
<v Speaker 1>Oh, okay. Sorry. No. No. It's all had.

00:13:05.055 --> 00:13:05.775
<v Speaker 1>Cube control.

00:13:07.350 --> 00:13:09.190
<v Speaker 1>Minus n cube system.

00:13:11.589 --> 00:13:13.269
<v Speaker 1>You'll need to yeah. We're not gonna have

00:13:13.269 --> 00:13:14.629
<v Speaker 0>access to that on the noise. You'll need

00:13:14.629 --> 00:13:17.509
<v Speaker 0>to use the admin cube config. The admin.com

00:13:17.509 --> 00:13:18.870
<v Speaker 0>is a cube config. Yeah. I've just dropped

00:13:18.870 --> 00:13:19.670
<v Speaker 0>into my machine. Okay.

00:13:25.405 --> 00:13:26.605
<v Speaker 1>Grab that.

00:13:28.365 --> 00:13:30.765
<v Speaker 1>Okay. And the current controller

00:13:30.765 --> 00:13:33.645
<v Speaker 1>and we need the cube system namespace.

00:13:33.965 --> 00:13:35.805
<v Speaker 0>Yeah. It's already there. It's at the start.

00:13:35.805 --> 00:13:36.285
<v Speaker 0>You're good.

00:13:37.960 --> 00:13:38.920
<v Speaker 1>Oh, okay.

00:13:42.440 --> 00:13:44.840
<v Speaker 1>Okay. Let's describe one of them.

00:13:46.200 --> 00:13:46.920
<v Speaker 0>Yeah.

00:13:47.400 --> 00:13:48.840
<v Speaker 0>Okay. Excess, you're all good.

00:13:51.065 --> 00:13:52.904
<v Speaker 0>K. It just auto expands.

00:13:53.464 --> 00:13:54.505
<v Speaker 1>Oh, okay. Good.

00:13:56.825 --> 00:13:59.385
<v Speaker 0>And I'll copy and paste that controller manager

00:13:59.385 --> 00:14:00.425
<v Speaker 0>for you if you want.

00:14:03.065 --> 00:14:04.425
<v Speaker 1>I'm not used to this.

00:14:06.149 --> 00:14:07.589
<v Speaker 0>Yeah. I'll I'll here. I I could do

00:14:07.589 --> 00:14:09.589
<v Speaker 0>it. Right? We wanna do a describe. Describe.

00:14:09.589 --> 00:14:10.230
<v Speaker 1>Yes.

00:14:10.709 --> 00:14:12.149
<v Speaker 1>And not

00:14:12.149 --> 00:14:15.269
<v Speaker 1>the cube color scheduler. No. Cube control.

00:14:16.310 --> 00:14:17.509
<v Speaker 1>No manager. Okay.

00:14:18.595 --> 00:14:20.355
<v Speaker 1>And what was it?

00:14:21.075 --> 00:14:22.355
<v Speaker 1>Control name

00:14:22.755 --> 00:14:25.235
<v Speaker 1>and then m g, let's say.

00:14:26.035 --> 00:14:26.835
<v Speaker 1>Okay.

00:14:27.235 --> 00:14:28.675
<v Speaker 1>We have to do less.

00:14:31.154 --> 00:14:31.955
<v Speaker 1>What happened?

00:14:34.600 --> 00:14:36.440
<v Speaker 0>Hold on. Let me fix it. There you

00:14:36.440 --> 00:14:39.240
<v Speaker 0>go. Are we typing together? Okay. Let's see.

00:14:39.560 --> 00:14:41.160
<v Speaker 1>Can we see the boards?

00:14:42.279 --> 00:14:43.720
<v Speaker 1>Can you go less?

00:14:44.839 --> 00:14:45.320
<v Speaker 1>Okay.

00:14:47.685 --> 00:14:48.405
<v Speaker 1>So

00:14:50.005 --> 00:14:52.325
<v Speaker 1>You see port and host port, there is

00:14:52.325 --> 00:14:52.965
<v Speaker 1>none.

00:14:56.325 --> 00:14:58.245
<v Speaker 1>I don't this is normal.

00:14:59.045 --> 00:15:00.965
<v Speaker 1>Let me

00:15:02.320 --> 00:15:03.760
<v Speaker 1>do you want to go to the other

00:15:04.320 --> 00:15:06.640
<v Speaker 1>cluster and use it as a check?

00:15:07.200 --> 00:15:07.920
<v Speaker 1>Okay.

00:15:08.160 --> 00:15:10.320
<v Speaker 1>To see what's the baseline. I don't think

00:15:10.320 --> 00:15:12.400
<v Speaker 1>this is normal to have the board as

00:15:12.400 --> 00:15:12.720
<v Speaker 1>none.

00:15:13.775 --> 00:15:15.215
<v Speaker 1>Which container is this? Yeah, this is the

00:15:15.215 --> 00:15:17.375
<v Speaker 1>controller manager. It should be listening on 10

00:15:17.375 --> 00:15:18.895
<v Speaker 1>to 50, is it?

00:15:20.735 --> 00:15:22.895
<v Speaker 1>Okay, why is it saying none?

00:15:26.015 --> 00:15:26.655
<v Speaker 1>Okay.

00:15:28.670 --> 00:15:30.270
<v Speaker 0>Okay. So let let's

00:15:30.430 --> 00:15:32.590
<v Speaker 0>I think I understand what you're suggesting here.

00:15:32.590 --> 00:15:33.710
<v Speaker 0>So let's make sure we make this clear

00:15:33.710 --> 00:15:34.830
<v Speaker 0>for the people that are So we are

00:15:34.830 --> 00:15:36.110
<v Speaker 1>missing maybe configuration,

00:15:36.110 --> 00:15:38.590
<v Speaker 1>yes. I'm thinking, are we missing a configuration?

00:15:39.324 --> 00:15:41.245
<v Speaker 0>Yes, so and when we do a get

00:15:41.245 --> 00:15:43.324
<v Speaker 0>pods and everything looks healthy, this is because

00:15:43.324 --> 00:15:45.725
<v Speaker 0>the liveness probes on the controller manager and

00:15:45.725 --> 00:15:49.245
<v Speaker 0>the scheduler are using local IP addresses 127001

00:15:49.245 --> 00:15:52.100
<v Speaker 0>and a port which will work, right? However,

00:15:52.100 --> 00:15:54.500
<v Speaker 0>get component statuses was reporting that our controller

00:15:54.500 --> 00:15:56.740
<v Speaker 0>manager and our scheduler are unhealthy. Now the

00:15:56.740 --> 00:16:00.579
<v Speaker 0>component statuses checks aren't gonna use the 127001

00:16:00.579 --> 00:16:02.899
<v Speaker 0>address, they're gonna use the cluster address for

00:16:02.899 --> 00:16:03.300
<v Speaker 0>it.

00:16:03.860 --> 00:16:05.540
<v Speaker 0>What Wally does notice is that when we

00:16:05.540 --> 00:16:07.075
<v Speaker 0>take a look at the

00:16:07.395 --> 00:16:09.875
<v Speaker 0>description of this is that there is no

00:16:09.875 --> 00:16:12.995
<v Speaker 0>port or host port defined on this Which

00:16:14.035 --> 00:16:16.355
<v Speaker 0>means that that cluster address would not work

00:16:16.355 --> 00:16:19.230
<v Speaker 0>and components would think that things are unwell.

00:16:20.030 --> 00:16:20.590
<v Speaker 0>So

00:16:21.390 --> 00:16:23.230
<v Speaker 0>I think that's a good lead. But the

00:16:24.430 --> 00:16:27.230
<v Speaker 1>controller manager, okay, because we did the bot,

00:16:27.230 --> 00:16:29.390
<v Speaker 1>maybe we should try a replica set

00:16:29.710 --> 00:16:31.070
<v Speaker 1>or

00:16:31.070 --> 00:16:33.855
<v Speaker 1>a deployment. But before we're doing this, let's

00:16:33.855 --> 00:16:36.735
<v Speaker 1>try with the traditional tools. Let's do netstat

00:16:36.815 --> 00:16:38.575
<v Speaker 1>minus three year LBN

00:16:40.894 --> 00:16:43.375
<v Speaker 1>and check. You'll want to be on the

00:16:43.375 --> 00:16:46.510
<v Speaker 0>machine, right? We are not anymore, yeah. Yeah,

00:16:46.510 --> 00:16:54.270
<v Speaker 0>we can just do it. Racing

00:16:54.270 --> 00:16:56.270
<v Speaker 1>conditions we had. There you go.

00:16:57.790 --> 00:16:59.630
<v Speaker 1>Let's say not stat

00:16:59.415 --> 00:17:01.815
<v Speaker 1>minus t u l b n to listen

00:17:01.815 --> 00:17:03.175
<v Speaker 1>to TCB, UDB,

00:17:03.975 --> 00:17:06.614
<v Speaker 1>and port numbers as numbers

00:17:07.095 --> 00:17:08.134
<v Speaker 1>and grab

00:17:08.775 --> 00:17:09.575
<v Speaker 1>control.

00:17:11.015 --> 00:17:13.819
<v Speaker 1>Okay. It's listening on 10 to 57,

00:17:13.819 --> 00:17:16.139
<v Speaker 1>which is correct as in the health check.

00:17:16.380 --> 00:17:17.099
<v Speaker 0>Yep.

00:17:18.299 --> 00:17:18.940
<v Speaker 0>So

00:17:19.659 --> 00:17:21.979
<v Speaker 0>I think you're right. Why don't we let's

00:17:22.940 --> 00:17:24.875
<v Speaker 0>assume that our second cluster doesn't have this

00:17:24.875 --> 00:17:27.194
<v Speaker 0>problem. We wanna be able to correlate what

00:17:27.194 --> 00:17:29.434
<v Speaker 0>we think our hypothesis is to confirm it.

00:17:29.434 --> 00:17:32.075
<v Speaker 1>So But are we actually

00:17:33.034 --> 00:17:33.835
<v Speaker 1>are we

00:17:34.395 --> 00:17:36.554
<v Speaker 1>causing us problems?

00:17:36.955 --> 00:17:37.914
<v Speaker 1>This looks healthy.

00:17:39.650 --> 00:17:41.490
<v Speaker 1>We managed to run a bot.

00:17:41.970 --> 00:17:43.649
<v Speaker 0>We didn't manage to run a bot.

00:17:44.610 --> 00:17:47.090
<v Speaker 1>Did we? No. I thought they did container

00:17:47.090 --> 00:17:47.809
<v Speaker 1>creating.

00:17:48.530 --> 00:17:50.529
<v Speaker 1>Okay. So container creating.

00:17:51.090 --> 00:17:53.170
<v Speaker 1>Okay. Can we run events again against it?

00:17:53.235 --> 00:17:55.475
<v Speaker 1>So basically, the scheduler did work.

00:17:56.595 --> 00:17:57.235
<v Speaker 1>And

00:18:00.595 --> 00:18:01.554
<v Speaker 1>okay.

00:18:03.635 --> 00:18:07.554
<v Speaker 1>Failed create what sandbox. Cubelet combined from similar

00:18:07.554 --> 00:18:08.915
<v Speaker 1>failed to create what sandbox.

00:18:09.540 --> 00:18:11.460
<v Speaker 1>We have to set up network for RK

00:18:11.460 --> 00:18:12.660
<v Speaker 1>for sandbox,

00:18:13.140 --> 00:18:15.620
<v Speaker 1>enable to connect to Selium daemon.

00:18:17.380 --> 00:18:18.660
<v Speaker 1>Okay. So it looks like

00:18:20.740 --> 00:18:23.220
<v Speaker 1>can we do again? So it's here. It's

00:18:23.220 --> 00:18:25.375
<v Speaker 1>saying that our CNI is Cilium.

00:18:26.575 --> 00:18:27.455
<v Speaker 1>Can we do

00:18:28.175 --> 00:18:30.015
<v Speaker 0>How did we miss that?

00:18:31.295 --> 00:18:32.495
<v Speaker 1>I don't know.

00:18:32.895 --> 00:18:34.015
<v Speaker 1>I didn't miss it.

00:18:34.655 --> 00:18:36.335
<v Speaker 0>Because we did a cat A.

00:18:37.150 --> 00:18:39.390
<v Speaker 1>Yes. So can we look at the daemon

00:18:39.390 --> 00:18:41.309
<v Speaker 1>set that is responsible for that?

00:18:43.070 --> 00:18:43.950
<v Speaker 1>Can can

00:18:52.990 --> 00:18:57.005
<v Speaker 1>Yes. I just even set minus a. Cilium

00:18:57.005 --> 00:18:58.045
<v Speaker 0>namespace.

00:18:59.165 --> 00:19:01.165
<v Speaker 1>Is it Cilium or CubeSystem? Oh yeah, it

00:19:01.165 --> 00:19:02.684
<v Speaker 1>is Cilium. Okay.

00:19:06.125 --> 00:19:07.440
<v Speaker 1>So none none of them is ready.

00:19:08.320 --> 00:19:09.039
<v Speaker 1>Okay.

00:19:10.800 --> 00:19:12.559
<v Speaker 1>Okay. None of them is ready.

00:19:13.360 --> 00:19:14.560
<v Speaker 0>No. I think we're going have to get

00:19:14.560 --> 00:19:16.000
<v Speaker 0>the logs of one of these ciliums to

00:19:16.000 --> 00:19:17.840
<v Speaker 0>see if we can see any other messages.

00:19:18.240 --> 00:19:21.045
<v Speaker 1>Yes. Let's describe first. Usually when there is

00:19:21.045 --> 00:19:23.045
<v Speaker 1>a crash loop back off, I do the

00:19:23.045 --> 00:19:24.965
<v Speaker 1>logs because it's usually the application.

00:19:25.045 --> 00:19:27.125
<v Speaker 1>But to describe, there is a reason

00:19:27.605 --> 00:19:30.245
<v Speaker 1>and sometimes this reason is quite good enough.

00:19:31.640 --> 00:19:33.880
<v Speaker 1>Can you repeat again with less or grab

00:19:33.880 --> 00:19:36.840
<v Speaker 1>for capital reason? Capital R, easy.

00:19:39.720 --> 00:19:40.440
<v Speaker 1>Yes.

00:19:40.600 --> 00:19:43.480
<v Speaker 1>So just saying crash to back off.

00:19:43.880 --> 00:19:46.120
<v Speaker 1>Okay. Let's do the logs then. Let's do

00:19:46.120 --> 00:19:48.015
<v Speaker 1>the logs with the previous log so to

00:19:48.015 --> 00:19:49.775
<v Speaker 1>see what the error was.

00:19:52.335 --> 00:19:53.135
<v Speaker 1>Minus

00:19:54.655 --> 00:19:56.015
<v Speaker 1>minus p

00:19:56.335 --> 00:19:57.455
<v Speaker 1>for previous.

00:19:57.535 --> 00:19:57.935
<v Speaker 1>Yeah.

00:20:01.750 --> 00:20:04.390
<v Speaker 1>Detected, mounted, valid table,

00:20:05.350 --> 00:20:06.309
<v Speaker 1>prefix.

00:20:08.790 --> 00:20:10.950
<v Speaker 1>Rawkode requires IP tables.

00:20:11.030 --> 00:20:14.184
<v Speaker 1>Is the so Selium can use

00:20:14.585 --> 00:20:16.585
<v Speaker 1>Selium uses BBF. Correct?

00:20:17.145 --> 00:20:18.984
<v Speaker 0>It can do. Yes.

00:20:21.225 --> 00:20:23.384
<v Speaker 1>So is the config for Selium

00:20:24.424 --> 00:20:25.465
<v Speaker 1>cluster?

00:20:25.705 --> 00:20:26.104
<v Speaker 1>Okay.

00:20:26.664 --> 00:20:27.304
<v Speaker 1>This is

00:20:28.559 --> 00:20:31.119
<v Speaker 0>Let's see. You're going fast.

00:20:31.200 --> 00:20:32.799
<v Speaker 0>So I'm just looking for anything, looks like

00:20:32.799 --> 00:20:33.839
<v Speaker 0>an error message.

00:20:36.240 --> 00:20:38.559
<v Speaker 0>Okay. So that is the first error message.

00:20:40.559 --> 00:20:42.434
<v Speaker 0>So we got a What is it? We

00:20:42.434 --> 00:20:43.955
<v Speaker 0>have a warp number of and

00:20:44.274 --> 00:20:46.034
<v Speaker 0>then we have a l seven proxy requires

00:20:46.034 --> 00:20:48.514
<v Speaker 0>IP table rules, install IP table rules.

00:20:49.875 --> 00:20:51.394
<v Speaker 0>We just messing one parameter?

00:20:55.955 --> 00:20:58.909
<v Speaker 1>Proxy requires IP table rules. So it's telling

00:20:59.070 --> 00:21:01.789
<v Speaker 1>us it requires a certain IB table rules.

00:21:03.630 --> 00:21:04.269
<v Speaker 1>Okay.

00:21:05.150 --> 00:21:08.110
<v Speaker 1>Let's use the bridge documentary for this one.

00:21:10.110 --> 00:21:12.750
<v Speaker 1>Let's do the IB tables

00:21:12.805 --> 00:21:15.365
<v Speaker 1>minus capital l. But the problem with IB

00:21:15.365 --> 00:21:16.085
<v Speaker 1>tables,

00:21:16.965 --> 00:21:19.125
<v Speaker 1>we'll see lots of stuff. Let's let's try.

00:21:19.365 --> 00:21:21.365
<v Speaker 0>What is the problem here? I I don't

00:21:21.365 --> 00:21:22.885
<v Speaker 0>know if it's IB tables on the host

00:21:22.885 --> 00:21:24.805
<v Speaker 0>or selling them is telling us that it

00:21:24.805 --> 00:21:26.565
<v Speaker 0>doesn't have access to the

00:21:27.090 --> 00:21:29.169
<v Speaker 0>conflict stuff and now it's trying to get

00:21:29.169 --> 00:21:30.850
<v Speaker 1>that Is it using but it doesn't have

00:21:30.850 --> 00:21:32.769
<v Speaker 0>the flag on the template,

00:21:32.770 --> 00:21:34.770
<v Speaker 0>right? Is that what it's saying? Yes. So

00:21:34.770 --> 00:21:37.409
<v Speaker 0>if we do an edit DS Celeb,

00:21:38.929 --> 00:21:41.090
<v Speaker 0>unless you jump down to all these parameters

00:21:41.090 --> 00:21:42.610
<v Speaker 0>that we pass into the pod.

00:21:45.235 --> 00:21:46.595
<v Speaker 1>Man, that's too fast.

00:21:46.915 --> 00:21:48.915
<v Speaker 0>Yeah, sorry. Just get to the bit we

00:21:48.915 --> 00:21:49.715
<v Speaker 0>need to do.

00:21:50.915 --> 00:21:52.115
<v Speaker 0>Where's args?

00:21:53.075 --> 00:21:54.755
<v Speaker 1>It was most likely it is in a

00:21:54.755 --> 00:21:55.475
<v Speaker 1>config map.

00:21:56.680 --> 00:21:57.800
<v Speaker 0>Of course.

00:22:03.080 --> 00:22:04.200
<v Speaker 1>Or secret.

00:22:05.880 --> 00:22:07.560
<v Speaker 1>But most likely it's a config map.

00:22:12.035 --> 00:22:14.275
<v Speaker 1>Okay. In in cvm space, can you do

00:22:14.275 --> 00:22:15.154
<v Speaker 1>get all?

00:22:16.595 --> 00:22:17.715
<v Speaker 1>Yeah.

00:22:19.715 --> 00:22:22.515
<v Speaker 1>Haven't created cvm before. Okay. I think

00:22:22.995 --> 00:22:25.715
<v Speaker 1>yes. Okay. Let's see what we have. Always

00:22:25.715 --> 00:22:26.035
<v Speaker 0>use our.

00:22:26.990 --> 00:22:29.390
<v Speaker 0>So let's try that Centimeters again. Yeah. There

00:22:29.390 --> 00:22:30.030
<v Speaker 0>we go.

00:22:30.510 --> 00:22:32.270
<v Speaker 0>It helps if you spell it right.

00:22:38.590 --> 00:22:41.005
<v Speaker 1>Oh, you need minus n? You did minus

00:22:41.005 --> 00:22:43.005
<v Speaker 1>n, correct? Oh, but I didn't. No, but

00:22:43.005 --> 00:22:44.765
<v Speaker 1>but yes. Centimeters,

00:22:44.765 --> 00:22:46.605
<v Speaker 1>sorry. Yes, I think we could just add

00:22:46.605 --> 00:22:47.804
<v Speaker 0>notes here.

00:22:49.005 --> 00:22:50.684
<v Speaker 1>It's not ib table rules.

00:22:51.565 --> 00:22:52.924
<v Speaker 0>Oh, wait. What happens

00:22:53.565 --> 00:22:55.250
<v Speaker 1>if I don't want to use ib, because

00:22:55.250 --> 00:22:58.210
<v Speaker 1>it says enable ib version four on top.

00:22:58.610 --> 00:22:59.890
<v Speaker 1>But what happens if I want to use

00:22:59.890 --> 00:23:01.650
<v Speaker 1>e b b f, install ib table rule

00:23:01.650 --> 00:23:03.490
<v Speaker 1>false? Yeah. Try this one also.

00:23:04.210 --> 00:23:05.970
<v Speaker 1>Why is it both? Ah, so it's a

00:23:05.970 --> 00:23:08.525
<v Speaker 1>duplicate. I think there's a typo, and then

00:23:08.525 --> 00:23:10.205
<v Speaker 0>there's a false But which one is correct?

00:23:10.205 --> 00:23:12.365
<v Speaker 1>Because you have rule and rules. Now time

00:23:12.365 --> 00:23:14.285
<v Speaker 1>to hit the manuals. Time to hit the

00:23:14.285 --> 00:23:16.285
<v Speaker 1>main pages or the documents. Well, the logs

00:23:16.285 --> 00:23:17.565
<v Speaker 0>told us, so

00:23:19.405 --> 00:23:21.325
<v Speaker 0>we go to the bottom of this log,

00:23:22.445 --> 00:23:23.920
<v Speaker 0>rules, plural.

00:23:24.240 --> 00:23:24.720
<v Speaker 0>So

00:23:25.200 --> 00:23:27.760
<v Speaker 0>Okay. Let's restart our let's put our selling

00:23:27.760 --> 00:23:29.280
<v Speaker 0>pods and see if they get happy.

00:23:30.080 --> 00:23:32.000
<v Speaker 1>Yeah. I'm glad that you are here.

00:23:32.800 --> 00:23:34.160
<v Speaker 0>I'm glad that you're here.

00:23:36.160 --> 00:23:37.280
<v Speaker 0>We'll

00:23:37.280 --> 00:23:38.975
<v Speaker 0>deal with this together. So I've just restart

00:23:38.895 --> 00:23:40.655
<v Speaker 0>What did that? Sorry to interrupt. But that's

00:23:40.655 --> 00:23:41.375
<v Speaker 1>a realistic

00:23:42.095 --> 00:23:44.095
<v Speaker 1>that's one of the realistic problems in Linux

00:23:44.095 --> 00:23:46.735
<v Speaker 1>and Unix and the Kubernetes in general is

00:23:46.735 --> 00:23:49.055
<v Speaker 1>typos. Most of the problems is us

00:23:49.215 --> 00:23:51.135
<v Speaker 1>doing the type on a configuration map or

00:23:51.135 --> 00:23:51.775
<v Speaker 1>somewhere.

00:23:52.015 --> 00:23:54.590
<v Speaker 0>Yeah. The difficulty here is,

00:23:55.549 --> 00:23:57.950
<v Speaker 0>I don't know if Lee has broken or

00:23:57.950 --> 00:24:00.830
<v Speaker 0>BPF configuration and fixing it by enabling IP

00:24:00.830 --> 00:24:02.109
<v Speaker 0>tables is still a valid

00:24:02.350 --> 00:24:04.110
<v Speaker 0>way to fix it, but we may not

00:24:04.110 --> 00:24:05.070
<v Speaker 0>be fixing

00:24:06.155 --> 00:24:08.395
<v Speaker 0>the real issue, but if our customers happy

00:24:08.395 --> 00:24:10.875
<v Speaker 0>that's a win on our books, Selvium namespace,

00:24:10.875 --> 00:24:11.434
<v Speaker 0>so.

00:24:16.075 --> 00:24:18.970
<v Speaker 1>I must specify the resource cookie. Yeah. Sorry.

00:24:18.970 --> 00:24:20.970
<v Speaker 0>I I would type. No. Go ahead. Go

00:24:20.970 --> 00:24:21.529
<v Speaker 1>ahead.

00:24:22.090 --> 00:24:24.090
<v Speaker 0>K and Celeum

00:24:24.169 --> 00:24:25.369
<v Speaker 0>get pods.

00:24:27.529 --> 00:24:28.330
<v Speaker 0>Okay.

00:24:30.010 --> 00:24:31.529
<v Speaker 0>Let's do a get c s and see

00:24:31.529 --> 00:24:32.169
<v Speaker 0>if that fixes.

00:24:37.775 --> 00:24:38.735
<v Speaker 1>Healthy.

00:24:39.215 --> 00:24:41.055
<v Speaker 1>If you do the the thing is when

00:24:41.055 --> 00:24:43.215
<v Speaker 1>we did k get nodes, everything was ready.

00:24:43.215 --> 00:24:45.850
<v Speaker 1>So there was communication between the nodes. That

00:24:45.850 --> 00:24:47.129
<v Speaker 0>pod they're scheduled,

00:24:47.370 --> 00:24:49.130
<v Speaker 0>so maybe a component status is just a

00:24:49.130 --> 00:24:50.730
<v Speaker 0>little behind, we're gonna have to wait for

00:24:50.730 --> 00:24:51.289
<v Speaker 0>the

00:24:51.610 --> 00:24:53.049
<v Speaker 0>check to catch up,

00:24:53.610 --> 00:24:55.210
<v Speaker 0>but we may have fixed this.

00:24:55.529 --> 00:24:57.210
<v Speaker 0>We got out, we were able to schedule

00:24:57.210 --> 00:24:59.465
<v Speaker 0>our pod. Let's see if our application is

00:24:59.465 --> 00:25:01.544
<v Speaker 0>still running. We maybe should have done that

00:25:01.544 --> 00:25:03.224
<v Speaker 0>from the start, but So

00:25:05.625 --> 00:25:06.825
<v Speaker 0>port forward,

00:25:07.385 --> 00:25:08.984
<v Speaker 0>s v c, WordPress,

00:25:09.385 --> 00:25:10.024
<v Speaker 0>80.

00:25:11.225 --> 00:25:13.390
<v Speaker 1>So the fastest way to check,

00:25:14.270 --> 00:25:16.270
<v Speaker 1>I mean, that your cluster is working is

00:25:16.270 --> 00:25:18.110
<v Speaker 1>basically you run a workload.

00:25:18.350 --> 00:25:20.830
<v Speaker 1>And running a bot is the simplest workload

00:25:20.830 --> 00:25:23.470
<v Speaker 1>to have. I would say deployment

00:25:23.470 --> 00:25:24.750
<v Speaker 1>will exercise

00:25:26.185 --> 00:25:28.025
<v Speaker 1>the replica set controller.

00:25:29.225 --> 00:25:30.505
<v Speaker 1>So let's

00:25:30.825 --> 00:25:31.945
<v Speaker 1>create a deployment.

00:25:32.025 --> 00:25:33.544
<v Speaker 0>We we have one here.

00:25:33.785 --> 00:25:34.745
<v Speaker 0>Let's work with this as

00:25:35.465 --> 00:25:37.625
<v Speaker 0>our sample workload, which is is running just

00:25:37.625 --> 00:25:39.320
<v Speaker 0>fine. We never changed the area. But the

00:25:39.800 --> 00:25:41.559
<v Speaker 1>thing, if it was running before,

00:25:41.720 --> 00:25:42.840
<v Speaker 1>nothing would happen.

00:25:44.600 --> 00:25:45.320
<v Speaker 0>Okay.

00:25:45.800 --> 00:25:47.800
<v Speaker 1>Unless you delete the bots, okay, if you

00:25:47.800 --> 00:25:49.480
<v Speaker 1>want to try. So you don't need to

00:25:49.480 --> 00:25:50.840
<v Speaker 1>create a new deployment.

00:25:51.320 --> 00:25:53.320
<v Speaker 1>Just delete the bots for the WordPress.

00:25:56.895 --> 00:25:59.695
<v Speaker 0>Okay. Alright. Let me close that. So get

00:25:59.695 --> 00:26:00.414
<v Speaker 0>pods.

00:26:00.735 --> 00:26:03.934
<v Speaker 1>So the controller manager is several controllers.

00:26:04.015 --> 00:26:06.495
<v Speaker 1>One of them is for nodes, nodes controller.

00:26:06.495 --> 00:26:08.495
<v Speaker 1>One is for the replica set

00:26:09.120 --> 00:26:10.320
<v Speaker 1>among other

00:26:11.360 --> 00:26:13.039
<v Speaker 1>daemons and stuff like this.

00:26:15.680 --> 00:26:16.879
<v Speaker 1>And they are registered.

00:26:18.160 --> 00:26:19.600
<v Speaker 1>So I don't think we have a problem

00:26:19.600 --> 00:26:21.279
<v Speaker 1>with the controller manager anymore.

00:26:23.120 --> 00:26:25.855
<v Speaker 0>I am so worried about this get component.

00:26:25.855 --> 00:26:28.255
<v Speaker 1>But the bot was, it was not 10252,

00:26:28.255 --> 00:26:28.894
<v Speaker 1>was it?

00:26:29.934 --> 00:26:31.134
<v Speaker 1>The bot was,

00:26:31.535 --> 00:26:33.375
<v Speaker 1>I think I thought the bot had seven

00:26:33.375 --> 00:26:34.815
<v Speaker 1>when we did netstat.

00:26:34.895 --> 00:26:36.335
<v Speaker 0>Yeah, this might be a red herring.

00:26:37.020 --> 00:26:38.780
<v Speaker 0>Let's just say that this was deprecated in

00:26:38.780 --> 00:26:41.340
<v Speaker 0>01/19, this cluster is one nineteen,

00:26:41.820 --> 00:26:43.820
<v Speaker 0>but maybe this just doesn't work.

00:26:45.500 --> 00:26:48.220
<v Speaker 0>Maybe just doesn't report healthy here. We could

00:26:48.220 --> 00:26:49.660
<v Speaker 0>check, let's why don't we

00:26:50.485 --> 00:26:53.045
<v Speaker 0>I'm happy that our workload is running, we

00:26:53.045 --> 00:26:56.004
<v Speaker 0>fixed the Selium problem, Selium started working,

00:26:56.165 --> 00:26:58.165
<v Speaker 0>I don't think we have any pods that

00:26:58.165 --> 00:27:00.085
<v Speaker 0>are not running.

00:27:00.804 --> 00:27:03.365
<v Speaker 1>Yes. So let's do okay. Let's move on

00:27:03.365 --> 00:27:05.030
<v Speaker 0>to cluster two and then we'll see if

00:27:05.030 --> 00:27:06.950
<v Speaker 0>the get component status is fails there. And

00:27:06.950 --> 00:27:09.510
<v Speaker 0>if it does, we'll consider that just a

00:27:09.510 --> 00:27:10.630
<v Speaker 0>one nineteen thing.

00:27:11.030 --> 00:27:12.150
<v Speaker 0>And let's see if we can tackle the

00:27:12.150 --> 00:27:14.310
<v Speaker 0>next problem. And then if we need to,

00:27:14.310 --> 00:27:15.510
<v Speaker 0>we'll come back and take a look at

00:27:15.510 --> 00:27:17.270
<v Speaker 0>the other problem on this. Can you do

00:27:17.270 --> 00:27:18.230
<v Speaker 1>just for my

00:27:20.035 --> 00:27:21.955
<v Speaker 1>peace of mind, can you do cube control

00:27:21.955 --> 00:27:23.955
<v Speaker 1>get events and let's and grab for

00:27:25.155 --> 00:27:27.554
<v Speaker 1>okay. Let's see. Just

00:27:27.795 --> 00:27:29.154
<v Speaker 1>get events. It's

00:27:29.555 --> 00:27:30.515
<v Speaker 1>like

00:27:33.590 --> 00:27:34.630
<v Speaker 1>okay.

00:27:34.790 --> 00:27:36.630
<v Speaker 1>And grip minus v normal.

00:27:40.710 --> 00:27:43.590
<v Speaker 1>V only. Oh, sorry. I just added that.

00:27:43.590 --> 00:27:44.870
<v Speaker 0>It's case insensitive.

00:27:45.430 --> 00:27:46.070
<v Speaker 1>Error.

00:27:46.550 --> 00:27:46.870
<v Speaker 1>Volume.

00:27:47.355 --> 00:27:49.595
<v Speaker 1>Volume is already used. Okay. So

00:27:50.715 --> 00:27:53.674
<v Speaker 1>fifth setup network sandbox. This was four minutes.

00:27:57.835 --> 00:27:59.274
<v Speaker 1>Work sandbox.

00:27:59.755 --> 00:28:01.034
<v Speaker 0>I think So problem.

00:28:01.355 --> 00:28:03.909
<v Speaker 0>It's it's fine. But it's running, isn't it?

00:28:03.909 --> 00:28:05.029
<v Speaker 0>Yeah. Mhmm.

00:28:05.350 --> 00:28:06.149
<v Speaker 1>Okay.

00:28:08.470 --> 00:28:09.269
<v Speaker 1>Okay.

00:28:09.669 --> 00:28:11.109
<v Speaker 1>So I mean,

00:28:11.750 --> 00:28:13.269
<v Speaker 1>if I do get nodes and if I

00:28:13.269 --> 00:28:15.155
<v Speaker 1>do get bots minus a, and if I

00:28:15.155 --> 00:28:16.355
<v Speaker 1>do cluster info

00:28:17.955 --> 00:28:19.555
<v Speaker 0>We have a working cluster as far I

00:28:19.555 --> 00:28:21.155
<v Speaker 1>can And if you run and if you

00:28:21.155 --> 00:28:23.315
<v Speaker 1>run, like, a deployment and you expose the

00:28:23.315 --> 00:28:24.995
<v Speaker 1>service, let's expose the server.

00:28:26.275 --> 00:28:28.195
<v Speaker 0>There's no NGOs configured on this cluster?

00:28:29.400 --> 00:28:32.600
<v Speaker 1>Just as a service, as a cluster IP.

00:28:34.600 --> 00:28:35.960
<v Speaker 1>Expose NGINX.

00:28:39.640 --> 00:28:41.320
<v Speaker 0>Oh, I can't remember the full thing.

00:28:43.135 --> 00:28:46.095
<v Speaker 1>The server does not have resource. Expose

00:28:46.895 --> 00:28:49.135
<v Speaker 1>SVC

00:28:49.135 --> 00:28:50.495
<v Speaker 1>slash NGINX.

00:28:52.095 --> 00:28:53.215
<v Speaker 0>But I have to tell it what to

00:28:52.895 --> 00:28:55.054
<v Speaker 1>No, no, actually, we

00:28:55.775 --> 00:28:57.135
<v Speaker 1>don't have the service yet. Yes.

00:28:59.270 --> 00:29:00.230
<v Speaker 0>By

00:29:00.870 --> 00:29:04.789
<v Speaker 0>default, I think it's cluster ID. It's

00:29:04.950 --> 00:29:06.870
<v Speaker 1>clever enough to figure out the board, isn't

00:29:06.870 --> 00:29:07.110
<v Speaker 1>it?

00:29:13.035 --> 00:29:15.035
<v Speaker 1>Okay. Good. Get service.

00:29:15.195 --> 00:29:16.315
<v Speaker 1>Can you do

00:29:16.795 --> 00:29:18.715
<v Speaker 1>get endpoints for this service?

00:29:19.755 --> 00:29:21.434
<v Speaker 1>Get EB endpoints.

00:29:21.435 --> 00:29:24.315
<v Speaker 0>I just described as service. Okay. That's better

00:29:24.315 --> 00:29:27.515
<v Speaker 1>even. Yeah. Yeah. And we have endpoints. So

00:29:27.755 --> 00:29:28.315
<v Speaker 1>networking

00:29:28.610 --> 00:29:30.610
<v Speaker 1>seems to be fine, at least at the

00:29:30.610 --> 00:29:31.970
<v Speaker 1>antenna cluster level.

00:29:32.770 --> 00:29:34.930
<v Speaker 1>And creating a bot and the scheduler is

00:29:34.930 --> 00:29:36.450
<v Speaker 1>running, the API is running.

00:29:37.570 --> 00:29:38.530
<v Speaker 1>I think who

00:29:39.890 --> 00:29:41.090
<v Speaker 1>broke this cluster?

00:29:41.410 --> 00:29:43.914
<v Speaker 0>Lee Briggs, who is in Seattle, so will

00:29:43.914 --> 00:29:45.835
<v Speaker 0>not be available just now to confirm anything

00:29:45.835 --> 00:29:47.914
<v Speaker 0>for us. However, he will send a pull

00:29:47.914 --> 00:29:50.075
<v Speaker 0>request to the cluster repository to tell us

00:29:50.075 --> 00:29:51.994
<v Speaker 0>what he broke. So hopefully we'll fix Okay.

00:29:52.554 --> 00:29:53.434
<v Speaker 0>If not,

00:29:53.995 --> 00:29:55.595
<v Speaker 0>I think we did pretty well there. So

00:29:55.650 --> 00:29:56.610
<v Speaker 0>let's move Do

00:29:59.170 --> 00:30:00.210
<v Speaker 0>you want the good news or the bad

00:30:00.210 --> 00:30:00.770
<v Speaker 0>news?

00:30:03.170 --> 00:30:04.850
<v Speaker 0>So Dan's left us a comment.

00:30:05.170 --> 00:30:06.130
<v Speaker 1>We're

00:30:06.130 --> 00:30:08.210
<v Speaker 1>having fun, there is no bad news. I

00:30:08.210 --> 00:30:10.290
<v Speaker 0>fear I've opted for a less nuanced approach

00:30:10.290 --> 00:30:12.585
<v Speaker 0>and gone full sledgehammer on the cluster.

00:30:13.145 --> 00:30:15.065
<v Speaker 0>Well, I always knew you were the wild

00:30:15.065 --> 00:30:18.665
<v Speaker 0>card then, so that's alright. So Daniel is

00:30:18.665 --> 00:30:20.825
<v Speaker 1>the one who broke this cluster? He is.

00:30:21.785 --> 00:30:23.144
<v Speaker 0>Broke Okay, thank you Daniel.

00:30:23.465 --> 00:30:24.025
<v Speaker 1>I appreciate.

00:30:25.700 --> 00:30:27.460
<v Speaker 0>So let's I just want you to be

00:30:27.460 --> 00:30:28.260
<v Speaker 1>realistic,

00:30:28.420 --> 00:30:29.460
<v Speaker 1>so that we can

00:30:30.580 --> 00:30:32.580
<v Speaker 1>so maybe we can actually learn something out

00:30:32.580 --> 00:30:34.179
<v Speaker 1>of it. Okay, let's try.

00:30:36.980 --> 00:30:37.700
<v Speaker 1>Time man, time Can

00:30:38.900 --> 00:30:40.020
<v Speaker 1>you use minus V?

00:30:41.645 --> 00:30:44.524
<v Speaker 1>But it looks like okay. Can you do

00:30:45.965 --> 00:30:47.565
<v Speaker 1>kubectl config?

00:30:49.085 --> 00:30:50.845
<v Speaker 1>I want to view.

00:30:52.365 --> 00:30:54.685
<v Speaker 1>Okay. Can we

00:30:55.450 --> 00:30:57.609
<v Speaker 1>curl curl the address?

00:31:02.090 --> 00:31:02.729
<v Speaker 1>Yeah.

00:31:03.130 --> 00:31:04.649
<v Speaker 1>6443

00:31:07.049 --> 00:31:08.649
<v Speaker 1>slash A B I or

00:31:08.890 --> 00:31:11.695
<v Speaker 1>Yeah. Minus LB. I love minus LB.

00:31:12.415 --> 00:31:13.455
<v Speaker 1>So basically,

00:31:14.095 --> 00:31:15.695
<v Speaker 1>it looks like we don't have an ABI

00:31:15.695 --> 00:31:16.414
<v Speaker 1>server.

00:31:16.895 --> 00:31:18.735
<v Speaker 0>Alright. Let's get on this note then.

00:31:19.375 --> 00:31:20.174
<v Speaker 0>Okay.

00:31:20.975 --> 00:31:22.495
<v Speaker 0>Clustered to

00:31:22.815 --> 00:31:24.255
<v Speaker 0>I have a lot of projects here.

00:31:25.799 --> 00:31:26.999
<v Speaker 0>Cluster oh, right.

00:31:27.480 --> 00:31:30.039
<v Speaker 1>Only issues I had with API servers in

00:31:30.039 --> 00:31:32.359
<v Speaker 1>production was from the load balancer.

00:31:32.760 --> 00:31:35.559
<v Speaker 1>That the the load balancer was set one

00:31:35.559 --> 00:31:36.999
<v Speaker 1>time as the

00:31:37.480 --> 00:31:40.045
<v Speaker 1>layer seven load balancer, not a network load

00:31:40.045 --> 00:31:40.845
<v Speaker 1>balancer.

00:31:41.885 --> 00:31:42.605
<v Speaker 1>And

00:31:43.325 --> 00:31:44.525
<v Speaker 1>another time,

00:31:45.885 --> 00:31:46.605
<v Speaker 1>basically,

00:31:46.685 --> 00:31:49.085
<v Speaker 1>during the installation, this was OpenShift.

00:31:49.165 --> 00:31:51.645
<v Speaker 1>So OpenShift starts as a cluster ABI. You

00:31:51.645 --> 00:31:53.885
<v Speaker 1>have a node that is a management node,

00:31:54.125 --> 00:31:55.820
<v Speaker 1>and And they forgot to include this management

00:31:55.820 --> 00:31:56.380
<v Speaker 1>node

00:31:56.700 --> 00:31:58.140
<v Speaker 1>as part of the

00:31:58.700 --> 00:31:59.580
<v Speaker 1>back ends.

00:32:00.940 --> 00:32:02.220
<v Speaker 0>We have no SSH. We

00:32:04.060 --> 00:32:05.900
<v Speaker 1>don't have SSH? No, we're going to have

00:32:05.900 --> 00:32:07.014
<v Speaker 0>to go in the back door.

00:32:09.495 --> 00:32:11.655
<v Speaker 0>Fortunately, could expand But yeah. Has an outbound

00:32:11.655 --> 00:32:13.895
<v Speaker 0>console, so that's gonna take us over the

00:32:13.895 --> 00:32:14.934
<v Speaker 0>private link.

00:32:19.090 --> 00:32:21.730
<v Speaker 1>On a non standard on a standard board,

00:32:21.730 --> 00:32:22.690
<v Speaker 1>he said, okay.

00:32:25.090 --> 00:32:25.489
<v Speaker 0>I

00:32:26.610 --> 00:32:28.049
<v Speaker 0>guess we could port scan it or I

00:32:28.049 --> 00:32:29.649
<v Speaker 0>could just go in the back door.

00:32:29.970 --> 00:32:32.289
<v Speaker 1>Does he mean non standard or he means

00:32:32.289 --> 00:32:33.169
<v Speaker 1>standard board?

00:32:33.695 --> 00:32:35.295
<v Speaker 0>This machine's also been up for more than

00:32:35.295 --> 00:32:37.534
<v Speaker 0>twenty four hours, so I don't have

00:32:38.415 --> 00:32:40.815
<v Speaker 0>root password to actually log in here.

00:32:41.215 --> 00:32:42.815
<v Speaker 0>So we've got two options.

00:32:44.895 --> 00:32:46.335
<v Speaker 0>How do I quit?

00:32:48.255 --> 00:32:49.730
<v Speaker 1>Turn it off.

00:32:51.090 --> 00:32:53.810
<v Speaker 0>Thought control square bracket was my

00:32:54.610 --> 00:32:56.850
<v Speaker 0>get out of here. Yes, yes, in general,

00:32:56.850 --> 00:32:57.330
<v Speaker 1>yes.

00:32:58.050 --> 00:33:00.370
<v Speaker 1>Let's just open up. Control square bracket dot,

00:33:00.370 --> 00:33:02.450
<v Speaker 1>control square bracket dot usually.

00:33:03.810 --> 00:33:04.210
<v Speaker 0>Yeah.

00:33:07.065 --> 00:33:08.745
<v Speaker 0>How do I open a new tab on

00:33:08.745 --> 00:33:09.625
<v Speaker 0>TMux?

00:33:09.865 --> 00:33:11.705
<v Speaker 1>Control B C.

00:33:14.585 --> 00:33:16.184
<v Speaker 0>Alright, okay, let's just use this.

00:33:17.945 --> 00:33:19.385
<v Speaker 0>Should we port scan this machine and see

00:33:19.385 --> 00:33:21.890
<v Speaker 0>if we get anything? Okay, go ahead. And

00:33:21.890 --> 00:33:22.610
<v Speaker 1>Matt,

00:33:23.090 --> 00:33:26.049
<v Speaker 1>do you think, let's just the

00:33:26.370 --> 00:33:27.490
<v Speaker 1>normal range.

00:33:27.730 --> 00:33:29.970
<v Speaker 1>Or do you think he's creative?

00:33:30.530 --> 00:33:31.649
<v Speaker 0>I have no idea.

00:33:32.770 --> 00:33:34.050
<v Speaker 0>No idea what he's done.

00:33:35.285 --> 00:33:37.205
<v Speaker 0>It's blocking ICN. You

00:33:38.885 --> 00:33:42.245
<v Speaker 1>can try nmap minus s u, s capital

00:33:42.245 --> 00:33:42.965
<v Speaker 1>u.

00:33:43.525 --> 00:33:45.765
<v Speaker 1>So we do it here. You are requested

00:33:45.765 --> 00:33:48.245
<v Speaker 1>to scan, which requires ah, you need sudo

00:33:48.245 --> 00:33:50.470
<v Speaker 1>for that. Also the first one probably.

00:33:55.110 --> 00:33:56.869
<v Speaker 0>I don't like it today, Dan.

00:34:00.549 --> 00:34:02.309
<v Speaker 1>So this is scanning UDP.

00:34:02.950 --> 00:34:04.309
<v Speaker 1>There is another one,

00:34:05.029 --> 00:34:06.154
<v Speaker 1>SSP, b I think

00:34:06.795 --> 00:34:07.995
<v Speaker 1>that basically

00:34:07.995 --> 00:34:09.275
<v Speaker 1>doesn't send the

00:34:10.315 --> 00:34:11.755
<v Speaker 1>the first the

00:34:11.755 --> 00:34:14.074
<v Speaker 1>first sync packet. It starts with sending the

00:34:14.074 --> 00:34:16.235
<v Speaker 1>second. I've got an idea. He

00:34:16.715 --> 00:34:17.915
<v Speaker 0>he may have done this in all of

00:34:17.915 --> 00:34:19.435
<v Speaker 0>the control plane nodes, I bet he hasn't

00:34:19.435 --> 00:34:20.795
<v Speaker 0>done it on the worker nodes. I don't

00:34:20.795 --> 00:34:22.450
<v Speaker 0>know if he's that evil, so why don't

00:34:22.450 --> 00:34:24.210
<v Speaker 0>we just try sneaking in through.

00:34:25.410 --> 00:34:27.250
<v Speaker 1>You have a trust between them?

00:34:28.130 --> 00:34:30.530
<v Speaker 0>No I'll have to forward my SSH if

00:34:30.530 --> 00:34:31.890
<v Speaker 0>I can remember how to do that but

00:34:31.890 --> 00:34:33.010
<v Speaker 0>I wanna see if I can even get

00:34:33.010 --> 00:34:34.210
<v Speaker 0>on one of these nodes.

00:34:35.804 --> 00:34:37.244
<v Speaker 0>No, he has done it on all of

00:34:37.244 --> 00:34:38.605
<v Speaker 0>them. Of course he did.

00:34:41.324 --> 00:34:42.364
<v Speaker 1>Okay.

00:34:45.964 --> 00:34:46.764
<v Speaker 1>Nonstandard.

00:34:46.764 --> 00:34:48.045
<v Speaker 1>Okay. He's saying nonstandard.

00:34:51.230 --> 00:34:52.989
<v Speaker 1>Let me just a second.

00:34:55.230 --> 00:34:57.470
<v Speaker 0>I mean, I would pick 600666.

00:34:57.950 --> 00:34:58.670
<v Speaker 1>I

00:34:58.990 --> 00:35:01.790
<v Speaker 1>would pick 20202121.

00:35:04.270 --> 00:35:05.310
<v Speaker 1>But we can

00:35:06.510 --> 00:35:07.935
<v Speaker 1>scan scan using

00:35:11.615 --> 00:35:12.655
<v Speaker 0>Okay.

00:35:17.935 --> 00:35:19.695
<v Speaker 0>I'm gonna take one of the non important

00:35:19.695 --> 00:35:20.175
<v Speaker 0>nodes,

00:35:20.680 --> 00:35:23.880
<v Speaker 0>reboot them into a rescue operating system.

00:35:24.200 --> 00:35:25.720
<v Speaker 0>So that we get on it and poke

00:35:25.720 --> 00:35:26.760
<v Speaker 0>around the disk.

00:35:27.160 --> 00:35:29.640
<v Speaker 1>Okay with Just a second. Let's

00:35:29.640 --> 00:35:30.440
<v Speaker 1>try.

00:35:30.600 --> 00:35:32.200
<v Speaker 1>Anyway, this I'll just this is just a

00:35:32.200 --> 00:35:33.525
<v Speaker 0>worker node. So I'm gonna let that do

00:35:33.525 --> 00:35:35.285
<v Speaker 0>that. Oh, you are in the worker node?

00:35:35.285 --> 00:35:37.204
<v Speaker 1>Are you in the worker node? No, no,

00:35:37.204 --> 00:35:38.964
<v Speaker 0>no. I'm rebooting a worker node into a

00:35:38.964 --> 00:35:40.805
<v Speaker 0>rescue of a ram based operating system, so

00:35:40.805 --> 00:35:42.085
<v Speaker 0>we can get on and poke around. So

00:35:42.085 --> 00:35:43.285
<v Speaker 0>while that does that, we can try a

00:35:43.285 --> 00:35:45.365
<v Speaker 0>few other things this way.

00:35:46.085 --> 00:35:47.365
<v Speaker 0>So do you wanna try that

00:35:48.130 --> 00:35:49.330
<v Speaker 0>end map again?

00:35:51.810 --> 00:35:53.650
<v Speaker 0>He says we are so close with those

00:35:53.650 --> 00:35:54.610
<v Speaker 0>port numbers.

00:35:57.890 --> 00:35:59.170
<v Speaker 1>Ah, 20.

00:36:03.645 --> 00:36:05.965
<v Speaker 1>Not not as you. SS. To to

00:36:07.085 --> 00:36:08.205
<v Speaker 0>I don't know if he's been nice to

00:36:08.205 --> 00:36:08.925
<v Speaker 0>us here.

00:36:09.485 --> 00:36:11.325
<v Speaker 1>20 one, 20 one usually.

00:36:15.485 --> 00:36:18.180
<v Speaker 1>Or 20 two, 20 two. Yeah. What happened

00:36:18.180 --> 00:36:19.220
<v Speaker 1>to 22?

00:36:19.300 --> 00:36:22.740
<v Speaker 1>There is an n map scanner.

00:36:34.755 --> 00:36:36.515
<v Speaker 0>Let's see if this is in its rescue

00:36:36.515 --> 00:36:37.315
<v Speaker 0>or less yet.

00:36:43.640 --> 00:36:45.400
<v Speaker 0>No. It'll take a couple of minutes.

00:36:46.040 --> 00:36:48.280
<v Speaker 0>Okay. So he has just sophisticated the port

00:36:48.280 --> 00:36:50.680
<v Speaker 0>20202222.

00:36:51.720 --> 00:36:53.480
<v Speaker 0>Doesn't seem to work, but he seems to

00:36:53.480 --> 00:36:57.560
<v Speaker 0>suggest You mentioned the

00:36:55.995 --> 00:36:57.355
<v Speaker 1>try triple six.

00:36:59.035 --> 00:37:00.795
<v Speaker 0>I might have used the wrong IP.

00:37:01.675 --> 00:37:02.715
<v Speaker 0>Alright.

00:37:04.155 --> 00:37:05.675
<v Speaker 0>We're on a node.

00:37:07.195 --> 00:37:09.690
<v Speaker 1>Okay. Which node is that? Control

00:37:09.450 --> 00:37:09.850
<v Speaker 1>Control

00:37:11.850 --> 00:37:13.850
<v Speaker 1>So what is it? 2222,

00:37:13.850 --> 00:37:14.810
<v Speaker 1>correct? Yes.

00:37:16.090 --> 00:37:16.810
<v Speaker 1>Okay.

00:37:17.130 --> 00:37:18.250
<v Speaker 1>Can we do,

00:37:18.970 --> 00:37:20.890
<v Speaker 1>what is it, Docker or Cryo, or what

00:37:20.890 --> 00:37:23.765
<v Speaker 1>kind of Container D. Can you do container

00:37:23.765 --> 00:37:26.325
<v Speaker 1>d? Okay. Can you do cryo control bots?

00:37:34.325 --> 00:37:35.205
<v Speaker 1>Can we do

00:37:36.485 --> 00:37:39.045
<v Speaker 1>we do system control and see that container

00:37:38.940 --> 00:37:39.820
<v Speaker 1>is running?

00:37:43.579 --> 00:37:45.339
<v Speaker 1>System d status

00:37:45.339 --> 00:37:47.980
<v Speaker 1>container d. You did the whole stuff.

00:37:48.619 --> 00:37:49.900
<v Speaker 1>Container d. Yeah.

00:37:50.380 --> 00:37:52.140
<v Speaker 1>Okay. Active, running,

00:37:52.300 --> 00:37:52.940
<v Speaker 1>which is good.

00:37:54.285 --> 00:37:54.925
<v Speaker 1>And

00:37:55.805 --> 00:37:57.645
<v Speaker 1>okay. Can we see the cubelet?

00:38:00.045 --> 00:38:02.285
<v Speaker 1>No. Can we check the again, with the

00:38:02.285 --> 00:38:02.765
<v Speaker 1>sys with

00:38:05.005 --> 00:38:05.484
<v Speaker 1>yeah.

00:38:08.240 --> 00:38:09.040
<v Speaker 1>Failed.

00:38:10.319 --> 00:38:11.359
<v Speaker 1>Loaded.

00:38:11.440 --> 00:38:12.880
<v Speaker 1>Okay. Enabled.

00:38:13.680 --> 00:38:14.240
<v Speaker 1>And

00:38:14.799 --> 00:38:17.440
<v Speaker 1>activating auto restart. So basically, it's trying to

00:38:17.440 --> 00:38:20.079
<v Speaker 1>restart and it cannot restart. Certificates.

00:38:20.079 --> 00:38:21.935
<v Speaker 0>Of course it is. Oh, man. I told

00:38:21.935 --> 00:38:23.455
<v Speaker 1>you there would be certificates.

00:38:25.215 --> 00:38:26.975
<v Speaker 1>Okay. Can we check the

00:38:27.455 --> 00:38:31.135
<v Speaker 1>configuration directory, varlib? What does it say? Certificate?

00:38:31.215 --> 00:38:32.015
<v Speaker 0>Yep. We're here.

00:38:35.250 --> 00:38:36.370
<v Speaker 1>Certificate.

00:38:38.610 --> 00:38:41.170
<v Speaker 1>Kubelet client currently loading.

00:38:42.610 --> 00:38:43.250
<v Speaker 1>Okay.

00:38:43.730 --> 00:38:45.650
<v Speaker 0>I see it looks like the search were

00:38:45.650 --> 00:38:46.370
<v Speaker 0>okay.

00:38:46.530 --> 00:38:48.210
<v Speaker 0>Right? I do actually see an error message

00:38:48.210 --> 00:38:49.570
<v Speaker 0>in the journal v log there.

00:38:51.345 --> 00:38:52.865
<v Speaker 1>Can you highlight it?

00:38:56.545 --> 00:38:58.385
<v Speaker 1>Can you highlight the error message that you

00:38:58.385 --> 00:39:00.385
<v Speaker 1>saw? No, there isn't one. I I see

00:39:00.385 --> 00:39:01.665
<v Speaker 0>the search and got worried.

00:39:02.145 --> 00:39:05.105
<v Speaker 1>Run journal control minus x. Run journal control

00:39:05.105 --> 00:39:06.385
<v Speaker 1>minus u cubelet.

00:39:07.790 --> 00:39:10.510
<v Speaker 0>Do you wanna type? Sorry, messed up. Yes.

00:39:13.630 --> 00:39:14.910
<v Speaker 0>Oh yeah, that's

00:39:17.070 --> 00:39:18.350
<v Speaker 0>You'll need to add a note pager.

00:39:30.285 --> 00:39:30.684
<v Speaker 0>Fun.

00:39:34.260 --> 00:39:35.460
<v Speaker 1>We reached there.

00:39:37.780 --> 00:39:40.100
<v Speaker 1>It was up for twenty four hours. Okay.

00:39:40.100 --> 00:39:42.420
<v Speaker 1>Keyblade service failed with exit code.

00:39:42.980 --> 00:39:44.820
<v Speaker 1>Oh, I need

00:40:03.570 --> 00:40:06.530
<v Speaker 1>What was the exit no major. Did we?

00:40:16.225 --> 00:40:18.385
<v Speaker 1>Code dot main process.

00:40:22.545 --> 00:40:24.305
<v Speaker 0>I wanna see if our API server is

00:40:24.305 --> 00:40:24.945
<v Speaker 0>okay.

00:40:25.905 --> 00:40:28.470
<v Speaker 1>It will not be okay because the cubelet

00:40:28.470 --> 00:40:29.910
<v Speaker 1>is the one that starts it.

00:40:33.190 --> 00:40:34.150
<v Speaker 1>Basically, if you the cubelet No,

00:40:36.550 --> 00:40:38.550
<v Speaker 1>it's not running. It's restarting. If you look

00:40:38.550 --> 00:40:39.350
<v Speaker 1>at the

00:40:39.590 --> 00:40:41.805
<v Speaker 1>you look at system control status.

00:40:41.965 --> 00:40:43.565
<v Speaker 1>So basically, there is an error in the

00:40:43.565 --> 00:40:45.405
<v Speaker 1>configuration file, most likely.

00:40:46.205 --> 00:40:48.525
<v Speaker 1>If you look at the activating auto restart,

00:40:48.525 --> 00:40:49.725
<v Speaker 1>this is your key.

00:40:51.565 --> 00:40:53.245
<v Speaker 1>It means, in six seconds,

00:40:54.099 --> 00:40:55.220
<v Speaker 1>It keeps restarting

00:40:55.859 --> 00:40:57.700
<v Speaker 1>it, but it hits the same problem.

00:40:58.180 --> 00:41:00.580
<v Speaker 1>And this is one good thing about systemd,

00:41:00.900 --> 00:41:01.700
<v Speaker 1>that it

00:41:02.020 --> 00:41:03.940
<v Speaker 1>will go forever. It will until

00:41:04.020 --> 00:41:06.420
<v Speaker 1>the problem is fixed, hopefully. There you go.

00:41:06.260 --> 00:41:06.900
<v Speaker 1>This is the everybody.

00:41:07.460 --> 00:41:08.725
<v Speaker 0>The one good thing of

00:41:10.405 --> 00:41:12.885
<v Speaker 1>It's the IT crowd principle in

00:41:12.885 --> 00:41:13.525
<v Speaker 1>action.

00:41:13.685 --> 00:41:15.765
<v Speaker 1>Restart it. Restart it until it's over.

00:41:16.565 --> 00:41:18.005
<v Speaker 0>So we take a look at the Kubelet

00:41:18.005 --> 00:41:21.365
<v Speaker 0>static manifest? Yeah. Yeah. And not not it's

00:41:21.365 --> 00:41:23.220
<v Speaker 1>in the var lib.

00:41:23.540 --> 00:41:25.460
<v Speaker 1>Yeah. You see it? A var lib kubelet.

00:41:25.780 --> 00:41:27.540
<v Speaker 1>No. A var lib kubelet.

00:41:28.580 --> 00:41:29.140
<v Speaker 1>LS

00:41:29.940 --> 00:41:31.620
<v Speaker 1>config dot yaml.

00:41:33.060 --> 00:41:33.700
<v Speaker 0>Okay. Now,

00:41:37.295 --> 00:41:39.455
<v Speaker 1>cluster DNS, cluster local.

00:41:41.375 --> 00:41:42.655
<v Speaker 1>One thing we can do,

00:41:43.295 --> 00:41:44.575
<v Speaker 1>we can grab the

00:41:44.815 --> 00:41:46.735
<v Speaker 1>config from the other one and try here.

00:41:47.775 --> 00:41:50.255
<v Speaker 0>Did we actually see an error message here?

00:41:50.255 --> 00:41:52.975
<v Speaker 1>There is an error message, but I'm not

00:41:52.680 --> 00:41:53.320
<v Speaker 1>sure.

00:41:53.480 --> 00:41:54.680
<v Speaker 0>Let's see if we can.

00:41:54.920 --> 00:41:57.160
<v Speaker 1>I couldn't find the code. What code was

00:41:57.160 --> 00:41:57.640
<v Speaker 1>it?

00:41:59.240 --> 00:42:00.680
<v Speaker 1>It says failed.

00:42:02.599 --> 00:42:06.440
<v Speaker 1>Okay, another way we can look at the

00:42:08.875 --> 00:42:10.315
<v Speaker 0>Wow. That's a lot of

00:42:11.595 --> 00:42:12.315
<v Speaker 1>Yes.

00:42:16.235 --> 00:42:18.235
<v Speaker 1>There's a log file also. I mean, other

00:42:18.235 --> 00:42:20.075
<v Speaker 1>than join and control where

00:42:21.115 --> 00:42:23.435
<v Speaker 1>we can do grab against

00:42:23.240 --> 00:42:24.119
<v Speaker 1>has

00:42:24.119 --> 00:42:26.280
<v Speaker 1>been duplicated. Ah, here. We need to remove

00:42:26.280 --> 00:42:27.080
<v Speaker 1>this flag.

00:42:30.440 --> 00:42:32.040
<v Speaker 0>I don't think that would stop the cubelet

00:42:32.040 --> 00:42:33.160
<v Speaker 0>starting, would it?

00:42:34.280 --> 00:42:35.480
<v Speaker 1>Let's see.

00:42:35.960 --> 00:42:36.839
<v Speaker 1>What does it say?

00:42:37.765 --> 00:42:39.765
<v Speaker 1>The parameter should be set by the config

00:42:39.765 --> 00:42:43.205
<v Speaker 1>config flag. Let's see these flags. Are there

00:42:43.205 --> 00:42:43.925
<v Speaker 1>or not?

00:42:44.725 --> 00:42:47.365
<v Speaker 0>He says it's right in front of us.

00:42:47.685 --> 00:42:49.845
<v Speaker 0>So we're looking right at it. Show the

00:42:49.845 --> 00:42:51.605
<v Speaker 1>result. Exit code. Main process.

00:42:53.160 --> 00:42:55.400
<v Speaker 1>Yeah. It's always right in front of us.

00:42:57.319 --> 00:42:58.440
<v Speaker 1>It's mains.

00:42:59.800 --> 00:43:03.560
<v Speaker 1>Main process exited here. Okay. So let's

00:43:05.079 --> 00:43:06.200
<v Speaker 0>let's see if that flag is here.

00:43:07.935 --> 00:43:10.095
<v Speaker 1>Eviction. Eviction. Eviction.

00:43:11.055 --> 00:43:13.295
<v Speaker 1>Okay. Can you comment this out?

00:43:15.135 --> 00:43:16.975
<v Speaker 1>Or make a copy of the file? That's

00:43:16.975 --> 00:43:18.175
<v Speaker 0>not the same one though, right?

00:43:23.140 --> 00:43:24.020
<v Speaker 0>Grip.

00:43:24.500 --> 00:43:26.020
<v Speaker 0>Effection.

00:43:27.220 --> 00:43:28.900
<v Speaker 0>Yeah. That's not the same one.

00:43:30.260 --> 00:43:32.580
<v Speaker 1>Effection hard has been deprecated.

00:43:32.660 --> 00:43:34.580
<v Speaker 1>This okay. Maybe okay.

00:43:35.035 --> 00:43:37.675
<v Speaker 1>Let's find where is the cubelet grip

00:43:39.915 --> 00:43:42.235
<v Speaker 1>grip config dot yaml on this one.

00:43:43.835 --> 00:43:46.075
<v Speaker 0>What does this message mean? CPU

00:43:46.395 --> 00:43:47.355
<v Speaker 1>Can you do

00:43:48.250 --> 00:43:51.370
<v Speaker 1>where? Sorry. We've got a c groups per

00:43:51.370 --> 00:43:54.010
<v Speaker 0>cause enabled, but secret group is not specified

00:43:54.010 --> 00:43:55.290
<v Speaker 0>using slash.

00:43:55.930 --> 00:43:56.970
<v Speaker 1>Can you highlight it?

00:43:57.290 --> 00:43:59.290
<v Speaker 0>Yeah. And we've got the swap header too.

00:44:02.085 --> 00:44:03.285
<v Speaker 1>Swap error.

00:44:03.605 --> 00:44:05.925
<v Speaker 1>If this is a cube admin cluster?

00:44:06.325 --> 00:44:08.245
<v Speaker 0>Yeah. We should just turn swap off. Right?

00:44:08.405 --> 00:44:10.245
<v Speaker 0>Yes. If it's cube admin, it should be

00:44:10.245 --> 00:44:10.885
<v Speaker 1>off.

00:44:12.965 --> 00:44:15.750
<v Speaker 0>What do we have as well? Minus

00:44:15.750 --> 00:44:16.790
<v Speaker 1>a, I guess.

00:44:19.190 --> 00:44:21.110
<v Speaker 0>Let's see if that restarts our kubelet.

00:44:21.350 --> 00:44:23.350
<v Speaker 1>But I want to see the system control.

00:44:23.350 --> 00:44:25.190
<v Speaker 1>I just want to see if the configuration

00:44:25.190 --> 00:44:27.110
<v Speaker 1>file is in a different place than normal.

00:44:27.110 --> 00:44:27.910
<v Speaker 1>So you see here.

00:44:28.485 --> 00:44:30.325
<v Speaker 0>The kubel is running. Oh,

00:44:32.165 --> 00:44:33.925
<v Speaker 1>okay. So just swap.

00:44:35.685 --> 00:44:38.965
<v Speaker 1>That's really silly, no? We complicated it.

00:44:39.365 --> 00:44:40.805
<v Speaker 0>I think we we were good down a

00:44:40.805 --> 00:44:42.485
<v Speaker 0>rabbit hole there. Okay. So let's So the

00:44:42.485 --> 00:44:45.420
<v Speaker 1>second principle is keep it simple, I think.

00:44:46.540 --> 00:44:48.700
<v Speaker 1>And don't jump to conclusions right away.

00:44:49.180 --> 00:44:51.339
<v Speaker 0>Alright. Let's see if we got an API

00:44:51.339 --> 00:44:52.380
<v Speaker 0>server at least.

00:44:53.420 --> 00:44:55.420
<v Speaker 1>So what does he say? Ah, okay.

00:44:55.820 --> 00:44:59.020
<v Speaker 1>Please disable swap. Who's that? Oh, I mean.

00:45:03.355 --> 00:45:05.035
<v Speaker 0>Alright. So we're I mean, our API server

00:45:05.035 --> 00:45:06.474
<v Speaker 0>is still broken, so bring them back on

00:45:06.474 --> 00:45:09.035
<v Speaker 0>the node. No. No. Can you go and

00:45:09.035 --> 00:45:10.875
<v Speaker 1>check if the bots start running now?

00:45:12.520 --> 00:45:13.800
<v Speaker 0>Check if what's running?

00:45:14.600 --> 00:45:16.760
<v Speaker 1>Can we see on the the master node,

00:45:16.760 --> 00:45:17.640
<v Speaker 1>can we see the

00:45:18.360 --> 00:45:20.360
<v Speaker 1>cubelet has started the bots?

00:45:23.880 --> 00:45:25.880
<v Speaker 1>Okay. Can we do docker b s? There

00:45:25.880 --> 00:45:27.800
<v Speaker 1>is no docker, so basically, try control b

00:45:27.800 --> 00:45:27.960
<v Speaker 1>s.

00:45:32.065 --> 00:45:34.065
<v Speaker 1>Oh, there is no okay. Can we restart

00:45:34.065 --> 00:45:36.305
<v Speaker 1>the container container d?

00:45:40.785 --> 00:45:41.105
<v Speaker 1>System.

00:45:44.650 --> 00:45:45.850
<v Speaker 1>Good. Good. Good.

00:45:46.650 --> 00:45:48.730
<v Speaker 1>Can we check the status of the container

00:45:48.730 --> 00:45:50.090
<v Speaker 1>d? It should show that.

00:45:52.170 --> 00:45:54.170
<v Speaker 0>Looks alright. Okay. Yep.

00:45:55.605 --> 00:45:56.405
<v Speaker 1>Okay.

00:45:56.725 --> 00:45:58.645
<v Speaker 1>So it was a container.

00:45:58.965 --> 00:45:59.525
<v Speaker 1>Okay.

00:46:00.405 --> 00:46:01.605
<v Speaker 0>API server's

00:46:01.605 --> 00:46:02.485
<v Speaker 0>been running.

00:46:03.045 --> 00:46:04.405
<v Speaker 1>Can you try try

00:46:04.805 --> 00:46:05.685
<v Speaker 1>control b s?

00:46:11.130 --> 00:46:13.130
<v Speaker 1>So basically, Cry Control BS will show us

00:46:13.130 --> 00:46:14.170
<v Speaker 1>the container images.

00:46:21.734 --> 00:46:24.055
<v Speaker 1>I mean, the bot is running.

00:46:24.934 --> 00:46:25.335
<v Speaker 1>Process

00:46:25.895 --> 00:46:26.775
<v Speaker 1>so

00:46:28.454 --> 00:46:30.775
<v Speaker 1>can you do cube control status,

00:46:30.775 --> 00:46:33.015
<v Speaker 1>the container d? Let's see again.

00:46:37.520 --> 00:46:40.240
<v Speaker 1>Yeah. Status, container d. Good.

00:46:40.560 --> 00:46:41.920
<v Speaker 1>Okay. So

00:46:42.240 --> 00:46:43.360
<v Speaker 1>active running

00:46:44.000 --> 00:46:45.840
<v Speaker 1>and basically

00:46:46.525 --> 00:46:48.765
<v Speaker 1>looks good. Can we do Jordan control minus

00:46:48.765 --> 00:46:49.405
<v Speaker 1>u?

00:46:49.885 --> 00:46:52.445
<v Speaker 1>Jordan control minus u and container d.

00:46:53.965 --> 00:46:57.325
<v Speaker 1>No major, and maybe follow minus f also.

00:47:02.210 --> 00:47:02.930
<v Speaker 1>So

00:47:09.250 --> 00:47:11.650
<v Speaker 1>you want to try from the other tab

00:47:11.650 --> 00:47:13.890
<v Speaker 1>on TMax to check the cube controller? It

00:47:13.890 --> 00:47:14.530
<v Speaker 1>should work now.

00:47:15.145 --> 00:47:16.345
<v Speaker 0>It doesn't.

00:47:16.585 --> 00:47:18.985
<v Speaker 0>But It doesn't? He did joke about IP

00:47:18.985 --> 00:47:20.425
<v Speaker 0>table rules at the start.

00:47:24.265 --> 00:47:24.505
<v Speaker 0>Yeah.

00:47:28.210 --> 00:47:30.450
<v Speaker 1>Yeah. The problem with IP rules is that

00:47:30.450 --> 00:47:32.690
<v Speaker 1>there are too much. Queue firewall

00:47:33.170 --> 00:47:34.450
<v Speaker 1>anywhere anywhere.

00:47:36.530 --> 00:47:38.370
<v Speaker 0>So we got

00:47:43.785 --> 00:47:45.385
<v Speaker 0>Yeah. We've got this.

00:47:48.265 --> 00:47:49.305
<v Speaker 1>Which one?

00:47:49.945 --> 00:47:52.105
<v Speaker 0>Nothing. Nothing yet. Start looking.

00:47:56.160 --> 00:47:56.880
<v Speaker 1>That's

00:47:57.040 --> 00:47:57.680
<v Speaker 1>oh.

00:48:03.280 --> 00:48:04.240
<v Speaker 1>You did

00:48:06.240 --> 00:48:07.200
<v Speaker 1>the main

00:48:07.520 --> 00:48:08.480
<v Speaker 1>part is

00:48:09.839 --> 00:48:10.240
<v Speaker 1>startup.

00:48:18.645 --> 00:48:24.085
<v Speaker 0>I hate IP tables. Let's

00:48:27.339 --> 00:48:28.620
<v Speaker 1>Okay. Let's

00:48:30.619 --> 00:48:31.500
<v Speaker 1>Okay.

00:48:34.540 --> 00:48:36.700
<v Speaker 1>Is it I b system control?

00:48:37.420 --> 00:48:39.740
<v Speaker 1>And let's check if firewall d is on.

00:48:42.275 --> 00:48:44.835
<v Speaker 1>What what what kind of system is it?

00:48:44.835 --> 00:48:47.635
<v Speaker 1>Status? It went to USWR.

00:48:47.875 --> 00:48:48.675
<v Speaker 0>Okay.

00:48:48.995 --> 00:48:50.355
<v Speaker 0>And we've all the rules We

00:48:52.275 --> 00:48:54.860
<v Speaker 0>could see the allow rule for Port 2222.

00:48:56.860 --> 00:48:57.740
<v Speaker 0>Let's just

00:48:58.060 --> 00:48:59.660
<v Speaker 0>go through the last. Let's see.

00:49:09.115 --> 00:49:10.475
<v Speaker 1>Okay.

00:49:11.194 --> 00:49:13.434
<v Speaker 1>Let's try to find the Should we just

00:49:13.434 --> 00:49:15.434
<v Speaker 0>add a rule to just to load that?

00:49:15.434 --> 00:49:16.155
<v Speaker 1>No. I

00:49:17.994 --> 00:49:20.555
<v Speaker 1>want to check

00:49:21.100 --> 00:49:22.460
<v Speaker 1>6443.

00:49:23.500 --> 00:49:25.900
<v Speaker 1>Can I do a slash 6443?

00:49:25.900 --> 00:49:28.140
<v Speaker 1>Okay. I shouldn't actually. I don't think we'll

00:49:28.140 --> 00:49:29.500
<v Speaker 0>have a rule to allow that. I'm assuming

00:49:29.500 --> 00:49:30.700
<v Speaker 0>we've got some very

00:49:32.460 --> 00:49:34.540
<v Speaker 0>heavy handed dropping going on here. So why

00:49:34.540 --> 00:49:36.460
<v Speaker 0>don't we just add a rule to allow

00:49:35.895 --> 00:49:38.135
<v Speaker 0>that port and then see.

00:49:38.855 --> 00:49:41.655
<v Speaker 1>But why okay. Can we do

00:49:42.375 --> 00:49:44.695
<v Speaker 1>can we do a trace against a trace?

00:49:45.895 --> 00:49:47.335
<v Speaker 0>Where did our API server go?

00:49:54.750 --> 00:49:56.350
<v Speaker 0>That was running a minute ago.

00:49:57.630 --> 00:49:58.510
<v Speaker 1>So

00:50:00.270 --> 00:50:03.630
<v Speaker 1>somebody is asking, Daniel, he's saying disable UFW.

00:50:03.630 --> 00:50:06.510
<v Speaker 1>Is UFW like on top of IB tables?

00:50:06.510 --> 00:50:07.710
<v Speaker 1>I'm not sure about that.

00:50:08.454 --> 00:50:10.535
<v Speaker 0>Yes. We're looking at the rules for it

00:50:10.535 --> 00:50:11.895
<v Speaker 0>right now and I could disable it, but

00:50:11.895 --> 00:50:13.255
<v Speaker 0>I thought that would be a bit heavy

00:50:13.255 --> 00:50:15.015
<v Speaker 0>handed too. Figured we could just allow the

00:50:15.015 --> 00:50:16.775
<v Speaker 0>port, but sure.

00:50:16.775 --> 00:50:17.575
<v Speaker 0>Why not?

00:50:19.815 --> 00:50:21.734
<v Speaker 0>Since we are, I mean, I guess we

00:50:21.734 --> 00:50:23.590
<v Speaker 0>don't need to fix this gracefully. We can

00:50:24.470 --> 00:50:25.910
<v Speaker 0>we just need to fix it.

00:50:26.630 --> 00:50:29.190
<v Speaker 0>I still don't see an API server at

00:50:29.190 --> 00:50:31.990
<v Speaker 0>our PS output, which was there a few

00:50:32.150 --> 00:50:34.070
<v Speaker 1>Can you check the status of the cubelet

00:50:34.070 --> 00:50:34.390
<v Speaker 1>maybe?

00:50:40.885 --> 00:50:41.525
<v Speaker 1>Yeah.

00:50:41.845 --> 00:50:43.045
<v Speaker 0>Yeah. It's happy.

00:50:43.285 --> 00:50:44.725
<v Speaker 1>It is happy.

00:50:45.365 --> 00:50:47.765
<v Speaker 1>Cry control bots still bad.

00:50:48.165 --> 00:50:50.085
<v Speaker 0>Yeah. Something wrong with that. Cry control b

00:50:50.085 --> 00:50:50.245
<v Speaker 1>s.

00:50:51.869 --> 00:50:53.710
<v Speaker 1>Can we do a strace against it?

00:50:54.109 --> 00:50:55.470
<v Speaker 1>See where it's stuck.

00:50:58.910 --> 00:51:00.830
<v Speaker 1>Oh, you don't have strace.

00:51:02.030 --> 00:51:04.030
<v Speaker 0>We can fix that. Something I know how

00:51:04.030 --> 00:51:05.230
<v Speaker 0>to do. There we go.

00:51:05.549 --> 00:51:06.109
<v Speaker 1>Okay.

00:51:07.365 --> 00:51:10.325
<v Speaker 0>So it's trying to do View text open.

00:51:10.885 --> 00:51:12.325
<v Speaker 1>Such file directory.

00:51:14.805 --> 00:51:15.845
<v Speaker 1>Use that.

00:51:16.565 --> 00:51:17.365
<v Speaker 0>Failed to connect.

00:51:18.325 --> 00:51:20.245
<v Speaker 1>Failed to connect. So still, we have

00:51:20.565 --> 00:51:21.685
<v Speaker 1>some network issue.

00:51:24.359 --> 00:51:25.800
<v Speaker 1>Contact the okay.

00:51:26.920 --> 00:51:28.920
<v Speaker 1>You mentioned etcd. Correct?

00:51:30.280 --> 00:51:33.160
<v Speaker 0>Yeah. The container would use etcd. Right?

00:51:34.920 --> 00:51:35.559
<v Speaker 1>Why not?

00:51:37.495 --> 00:51:40.055
<v Speaker 0>Because it doesn't use etcd. I mean, if

00:51:40.055 --> 00:51:42.775
<v Speaker 0>we were the Kubernetes class for container data.

00:51:42.775 --> 00:51:43.175
<v Speaker 1>Yeah.

00:51:44.135 --> 00:51:45.415
<v Speaker 1>Yeah. But here,

00:51:45.495 --> 00:51:47.815
<v Speaker 1>the this error message is usually you see

00:51:47.815 --> 00:51:48.535
<v Speaker 0>it on

00:51:49.175 --> 00:51:51.175
<v Speaker 1>field connect context deadline exceeded.

00:51:52.780 --> 00:51:55.099
<v Speaker 1>I see it on HCD when the certificates

00:51:55.099 --> 00:51:55.900
<v Speaker 1>are wrong,

00:51:56.619 --> 00:51:58.860
<v Speaker 1>but I might be wrong in this case.

00:51:59.420 --> 00:52:01.740
<v Speaker 0>Okay. Let's take a look at Kubernetes. So

00:52:02.059 --> 00:52:04.380
<v Speaker 0>the system fail is in

00:52:06.125 --> 00:52:07.005
<v Speaker 0>lib

00:52:07.085 --> 00:52:08.765
<v Speaker 0>system b system

00:52:08.845 --> 00:52:10.365
<v Speaker 0>then container d.

00:52:13.005 --> 00:52:14.365
<v Speaker 0>That's useless. Okay.

00:52:16.830 --> 00:52:18.430
<v Speaker 1>I would look at the logs first.

00:52:30.605 --> 00:52:31.565
<v Speaker 1>Okay.

00:52:31.645 --> 00:52:32.204
<v Speaker 1>Returns

00:52:32.924 --> 00:52:34.845
<v Speaker 1>looks like the containers d is doing its

00:52:34.845 --> 00:52:36.285
<v Speaker 1>job. It's creating containers.

00:52:43.280 --> 00:52:44.000
<v Speaker 0>Yep.

00:52:45.280 --> 00:52:47.040
<v Speaker 1>Do you have Docker client here?

00:52:48.880 --> 00:52:50.800
<v Speaker 0>No. If we can install it though.

00:52:51.200 --> 00:52:52.960
<v Speaker 1>No. No. You don't need to install. I

00:52:52.960 --> 00:52:55.040
<v Speaker 1>mean, try control should be doing the job

00:52:55.040 --> 00:52:56.800
<v Speaker 1>for

00:53:05.845 --> 00:53:07.125
<v Speaker 0>It's not a WW.

00:53:13.130 --> 00:53:14.010
<v Speaker 1>Okay.

00:53:15.049 --> 00:53:15.850
<v Speaker 1>So

00:53:19.210 --> 00:53:21.289
<v Speaker 1>we know that cry control cannot talk and

00:53:21.289 --> 00:53:22.890
<v Speaker 1>usually talks to socket.

00:53:23.450 --> 00:53:24.010
<v Speaker 1>Unless

00:53:25.035 --> 00:53:25.434
<v Speaker 1>so

00:53:33.115 --> 00:53:35.115
<v Speaker 0>This is a hard one, Dan. Thanks a

00:53:35.115 --> 00:53:37.115
<v Speaker 0>lot. I said this is a hard one,

00:53:37.115 --> 00:53:37.994
<v Speaker 1>Dan. Thanks a lot.

00:53:44.180 --> 00:53:45.540
<v Speaker 0>It's bugging me that

00:53:46.020 --> 00:53:48.340
<v Speaker 0>when I grant for API server previously,

00:53:50.100 --> 00:53:51.220
<v Speaker 0>it was showing.

00:53:52.660 --> 00:53:55.140
<v Speaker 0>No, it's not that I'm not getting past

00:53:54.885 --> 00:53:55.445
<v Speaker 0>that,

00:53:58.005 --> 00:54:01.925
<v Speaker 0>hold on. Let's try let's restart our kubelet

00:54:04.245 --> 00:54:04.885
<v Speaker 0>system.

00:54:10.770 --> 00:54:13.250
<v Speaker 0>Something's not right here. I mean, many things

00:54:13.250 --> 00:54:15.410
<v Speaker 0>are probably not right here, but something specifically

00:54:15.410 --> 00:54:16.610
<v Speaker 0>here is not right.

00:54:18.530 --> 00:54:19.250
<v Speaker 0>Okay.

00:54:19.330 --> 00:54:21.250
<v Speaker 0>Why are these manifests not started? Do we

00:54:21.250 --> 00:54:22.290
<v Speaker 0>have etcd?

00:54:22.370 --> 00:54:23.635
<v Speaker 0>Right. Okay. We do.

00:54:24.035 --> 00:54:24.994
<v Speaker 0>Do we have

00:54:25.795 --> 00:54:26.595
<v Speaker 0>controller?

00:54:27.075 --> 00:54:28.435
<v Speaker 0>We don't have a controller And

00:54:33.555 --> 00:54:34.994
<v Speaker 0>so we have a schedule. So there's something

00:54:34.994 --> 00:54:37.795
<v Speaker 0>wrong with API server and controller manager manifests

00:54:37.795 --> 00:54:38.035
<v Speaker 0>here.

00:54:40.090 --> 00:54:40.810
<v Speaker 1>Okay.

00:54:40.970 --> 00:54:42.570
<v Speaker 1>And so

00:54:44.650 --> 00:54:45.450
<v Speaker 1>basically,

00:54:48.250 --> 00:54:50.010
<v Speaker 1>it is the Kubernetes manifest.

00:54:50.490 --> 00:54:51.130
<v Speaker 1>Okay,

00:54:51.609 --> 00:54:51.690
<v Speaker 1>let's,

00:54:52.815 --> 00:54:54.895
<v Speaker 1>so any of these started?

00:54:55.615 --> 00:54:57.775
<v Speaker 0>He suggested we look at the kubelet again.

00:54:57.775 --> 00:54:58.175
<v Speaker 0>So

00:54:58.655 --> 00:55:00.815
<v Speaker 1>the kubelet has a configuration where it looks

00:55:00.815 --> 00:55:02.095
<v Speaker 1>where the manifests are.

00:55:05.150 --> 00:55:06.510
<v Speaker 1>And it's under

00:55:07.710 --> 00:55:08.430
<v Speaker 1>under Etsy.

00:55:10.430 --> 00:55:12.110
<v Speaker 1>If you go see the

00:55:13.390 --> 00:55:15.070
<v Speaker 1>me go. Yeah. Go for it.

00:55:15.790 --> 00:55:17.230
<v Speaker 1>Etsy system,

00:55:18.430 --> 00:55:19.550
<v Speaker 1>the system

00:55:20.515 --> 00:55:21.555
<v Speaker 1>kubelet,

00:55:22.835 --> 00:55:23.235
<v Speaker 1>less,

00:55:24.115 --> 00:55:25.235
<v Speaker 1>and this one.

00:55:26.595 --> 00:55:27.955
<v Speaker 1>Okay. Now here

00:55:28.435 --> 00:55:29.235
<v Speaker 1>so

00:55:29.795 --> 00:55:33.715
<v Speaker 1>environment, kubelet, kubelet axe, bootstrap, it's Kubernetes bootstrap,

00:55:33.715 --> 00:55:34.515
<v Speaker 1>kubelet.com,

00:55:35.750 --> 00:55:37.910
<v Speaker 1>kubelet config Yaml.

00:55:40.869 --> 00:55:43.910
<v Speaker 0>Is it not configured to have static manifests?

00:55:45.030 --> 00:55:46.310
<v Speaker 1>Should we get the docs up on this

00:55:46.310 --> 00:55:46.550
<v Speaker 0>one?

00:55:48.305 --> 00:55:48.945
<v Speaker 1>Yes.

00:55:49.985 --> 00:55:52.065
<v Speaker 1>Let me check another cluster.

00:55:57.425 --> 00:55:59.185
<v Speaker 1>Let me check another cluster.

00:56:01.200 --> 00:56:03.840
<v Speaker 0>It has a pod manifest fast. It's not

00:56:04.080 --> 00:56:05.600
<v Speaker 0>not being passed

00:56:06.160 --> 00:56:08.640
<v Speaker 0>via kubla args. You can check the other

00:56:08.640 --> 00:56:09.920
<v Speaker 1>cluster, by the way.

00:56:12.320 --> 00:56:13.600
<v Speaker 0>Let's just add it to this.

00:56:16.535 --> 00:56:18.135
<v Speaker 0>Kubernetes

00:56:18.615 --> 00:56:19.495
<v Speaker 0>manifest.

00:56:21.015 --> 00:56:22.455
<v Speaker 1>No. It's not manifest.

00:56:24.055 --> 00:56:25.975
<v Speaker 0>It's Kubernetes manifest.

00:56:26.535 --> 00:56:28.295
<v Speaker 1>The environment file basically.

00:56:32.820 --> 00:56:34.100
<v Speaker 0>No. Am I wrong?

00:56:35.540 --> 00:56:37.540
<v Speaker 1>What did you do? I didn't see.

00:56:38.260 --> 00:56:39.300
<v Speaker 0>So

00:56:39.380 --> 00:56:40.820
<v Speaker 0>in this file,

00:56:43.380 --> 00:56:46.545
<v Speaker 0>I added a flag to our kubelet to

00:56:46.545 --> 00:56:49.744
<v Speaker 0>see pod manifest path is slash etcetera slash

00:56:49.744 --> 00:56:52.065
<v Speaker 0>Kubernetes slash manifests.

00:56:53.025 --> 00:56:53.744
<v Speaker 1>And it's

00:56:54.305 --> 00:56:56.465
<v Speaker 0>Make sure the kubelet's actually got that.

00:56:57.025 --> 00:56:57.905
<v Speaker 0>Okay.

00:56:59.105 --> 00:57:00.385
<v Speaker 0>That's a pain in it. It has to

00:57:00.385 --> 00:57:00.785
<v Speaker 0>read that.

00:57:01.450 --> 00:57:03.930
<v Speaker 1>No. You have Kube API server up.

00:57:05.690 --> 00:57:07.850
<v Speaker 0>Oh, I do know. As of ten seconds

00:57:07.850 --> 00:57:09.290
<v Speaker 0>ago. Okay. Cool.

00:57:11.690 --> 00:57:12.650
<v Speaker 1>No. Can you

00:57:14.730 --> 00:57:16.755
<v Speaker 1>but it died. Okay. We can look at

00:57:16.755 --> 00:57:17.955
<v Speaker 1>the logs, by the way.

00:57:18.515 --> 00:57:19.234
<v Speaker 1>So the logs

00:57:20.835 --> 00:57:23.795
<v Speaker 1>let's let's do this a second. Can you

00:57:23.795 --> 00:57:25.155
<v Speaker 1>give me control? Yeah. Take it.

00:57:31.120 --> 00:57:32.960
<v Speaker 1>Okay. Cat Cubelet.

00:57:33.200 --> 00:57:33.600
<v Speaker 1>You

00:57:36.960 --> 00:57:38.240
<v Speaker 1>Cube API server.

00:57:47.885 --> 00:57:50.765
<v Speaker 0>So there's API server struggling to speak.

00:57:51.245 --> 00:57:52.445
<v Speaker 1>Oh, the 10.

00:57:53.165 --> 00:57:55.245
<v Speaker 1>It's 18. Emissions controller.

00:57:55.325 --> 00:57:57.100
<v Speaker 0>Yeah. Can't reach NCT.

00:57:59.099 --> 00:57:59.980
<v Speaker 1>Endpoint.

00:57:59.980 --> 00:58:01.660
<v Speaker 1>Var scheme endpoint.

00:58:02.619 --> 00:58:04.300
<v Speaker 1>Var scheme endpoint.

00:58:05.980 --> 00:58:07.500
<v Speaker 1>CBC resolve rubber.

00:58:09.275 --> 00:58:10.715
<v Speaker 1>2379.

00:58:11.035 --> 00:58:13.515
<v Speaker 1>Yeah. This looks like an HCD thing.

00:58:13.755 --> 00:58:15.435
<v Speaker 0>Yeah. The context exceeded.

00:58:17.275 --> 00:58:19.835
<v Speaker 0>Important is wrong. That's why 2379

00:58:19.835 --> 00:58:21.355
<v Speaker 0>versus 2381.

00:58:21.595 --> 00:58:22.635
<v Speaker 1>So Okay. Let's

00:58:23.435 --> 00:58:26.180
<v Speaker 0>We can fix that, right, by going to

00:58:26.579 --> 00:58:28.580
<v Speaker 1>The manifest again. Yes. Yeah.

00:58:35.220 --> 00:58:36.579
<v Speaker 1>Okay. Find

00:58:36.579 --> 00:58:37.220
<v Speaker 1>endpoint.

00:58:40.615 --> 00:58:41.895
<v Speaker 1>Yeah. That's it.

00:58:42.694 --> 00:58:44.055
<v Speaker 1>No. You didn't fix it. Did you fix

00:58:44.055 --> 00:58:45.335
<v Speaker 1>it? Yeah.

00:58:45.575 --> 00:58:47.335
<v Speaker 1>You are very quick, man. No. It's still

00:58:47.335 --> 00:58:48.214
<v Speaker 1>2381.

00:58:48.214 --> 00:58:49.974
<v Speaker 1>It should be It was 2379,

00:58:49.974 --> 00:58:51.815
<v Speaker 0>and then I changed it to 2381 because

00:58:51.815 --> 00:58:54.055
<v Speaker 0>when I did a I grabbed on etcd,

00:58:54.390 --> 00:58:56.150
<v Speaker 0>the port was 2381.

00:58:56.390 --> 00:58:57.270
<v Speaker 0>It's here.

00:58:58.230 --> 00:58:58.950
<v Speaker 1>Oh,

00:58:59.349 --> 00:59:00.950
<v Speaker 1>no. But when you did the grip on

00:59:00.950 --> 00:59:01.750
<v Speaker 1>HCD

00:59:02.309 --> 00:59:03.270
<v Speaker 1>just a second.

00:59:03.589 --> 00:59:04.069
<v Speaker 1>This is

00:59:04.710 --> 00:59:07.895
<v Speaker 1>somebody is running. Where is it? Yeah. So

00:59:07.895 --> 00:59:09.895
<v Speaker 0>is on port 2381.

00:59:10.055 --> 00:59:11.335
<v Speaker 1>Part of which process?

00:59:13.415 --> 00:59:15.095
<v Speaker 1>No? Oh, yeah. Okay.

00:59:18.535 --> 00:59:18.855
<v Speaker 1>Dennis.

00:59:20.420 --> 00:59:22.820
<v Speaker 1>So maybe you should fix it from here.

00:59:26.900 --> 00:59:28.740
<v Speaker 0>Well, which which is the valid the real

00:59:28.740 --> 00:59:29.940
<v Speaker 0>NTD port?

00:59:30.180 --> 00:59:33.075
<v Speaker 1>It is to here. Initial cluster,

00:59:33.635 --> 00:59:34.835
<v Speaker 1>2379

00:59:34.835 --> 00:59:36.035
<v Speaker 1>and 2380.

00:59:36.755 --> 00:59:38.515
<v Speaker 1>Here it's 2379.

00:59:41.475 --> 00:59:43.955
<v Speaker 0>You just went on a port random thing

00:59:43.955 --> 00:59:45.635
<v Speaker 0>and started messing up ports.

00:59:46.520 --> 00:59:49.320
<v Speaker 1>So this is for the beers initial cluster.

00:59:49.800 --> 00:59:52.440
<v Speaker 1>23792379238

00:59:52.440 --> 00:59:55.640
<v Speaker 1>here. This one. This is metrics. This metrics.

00:59:56.280 --> 00:59:58.360
<v Speaker 1>Listen beer, 2380.

01:00:00.280 --> 01:00:01.320
<v Speaker 1>Lifeless probe.

01:00:06.375 --> 01:00:08.214
<v Speaker 0>Okay. So let me fix the API server

01:00:08.214 --> 01:00:09.255
<v Speaker 0>again. Sorry.

01:00:11.815 --> 01:00:13.815
<v Speaker 0>Because I I said okay. So you're saying

01:00:13.815 --> 01:00:15.450
<v Speaker 0>I've changed that the wrong way around, which

01:00:15.450 --> 01:00:16.330
<v Speaker 0>makes sense.

01:00:16.970 --> 01:00:17.610
<v Speaker 1>So

01:00:18.890 --> 01:00:20.490
<v Speaker 1>What was it before you changed it? To

01:00:20.490 --> 01:00:22.010
<v Speaker 0>three seven nine. So let's put it back

01:00:22.010 --> 01:00:22.650
<v Speaker 0>to that.

01:00:24.010 --> 01:00:25.770
<v Speaker 0>Did you make a change in the NADC

01:00:25.770 --> 01:00:26.170
<v Speaker 0>one?

01:00:29.435 --> 01:00:31.035
<v Speaker 0>Did you change anything here?

01:00:31.355 --> 01:00:32.475
<v Speaker 1>No. I didn't.

01:00:34.875 --> 01:00:35.595
<v Speaker 0>Alright.

01:00:36.795 --> 01:00:38.795
<v Speaker 0>Let's check this kubelet thing again.

01:00:43.410 --> 01:00:44.930
<v Speaker 1>So q config.

01:00:46.609 --> 01:00:47.650
<v Speaker 1>Q config.

01:00:47.650 --> 01:00:49.569
<v Speaker 1>What manifest? It is easy to manipulate the

01:00:49.569 --> 01:00:50.690
<v Speaker 1>manifest. Correct?

01:00:51.329 --> 01:00:52.850
<v Speaker 1>Config. Well, the config.

01:00:55.410 --> 01:00:56.130
<v Speaker 1>Runtime.

01:00:57.745 --> 01:01:00.465
<v Speaker 1>Run container d, container sock,

01:01:00.465 --> 01:01:02.145
<v Speaker 1>eviction, hard memory.

01:01:04.465 --> 01:01:06.225
<v Speaker 0>Yeah. That's alright.

01:01:07.185 --> 01:01:09.425
<v Speaker 0>Our API server. Check this one. It has

01:01:09.425 --> 01:01:10.705
<v Speaker 0>to be the API server.

01:01:11.820 --> 01:01:14.460
<v Speaker 0>It has to be the API server.

01:01:14.780 --> 01:01:16.860
<v Speaker 1>Can we check the socket?

01:01:19.420 --> 01:01:21.340
<v Speaker 1>Yeah. It is there. So why control b

01:01:21.340 --> 01:01:22.140
<v Speaker 1>s is not working?

01:01:44.200 --> 01:01:45.160
<v Speaker 0>Hold on.

01:01:47.720 --> 01:01:49.720
<v Speaker 1>Can you look at the minute two gig

01:01:49.720 --> 01:01:52.375
<v Speaker 0>of memory available, we're gonna start infecting stuff.

01:01:53.335 --> 01:01:54.535
<v Speaker 1>Oh, yeah.

01:01:57.335 --> 01:01:58.695
<v Speaker 0>That doesn't seem right.

01:02:06.180 --> 01:02:07.700
<v Speaker 1>Can we check the

01:02:12.420 --> 01:02:14.500
<v Speaker 1>try Check the kubelet Where was that kubelet

01:02:14.500 --> 01:02:15.859
<v Speaker 0>thing again? Do you wanna jump back into

01:02:15.859 --> 01:02:17.460
<v Speaker 0>that? I can't remember where that was. The

01:02:17.460 --> 01:02:18.260
<v Speaker 0>kubelet. Okay.

01:02:20.075 --> 01:02:21.835
<v Speaker 1>It's under it's in your system.

01:02:22.555 --> 01:02:23.355
<v Speaker 1>System

01:02:23.515 --> 01:02:24.315
<v Speaker 1>cube. Let

01:02:25.595 --> 01:02:26.315
<v Speaker 1>and

01:02:27.434 --> 01:02:29.115
<v Speaker 1>there is two, by the way. There is

01:02:29.115 --> 01:02:31.515
<v Speaker 1>the unit, which is in a different place.

01:02:31.515 --> 01:02:33.115
<v Speaker 1>Yeah. And this is the override for the

01:02:33.115 --> 01:02:33.355
<v Speaker 1>unit.

01:02:35.289 --> 01:02:36.730
<v Speaker 0>So do we have to have no. There's

01:02:36.730 --> 01:02:39.530
<v Speaker 0>no eviction here, is there? No. So maybe

01:02:39.530 --> 01:02:40.490
<v Speaker 0>we need to go to the

01:02:42.809 --> 01:02:45.210
<v Speaker 0>so see that in this flags fail or

01:02:45.210 --> 01:02:47.049
<v Speaker 0>it might be in the unit fail.

01:02:49.825 --> 01:02:52.305
<v Speaker 1>The general control would show us that. Okay.

01:02:52.305 --> 01:02:54.225
<v Speaker 1>Can you go again? The beam can

01:02:57.265 --> 01:03:00.945
<v Speaker 1>description, documentation on software. You're really fast, man.

01:03:00.945 --> 01:03:02.065
<v Speaker 0>I'm sorry. Know I really

01:03:03.905 --> 01:03:05.825
<v Speaker 0>so it's not in the unit file. It

01:03:05.520 --> 01:03:07.760
<v Speaker 0>wasn't in the QBDM flag. It wasn't in

01:03:07.760 --> 01:03:09.200
<v Speaker 0>the config that you found.

01:03:09.600 --> 01:03:10.160
<v Speaker 0>So

01:03:10.480 --> 01:03:12.560
<v Speaker 0>where else is it going to Bootstrap config.

01:03:12.560 --> 01:03:13.040
<v Speaker 1>It's the

01:03:13.600 --> 01:03:16.240
<v Speaker 1>can we check the Bootstrap the this one?

01:03:16.240 --> 01:03:17.520
<v Speaker 1>This file? Yeah.

01:03:23.545 --> 01:03:23.944
<v Speaker 0>No.

01:03:34.930 --> 01:03:36.530
<v Speaker 1>There is no file bootstrap.

01:03:51.015 --> 01:03:51.815
<v Speaker 1>So

01:03:52.775 --> 01:03:54.935
<v Speaker 1>do we need this file? So he's passing

01:03:54.935 --> 01:03:55.335
<v Speaker 0>a pack

01:03:56.214 --> 01:03:58.935
<v Speaker 0>he's passing a flag to the kubelet.

01:03:59.895 --> 01:04:01.734
<v Speaker 1>But do we need this file to bootstrap?

01:04:04.150 --> 01:04:05.990
<v Speaker 0>No. I don't think we do.

01:04:05.990 --> 01:04:06.790
<v Speaker 0>I think

01:04:12.950 --> 01:04:13.670
<v Speaker 0>Where was the

01:04:14.870 --> 01:04:16.550
<v Speaker 0>can you go back to that other

01:04:16.550 --> 01:04:18.230
<v Speaker 0>QPDM config you had, please?

01:04:22.204 --> 01:04:24.685
<v Speaker 1>This one? No. Which one?

01:04:25.164 --> 01:04:26.285
<v Speaker 1>We are in

01:04:27.005 --> 01:04:27.965
<v Speaker 1>the current directory.

01:04:28.204 --> 01:04:30.444
<v Speaker 0>I could have just done cd dash probably

01:04:30.444 --> 01:04:32.125
<v Speaker 0>that would have worked. Do cd dash.

01:04:33.410 --> 01:04:35.250
<v Speaker 1>Where are we? Yes.

01:04:37.490 --> 01:04:38.530
<v Speaker 1>Strange.

01:04:39.730 --> 01:04:41.650
<v Speaker 1>Why I don't see it.

01:04:42.450 --> 01:04:44.450
<v Speaker 0>Yeah. Hold on. Can I type?

01:04:44.930 --> 01:04:45.250
<v Speaker 0>Yeah.

01:04:48.065 --> 01:04:49.665
<v Speaker 1>Okay. Yes. Yeah. This

01:04:50.785 --> 01:04:51.585
<v Speaker 0>default

01:04:51.825 --> 01:04:52.865
<v Speaker 0>should put it.

01:04:57.265 --> 01:04:59.505
<v Speaker 1>Vixen. That's it. You you found it.

01:05:03.579 --> 01:05:05.420
<v Speaker 1>Remove the call. Comment the call.

01:05:06.299 --> 01:05:08.460
<v Speaker 0>Sorry. I'm just reading that and laughing.

01:05:11.980 --> 01:05:13.900
<v Speaker 0>Alright. Let's do daemon

01:05:13.900 --> 01:05:14.860
<v Speaker 0>reload.

01:05:15.819 --> 01:05:16.460
<v Speaker 0>Restart.

01:05:18.525 --> 01:05:19.885
<v Speaker 0>No,

01:05:22.765 --> 01:05:24.925
<v Speaker 0>that's so the API server was running, it

01:05:24.925 --> 01:05:26.525
<v Speaker 0>was disappearing. I'm glad I didn't make that

01:05:26.525 --> 01:05:28.525
<v Speaker 0>up when I was doing that PS. So

01:05:30.220 --> 01:05:33.500
<v Speaker 0>now we wanna test the API server again.

01:05:37.660 --> 01:05:38.140
<v Speaker 1>Okay.

01:05:42.935 --> 01:05:44.215
<v Speaker 0>Back on the note.

01:05:48.215 --> 01:05:50.535
<v Speaker 0>No. He didn't. We we definitely have an

01:05:50.535 --> 01:05:52.695
<v Speaker 0>API server now. So I'm gonna test it

01:05:52.695 --> 01:05:53.975
<v Speaker 0>with the admin conf.

01:06:02.339 --> 01:06:03.060
<v Speaker 0>Okay.

01:06:03.619 --> 01:06:04.339
<v Speaker 0>So

01:06:05.539 --> 01:06:08.285
<v Speaker 0>let's confirm that this is the API servers

01:06:08.285 --> 01:06:10.205
<v Speaker 0>running on 6443.

01:06:11.725 --> 01:06:13.725
<v Speaker 0>How many many problems did you put in

01:06:13.725 --> 01:06:15.085
<v Speaker 0>this thing then? Really?

01:06:22.125 --> 01:06:23.750
<v Speaker 0>443.

01:06:24.150 --> 01:06:25.430
<v Speaker 1>4 0. Correct.

01:06:26.630 --> 01:06:28.390
<v Speaker 0>And we've got is that IP And you

01:06:28.390 --> 01:06:31.030
<v Speaker 1>can check using let's let's say also.

01:06:31.829 --> 01:06:32.630
<v Speaker 0>Yeah. Go for it.

01:06:45.095 --> 01:06:45.815
<v Speaker 1>Oops.

01:06:49.415 --> 01:06:51.540
<v Speaker 1>The b n server is not It's not

01:06:52.500 --> 01:06:53.700
<v Speaker 0>Is it down again? Well

01:06:57.620 --> 01:06:59.540
<v Speaker 1>Did you did you restart it?

01:06:59.940 --> 01:07:01.860
<v Speaker 0>Yeah. Was running. Yeah. Search for API.

01:07:04.905 --> 01:07:06.665
<v Speaker 1>Okay. API server.

01:07:09.705 --> 01:07:11.465
<v Speaker 1>Okay. The ties address.

01:07:12.505 --> 01:07:14.105
<v Speaker 1>Is this the correct address?

01:07:14.905 --> 01:07:15.785
<v Speaker 0>Let's

01:07:15.785 --> 01:07:18.180
<v Speaker 0>check. There's not really anything out.

01:07:20.500 --> 01:07:22.820
<v Speaker 0>75180.

01:07:25.700 --> 01:07:27.460
<v Speaker 0>And we've got an elastic IP on the

01:07:27.460 --> 01:07:29.300
<v Speaker 0>bond of 8045.

01:07:30.285 --> 01:07:31.805
<v Speaker 0>What was the netstat output?

01:07:35.244 --> 01:07:37.485
<v Speaker 0>Sorry, the PS output. Yeah.

01:07:38.285 --> 01:07:40.045
<v Speaker 0>Oh, it's down again. It's

01:07:40.045 --> 01:07:40.605
<v Speaker 1>gone.

01:07:41.085 --> 01:07:42.765
<v Speaker 1>Let's check the locks.

01:07:45.450 --> 01:07:46.330
<v Speaker 1>Log

01:07:46.330 --> 01:07:47.290
<v Speaker 1>containers.

01:07:47.290 --> 01:07:48.090
<v Speaker 1>Kubernetes.

01:07:48.250 --> 01:07:48.970
<v Speaker 1>Maybe I

01:07:56.730 --> 01:07:58.010
<v Speaker 1>k. We need the last log.

01:08:03.714 --> 01:08:04.515
<v Speaker 1>So

01:08:08.674 --> 01:08:09.875
<v Speaker 1>we need the last log.

01:08:13.349 --> 01:08:14.790
<v Speaker 0>You want me to copy and paste all

01:08:14.790 --> 01:08:15.270
<v Speaker 0>that?

01:08:23.109 --> 01:08:24.454
<v Speaker 0>Oh, happened?

01:08:25.574 --> 01:08:27.654
<v Speaker 1>The the the other section.

01:08:30.054 --> 01:08:32.454
<v Speaker 0>Okay. It's just too weird. I'm still my

01:08:36.660 --> 01:08:39.859
<v Speaker 1>That's q. Yeah. Cluster002.

01:08:40.739 --> 01:08:41.699
<v Speaker 1>Tap tap.

01:08:43.380 --> 01:08:48.500
<v Speaker 1>Okay. V18.

01:08:49.395 --> 01:08:50.755
<v Speaker 0>30

01:08:56.035 --> 01:08:58.594
<v Speaker 1>2 log. Yeah? Yeah? 32.

01:08:59.795 --> 01:09:01.955
<v Speaker 1>Oh, 33. Let's do 33.

01:09:02.274 --> 01:09:04.194
<v Speaker 1>Context deadline exceeded again.

01:09:08.210 --> 01:09:09.170
<v Speaker 1>Keyword.

01:09:14.850 --> 01:09:16.290
<v Speaker 1>Edit. Loaded.

01:09:16.370 --> 01:09:17.250
<v Speaker 1>Plug in.

01:09:17.729 --> 01:09:19.729
<v Speaker 1>Loaded. Bar schema. Endpoint.

01:09:21.295 --> 01:09:22.414
<v Speaker 1>CC server.

01:09:23.054 --> 01:09:24.974
<v Speaker 1>Can we check 2379?

01:09:24.974 --> 01:09:26.334
<v Speaker 1>Yeah. Endpoint.

01:09:30.494 --> 01:09:31.135
<v Speaker 1>Contacts

01:09:34.840 --> 01:09:36.200
<v Speaker 0>So I was trying to speak to entity

01:09:36.200 --> 01:09:36.920
<v Speaker 0>on our local

01:09:37.960 --> 01:09:39.479
<v Speaker 1>Yes. The thing is I

01:09:45.400 --> 01:09:46.439
<v Speaker 1>my problem is

01:09:47.640 --> 01:09:49.895
<v Speaker 0>Yeah. We're talking My problem I need I

01:09:49.895 --> 01:09:51.654
<v Speaker 1>I I want to know why this is

01:09:51.654 --> 01:09:52.455
<v Speaker 1>not working.

01:09:54.135 --> 01:09:55.975
<v Speaker 1>I want to know why CryControl is not

01:09:55.975 --> 01:09:57.975
<v Speaker 1>working. Should I

01:10:06.690 --> 01:10:08.530
<v Speaker 0>So we have two big problems right now.

01:10:08.530 --> 01:10:10.930
<v Speaker 0>One, the API server keeps rebooting because it

01:10:10.930 --> 01:10:13.010
<v Speaker 0>can't speak to etcd and

01:10:13.010 --> 01:10:15.010
<v Speaker 0>we have no way to enter out with

01:10:15.010 --> 01:10:17.745
<v Speaker 0>the container d process. Yes.

01:10:18.065 --> 01:10:20.145
<v Speaker 1>So if CryControl is working,

01:10:20.385 --> 01:10:22.305
<v Speaker 1>I will actually use etcdControl

01:10:22.305 --> 01:10:24.465
<v Speaker 1>from the etcdControl

01:10:24.465 --> 01:10:25.425
<v Speaker 1>to check

01:10:26.065 --> 01:10:27.425
<v Speaker 1>etcdHealth

01:10:28.625 --> 01:10:30.225
<v Speaker 1>because this looks like

01:10:30.945 --> 01:10:33.639
<v Speaker 1>etcd is not responding on time. We could

01:10:33.639 --> 01:10:36.039
<v Speaker 0>try and enter and jump into the entity

01:10:36.039 --> 01:10:37.320
<v Speaker 0>namespace.

01:10:39.159 --> 01:10:40.999
<v Speaker 0>What process number is it?

01:10:42.039 --> 01:10:43.400
<v Speaker 0>7553.

01:10:48.574 --> 01:10:49.295
<v Speaker 1>What?

01:10:52.735 --> 01:10:54.494
<v Speaker 0>Is that rewritten as well?

01:10:58.574 --> 01:10:58.975
<v Speaker 0>Oh.

01:11:00.739 --> 01:11:02.100
<v Speaker 0>Let's see if we can catch it before

01:11:02.100 --> 01:11:03.059
<v Speaker 0>it goes away.

01:11:04.020 --> 01:11:04.820
<v Speaker 0>So

01:11:05.060 --> 01:11:06.099
<v Speaker 0>we want

01:11:12.260 --> 01:11:13.540
<v Speaker 0>let's see if it's still there.

01:11:15.715 --> 01:11:16.435
<v Speaker 0>Yeah.

01:11:20.035 --> 01:11:22.115
<v Speaker 1>It's a key enterprise client,

01:11:22.835 --> 01:11:24.195
<v Speaker 1>2379.

01:11:25.075 --> 01:11:26.755
<v Speaker 1>Server cert client

01:11:26.915 --> 01:11:27.875
<v Speaker 1>certification

01:11:27.875 --> 01:11:28.675
<v Speaker 1>directory.

01:11:31.190 --> 01:11:33.750
<v Speaker 0>Let me grab my entity cheat sheet. Where

01:11:33.750 --> 01:11:36.150
<v Speaker 0>is it? No. No. It it looks fine.

01:11:36.390 --> 01:11:38.230
<v Speaker 1>We I went through the manifest and it

01:11:38.230 --> 01:11:39.670
<v Speaker 1>was a server key.

01:11:40.230 --> 01:11:42.790
<v Speaker 1>It's in client. I think he said earlier,

01:11:42.790 --> 01:11:44.150
<v Speaker 0>entity wasn't

01:11:44.150 --> 01:11:46.875
<v Speaker 0>touched. Yeah. The problem is an SCD. So

01:11:51.755 --> 01:11:53.515
<v Speaker 1>okay. Can I do

01:11:55.355 --> 01:11:57.515
<v Speaker 1>we have SCD controls here, type?

01:11:59.480 --> 01:12:01.479
<v Speaker 1>Just want to check.

01:12:03.080 --> 01:12:04.840
<v Speaker 0>No. We definitely install it.

01:12:08.199 --> 01:12:08.920
<v Speaker 0>Yeah.

01:12:09.400 --> 01:12:10.360
<v Speaker 0>That's why I was gonna try and do

01:12:10.360 --> 01:12:11.960
<v Speaker 0>it in a center and to its

01:12:12.775 --> 01:12:15.335
<v Speaker 0>namespaces so that we could just pretend we're

01:12:15.335 --> 01:12:16.695
<v Speaker 0>in it even though we're not.

01:12:18.615 --> 01:12:20.775
<v Speaker 1>I want to check why control is not

01:12:20.775 --> 01:12:21.494
<v Speaker 1>working.

01:12:24.855 --> 01:12:26.215
<v Speaker 0>Because Dan hates us.

01:12:28.830 --> 01:12:31.390
<v Speaker 1>Okay. I'm trying to check which file it

01:12:31.390 --> 01:12:32.110
<v Speaker 1>opens.

01:12:32.510 --> 01:12:33.790
<v Speaker 1>Failed to connect.

01:12:38.270 --> 01:12:38.989
<v Speaker 1>It's

01:12:39.230 --> 01:12:41.470
<v Speaker 0>Dan's given us a hint, of course.

01:12:43.114 --> 01:12:45.195
<v Speaker 0>The entity cluster won't be healthy because of

01:12:45.195 --> 01:12:47.195
<v Speaker 0>the firewall probably in all the control plane

01:12:47.195 --> 01:12:48.875
<v Speaker 0>nodes, so we'd probably have to disable it

01:12:48.875 --> 01:12:50.715
<v Speaker 0>on them all. Oh, yes. Because we did

01:12:50.715 --> 01:12:52.315
<v Speaker 1>only in one node. Yes.

01:12:54.555 --> 01:12:55.355
<v Speaker 1>Yes. Yes. Yes.

01:12:58.290 --> 01:12:59.810
<v Speaker 1>So you have to log in to each

01:12:59.810 --> 01:13:01.010
<v Speaker 1>node then.

01:13:10.210 --> 01:13:12.450
<v Speaker 1>That's why it's useful to have a valid

01:13:12.450 --> 01:13:14.050
<v Speaker 1>SH like PDSH.

01:13:15.005 --> 01:13:17.165
<v Speaker 0>Yeah. I wonder if he added

01:13:17.245 --> 01:13:19.565
<v Speaker 0>default things to the mall. Of course he

01:13:19.565 --> 01:13:20.125
<v Speaker 0>did.

01:13:26.045 --> 01:13:26.844
<v Speaker 0>And

01:13:27.325 --> 01:13:27.965
<v Speaker 0>this one.

01:13:32.480 --> 01:13:34.560
<v Speaker 0>I'm not sure what failure scenario Dan had

01:13:34.560 --> 01:13:36.239
<v Speaker 0>in his head here. I'm assuming our conflict

01:13:36.239 --> 01:13:38.560
<v Speaker 0>management was so messed up that we rolled

01:13:38.560 --> 01:13:39.840
<v Speaker 0>out this change to everything.

01:13:43.054 --> 01:13:43.934
<v Speaker 1>Okay.

01:13:43.935 --> 01:13:44.735
<v Speaker 0>And

01:13:44.895 --> 01:13:48.175
<v Speaker 0>stop. Get f w and just because I

01:13:48.175 --> 01:13:48.655
<v Speaker 0>wanna know.

01:13:55.440 --> 01:13:57.040
<v Speaker 0>Maybe I need to just

01:13:57.680 --> 01:13:59.680
<v Speaker 0>tackle things a little bit here.

01:14:05.040 --> 01:14:06.400
<v Speaker 0>Just encourage it

01:14:06.720 --> 01:14:08.704
<v Speaker 0>and we'll do that for the previous node

01:14:08.704 --> 01:14:09.584
<v Speaker 0>as well.

01:14:10.704 --> 01:14:13.264
<v Speaker 0>I'm not sure if it actually reloads the

01:14:13.264 --> 01:14:16.145
<v Speaker 0>default params or if they get cached, so

01:14:21.750 --> 01:14:23.590
<v Speaker 0>Okay. Alright.

01:14:24.710 --> 01:14:26.390
<v Speaker 0>Let's just jump back onto node one and

01:14:26.390 --> 01:14:28.230
<v Speaker 0>see if we can see what's happening.

01:14:37.065 --> 01:14:40.184
<v Speaker 0>Okay. Where are we? API server.

01:14:41.784 --> 01:14:42.504
<v Speaker 0>No.

01:14:43.704 --> 01:14:45.945
<v Speaker 0>So SCD might just need a minute, I

01:14:45.945 --> 01:14:47.304
<v Speaker 0>guess. Just

01:14:47.304 --> 01:14:48.664
<v Speaker 1>a second, system.

01:14:49.020 --> 01:14:50.860
<v Speaker 1>I want to check if he played with

01:14:50.860 --> 01:14:51.580
<v Speaker 1>other

01:14:52.460 --> 01:14:53.580
<v Speaker 1>network stuff.

01:14:53.740 --> 01:14:55.020
<v Speaker 1>Minus a.

01:14:55.740 --> 01:14:56.619
<v Speaker 1>Grip.

01:14:57.020 --> 01:14:57.659
<v Speaker 1>Forward.

01:15:00.300 --> 01:15:00.940
<v Speaker 1>Assist

01:15:01.260 --> 01:15:01.820
<v Speaker 1>controls.

01:15:09.575 --> 01:15:10.375
<v Speaker 1>What?

01:15:15.575 --> 01:15:17.550
<v Speaker 0>I p v four dot I p underscore

01:15:17.550 --> 01:15:18.270
<v Speaker 0>forward.

01:15:19.470 --> 01:15:20.030
<v Speaker 1>That's

01:15:24.750 --> 01:15:25.870
<v Speaker 1>no. It's okay.

01:15:26.350 --> 01:15:27.790
<v Speaker 1>So I didn't play with that one.

01:15:42.835 --> 01:15:43.954
<v Speaker 0>Disable

01:15:43.955 --> 01:15:46.114
<v Speaker 0>the firewall and the other nodes. I just

01:15:46.114 --> 01:15:47.875
<v Speaker 0>did the control plane nodes.

01:15:48.650 --> 01:15:50.010
<v Speaker 0>I don't think I would need to do

01:15:50.010 --> 01:15:51.929
<v Speaker 0>the worker nodes. Feel free to correct me.

01:15:52.650 --> 01:15:54.330
<v Speaker 1>You don't need to do the con con

01:15:54.970 --> 01:15:56.090
<v Speaker 1>worker nodes

01:15:56.490 --> 01:15:59.290
<v Speaker 1>because basically what we wanted is the quorum

01:15:59.290 --> 01:15:59.930
<v Speaker 1>for HCD.

01:16:00.525 --> 01:16:03.165
<v Speaker 1>So HCD is like in every now and

01:16:03.165 --> 01:16:06.045
<v Speaker 1>then, they will check who who's the leader.

01:16:06.445 --> 01:16:08.445
<v Speaker 1>Also, the scheduler and the

01:16:09.725 --> 01:16:12.125
<v Speaker 1>basically, they will do, a leadership election.

01:16:14.610 --> 01:16:16.209
<v Speaker 0>Let me just confirm.

01:16:19.730 --> 01:16:21.409
<v Speaker 0>Good tap there from a

01:16:22.210 --> 01:16:21.810
<v Speaker 0>different Yeah.

01:16:29.025 --> 01:16:30.465
<v Speaker 0>I didn't know that.

01:16:31.105 --> 01:16:31.665
<v Speaker 0>So

01:16:32.945 --> 01:16:34.385
<v Speaker 0>I bet you I need to start it.

01:16:39.280 --> 01:16:40.800
<v Speaker 1>You can do ibtables

01:16:40.800 --> 01:16:43.280
<v Speaker 1>flush and then restart the cubelet.

01:16:44.720 --> 01:16:46.000
<v Speaker 1>So ibtables

01:16:46.560 --> 01:16:48.160
<v Speaker 1>minus capital f.

01:16:48.960 --> 01:16:50.560
<v Speaker 0>Yep. Already done.

01:16:51.135 --> 01:16:52.974
<v Speaker 0>Let's get the other one done.

01:16:54.335 --> 01:16:55.614
<v Speaker 0>So

01:16:55.775 --> 01:16:57.374
<v Speaker 0>we disable

01:16:59.135 --> 01:17:00.175
<v Speaker 0>flush

01:17:02.735 --> 01:17:03.454
<v Speaker 0>restart.

01:17:14.520 --> 01:17:16.920
<v Speaker 0>And back onto our first control plane node.

01:17:20.515 --> 01:17:22.355
<v Speaker 1>Can you do cry control b s? Because

01:17:22.355 --> 01:17:24.114
<v Speaker 1>I think this is what was stopping my

01:17:24.114 --> 01:17:25.474
<v Speaker 1>cry control from

01:17:27.155 --> 01:17:29.635
<v Speaker 1>okay. I'm with minus flash. Good.

01:17:30.995 --> 01:17:32.034
<v Speaker 1>You start.

01:17:32.195 --> 01:17:32.435
<v Speaker 1>Okay.

01:17:34.280 --> 01:17:35.239
<v Speaker 0>Type impressions. I

01:17:36.119 --> 01:17:37.639
<v Speaker 1>love the duplicate. Yes.

01:17:39.960 --> 01:17:40.599
<v Speaker 1>No.

01:17:42.280 --> 01:17:44.440
<v Speaker 1>Do we need to restart also the container

01:17:44.440 --> 01:17:46.679
<v Speaker 1>d? No. Here, I'll restart the whole thing

01:17:46.679 --> 01:17:47.320
<v Speaker 0>if I need to.

01:17:48.605 --> 01:17:50.045
<v Speaker 0>Like you said, just turn it off and

01:17:50.045 --> 01:17:52.124
<v Speaker 0>on again. Yeah. I

01:17:55.565 --> 01:17:57.085
<v Speaker 1>don't know why is that.

01:17:59.485 --> 01:18:01.900
<v Speaker 0>Alright. We have an API server.

01:18:02.220 --> 01:18:03.820
<v Speaker 0>I'm gonna try

01:18:06.700 --> 01:18:08.460
<v Speaker 0>that didn't reject it.

01:18:16.955 --> 01:18:17.995
<v Speaker 1>Alright. Host.

01:18:18.475 --> 01:18:20.555
<v Speaker 0>Do we still have an API, sir? No.

01:18:24.555 --> 01:18:24.955
<v Speaker 1>K.

01:18:27.080 --> 01:18:29.080
<v Speaker 1>Okay. Let's go back one step.

01:18:30.520 --> 01:18:32.280
<v Speaker 0>Alright. Well, we have ten

01:18:32.280 --> 01:18:33.080
<v Speaker 0>minutes left. So

01:18:33.880 --> 01:18:34.600
<v Speaker 0>let's

01:18:36.760 --> 01:18:38.945
<v Speaker 0>oh, Dan, I really hate you.

01:18:42.705 --> 01:18:44.385
<v Speaker 0>He turned on swap and all the notes,

01:18:44.385 --> 01:18:45.985
<v Speaker 0>of course he did. Right.

01:18:46.625 --> 01:18:48.545
<v Speaker 1>So you you disabled swap and all the

01:18:48.545 --> 01:18:51.105
<v Speaker 1>notes. Correct? No. I I just disabled one

01:18:51.105 --> 01:18:52.545
<v Speaker 0>note. I'm a cowboy.

01:18:58.760 --> 01:19:00.920
<v Speaker 0>So that means swap off

01:19:01.880 --> 01:19:03.239
<v Speaker 0>Smiley isn't it?

01:19:04.200 --> 01:19:05.400
<v Speaker 0>Restart kubelet.

01:19:11.475 --> 01:19:12.595
<v Speaker 0>Dart mode.

01:19:16.675 --> 01:19:17.875
<v Speaker 0>Okay.

01:19:18.035 --> 01:19:18.915
<v Speaker 0>Swap off.

01:19:21.420 --> 01:19:22.860
<v Speaker 0>That's a good thing for me to remember

01:19:22.860 --> 01:19:25.100
<v Speaker 0>for future episodes of this since that people

01:19:25.100 --> 01:19:26.860
<v Speaker 0>are thrilled and will break all the nodes

01:19:26.860 --> 01:19:28.140
<v Speaker 0>and not just one of them.

01:19:28.540 --> 01:19:30.380
<v Speaker 0>I think Dan is cruel.

01:19:32.860 --> 01:19:35.020
<v Speaker 0>Okay. Let's jump back onto the first node.

01:19:35.020 --> 01:19:36.695
<v Speaker 0>We'll try a couple more things and then

01:19:36.695 --> 01:19:38.855
<v Speaker 0>we'll just ask Dan to maybe

01:19:38.855 --> 01:19:40.535
<v Speaker 0>we'll just get this working before we wrap

01:19:40.535 --> 01:19:41.895
<v Speaker 0>up for today. So

01:19:42.215 --> 01:19:43.255
<v Speaker 0>let's

01:19:43.255 --> 01:19:44.614
<v Speaker 0>see what happens with

01:19:46.375 --> 01:19:48.295
<v Speaker 0>yeah. Let's

01:19:48.295 --> 01:19:49.015
<v Speaker 0>try get notes.

01:19:51.580 --> 01:19:52.780
<v Speaker 0>No, we're still

01:19:53.739 --> 01:19:54.539
<v Speaker 0>broken.

01:19:55.820 --> 01:19:57.579
<v Speaker 0>Do we have an API server?

01:19:59.660 --> 01:19:59.980
<v Speaker 0>No.

01:20:04.665 --> 01:20:06.425
<v Speaker 0>So maybe SCD has just not got a

01:20:06.425 --> 01:20:07.465
<v Speaker 0>core yet,

01:20:08.345 --> 01:20:10.105
<v Speaker 0>which would mean that the server wouldn't be

01:20:10.105 --> 01:20:12.185
<v Speaker 0>able to start. Okay. Okay. Should we be

01:20:12.185 --> 01:20:13.625
<v Speaker 0>able to check the server logs to see

01:20:13.625 --> 01:20:15.785
<v Speaker 0>for a different error, I guess? The so

01:20:15.785 --> 01:20:17.705
<v Speaker 1>the SCD logs are in the same place.

01:20:17.785 --> 01:20:18.425
<v Speaker 1>Varlib

01:20:18.960 --> 01:20:21.599
<v Speaker 1>Varlib containers, HCD there. So

01:20:22.239 --> 01:20:24.400
<v Speaker 1>if I cannot get to the container, at

01:20:24.560 --> 01:20:26.159
<v Speaker 1>least I can get its logs.

01:20:27.120 --> 01:20:29.280
<v Speaker 1>Okay. The Varlog container. Right?

01:20:29.680 --> 01:20:30.480
<v Speaker 0>Yes.

01:20:31.200 --> 01:20:32.239
<v Speaker 0>HCD.

01:20:33.520 --> 01:20:36.025
<v Speaker 1>No. It would be just the and it

01:20:36.665 --> 01:20:38.185
<v Speaker 1>It's a scheduler.

01:20:39.785 --> 01:20:41.385
<v Speaker 1>And let's grab the HDD.

01:20:41.945 --> 01:20:44.185
<v Speaker 0>Yeah. I don't know why it's not all

01:20:44.185 --> 01:20:44.985
<v Speaker 0>complete.

01:20:45.465 --> 01:20:46.425
<v Speaker 1>Yeah. So

01:20:47.705 --> 01:20:49.970
<v Speaker 1>let's get one of these. Let's, for example,

01:20:49.970 --> 01:20:51.170
<v Speaker 1>this one this one.

01:20:59.330 --> 01:21:01.010
<v Speaker 1>Did we get the right one?

01:21:01.330 --> 01:21:02.130
<v Speaker 0>I hope so.

01:21:06.325 --> 01:21:08.005
<v Speaker 0>Oh, sorry. You type.

01:21:10.005 --> 01:21:10.725
<v Speaker 1>Okay.

01:21:23.660 --> 01:21:24.940
<v Speaker 1>Not such five.

01:21:29.580 --> 01:21:31.340
<v Speaker 0>Yeah. I think it's only pasted half of

01:21:31.340 --> 01:21:31.820
<v Speaker 0>it.

01:21:33.420 --> 01:21:35.820
<v Speaker 0>Well, thanks for that vote of confidence, Dan.

01:21:35.820 --> 01:21:37.100
<v Speaker 0>He thinks

01:21:37.155 --> 01:21:38.114
<v Speaker 0>we've fixed it.

01:21:52.920 --> 01:21:55.880
<v Speaker 0>And the other Daniel, Daniel Louen Lou Ellen

01:21:55.880 --> 01:21:57.719
<v Speaker 0>has said that we may have just overwritten

01:21:57.719 --> 01:21:58.760
<v Speaker 0>that Rawkode file.

01:21:59.880 --> 01:22:02.280
<v Speaker 1>We might have what? Overwritten the

01:22:02.760 --> 01:22:03.560
<v Speaker 0>that log.

01:22:05.614 --> 01:22:06.574
<v Speaker 1>Maybe.

01:22:09.135 --> 01:22:10.655
<v Speaker 1>But there are two of them.

01:22:15.695 --> 01:22:17.695
<v Speaker 0>Okay. Why don't we just do cat etcd

01:22:17.695 --> 01:22:18.015
<v Speaker 0>star?

01:22:19.400 --> 01:22:20.199
<v Speaker 1>Okay.

01:22:20.440 --> 01:22:22.120
<v Speaker 0>Let's see if that works. There.

01:22:22.600 --> 01:22:23.640
<v Speaker 0>Helpful k?

01:22:24.600 --> 01:22:26.680
<v Speaker 1>So etcd is not an issue.

01:22:28.120 --> 01:22:31.765
<v Speaker 1>There was indicating a symlink. Yeah. That's

01:22:31.765 --> 01:22:34.005
<v Speaker 0>only healthy for thirty seconds. So why don't

01:22:34.005 --> 01:22:35.285
<v Speaker 0>we test,

01:22:35.285 --> 01:22:36.324
<v Speaker 0>get notes?

01:22:38.085 --> 01:22:39.445
<v Speaker 0>Okay. So

01:22:41.125 --> 01:22:43.045
<v Speaker 0>we just had to wait for LCD to

01:22:43.890 --> 01:22:44.929
<v Speaker 0>be happy.

01:22:45.250 --> 01:22:46.289
<v Speaker 1>Settle.

01:22:46.850 --> 01:22:48.690
<v Speaker 1>Okay. Can we try our bots?

01:22:50.210 --> 01:22:51.329
<v Speaker 1>Okay.

01:22:52.530 --> 01:22:54.130
<v Speaker 1>Can we do that? Okay.

01:22:54.290 --> 01:22:56.770
<v Speaker 1>That's good. Cluster oh, crash through back up.

01:22:57.255 --> 01:22:58.374
<v Speaker 1>The control manager.

01:23:00.295 --> 01:23:01.334
<v Speaker 1>Alright.

01:23:01.735 --> 01:23:02.854
<v Speaker 1>No Definity.

01:23:03.094 --> 01:23:04.935
<v Speaker 1>Don't tell me he did the No Definity

01:23:04.935 --> 01:23:05.255
<v Speaker 1>also.

01:23:10.770 --> 01:23:12.530
<v Speaker 1>You want to check the RawDefinity or do

01:23:12.530 --> 01:23:14.050
<v Speaker 1>you want to check the Control Manager? Control

01:23:14.050 --> 01:23:16.130
<v Speaker 1>Manager, I think is the best. Yeah.

01:23:20.530 --> 01:23:21.010
<v Speaker 1>Okay.

01:23:21.435 --> 01:23:23.835
<v Speaker 1>So we have one Right. Not a problem.

01:23:34.300 --> 01:23:36.540
<v Speaker 1>I never used minus f for logs. What

01:23:36.540 --> 01:23:38.540
<v Speaker 1>is my oh, minus f follow. Okay. Yeah.

01:23:38.540 --> 01:23:39.019
<v Speaker 1>I

01:23:42.860 --> 01:23:44.699
<v Speaker 1>would do the for a crash loop, I

01:23:44.699 --> 01:23:46.795
<v Speaker 1>would usually do the previous because the previous

01:23:46.795 --> 01:23:49.675
<v Speaker 1>will show will terminate in an error

01:23:50.635 --> 01:23:52.155
<v Speaker 1>if there is an error.

01:23:52.555 --> 01:23:53.995
<v Speaker 1>But, also, I would I would love to

01:23:53.995 --> 01:23:56.315
<v Speaker 1>describe first just to check the reason.

01:24:02.290 --> 01:24:04.290
<v Speaker 1>And if you grab for reason

01:24:14.610 --> 01:24:17.330
<v Speaker 1>Reason crash loop back off. Very helpful indeed.

01:24:22.345 --> 01:24:22.905
<v Speaker 0>Okay.

01:24:26.265 --> 01:24:28.425
<v Speaker 0>Okay. So what do we got?

01:24:30.745 --> 01:24:32.265
<v Speaker 0>I think it might just need to restart

01:24:32.265 --> 01:24:32.505
<v Speaker 0>it.

01:24:33.850 --> 01:24:35.050
<v Speaker 1>Quote quota monitor.

01:24:36.330 --> 01:24:38.010
<v Speaker 1>Quote

01:24:38.010 --> 01:24:38.969
<v Speaker 1>monitor.

01:24:38.969 --> 01:24:40.890
<v Speaker 1>Restart the resource quota. Ah, there is a

01:24:40.890 --> 01:24:41.769
<v Speaker 1>resource quota.

01:24:42.010 --> 01:24:44.890
<v Speaker 1>Can you check OC okay. OC. Cube control

01:24:44.890 --> 01:24:46.505
<v Speaker 1>get quota. Good.

01:24:47.865 --> 01:24:49.385
<v Speaker 1>On the cube system.

01:24:55.545 --> 01:24:57.785
<v Speaker 1>There is no no resource. Okay. How about

01:24:57.785 --> 01:24:58.745
<v Speaker 1>network policies?

01:24:59.930 --> 01:25:00.810
<v Speaker 1>Net one?

01:25:05.610 --> 01:25:07.370
<v Speaker 1>Okay. It's not that evil.

01:25:08.970 --> 01:25:11.130
<v Speaker 0>Yeah. Hold on. Let's find a real error

01:25:11.130 --> 01:25:15.130
<v Speaker 0>here. But it says I saw some quota

01:25:14.645 --> 01:25:17.525
<v Speaker 1>messages. Error start to node IPAM.

01:25:18.245 --> 01:25:20.405
<v Speaker 0>Failed to mark CIDR 1 9 2 1

01:25:20.405 --> 01:25:22.965
<v Speaker 0>6 8 0 0 Slash 20 4 IDX

01:25:22.965 --> 01:25:25.045
<v Speaker 0>occupied. 1323.

01:25:26.085 --> 01:25:27.605
<v Speaker 0>Dan thinks these are red headings.

01:25:28.300 --> 01:25:30.380
<v Speaker 0>He says it's not him.

01:25:31.420 --> 01:25:33.179
<v Speaker 1>Okay. They read they read they read the

01:25:33.179 --> 01:25:35.900
<v Speaker 1>bots and let's see. Yeah. Oh, it looks

01:25:35.900 --> 01:25:38.539
<v Speaker 1>like a call DNS controller manager.

01:25:40.219 --> 01:25:41.659
<v Speaker 1>Is one of them running? One of them

01:25:41.659 --> 01:25:44.535
<v Speaker 1>is no. But it's not ready. It's running,

01:25:44.535 --> 01:25:46.615
<v Speaker 1>but it's not ready. And we have bending.

01:25:46.615 --> 01:25:47.975
<v Speaker 1>Why is it bending? Can we check why

01:25:47.975 --> 01:25:48.855
<v Speaker 1>it's bending?

01:25:50.615 --> 01:25:51.735
<v Speaker 1>Two seconds.

01:25:54.455 --> 01:25:55.415
<v Speaker 1>Cube control.

01:25:55.740 --> 01:25:56.700
<v Speaker 1>My second.

01:25:57.820 --> 01:25:58.860
<v Speaker 1>Describe.

01:26:01.020 --> 01:26:01.820
<v Speaker 1>Nope.

01:26:03.660 --> 01:26:04.220
<v Speaker 1>Okay.

01:26:11.675 --> 01:26:13.594
<v Speaker 0>You're a terrible person, Dan.

01:26:13.915 --> 01:26:17.675
<v Speaker 1>Terrible person. Container image. Okay. Already present a

01:26:17.675 --> 01:26:20.635
<v Speaker 1>machine. Change the and recreate it.

01:26:22.955 --> 01:26:23.675
<v Speaker 1>You control.

01:26:24.280 --> 01:26:24.999
<v Speaker 1>Get

01:26:32.199 --> 01:26:32.999
<v Speaker 1>rep

01:26:33.800 --> 01:26:34.360
<v Speaker 1>controller.

01:26:36.375 --> 01:26:38.455
<v Speaker 0>So let's jump

01:26:38.455 --> 01:26:40.855
<v Speaker 0>on to the first node. The first node.

01:26:41.735 --> 01:26:43.415
<v Speaker 1>Update another location.

01:26:43.655 --> 01:26:45.974
<v Speaker 1>Warning. Invalid disk capacity.

01:26:47.895 --> 01:26:49.015
<v Speaker 1>This was six minutes.

01:26:51.860 --> 01:26:54.020
<v Speaker 1>Can you do queue control describe node this

01:26:54.020 --> 01:26:54.659
<v Speaker 1>node?

01:27:02.980 --> 01:27:04.020
<v Speaker 1>Cluster.

01:27:04.020 --> 01:27:04.260
<v Speaker 1>Yeah.

01:27:12.315 --> 01:27:13.835
<v Speaker 1>And allocated resources.

01:27:15.435 --> 01:27:17.435
<v Speaker 1>I don't okay. So do you remember can

01:27:17.435 --> 01:27:19.515
<v Speaker 1>you go up? Let's do less.

01:27:23.110 --> 01:27:23.909
<v Speaker 1>Okay.

01:27:27.670 --> 01:27:29.670
<v Speaker 1>Conditions. Network unavailable.

01:27:30.550 --> 01:27:33.750
<v Speaker 1>Memory is good. Disc pressure falls. Disc VID

01:27:33.750 --> 01:27:34.230
<v Speaker 1>pressure.

01:27:35.385 --> 01:27:39.224
<v Speaker 1>Ready. So what's the capacity CPU? 48.

01:27:41.785 --> 01:27:43.625
<v Speaker 1>So why did I get this this case

01:27:43.625 --> 01:27:44.185
<v Speaker 1>with there?

01:27:50.980 --> 01:27:51.780
<v Speaker 1>Okay.

01:27:54.820 --> 01:27:56.419
<v Speaker 1>You have a metric server?

01:27:59.619 --> 01:28:01.940
<v Speaker 1>Why does it say this capacity is wrong?

01:28:05.905 --> 01:28:08.545
<v Speaker 1>Okay. Let's run the a cube control events

01:28:08.545 --> 01:28:09.905
<v Speaker 1>and create for warming.

01:28:16.705 --> 01:28:17.585
<v Speaker 1>Oh, yeah.

01:28:18.000 --> 01:28:20.239
<v Speaker 1>Keep get the events. Yep.

01:28:22.160 --> 01:28:24.000
<v Speaker 1>Okay. Why does it say

01:28:24.320 --> 01:28:26.880
<v Speaker 1>invalid disk capacity? This was fifteen minutes ago,

01:28:26.880 --> 01:28:27.920
<v Speaker 1>fifteen minutes ago,

01:28:28.800 --> 01:28:31.014
<v Speaker 1>and it's all in cluster two. Maybe they

01:28:31.014 --> 01:28:33.094
<v Speaker 1>forgot cluster two. You didn't remove the eviction

01:28:33.094 --> 01:28:33.814
<v Speaker 1>and stuff.

01:28:34.454 --> 01:28:35.894
<v Speaker 0>I thought You got it to press

01:28:37.255 --> 01:28:39.974
<v Speaker 1>on image file system. On image file system.

01:28:49.440 --> 01:28:51.440
<v Speaker 1>Yeah. Or two over

01:28:54.160 --> 01:28:55.200
<v Speaker 1>He

01:28:55.360 --> 01:28:57.440
<v Speaker 1>said he said the side arrange to local

01:28:57.440 --> 01:28:57.840
<v Speaker 1>host.

01:29:37.565 --> 01:29:38.365
<v Speaker 1>Testing.

01:29:39.725 --> 01:29:41.245
<v Speaker 0>Where did the controller manager go?

01:29:47.340 --> 01:29:48.219
<v Speaker 1>Try again.

01:29:51.820 --> 01:29:53.660
<v Speaker 1>Oh, if you did you need to restart

01:29:53.660 --> 01:29:55.739
<v Speaker 1>the kubelet if you change the network

01:29:56.140 --> 01:29:58.380
<v Speaker 1>because you need to restart all bots.

01:29:58.940 --> 01:30:01.605
<v Speaker 1>So basically, restarting the kubelet will be actually,

01:30:01.605 --> 01:30:03.524
<v Speaker 1>restarting the node will be the easiest.

01:30:04.005 --> 01:30:05.525
<v Speaker 1>But restarting the kubelet might

01:30:09.204 --> 01:30:10.965
<v Speaker 0>Yeah. We've got a control manager. He said

01:30:10.965 --> 01:30:11.925
<v Speaker 1>he

01:30:12.324 --> 01:30:13.844
<v Speaker 1>said he did it on the first control

01:30:13.844 --> 01:30:14.324
<v Speaker 1>plane.

01:30:17.860 --> 01:30:19.860
<v Speaker 1>So the problem with network settings,

01:30:22.100 --> 01:30:24.580
<v Speaker 1>all bots will have the wrong settings,

01:30:24.580 --> 01:30:26.740
<v Speaker 1>so you have to basically restart them all.

01:30:27.465 --> 01:30:29.224
<v Speaker 1>When we ah, basically,

01:30:29.224 --> 01:30:32.425
<v Speaker 1>restarting the container runtime will will get you

01:30:32.425 --> 01:30:33.864
<v Speaker 1>the same effect.

01:30:36.344 --> 01:30:38.425
<v Speaker 1>Actually, restarting the node would be better.

01:30:47.150 --> 01:30:48.350
<v Speaker 1>He left again.

01:30:49.870 --> 01:30:50.750
<v Speaker 0>Oh, you're funny.

01:30:53.775 --> 01:30:56.015
<v Speaker 0>I think our cluster's healthy now. Right?

01:30:58.575 --> 01:31:00.255
<v Speaker 1>I'm not going to use it.

01:31:01.615 --> 01:31:03.695
<v Speaker 1>I'll stay away from this kind of clusters.

01:31:05.710 --> 01:31:06.829
<v Speaker 0>So we fixed

01:31:11.230 --> 01:31:11.710
<v Speaker 1>I mean

01:31:13.070 --> 01:31:13.949
<v Speaker 0>I bet.

01:31:16.429 --> 01:31:17.469
<v Speaker 1>You can help it.

01:31:19.085 --> 01:31:21.165
<v Speaker 1>Oh, you have self response. He's probably did

01:31:21.165 --> 01:31:23.085
<v Speaker 0>that same change on the other nodes. Right?

01:31:36.190 --> 01:31:38.269
<v Speaker 0>Oh, no. I got the cluster CIDR wrong.

01:31:39.550 --> 01:31:42.670
<v Speaker 1>Oh, 192. What was it? Well, I thought

01:31:42.670 --> 01:31:45.870
<v Speaker 0>our cluster CIDR was 19216800Slash16.

01:31:48.355 --> 01:31:52.835
<v Speaker 1>Let's see. But maybe it's actually 17200016.

01:31:54.435 --> 01:31:56.275
<v Speaker 0>Because our pod CIDR yeah. Our pod CIDR

01:31:56.275 --> 01:31:57.395
<v Speaker 0>would be Yes. Yes. Yes.

01:32:03.230 --> 01:32:05.150
<v Speaker 0>How are you doing for time while we

01:32:05.150 --> 01:32:06.510
<v Speaker 0>while we wrap this up?

01:32:07.230 --> 01:32:08.429
<v Speaker 1>I guess so.

01:32:14.185 --> 01:32:17.145
<v Speaker 0>Thanks, Dan. It was fun, at least.

01:32:19.625 --> 01:32:21.865
<v Speaker 1>So what do you think? How realistic was

01:32:21.865 --> 01:32:24.185
<v Speaker 1>it? So

01:32:25.200 --> 01:32:26.400
<v Speaker 1>UFW,

01:32:27.040 --> 01:32:29.120
<v Speaker 1>I think it could be realistic. I saw

01:32:29.120 --> 01:32:32.000
<v Speaker 1>it I saw some basically, someone is going

01:32:32.000 --> 01:32:33.760
<v Speaker 1>to install something on a node. And this

01:32:33.760 --> 01:32:35.440
<v Speaker 1>is the problem if you have fat nodes,

01:32:35.440 --> 01:32:37.360
<v Speaker 1>Buntu, Red Hat, or something like this, not

01:32:37.360 --> 01:32:38.960
<v Speaker 1>like container operating systems

01:32:39.515 --> 01:32:42.795
<v Speaker 1>like FlatCar or Fidora CoreOS or something like

01:32:42.795 --> 01:32:43.275
<v Speaker 1>this.

01:32:44.395 --> 01:32:46.155
<v Speaker 1>So they do an update or they want

01:32:46.155 --> 01:32:48.155
<v Speaker 1>to install an extra software to test or

01:32:48.155 --> 01:32:50.315
<v Speaker 1>something like this, and they will add another

01:32:50.315 --> 01:32:52.475
<v Speaker 1>rule. And they forget that this is, like,

01:32:53.570 --> 01:32:56.130
<v Speaker 1>a different node and it's specific, especially in

01:32:56.130 --> 01:32:58.449
<v Speaker 1>test cluster. This will never happen in production.

01:32:59.170 --> 01:33:01.010
<v Speaker 1>No? I don't think this will happen in

01:33:01.010 --> 01:33:02.849
<v Speaker 1>production. Hopefully not, Daniel.

01:33:04.690 --> 01:33:06.610
<v Speaker 0>Well, that yeah. That was the only problem

01:33:06.255 --> 01:33:08.735
<v Speaker 0>yeah. We had the firewall, we then had

01:33:08.815 --> 01:33:10.894
<v Speaker 0>Yeah. The weird eviction rules,

01:33:11.534 --> 01:33:14.255
<v Speaker 0>idea how those got there. Yes. We got

01:33:14.255 --> 01:33:16.255
<v Speaker 0>the four or 15 terabyte files in the

01:33:16.255 --> 01:33:18.495
<v Speaker 0>root partition and the root file system.

01:33:19.100 --> 01:33:20.540
<v Speaker 0>There was the

01:33:21.180 --> 01:33:24.060
<v Speaker 0>cluster cider tweaks across the controller. The swap

01:33:24.060 --> 01:33:25.900
<v Speaker 1>could happen. The swap, I saw this happen.

01:33:25.900 --> 01:33:28.780
<v Speaker 1>The swap, yes. For the cube admin cluster,

01:33:28.940 --> 01:33:30.380
<v Speaker 1>that that's definitely

01:33:31.820 --> 01:33:32.620
<v Speaker 1>is happening.

01:33:34.885 --> 01:33:37.365
<v Speaker 1>I mean, for managed cluster for and for

01:33:37.365 --> 01:33:41.205
<v Speaker 1>on premise turnkey clusters like OpenShift or Rancher,

01:33:41.685 --> 01:33:43.685
<v Speaker 1>I don't need to play with the manifest.

01:33:43.685 --> 01:33:45.605
<v Speaker 1>I don't need to play with the configurations

01:33:45.605 --> 01:33:47.840
<v Speaker 1>of the API and the scheduler. Scheduler.

01:33:48.560 --> 01:33:50.480
<v Speaker 1>The CIDR, I only needed in the beginning

01:33:50.480 --> 01:33:51.679
<v Speaker 1>of the installations.

01:33:54.560 --> 01:33:57.040
<v Speaker 0>Well, I think we we had some fun.

01:33:57.200 --> 01:33:59.280
<v Speaker 0>That was that was really interesting. I think,

01:33:59.280 --> 01:34:01.680
<v Speaker 0>you know, even just the the way that

01:34:02.165 --> 01:34:03.925
<v Speaker 0>hopefully the way that we work with the

01:34:03.925 --> 01:34:06.405
<v Speaker 0>tools, looking at the different components, the logs,

01:34:06.405 --> 01:34:08.965
<v Speaker 0>system d, where configuration lives, I hope a

01:34:08.965 --> 01:34:10.805
<v Speaker 0>lot of people find this useful and it

01:34:10.805 --> 01:34:12.805
<v Speaker 0>helps them debug on Kubernetes clusters in the

01:34:12.805 --> 01:34:13.364
<v Speaker 0>future.

01:34:14.245 --> 01:34:16.770
<v Speaker 0>Thank you to Lee and to Dan for

01:34:16.770 --> 01:34:19.650
<v Speaker 0>their tire fire clusters. Hopefully we fixed Lee's.

01:34:19.650 --> 01:34:21.090
<v Speaker 0>I'll speak to him afterwards.

01:34:21.730 --> 01:34:23.969
<v Speaker 0>And I'll be back next week with two

01:34:23.969 --> 01:34:25.329
<v Speaker 0>more broken clusters.

01:34:25.969 --> 01:34:27.809
<v Speaker 1>Thank you, Dan. Dan will not be back.

01:34:27.809 --> 01:34:29.649
<v Speaker 0>Sorry, mate. You're you're out.

01:34:30.289 --> 01:34:32.795
<v Speaker 0>Well, thank you for taking some time out

01:34:32.795 --> 01:34:34.395
<v Speaker 0>of your day joining me today, sharing your

01:34:34.395 --> 01:34:36.635
<v Speaker 0>knowledge. It was great just to see your

01:34:36.635 --> 01:34:38.954
<v Speaker 0>thought process and how we work with Kubernetes.

01:34:38.955 --> 01:34:39.994
<v Speaker 0>Thank you very much.

01:34:40.395 --> 01:34:42.715
<v Speaker 1>Thank you. Have great day. Thanks for watching

01:34:42.715 --> 01:34:44.650
<v Speaker 0>everyone. Yes, that's fine. Bye. Bye.
