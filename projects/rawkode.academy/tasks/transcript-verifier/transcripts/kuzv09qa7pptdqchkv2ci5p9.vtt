WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: 91ad3861-58b3-4ec7-ae0c-48c63056aa22
Created: 2025-04-29T17:17:03.036Z
Duration: 6707.6475
Channels: 1

00:01:19.085 --> 00:01:20.605
<v Speaker 0>We'll bother pushing the video now because I've

00:01:20.605 --> 00:01:23.245
<v Speaker 0>accidentally just pushed myself to the front. Hello.

00:01:23.245 --> 00:01:25.405
<v Speaker 0>Welcome to the Rawkode Academy.

00:01:25.965 --> 00:01:28.845
<v Speaker 0>This is our second episode of clustered this

00:01:28.845 --> 00:01:29.325
<v Speaker 0>week

00:01:29.670 --> 00:01:32.310
<v Speaker 0>And we have two great clusters, two great

00:01:32.310 --> 00:01:35.030
<v Speaker 0>guests, and I'm looking forward to fixing some

00:01:35.030 --> 00:01:36.470
<v Speaker 0>very broken clusters.

00:01:36.950 --> 00:01:38.790
<v Speaker 0>Thank you to everyone who's tuning into the

00:01:38.790 --> 00:01:40.870
<v Speaker 0>chat. I'll get your messages up in just

00:01:40.870 --> 00:01:42.870
<v Speaker 0>a second. But before we do that, I

00:01:42.870 --> 00:01:45.395
<v Speaker 0>do wanna say hello and thank you to

00:01:45.395 --> 00:01:46.435
<v Speaker 0>our sponsors.

00:01:47.235 --> 00:01:49.634
<v Speaker 0>So since the beginning of Clustered, we have

00:01:49.634 --> 00:01:52.115
<v Speaker 0>been using Teleport. And almost since the beginning,

00:01:52.115 --> 00:01:54.274
<v Speaker 0>Teleport have been sponsor and Clustered.

00:01:54.835 --> 00:01:56.914
<v Speaker 0>And I really just can't thank them enough.

00:01:56.914 --> 00:01:59.155
<v Speaker 0>I generally believe that Teleport is a product,

00:01:59.330 --> 00:02:01.490
<v Speaker 0>an open source tool that you don't even

00:02:01.490 --> 00:02:02.930
<v Speaker 0>need to pay for, that everyone should have

00:02:02.930 --> 00:02:06.210
<v Speaker 0>in their infrastructure to commoditize access, facilitate pairing

00:02:06.210 --> 00:02:07.170
<v Speaker 0>and debugging.

00:02:07.250 --> 00:02:08.690
<v Speaker 0>You'll see us use that today.

00:02:09.410 --> 00:02:11.250
<v Speaker 0>I also need to thank Equinix Medal. They

00:02:11.250 --> 00:02:13.650
<v Speaker 0>continue to graciously provide all of the hardware

00:02:13.650 --> 00:02:15.735
<v Speaker 0>that we use for these three node bare

00:02:15.735 --> 00:02:18.375
<v Speaker 0>metal Kubernetes clusters with tons of RAM and

00:02:18.375 --> 00:02:20.055
<v Speaker 0>tons of CPU.

00:02:20.695 --> 00:02:22.615
<v Speaker 0>Is it all necessary for clustered?

00:02:22.855 --> 00:02:25.415
<v Speaker 1>Hell no. But is it fun? Damn right.

00:02:25.415 --> 00:02:26.935
<v Speaker 0>So thank you Equinix Metal.

00:02:27.950 --> 00:02:30.430
<v Speaker 0>Alright. Let's get some chat messages on the

00:02:30.430 --> 00:02:33.150
<v Speaker 0>screen and bring in our guest today.

00:02:35.870 --> 00:02:37.070
<v Speaker 0>Push the button.

00:02:37.709 --> 00:02:39.790
<v Speaker 0>There we go. I am having an absolute

00:02:39.790 --> 00:02:42.030
<v Speaker 0>failure of the button presses today. I think

00:02:42.030 --> 00:02:44.245
<v Speaker 0>it's because it's a Friday and it's like

00:02:44.245 --> 00:02:46.565
<v Speaker 0>05:30 and my brain is clearly just switched

00:02:46.565 --> 00:02:47.845
<v Speaker 0>off. However,

00:02:48.165 --> 00:02:50.565
<v Speaker 0>welcome, Adrian. Welcome, William. Thank you both for

00:02:50.565 --> 00:02:53.685
<v Speaker 0>joining me again. You're both returning cluster clusters.

00:02:53.925 --> 00:02:54.725
<v Speaker 0>Let's

00:02:54.725 --> 00:02:57.205
<v Speaker 0>start with some hellos. We'll start with you,

00:02:57.205 --> 00:02:59.365
<v Speaker 0>Adrian, and then over to William. Please introduce

00:02:59.365 --> 00:02:59.765
<v Speaker 0>yourselves.

00:03:01.820 --> 00:03:04.380
<v Speaker 2>Yeah. Hello. My name is Adrian.

00:03:04.940 --> 00:03:08.060
<v Speaker 2>Been doing Kubernetes things for quite a while

00:03:08.060 --> 00:03:11.420
<v Speaker 2>now. Not anymore, which is interesting. Doing back

00:03:11.420 --> 00:03:13.100
<v Speaker 2>to back end development since recently.

00:03:14.735 --> 00:03:16.335
<v Speaker 2>Yeah, look forward to

00:03:16.895 --> 00:03:18.495
<v Speaker 2>mess around with some clusters.

00:03:19.375 --> 00:03:21.775
<v Speaker 2>I currently work at field. They are looking

00:03:21.775 --> 00:03:23.855
<v Speaker 2>for infrastructure engineers. They told me to plug

00:03:23.855 --> 00:03:25.695
<v Speaker 2>that if you they

00:03:26.815 --> 00:03:28.575
<v Speaker 2>asked me, and I said, no. I want

00:03:28.575 --> 00:03:29.375
<v Speaker 2>to do back end stuff.

00:03:30.069 --> 00:03:33.270
<v Speaker 2>And, yeah, I'm looking for it.

00:03:33.670 --> 00:03:34.310
<v Speaker 2>How

00:03:34.790 --> 00:03:36.950
<v Speaker 2>to see you struggle and

00:03:37.670 --> 00:03:38.470
<v Speaker 2>or not.

00:03:41.110 --> 00:03:43.510
<v Speaker 0>Yeah. Awesome. Thank you very much. William?

00:03:46.465 --> 00:03:49.745
<v Speaker 1>I'm William Lightning. I'm from Field Medical. I'm

00:03:49.745 --> 00:03:51.425
<v Speaker 1>a systems architect, and

00:03:51.585 --> 00:03:53.585
<v Speaker 1>my job is to fix things

00:03:54.145 --> 00:03:56.785
<v Speaker 1>and be responsible for the infrastructure and

00:03:57.425 --> 00:03:58.305
<v Speaker 1>basically

00:03:58.465 --> 00:03:59.185
<v Speaker 1>stuff like that.

00:03:59.930 --> 00:04:02.330
<v Speaker 1>So I'm I'm always looking forward to learning

00:04:02.330 --> 00:04:04.890
<v Speaker 1>new things and learning about new brakes before

00:04:04.890 --> 00:04:06.250
<v Speaker 1>I see them in production.

00:04:08.250 --> 00:04:10.330
<v Speaker 0>Awesome. Thank you both for sharing with us.

00:04:10.330 --> 00:04:12.330
<v Speaker 0>Alright. We're gonna kick things off

00:04:12.924 --> 00:04:13.565
<v Speaker 0>with

00:04:14.364 --> 00:04:15.965
<v Speaker 0>William. We're gonna be taking a look at

00:04:15.965 --> 00:04:18.524
<v Speaker 0>Adyen's cluster. If you've not joined us before,

00:04:18.524 --> 00:04:20.285
<v Speaker 0>the rules are simple.

00:04:20.845 --> 00:04:23.805
<v Speaker 0>Fix the cluster via any means necessary. In

00:04:23.805 --> 00:04:25.245
<v Speaker 0>order to fix it, all we mean is

00:04:25.245 --> 00:04:26.930
<v Speaker 0>you have to be able to upgrade the

00:04:26.930 --> 00:04:30.370
<v Speaker 0>clustered application from v one to v two.

00:04:31.009 --> 00:04:33.810
<v Speaker 0>My screen is now shared. I have opened

00:04:33.810 --> 00:04:37.570
<v Speaker 0>a session via Teleport's command line application.

00:04:38.210 --> 00:04:40.930
<v Speaker 0>And if you could join this session oh,

00:04:41.009 --> 00:04:41.569
<v Speaker 0>I haven't.

00:04:42.755 --> 00:04:44.435
<v Speaker 0>You don't even have access to the cluster,

00:04:44.435 --> 00:04:45.395
<v Speaker 0>do you William?

00:04:45.875 --> 00:04:46.595
<v Speaker 0>Nope.

00:04:47.875 --> 00:04:49.955
<v Speaker 0>Alright. That's because I'm sneaky and I don't

00:04:49.955 --> 00:04:51.315
<v Speaker 0>give you access beforehand.

00:04:51.315 --> 00:04:52.755
<v Speaker 0>So I'm gonna come in and modify your

00:04:52.755 --> 00:04:53.075
<v Speaker 0>role.

00:04:54.480 --> 00:04:56.480
<v Speaker 0>Very professional setup I've got here as you

00:04:56.480 --> 00:04:58.000
<v Speaker 0>can tell. However, it does mean I get

00:04:58.000 --> 00:04:58.960
<v Speaker 0>to show off a

00:04:59.440 --> 00:05:01.920
<v Speaker 0>teleport a bit more. So we restrict your

00:05:01.920 --> 00:05:04.160
<v Speaker 0>access with node labels.

00:05:05.280 --> 00:05:07.760
<v Speaker 0>And if I save this, refresh your server

00:05:07.760 --> 00:05:09.040
<v Speaker 0>list and you should have access.

00:05:13.275 --> 00:05:14.635
<v Speaker 0>And I will join from the web too

00:05:14.635 --> 00:05:16.795
<v Speaker 0>because we'll have them at some point and

00:05:16.795 --> 00:05:17.995
<v Speaker 0>there's a weird bug.

00:05:18.795 --> 00:05:20.555
<v Speaker 0>Alright. If you can just give me an

00:05:20.555 --> 00:05:21.515
<v Speaker 0>echo hello.

00:05:22.475 --> 00:05:23.915
<v Speaker 0>Say I have your cube config.

00:05:24.729 --> 00:05:26.250
<v Speaker 0>Check for a control plane and take it

00:05:26.250 --> 00:05:27.690
<v Speaker 0>away and best of luck.

00:05:29.770 --> 00:05:32.009
<v Speaker 1>Let's see here. Cube config. I always forget.

00:05:32.009 --> 00:05:33.050
<v Speaker 1>Does it have a

00:05:33.370 --> 00:05:35.610
<v Speaker 1>underscore in there or not? No. It doesn't.

00:05:35.610 --> 00:05:37.129
<v Speaker 0>It's just as as is. That's perfect.

00:05:44.875 --> 00:05:46.875
<v Speaker 1>Let's just start with a Nope.

00:05:49.540 --> 00:05:50.900
<v Speaker 0>No control plane.

00:05:52.420 --> 00:05:55.220
<v Speaker 0>Oh. There we go. One control plane. Good.

00:05:57.300 --> 00:06:00.820
<v Speaker 1>Oh, it's it's halfway through migrating something. Alright.

00:06:01.380 --> 00:06:03.060
<v Speaker 1>Well, that's

00:06:05.384 --> 00:06:06.185
<v Speaker 0>Yeah.

00:06:07.064 --> 00:06:08.585
<v Speaker 1>Let's see here. Should I go for rollout

00:06:08.585 --> 00:06:09.384
<v Speaker 1>status?

00:06:09.465 --> 00:06:12.664
<v Speaker 1>Alright. Let's just describe the describe the deploy,

00:06:14.425 --> 00:06:15.384
<v Speaker 1>clustered.

00:06:16.664 --> 00:06:18.585
<v Speaker 1>Let's just look at what we have here.

00:06:20.080 --> 00:06:21.840
<v Speaker 1>So we're still in v1,

00:06:24.080 --> 00:06:25.040
<v Speaker 1>minimum replicas,

00:06:25.040 --> 00:06:26.320
<v Speaker 1>unavailable progressing,

00:06:26.320 --> 00:06:28.000
<v Speaker 1>progress deadline, okay.

00:06:29.520 --> 00:06:30.480
<v Speaker 1>So

00:06:32.735 --> 00:06:34.335
<v Speaker 1>let's go back.

00:06:36.655 --> 00:06:38.495
<v Speaker 1>What if I roll back the deployment?

00:06:41.935 --> 00:06:43.375
<v Speaker 0>Yeah. I think it's worth a shot.

00:06:47.990 --> 00:06:49.990
<v Speaker 1>Roll back? Roll out

00:06:50.229 --> 00:06:51.190
<v Speaker 0>and then

00:06:53.509 --> 00:06:54.789
<v Speaker 0>yeah. I don't think we used do a

00:06:54.789 --> 00:06:56.630
<v Speaker 0>dash dash help on that. I can't remember.

00:06:57.270 --> 00:06:57.830
<v Speaker 1>Okay.

00:07:02.085 --> 00:07:03.525
<v Speaker 0>Undo. There you go.

00:07:03.925 --> 00:07:04.725
<v Speaker 1>Undo.

00:07:09.605 --> 00:07:10.405
<v Speaker 1>Okay.

00:07:11.845 --> 00:07:13.525
<v Speaker 1>Let's check out our pods.

00:07:15.800 --> 00:07:19.080
<v Speaker 1>So we also have pending. Everything's pending.

00:07:20.440 --> 00:07:22.360
<v Speaker 1>Oh, rolling back just created another one.

00:07:23.400 --> 00:07:26.760
<v Speaker 0>No, it's the same ones I Let's

00:07:26.760 --> 00:07:28.840
<v Speaker 1>check out all namespaces. Let's just look around.

00:07:30.925 --> 00:07:32.285
<v Speaker 1>So we got ciliums

00:07:32.285 --> 00:07:35.005
<v Speaker 1>and image pulled back off. I wish people

00:07:35.005 --> 00:07:36.765
<v Speaker 0>would stop messing with cilium.

00:07:39.405 --> 00:07:41.405
<v Speaker 0>What does cilium ever do to you, Arlene?

00:07:41.405 --> 00:07:41.725
<v Speaker 0>Come on.

00:07:43.680 --> 00:07:45.280
<v Speaker 1>Well, Selium is

00:07:45.760 --> 00:07:46.320
<v Speaker 1>oops.

00:07:48.160 --> 00:07:49.040
<v Speaker 1>Gotta

00:07:49.040 --> 00:07:52.000
<v Speaker 1>describe get deployments of all namespaces and that

00:07:52.000 --> 00:07:52.240
<v Speaker 1>should

00:07:55.395 --> 00:07:57.715
<v Speaker 1>we got the cilium operator.

00:07:59.955 --> 00:08:02.595
<v Speaker 1>Describe cilium operators. That's gonna be in the

00:08:02.595 --> 00:08:03.715
<v Speaker 1>cube system.

00:08:07.074 --> 00:08:08.754
<v Speaker 1>You can tell I'm not using tab complete.

00:08:09.199 --> 00:08:11.920
<v Speaker 1>Making a lot of interesting fun problems

00:08:17.440 --> 00:08:17.919
<v Speaker 1>to play.

00:08:28.335 --> 00:08:29.295
<v Speaker 1>Let's try.

00:08:30.175 --> 00:08:31.855
<v Speaker 1>Let's see if it it it is less

00:08:31.855 --> 00:08:33.615
<v Speaker 1>mess with things. There we go. No. I

00:08:33.695 --> 00:08:35.934
<v Speaker 0>no. I encourage less as much as possible.

00:08:35.934 --> 00:08:37.215
<v Speaker 0>It just means we see what you see.

00:08:37.440 --> 00:08:38.880
<v Speaker 0>So Yeah.

00:08:41.039 --> 00:08:42.480
<v Speaker 1>Operator generic.

00:08:42.880 --> 00:08:45.040
<v Speaker 1>So that is from cine cilium at least.

00:08:45.040 --> 00:08:45.520
<v Speaker 1>Right?

00:08:48.640 --> 00:08:49.040
<v Speaker 1>What's

00:08:49.680 --> 00:08:51.840
<v Speaker 1>you know what? I'm just gonna go

00:08:53.535 --> 00:08:54.654
<v Speaker 1>get rid of this.

00:08:56.654 --> 00:08:58.574
<v Speaker 1>Let's just edit it because then I get

00:08:58.574 --> 00:08:59.214
<v Speaker 1>them.

00:09:02.014 --> 00:09:04.095
<v Speaker 1>And I get an actual YAML file, which

00:09:04.095 --> 00:09:05.615
<v Speaker 1>is what I'm used to seeing.

00:09:07.079 --> 00:09:08.920
<v Speaker 1>So type rolling update.

00:09:12.759 --> 00:09:13.639
<v Speaker 1>So I'm wondering

00:09:15.880 --> 00:09:17.399
<v Speaker 1>I guess we should look at the logs.

00:09:17.399 --> 00:09:19.639
<v Speaker 1>That's probably what I should do. Well, what's

00:09:19.639 --> 00:09:21.720
<v Speaker 0>the what's the first symptom you wanna investigate

00:09:21.720 --> 00:09:22.040
<v Speaker 0>here?

00:09:23.015 --> 00:09:25.335
<v Speaker 0>Is it depending pods? Is it are you

00:09:25.335 --> 00:09:27.575
<v Speaker 0>just fixing Cilium because you see that it's

00:09:27.575 --> 00:09:30.535
<v Speaker 0>got a problem? Or, like, what's your Well,

00:09:30.615 --> 00:09:31.735
<v Speaker 1>figured the pods

00:09:32.775 --> 00:09:34.615
<v Speaker 1>well, if Cilium has a problem, then

00:09:35.399 --> 00:09:37.879
<v Speaker 1>I can't get networking, which means the pods

00:09:37.879 --> 00:09:39.959
<v Speaker 1>might not come up right. And so I'm

00:09:39.959 --> 00:09:41.720
<v Speaker 1>I'm trying to skip past

00:09:43.399 --> 00:09:45.720
<v Speaker 1>the pods being the problem and looking for

00:09:45.720 --> 00:09:46.920
<v Speaker 1>root issues.

00:09:47.079 --> 00:09:48.040
<v Speaker 1>But I'm not sure that's

00:09:50.065 --> 00:09:51.825
<v Speaker 1>because it's let's see here. If I go

00:09:51.825 --> 00:09:52.945
<v Speaker 1>get pods. Right?

00:09:54.465 --> 00:09:57.185
<v Speaker 1>Postgres is still running, but clustered is not.

00:09:58.865 --> 00:10:00.465
<v Speaker 1>And a hundred and thirty six minutes means

00:10:00.465 --> 00:10:01.025
<v Speaker 1>that

00:10:01.505 --> 00:10:03.585
<v Speaker 1>all those are fairly recent,

00:10:05.060 --> 00:10:06.020
<v Speaker 1>But they're

00:10:06.500 --> 00:10:07.060
<v Speaker 1>yeah.

00:10:08.500 --> 00:10:09.620
<v Speaker 1>So I'm trying to figure out, like, do

00:10:09.620 --> 00:10:11.060
<v Speaker 1>I wanna go back and look at the

00:10:11.060 --> 00:10:13.700
<v Speaker 1>networking or do I wanna look at pod?

00:10:13.700 --> 00:10:16.580
<v Speaker 1>I suspect let's confirm the events. Right? We

00:10:16.580 --> 00:10:17.540
<v Speaker 1>could we could

00:10:18.675 --> 00:10:20.435
<v Speaker 1>describe the pod and see why it's not

00:10:20.435 --> 00:10:22.595
<v Speaker 1>not loading. Yeah. I think that's a good

00:10:22.595 --> 00:10:24.755
<v Speaker 0>idea. I mean, I think networking is an

00:10:24.755 --> 00:10:26.595
<v Speaker 0>issue, but depending

00:10:26.595 --> 00:10:28.435
<v Speaker 0>leads me to think maybe

00:10:29.475 --> 00:10:30.915
<v Speaker 0>nodes unavailability,

00:10:30.915 --> 00:10:31.315
<v Speaker 0>tents.

00:10:33.830 --> 00:10:35.030
<v Speaker 0>Yeah. There we go.

00:10:37.110 --> 00:10:38.630
<v Speaker 0>Got two. One of had it.

00:10:40.070 --> 00:10:42.790
<v Speaker 1>The notepod didn't tolerate two nodes, had paint,

00:10:43.190 --> 00:10:45.190
<v Speaker 1>not ready. Okay. So

00:10:45.510 --> 00:10:47.430
<v Speaker 1>the master, that's expected

00:10:47.475 --> 00:10:49.315
<v Speaker 1>because we have the control plane. Right? But

00:10:49.315 --> 00:10:52.435
<v Speaker 1>the workers are both not ready. Yeah. That

00:10:52.834 --> 00:10:55.795
<v Speaker 0>see if control follow that. Let's

00:10:55.795 --> 00:10:56.995
<v Speaker 1>go look at our notes.

00:10:58.035 --> 00:10:58.834
<v Speaker 0>Yeah. They're broken.

00:11:03.029 --> 00:11:04.709
<v Speaker 2>You asked me to break it, so I

00:11:04.709 --> 00:11:05.670
<v Speaker 2>break it. That's

00:11:09.110 --> 00:11:09.750
<v Speaker 1>Well,

00:11:10.070 --> 00:11:11.750
<v Speaker 1>that's what we asked you to do. Right?

00:11:13.670 --> 00:11:14.390
<v Speaker 1>I don't know.

00:11:16.925 --> 00:11:18.524
<v Speaker 1>I'm always worried I'm gonna break it and

00:11:18.524 --> 00:11:20.205
<v Speaker 1>then not know how I broke it.

00:11:22.365 --> 00:11:23.165
<v Speaker 1>So

00:11:23.645 --> 00:11:27.084
<v Speaker 1>CPU limits good. Memory limits good. Not that

00:11:27.084 --> 00:11:28.445
<v Speaker 1>that's necessarily.

00:11:34.470 --> 00:11:36.230
<v Speaker 1>Container runtime not ready.

00:11:38.389 --> 00:11:40.389
<v Speaker 1>CNI plugin not initialized.

00:11:40.389 --> 00:11:42.550
<v Speaker 1>So we're back at our our our CNI.

00:11:42.550 --> 00:11:44.470
<v Speaker 1>Right? Our container network interface.

00:11:46.025 --> 00:11:47.785
<v Speaker 0>Yeah. We are indeed.

00:11:50.185 --> 00:11:50.985
<v Speaker 1>Alright.

00:11:52.825 --> 00:11:54.185
<v Speaker 0>But at least now we know why we're

00:11:54.185 --> 00:11:55.545
<v Speaker 0>looking into the networking.

00:11:56.825 --> 00:11:58.985
<v Speaker 1>Yeah. Instead of just jumping ahead.

00:12:00.879 --> 00:12:02.480
<v Speaker 1>Okay. So then

00:12:02.959 --> 00:12:05.279
<v Speaker 1>I I should go look at my mycelium

00:12:05.279 --> 00:12:06.160
<v Speaker 1>stuff. Right?

00:12:13.600 --> 00:12:14.399
<v Speaker 0>I'm gonna say

00:12:15.040 --> 00:12:15.439
<v Speaker 0>no.

00:12:16.395 --> 00:12:18.555
<v Speaker 0>I I don't know. Like, it's it's tough.

00:12:18.555 --> 00:12:19.995
<v Speaker 0>Right? I I I don't know what's broken

00:12:19.995 --> 00:12:21.835
<v Speaker 0>just as you don't know what's broken. And

00:12:21.835 --> 00:12:23.835
<v Speaker 0>there's definitely a psyllium issue.

00:12:25.835 --> 00:12:27.515
<v Speaker 0>The thing is popping into my head is

00:12:27.515 --> 00:12:29.560
<v Speaker 0>that we got all the nodes are not

00:12:29.560 --> 00:12:32.440
<v Speaker 0>ready. We've got a whole bunch of pods

00:12:32.440 --> 00:12:35.560
<v Speaker 0>and a pending and terminating status,

00:12:36.040 --> 00:12:37.560
<v Speaker 0>which makes me think that we might not

00:12:37.560 --> 00:12:39.800
<v Speaker 0>even have a cubelet, which is why the

00:12:39.800 --> 00:12:41.240
<v Speaker 0>pods are so stuck

00:12:42.075 --> 00:12:43.595
<v Speaker 1>on the Yeah. The control plane's not even

00:12:43.595 --> 00:12:45.595
<v Speaker 1>ready yet. That should be at least ready.

00:12:45.595 --> 00:12:47.755
<v Speaker 1>Let's look at the well, let's let's let

00:12:47.755 --> 00:12:48.715
<v Speaker 1>me look at that.

00:12:50.555 --> 00:12:51.595
<v Speaker 1>Ripe node.

00:12:54.230 --> 00:12:56.390
<v Speaker 1>Type two. No. Not available.

00:12:57.190 --> 00:12:59.270
<v Speaker 0>You can look at completions. How I look.

00:13:04.070 --> 00:13:04.870
<v Speaker 1>Left.

00:13:06.150 --> 00:13:07.910
<v Speaker 1>Okay. So

00:13:09.925 --> 00:13:11.925
<v Speaker 1>CNI plugin not initialized.

00:13:15.764 --> 00:13:16.644
<v Speaker 1>Okay. So

00:13:21.285 --> 00:13:23.444
<v Speaker 1>because that's not an Etsy

00:13:23.444 --> 00:13:26.404
<v Speaker 1>Kubernetes

00:13:25.980 --> 00:13:29.019
<v Speaker 1>manifest. Right? That's not you don't usually put

00:13:29.019 --> 00:13:29.820
<v Speaker 1>that in there.

00:13:30.459 --> 00:13:32.940
<v Speaker 1>Trying to remember. Because Helium is just an

00:13:33.500 --> 00:13:35.820
<v Speaker 1>a Helm chart you deploy into your cluster.

00:13:35.820 --> 00:13:36.300
<v Speaker 1>Right?

00:13:36.699 --> 00:13:38.060
<v Speaker 0>That is correct. Yes.

00:13:40.255 --> 00:13:41.055
<v Speaker 0>So

00:13:41.295 --> 00:13:42.975
<v Speaker 0>that means So it would have bypass.

00:13:44.815 --> 00:13:47.135
<v Speaker 1>Right. Well, it means we need a cubelet

00:13:47.135 --> 00:13:48.975
<v Speaker 0>to start cilium and if there's no cubelet

00:13:48.975 --> 00:13:50.255
<v Speaker 0>on any of the nodes or the control

00:13:50.255 --> 00:13:52.014
<v Speaker 0>plane node then we'll never get a work

00:13:52.014 --> 00:13:52.574
<v Speaker 0>in CNA.

00:13:59.529 --> 00:14:00.890
<v Speaker 0>We do appear to have one.

00:14:10.385 --> 00:14:12.145
<v Speaker 1>Okay.

00:14:19.425 --> 00:14:20.145
<v Speaker 1>I don't know.

00:14:21.800 --> 00:14:23.960
<v Speaker 1>Okay. So that IP does exist on the

00:14:23.960 --> 00:14:25.880
<v Speaker 1>on the server. That's what I was looking

00:14:25.880 --> 00:14:26.680
<v Speaker 1>at there.

00:14:27.640 --> 00:14:30.120
<v Speaker 0>Maybe check a look at the kiblet logs.

00:14:33.160 --> 00:14:35.800
<v Speaker 1>That's gonna be in system system control. Right?

00:14:35.800 --> 00:14:36.440
<v Speaker 0>Yeah. Correct.

00:14:42.795 --> 00:14:44.475
<v Speaker 1>I don't know. System control.

00:14:46.235 --> 00:14:47.195
<v Speaker 1>Oh, that's everything.

00:14:49.370 --> 00:14:50.490
<v Speaker 1>Is it logs?

00:14:51.850 --> 00:14:56.170
<v Speaker 1>No. You can do journal control dash flu

00:14:56.170 --> 00:14:56.889
<v Speaker 0>kubelet.

00:15:01.964 --> 00:15:03.805
<v Speaker 0>Flu, f l u. Sorry.

00:15:05.644 --> 00:15:07.325
<v Speaker 0>My Scottish accent there.

00:15:08.365 --> 00:15:09.325
<v Speaker 1>There we go.

00:15:09.725 --> 00:15:10.445
<v Speaker 1>Okay.

00:15:11.805 --> 00:15:14.685
<v Speaker 1>CNA, pipes pod syncing pod skipped.

00:15:15.324 --> 00:15:16.605
<v Speaker 1>Okay. What are we what are you?

00:15:18.240 --> 00:15:20.000
<v Speaker 0>Okay. So it's definitely Isn't there a way

00:15:20.000 --> 00:15:20.560
<v Speaker 1>that

00:15:21.280 --> 00:15:21.760
<v Speaker 1>that,

00:15:22.160 --> 00:15:23.760
<v Speaker 1>Thelium is skipping

00:15:25.600 --> 00:15:27.920
<v Speaker 1>that not ready because the c n I

00:15:27.920 --> 00:15:28.800
<v Speaker 1>plug

00:15:29.040 --> 00:15:31.135
<v Speaker 1>in would not be ready before Selium is

00:15:31.135 --> 00:15:31.615
<v Speaker 1>ready.

00:15:33.055 --> 00:15:33.855
<v Speaker 0>So

00:15:35.615 --> 00:15:37.295
<v Speaker 0>this comes down to the way the CNI

00:15:37.295 --> 00:15:38.735
<v Speaker 0>initializes itself,

00:15:38.815 --> 00:15:40.415
<v Speaker 0>which I will say my knowledge of it

00:15:40.415 --> 00:15:42.830
<v Speaker 0>is not great. But the kubelet will start

00:15:42.830 --> 00:15:44.670
<v Speaker 0>this delay in pod which will actually put

00:15:44.670 --> 00:15:47.390
<v Speaker 0>some binaries onto the host. And as those

00:15:47.390 --> 00:15:48.990
<v Speaker 0>binaries exist,

00:15:49.070 --> 00:15:51.790
<v Speaker 0>then the CNI would be considered initialized.

00:15:52.350 --> 00:15:54.510
<v Speaker 0>And I'm assuming that those binaries do not

00:15:54.510 --> 00:15:56.925
<v Speaker 0>exist. So what you probably need to do

00:15:56.925 --> 00:15:59.885
<v Speaker 0>right now is because there's a working couplet

00:16:00.125 --> 00:16:01.085
<v Speaker 0>as a

00:16:01.565 --> 00:16:02.925
<v Speaker 0>take a look at the logs and start

00:16:02.925 --> 00:16:04.845
<v Speaker 0>debugging that silly and pod. So the thing

00:16:04.845 --> 00:16:06.765
<v Speaker 0>you were doing like five minutes ago and

00:16:06.765 --> 00:16:08.685
<v Speaker 0>I dragged you down the wrong path, not

00:16:08.685 --> 00:16:10.259
<v Speaker 0>the wrong path but I I made you

00:16:10.259 --> 00:16:12.260
<v Speaker 0>take the longer road, I think, there.

00:16:13.139 --> 00:16:14.500
<v Speaker 0>So oops. Sorry.

00:16:15.940 --> 00:16:18.180
<v Speaker 1>All about showing people things.

00:16:18.820 --> 00:16:20.980
<v Speaker 1>If I'm going too fast, I can't show

00:16:20.980 --> 00:16:23.655
<v Speaker 1>people. Yeah. Okay. System.

00:16:24.215 --> 00:16:25.735
<v Speaker 1>Celium. Let's go

00:16:26.375 --> 00:16:28.935
<v Speaker 1>you wanna go let's go let's check.

00:16:32.935 --> 00:16:35.255
<v Speaker 0>Yeah. You won't get let's say image pulled

00:16:35.255 --> 00:16:35.655
<v Speaker 0>back off.

00:16:37.170 --> 00:16:38.690
<v Speaker 0>Don't know if you said that. Yeah.

00:16:40.370 --> 00:16:42.689
<v Speaker 0>So you need to describe operators what you're

00:16:42.689 --> 00:16:45.089
<v Speaker 1>talking about. I know that the operators are

00:16:45.089 --> 00:16:46.529
<v Speaker 0>actually okay, but if you look at the

00:16:46.529 --> 00:16:48.815
<v Speaker 0>three selium pods on the three nodes, their

00:16:48.815 --> 00:16:50.735
<v Speaker 0>image pull back off. So I think we'll

00:16:50.735 --> 00:16:52.575
<v Speaker 0>need to describe those pods.

00:16:59.535 --> 00:17:01.214
<v Speaker 0>Type in while people are watching is the

00:17:01.214 --> 00:17:01.855
<v Speaker 0>fun thing. Right?

00:17:02.860 --> 00:17:03.580
<v Speaker 1>Yeah.

00:17:06.380 --> 00:17:09.179
<v Speaker 1>So I think this is okay. So if

00:17:09.660 --> 00:17:10.779
<v Speaker 1>I remember correctly,

00:17:12.300 --> 00:17:14.540
<v Speaker 1>this is the right image. But I'm wondering

00:17:14.714 --> 00:17:16.714
<v Speaker 1>if he did something to the actual worker

00:17:16.714 --> 00:17:17.434
<v Speaker 1>node

00:17:17.515 --> 00:17:19.115
<v Speaker 1>to make it so that it couldn't pull

00:17:19.115 --> 00:17:21.034
<v Speaker 1>the pod. I

00:17:21.034 --> 00:17:22.635
<v Speaker 0>think that's a typo in the image.

00:17:28.799 --> 00:17:30.080
<v Speaker 1>And part of me just wants to grab

00:17:30.080 --> 00:17:32.320
<v Speaker 1>the Helm chart for Cilium and redeploy it.

00:17:32.720 --> 00:17:34.480
<v Speaker 0>No. Let let's do an edit of the

00:17:34.480 --> 00:17:35.599
<v Speaker 0>Cilium deployment.

00:17:36.399 --> 00:17:38.799
<v Speaker 1>Okay. This is so Clay dot you think

00:17:38.799 --> 00:17:40.320
<v Speaker 1>there's a typo in that image there?

00:17:40.934 --> 00:17:43.255
<v Speaker 0>Not there, but at another part of the

00:17:43.255 --> 00:17:44.855
<v Speaker 0>image. So I think that in it container

00:17:44.855 --> 00:17:46.695
<v Speaker 0>is okay. But the look at the message

00:17:46.695 --> 00:17:47.815
<v Speaker 0>at the bottom there.

00:17:49.735 --> 00:17:50.695
<v Speaker 0>Cilium x.

00:17:52.470 --> 00:17:53.909
<v Speaker 1>Okay.

00:17:53.909 --> 00:17:55.669
<v Speaker 1>Alright. So let's check out the deploy because

00:17:55.669 --> 00:17:57.350
<v Speaker 1>that's gonna be what has it. Right?

00:17:58.950 --> 00:18:00.389
<v Speaker 0>Yeah. I think so.

00:18:01.110 --> 00:18:03.590
<v Speaker 1>Because the the the pod itself is just

00:18:03.590 --> 00:18:04.630
<v Speaker 1>gonna

00:18:13.555 --> 00:18:15.955
<v Speaker 0>I think it's a demon set.

00:18:17.155 --> 00:18:17.555
<v Speaker 1>Oh.

00:18:24.410 --> 00:18:25.450
<v Speaker 1>There we go. So

00:18:29.530 --> 00:18:31.530
<v Speaker 1>I see okay. So let's go find what

00:18:31.530 --> 00:18:31.930
<v Speaker 1>we want.

00:18:35.155 --> 00:18:37.794
<v Speaker 1>You said there was a x in there.

00:18:45.155 --> 00:18:47.155
<v Speaker 1>Okay. There's the x right there.

00:18:48.835 --> 00:18:49.235
<v Speaker 0>Yeah.

00:18:51.520 --> 00:18:52.960
<v Speaker 0>I would just remove it.

00:18:54.240 --> 00:18:56.640
<v Speaker 1>Just remove it? Just the x. Yeah.

00:18:57.280 --> 00:18:58.080
<v Speaker 1>Alright.

00:18:58.240 --> 00:18:59.840
<v Speaker 0>Do we think he's only changed one image?

00:19:03.465 --> 00:19:04.664
<v Speaker 1>No. But

00:19:07.304 --> 00:19:08.585
<v Speaker 1>what do we have here?

00:19:08.905 --> 00:19:10.024
<v Speaker 1>So warnings,

00:19:11.945 --> 00:19:13.465
<v Speaker 1>but none of those none of those should

00:19:13.465 --> 00:19:16.184
<v Speaker 1>stop us. Okay. No. Those look I don't

00:19:16.184 --> 00:19:18.640
<v Speaker 0>wanna say safe, but they're they're not issues

00:19:18.640 --> 00:19:20.000
<v Speaker 0>yet. Oh, there we go.

00:19:21.440 --> 00:19:22.640
<v Speaker 0>Problem one fixed.

00:19:24.480 --> 00:19:26.320
<v Speaker 0>And look, all our all our Kubernetes came

00:19:26.320 --> 00:19:29.200
<v Speaker 0>back online and Wow. Reconciled.

00:19:29.520 --> 00:19:30.159
<v Speaker 0>Amazing.

00:19:30.800 --> 00:19:33.554
<v Speaker 1>All of our nodes are happy. Oh.

00:19:34.115 --> 00:19:36.354
<v Speaker 1>That's it's like dangerously positive.

00:19:36.355 --> 00:19:36.914
<v Speaker 1>Like

00:19:37.475 --> 00:19:37.955
<v Speaker 1>okay.

00:19:39.075 --> 00:19:39.715
<v Speaker 1>So

00:19:40.914 --> 00:19:42.274
<v Speaker 1>can we get to the website?

00:19:42.595 --> 00:19:43.875
<v Speaker 1>I guess that's the question. Can we get

00:19:43.875 --> 00:19:46.130
<v Speaker 1>to the existing one? You can curl on

00:19:46.130 --> 00:19:48.049
<v Speaker 0>local host port 30000.

00:19:55.890 --> 00:19:56.370
<v Speaker 1>That one?

00:20:03.745 --> 00:20:05.345
<v Speaker 1>So the answer is no.

00:20:05.505 --> 00:20:07.425
<v Speaker 0>Well, I'll just confirm with one of the

00:20:07.425 --> 00:20:08.304
<v Speaker 0>workers.

00:20:09.184 --> 00:20:10.785
<v Speaker 1>Oh, yeah. That's true because I'm on a

00:20:10.785 --> 00:20:11.505
<v Speaker 1>control plane.

00:20:16.520 --> 00:20:18.920
<v Speaker 0>It is not working.

00:20:23.960 --> 00:20:25.800
<v Speaker 0>Yep. It's time of it. So

00:20:26.760 --> 00:20:28.360
<v Speaker 0>not quite there yet.

00:20:30.195 --> 00:20:31.875
<v Speaker 1>Well, do we wanna save a little time

00:20:31.875 --> 00:20:33.955
<v Speaker 1>and update our deployment so we go to

00:20:33.955 --> 00:20:35.955
<v Speaker 1>our v two clustered? But once we do

00:20:35.955 --> 00:20:37.475
<v Speaker 1>get things, we're gonna roll out.

00:20:37.875 --> 00:20:39.554
<v Speaker 0>Sounds good to me? No. No.

00:20:40.195 --> 00:20:40.835
<v Speaker 0>Go for it.

00:20:46.170 --> 00:20:47.370
<v Speaker 1>Alright. So

00:20:47.690 --> 00:20:48.810
<v Speaker 1>we're gonna go

00:20:51.210 --> 00:20:52.570
<v Speaker 1>too many v ones in here. There it

00:20:52.570 --> 00:20:52.970
<v Speaker 1>is.

00:20:53.610 --> 00:20:55.290
<v Speaker 1>We'll replace that with a two,

00:20:56.490 --> 00:20:57.690
<v Speaker 1>and we'll write this out.

00:20:58.995 --> 00:20:59.715
<v Speaker 1>And

00:21:02.595 --> 00:21:04.195
<v Speaker 1>in fact, I'm gonna take off my old

00:21:04.195 --> 00:21:05.475
<v Speaker 1>namespaces switch.

00:21:06.195 --> 00:21:09.155
<v Speaker 1>I love watching. So there's our error message.

00:21:09.235 --> 00:21:11.635
<v Speaker 0>Well, it was a very long time out.

00:21:13.230 --> 00:21:14.429
<v Speaker 1>But we can see

00:21:16.030 --> 00:21:18.350
<v Speaker 0>It's failing to look up Something's happening. Right?

00:21:18.350 --> 00:21:20.269
<v Speaker 0>Yeah. It's failing to look up the database.

00:21:21.950 --> 00:21:24.029
<v Speaker 1>Do we have any network policies?

00:21:24.830 --> 00:21:27.950
<v Speaker 1>Helium supports network policies. Right? It does indeed.

00:21:27.950 --> 00:21:28.190
<v Speaker 0>Yeah.

00:21:35.705 --> 00:21:39.305
<v Speaker 0>K. I also support cluster wide network Exactly.

00:21:39.305 --> 00:21:40.585
<v Speaker 0>Yeah. CCNP.

00:21:41.785 --> 00:21:42.185
<v Speaker 0>K.

00:21:47.350 --> 00:21:49.270
<v Speaker 1>I'm going to type this correctly.

00:21:51.110 --> 00:21:51.990
<v Speaker 0>NP.

00:21:52.070 --> 00:21:52.710
<v Speaker 0>Yeah.

00:21:53.990 --> 00:21:56.470
<v Speaker 1>Oh, network policy thinks so. Okay. No resources

00:21:56.470 --> 00:21:57.925
<v Speaker 1>found. Okay.

00:21:58.885 --> 00:21:59.445
<v Speaker 1>So

00:21:59.925 --> 00:22:00.804
<v Speaker 1>our two

00:22:03.205 --> 00:22:05.285
<v Speaker 1>our postgres goal and our clustered are not

00:22:05.285 --> 00:22:06.645
<v Speaker 1>talking to each other basically is what it

00:22:06.645 --> 00:22:09.045
<v Speaker 1>comes down to right now. Yeah. Right? So,

00:22:09.045 --> 00:22:11.365
<v Speaker 0>like, clustered pod expects there to be a

00:22:11.365 --> 00:22:12.645
<v Speaker 0>service called postgres.

00:22:14.190 --> 00:22:16.269
<v Speaker 1>Let's look at our look at our services.

00:22:17.870 --> 00:22:19.710
<v Speaker 1>There is a service there. That's good.

00:22:20.030 --> 00:22:22.190
<v Speaker 1>Age is a bit different than everything else.

00:22:23.150 --> 00:22:24.590
<v Speaker 1>Always a bad sign. Always.

00:22:26.895 --> 00:22:28.255
<v Speaker 1>Let's let's

00:22:28.255 --> 00:22:29.374
<v Speaker 1>go check it out.

00:22:30.975 --> 00:22:32.815
<v Speaker 1>Actually, probably ought to describe it first.

00:22:38.530 --> 00:22:39.730
<v Speaker 1>Throw that in the left so we can

00:22:39.730 --> 00:22:41.490
<v Speaker 1>see. Oh, there's not a whole lot there.

00:22:41.810 --> 00:22:43.570
<v Speaker 1>That's not the right port. I know that

00:22:43.570 --> 00:22:45.010
<v Speaker 1>right off the top of my head.

00:22:45.490 --> 00:22:46.450
<v Speaker 1>5432

00:22:46.450 --> 00:22:48.690
<v Speaker 1>is not right. You you do $80.80 on

00:22:48.690 --> 00:22:51.170
<v Speaker 1>yours. That's for the web application. Postgres does

00:22:51.170 --> 00:22:52.370
<v Speaker 0>run-in 5432.

00:22:53.395 --> 00:22:55.715
<v Speaker 1>You're right. You're right. Okay. Dang. Oh, I

00:22:55.715 --> 00:22:57.635
<v Speaker 1>was gonna It does have endpoints with which

00:22:57.635 --> 00:22:59.634
<v Speaker 0>makes me think that the service

00:22:59.875 --> 00:23:00.595
<v Speaker 0>might

00:23:00.915 --> 00:23:01.875
<v Speaker 0>be okay.

00:23:03.235 --> 00:23:03.955
<v Speaker 1>Okay.

00:23:05.235 --> 00:23:07.235
<v Speaker 0>I mean, I say that may, of course,

00:23:07.235 --> 00:23:10.520
<v Speaker 0>that's my, like, a JLC card, but it

00:23:10.520 --> 00:23:11.800
<v Speaker 0>looks alright for me.

00:23:12.920 --> 00:23:13.640
<v Speaker 0>Okay.

00:23:14.040 --> 00:23:15.960
<v Speaker 0>What's our next hypothesis?

00:23:17.800 --> 00:23:19.240
<v Speaker 1>Well, I was wondering if I could

00:23:20.325 --> 00:23:23.124
<v Speaker 1>I know Kubernetes debug is a new stuff.

00:23:23.205 --> 00:23:26.085
<v Speaker 1>Does your clustered pod have a shell that

00:23:26.085 --> 00:23:27.765
<v Speaker 1>I can get into? Yeah. I leave bash

00:23:27.765 --> 00:23:29.604
<v Speaker 0>in there, so you should be okay.

00:23:29.845 --> 00:23:30.245
<v Speaker 1>Okay.

00:23:34.730 --> 00:23:36.170
<v Speaker 1>Gonna be our pod here.

00:23:36.890 --> 00:23:39.370
<v Speaker 0>But you will need to dash IT.

00:23:42.570 --> 00:23:44.170
<v Speaker 1>I do I probably need to do that

00:23:44.170 --> 00:23:45.850
<v Speaker 1>before the pod. Yeah.

00:23:45.850 --> 00:23:46.410
<v Speaker 0>I think so.

00:23:49.315 --> 00:23:50.995
<v Speaker 1>Oh, I love this. My

00:23:51.155 --> 00:23:52.674
<v Speaker 1>home and end key work.

00:23:53.715 --> 00:23:55.955
<v Speaker 1>Mac always broke my home and end key.

00:23:55.955 --> 00:23:57.395
<v Speaker 1>Of course, I spoke too soon now that

00:23:57.395 --> 00:23:58.195
<v Speaker 1>I've got

00:23:59.475 --> 00:24:01.155
<v Speaker 1>some weird stuff going on with the shell.

00:24:04.970 --> 00:24:06.490
<v Speaker 1>Oh, no. I'm in I'm inside of it.

00:24:06.490 --> 00:24:08.570
<v Speaker 0>You are. Yeah. Okay. I'm inside. Yeah. That

00:24:08.570 --> 00:24:09.129
<v Speaker 1>worked.

00:24:09.530 --> 00:24:10.250
<v Speaker 1>Okay. So

00:24:17.165 --> 00:24:18.765
<v Speaker 2>I I think

00:24:19.405 --> 00:24:20.765
<v Speaker 0>yeah. You should be able to do an

00:24:20.765 --> 00:24:22.605
<v Speaker 0>app update and install whatever you need.

00:24:23.005 --> 00:24:25.325
<v Speaker 0>I'm not harsh. It's not distroless. It's it's

00:24:25.325 --> 00:24:27.165
<v Speaker 0>not scratch. It's a

00:24:27.885 --> 00:24:29.485
<v Speaker 0>although there's there's an issue.

00:24:30.900 --> 00:24:32.100
<v Speaker 1>So no networking

00:24:32.580 --> 00:24:33.460
<v Speaker 1>at all.

00:24:36.180 --> 00:24:38.420
<v Speaker 0>Yep. That that that is a bit surprising

00:24:38.420 --> 00:24:40.020
<v Speaker 2>to me as well, but it's fine.

00:24:43.700 --> 00:24:45.700
<v Speaker 2>Or is it? Wait. I haven't I haven't

00:24:46.395 --> 00:24:49.035
<v Speaker 2>I would have expected networking to work in

00:24:49.195 --> 00:24:51.115
<v Speaker 2>in the pod, interestingly enough.

00:24:53.355 --> 00:24:55.434
<v Speaker 0>Net networking in Kubernetes

00:24:55.435 --> 00:24:58.075
<v Speaker 0>can be challenging. So Well yeah.

00:24:59.020 --> 00:25:01.740
<v Speaker 0>Alright. So we've got no egress from this

00:25:01.740 --> 00:25:02.860
<v Speaker 0>pod whatsoever,

00:25:02.860 --> 00:25:04.620
<v Speaker 0>which would explain why it's unable to speak

00:25:04.620 --> 00:25:06.620
<v Speaker 0>to Postgres. So we need to track that

00:25:06.620 --> 00:25:07.340
<v Speaker 0>down.

00:25:09.980 --> 00:25:11.980
<v Speaker 1>Well, I didn't start on that one.

00:25:12.620 --> 00:25:14.540
<v Speaker 1>Because we looked for network policies. We looked

00:25:14.540 --> 00:25:15.835
<v Speaker 1>at all that stuff.

00:25:19.115 --> 00:25:20.794
<v Speaker 1>Well, let's look at the logs real fast

00:25:20.794 --> 00:25:22.715
<v Speaker 1>for that pod. Right? There's nothing. Should get

00:25:22.715 --> 00:25:25.595
<v Speaker 1>us. Cluster clogs nothing. I I I keep

00:25:25.674 --> 00:25:27.275
<v Speaker 0>every time someone tries to look at the

00:25:27.275 --> 00:25:28.395
<v Speaker 0>logs, I'm like, I really need to add

00:25:28.395 --> 00:25:30.840
<v Speaker 0>logging. This is so unfair. The

00:25:31.400 --> 00:25:33.559
<v Speaker 0>Celeum has a conflict map.

00:25:35.080 --> 00:25:36.600
<v Speaker 0>I would maybe suggest

00:25:36.680 --> 00:25:37.480
<v Speaker 0>there.

00:25:39.240 --> 00:25:39.880
<v Speaker 1>Oh,

00:25:40.440 --> 00:25:41.720
<v Speaker 1>yeah. That's good. Yeah. I see they're gonna

00:25:41.720 --> 00:25:44.360
<v Speaker 0>be the Celeum configuration or IP tables on

00:25:44.360 --> 00:25:45.400
<v Speaker 0>the hosts perhaps.

00:25:46.015 --> 00:25:47.054
<v Speaker 0>I mean,

00:25:47.535 --> 00:25:49.134
<v Speaker 0>we'll need to check both, I think.

00:25:51.615 --> 00:25:53.855
<v Speaker 1>Okay. So Celium config

00:25:57.855 --> 00:25:59.054
<v Speaker 1>and cube system.

00:26:03.010 --> 00:26:05.570
<v Speaker 1>And we're gonna go for a Selium config.

00:26:05.570 --> 00:26:07.570
<v Speaker 1>I cannot spell Selium, so I'm gonna cut

00:26:07.570 --> 00:26:08.290
<v Speaker 1>and paste.

00:26:13.490 --> 00:26:14.450
<v Speaker 1>Show me the channel.

00:26:16.555 --> 00:26:18.554
<v Speaker 0>Look at all that fun stuff.

00:26:21.115 --> 00:26:23.515
<v Speaker 1>Nobody's ever broken a Celium on me before,

00:26:23.515 --> 00:26:24.554
<v Speaker 1>so this is new.

00:26:25.195 --> 00:26:26.475
<v Speaker 1>New fun stuff.

00:26:27.115 --> 00:26:28.715
<v Speaker 1>So it's not in debug mode.

00:26:29.275 --> 00:26:30.635
<v Speaker 1>Auto direct node routes.

00:26:32.850 --> 00:26:34.929
<v Speaker 1>From here is I don't have

00:26:36.050 --> 00:26:38.370
<v Speaker 1>a known good version of this

00:26:39.330 --> 00:26:40.769
<v Speaker 1>to compare against.

00:26:41.330 --> 00:26:43.650
<v Speaker 0>Do any of the flags sound ominous to

00:26:43.650 --> 00:26:43.810
<v Speaker 0>you?

00:26:51.685 --> 00:26:52.965
<v Speaker 1>Well, always

00:26:52.965 --> 00:26:54.165
<v Speaker 1>sounds ominous, but

00:26:55.205 --> 00:26:57.205
<v Speaker 0>I think that one's safe in this case.

00:26:58.805 --> 00:27:01.045
<v Speaker 1>IPv four true, IPv six false.

00:27:03.880 --> 00:27:05.320
<v Speaker 1>Policy's default.

00:27:06.120 --> 00:27:07.800
<v Speaker 2>If you need hints, by the way, there

00:27:07.800 --> 00:27:09.880
<v Speaker 2>are three hints in the home directory.

00:27:10.120 --> 00:27:11.880
<v Speaker 2>You don't have to use them yet. They

00:27:11.880 --> 00:27:13.400
<v Speaker 2>they are just there, just so you know.

00:27:14.185 --> 00:27:16.345
<v Speaker 2>I'm not completely evil.

00:27:16.505 --> 00:27:18.585
<v Speaker 2>Just a bit. Well, I'm I'm only three

00:27:18.585 --> 00:27:20.345
<v Speaker 1>minutes to my halfway point.

00:27:20.425 --> 00:27:21.544
<v Speaker 0>Yeah. Exactly. So

00:27:24.665 --> 00:27:25.545
<v Speaker 1>let's see here.

00:27:33.230 --> 00:27:35.230
<v Speaker 0>So the only thing in here

00:27:36.510 --> 00:27:38.190
<v Speaker 0>that I can never remember

00:27:39.230 --> 00:27:41.070
<v Speaker 0>and we kinda glossed over it there is

00:27:41.070 --> 00:27:43.150
<v Speaker 0>the enable policy default.

00:27:43.470 --> 00:27:43.870
<v Speaker 0>Now

00:27:45.295 --> 00:27:48.415
<v Speaker 0>I think that's actually correct at at default.

00:27:50.095 --> 00:27:52.255
<v Speaker 0>If my understanding is correct

00:27:54.015 --> 00:27:56.975
<v Speaker 0>then everything is allowed until a policy exists

00:27:56.975 --> 00:27:58.975
<v Speaker 0>and then at which case is they

00:27:59.539 --> 00:28:02.179
<v Speaker 0>block all until allowed or something like that.

00:28:02.500 --> 00:28:04.900
<v Speaker 0>So I I don't think it's silly, but

00:28:04.900 --> 00:28:06.899
<v Speaker 0>I'm not a % sure.

00:28:08.900 --> 00:28:10.340
<v Speaker 1>Am I allowed to bring up the comp

00:28:10.340 --> 00:28:12.659
<v Speaker 1>on my on my other cluster and

00:28:14.135 --> 00:28:16.935
<v Speaker 1>and look and compare it. I mean,

00:28:17.175 --> 00:28:18.775
<v Speaker 0>I I you would do that in your

00:28:18.775 --> 00:28:19.815
<v Speaker 0>real job. Right?

00:28:20.215 --> 00:28:21.895
<v Speaker 0>Yeah. So go for it.

00:28:22.455 --> 00:28:24.535
<v Speaker 1>Always go for the known good and comparing

00:28:24.535 --> 00:28:27.095
<v Speaker 1>the Exactly. Good with the Yeah. Feel free

00:28:27.095 --> 00:28:28.455
<v Speaker 0>to dump it out on your own and

00:28:28.455 --> 00:28:30.070
<v Speaker 0>then drop it into a fail on this

00:28:30.070 --> 00:28:31.830
<v Speaker 0>terminal and run a diff and

00:28:32.390 --> 00:28:33.750
<v Speaker 0>and see. Okay. Let's see if I can

00:28:33.750 --> 00:28:34.789
<v Speaker 1>figure out how to do that.

00:28:35.350 --> 00:28:37.429
<v Speaker 1>Oh, I like that. Run a diff. Run

00:28:37.429 --> 00:28:38.789
<v Speaker 1>a diff is always the best way to

00:28:38.789 --> 00:28:40.950
<v Speaker 1>go. Okay. So I just did

00:28:41.830 --> 00:28:42.229
<v Speaker 1>yeah.

00:28:42.710 --> 00:28:44.295
<v Speaker 1>I can just cut and copy this command.

00:28:44.295 --> 00:28:46.215
<v Speaker 1>I don't even need to Oh, a really

00:28:46.215 --> 00:28:48.375
<v Speaker 0>cool comment from Walid as well in the

00:28:48.375 --> 00:28:51.015
<v Speaker 0>chat. Just while you're playing with our cluster

00:28:51.015 --> 00:28:53.095
<v Speaker 0>is we do. Did we add k as

00:28:53.095 --> 00:28:54.215
<v Speaker 0>an alias? I don't think it did.

00:29:00.120 --> 00:29:02.119
<v Speaker 0>It's not deployed. Oh, well.

00:29:02.840 --> 00:29:04.519
<v Speaker 0>Well, you just said Hubble was enabled on

00:29:04.519 --> 00:29:05.320
<v Speaker 0>the config.

00:29:05.720 --> 00:29:07.399
<v Speaker 0>Well, he just write. However, it has not

00:29:07.399 --> 00:29:08.759
<v Speaker 0>deployed to our cluster.

00:29:09.320 --> 00:29:10.760
<v Speaker 0>I can't remember if I You don't you

00:29:10.760 --> 00:29:13.395
<v Speaker 1>don't enable Hubble, though. Right? I've never seen

00:29:13.395 --> 00:29:15.555
<v Speaker 1>you do that. I should though. It's super

00:29:15.555 --> 00:29:18.355
<v Speaker 0>cool for seeing why network traffic is not

00:29:18.355 --> 00:29:19.795
<v Speaker 0>going where you want it to go.

00:29:20.195 --> 00:29:21.795
<v Speaker 2>Is that the UI

00:29:22.355 --> 00:29:25.169
<v Speaker 2>thingy from Cilium? It is. Yeah. The other

00:29:25.169 --> 00:29:26.450
<v Speaker 0>thing we could do is use the Cilium

00:29:26.450 --> 00:29:28.690
<v Speaker 0>CLI tool to run a status and a

00:29:29.169 --> 00:29:30.690
<v Speaker 0>you know, everything that Hubble does, you can

00:29:30.690 --> 00:29:32.289
<v Speaker 0>do with the Cilium CLI as well.

00:29:32.929 --> 00:29:35.250
<v Speaker 1>Is that installed? No. You'd have to go

00:29:35.250 --> 00:29:37.330
<v Speaker 0>into a Cilium pod and run a Cilium

00:29:37.330 --> 00:29:37.730
<v Speaker 0>status.

00:29:39.385 --> 00:29:41.465
<v Speaker 0>But stick with your diff first. I think

00:29:41.465 --> 00:29:43.625
<v Speaker 0>that's like that feels like something I would

00:29:43.625 --> 00:29:44.905
<v Speaker 0>do and you would do it in real

00:29:44.905 --> 00:29:47.865
<v Speaker 0>life, so let's try it. Okay. So

00:29:50.185 --> 00:29:50.825
<v Speaker 1>there it is.

00:29:51.880 --> 00:29:54.040
<v Speaker 1>So now we're gonna take this a bunch

00:29:54.040 --> 00:29:55.720
<v Speaker 1>of things are gonna actually diff on this.

00:29:58.679 --> 00:30:02.279
<v Speaker 1>I don't know. Well, unknown unknown bads. Right?

00:30:03.720 --> 00:30:04.040
<v Speaker 1>Yeah.

00:30:07.295 --> 00:30:09.695
<v Speaker 1>Okay. That's none of those things or things

00:30:09.695 --> 00:30:11.695
<v Speaker 1>are gonna cause us any problems. That is

00:30:11.695 --> 00:30:12.335
<v Speaker 0>clean.

00:30:12.575 --> 00:30:14.655
<v Speaker 0>So it's not Alright. Well, it's not not

00:30:14.655 --> 00:30:15.855
<v Speaker 0>silly, but it's

00:30:16.735 --> 00:30:18.335
<v Speaker 0>mildly confident. It's not silly.

00:30:20.690 --> 00:30:23.409
<v Speaker 0>So how is your Linux networking knowledge?

00:30:24.690 --> 00:30:25.730
<v Speaker 1>It's old.

00:30:32.049 --> 00:30:33.890
<v Speaker 1>Wow. I remember that command. That's always good.

00:30:38.655 --> 00:30:40.255
<v Speaker 1>Let's see here. I need to go on

00:30:40.255 --> 00:30:42.575
<v Speaker 1>the left for this. I mean, this I

00:30:42.575 --> 00:30:44.815
<v Speaker 1>mean, just looking at the IP tables and

00:30:44.815 --> 00:30:45.934
<v Speaker 1>seeing in

00:30:46.255 --> 00:30:48.015
<v Speaker 1>the firewall, is there anything weird here?

00:30:49.740 --> 00:30:51.100
<v Speaker 0>Anywhere.

00:30:51.340 --> 00:30:54.140
<v Speaker 0>So one of the things I encouraged last

00:30:54.140 --> 00:30:56.060
<v Speaker 0>week on an episode was just to flush

00:30:56.060 --> 00:30:58.380
<v Speaker 0>the tables and let the cube proxy and

00:30:58.380 --> 00:30:59.900
<v Speaker 0>sell them back up.

00:31:00.300 --> 00:31:01.980
<v Speaker 0>However, that does get us into more trouble.

00:31:02.445 --> 00:31:04.924
<v Speaker 0>But it's normally safe to do that. You

00:31:05.005 --> 00:31:06.684
<v Speaker 0>so you could do that if you wanted.

00:31:06.765 --> 00:31:07.164
<v Speaker 0>I

00:31:07.885 --> 00:31:09.085
<v Speaker 0>think it would be okay.

00:31:11.085 --> 00:31:12.445
<v Speaker 0>I think so too. You

00:31:12.845 --> 00:31:14.365
<v Speaker 0>think so too. Yeah. So just do an

00:31:14.365 --> 00:31:16.765
<v Speaker 0>IP table dash capital f and that'll flush

00:31:16.765 --> 00:31:19.060
<v Speaker 0>all the rules and then Cillium will put

00:31:19.060 --> 00:31:20.740
<v Speaker 0>back the ones that it needs for networking

00:31:20.740 --> 00:31:21.540
<v Speaker 0>to work.

00:31:22.180 --> 00:31:24.020
<v Speaker 0>If if if you think it's a firewall

00:31:24.020 --> 00:31:24.660
<v Speaker 0>thing

00:31:24.820 --> 00:31:26.100
<v Speaker 0>at least. Okay.

00:31:26.420 --> 00:31:28.900
<v Speaker 1>IP tables dash capital f.

00:31:29.220 --> 00:31:30.420
<v Speaker 0>F for flush.

00:31:31.335 --> 00:31:32.054
<v Speaker 1>Yep.

00:31:32.615 --> 00:31:34.855
<v Speaker 1>And then if you run dash l again,

00:31:34.855 --> 00:31:35.894
<v Speaker 0>it should be

00:31:36.615 --> 00:31:39.095
<v Speaker 0>there we go. We have clean IP tables.

00:31:40.294 --> 00:31:41.014
<v Speaker 1>So

00:31:41.415 --> 00:31:43.895
<v Speaker 1>but that that should come back automatically. Right?

00:31:44.610 --> 00:31:47.169
<v Speaker 1>Because it'll take there's noted tables and then

00:31:48.450 --> 00:31:49.809
<v Speaker 0>Well, I mean, this is better than last

00:31:49.809 --> 00:31:51.170
<v Speaker 0>week because we get kicked off the machine

00:31:51.170 --> 00:31:52.770
<v Speaker 0>last time. So you're still able to type

00:31:52.770 --> 00:31:55.330
<v Speaker 0>commands, which is cool. So Yay.

00:31:57.815 --> 00:31:59.815
<v Speaker 0>So you could try your curl again, I

00:31:59.815 --> 00:32:00.534
<v Speaker 0>suppose.

00:32:02.695 --> 00:32:04.695
<v Speaker 1>Well, if there's no rules on IP tables,

00:32:04.695 --> 00:32:05.575
<v Speaker 1>that's not good.

00:32:06.295 --> 00:32:07.815
<v Speaker 0>It's not bad either. Right.

00:32:08.295 --> 00:32:10.295
<v Speaker 1>Yep. Is it? We might have to restart

00:32:10.295 --> 00:32:12.375
<v Speaker 2>Cillium, I think, for the rules to be.

00:32:12.720 --> 00:32:13.120
<v Speaker 2>But

00:32:13.520 --> 00:32:14.880
<v Speaker 0>But I don't think we need the rules

00:32:14.880 --> 00:32:15.919
<v Speaker 0>just yet.

00:32:17.280 --> 00:32:19.119
<v Speaker 2>I I don't know either. Oh,

00:32:20.960 --> 00:32:22.799
<v Speaker 0>well. We're still getting a table now. So

00:32:23.039 --> 00:32:24.320
<v Speaker 0>yeah. It's still saving that.

00:32:29.005 --> 00:32:31.485
<v Speaker 1>Oh, well, better what I got last time.

00:32:31.485 --> 00:32:33.885
<v Speaker 1>Okay. Let's kill off the helium pods and

00:32:34.445 --> 00:32:35.485
<v Speaker 1>see what happens.

00:32:36.125 --> 00:32:38.125
<v Speaker 1>When in doubt in Kubernetes, kill the pod.

00:32:38.125 --> 00:32:39.085
<v Speaker 1>That's what I learned from you.

00:32:40.770 --> 00:32:42.850
<v Speaker 0>I'm really glad that custard is teaching people

00:32:42.850 --> 00:32:45.730
<v Speaker 0>these viable production skills.

00:32:46.690 --> 00:32:47.490
<v Speaker 2>Delete.

00:32:47.730 --> 00:32:49.010
<v Speaker 0>Yeah. Just

00:32:49.010 --> 00:32:51.730
<v Speaker 0>smash, smash, smash. Yeah. You can use that

00:32:51.730 --> 00:32:53.250
<v Speaker 0>or you can copy paste it. Go for

00:32:53.250 --> 00:32:53.410
<v Speaker 0>that.

00:32:55.855 --> 00:32:58.175
<v Speaker 1>Can you start with that? No. But you

00:32:58.175 --> 00:33:00.335
<v Speaker 0>could do dash l app equals psyllium and

00:33:00.335 --> 00:33:01.534
<v Speaker 0>that would also do it.

00:33:01.935 --> 00:33:02.735
<v Speaker 1>Right.

00:33:04.015 --> 00:33:04.415
<v Speaker 1>Pod.

00:33:09.970 --> 00:33:11.490
<v Speaker 0>You've got delete delete.

00:33:13.730 --> 00:33:14.690
<v Speaker 1>Oh, I do.

00:33:16.370 --> 00:33:18.130
<v Speaker 0>Just when one delete is not enough, go

00:33:18.130 --> 00:33:19.570
<v Speaker 0>with two. That's a good rule too.

00:33:21.535 --> 00:33:24.655
<v Speaker 1>I so badly want to like involve my

00:33:24.655 --> 00:33:26.335
<v Speaker 1>my Google voice

00:33:26.895 --> 00:33:29.135
<v Speaker 1>and like breaking the cluster live for you

00:33:29.135 --> 00:33:30.975
<v Speaker 1>guys. That would have been fun.

00:33:31.135 --> 00:33:32.894
<v Speaker 0>Yeah. Where you could just say,

00:33:33.535 --> 00:33:34.495
<v Speaker 0>okay thing

00:33:34.860 --> 00:33:36.940
<v Speaker 0>destroy. I was I was was gonna be

00:33:36.940 --> 00:33:38.860
<v Speaker 1>like, okay thing, engage

00:33:39.660 --> 00:33:43.100
<v Speaker 1>or activate contingency plan alpha. And then I

00:33:43.100 --> 00:33:44.620
<v Speaker 1>said, sorry, Dave. I can't do that. I'd

00:33:44.620 --> 00:33:46.539
<v Speaker 1>be like, oh, okay thing,

00:33:46.620 --> 00:33:48.139
<v Speaker 1>pseudo activate

00:33:48.860 --> 00:33:51.545
<v Speaker 1>contingency plan alpha. Mean, that would be risky

00:33:51.545 --> 00:33:53.465
<v Speaker 0>though. If you wait till your opponent runs

00:33:53.465 --> 00:33:55.305
<v Speaker 0>get nodes and get pods and it looks

00:33:55.305 --> 00:33:57.225
<v Speaker 0>okay, and then you're like, go.

00:33:58.745 --> 00:33:59.945
<v Speaker 0>Cluster chaos.

00:34:02.185 --> 00:34:04.425
<v Speaker 1>Okay. So helium came back up.

00:34:05.309 --> 00:34:06.829
<v Speaker 0>I'm gonna make that happen, Russell.

00:34:07.070 --> 00:34:07.789
<v Speaker 0>Definitely.

00:34:08.109 --> 00:34:10.750
<v Speaker 0>Sorry. I was just just funny. We have

00:34:11.389 --> 00:34:12.909
<v Speaker 1>we have actual

00:34:12.909 --> 00:34:13.550
<v Speaker 1>rules.

00:34:17.324 --> 00:34:19.165
<v Speaker 0>Okay. Our application

00:34:19.165 --> 00:34:21.484
<v Speaker 0>still cannot reach the database. We still have

00:34:21.484 --> 00:34:23.324
<v Speaker 0>no networking at our pods.

00:34:23.804 --> 00:34:24.605
<v Speaker 1>Alright.

00:34:25.484 --> 00:34:28.125
<v Speaker 0>We've got sixteen minutes remaining.

00:34:28.685 --> 00:34:31.340
<v Speaker 0>Maybe we could peek at the hint, the

00:34:31.340 --> 00:34:33.739
<v Speaker 0>first ten? I think we yeah.

00:34:34.060 --> 00:34:34.860
<v Speaker 0>I mean,

00:34:35.820 --> 00:34:37.100
<v Speaker 0>what what do you think? What are you

00:34:37.100 --> 00:34:37.580
<v Speaker 0>thinking?

00:34:39.020 --> 00:34:40.300
<v Speaker 1>Well, I'm I'm wondering,

00:34:42.060 --> 00:34:44.140
<v Speaker 1>did he mess with core DNS? Because that

00:34:44.140 --> 00:34:46.495
<v Speaker 1>would but that would also because the pods

00:34:46.495 --> 00:34:48.735
<v Speaker 1>use that for a network resolution. Right? I

00:34:48.735 --> 00:34:49.295
<v Speaker 0>mean,

00:34:50.255 --> 00:34:51.375
<v Speaker 0>you could test

00:34:51.695 --> 00:34:53.455
<v Speaker 0>that. You could try pinging.

00:34:53.535 --> 00:34:56.015
<v Speaker 0>Oh, we we don't have ping. You could

00:34:58.000 --> 00:34:59.120
<v Speaker 1>There was a

00:35:00.000 --> 00:35:01.600
<v Speaker 1>I can just run a container and see

00:35:01.600 --> 00:35:02.640
<v Speaker 1>if that container

00:35:02.960 --> 00:35:03.920
<v Speaker 1>explodes.

00:35:03.920 --> 00:35:04.560
<v Speaker 1>Right?

00:35:06.720 --> 00:35:08.240
<v Speaker 0>Yeah. If you so if you want to

00:35:08.240 --> 00:35:10.240
<v Speaker 0>confirm whether this is DNS or not, you

00:35:10.240 --> 00:35:12.640
<v Speaker 0>can jump back into the cluster pod.

00:35:16.215 --> 00:35:17.734
<v Speaker 0>We can try and do something with an

00:35:17.734 --> 00:35:20.055
<v Speaker 0>IP address rather than a

00:35:21.974 --> 00:35:23.335
<v Speaker 0>DNS name. Right?

00:35:23.895 --> 00:35:25.734
<v Speaker 0>Yeah. I'll share that message from Carlos as

00:35:25.734 --> 00:35:28.340
<v Speaker 0>well, actually. We do have a bit called

00:35:28.340 --> 00:35:30.100
<v Speaker 0>Rawkode

00:35:30.100 --> 00:35:33.460
<v Speaker 0>Discord run by Carlos, Walid and others join

00:35:33.460 --> 00:35:35.060
<v Speaker 0>at Rawkode.chat.

00:35:36.740 --> 00:35:37.780
<v Speaker 0>Sorry, William.

00:35:38.020 --> 00:35:38.420
<v Speaker 0>Okay.

00:35:39.940 --> 00:35:41.380
<v Speaker 0>So you're back in the custard pod.

00:35:43.885 --> 00:35:45.325
<v Speaker 1>Except for I need to do one thing

00:35:45.325 --> 00:35:45.965
<v Speaker 1>first.

00:35:48.204 --> 00:35:50.205
<v Speaker 1>That service should have an IP. Right?

00:35:51.484 --> 00:35:53.325
<v Speaker 0>You can't ping a service IP, but you

00:35:53.325 --> 00:35:54.684
<v Speaker 0>could ping oh, but you don't you don't

00:35:54.684 --> 00:35:56.444
<v Speaker 0>have access to ping anyway in the container.

00:35:56.444 --> 00:35:58.040
<v Speaker 0>So you're gonna have to, like, curl a

00:35:58.040 --> 00:35:59.320
<v Speaker 0>public IP address.

00:35:59.480 --> 00:35:59.880
<v Speaker 0>Okay.

00:36:03.320 --> 00:36:05.400
<v Speaker 1>Let's see here. So why don't you sorry.

00:36:05.400 --> 00:36:06.680
<v Speaker 0>Exit

00:36:06.680 --> 00:36:07.640
<v Speaker 0>this container

00:36:07.880 --> 00:36:10.360
<v Speaker 0>and then do a ping Google.com,

00:36:10.360 --> 00:36:11.800
<v Speaker 0>grab the IP address, jump back in the

00:36:11.800 --> 00:36:13.080
<v Speaker 0>container, and then try

00:36:13.765 --> 00:36:15.605
<v Speaker 0>that. Oh, you got IPv6.

00:36:18.485 --> 00:36:21.205
<v Speaker 2>I did not do anything IPv6, which I'm

00:36:21.205 --> 00:36:23.765
<v Speaker 2>very proud of. Yeah. It's very tempting, but

00:36:23.765 --> 00:36:26.609
<v Speaker 2>I didn't I I I resisted. Yeah. That's

00:36:26.609 --> 00:36:28.369
<v Speaker 1>not gonna work. Yeah. Oh, yeah. But you

00:36:28.369 --> 00:36:29.970
<v Speaker 2>can call 4.

00:36:29.970 --> 00:36:31.890
<v Speaker 0>Yeah. 6. 4.

00:36:33.009 --> 00:36:35.970
<v Speaker 2>There. That works too. Oh, yeah. Didn't know

00:36:35.970 --> 00:36:37.490
<v Speaker 2>that. That was the thing. That's cool.

00:36:37.970 --> 00:36:39.250
<v Speaker 1>Yeah. They have one so that if you

00:36:39.250 --> 00:36:40.690
<v Speaker 1>have problems with I p v six, you

00:36:40.690 --> 00:36:43.235
<v Speaker 1>can jump in and talk to Google directly

00:36:43.235 --> 00:36:44.995
<v Speaker 1>on that. Nice.

00:36:45.955 --> 00:36:48.035
<v Speaker 0>So let's curl that or

00:36:53.635 --> 00:36:56.035
<v Speaker 0>It worked. We'll do a dash v and

00:36:56.035 --> 00:36:58.355
<v Speaker 0>a dash

00:36:57.980 --> 00:36:58.619
<v Speaker 0>k,

00:36:59.740 --> 00:37:01.099
<v Speaker 0>which will just get past Oh, yeah. It's

00:37:01.099 --> 00:37:01.980
<v Speaker 0>like thing.

00:37:02.940 --> 00:37:04.220
<v Speaker 1>Ignore the

00:37:04.619 --> 00:37:06.299
<v Speaker 1>do even need the p? You don't need

00:37:06.299 --> 00:37:06.940
<v Speaker 1>the p.

00:37:07.180 --> 00:37:09.500
<v Speaker 0>Okay. Well, there's a v which is for

00:37:09.500 --> 00:37:11.765
<v Speaker 0>for both. But you've done something cool. You've

00:37:11.765 --> 00:37:12.885
<v Speaker 0>confirmed this DNS.

00:37:13.045 --> 00:37:14.485
<v Speaker 0>It's always DNS. Right?

00:37:16.165 --> 00:37:17.525
<v Speaker 1>When in doubt okay.

00:37:18.405 --> 00:37:19.445
<v Speaker 1>So if we go

00:37:20.725 --> 00:37:22.885
<v Speaker 1>out of curiosity, google.com.

00:37:22.965 --> 00:37:24.885
<v Speaker 1>Yeah. Okay. Nothing. Okay.

00:37:28.140 --> 00:37:29.980
<v Speaker 1>Let's see here. Thirteen minutes left.

00:37:30.619 --> 00:37:32.620
<v Speaker 0>And a DNS look at that hand.

00:37:33.180 --> 00:37:33.900
<v Speaker 1>Okay.

00:37:37.980 --> 00:37:38.859
<v Speaker 1>So DNS

00:37:40.925 --> 00:37:42.605
<v Speaker 1>is running but

00:37:43.405 --> 00:37:45.725
<v Speaker 1>is ten days old. So he didn't do

00:37:47.405 --> 00:37:49.165
<v Speaker 1>question is, what did he do to it

00:37:49.165 --> 00:37:51.085
<v Speaker 1>that he didn't modify it?

00:37:51.245 --> 00:37:52.365
<v Speaker 1>Or did he fake it out?

00:37:55.290 --> 00:37:58.170
<v Speaker 0>Well, that just yeah. That's a pod that's

00:37:58.170 --> 00:38:00.170
<v Speaker 0>ten days old. Right? So he's not restarted

00:38:00.170 --> 00:38:02.090
<v Speaker 0>the core DNS pod, which makes it unlikely

00:38:02.090 --> 00:38:03.610
<v Speaker 0>that he has modified

00:38:04.010 --> 00:38:05.850
<v Speaker 0>the core DNS config.

00:38:06.855 --> 00:38:09.575
<v Speaker 0>So this is a host DNS

00:38:09.895 --> 00:38:10.775
<v Speaker 0>problem?

00:38:14.135 --> 00:38:14.935
<v Speaker 1>Well,

00:38:15.255 --> 00:38:17.815
<v Speaker 1>which would be on the workers. Right? Because

00:38:18.295 --> 00:38:19.095
<v Speaker 1>but that

00:38:19.770 --> 00:38:21.690
<v Speaker 1>it never gets to the host if it's

00:38:21.690 --> 00:38:23.530
<v Speaker 1>on core DNS because it would talk directly

00:38:23.530 --> 00:38:24.170
<v Speaker 1>to

00:38:27.050 --> 00:38:29.370
<v Speaker 1>it would talk directly to it. Right? We're

00:38:29.370 --> 00:38:31.050
<v Speaker 1>not we're not getting off of this this

00:38:31.050 --> 00:38:32.730
<v Speaker 1>system. We shouldn't be getting off the system

00:38:32.730 --> 00:38:33.690
<v Speaker 1>to talk to Postgres.

00:38:34.375 --> 00:38:36.935
<v Speaker 0>Well, the way that these clusters are configured

00:38:36.935 --> 00:38:38.055
<v Speaker 0>is that

00:38:39.975 --> 00:38:41.655
<v Speaker 0>I mean, he could modify the host file

00:38:41.655 --> 00:38:43.495
<v Speaker 0>on each of the machines, or he could

00:38:43.495 --> 00:38:45.575
<v Speaker 0>have set up system to resolve or something

00:38:45.575 --> 00:38:45.975
<v Speaker 0>like that.

00:38:48.700 --> 00:38:51.180
<v Speaker 1>So Postgres is the name. Right? Yeah. Try

00:38:51.180 --> 00:38:53.980
<v Speaker 0>fully qualified. So Postgres dot default dot s

00:38:53.980 --> 00:38:55.020
<v Speaker 0>v c dot

00:38:55.340 --> 00:38:56.300
<v Speaker 0>cluster dot local.

00:39:01.494 --> 00:39:04.135
<v Speaker 0>Okay. Do we have dig in this container?

00:39:04.695 --> 00:39:06.055
<v Speaker 0>Of course, we don't do that. That'd be

00:39:06.055 --> 00:39:07.895
<v Speaker 1>handy. No. No.

00:39:09.255 --> 00:39:11.335
<v Speaker 2>I don't know. And dig is not there's

00:39:11.335 --> 00:39:14.615
<v Speaker 2>a package for it. It's always it's a

00:39:14.615 --> 00:39:16.710
<v Speaker 2>package in every Oh, yeah.

00:39:17.430 --> 00:39:17.830
<v Speaker 2>Or

00:39:18.790 --> 00:39:20.630
<v Speaker 2>buying details or

00:39:22.870 --> 00:39:25.030
<v Speaker 1>Okay. I think I think with eleven minutes

00:39:25.030 --> 00:39:26.630
<v Speaker 1>left, we should probably look at the hints

00:39:26.630 --> 00:39:28.950
<v Speaker 1>file. Well, our audience is telling us

00:39:29.655 --> 00:39:31.415
<v Speaker 0>cluster first is an option.

00:39:32.295 --> 00:39:34.775
<v Speaker 0>But because the pods didn't restart, I I

00:39:34.775 --> 00:39:36.055
<v Speaker 0>don't think it is.

00:39:37.015 --> 00:39:38.055
<v Speaker 1>Get service.

00:39:42.100 --> 00:39:43.940
<v Speaker 1>I could've just deleted the

00:39:44.100 --> 00:39:44.980
<v Speaker 1>service.

00:39:47.380 --> 00:39:49.540
<v Speaker 1>It's Ten days old. Kube DNS.

00:39:51.380 --> 00:39:51.859
<v Speaker 1>Oh.

00:39:53.635 --> 00:39:55.235
<v Speaker 1>And we don't use ingress for any of

00:39:55.235 --> 00:39:55.955
<v Speaker 1>this stuff.

00:39:57.235 --> 00:39:58.755
<v Speaker 0>Did we check policies

00:39:58.755 --> 00:40:00.435
<v Speaker 0>in all What? Namespaces?

00:40:00.435 --> 00:40:01.395
<v Speaker 1>The

00:40:02.595 --> 00:40:05.395
<v Speaker 1>postgres service was modified though. That's interesting.

00:40:09.070 --> 00:40:10.190
<v Speaker 1>Was that us?

00:40:11.550 --> 00:40:13.310
<v Speaker 2>You already checked that. What's the first thing

00:40:13.310 --> 00:40:15.470
<v Speaker 2>we looked at? Yeah. It looked okay. Yeah.

00:40:16.510 --> 00:40:18.510
<v Speaker 0>Alright. Let's check for network policies in all

00:40:18.510 --> 00:40:19.070
<v Speaker 0>namespaces.

00:40:20.744 --> 00:40:21.385
<v Speaker 1>Okay.

00:40:22.345 --> 00:40:24.265
<v Speaker 1>Oh, yeah. Because the name were yep. That

00:40:24.265 --> 00:40:25.865
<v Speaker 1>makes sense. Because we checked net poll, but

00:40:25.865 --> 00:40:28.105
<v Speaker 0>we didn't check and we checked CCNP,

00:40:28.105 --> 00:40:30.505
<v Speaker 0>but I don't think we checked CNP

00:40:30.585 --> 00:40:32.105
<v Speaker 0>or all namespaces

00:40:32.480 --> 00:40:33.760
<v Speaker 0>and net poll.

00:40:35.359 --> 00:40:36.000
<v Speaker 0>Yeah.

00:40:36.240 --> 00:40:37.280
<v Speaker 0>And net poll.

00:40:39.680 --> 00:40:41.280
<v Speaker 0>Okay. That goes that.

00:40:44.000 --> 00:40:46.240
<v Speaker 1>Alright. We're under ten minutes. Yeah. Let's go

00:40:46.240 --> 00:40:47.520
<v Speaker 0>for the head. Let's do it.

00:40:48.595 --> 00:40:49.395
<v Speaker 1>Alright.

00:40:52.195 --> 00:40:53.395
<v Speaker 1>Hint one.

00:40:54.115 --> 00:40:56.355
<v Speaker 1>Okay. We did we did that one, cilium.

00:40:56.355 --> 00:40:57.875
<v Speaker 1>Yep. That one's already complete.

00:41:01.500 --> 00:41:05.980
<v Speaker 0>Don't mess with Sorry.

00:41:10.540 --> 00:41:11.500
<v Speaker 0>Damn it, Arnean.

00:41:12.735 --> 00:41:14.335
<v Speaker 1>Is there a way to dump the BPS

00:41:14.335 --> 00:41:16.895
<v Speaker 1>thing so Selen can re recreate it?

00:41:21.775 --> 00:41:24.015
<v Speaker 2>There there's also a hint three if

00:41:24.575 --> 00:41:25.935
<v Speaker 2>I would look at hint three as well.

00:41:26.130 --> 00:41:28.130
<v Speaker 0>Yeah. Let's If you okay. Let's narrow this

00:41:28.130 --> 00:41:30.369
<v Speaker 0>down before we start, Hunt. There's just one

00:41:30.369 --> 00:41:32.210
<v Speaker 2>more problem to fix with the cluster. There

00:41:32.369 --> 00:41:33.730
<v Speaker 2>there's just one. So

00:41:35.009 --> 00:41:36.049
<v Speaker 0>Ah, okay.

00:41:39.144 --> 00:41:41.785
<v Speaker 0>Let's take a look at the system control

00:41:41.785 --> 00:41:42.665
<v Speaker 0>services.

00:41:45.464 --> 00:41:48.265
<v Speaker 0>So I think adding is running any program.

00:41:48.265 --> 00:41:49.865
<v Speaker 0>So he's not using firewalls to block our

00:41:49.865 --> 00:41:52.825
<v Speaker 0>traffic. He's using a probe or something.

00:41:54.500 --> 00:41:56.420
<v Speaker 1>Alright. So you're gonna tell me about this

00:41:56.420 --> 00:41:59.140
<v Speaker 1>because I System control status.

00:42:02.900 --> 00:42:04.740
<v Speaker 0>So this will list all of the

00:42:05.140 --> 00:42:06.180
<v Speaker 0>the unit files.

00:42:07.305 --> 00:42:10.105
<v Speaker 1>Okay. So our queue balance container d.

00:42:11.145 --> 00:42:12.745
<v Speaker 0>Yep. So that looks good.

00:42:13.385 --> 00:42:14.825
<v Speaker 0>Those look fine.

00:42:15.865 --> 00:42:17.785
<v Speaker 0>We're just looking for something suspicious.

00:42:20.230 --> 00:42:21.990
<v Speaker 1>Unattended upgrades.

00:42:24.549 --> 00:42:24.869
<v Speaker 1>Hellport's Yep.

00:42:26.869 --> 00:42:28.310
<v Speaker 0>Those look good.

00:42:29.109 --> 00:42:30.230
<v Speaker 0>Is that the end?

00:42:30.630 --> 00:42:31.589
<v Speaker 1>That's the end.

00:42:32.935 --> 00:42:34.615
<v Speaker 0>Alright. We must have missed the one. Oh,

00:42:34.615 --> 00:42:36.935
<v Speaker 0>no. You have to look on the workers,

00:42:36.935 --> 00:42:38.535
<v Speaker 2>not the control plane. Uh-huh. This is another

00:42:38.694 --> 00:42:39.575
<v Speaker 1>yeah. So

00:42:40.375 --> 00:42:43.015
<v Speaker 1>Okay. Yeah. Okay. So I really have to

00:42:43.015 --> 00:42:45.575
<v Speaker 1>SSH into the control workers. Can you get

00:42:45.575 --> 00:42:46.775
<v Speaker 1>me there? Uh-huh.

00:42:49.390 --> 00:42:51.470
<v Speaker 0>Alright. I'm on worker one. Feel free to

00:42:51.470 --> 00:42:53.150
<v Speaker 0>pop, join that session.

00:42:54.110 --> 00:42:55.790
<v Speaker 1>Oh, okay. Let's see here.

00:42:57.630 --> 00:42:58.350
<v Speaker 1>Sessions.

00:42:59.230 --> 00:43:01.150
<v Speaker 1>Worker one. Join session.

00:43:03.365 --> 00:43:04.005
<v Speaker 1>Okay.

00:43:04.565 --> 00:43:05.445
<v Speaker 1>Echo.

00:43:05.445 --> 00:43:07.445
<v Speaker 1>Yep. Good. I see it's live.

00:43:08.805 --> 00:43:09.685
<v Speaker 1>Export.

00:43:10.085 --> 00:43:11.445
<v Speaker 0>Oh, you just need to look at system

00:43:11.445 --> 00:43:13.285
<v Speaker 0>d. I don't care about the KubeConfig.

00:43:15.020 --> 00:43:16.780
<v Speaker 0>I don't want there's a KubeConfig on the

00:43:16.780 --> 00:43:18.220
<v Speaker 0>work Oh, that won't matter. Yeah. Because it

00:43:18.220 --> 00:43:19.500
<v Speaker 1>doesn't have access anyway.

00:43:19.580 --> 00:43:21.660
<v Speaker 1>Alright. So system control.

00:43:22.460 --> 00:43:24.540
<v Speaker 1>And then what was the Status.

00:43:25.660 --> 00:43:27.340
<v Speaker 1>Status. And then you just have to remember

00:43:27.340 --> 00:43:29.180
<v Speaker 0>every service from the last one.

00:43:30.684 --> 00:43:32.605
<v Speaker 1>Container d I q balance.

00:43:33.805 --> 00:43:35.964
<v Speaker 1>There. Actually, this had its own. Yeah. It's

00:43:35.964 --> 00:43:37.724
<v Speaker 0>got its own pager. There we go. That's

00:43:37.724 --> 00:43:38.365
<v Speaker 1>better.

00:43:39.325 --> 00:43:40.125
<v Speaker 1>What do we got?

00:43:45.260 --> 00:43:47.020
<v Speaker 1>Why is there a serial?

00:43:47.580 --> 00:43:48.780
<v Speaker 0>That's okay.

00:43:51.020 --> 00:43:53.740
<v Speaker 1>Toolkit service, network dispatcher,

00:43:53.740 --> 00:43:54.620
<v Speaker 1>multi path,

00:43:55.020 --> 00:43:56.140
<v Speaker 1>accounts Damian.

00:43:58.595 --> 00:44:00.355
<v Speaker 0>Yeah. Let's go there. There's lots of stuff

00:44:00.355 --> 00:44:01.715
<v Speaker 1>here that wasn't there before.

00:44:04.915 --> 00:44:06.995
<v Speaker 1>Out of memory Damian.

00:44:07.474 --> 00:44:08.515
<v Speaker 1>That's the end of it.

00:44:11.559 --> 00:44:13.000
<v Speaker 0>Oh, I'm not seeing Oh, it used to

00:44:13.000 --> 00:44:13.880
<v Speaker 0>the pager.

00:44:14.680 --> 00:44:15.880
<v Speaker 0>Yeah. Hold on.

00:44:16.200 --> 00:44:18.040
<v Speaker 0>Let me try that again.

00:44:18.440 --> 00:44:20.760
<v Speaker 0>Okay. Yeah. Paging on my screen.

00:44:21.720 --> 00:44:23.559
<v Speaker 0>Yeah. It's been weird for me, but that's

00:44:23.559 --> 00:44:23.799
<v Speaker 0>okay.

00:44:24.755 --> 00:44:27.235
<v Speaker 0>Alright. So in a system,

00:44:27.235 --> 00:44:28.515
<v Speaker 0>IRQ is

00:44:34.035 --> 00:44:35.475
<v Speaker 1>Okay. So that's ambassador.

00:44:39.260 --> 00:44:41.660
<v Speaker 1>Selium agent, Selium health responder.

00:44:43.420 --> 00:44:46.300
<v Speaker 2>It looks less obvious in this system CTR

00:44:46.300 --> 00:44:47.580
<v Speaker 2>status than I would have hoped.

00:44:50.975 --> 00:44:51.935
<v Speaker 1>There's at the

00:44:58.415 --> 00:45:00.255
<v Speaker 0>alright. Let's see if we can just see

00:45:00.255 --> 00:45:01.375
<v Speaker 0>a rogue process.

00:45:06.250 --> 00:45:07.530
<v Speaker 1>Sleep one.

00:45:08.010 --> 00:45:09.050
<v Speaker 1>Who's sleeping?

00:45:11.049 --> 00:45:12.730
<v Speaker 2>That's a good question.

00:45:13.369 --> 00:45:14.329
<v Speaker 2>Maybe that's,

00:45:14.809 --> 00:45:15.610
<v Speaker 2>important.

00:45:16.730 --> 00:45:18.569
<v Speaker 0>Alright. So let's do that with a tree.

00:45:23.434 --> 00:45:25.755
<v Speaker 1>We have here, session ID.

00:45:28.714 --> 00:45:30.075
<v Speaker 1>Oh, that's your grep.

00:45:30.474 --> 00:45:33.275
<v Speaker 1>There's grep in this the journal stream.

00:45:35.930 --> 00:45:38.329
<v Speaker 0>Oh, yeah. I I should because I'm gripping.

00:45:38.329 --> 00:45:40.650
<v Speaker 0>Yeah. You're right. Sorry. Yeah. My

00:45:41.450 --> 00:45:42.809
<v Speaker 0>bad. Oh, okay. I should have done the

00:45:42.809 --> 00:45:45.369
<v Speaker 0>grip with a dash b or whatever it

00:45:45.369 --> 00:45:47.290
<v Speaker 0>is. Dash b five

00:45:47.369 --> 00:45:49.210
<v Speaker 0>will show you five lanes before. You could

00:45:49.210 --> 00:45:50.744
<v Speaker 1>do that. Yeah. I was gonna throw it

00:45:50.744 --> 00:45:52.265
<v Speaker 1>in the lesson, just search it out.

00:45:52.984 --> 00:45:54.585
<v Speaker 1>Let's

00:45:54.585 --> 00:45:55.785
<v Speaker 1>do a b five, then you get the

00:45:55.785 --> 00:45:57.065
<v Speaker 1>before five. Right?

00:46:00.265 --> 00:46:01.305
<v Speaker 1>So sleep.

00:46:01.385 --> 00:46:03.945
<v Speaker 0>Oh, so it's the system d m d.

00:46:04.265 --> 00:46:05.145
<v Speaker 0>Yeah. Okay.

00:46:06.960 --> 00:46:08.480
<v Speaker 1>It's great. Ominous.

00:46:09.120 --> 00:46:10.640
<v Speaker 0>So we can go to

00:46:12.320 --> 00:46:14.480
<v Speaker 0>and here and this is your system D

00:46:14.480 --> 00:46:16.720
<v Speaker 0>unit files. So I guess

00:46:17.565 --> 00:46:19.725
<v Speaker 0>you wanna be looking at an OM D.

00:46:22.204 --> 00:46:22.925
<v Speaker 1>Right?

00:46:23.724 --> 00:46:25.725
<v Speaker 0>Or or whatever you want.

00:46:27.724 --> 00:46:28.365
<v Speaker 1>Yeah.

00:46:29.165 --> 00:46:30.365
<v Speaker 1>But I don't see OM D.

00:46:31.280 --> 00:46:33.840
<v Speaker 0>What? It's it's system d dash OMDI.

00:46:38.240 --> 00:46:38.960
<v Speaker 0>Need to

00:46:42.720 --> 00:46:43.599
<v Speaker 1>Jack start.

00:46:47.025 --> 00:46:49.025
<v Speaker 0>I think that binary is a script.

00:46:50.625 --> 00:46:52.785
<v Speaker 1>Well, let's go check it out. Okay. But

00:46:52.785 --> 00:46:54.545
<v Speaker 0>don't cat it, please. We've already had that

00:46:54.545 --> 00:46:55.025
<v Speaker 0>this week.

00:46:58.850 --> 00:47:01.490
<v Speaker 1>What? I'm

00:47:01.490 --> 00:47:03.330
<v Speaker 1>showing my inability to use them.

00:47:05.650 --> 00:47:08.210
<v Speaker 1>Quit. That makes you you that makes you

00:47:08.210 --> 00:47:09.010
<v Speaker 2>human.

00:47:10.850 --> 00:47:11.250
<v Speaker 1>Okay.

00:47:14.845 --> 00:47:16.125
<v Speaker 0>There we go. Oh,

00:47:16.445 --> 00:47:18.765
<v Speaker 1>isn't too bad. Oh, yeah. But if it

00:47:18.765 --> 00:47:20.045
<v Speaker 0>was a bainer Oh, there's gonna be a

00:47:20.045 --> 00:47:20.765
<v Speaker 1>tool.

00:47:21.565 --> 00:47:23.805
<v Speaker 1>Okay. Here. I can solve this problem.

00:47:24.285 --> 00:47:24.605
<v Speaker 0>So,

00:47:25.240 --> 00:47:26.760
<v Speaker 0>I mean, you can delete the script, or

00:47:26.760 --> 00:47:28.280
<v Speaker 0>you could just disable the service.

00:47:28.840 --> 00:47:30.520
<v Speaker 1>Or I just change this to false, and

00:47:30.520 --> 00:47:31.400
<v Speaker 1>it'll never run.

00:47:34.040 --> 00:47:35.640
<v Speaker 1>And then I can restart the service.

00:47:42.545 --> 00:47:44.545
<v Speaker 1>Like that? I think it's very polite to

00:47:44.545 --> 00:47:48.145
<v Speaker 0>leave his rogue script service running. Thanks.

00:47:48.385 --> 00:47:49.825
<v Speaker 2>Thanks. I need that for tomorrow.

00:47:53.240 --> 00:47:54.120
<v Speaker 1>Okay.

00:47:54.359 --> 00:47:55.000
<v Speaker 1>So

00:47:55.320 --> 00:47:56.840
<v Speaker 1>but the thing is that's

00:47:57.960 --> 00:48:00.760
<v Speaker 2>We might have to restart Cilium for things

00:48:00.760 --> 00:48:01.640
<v Speaker 2>to get

00:48:02.359 --> 00:48:05.320
<v Speaker 1>Yeah. Because it's it's adding stuff to Right?

00:48:05.720 --> 00:48:06.119
<v Speaker 1>Yeah.

00:48:08.065 --> 00:48:10.545
<v Speaker 1>So okay. Well, let's let's try the easy

00:48:10.545 --> 00:48:12.065
<v Speaker 1>route. We're running out of time here.

00:48:12.625 --> 00:48:13.985
<v Speaker 0>Oh, you can't do that here. He only

00:48:13.985 --> 00:48:15.425
<v Speaker 0>needs to jump back over to the control

00:48:15.425 --> 00:48:16.065
<v Speaker 0>plane.

00:48:16.625 --> 00:48:17.345
<v Speaker 1>Oh, no.

00:48:18.920 --> 00:48:22.040
<v Speaker 1>Okay. I'll do some quick typing while you

00:48:22.040 --> 00:48:23.000
<v Speaker 0>come over.

00:48:24.120 --> 00:48:24.760
<v Speaker 1>Oh,

00:48:27.160 --> 00:48:29.400
<v Speaker 1>I like it. You're the label. Oh.

00:48:30.280 --> 00:48:30.600
<v Speaker 0>Okay.

00:48:32.714 --> 00:48:33.515
<v Speaker 0>Yeah.

00:48:34.394 --> 00:48:35.115
<v Speaker 0>Also,

00:48:35.355 --> 00:48:38.394
<v Speaker 0>just because we've got two minutes, make sure

00:48:38.394 --> 00:48:40.154
<v Speaker 0>we get pods are white and make sure

00:48:40.154 --> 00:48:42.075
<v Speaker 0>we fixed it on the right node and

00:48:42.075 --> 00:48:42.714
<v Speaker 0>we haven't.

00:48:43.930 --> 00:48:44.810
<v Speaker 0>Oh, no.

00:48:45.930 --> 00:48:49.130
<v Speaker 0>So let's just delete the Let's

00:48:49.130 --> 00:48:50.490
<v Speaker 2>just hope it gets scheduled We can hit

00:48:50.490 --> 00:48:51.690
<v Speaker 1>the notes that it won't

00:48:52.090 --> 00:48:54.090
<v Speaker 1>it won't run on the other node?

00:48:54.330 --> 00:48:55.450
<v Speaker 0>Let's just cheat.

00:48:57.655 --> 00:48:58.454
<v Speaker 1>I think it's the

00:48:59.734 --> 00:49:01.415
<v Speaker 0>So where's template?

00:49:03.494 --> 00:49:04.375
<v Speaker 0>Spec.

00:49:06.055 --> 00:49:07.734
<v Speaker 0>Oh, okay. I'm gonna have to do this

00:49:07.734 --> 00:49:08.454
<v Speaker 0>on

00:49:08.840 --> 00:49:09.560
<v Speaker 0>here.

00:49:10.680 --> 00:49:12.200
<v Speaker 0>Templates back.

00:49:17.320 --> 00:49:18.680
<v Speaker 0>RNVP

00:49:18.680 --> 00:49:19.480
<v Speaker 0>worker

00:49:19.480 --> 00:49:19.880
<v Speaker 0>one.

00:49:21.945 --> 00:49:22.505
<v Speaker 0>Cool.

00:49:23.465 --> 00:49:25.865
<v Speaker 0>Okay. So that's not work. Hit the right

00:49:25.865 --> 00:49:27.945
<v Speaker 2>IP address of that worker because the other

00:49:27.945 --> 00:49:29.145
<v Speaker 2>one is still gonna be

00:49:30.185 --> 00:49:30.985
<v Speaker 2>funky.

00:49:32.025 --> 00:49:32.825
<v Speaker 2>So

00:49:33.385 --> 00:49:34.825
<v Speaker 0>yep. I think it did. Oh, and you

00:49:34.825 --> 00:49:36.025
<v Speaker 1>have to move Postgres call too.

00:49:37.460 --> 00:49:38.340
<v Speaker 0>It worked.

00:49:38.500 --> 00:49:40.020
<v Speaker 2>It worked. Alright. Cool.

00:49:40.500 --> 00:49:41.380
<v Speaker 1>Postgrescal's

00:49:41.380 --> 00:49:43.220
<v Speaker 1>still working on the wrong one. Wait. Fifty

00:49:44.740 --> 00:49:45.540
<v Speaker 2>seconds left. Yep.

00:49:49.475 --> 00:49:50.675
<v Speaker 0>Wow. Added.

00:49:51.235 --> 00:49:53.715
<v Speaker 0>I mean, it's harsh harsh.

00:49:53.795 --> 00:49:56.355
<v Speaker 2>I wanted to do something nasty with but

00:49:56.355 --> 00:49:58.035
<v Speaker 2>I didn't know what. So then I just

00:49:58.035 --> 00:50:00.275
<v Speaker 2>decided, I'll just delete all the programs that

00:50:00.275 --> 00:50:02.275
<v Speaker 2>Cillium inserts. I don't know what that will

00:50:02.275 --> 00:50:02.675
<v Speaker 2>do

00:50:03.700 --> 00:50:06.420
<v Speaker 2>because I don't know how BPF works, but

00:50:06.420 --> 00:50:08.580
<v Speaker 2>I suppose deleting all of them should break

00:50:08.580 --> 00:50:09.220
<v Speaker 2>things.

00:50:09.860 --> 00:50:11.780
<v Speaker 0>But I'm glad you opted for the delete

00:50:11.780 --> 00:50:13.860
<v Speaker 0>because if you had put something in,

00:50:14.660 --> 00:50:16.340
<v Speaker 0>I don't think we would have known how

00:50:16.340 --> 00:50:17.945
<v Speaker 0>to delete them.

00:50:18.585 --> 00:50:19.225
<v Speaker 2>Yeah.

00:50:20.425 --> 00:50:22.265
<v Speaker 0>That would have been a lot trickier. So

00:50:22.505 --> 00:50:23.065
<v Speaker 0>Yep.

00:50:24.025 --> 00:50:25.465
<v Speaker 0>Alright. Nice one.

00:50:26.345 --> 00:50:27.625
<v Speaker 0>Good job, William.

00:50:27.865 --> 00:50:28.425
<v Speaker 0>Yeah.

00:50:29.225 --> 00:50:32.120
<v Speaker 2>Yeah. It was very, very cutting very close,

00:50:32.120 --> 00:50:33.640
<v Speaker 2>but we made it. Fifty seconds on the

00:50:33.640 --> 00:50:35.080
<v Speaker 2>timer. That's good.

00:50:37.800 --> 00:50:38.680
<v Speaker 0>Alright.

00:50:39.320 --> 00:50:40.840
<v Speaker 0>Let's pop open.

00:50:41.640 --> 00:50:43.400
<v Speaker 0>The bit is on the other foot.

00:50:44.575 --> 00:50:45.855
<v Speaker 0>So control

00:50:47.055 --> 00:50:47.935
<v Speaker 0>plane

00:50:48.655 --> 00:50:51.615
<v Speaker 0>one. Okay. I've just opened a session, RN.

00:50:52.335 --> 00:50:53.135
<v Speaker 2>Okay.

00:50:53.135 --> 00:50:54.255
<v Speaker 2>Active sessions.

00:50:54.255 --> 00:50:55.055
<v Speaker 2>Yep. Got it.

00:50:56.220 --> 00:50:58.940
<v Speaker 0>So set up your KubeConfig. Best of luck.

00:50:58.940 --> 00:51:00.060
<v Speaker 0>William and I

00:51:00.859 --> 00:51:01.900
<v Speaker 0>will be here.

00:51:02.619 --> 00:51:03.340
<v Speaker 0>K.

00:51:05.420 --> 00:51:06.620
<v Speaker 2>Access denied.

00:51:08.140 --> 00:51:10.140
<v Speaker 2>So it is there, but I cannot connect.

00:51:10.140 --> 00:51:11.660
<v Speaker 0>Did you create your own session instead of

00:51:11.660 --> 00:51:11.900
<v Speaker 0>joining?

00:51:12.755 --> 00:51:14.515
<v Speaker 2>No. I joined the new session. You

00:51:16.035 --> 00:51:17.475
<v Speaker 1>didn't change his role.

00:51:18.035 --> 00:51:18.835
<v Speaker 2>Oh.

00:51:19.235 --> 00:51:19.955
<v Speaker 2>Yep.

00:51:22.115 --> 00:51:24.195
<v Speaker 0>Wait. No. You Well and now and now

00:51:24.195 --> 00:51:26.195
<v Speaker 2>the session also disappeared. It was there, and

00:51:26.195 --> 00:51:27.155
<v Speaker 2>now it's not there anymore.

00:51:27.800 --> 00:51:29.400
<v Speaker 0>Yeah. But I didn't give you access to

00:51:29.400 --> 00:51:31.240
<v Speaker 0>those machines, actually.

00:51:31.640 --> 00:51:33.880
<v Speaker 1>The the the session shows up even though

00:51:33.880 --> 00:51:35.480
<v Speaker 1>you don't have access. You just can't connect

00:51:35.480 --> 00:51:36.120
<v Speaker 1>to it.

00:51:36.920 --> 00:51:38.520
<v Speaker 0>Oh. I thought That's weird.

00:51:38.840 --> 00:51:40.920
<v Speaker 0>Okay. Well, it did, and then it didn't

00:51:40.920 --> 00:51:44.465
<v Speaker 2>anymore. Some weird race condition thing. Okay. You

00:51:44.465 --> 00:51:45.505
<v Speaker 0>should be good now.

00:51:49.985 --> 00:51:51.665
<v Speaker 2>I'm in. Mhmm.

00:51:53.985 --> 00:51:55.585
<v Speaker 0>It's a good thing Teleport makes that so

00:51:55.585 --> 00:51:55.825
<v Speaker 0>easy.

00:51:57.759 --> 00:51:59.680
<v Speaker 0>I really love Teleport. It's such an amazing

00:51:59.680 --> 00:52:00.320
<v Speaker 2>tool.

00:52:01.599 --> 00:52:02.320
<v Speaker 2>Hey.

00:52:02.640 --> 00:52:04.480
<v Speaker 0>Working cluster. Job done. I'm going to the

00:52:04.480 --> 00:52:06.559
<v Speaker 0>pub. I'll see you later. We're done. Okay.

00:52:06.559 --> 00:52:06.880
<v Speaker 0>So

00:52:13.505 --> 00:52:16.464
<v Speaker 2>this also works. It does. Okay. Let's pull

00:52:16.464 --> 00:52:18.225
<v Speaker 0>it up just so we can see the

00:52:18.545 --> 00:52:22.464
<v Speaker 0>the watch. I'm

00:52:22.464 --> 00:52:23.984
<v Speaker 1>so happy that it's working. Hello.

00:52:25.520 --> 00:52:27.600
<v Speaker 0>Yep. There we go. Watch. Watch. Watch.

00:52:28.720 --> 00:52:29.760
<v Speaker 2>K. So

00:52:30.319 --> 00:52:31.120
<v Speaker 2>let's

00:52:32.720 --> 00:52:34.000
<v Speaker 2>edit the deployment.

00:52:34.160 --> 00:52:35.920
<v Speaker 2>Right? So let's update.

00:52:36.560 --> 00:52:39.040
<v Speaker 2>It should be easy. Right? It's Friday night.

00:52:39.040 --> 00:52:39.520
<v Speaker 2>We're deploying.

00:52:40.244 --> 00:52:41.925
<v Speaker 0>Oh, it was the best time to deploy?

00:52:42.005 --> 00:52:43.444
<v Speaker 0>Yep. Yeah. Wait. My

00:52:44.404 --> 00:52:44.964
<v Speaker 2>exactly.

00:52:54.320 --> 00:52:55.600
<v Speaker 0>No. Oh.

00:52:58.000 --> 00:52:59.440
<v Speaker 0>It's been a while since we've seen an

00:52:59.440 --> 00:53:00.960
<v Speaker 0>HCD error message.

00:53:01.440 --> 00:53:04.480
<v Speaker 2>Okay. So could there be patched HCD server

00:53:04.480 --> 00:53:05.680
<v Speaker 2>permission denied?

00:53:06.295 --> 00:53:07.175
<v Speaker 2>Interesting.

00:53:11.415 --> 00:53:13.735
<v Speaker 2>Do we have at CD pods running?

00:53:13.975 --> 00:53:14.535
<v Speaker 2>We do.

00:53:19.690 --> 00:53:22.570
<v Speaker 2>Some stuff restarted. That's also on the s.

00:53:22.570 --> 00:53:24.410
<v Speaker 2>But it was before

00:53:25.130 --> 00:53:26.250
<v Speaker 2>the cluster

00:53:26.890 --> 00:53:27.530
<v Speaker 2>what?

00:53:28.010 --> 00:53:30.330
<v Speaker 2>Fourteen hours ago, but the age is 13.

00:53:30.330 --> 00:53:32.170
<v Speaker 2>Okay. This is I'm gonna ignore that for

00:53:32.170 --> 00:53:34.195
<v Speaker 0>now. Routing header.

00:53:34.595 --> 00:53:35.235
<v Speaker 0>Yeah.

00:53:38.675 --> 00:53:39.315
<v Speaker 2>When

00:53:39.555 --> 00:53:40.995
<v Speaker 2>okay. So

00:53:41.635 --> 00:53:43.395
<v Speaker 2>something something at c d.

00:53:43.875 --> 00:53:44.195
<v Speaker 2>But

00:53:45.230 --> 00:53:47.230
<v Speaker 2>we can read from at CD because all

00:53:47.230 --> 00:53:48.590
<v Speaker 2>these commands are working.

00:53:48.750 --> 00:53:50.190
<v Speaker 0>Well, I mean, we haven't tried to schedule

00:53:50.190 --> 00:53:53.150
<v Speaker 0>anything new, so we're not really sure.

00:53:55.789 --> 00:53:56.829
<v Speaker 0>Well, that won't work.

00:54:00.405 --> 00:54:02.485
<v Speaker 2>So we cannot schedule something new.

00:54:04.245 --> 00:54:05.525
<v Speaker 0>I think we'll need to take a look

00:54:05.525 --> 00:54:06.885
<v Speaker 0>at those logs.

00:54:10.645 --> 00:54:12.005
<v Speaker 2>Can I just do that with

00:54:12.645 --> 00:54:15.230
<v Speaker 2>they're running as a port? Right? And Yep.

00:54:15.230 --> 00:54:16.190
<v Speaker 0>We're about to

00:54:25.069 --> 00:54:26.110
<v Speaker 0>Great job. Yeah.

00:54:26.910 --> 00:54:28.750
<v Speaker 2>Failed to apply requests.

00:54:28.750 --> 00:54:29.069
<v Speaker 2>Okay.

00:54:33.065 --> 00:54:35.305
<v Speaker 2>Permission denied. Permission denied.

00:54:36.744 --> 00:54:37.465
<v Speaker 2>Okay.

00:54:39.305 --> 00:54:40.345
<v Speaker 2>Okay.

00:54:40.345 --> 00:54:42.185
<v Speaker 2>So it does not have the permission to

00:54:42.185 --> 00:54:42.825
<v Speaker 2>edit things.

00:54:44.070 --> 00:54:44.950
<v Speaker 2>Could

00:54:45.990 --> 00:54:48.150
<v Speaker 2>you have messed with the certificates

00:54:48.150 --> 00:54:49.110
<v Speaker 2>or something?

00:54:50.550 --> 00:54:52.310
<v Speaker 0>So it does say

00:54:52.310 --> 00:54:54.390
<v Speaker 0>off permission denied.

00:54:54.390 --> 00:54:54.630
<v Speaker 0>So

00:54:58.394 --> 00:54:59.194
<v Speaker 1>like, let's

00:55:03.115 --> 00:55:05.355
<v Speaker 0>and there's a cool bit of history,

00:55:06.154 --> 00:55:07.515
<v Speaker 0>which I think is cool. You see the

00:55:07.515 --> 00:55:09.835
<v Speaker 0>key on the ETCD thing here? It says

00:55:09.835 --> 00:55:11.035
<v Speaker 0>registry minions,

00:55:11.710 --> 00:55:14.270
<v Speaker 0>because that control play one. That's because

00:55:15.150 --> 00:55:17.470
<v Speaker 0>SaltStack used to be part of the original

00:55:17.470 --> 00:55:19.390
<v Speaker 0>deployment pipeline for Kubernetes.

00:55:20.110 --> 00:55:21.790
<v Speaker 2>Ah, interesting.

00:55:22.110 --> 00:55:23.070
<v Speaker 2>I didn't know that.

00:55:26.765 --> 00:55:29.085
<v Speaker 2>Okay. So I don't see

00:55:29.484 --> 00:55:33.085
<v Speaker 2>any files chain any certificates changed or anything.

00:55:33.085 --> 00:55:35.404
<v Speaker 2>That was my first gut feeling. Like, maybe

00:55:35.404 --> 00:55:37.484
<v Speaker 2>the client certificate was removed

00:55:37.644 --> 00:55:38.525
<v Speaker 2>or

00:55:39.400 --> 00:55:40.120
<v Speaker 2>or

00:55:40.360 --> 00:55:42.840
<v Speaker 2>a new client certificate was made that's I

00:55:42.840 --> 00:55:44.920
<v Speaker 2>don't know. But that's not it. Okay.

00:55:45.400 --> 00:55:47.720
<v Speaker 2>Does HCD have any kind of

00:55:48.600 --> 00:55:49.560
<v Speaker 2>ACL

00:55:49.960 --> 00:55:52.120
<v Speaker 2>features? I I don't know as much about

00:55:52.120 --> 00:55:52.760
<v Speaker 2>HCD.

00:55:53.785 --> 00:55:55.465
<v Speaker 0>No. I'm pretty I

00:55:55.785 --> 00:55:57.225
<v Speaker 0>mean, I may have this terribly wrong, but

00:55:57.225 --> 00:55:58.825
<v Speaker 0>my knowledge of this at the moment is

00:55:58.825 --> 00:56:02.265
<v Speaker 0>that it's just MTLS certificate level. So the

00:56:02.265 --> 00:56:05.465
<v Speaker 0>controller manager, the API server, the scheduler, etcetera,

00:56:06.279 --> 00:56:08.759
<v Speaker 0>all have their own certificates that will be

00:56:08.759 --> 00:56:11.079
<v Speaker 0>passed in via the static manifest to speak

00:56:11.079 --> 00:56:12.440
<v Speaker 0>to etcd.

00:56:13.079 --> 00:56:14.040
<v Speaker 2>Where are

00:56:14.200 --> 00:56:15.880
<v Speaker 2>it's good that you said it. I see

00:56:15.880 --> 00:56:19.079
<v Speaker 2>the API server etcd client certificates, but where

00:56:19.079 --> 00:56:20.995
<v Speaker 2>are the others? Oh, wait. Only the API

00:56:20.995 --> 00:56:22.915
<v Speaker 2>server talks to that city. Right? The others

00:56:22.915 --> 00:56:24.995
<v Speaker 2>all talk to the API server. Yeah.

00:56:25.715 --> 00:56:28.035
<v Speaker 0>Okay. Yeah. Okay. Never mind. I was like,

00:56:28.035 --> 00:56:29.555
<v Speaker 2>oh, I found it. So

00:56:33.795 --> 00:56:34.675
<v Speaker 0>but I would

00:56:35.030 --> 00:56:37.190
<v Speaker 0>maybe go take a look at the manifests

00:56:37.430 --> 00:56:39.350
<v Speaker 0>as well for the API server.

00:56:47.109 --> 00:56:49.589
<v Speaker 2>This also all looks very

00:56:50.295 --> 00:56:51.495
<v Speaker 2>not edited,

00:56:51.655 --> 00:56:53.415
<v Speaker 2>which in terms of

00:56:57.175 --> 00:56:58.055
<v Speaker 2>modification

00:56:58.055 --> 00:56:58.775
<v Speaker 2>date.

00:56:59.734 --> 00:57:01.494
<v Speaker 0>Well, all the FCD flags are at the

00:57:01.494 --> 00:57:02.055
<v Speaker 0>top.

00:57:02.615 --> 00:57:03.015
<v Speaker 2>Okay.

00:57:05.700 --> 00:57:07.780
<v Speaker 2>So at c d c I e file,

00:57:07.780 --> 00:57:10.180
<v Speaker 2>that makes sense. Cert file, key file.

00:57:10.340 --> 00:57:12.740
<v Speaker 2>Oh, the thing is it is connecting because

00:57:12.740 --> 00:57:14.900
<v Speaker 2>we're getting data out of the API server.

00:57:14.900 --> 00:57:15.700
<v Speaker 2>So Mhmm.

00:57:16.740 --> 00:57:18.660
<v Speaker 2>We've established that the

00:57:20.795 --> 00:57:22.635
<v Speaker 2>certificates have not been

00:57:23.035 --> 00:57:23.995
<v Speaker 2>modified.

00:57:23.995 --> 00:57:24.635
<v Speaker 2>Well,

00:57:25.355 --> 00:57:27.915
<v Speaker 2>we don't know for sure, but the modification

00:57:27.915 --> 00:57:28.155
<v Speaker 2>time

00:57:28.715 --> 00:57:29.355
<v Speaker 2>times

00:57:29.515 --> 00:57:31.755
<v Speaker 2>suggest that they haven't been edited. But

00:57:33.720 --> 00:57:35.880
<v Speaker 1>sure. I worked very hard to make sure

00:57:35.880 --> 00:57:37.400
<v Speaker 1>you could still see things.

00:57:37.880 --> 00:57:38.600
<v Speaker 2>Yeah.

00:57:41.160 --> 00:57:42.200
<v Speaker 2>I see that.

00:57:46.599 --> 00:57:48.680
<v Speaker 0>How is your entity knowledge adding in?

00:57:49.855 --> 00:57:50.735
<v Speaker 2>Zero.

00:57:51.695 --> 00:57:53.695
<v Speaker 2>I know that stuff

00:57:54.175 --> 00:57:55.455
<v Speaker 2>gets stored in there.

00:57:58.815 --> 00:58:01.535
<v Speaker 0>Alright. Well, let's get entity

00:58:01.935 --> 00:58:03.590
<v Speaker 0>cheat sheet Kubernetes.

00:58:03.590 --> 00:58:05.510
<v Speaker 0>I never remember how to configure the client,

00:58:05.510 --> 00:58:07.190
<v Speaker 0>but there's, like, three or four lines that

00:58:07.190 --> 00:58:08.630
<v Speaker 0>we need. And I always get it on

00:58:08.630 --> 00:58:10.390
<v Speaker 0>the same website.

00:58:11.110 --> 00:58:12.230
<v Speaker 2>Oh, yeah. Oh,

00:58:13.670 --> 00:58:14.150
<v Speaker 2>let's

00:58:17.110 --> 00:58:17.670
<v Speaker 2>you go.

00:58:18.924 --> 00:58:21.405
<v Speaker 2>Oh, we need to get the HCT client

00:58:21.405 --> 00:58:24.365
<v Speaker 2>installed first, but we can do that. I

00:58:24.365 --> 00:58:26.045
<v Speaker 0>know you're an XOS person, so I'll do

00:58:26.045 --> 00:58:28.765
<v Speaker 0>the the typing of the app install. So

00:58:29.325 --> 00:58:30.684
<v Speaker 0>just so you don't feel too dirty.

00:58:31.299 --> 00:58:32.180
<v Speaker 0>Oh, yeah.

00:58:36.180 --> 00:58:37.779
<v Speaker 0>Alright. There we go. If we get the

00:58:37.779 --> 00:58:39.859
<v Speaker 0>same error message. So this is an entity

00:58:39.859 --> 00:58:41.060
<v Speaker 0>thing.

00:58:41.460 --> 00:58:43.299
<v Speaker 2>Oh, but here we get the error message

00:58:43.299 --> 00:58:44.819
<v Speaker 2>on a get, which is interesting.

00:58:45.815 --> 00:58:46.615
<v Speaker 2>Right?

00:58:47.975 --> 00:58:49.495
<v Speaker 0>So we can't read either.

00:58:50.855 --> 00:58:53.175
<v Speaker 2>But why does the API server

00:58:53.895 --> 00:58:56.135
<v Speaker 2>still show things even though it can't read?

00:58:56.135 --> 00:58:57.255
<v Speaker 2>That's odd.

00:58:58.695 --> 00:58:59.015
<v Speaker 2>Right?

00:59:01.690 --> 00:59:03.610
<v Speaker 0>The only other entity command I know is

00:59:03.610 --> 00:59:05.930
<v Speaker 0>entity control health.

00:59:08.170 --> 00:59:09.050
<v Speaker 2>Sounds

00:59:09.050 --> 00:59:09.370
<v Speaker 2>like

00:59:10.250 --> 00:59:12.330
<v Speaker 0>Nope. Maybe not. State status?

00:59:12.735 --> 00:59:14.015
<v Speaker 0>I thought it was health.

00:59:16.575 --> 00:59:18.495
<v Speaker 2>I know one more. It's called test dash

00:59:18.495 --> 00:59:19.055
<v Speaker 2>help.

00:59:20.175 --> 00:59:20.735
<v Speaker 2>And

00:59:22.015 --> 00:59:24.815
<v Speaker 2>well, oh, look at this. There's something with

00:59:24.815 --> 00:59:27.720
<v Speaker 2>users and roles. And off. Oh, yeah. There's

00:59:27.720 --> 00:59:30.360
<v Speaker 0>lots here. Oh, endpoint health and endpoint status.

00:59:30.360 --> 00:59:31.000
<v Speaker 0>Okay.

00:59:31.240 --> 00:59:32.840
<v Speaker 0>I was almost there.

00:59:35.240 --> 00:59:36.920
<v Speaker 0>Do you want to try

00:59:37.560 --> 00:59:38.440
<v Speaker 0>off disable?

00:59:40.865 --> 00:59:41.425
<v Speaker 2>Sure.

00:59:44.145 --> 00:59:45.505
<v Speaker 2>So I don't know. I I just I

00:59:45.505 --> 00:59:47.345
<v Speaker 0>see it sitting there, and I'm like,

00:59:47.585 --> 00:59:49.345
<v Speaker 0>sure. We don't need authentication.

00:59:49.505 --> 00:59:51.825
<v Speaker 2>Oh, but it says username not found when

00:59:51.825 --> 00:59:52.785
<v Speaker 2>I do that. It's okay.

00:59:56.770 --> 00:59:59.090
<v Speaker 2>But it doesn't help us. Okay.

01:00:01.410 --> 01:00:01.970
<v Speaker 2>Can

01:00:07.010 --> 01:00:09.250
<v Speaker 0>we list all users? Will that work?

01:00:10.185 --> 01:00:12.025
<v Speaker 2>No. I already tried to give the same

01:00:12.025 --> 01:00:12.745
<v Speaker 2>error.

01:00:15.305 --> 01:00:16.745
<v Speaker 0>Alright. What about

01:00:17.305 --> 01:00:18.825
<v Speaker 0>role list?

01:00:21.785 --> 01:00:22.825
<v Speaker 0>Let me just type that.

01:00:26.880 --> 01:00:28.480
<v Speaker 0>Username not found.

01:00:33.040 --> 01:00:35.360
<v Speaker 0>Alright. Why don't we just try dash dash

01:00:35.360 --> 01:00:35.920
<v Speaker 0>user?

01:00:43.045 --> 01:00:43.765
<v Speaker 0>Root.

01:00:44.405 --> 01:00:45.765
<v Speaker 0>Oh, perfect shot.

01:00:50.005 --> 01:00:51.920
<v Speaker 0>Erin's back. Hello?

01:00:52.240 --> 01:00:53.839
<v Speaker 0>Yeah. I was talking to you. I didn't

01:00:53.839 --> 01:00:56.800
<v Speaker 0>actually realize you dropped. So Yeah. Yeah. No.

01:00:57.359 --> 01:01:00.000
<v Speaker 0>You're the entity. Fuck this. I'm away.

01:01:00.640 --> 01:01:02.000
<v Speaker 2>Exactly. I gave up.

01:01:04.265 --> 01:01:05.865
<v Speaker 0>So let's go let's

01:01:05.865 --> 01:01:06.985
<v Speaker 0>go look at the

01:01:07.385 --> 01:01:08.425
<v Speaker 0>the keys.

01:01:08.745 --> 01:01:11.305
<v Speaker 0>That'll have information on it. Right?

01:01:12.505 --> 01:01:14.505
<v Speaker 2>Okay. The keys. What do you mean?

01:01:15.145 --> 01:01:17.145
<v Speaker 2>The So if we go to p k

01:01:17.145 --> 01:01:19.305
<v Speaker 0>I at c t Oh, those keys. Yeah.

01:01:19.305 --> 01:01:21.830
<v Speaker 2>Sure. Yeah. Like, these are certificates that we

01:01:21.830 --> 01:01:24.630
<v Speaker 0>can try and remember the open SSL commands

01:01:24.630 --> 01:01:26.870
<v Speaker 0>to get some information out of these. Yeah.

01:01:26.870 --> 01:01:28.710
<v Speaker 0>Perhaps. And SSL

01:01:35.395 --> 01:01:36.115
<v Speaker 0>Dash

01:01:36.435 --> 01:01:37.315
<v Speaker 0>n. Yeah.

01:01:37.715 --> 01:01:40.275
<v Speaker 2>Wow. I remembered this. I'm so proud of

01:01:40.275 --> 01:01:40.915
<v Speaker 2>myself.

01:01:42.355 --> 01:01:43.715
<v Speaker 1>I had to look that up. Yeah.

01:01:47.315 --> 01:01:48.675
<v Speaker 2>Does it have anything?

01:01:49.830 --> 01:01:50.630
<v Speaker 2>Okay.

01:01:50.630 --> 01:01:54.070
<v Speaker 2>The subject alternative names looks good.

01:01:55.030 --> 01:01:56.310
<v Speaker 2>Doesn't look

01:01:58.230 --> 01:01:59.910
<v Speaker 2>so should be able to connect with local

01:01:59.910 --> 01:02:02.070
<v Speaker 2>host to the control plane to the control

01:02:02.070 --> 01:02:04.390
<v Speaker 2>plane's IP address. Does that match?

01:02:10.494 --> 01:02:12.175
<v Speaker 2>214.5.

01:02:14.815 --> 01:02:16.415
<v Speaker 2>Is that what we see here?

01:02:18.415 --> 01:02:20.734
<v Speaker 2>Yeah. This all looks very

01:02:22.790 --> 01:02:23.350
<v Speaker 2>not

01:02:23.590 --> 01:02:24.950
<v Speaker 2>weird to me.

01:02:28.630 --> 01:02:30.310
<v Speaker 0>Well, it it it makes you

01:02:30.870 --> 01:02:33.030
<v Speaker 2>Yes. Do we want to check whether it's

01:02:33.030 --> 01:02:35.030
<v Speaker 2>actually signed by the CA?

01:02:38.645 --> 01:02:40.485
<v Speaker 2>Don't know how to do that. But Well,

01:02:40.485 --> 01:02:42.965
<v Speaker 0>there's an interesting comment from Colin in the

01:02:42.965 --> 01:02:45.205
<v Speaker 0>chat who says it seems fishy about the

01:02:45.205 --> 01:02:47.605
<v Speaker 0>username has a space in it. Although,

01:02:48.085 --> 01:02:50.325
<v Speaker 0>he doesn't know much about SCD or if

01:02:50.325 --> 01:02:51.045
<v Speaker 0>that's expected.

01:02:53.490 --> 01:02:54.370
<v Speaker 0>No.

01:02:54.770 --> 01:02:56.530
<v Speaker 0>I don't think there I don't think there

01:02:56.530 --> 01:02:59.010
<v Speaker 0>are usernames when you're doing MTLS.

01:02:59.010 --> 01:03:00.930
<v Speaker 0>Right? It's just certificates. Yeah.

01:03:03.410 --> 01:03:05.890
<v Speaker 0>So I'm I'm not sure. Again, my etcd,

01:03:05.890 --> 01:03:06.770
<v Speaker 0>I wish it was

01:03:07.875 --> 01:03:09.715
<v Speaker 0>better than Okay. But let's

01:03:10.115 --> 01:03:11.235
<v Speaker 2>let's

01:03:11.635 --> 01:03:12.995
<v Speaker 2>what I wanted to look for is a

01:03:12.995 --> 01:03:15.075
<v Speaker 2>way to check if this thing is healthy.

01:03:15.315 --> 01:03:18.195
<v Speaker 0>Endpoint status and endpoint health. K.

01:03:19.155 --> 01:03:20.915
<v Speaker 0>Assuming that let's just run those commands.

01:03:22.540 --> 01:03:23.180
<v Speaker 0>Okay.

01:03:26.780 --> 01:03:27.099
<v Speaker 2>Okay.

01:03:44.695 --> 01:03:46.935
<v Speaker 0>I'm curious, William. If we look at the

01:03:46.935 --> 01:03:48.840
<v Speaker 0>hands, will it guide us? Or

01:03:49.080 --> 01:03:51.080
<v Speaker 0>have you just left us here to to

01:03:51.240 --> 01:03:53.480
<v Speaker 0>I've just left you here. I've got notes

01:03:53.480 --> 01:03:54.760
<v Speaker 1>so I can drop in

01:03:55.080 --> 01:03:56.520
<v Speaker 1>hints and help if we get there. I

01:03:56.520 --> 01:03:57.880
<v Speaker 1>figured, you know, if we get down on

01:03:57.880 --> 01:03:59.960
<v Speaker 1>time a little bit. Yeah. We can work

01:03:59.960 --> 01:04:02.120
<v Speaker 0>this way. We're smart people. We're not we're

01:04:02.120 --> 01:04:04.415
<v Speaker 0>we're We're doing good. Yeah.

01:04:06.895 --> 01:04:09.135
<v Speaker 2>What what is an alarm? And we can

01:04:09.135 --> 01:04:11.375
<v Speaker 2>disarm it. I don't know. Was there an

01:04:11.375 --> 01:04:13.135
<v Speaker 0>alarm? The alarm list?

01:04:14.735 --> 01:04:15.775
<v Speaker 0>Yeah. There's no alarm. Yeah.

01:04:16.260 --> 01:04:18.500
<v Speaker 0>K. Don't know what alarm is, but I

01:04:18.500 --> 01:04:19.140
<v Speaker 2>was like,

01:04:19.620 --> 01:04:22.180
<v Speaker 2>it has a disarm command that sounds promising.

01:04:22.420 --> 01:04:24.340
<v Speaker 0>Yeah. That's such really annoying thing that we've

01:04:24.340 --> 01:04:26.260
<v Speaker 0>seen before where you can set the maximum

01:04:26.260 --> 01:04:28.260
<v Speaker 0>size of the database just so it can

01:04:28.260 --> 01:04:29.620
<v Speaker 0>be exhausted very easily.

01:04:30.185 --> 01:04:31.945
<v Speaker 0>And even if you change the size, you

01:04:31.945 --> 01:04:34.025
<v Speaker 0>still have to manually disarm the alarm before

01:04:34.025 --> 01:04:36.105
<v Speaker 0>it'll even work. That

01:04:36.345 --> 01:04:37.785
<v Speaker 0>bit me. So

01:04:42.105 --> 01:04:43.705
<v Speaker 0>this is a tricky one. I'm not.

01:04:44.529 --> 01:04:47.250
<v Speaker 0>Okay. Let's let's run that STD get command

01:04:47.250 --> 01:04:49.089
<v Speaker 0>again. Right? Let let's work out

01:04:50.289 --> 01:04:51.970
<v Speaker 0>what our error message is and see if

01:04:51.970 --> 01:04:54.050
<v Speaker 0>we can work work out what's going wrong.

01:04:55.089 --> 01:04:56.849
<v Speaker 2>Okay. I was like, what if I just

01:04:56.849 --> 01:04:58.609
<v Speaker 2>try to put in a new key if

01:04:58.609 --> 01:05:01.465
<v Speaker 2>that works? Okay. Did you say? Repeat what

01:05:01.465 --> 01:05:02.105
<v Speaker 2>you said.

01:05:02.585 --> 01:05:03.465
<v Speaker 2>We want to look at

01:05:04.585 --> 01:05:06.905
<v Speaker 0>Well, we got it's been so long there.

01:05:06.905 --> 01:05:08.665
<v Speaker 0>It feels like so long. But we got

01:05:08.825 --> 01:05:10.345
<v Speaker 0>we did get an error message about the

01:05:10.345 --> 01:05:12.345
<v Speaker 0>user when we try to when we do

01:05:12.345 --> 01:05:14.985
<v Speaker 0>the roles and user list. Right? So, like,

01:05:15.339 --> 01:05:16.140
<v Speaker 0>user

01:05:16.700 --> 01:05:19.339
<v Speaker 0>list. Yeah. It says username not found. But

01:05:19.339 --> 01:05:21.660
<v Speaker 2>I think that's because we don't have anything

01:05:21.819 --> 01:05:22.940
<v Speaker 2>here maybe.

01:05:23.099 --> 01:05:24.540
<v Speaker 0>But so we are

01:05:25.180 --> 01:05:27.660
<v Speaker 0>that's I think if you're doing standard authentication.

01:05:27.660 --> 01:05:28.619
<v Speaker 0>Right? So

01:05:29.155 --> 01:05:30.835
<v Speaker 0>let's let's see our setup for a TT

01:05:30.835 --> 01:05:33.235
<v Speaker 0>that we stole from the Internet. Right? Yep.

01:05:33.235 --> 01:05:35.875
<v Speaker 0>No. We've lost I've lost my buffer.

01:05:37.315 --> 01:05:38.355
<v Speaker 0>Here it is.

01:05:38.995 --> 01:05:41.315
<v Speaker 0>Now I've minimized Chrome. Hold on.

01:05:43.075 --> 01:05:44.355
<v Speaker 2>We'll get there. We'll get there.

01:05:45.490 --> 01:05:46.290
<v Speaker 0>Alright.

01:05:46.530 --> 01:05:47.250
<v Speaker 0>So

01:05:47.490 --> 01:05:50.450
<v Speaker 0>this is gonna be important. So set up

01:05:50.450 --> 01:05:51.250
<v Speaker 0>entity.

01:05:52.610 --> 01:05:54.050
<v Speaker 0>Now we're set in

01:05:56.930 --> 01:05:58.290
<v Speaker 0>I need to look at it for cat.

01:05:59.585 --> 01:06:01.105
<v Speaker 0>We're

01:06:01.105 --> 01:06:03.265
<v Speaker 0>setting up that we want API version three.

01:06:03.265 --> 01:06:05.345
<v Speaker 0>We're pointing it to the CA certificate so

01:06:05.345 --> 01:06:07.105
<v Speaker 0>we could validate that that's not expired or

01:06:07.105 --> 01:06:09.184
<v Speaker 0>anything, which may be good We're using a

01:06:09.184 --> 01:06:09.905
<v Speaker 2>weird

01:06:10.545 --> 01:06:12.224
<v Speaker 0>Oh, we're using a health check.

01:06:13.505 --> 01:06:16.280
<v Speaker 2>That that's that's not the right one. Right?

01:06:16.280 --> 01:06:18.920
<v Speaker 0>Okay. So let's use something with more permissions.

01:06:19.400 --> 01:06:23.080
<v Speaker 2>Yeah. The peer certificates, I suppose. Right?

01:06:25.640 --> 01:06:26.440
<v Speaker 0>Or even just the Yeah.

01:06:28.115 --> 01:06:30.035
<v Speaker 2>Well, sir, I don't know. Can can the

01:06:30.035 --> 01:06:31.555
<v Speaker 2>server that's the server. No. We want the

01:06:31.555 --> 01:06:33.075
<v Speaker 2>peer one. That's the one that the API

01:06:33.075 --> 01:06:34.435
<v Speaker 2>server probably uses.

01:06:34.595 --> 01:06:36.675
<v Speaker 0>Oh, we can confirm that, can we?

01:06:37.635 --> 01:06:38.035
<v Speaker 2>Yep.

01:06:45.530 --> 01:06:47.290
<v Speaker 1>Here.

01:06:56.055 --> 01:06:56.775
<v Speaker 2>Okay.

01:06:58.375 --> 01:07:00.375
<v Speaker 0>And I didn't plus x it, so you

01:07:00.375 --> 01:07:01.575
<v Speaker 0>only have to source it.

01:07:03.815 --> 01:07:05.815
<v Speaker 2>And we have to source it anyway because

01:07:05.815 --> 01:07:07.815
<v Speaker 2>otherwise we don't get

01:07:10.100 --> 01:07:11.700
<v Speaker 2>still permission denied.

01:07:19.700 --> 01:07:21.845
<v Speaker 0>Okay. So let's look at the static manifest

01:07:21.845 --> 01:07:23.605
<v Speaker 0>of the API server and see what certificate

01:07:23.605 --> 01:07:26.085
<v Speaker 0>it uses just just to confirm.

01:07:26.405 --> 01:07:27.365
<v Speaker 2>Sounds good.

01:07:35.700 --> 01:07:38.900
<v Speaker 2>It is using API server at city.

01:07:39.220 --> 01:07:40.180
<v Speaker 2>That's

01:07:40.180 --> 01:07:40.820
<v Speaker 2>wrong,

01:07:40.980 --> 01:07:42.580
<v Speaker 2>right? That doesn't exist.

01:07:45.460 --> 01:07:46.580
<v Speaker 2>Should be peer.

01:07:46.820 --> 01:07:48.500
<v Speaker 2>Crt, right? Or

01:07:48.845 --> 01:07:50.845
<v Speaker 2>oh, no. Wait. Peer is just okay. I

01:07:50.845 --> 01:07:52.684
<v Speaker 2>always get these confused. Yeah. Think peers for

01:07:52.684 --> 01:07:54.045
<v Speaker 0>other entity members.

01:07:54.045 --> 01:07:54.685
<v Speaker 0>Yeah.

01:07:59.565 --> 01:08:01.325
<v Speaker 0>So we do have an API

01:08:01.325 --> 01:08:03.005
<v Speaker 0>server entity client.

01:08:03.819 --> 01:08:04.780
<v Speaker 2>Sir, thank you.

01:08:06.140 --> 01:08:07.020
<v Speaker 2>Yeah. Let's actually

01:08:07.660 --> 01:08:09.260
<v Speaker 2>let's edit this

01:08:12.059 --> 01:08:14.380
<v Speaker 0>Why is there an API serve or entity

01:08:14.380 --> 01:08:16.734
<v Speaker 0>client and an API server dot sir? But

01:08:16.734 --> 01:08:18.094
<v Speaker 0>can we just see the timestamps of all

01:08:18.094 --> 01:08:18.895
<v Speaker 0>these files?

01:08:22.015 --> 01:08:23.375
<v Speaker 2>Well, that all look fine.

01:08:23.774 --> 01:08:25.215
<v Speaker 0>Why have we got two sets of API

01:08:25.215 --> 01:08:25.934
<v Speaker 0>server?

01:08:27.135 --> 01:08:28.975
<v Speaker 0>In fact, three sets of API server stuff.

01:08:28.975 --> 01:08:30.654
<v Speaker 0>Is that normal? I'm I'm starting to doubt

01:08:30.654 --> 01:08:31.694
<v Speaker 2>everything. Yes.

01:08:32.069 --> 01:08:34.389
<v Speaker 2>Yes. So I think API server is the

01:08:34.389 --> 01:08:35.590
<v Speaker 2>serving certificate.

01:08:36.630 --> 01:08:39.270
<v Speaker 2>The API server, kubelet client is to talk

01:08:39.270 --> 01:08:41.510
<v Speaker 2>to the kubelet server to get the logs.

01:08:43.029 --> 01:08:45.335
<v Speaker 2>This all looks normal to me so far.

01:08:45.335 --> 01:08:46.135
<v Speaker 2>But that

01:08:46.695 --> 01:08:48.135
<v Speaker 2>yep. So far.

01:08:48.695 --> 01:08:51.095
<v Speaker 2>But I want to Carlos.

01:08:51.175 --> 01:08:52.215
<v Speaker 2>Sorry

01:08:54.535 --> 01:08:55.335
<v Speaker 0>about him?

01:08:56.535 --> 01:09:00.695
<v Speaker 1>I said Carlos from chat agrees that

01:08:59.560 --> 01:09:01.239
<v Speaker 1>that's the one you wanna use.

01:09:01.719 --> 01:09:02.840
<v Speaker 2>Alright. Okay.

01:09:03.080 --> 01:09:04.600
<v Speaker 2>So we want to use the one from

01:09:04.600 --> 01:09:06.039
<v Speaker 2>the API server. Right?

01:09:06.439 --> 01:09:08.920
<v Speaker 0>Yeah. That's just API server dash h c

01:09:08.920 --> 01:09:09.800
<v Speaker 0>d dash client.

01:09:17.965 --> 01:09:19.965
<v Speaker 0>Alright. Let's source that.

01:09:23.324 --> 01:09:24.444
<v Speaker 0>We got stuff?

01:09:24.844 --> 01:09:26.444
<v Speaker 2>Yep. Okay. That works.

01:09:26.925 --> 01:09:27.564
<v Speaker 2>That's good.

01:09:28.740 --> 01:09:30.979
<v Speaker 2>I guess. So now can we list users

01:09:30.979 --> 01:09:31.939
<v Speaker 0>and roles?

01:09:38.420 --> 01:09:39.540
<v Speaker 2>I don't think so.

01:09:46.005 --> 01:09:46.564
<v Speaker 2>No.

01:09:52.484 --> 01:09:54.405
<v Speaker 2>Looking for hints in the chat.

01:09:55.365 --> 01:09:57.605
<v Speaker 2>Look how NCD server got started and with

01:09:57.605 --> 01:09:59.660
<v Speaker 2>what flags. Yeah. That's oh, yeah.

01:10:00.300 --> 01:10:01.900
<v Speaker 0>That's alright. I I I I was just

01:10:01.900 --> 01:10:03.900
<v Speaker 0>gonna list the the difference. Because what I

01:10:03.900 --> 01:10:06.460
<v Speaker 0>was thinking was there must be some certificate

01:10:06.460 --> 01:10:08.860
<v Speaker 0>here with elevated privileges even if our API

01:10:08.860 --> 01:10:10.940
<v Speaker 0>server doesn't have them. But that's a good

01:10:10.940 --> 01:10:13.100
<v Speaker 0>idea to look at the flags on HCD.

01:10:13.100 --> 01:10:14.780
<v Speaker 0>So let's do that. Yeah.

01:10:24.465 --> 01:10:25.905
<v Speaker 2>The key file,

01:10:26.145 --> 01:10:27.185
<v Speaker 2>that looks okay.

01:10:28.910 --> 01:10:30.590
<v Speaker 2>Here, client cert off.

01:10:42.885 --> 01:10:45.045
<v Speaker 2>This all looks normal to me.

01:10:45.285 --> 01:10:47.125
<v Speaker 0>So can't we just use the server dot

01:10:47.125 --> 01:10:49.045
<v Speaker 0>key and then we'll have root on that

01:10:49.045 --> 01:10:49.605
<v Speaker 0>CD?

01:10:53.365 --> 01:10:55.365
<v Speaker 2>Maybe. I'm not sure if you can use

01:10:55.365 --> 01:10:57.445
<v Speaker 2>the server certificate as a

01:10:57.780 --> 01:10:59.619
<v Speaker 2>buying certificate, but we can try.

01:11:02.099 --> 01:11:02.739
<v Speaker 2>But

01:11:04.260 --> 01:11:05.139
<v Speaker 2>okay.

01:11:06.900 --> 01:11:08.179
<v Speaker 2>Let's try it.

01:11:12.344 --> 01:11:14.025
<v Speaker 0>I mean, we have to see here. If

01:11:14.025 --> 01:11:16.104
<v Speaker 0>we also knew what we wanted to generate,

01:11:16.585 --> 01:11:18.905
<v Speaker 0>we could build a new certificate.

01:11:20.105 --> 01:11:21.705
<v Speaker 2>Right. I'm gonna leave this in.

01:11:23.530 --> 01:11:25.290
<v Speaker 2>I don't have to type it again later.

01:11:36.994 --> 01:11:38.755
<v Speaker 0>And if we can't use that, the peer

01:11:38.755 --> 01:11:41.794
<v Speaker 0>must be able to write, consider an entity,

01:11:41.795 --> 01:11:42.915
<v Speaker 0>etcetera. Right? This is

01:11:43.715 --> 01:11:44.994
<v Speaker 2>yeah. But this is the first one we

01:11:44.994 --> 01:11:46.755
<v Speaker 2>tried, and that one didn't work. So,

01:11:50.630 --> 01:11:52.790
<v Speaker 0>no. You did you source it? Oh, I

01:11:52.790 --> 01:11:54.789
<v Speaker 0>need to no. I did not.

01:11:57.830 --> 01:11:58.550
<v Speaker 1>Alright. Let me expect

01:12:00.310 --> 01:12:01.830
<v Speaker 1>to mess up the peer certificate.

01:12:02.875 --> 01:12:04.715
<v Speaker 0>You messed up. Come on.

01:12:05.275 --> 01:12:07.675
<v Speaker 2>Oh, is that is that a Messed that

01:12:07.675 --> 01:12:08.635
<v Speaker 1>up anyway.

01:12:10.475 --> 01:12:11.594
<v Speaker 2>Is that a hint?

01:12:13.675 --> 01:12:15.275
<v Speaker 0>Let's do a little command

01:12:15.275 --> 01:12:16.875
<v Speaker 0>on the peer cert and see what we

01:12:16.875 --> 01:12:17.195
<v Speaker 0>can see.

01:12:19.710 --> 01:12:20.429
<v Speaker 2>Sure.

01:12:20.990 --> 01:12:24.430
<v Speaker 2>My my other feeling is to just regenerate

01:12:24.430 --> 01:12:25.469
<v Speaker 2>the certificates

01:12:25.710 --> 01:12:26.909
<v Speaker 2>and restart

01:12:26.990 --> 01:12:27.470
<v Speaker 2>everything.

01:12:30.335 --> 01:12:32.815
<v Speaker 0>We could use a QVDM.

01:12:34.655 --> 01:12:35.215
<v Speaker 0>Yeah.

01:12:36.895 --> 01:12:38.894
<v Speaker 0>I remember I've never used this.

01:12:39.455 --> 01:12:41.135
<v Speaker 2>Oh, it wants me to.

01:12:44.640 --> 01:12:46.960
<v Speaker 0>So you would have to apply a phase.

01:12:47.280 --> 01:12:47.680
<v Speaker 0>So

01:12:49.360 --> 01:12:51.199
<v Speaker 2>So renew won't help us.

01:12:57.364 --> 01:12:59.364
<v Speaker 2>What does this do? I have a feeling

01:12:59.364 --> 01:13:01.364
<v Speaker 2>this command can help us, but I don't

01:13:01.364 --> 01:13:04.405
<v Speaker 2>know. Well, we could generate a new certificate

01:13:04.405 --> 01:13:05.125
<v Speaker 0>key.

01:13:06.645 --> 01:13:08.085
<v Speaker 2>You pay the m

01:13:08.790 --> 01:13:10.230
<v Speaker 0>cert certificate

01:13:10.230 --> 01:13:10.949
<v Speaker 0>keys

01:13:11.350 --> 01:13:12.310
<v Speaker 0>or key.

01:13:13.510 --> 01:13:14.630
<v Speaker 2>That's that's help.

01:13:15.350 --> 01:13:16.710
<v Speaker 2>That's what I meant.

01:13:21.030 --> 01:13:21.590
<v Speaker 2>Flags.

01:13:23.155 --> 01:13:25.315
<v Speaker 2>Print out the security. Okay. This is not

01:13:25.315 --> 01:13:26.755
<v Speaker 2>what we need. Yeah. We need to run

01:13:26.755 --> 01:13:29.235
<v Speaker 2>the the Kube ADM phases, I think. I

01:13:29.235 --> 01:13:30.195
<v Speaker 2>think you're right.

01:13:34.035 --> 01:13:34.915
<v Speaker 2>And

01:13:35.315 --> 01:13:36.435
<v Speaker 2>then there is a.

01:13:36.995 --> 01:13:37.315
<v Speaker 2>Yeah.

01:13:38.010 --> 01:13:38.889
<v Speaker 2>Serres.

01:13:45.929 --> 01:13:47.609
<v Speaker 0>So let's just do the

01:13:48.250 --> 01:13:50.250
<v Speaker 0>API server, STD client, or you could do

01:13:50.250 --> 01:13:51.289
<v Speaker 0>all, I guess. But

01:13:52.755 --> 01:13:54.355
<v Speaker 0>we don't wanna we probably don't wanna change

01:13:54.355 --> 01:13:55.235
<v Speaker 0>the CA.

01:13:56.355 --> 01:13:57.474
<v Speaker 2>No. Exactly.

01:14:01.074 --> 01:14:02.354
<v Speaker 2>Ah, okay.

01:14:02.915 --> 01:14:03.475
<v Speaker 2>But we can

01:14:04.435 --> 01:14:06.690
<v Speaker 2>guess we can move them. I was gonna

01:14:06.690 --> 01:14:08.290
<v Speaker 0>say delete them, but sure. Moving them seems

01:14:08.290 --> 01:14:09.010
<v Speaker 0>safer.

01:14:09.650 --> 01:14:10.290
<v Speaker 0>Yeah.

01:14:13.090 --> 01:14:16.450
<v Speaker 2>API server at Citi client dot

01:14:16.610 --> 01:14:16.930
<v Speaker 2>cert.

01:14:21.305 --> 01:14:21.545
<v Speaker 0>It.

01:14:35.120 --> 01:14:36.079
<v Speaker 2>Now,

01:14:36.480 --> 01:14:39.040
<v Speaker 2>do I need to restart the API server?

01:14:39.040 --> 01:14:41.040
<v Speaker 0>Well, why not try sourcing our file and

01:14:41.040 --> 01:14:42.320
<v Speaker 0>seeing if we can run the GET?

01:14:43.695 --> 01:14:45.614
<v Speaker 0>Assuming we've got it set up still.

01:14:47.055 --> 01:14:47.775
<v Speaker 0>Yeah.

01:14:49.295 --> 01:14:50.655
<v Speaker 0>It's in the folder.

01:14:50.655 --> 01:14:51.215
<v Speaker 0>Yeah.

01:14:53.615 --> 01:14:55.375
<v Speaker 2>Yeah. Let's get But now I'm happy that

01:14:55.375 --> 01:14:57.135
<v Speaker 2>I left the comments here. Right?

01:15:00.980 --> 01:15:03.140
<v Speaker 2>Because we probably also need to regenerate the

01:15:03.140 --> 01:15:05.540
<v Speaker 2>server certificates because that was also

01:15:08.100 --> 01:15:08.980
<v Speaker 2>okay?

01:15:09.060 --> 01:15:10.099
<v Speaker 0>We're in.

01:15:10.420 --> 01:15:11.860
<v Speaker 2>That looks promising, right?

01:15:20.085 --> 01:15:22.005
<v Speaker 0>You know, to try and add it. Yeah.

01:15:32.900 --> 01:15:34.900
<v Speaker 1>So

01:15:34.900 --> 01:15:36.739
<v Speaker 1>I wonder if the API server has the

01:15:36.739 --> 01:15:38.499
<v Speaker 0>keys cached in memory.

01:15:39.380 --> 01:15:40.820
<v Speaker 2>Yeah. So

01:15:42.395 --> 01:15:44.954
<v Speaker 2>how about this? Well, that won't work.

01:15:45.915 --> 01:15:47.995
<v Speaker 2>Does it not? Oh. I would restart the

01:15:47.995 --> 01:15:50.235
<v Speaker 0>pods. Yeah. Okay. So I just delete the

01:15:50.235 --> 01:15:52.155
<v Speaker 2>pod, and then it should Oh, you can't

01:15:52.155 --> 01:15:53.515
<v Speaker 0>delete the pods. You'll need to kill the

01:15:53.515 --> 01:15:53.835
<v Speaker 0>process.

01:15:57.159 --> 01:15:59.719
<v Speaker 2>That's annoying. Oh, because it's a step because

01:15:59.719 --> 01:16:01.159
<v Speaker 2>it's a static pod. Right?

01:16:02.280 --> 01:16:04.520
<v Speaker 0>Well, yeah. Well, it just yeah. It won't

01:16:04.520 --> 01:16:06.280
<v Speaker 0>delete. Although, it's not rained to HD for

01:16:06.280 --> 01:16:07.560
<v Speaker 0>the static pod. So you may actually be

01:16:07.560 --> 01:16:09.239
<v Speaker 0>able to do a cube control delete on

01:16:09.239 --> 01:16:11.204
<v Speaker 0>that because it's a shadow pod.

01:16:12.324 --> 01:16:12.965
<v Speaker 0>Right?

01:16:15.045 --> 01:16:17.205
<v Speaker 2>Maybe. Let's let's try it. Yeah. Because it's

01:16:17.205 --> 01:16:20.085
<v Speaker 0>that that never writes to NCD, so it

01:16:20.085 --> 01:16:21.045
<v Speaker 0>may actually work.

01:16:31.330 --> 01:16:32.130
<v Speaker 2>Oh, wait.

01:16:34.210 --> 01:16:36.850
<v Speaker 0>No. No. Just delete the process. Yeah. Yeah.

01:16:41.994 --> 01:16:43.514
<v Speaker 2>And then it's

01:16:49.034 --> 01:16:50.554
<v Speaker 0>+1 7818.

01:16:52.235 --> 01:16:52.875
<v Speaker 0>1 7

01:16:53.329 --> 01:16:54.609
<v Speaker 0>8 1 8.

01:16:59.250 --> 01:17:01.409
<v Speaker 2>And it should be back.

01:17:05.250 --> 01:17:08.050
<v Speaker 2>Wait. Let's just see if this now works.

01:17:08.275 --> 01:17:09.635
<v Speaker 2>No. It still is broken.

01:17:13.955 --> 01:17:14.675
<v Speaker 1>You

01:17:14.835 --> 01:17:18.515
<v Speaker 1>just restarted the API server, right? Yeah.

01:17:19.235 --> 01:17:20.355
<v Speaker 2>Just the API server.

01:17:22.110 --> 01:17:24.190
<v Speaker 2>There's some more things we need to restart.

01:17:24.270 --> 01:17:24.750
<v Speaker 2>So

01:17:25.870 --> 01:17:28.510
<v Speaker 0>Let's do you mind if I type? So

01:17:28.510 --> 01:17:31.150
<v Speaker 0>we run an EDC control get on a

01:17:31.150 --> 01:17:32.110
<v Speaker 0>key. Right?

01:17:32.350 --> 01:17:33.150
<v Speaker 0>Mhmm.

01:17:33.550 --> 01:17:35.390
<v Speaker 0>But we never tried

01:17:36.135 --> 01:17:38.375
<v Speaker 0>the so that's us configured with that new

01:17:38.375 --> 01:17:39.415
<v Speaker 0>search still.

01:17:39.815 --> 01:17:43.015
<v Speaker 0>So the Kubernetes rerunning

01:17:43.015 --> 01:17:45.735
<v Speaker 0>the search phase actually didn't help us.

01:17:46.295 --> 01:17:46.615
<v Speaker 0>No.

01:17:48.150 --> 01:17:49.190
<v Speaker 0>Which means

01:17:50.630 --> 01:17:53.510
<v Speaker 2>I'm just curious. Maybe we should just regenerate

01:17:53.510 --> 01:17:55.510
<v Speaker 2>all the certificates except the CA.

01:18:03.215 --> 01:18:05.534
<v Speaker 2>Do do you need to restart at CTs

01:18:05.534 --> 01:18:06.175
<v Speaker 2>also?

01:18:08.494 --> 01:18:09.214
<v Speaker 0>It

01:18:09.295 --> 01:18:10.974
<v Speaker 0>doesn't hurt at this point. Right?

01:18:11.534 --> 01:18:12.814
<v Speaker 2>Yeah. We could.

01:18:15.135 --> 01:18:15.614
<v Speaker 0>Done.

01:18:21.449 --> 01:18:22.170
<v Speaker 2>Okay.

01:18:23.370 --> 01:18:25.929
<v Speaker 2>Now let's try that command.

01:18:26.090 --> 01:18:27.610
<v Speaker 0>Yeah. Okay. So Nope.

01:18:29.370 --> 01:18:31.215
<v Speaker 1>I That was one of my thoughts as

01:18:31.215 --> 01:18:32.494
<v Speaker 1>how to fix it. So

01:18:34.255 --> 01:18:35.695
<v Speaker 1>I'm glad you tried that.

01:18:40.815 --> 01:18:42.655
<v Speaker 0>I don't think the stair is a problem.

01:18:44.420 --> 01:18:46.739
<v Speaker 2>So remember how I said

01:18:46.980 --> 01:18:49.060
<v Speaker 2>this thing about, there was a thing that

01:18:49.060 --> 01:18:50.900
<v Speaker 2>restarted, but it cannot be?

01:18:51.620 --> 01:18:52.340
<v Speaker 2>Uh-huh.

01:18:53.620 --> 01:18:54.340
<v Speaker 2>Maybe

01:18:56.020 --> 01:18:56.980
<v Speaker 2>should

01:18:58.005 --> 01:19:00.005
<v Speaker 2>not trust my initial instincts.

01:19:00.005 --> 01:19:00.565
<v Speaker 2>And

01:19:01.365 --> 01:19:04.565
<v Speaker 2>there's something funky with the controller manager and

01:19:04.565 --> 01:19:05.605
<v Speaker 2>the scheduler.

01:19:08.725 --> 01:19:12.085
<v Speaker 2>Maybe we've been But we but we can't

01:19:12.570 --> 01:19:15.530
<v Speaker 0>we can't use entity control locally either, which

01:19:15.530 --> 01:19:16.249
<v Speaker 0>is, like,

01:19:16.730 --> 01:19:18.409
<v Speaker 0>seems like a big flag.

01:19:20.010 --> 01:19:22.250
<v Speaker 2>Yep. That's that that is true. That is

01:19:22.250 --> 01:19:24.010
<v Speaker 2>true. So it is probably yeah.

01:19:24.955 --> 01:19:27.515
<v Speaker 0>But let's do do alright.

01:19:29.595 --> 01:19:31.835
<v Speaker 0>William, can we can we ask a question?

01:19:32.475 --> 01:19:34.475
<v Speaker 1>Yeah. Yeah. I was gonna offer a hint

01:19:34.475 --> 01:19:35.675
<v Speaker 1>at fifteen minutes.

01:19:36.235 --> 01:19:37.515
<v Speaker 0>It's not search. Right?

01:19:38.719 --> 01:19:39.360
<v Speaker 1>It's not

01:19:40.560 --> 01:19:42.239
<v Speaker 1>it's related to search, but the search are

01:19:42.239 --> 01:19:43.840
<v Speaker 1>not messed with. Yeah. That's what I was

01:19:43.840 --> 01:19:45.199
<v Speaker 0>thinking. Okay. So

01:19:47.440 --> 01:19:49.920
<v Speaker 0>and Etcd doesn't have a config.

01:19:49.920 --> 01:19:50.559
<v Speaker 0>Right?

01:19:52.400 --> 01:19:53.600
<v Speaker 0>Let's look at these flags.

01:19:56.345 --> 01:19:58.025
<v Speaker 0>Why didn't why has it taken us this

01:19:58.025 --> 01:20:00.264
<v Speaker 0>long to look at the FTD flags?

01:20:01.225 --> 01:20:03.705
<v Speaker 0>We look we look at them, I think.

01:20:03.705 --> 01:20:04.344
<v Speaker 1>Yeah.

01:20:05.545 --> 01:20:07.840
<v Speaker 1>Oh, I think I see it. I I

01:20:07.840 --> 01:20:10.240
<v Speaker 2>I The flags have a hint, but I

01:20:10.240 --> 01:20:11.840
<v Speaker 1>didn't change anything in the flags.

01:20:12.560 --> 01:20:13.920
<v Speaker 2>Oh, you you

01:20:16.560 --> 01:20:18.960
<v Speaker 2>didn't mess with the certificates. You didn't mess

01:20:18.960 --> 01:20:20.240
<v Speaker 2>with the flags.

01:20:25.605 --> 01:20:27.765
<v Speaker 2>I was thinking, oh, maybe the trusted CA

01:20:27.765 --> 01:20:30.725
<v Speaker 2>file was messed with, but no, that looks

01:20:30.725 --> 01:20:31.284
<v Speaker 2>good.

01:20:32.324 --> 01:20:32.725
<v Speaker 2>Right?

01:20:33.469 --> 01:20:34.749
<v Speaker 2>Does it? Yes.

01:20:43.630 --> 01:20:44.510
<v Speaker 2>There is

01:20:44.909 --> 01:20:47.405
<v Speaker 2>no, that also. There's client sort of off

01:20:47.405 --> 01:20:48.445
<v Speaker 2>in here twice.

01:20:48.525 --> 01:20:49.084
<v Speaker 2>But

01:20:50.284 --> 01:20:52.125
<v Speaker 0>Oh, his client start off and peer set

01:20:52.125 --> 01:20:52.684
<v Speaker 0>off.

01:20:53.324 --> 01:20:55.244
<v Speaker 0>What's

01:20:55.244 --> 01:20:58.284
<v Speaker 0>the volume amount on this? Carlos suggests checking

01:20:58.284 --> 01:21:01.500
<v Speaker 0>the failed system permissions, which again seems quite

01:21:01.500 --> 01:21:02.139
<v Speaker 0>obvious.

01:21:03.900 --> 01:21:05.500
<v Speaker 0>Maybe this is nothing to do That's what

01:21:05.500 --> 01:21:06.620
<v Speaker 1>I did last time.

01:21:08.460 --> 01:21:09.340
<v Speaker 2>Okay.

01:21:09.420 --> 01:21:11.659
<v Speaker 2>Volume mounts, etcd search.

01:21:12.300 --> 01:21:15.100
<v Speaker 2>Okay. Well, varlib etcd for the data.

01:21:17.255 --> 01:21:20.375
<v Speaker 2>That doesn't look good. Right? Does it? Wait.

01:21:20.375 --> 01:21:23.175
<v Speaker 2>No. It's at c kuban net t p

01:21:23.175 --> 01:21:24.935
<v Speaker 2>k I. Yeah. But that what if you

01:21:24.935 --> 01:21:27.574
<v Speaker 0>change the permissions on natural database fail

01:21:28.375 --> 01:21:29.494
<v Speaker 0>and Violet at c d?

01:21:33.270 --> 01:21:36.070
<v Speaker 2>But this is running as root. Right? So

01:21:36.310 --> 01:21:38.470
<v Speaker 2>let's go to viral web entity.

01:21:48.245 --> 01:21:49.445
<v Speaker 2>This all looks

01:21:49.685 --> 01:21:52.645
<v Speaker 2>beat, write, execute. This looks fine.

01:21:59.190 --> 01:21:59.750
<v Speaker 2>Right.

01:22:00.230 --> 01:22:02.309
<v Speaker 2>Yeah. This is all read write.

01:22:02.790 --> 01:22:04.630
<v Speaker 0>Okay. It looks fine. Yeah.

01:22:06.870 --> 01:22:08.150
<v Speaker 1>Okay. Do we want Do guys want a

01:22:08.150 --> 01:22:08.710
<v Speaker 1>hint?

01:22:10.630 --> 01:22:11.430
<v Speaker 2>Yeah. Let's do one.

01:22:12.994 --> 01:22:13.794
<v Speaker 2>Okay.

01:22:16.514 --> 01:22:17.474
<v Speaker 1>Roles

01:22:17.715 --> 01:22:21.315
<v Speaker 1>and users was the the right path in

01:22:21.315 --> 01:22:21.795
<v Speaker 1>my opinion.

01:22:25.560 --> 01:22:27.320
<v Speaker 0>So we need we need to find a

01:22:27.320 --> 01:22:28.039
<v Speaker 0>working

01:22:28.199 --> 01:22:29.719
<v Speaker 0>credible certificate

01:22:29.719 --> 01:22:31.559
<v Speaker 0>to speak to EdCT.

01:22:32.360 --> 01:22:34.119
<v Speaker 0>Right now we don't have one. Right?

01:22:34.520 --> 01:22:35.719
<v Speaker 0>User. Yeah.

01:22:39.525 --> 01:22:41.364
<v Speaker 0>Has he left this one in temp? People

01:22:41.364 --> 01:22:42.804
<v Speaker 0>are always nice that way.

01:22:44.645 --> 01:22:46.565
<v Speaker 1>No. I was not nice this round.

01:22:48.324 --> 01:22:51.125
<v Speaker 2>There's one special user and one special role

01:22:51.125 --> 01:22:53.130
<v Speaker 2>route. Okay. Right.

01:22:53.690 --> 01:22:55.770
<v Speaker 2>Did he see TL

01:22:55.770 --> 01:22:56.970
<v Speaker 2>user list.

01:22:57.290 --> 01:22:59.610
<v Speaker 2>User equals route. I tried to ask her

01:22:59.610 --> 01:23:00.010
<v Speaker 0>password.

01:23:05.325 --> 01:23:09.485
<v Speaker 0>What's the default? There's

01:23:09.485 --> 01:23:12.204
<v Speaker 1>a flag in your STD start that

01:23:12.525 --> 01:23:13.244
<v Speaker 1>that

01:23:13.405 --> 01:23:14.605
<v Speaker 1>gives you a hint on how you can

01:23:14.605 --> 01:23:15.565
<v Speaker 1>work around that.

01:23:16.925 --> 01:23:19.005
<v Speaker 0>There's Oh, we could turn client off off.

01:23:19.005 --> 01:23:19.325
<v Speaker 0>Yeah.

01:23:20.290 --> 01:23:21.329
<v Speaker 0>Like, client

01:23:22.449 --> 01:23:23.249
<v Speaker 0>off.

01:23:23.330 --> 01:23:24.369
<v Speaker 0>A client

01:23:24.610 --> 01:23:25.329
<v Speaker 0>there.

01:23:25.730 --> 01:23:26.929
<v Speaker 0>Okay. Who knows?

01:23:27.330 --> 01:23:29.809
<v Speaker 0>Client there off false.

01:23:31.090 --> 01:23:32.449
<v Speaker 0>Maybe it has to be before.

01:23:36.245 --> 01:23:39.045
<v Speaker 0>Yeah. Let's look at the flag. So Kubernetes

01:23:39.045 --> 01:23:40.084
<v Speaker 0>manifest.

01:23:40.725 --> 01:23:42.005
<v Speaker 0>There was this

01:23:44.165 --> 01:23:44.804
<v Speaker 0>here.

01:23:47.280 --> 01:23:49.440
<v Speaker 0>Oh, yeah. We could just restart STD without

01:23:49.600 --> 01:23:50.080
<v Speaker 0>oh.

01:23:51.520 --> 01:23:54.000
<v Speaker 2>What? Yeah. That's a very good idea.

01:23:54.560 --> 01:23:57.040
<v Speaker 2>Yeah. Yeah. Very good.

01:24:00.640 --> 01:24:01.280
<v Speaker 0>False.

01:24:02.494 --> 01:24:03.775
<v Speaker 0>And we don't need to worry about the

01:24:03.775 --> 01:24:05.775
<v Speaker 0>peer. Start off with not getting peers, but

01:24:05.855 --> 01:24:07.934
<v Speaker 0>yeah. Why not? Just turn it all off.

01:24:14.255 --> 01:24:15.935
<v Speaker 2>That that took a very long time.

01:24:16.560 --> 01:24:18.159
<v Speaker 0>Oh, I still have the password.

01:24:19.200 --> 01:24:19.840
<v Speaker 1>But

01:24:23.040 --> 01:24:25.280
<v Speaker 0>oh, this is doing Well, so maybe it's

01:24:25.280 --> 01:24:26.320
<v Speaker 0>not healthy yet.

01:24:28.640 --> 01:24:29.440
<v Speaker 2>Did I

01:24:30.560 --> 01:24:31.680
<v Speaker 2>did I oopsie yet?

01:24:33.515 --> 01:24:34.795
<v Speaker 0>Well, let's check the logs.

01:24:54.580 --> 01:24:56.420
<v Speaker 0>We may have to check it the old

01:24:56.420 --> 01:24:57.380
<v Speaker 0>school way.

01:24:58.740 --> 01:24:59.140
<v Speaker 0>Yep.

01:25:04.085 --> 01:25:05.125
<v Speaker 0>Oh, it's not started.

01:25:14.560 --> 01:25:15.200
<v Speaker 0>Why don't

01:25:16.080 --> 01:25:17.920
<v Speaker 0>because we are very smart people

01:25:19.280 --> 01:25:20.320
<v Speaker 0>sometimes.

01:25:22.960 --> 01:25:25.280
<v Speaker 0>Copy at cd.yam onto at c d dot

01:25:25.280 --> 01:25:25.840
<v Speaker 0>s h.

01:25:30.105 --> 01:25:32.344
<v Speaker 2>Well, we don't have add we we don't

01:25:32.344 --> 01:25:34.104
<v Speaker 2>have add c d on the host.

01:25:35.145 --> 01:25:35.784
<v Speaker 2>Right?

01:25:36.824 --> 01:25:37.945
<v Speaker 0>Give me a minute.

01:25:38.344 --> 01:25:38.824
<v Speaker 0>Okay.

01:25:41.080 --> 01:25:44.280
<v Speaker 0>And then shift j j j j j

01:25:44.280 --> 01:25:46.199
<v Speaker 0>j j j j Oh, no. I'll put

01:25:46.199 --> 01:25:47.400
<v Speaker 0>yammer. Alright.

01:25:47.800 --> 01:25:50.520
<v Speaker 0>Okay. We'll we'll reg x on that. I'm

01:25:50.520 --> 01:25:51.719
<v Speaker 0>getting a bit Rawkode.

01:25:53.160 --> 01:25:54.360
<v Speaker 0>Dash dash dash.

01:25:55.555 --> 01:25:58.435
<v Speaker 2>Oh. Oh, no. Yep. One less.

01:26:02.755 --> 01:26:03.395
<v Speaker 0>K.

01:26:04.035 --> 01:26:06.355
<v Speaker 0>Oh, no. That didn't work. Oh. Alright. No.

01:26:06.355 --> 01:26:07.875
<v Speaker 2>You replaced them all with g's.

01:26:10.320 --> 01:26:13.680
<v Speaker 2>Dash slash Slash dash. And then yes. Yes.

01:26:13.680 --> 01:26:14.239
<v Speaker 2>No.

01:26:14.800 --> 01:26:15.360
<v Speaker 2>No.

01:26:19.360 --> 01:26:20.960
<v Speaker 0>Oh, wait. So we want to do this

01:26:20.960 --> 01:26:23.745
<v Speaker 0>but with a space. Got it. Yes. Damn

01:26:23.745 --> 01:26:25.745
<v Speaker 0>you. There we go. Alright. And then app

01:26:25.745 --> 01:26:27.905
<v Speaker 0>install. Etsy. Etsy.

01:26:29.105 --> 01:26:30.865
<v Speaker 2>Then let's just make sure our server doesn't

01:26:30.865 --> 01:26:33.185
<v Speaker 2>start up. Right? So This better be the

01:26:33.185 --> 01:26:33.905
<v Speaker 2>same version.

01:26:36.740 --> 01:26:37.700
<v Speaker 0>It's a server.

01:26:40.420 --> 01:26:42.340
<v Speaker 0>Well, someone already installed it.

01:26:43.940 --> 01:26:46.340
<v Speaker 2>No. It's trying to start it up immediately

01:26:46.340 --> 01:26:47.140
<v Speaker 2>afterwards,

01:26:47.985 --> 01:26:51.745
<v Speaker 2>I think. Alright. So bash@cd.sh.

01:26:52.865 --> 01:26:54.705
<v Speaker 0>Alright. That didn't quite work.

01:26:56.705 --> 01:26:58.305
<v Speaker 0>Less than metrics.

01:26:59.665 --> 01:27:01.745
<v Speaker 0>Oh, well, then well, maybe that's why it's

01:27:01.745 --> 01:27:03.185
<v Speaker 2>not starting up. We made a typo.

01:27:03.650 --> 01:27:05.730
<v Speaker 2>Right? I edited the file. Maybe I made

01:27:05.730 --> 01:27:07.890
<v Speaker 2>a mistake when we edited it.

01:27:11.890 --> 01:27:13.730
<v Speaker 2>Like, in the even in the YAML file,

01:27:13.730 --> 01:27:15.650
<v Speaker 2>that would explain it's not coming up anymore.

01:27:15.650 --> 01:27:18.930
<v Speaker 0>No. It's we need

01:27:20.985 --> 01:27:22.905
<v Speaker 0>Do we need to tell it the version?

01:27:22.905 --> 01:27:25.065
<v Speaker 0>No. Because there's no environment variables in the

01:27:25.065 --> 01:27:26.184
<v Speaker 0>manifest, is there?

01:27:28.265 --> 01:27:29.864
<v Speaker 0>I feel like I'm making this much harder

01:27:29.864 --> 01:27:30.985
<v Speaker 0>than it used to be.

01:27:31.545 --> 01:27:31.945
<v Speaker 2>Yep.

01:27:33.720 --> 01:27:36.280
<v Speaker 0>Oh, well. Thank you, I am. I'm here

01:27:36.280 --> 01:27:37.719
<v Speaker 0>trying to help you out.

01:27:38.680 --> 01:27:39.960
<v Speaker 2>No. It's fine.

01:27:40.280 --> 01:27:41.239
<v Speaker 2>It's fine.

01:27:42.840 --> 01:27:44.360
<v Speaker 0>That feels like it should work.

01:27:45.855 --> 01:27:47.535
<v Speaker 2>It's complete what what is the error that

01:27:47.535 --> 01:27:48.335
<v Speaker 2>it's giving?

01:27:49.375 --> 01:27:50.975
<v Speaker 2>Can we run one more time?

01:27:51.935 --> 01:27:54.495
<v Speaker 2>Not provided, but not defined. Let's see if

01:27:54.495 --> 01:27:56.255
<v Speaker 0>there's anything else. Why is there only one

01:27:56.255 --> 01:27:56.975
<v Speaker 0>dash?

01:27:57.535 --> 01:27:58.255
<v Speaker 2>I

01:27:58.620 --> 01:28:01.179
<v Speaker 2>I just support both syntaxes, and it's a

01:28:01.179 --> 01:28:02.139
<v Speaker 2>weird error.

01:28:02.300 --> 01:28:04.540
<v Speaker 0>Alright. Okay. I'm I'm gonna say this is,

01:28:04.540 --> 01:28:07.099
<v Speaker 2>a very old version of etcd maybe, and

01:28:07.420 --> 01:28:09.340
<v Speaker 2>maybe it's not even version three.

01:28:09.739 --> 01:28:10.460
<v Speaker 2>It is. Okay.

01:28:12.805 --> 01:28:15.125
<v Speaker 1>Did drop a hint in the root folder

01:28:15.125 --> 01:28:15.925
<v Speaker 1>for you.

01:28:17.445 --> 01:28:19.605
<v Speaker 0>I'm sorry. You're taking it off. I I'm

01:28:19.605 --> 01:28:20.804
<v Speaker 0>clearly not helping.

01:28:22.485 --> 01:28:23.844
<v Speaker 2>You are. You are.

01:28:24.165 --> 01:28:24.645
<v Speaker 2>Okay.

01:28:30.710 --> 01:28:31.989
<v Speaker 0>The certificate

01:28:33.190 --> 01:28:34.870
<v Speaker 2>CN is used as a username and at

01:28:34.870 --> 01:28:36.550
<v Speaker 2>CD when okay.

01:28:38.150 --> 01:28:39.990
<v Speaker 2>But, yeah, we currently don't even have a

01:28:39.990 --> 01:28:41.590
<v Speaker 2>working at CD. So

01:28:43.515 --> 01:28:45.435
<v Speaker 0>So we can always turn off back on,

01:28:45.435 --> 01:28:47.355
<v Speaker 0>put the manifest back, and then try this

01:28:47.435 --> 01:28:49.035
<v Speaker 0>Yeah. Common name as a username.

01:28:49.355 --> 01:28:51.995
<v Speaker 0>Although I feel like disabling client off and

01:28:51.995 --> 01:28:54.155
<v Speaker 0>logging in as root user should be okay

01:28:54.155 --> 01:28:55.515
<v Speaker 0>too. Right?

01:28:56.075 --> 01:28:57.595
<v Speaker 1>No. Because then you get then you hit

01:28:57.595 --> 01:28:58.075
<v Speaker 1>the password.

01:28:59.110 --> 01:29:00.710
<v Speaker 0>What's the default password?

01:29:02.070 --> 01:29:03.590
<v Speaker 1>They won't let you set one.

01:29:05.750 --> 01:29:08.070
<v Speaker 0>So The biggest admin or password. Where did

01:29:08.070 --> 01:29:09.670
<v Speaker 2>our s c d dot double go? It

01:29:09.670 --> 01:29:11.670
<v Speaker 0>said slash root. I put it there for

01:29:11.670 --> 01:29:11.989
<v Speaker 0>safety. Okay.

01:29:13.575 --> 01:29:15.335
<v Speaker 2>That's like that's

01:29:22.215 --> 01:29:24.695
<v Speaker 0>Alright. You'll need to put the client off

01:29:24.695 --> 01:29:25.335
<v Speaker 0>back on.

01:29:32.680 --> 01:29:34.280
<v Speaker 1>I feel like in the future, need to

01:29:34.360 --> 01:29:35.720
<v Speaker 1>if I do an ETD break, I need

01:29:35.720 --> 01:29:37.240
<v Speaker 1>to only do an ETD break and nothing

01:29:37.240 --> 01:29:37.480
<v Speaker 1>else.

01:29:38.235 --> 01:29:41.755
<v Speaker 2>Oh. There's more. No. That's fine. That's fine.

01:29:43.275 --> 01:29:45.435
<v Speaker 0>I'm gonna start using the

01:29:45.755 --> 01:29:47.835
<v Speaker 0>Okay. Thing that comes with k three s

01:29:47.835 --> 01:29:49.755
<v Speaker 0>where it's a SQLite database for state. It's

01:29:49.755 --> 01:29:50.955
<v Speaker 0>good. Says c d malarkey.

01:29:51.790 --> 01:29:54.590
<v Speaker 2>Okay. So the hint was the CN should

01:29:54.590 --> 01:29:56.429
<v Speaker 2>be the same. Right?

01:29:56.830 --> 01:29:58.909
<v Speaker 2>What is the CN in our case?

01:29:59.150 --> 01:30:01.150
<v Speaker 0>Yeah. I wanted to open SSL again.

01:30:04.345 --> 01:30:06.105
<v Speaker 1>Do you know how to generate a new

01:30:06.185 --> 01:30:07.545
<v Speaker 1>cert from a

01:30:08.105 --> 01:30:08.985
<v Speaker 1>CA?

01:30:11.545 --> 01:30:12.824
<v Speaker 0>QPDM does?

01:30:13.945 --> 01:30:15.385
<v Speaker 2>QPDM does. Yes.

01:30:16.320 --> 01:30:17.840
<v Speaker 1>Because you need you need a cert with

01:30:17.840 --> 01:30:19.840
<v Speaker 1>a common name of root because root is

01:30:19.840 --> 01:30:20.480
<v Speaker 1>the only

01:30:20.960 --> 01:30:21.760
<v Speaker 1>required

01:30:21.760 --> 01:30:23.280
<v Speaker 1>user in a TD.

01:30:24.000 --> 01:30:24.880
<v Speaker 0>I see.

01:30:27.440 --> 01:30:28.560
<v Speaker 1>We can

01:30:31.925 --> 01:30:34.005
<v Speaker 2>but I don't think we can choose

01:30:34.405 --> 01:30:36.565
<v Speaker 2>the certificate here. So we need to do

01:30:36.565 --> 01:30:37.205
<v Speaker 2>some

01:30:41.230 --> 01:30:42.669
<v Speaker 0>SSL commands.

01:30:42.829 --> 01:30:45.070
<v Speaker 2>Oh, yeah. And this is my my arch

01:30:45.070 --> 01:30:45.869
<v Speaker 2>nemesis

01:30:46.429 --> 01:30:48.110
<v Speaker 2>figuring out the syntax for.

01:30:51.550 --> 01:30:53.469
<v Speaker 2>Or can we maybe? No. I don't think

01:30:53.469 --> 01:30:55.230
<v Speaker 2>we can change the common name here. It

01:30:55.230 --> 01:30:56.989
<v Speaker 2>has only

01:30:56.385 --> 01:30:59.185
<v Speaker 2>predefined ones. Yeah. I think so too.

01:31:01.345 --> 01:31:02.865
<v Speaker 2>You know what? Maybe it's in the best

01:31:02.865 --> 01:31:04.864
<v Speaker 2>history. No. That was too easy.

01:31:07.985 --> 01:31:09.105
<v Speaker 2>We

01:31:09.105 --> 01:31:11.170
<v Speaker 2>want to So we can go to Kubernetes

01:31:11.170 --> 01:31:12.770
<v Speaker 0>a hard way on GitHub. Right?

01:31:13.410 --> 01:31:14.050
<v Speaker 2>Yeah.

01:31:14.290 --> 01:31:15.090
<v Speaker 2>Yes.

01:31:18.610 --> 01:31:20.610
<v Speaker 0>And search for open SSL.

01:31:24.465 --> 01:31:26.865
<v Speaker 0>Are they using c f s s l?

01:31:27.265 --> 01:31:28.625
<v Speaker 2>That's also fine.

01:31:29.585 --> 01:31:32.945
<v Speaker 0>Okay. So here's how we do this.

01:31:33.665 --> 01:31:34.865
<v Speaker 0>So we can copy.

01:31:37.990 --> 01:31:40.950
<v Speaker 2>Carlos is asking why won't regenerating work? Because

01:31:40.950 --> 01:31:42.230
<v Speaker 2>we need one with

01:31:42.550 --> 01:31:44.870
<v Speaker 2>CN route instead of CN

01:31:45.510 --> 01:31:46.790
<v Speaker 2>whatever we had.

01:31:48.150 --> 01:31:49.750
<v Speaker 0>Alright. So here's our CSR.

01:31:51.525 --> 01:31:52.244
<v Speaker 2>Yep.

01:31:53.445 --> 01:31:54.885
<v Speaker 2>That sounds looks good.

01:31:55.125 --> 01:31:57.525
<v Speaker 2>Let's just go here. CSR.

01:31:59.205 --> 01:32:00.565
<v Speaker 2>Oh, that's the best. And we want the

01:32:00.565 --> 01:32:02.165
<v Speaker 2>c yeah. And we want the c m

01:32:02.165 --> 01:32:03.204
<v Speaker 2>to be brute.

01:32:03.685 --> 01:32:05.605
<v Speaker 0>Yep. Right. So we can change that.

01:32:09.540 --> 01:32:11.300
<v Speaker 2>Yeah. We can keep all the other things,

01:32:11.300 --> 01:32:11.940
<v Speaker 2>I guess.

01:32:13.940 --> 01:32:14.820
<v Speaker 0>Stupid

01:32:15.060 --> 01:32:15.380
<v Speaker 0>thing.

01:32:20.395 --> 01:32:22.715
<v Speaker 0>Alright. So there we have a CSR.

01:32:23.275 --> 01:32:25.195
<v Speaker 0>We don't have CSSL though.

01:32:25.595 --> 01:32:27.195
<v Speaker 2>We can install it. That's good.

01:32:33.750 --> 01:32:35.269
<v Speaker 0>Alright. So,

01:32:35.670 --> 01:32:37.750
<v Speaker 0>now we can use c f I don't

01:32:37.750 --> 01:32:39.510
<v Speaker 0>remember these commands. I'm just gonna copy and

01:32:39.510 --> 01:32:40.309
<v Speaker 0>paste them.

01:32:41.270 --> 01:32:43.190
<v Speaker 2>Yep. We just need to put the right

01:32:43.190 --> 01:32:45.989
<v Speaker 2>CA dot PEM in here. Alright. So, let's

01:32:45.989 --> 01:32:47.590
<v Speaker 0>just call this same dot SH.

01:32:49.135 --> 01:32:50.015
<v Speaker 0>Mhmm.

01:32:54.895 --> 01:32:55.615
<v Speaker 2>So it's

01:32:56.175 --> 01:32:57.935
<v Speaker 2>are we in the directory

01:32:57.935 --> 01:32:58.335
<v Speaker 2>of

01:33:02.390 --> 01:33:03.110
<v Speaker 0>No.

01:33:05.190 --> 01:33:07.350
<v Speaker 0>So it's that's etcetera Kubernetes

01:33:07.350 --> 01:33:08.870
<v Speaker 0>p k I

01:33:09.270 --> 01:33:11.910
<v Speaker 2>At c d. C d c h dot

01:33:11.910 --> 01:33:12.870
<v Speaker 0>s r t.

01:33:13.670 --> 01:33:14.070
<v Speaker 0>Yes.

01:33:16.065 --> 01:33:17.024
<v Speaker 0>And then,

01:33:18.385 --> 01:33:19.105
<v Speaker 0>that's just

01:33:20.704 --> 01:33:23.584
<v Speaker 0>pti@ctca.key.

01:33:26.224 --> 01:33:27.824
<v Speaker 0>I don't have a c a config.

01:33:32.100 --> 01:33:34.980
<v Speaker 2>Maybe we can leave it away?

01:33:37.460 --> 01:33:38.420
<v Speaker 0>Should

01:33:39.219 --> 01:33:39.620
<v Speaker 0>this be

01:33:41.380 --> 01:33:42.580
<v Speaker 2>Yep. I suppose.

01:33:46.365 --> 01:33:49.165
<v Speaker 2>There is a syntax error in our in

01:33:49.165 --> 01:33:49.725
<v Speaker 2>our JSON.

01:33:57.320 --> 01:34:00.599
<v Speaker 0>K. We have keys. Okay. We have keys.

01:34:01.080 --> 01:34:02.119
<v Speaker 0>Let's modify.

01:34:04.760 --> 01:34:07.400
<v Speaker 0>Alright. ScratchAI@ct.

01:34:08.119 --> 01:34:09.159
<v Speaker 0>What did we call that?

01:34:27.840 --> 01:34:32.400
<v Speaker 2>It's route/route.cert.pem,

01:34:32.880 --> 01:34:35.040
<v Speaker 2>and the other one is routekey.pem.

01:34:41.535 --> 01:34:43.135
<v Speaker 2>Correct. Yes. Okay.

01:34:47.535 --> 01:34:50.815
<v Speaker 0>I know. It's root.pem and root-key.pem.

01:34:51.135 --> 01:34:53.454
<v Speaker 0>Why is there a connection refused?

01:34:54.094 --> 01:34:55.375
<v Speaker 0>Are we still broken at CD?

01:34:57.070 --> 01:34:59.470
<v Speaker 2>Yeah. I think so. I mean Wait.

01:35:00.030 --> 01:35:01.870
<v Speaker 0>It's not a Let me do this.

01:35:02.430 --> 01:35:03.950
<v Speaker 0>It's a static manifest.

01:35:05.870 --> 01:35:07.070
<v Speaker 0>Stop killing at CD.

01:35:09.165 --> 01:35:11.565
<v Speaker 2>No. But because she installed the package, they're

01:35:11.565 --> 01:35:11.965
<v Speaker 2>probably

01:35:13.085 --> 01:35:14.044
<v Speaker 2>oh, no.

01:35:14.364 --> 01:35:16.204
<v Speaker 2>We we made it worse, I think.

01:35:16.605 --> 01:35:17.405
<v Speaker 2>Did we?

01:35:19.645 --> 01:35:21.005
<v Speaker 0>ETCD is not running.

01:35:30.670 --> 01:35:33.470
<v Speaker 0>Alright. Let's restart the cuplet to encourage that

01:35:33.470 --> 01:35:34.190
<v Speaker 0>along.

01:35:35.230 --> 01:35:36.989
<v Speaker 0>Why can't I type?

01:35:38.030 --> 01:35:38.670
<v Speaker 0>Restart.

01:35:42.405 --> 01:35:44.565
<v Speaker 0>William, you're not invited back. I'm just in.

01:35:53.190 --> 01:35:55.750
<v Speaker 2>Okay. Okay. We got something. That's good.

01:35:56.230 --> 01:35:57.590
<v Speaker 1>Woo hoo. Uh-huh.

01:35:58.469 --> 01:35:59.269
<v Speaker 2>K.

01:36:00.310 --> 01:36:01.670
<v Speaker 2>Okay. We're brute.

01:36:02.710 --> 01:36:04.389
<v Speaker 2>That's the I Okay.

01:36:05.830 --> 01:36:06.870
<v Speaker 0>Turn off. Is this

01:36:09.475 --> 01:36:10.275
<v Speaker 2>How

01:36:10.275 --> 01:36:11.395
<v Speaker 2>do we disable

01:36:11.635 --> 01:36:12.675
<v Speaker 1>k. Boom.

01:36:13.315 --> 01:36:14.835
<v Speaker 1>Yep. There you go.

01:36:20.835 --> 01:36:22.115
<v Speaker 0>I mean, we could at least have tried

01:36:22.115 --> 01:36:23.795
<v Speaker 0>to fix the users and roles in another

01:36:23.795 --> 01:36:25.739
<v Speaker 0>thirty seconds. How hard could it be?

01:36:26.540 --> 01:36:29.260
<v Speaker 1>Yeah. One, cube admin doesn't set up those

01:36:29.260 --> 01:36:30.700
<v Speaker 1>things by default. So they're not even there

01:36:30.700 --> 01:36:31.580
<v Speaker 1>to begin with.

01:36:35.500 --> 01:36:36.619
<v Speaker 2>It's running.

01:36:36.780 --> 01:36:37.500
<v Speaker 0>It is.

01:36:38.435 --> 01:36:40.275
<v Speaker 0>It may just be cache for why we

01:36:40.275 --> 01:36:41.554
<v Speaker 0>don't have the dance.

01:36:41.955 --> 01:36:43.875
<v Speaker 2>This seems to work.

01:36:44.595 --> 01:36:45.315
<v Speaker 2>Right?

01:36:45.635 --> 01:36:47.395
<v Speaker 2>Or is this still the wrong version?

01:36:47.795 --> 01:36:48.514
<v Speaker 0>I

01:36:48.915 --> 01:36:50.195
<v Speaker 0>don't think it has the wrong version. I

01:36:50.195 --> 01:36:52.035
<v Speaker 0>think it's just I really need to call

01:36:52.035 --> 01:36:53.315
<v Speaker 0>the files something different.

01:36:54.190 --> 01:36:56.670
<v Speaker 2>But then curl, it's also serving me v

01:36:56.670 --> 01:36:57.229
<v Speaker 2>one.

01:36:57.630 --> 01:36:59.389
<v Speaker 0>But they always do v one.

01:36:59.710 --> 01:37:01.709
<v Speaker 2>Oh, also in v two? Yeah.

01:37:02.270 --> 01:37:05.070
<v Speaker 0>Oh. The only thing that changes the video

01:37:05.469 --> 01:37:06.510
<v Speaker 0>and that

01:37:06.989 --> 01:37:09.230
<v Speaker 0>isn't refreshing, but it could be cache.

01:37:09.925 --> 01:37:11.445
<v Speaker 0>But it doesn't look like it.

01:37:11.765 --> 01:37:13.765
<v Speaker 0>Because normally, would have reloaded by now.

01:37:14.085 --> 01:37:16.005
<v Speaker 1>Why is your helium crash loop back off?

01:37:16.005 --> 01:37:17.525
<v Speaker 1>Oh, probably because of your FTD.

01:37:18.405 --> 01:37:19.125
<v Speaker 1>Yep.

01:37:21.525 --> 01:37:22.405
<v Speaker 2>But this

01:37:25.610 --> 01:37:26.169
<v Speaker 2>yeah.

01:37:28.010 --> 01:37:30.250
<v Speaker 0>Okay. So we are I can just confirm

01:37:30.250 --> 01:37:32.010
<v Speaker 0>by doing source

01:37:32.489 --> 01:37:33.369
<v Speaker 0>to this.

01:37:35.290 --> 01:37:36.969
<v Speaker 0>It's the wrong one. We're still gonna v

01:37:36.969 --> 01:37:37.530
<v Speaker 0>one.

01:37:37.770 --> 01:37:39.290
<v Speaker 0>Unless this is the

01:37:42.675 --> 01:37:45.155
<v Speaker 2>There is a second level of evil, probably.

01:37:45.795 --> 01:37:47.955
<v Speaker 2>I I don't hear laughs. So Was

01:37:50.035 --> 01:37:52.595
<v Speaker 0>there more evil? That wasn't it? There there

01:37:52.595 --> 01:37:53.635
<v Speaker 1>there is more evil.

01:37:54.530 --> 01:37:55.730
<v Speaker 2>Still it's still v Okay.

01:37:57.970 --> 01:38:00.130
<v Speaker 2>There's some admission webhook running.

01:38:00.450 --> 01:38:02.050
<v Speaker 2>Some mutating webhook

01:38:02.130 --> 01:38:02.929
<v Speaker 2>that is

01:38:03.410 --> 01:38:05.890
<v Speaker 2>moving this back to v one. Alright. Just

01:38:05.890 --> 01:38:07.855
<v Speaker 0>because I now hate William so much, I'm

01:38:07.855 --> 01:38:09.295
<v Speaker 0>happy for us to go over by another

01:38:09.295 --> 01:38:11.055
<v Speaker 0>five minutes as long as you both have

01:38:11.055 --> 01:38:11.775
<v Speaker 0>the time.

01:38:12.255 --> 01:38:15.135
<v Speaker 2>Sure. Let's let's get rid of the mutating

01:38:15.135 --> 01:38:16.015
<v Speaker 2>webhook.

01:38:18.175 --> 01:38:20.255
<v Speaker 0>What what Configurations.

01:38:20.255 --> 01:38:21.775
<v Speaker 0>Mutating webhook configuration.

01:38:28.550 --> 01:38:29.110
<v Speaker 2>No.

01:38:29.750 --> 01:38:31.990
<v Speaker 2>Was a good guess though. Right? That was

01:38:31.990 --> 01:38:32.870
<v Speaker 0>a good guess.

01:38:35.270 --> 01:38:37.910
<v Speaker 0>Alright. So we modified the image. We saved

01:38:37.910 --> 01:38:41.110
<v Speaker 0>the manifest. It did not

01:38:39.965 --> 01:38:40.764
<v Speaker 0>take.

01:38:42.125 --> 01:38:42.684
<v Speaker 1>No.

01:38:44.125 --> 01:38:45.244
<v Speaker 1>It did not.

01:38:48.525 --> 01:38:49.324
<v Speaker 2>Let's look.

01:38:51.960 --> 01:38:53.960
<v Speaker 0>Change it again. I wanna see if the

01:38:53.960 --> 01:38:56.040
<v Speaker 0>revision bumps up to six

01:38:56.440 --> 01:38:57.559
<v Speaker 2>Yeah. Or seven.

01:38:57.880 --> 01:38:59.160
<v Speaker 0>Oh. Oh, it's

01:38:59.800 --> 01:39:01.480
<v Speaker 2>There's nothing to change here.

01:39:03.480 --> 01:39:04.119
<v Speaker 2>So

01:39:04.360 --> 01:39:04.680
<v Speaker 2>wait.

01:39:06.005 --> 01:39:06.965
<v Speaker 1>You can go back to

01:39:08.725 --> 01:39:10.485
<v Speaker 0>So where where did you see v one?

01:39:10.485 --> 01:39:12.005
<v Speaker 0>Did you describe the pod?

01:39:12.325 --> 01:39:14.565
<v Speaker 2>Yeah. The pod itself is still v one.

01:39:17.525 --> 01:39:19.605
<v Speaker 0>So he's

01:39:18.619 --> 01:39:21.579
<v Speaker 0>messed around with the controller manager or Kubelet.

01:39:25.179 --> 01:39:28.059
<v Speaker 2>That Well, the controller manager did restart. So

01:39:28.619 --> 01:39:29.340
<v Speaker 2>In

01:39:29.579 --> 01:39:32.940
<v Speaker 1>the interest of time, I used a

01:39:33.415 --> 01:39:35.974
<v Speaker 1>a validating webhook configuration.

01:39:36.614 --> 01:39:38.854
<v Speaker 2>A validating webhook configuration

01:39:39.415 --> 01:39:40.614
<v Speaker 2>that should not

01:39:42.215 --> 01:39:44.454
<v Speaker 2>be able to modify things. I'm confused.

01:39:44.855 --> 01:39:46.455
<v Speaker 0>Yeah. It can't modify things.

01:39:48.980 --> 01:39:50.579
<v Speaker 1>It can deny things.

01:39:50.660 --> 01:39:52.820
<v Speaker 0>But we didn't we didn't get it. Well,

01:39:55.860 --> 01:39:57.700
<v Speaker 2>maybe we did on the replica set.

01:39:59.365 --> 01:40:02.485
<v Speaker 1>That that validation dot d ns.kh.io,

01:40:02.485 --> 01:40:05.364
<v Speaker 1>that's that's not good. There's no such thing.

01:40:09.765 --> 01:40:12.489
<v Speaker 2>And that just makes it silently feel that

01:40:12.489 --> 01:40:12.730
<v Speaker 2>it's

01:40:13.610 --> 01:40:15.769
<v Speaker 1>Edit it. Go look at it real fast.

01:40:15.929 --> 01:40:18.010
<v Speaker 1>Yeah. Just so that everybody can see it.

01:40:18.330 --> 01:40:20.010
<v Speaker 0>Was there was there an error message when

01:40:20.010 --> 01:40:20.969
<v Speaker 0>we did the edit?

01:40:22.090 --> 01:40:22.809
<v Speaker 1>Nope.

01:40:23.449 --> 01:40:24.489
<v Speaker 1>Not on the deployment.

01:40:25.455 --> 01:40:26.974
<v Speaker 2>Not on the deployment, but maybe on the

01:40:26.974 --> 01:40:29.855
<v Speaker 0>replica set. Sneaky. Sneaky. Sneaky. Oh, yeah. Because

01:40:29.855 --> 01:40:32.014
<v Speaker 0>the deployment was v two. That's right. And

01:40:32.014 --> 01:40:33.935
<v Speaker 0>then the replica set was wasn't skilled up

01:40:33.935 --> 01:40:35.295
<v Speaker 0>because the one with the one on one

01:40:35.295 --> 01:40:36.655
<v Speaker 0>was ten minutes old. Gotcha.

01:40:38.430 --> 01:40:40.510
<v Speaker 0>That's a nice so we the part.

01:40:41.630 --> 01:40:42.430
<v Speaker 2>So

01:40:42.670 --> 01:40:44.750
<v Speaker 2>we have one with v one. Where's the

01:40:44.750 --> 01:40:45.870
<v Speaker 2>one with v two?

01:40:46.910 --> 01:40:48.830
<v Speaker 0>Well, if you deleted the webhook, then it

01:40:48.830 --> 01:40:50.670
<v Speaker 0>should just schedule. Right? So we're running it.

01:40:50.670 --> 01:40:52.190
<v Speaker 2>Well, I haven't delete I haven't deleted it

01:40:52.190 --> 01:40:54.395
<v Speaker 2>yet because that was interesting. Just in the

01:40:54.715 --> 01:40:55.355
<v Speaker 2>yeah.

01:40:57.755 --> 01:40:59.195
<v Speaker 0>Destroy it with fire.

01:41:00.475 --> 01:41:01.915
<v Speaker 2>No.

01:41:01.915 --> 01:41:02.395
<v Speaker 2>No.

01:41:03.755 --> 01:41:05.115
<v Speaker 2>I don't want to get the yellow. I

01:41:05.115 --> 01:41:05.915
<v Speaker 2>want to get the name.

01:41:09.840 --> 01:41:11.519
<v Speaker 2>Why did they make this word?

01:41:12.080 --> 01:41:13.679
<v Speaker 0>It's horrible, isn't it?

01:41:16.719 --> 01:41:17.440
<v Speaker 2>K.

01:41:17.680 --> 01:41:19.040
<v Speaker 0>Alright. Rugged pots.

01:41:27.135 --> 01:41:29.295
<v Speaker 2>I don't want now. Let me

01:41:32.735 --> 01:41:35.135
<v Speaker 2>let me just delete the pods just in

01:41:35.135 --> 01:41:35.375
<v Speaker 2>case.

01:41:37.130 --> 01:41:39.050
<v Speaker 0>Do know what? Just delete the cluster.

01:41:41.370 --> 01:41:42.170
<v Speaker 2>Yes.

01:41:43.850 --> 01:41:44.570
<v Speaker 2>K.

01:41:45.850 --> 01:41:46.890
<v Speaker 2>There's a new prod.

01:41:51.575 --> 01:41:53.255
<v Speaker 2>That looks old. There's

01:41:53.575 --> 01:41:56.775
<v Speaker 2>there's more. There is more. Right? Four seconds.

01:41:56.775 --> 01:41:57.655
<v Speaker 1>This is good.

01:41:58.215 --> 01:41:59.175
<v Speaker 2>Okay. Okay.

01:42:02.135 --> 01:42:05.120
<v Speaker 2>Is this good or bad? That's bad. This

01:42:06.640 --> 01:42:08.160
<v Speaker 0>is not the right image.

01:42:14.480 --> 01:42:15.520
<v Speaker 0>Excuse me.

01:42:20.875 --> 01:42:22.554
<v Speaker 0>Pill policy always.

01:42:23.514 --> 01:42:24.875
<v Speaker 0>GHCR

01:42:24.875 --> 01:42:27.195
<v Speaker 0>Rawkode clustered v two.

01:42:29.275 --> 01:42:30.795
<v Speaker 2>Okay. Resolve conf.

01:42:33.530 --> 01:42:34.889
<v Speaker 2>It's always DNS.

01:42:35.370 --> 01:42:36.650
<v Speaker 1>You're gonna you're gonna wanna be in the

01:42:36.650 --> 01:42:37.770
<v Speaker 1>worker. Yeah.

01:42:38.250 --> 01:42:41.130
<v Speaker 2>Oh, yeah. But but you messed with DNS.

01:42:41.130 --> 01:42:42.170
<v Speaker 2>Yes. Okay.

01:42:42.730 --> 01:42:45.244
<v Speaker 2>Just as a cherry on top.

01:42:45.724 --> 01:42:47.324
<v Speaker 0>Yeah. That's under your rule. If you fuck

01:42:47.324 --> 01:42:48.764
<v Speaker 0>with Etsy, do you know how to mess

01:42:48.764 --> 01:42:50.925
<v Speaker 0>anything else up? Oh, just

01:42:52.445 --> 01:42:53.965
<v Speaker 1>redirects Etsy host.

01:42:55.565 --> 01:42:58.044
<v Speaker 2>Okay. Etsy hosts. We can delete it.

01:42:59.005 --> 01:43:01.320
<v Speaker 1>No. Don't Don't delete Etsy hosts.

01:43:01.640 --> 01:43:03.880
<v Speaker 2>No. No. But we can edit Etsy hosts.

01:43:04.360 --> 01:43:05.960
<v Speaker 0>Which server are you on?

01:43:06.360 --> 01:43:08.040
<v Speaker 2>I'm not on on

01:43:08.520 --> 01:43:11.000
<v Speaker 2>worker. I need to join your session still.

01:43:12.985 --> 01:43:14.345
<v Speaker 2>Are you trying to figure out on which

01:43:14.345 --> 01:43:15.385
<v Speaker 2>one the

01:43:15.545 --> 01:43:16.824
<v Speaker 2>pod got scheduled?

01:43:17.385 --> 01:43:18.824
<v Speaker 0>Ah, there we go. Yeah.

01:43:19.545 --> 01:43:20.344
<v Speaker 2>Remove that.

01:43:21.225 --> 01:43:21.945
<v Speaker 2>I'll do it.

01:43:25.820 --> 01:43:27.420
<v Speaker 0>Okay. So we need to delete the

01:43:28.380 --> 01:43:29.180
<v Speaker 0>pod again.

01:43:31.580 --> 01:43:33.100
<v Speaker 1>Me. You might wanna apply it to the

01:43:33.100 --> 01:43:34.300
<v Speaker 1>other worker real fast.

01:43:35.100 --> 01:43:37.260
<v Speaker 0>I never seen anything on the other worker.

01:43:38.300 --> 01:43:39.260
<v Speaker 1>It should be on both.

01:43:40.405 --> 01:43:42.565
<v Speaker 2>Yeah. I got stuck. I can

01:43:43.205 --> 01:43:45.125
<v Speaker 2>not access in on the other worker for

01:43:45.125 --> 01:43:47.124
<v Speaker 0>some Yeah. I accidentally ran it to the

01:43:48.485 --> 01:43:52.485
<v Speaker 0>I accidentally ran container d. Sorry about that.

01:43:55.860 --> 01:43:56.979
<v Speaker 0>Okay. Okay.

01:43:58.020 --> 01:44:00.019
<v Speaker 2>Now we're gonna delete this pod.

01:44:01.380 --> 01:44:02.100
<v Speaker 2>Then it's gonna

01:44:10.900 --> 01:44:11.140
<v Speaker 0>k.

01:44:15.875 --> 01:44:18.435
<v Speaker 2>DNS might be cached in core DNS as

01:44:18.435 --> 01:44:18.995
<v Speaker 2>well,

01:44:19.555 --> 01:44:20.515
<v Speaker 2>I suppose,

01:44:20.675 --> 01:44:20.915
<v Speaker 2>right?

01:44:24.310 --> 01:44:27.030
<v Speaker 1>I didn't intentionally break that. Yeah. You may

01:44:27.030 --> 01:44:29.510
<v Speaker 0>just wanna restart the kuplets on both workers.

01:44:31.110 --> 01:44:32.550
<v Speaker 2>Yeah. We can do that too.

01:44:35.989 --> 01:44:37.510
<v Speaker 0>And container d just in case.

01:44:40.175 --> 01:44:41.455
<v Speaker 0>Can you just try to type? I don't

01:44:41.455 --> 01:44:43.135
<v Speaker 0>think so. Oh, you can. Cool.

01:44:46.095 --> 01:44:46.895
<v Speaker 0>Mhmm.

01:44:47.135 --> 01:44:49.775
<v Speaker 0>And then we'll need to Oh, wait. I

01:44:49.775 --> 01:44:52.015
<v Speaker 2>guess because it pulled the image already. I

01:44:52.015 --> 01:44:52.895
<v Speaker 0>I checked that.

01:44:54.199 --> 01:44:55.960
<v Speaker 2>It will not re pull the image because

01:44:55.960 --> 01:44:58.199
<v Speaker 2>it already has it. I told it to.

01:44:58.760 --> 01:45:00.920
<v Speaker 2>Oh, okay. Okay. Interesting.

01:45:02.679 --> 01:45:04.280
<v Speaker 0>Alright. Let's go to work this time.

01:45:05.355 --> 01:45:05.994
<v Speaker 1>K.

01:45:07.755 --> 01:45:09.034
<v Speaker 0>Stop laughing, William.

01:45:12.235 --> 01:45:13.835
<v Speaker 2>Something

01:45:15.675 --> 01:45:18.395
<v Speaker 2>is writing to Etsy hosts con continually.

01:45:19.450 --> 01:45:20.170
<v Speaker 2>It's back.

01:45:20.490 --> 01:45:21.370
<v Speaker 1>I

01:45:21.370 --> 01:45:23.210
<v Speaker 1>did not do that. It was tempting. Oh,

01:45:23.610 --> 01:45:24.250
<v Speaker 2>okay.

01:45:25.850 --> 01:45:27.610
<v Speaker 0>Are we just saying I am incapable of

01:45:27.610 --> 01:45:29.210
<v Speaker 0>modifying a fail with them?

01:45:29.690 --> 01:45:30.970
<v Speaker 0>Because I don't think that's nice.

01:45:32.235 --> 01:45:34.315
<v Speaker 2>No. We we added it. It's but it's

01:45:34.315 --> 01:45:35.275
<v Speaker 2>still not working.

01:45:35.515 --> 01:45:36.955
<v Speaker 0>No. It's not working.

01:45:37.675 --> 01:45:38.475
<v Speaker 2>Okay.

01:45:39.995 --> 01:45:40.715
<v Speaker 2>Hint.

01:45:42.395 --> 01:45:44.395
<v Speaker 0>Yeah. Put us put us out our misery,

01:45:44.395 --> 01:45:45.355
<v Speaker 0>William. Yeah. Yeah.

01:45:49.160 --> 01:45:50.840
<v Speaker 1>I'm just like, what's going on?

01:45:51.480 --> 01:45:52.920
<v Speaker 1>Now you got me wondering.

01:45:53.800 --> 01:45:54.760
<v Speaker 1>Oh, no.

01:45:55.080 --> 01:45:56.280
<v Speaker 2>Where is that face?

01:45:57.800 --> 01:46:01.080
<v Speaker 2>I have one wait. I'm gonna just

01:46:13.170 --> 01:46:13.890
<v Speaker 2>This

01:46:16.370 --> 01:46:17.650
<v Speaker 0>Dash L space.

01:46:19.650 --> 01:46:22.210
<v Speaker 2>All right. Just in case, right?

01:46:26.395 --> 01:46:28.235
<v Speaker 2>We want to delete the part one more

01:46:28.235 --> 01:46:28.795
<v Speaker 2>time.

01:46:29.355 --> 01:46:31.514
<v Speaker 0>Delete the cluster. I'm done.

01:46:38.395 --> 01:46:38.875
<v Speaker 2>Try it.

01:46:40.040 --> 01:46:41.320
<v Speaker 0>It's mocking us.

01:46:46.600 --> 01:46:48.280
<v Speaker 1>Did you do a shift refresh?

01:46:48.440 --> 01:46:49.720
<v Speaker 0>I did. Many,

01:46:50.200 --> 01:46:50.680
<v Speaker 0>many.

01:46:52.455 --> 01:46:54.455
<v Speaker 2>I'm just gonna go back to v one

01:46:54.455 --> 01:46:55.895
<v Speaker 2>and call it a day.

01:46:57.655 --> 01:46:59.255
<v Speaker 2>We're we're back at v one.

01:47:00.535 --> 01:47:02.375
<v Speaker 1>That's what a true SRE does.

01:47:02.695 --> 01:47:04.695
<v Speaker 0>Right. We're like we're like v two again.

01:47:04.695 --> 01:47:07.070
<v Speaker 0>Yeah. Yeah. I I just have a feeling

01:47:07.070 --> 01:47:09.310
<v Speaker 2>it's not pulling the image for some reason.

01:47:09.310 --> 01:47:11.949
<v Speaker 0>Oh, no. Wait. The deployment changed. That was

01:47:11.949 --> 01:47:13.469
<v Speaker 0>always because I because

01:47:14.909 --> 01:47:17.389
<v Speaker 0>I searched for image. Oh. Always always in

01:47:17.389 --> 01:47:19.310
<v Speaker 0>the last applied configuration

01:47:19.885 --> 01:47:21.565
<v Speaker 0>but not down here.

01:47:22.445 --> 01:47:25.325
<v Speaker 0>That's

01:47:25.325 --> 01:47:25.885
<v Speaker 0>why.

01:47:28.045 --> 01:47:30.125
<v Speaker 0>So that means that William when he modified

01:47:30.125 --> 01:47:32.845
<v Speaker 0>it did server side apply with his coop

01:47:32.845 --> 01:47:33.245
<v Speaker 0>control.

01:47:34.179 --> 01:47:34.979
<v Speaker 0>Mhmm.

01:47:37.059 --> 01:47:39.940
<v Speaker 2>Okay. So go go to the page. I'm

01:47:39.940 --> 01:47:41.059
<v Speaker 0>dancing. I'm dancing.

01:47:51.165 --> 01:47:51.804
<v Speaker 2>Good.

01:47:54.525 --> 01:47:57.164
<v Speaker 0>Yeah. Nothing to say, William. Nothing to say.

01:47:59.405 --> 01:48:01.084
<v Speaker 0>In the STD break.

01:48:01.405 --> 01:48:02.925
<v Speaker 0>I I I feel that was cool. I

01:48:02.925 --> 01:48:05.380
<v Speaker 0>really enjoyed working through the STD break, and

01:48:05.380 --> 01:48:07.380
<v Speaker 0>then it was just sucker punches after that,

01:48:07.380 --> 01:48:08.020
<v Speaker 0>I feel.

01:48:09.780 --> 01:48:10.900
<v Speaker 0>See, I thought the other two would be

01:48:10.900 --> 01:48:12.739
<v Speaker 1>the easy one. The STD break, I expected

01:48:12.739 --> 01:48:14.580
<v Speaker 1>to take a while. I should have given

01:48:14.580 --> 01:48:15.860
<v Speaker 1>you a hint earlier.

01:48:17.860 --> 01:48:19.460
<v Speaker 0>No. No. No. No. It

01:48:19.860 --> 01:48:22.855
<v Speaker 0>was good. And I don't know. I just

01:48:23.015 --> 01:48:23.495
<v Speaker 0>you

01:48:24.535 --> 01:48:27.095
<v Speaker 0>don't think straight on these episodes. Like,

01:48:28.135 --> 01:48:30.295
<v Speaker 0>generating a new certificate

01:48:30.295 --> 01:48:31.815
<v Speaker 0>makes a lot of sense when you know

01:48:31.815 --> 01:48:33.495
<v Speaker 0>the username is a thing and it's a

01:48:33.495 --> 01:48:34.135
<v Speaker 0>special role.

01:48:35.139 --> 01:48:36.980
<v Speaker 0>Yeah. I still feel like turning off the

01:48:36.980 --> 01:48:38.420
<v Speaker 0>off should've worked, but you told me there's

01:48:38.420 --> 01:48:40.420
<v Speaker 0>no default password. So obviously, that's a bug

01:48:40.420 --> 01:48:41.379
<v Speaker 0>in etcd.

01:48:43.699 --> 01:48:45.780
<v Speaker 1>There's a reason why etcd makes you add

01:48:45.780 --> 01:48:47.380
<v Speaker 1>a root user and set a password to

01:48:47.380 --> 01:48:49.059
<v Speaker 1>it before it will let you do

01:48:49.925 --> 01:48:51.045
<v Speaker 1>turn on off.

01:48:51.845 --> 01:48:53.285
<v Speaker 1>And I set the password to one two

01:48:53.285 --> 01:48:54.565
<v Speaker 1>three four five six

01:48:54.885 --> 01:48:56.325
<v Speaker 1>so that you could That would have been

01:48:56.325 --> 01:48:58.005
<v Speaker 0>my next guess. Got that part.

01:48:59.685 --> 01:49:01.605
<v Speaker 2>I I I have deleted the cubelet on

01:49:01.605 --> 01:49:03.860
<v Speaker 2>the control plane and it's

01:49:03.860 --> 01:49:05.699
<v Speaker 2>it's done. It's done.

01:49:06.580 --> 01:49:09.380
<v Speaker 0>Yeah. I tried admin and I tried password.

01:49:09.380 --> 01:49:10.740
<v Speaker 0>I should have tried one two three four

01:49:10.740 --> 01:49:12.020
<v Speaker 0>five six. But

01:49:12.340 --> 01:49:13.940
<v Speaker 0>that would have been funny if if we

01:49:13.940 --> 01:49:14.260
<v Speaker 0>did it.

01:49:16.765 --> 01:49:18.925
<v Speaker 0>And, yeah, I I like the validation thing

01:49:18.925 --> 01:49:21.085
<v Speaker 0>because it was sneaky because the deployment edit

01:49:21.085 --> 01:49:23.165
<v Speaker 0>worked, but then you don't realize the pod

01:49:23.165 --> 01:49:25.885
<v Speaker 0>hasn't hasn't changed because you're too busy frantically

01:49:25.885 --> 01:49:27.165
<v Speaker 0>looking at everything else.

01:49:27.805 --> 01:49:29.405
<v Speaker 2>That that that is a bit of a

01:49:29.405 --> 01:49:31.485
<v Speaker 2>weird UX though. It would be nice if,

01:49:32.100 --> 01:49:32.739
<v Speaker 2>like,

01:49:33.540 --> 01:49:36.179
<v Speaker 2>the deployment would say, oh, this replica sets

01:49:36.260 --> 01:49:38.260
<v Speaker 2>that we created is not scaling up, like,

01:49:38.260 --> 01:49:40.179
<v Speaker 2>just from UX standpoint. Like, I know these

01:49:40.179 --> 01:49:42.739
<v Speaker 2>things are disconnected concepts, but as a user

01:49:43.699 --> 01:49:46.385
<v Speaker 1>Yeah. It's not very user friendly. Right?

01:49:47.744 --> 01:49:50.224
<v Speaker 0>And then So you you edit the pod

01:49:50.224 --> 01:49:51.104
<v Speaker 1>pod

01:49:51.425 --> 01:49:52.945
<v Speaker 1>when you edit the pod, it actually gives

01:49:52.945 --> 01:49:54.704
<v Speaker 1>you a real error, which was helpful. But

01:49:54.945 --> 01:49:56.385
<v Speaker 0>But you can't edit pods.

01:49:57.105 --> 01:49:58.784
<v Speaker 2>Yeah. They're immutable.

01:49:59.264 --> 01:50:00.230
<v Speaker 1>Oh, it's true.

01:50:00.550 --> 01:50:02.630
<v Speaker 0>So did you actually run your own registry

01:50:02.630 --> 01:50:04.710
<v Speaker 0>in that cluster or on the host somewhere?

01:50:05.270 --> 01:50:06.869
<v Speaker 1>No. I just I just

01:50:07.590 --> 01:50:09.030
<v Speaker 1>use container

01:50:09.030 --> 01:50:11.429
<v Speaker 1>d to download an existing container and then

01:50:11.429 --> 01:50:13.525
<v Speaker 1>retag it as yours. And then set the

01:50:13.525 --> 01:50:15.525
<v Speaker 0>if not present, and then it kinda snuck

01:50:15.525 --> 01:50:17.525
<v Speaker 0>through. But I only looked at the annotation,

01:50:17.525 --> 01:50:18.965
<v Speaker 0>which is why that trip is up to.

01:50:18.965 --> 01:50:22.085
<v Speaker 0>Damn it. Yeah. I originally put never because

01:50:22.085 --> 01:50:23.204
<v Speaker 1>I wanted to do it. And then I

01:50:23.204 --> 01:50:24.244
<v Speaker 1>was like, no. They you know, they're gonna

01:50:24.244 --> 01:50:25.204
<v Speaker 1>see that in five seconds.

01:50:25.860 --> 01:50:28.979
<v Speaker 2>That's too obvious. Yeah. Oh, yeah. Alright.

01:50:31.540 --> 01:50:34.340
<v Speaker 0>Good job, both of you. Great breaks by

01:50:34.340 --> 01:50:36.980
<v Speaker 0>both. Great fixes by both. As always, I

01:50:36.980 --> 01:50:38.420
<v Speaker 0>am the liability in the group and I

01:50:38.420 --> 01:50:41.074
<v Speaker 0>make everything take 10 times longer. But thank

01:50:41.074 --> 01:50:43.074
<v Speaker 0>you for your patience in sticking with me.

01:50:43.715 --> 01:50:45.635
<v Speaker 0>Thank you to our audience for watching. Thank

01:50:45.635 --> 01:50:47.955
<v Speaker 0>you to Equinix Medal and to Teleport for

01:50:47.955 --> 01:50:49.394
<v Speaker 0>their continued support,

01:50:49.715 --> 01:50:51.715
<v Speaker 0>and we'll see you all again soon. Have

01:50:51.715 --> 01:50:53.955
<v Speaker 0>a great weekend, everyone. Adios. Have a great

01:50:53.955 --> 01:50:55.315
<v Speaker 2>weekend. Bye bye. Bye.

01:51:12.495 --> 01:51:14.095
<v Speaker 2>For watching Rawkode Live.
