WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: a8f0ab34-f36d-4120-959a-866f6302e564
Created: 2025-04-29T14:28:17.899Z
Duration: 833.4984
Channels: 1

00:00:05.040 --> 00:00:08.240
<v Speaker 0>Hello, and welcome back to the Rawkode Academy.

00:00:08.240 --> 00:00:10.240
<v Speaker 0>I'm your host, David Flanagan, although you may

00:00:10.240 --> 00:00:12.480
<v Speaker 0>know me from across the Internet as Rawkode.

00:00:13.745 --> 00:00:16.865
<v Speaker 0>Today, we're continuing on our Komodor tutorial. If

00:00:16.865 --> 00:00:18.945
<v Speaker 0>you haven't seen part one, pause this and

00:00:18.945 --> 00:00:20.625
<v Speaker 0>go watch it now.

00:00:21.345 --> 00:00:23.665
<v Speaker 0>In part one, I show you how to

00:00:23.665 --> 00:00:26.545
<v Speaker 0>deploy the Komodor agent to your Kubernetes cluster.

00:00:27.320 --> 00:00:29.240
<v Speaker 0>From there, we're able to use the Komodor

00:00:29.240 --> 00:00:29.960
<v Speaker 0>UI

00:00:30.120 --> 00:00:33.560
<v Speaker 0>to troubleshoot and debug our Kubernetes cluster.

00:00:34.280 --> 00:00:37.640
<v Speaker 0>We get really rich context aware user interface

00:00:37.640 --> 00:00:39.995
<v Speaker 0>that allows us to browse our workloads and

00:00:39.995 --> 00:00:41.915
<v Speaker 0>work out what is wrong based on the

00:00:41.915 --> 00:00:43.274
<v Speaker 0>events within the system.

00:00:44.315 --> 00:00:46.155
<v Speaker 0>And as we all know, when things go

00:00:46.155 --> 00:00:48.795
<v Speaker 0>wrong, the more information at hand you have,

00:00:49.035 --> 00:00:50.635
<v Speaker 0>the easier your job is.

00:00:51.434 --> 00:00:53.434
<v Speaker 0>So Komodor also ships with a whole bunch

00:00:53.434 --> 00:00:55.320
<v Speaker 0>of integrations. We're going to take a look

00:00:55.320 --> 00:00:56.840
<v Speaker 0>at a few of them today.

00:00:57.800 --> 00:00:59.239
<v Speaker 0>The first one I wanna take a look

00:00:59.239 --> 00:01:00.600
<v Speaker 0>at is Sentry.

00:01:01.160 --> 00:01:03.320
<v Speaker 0>Sentry is something that if you're an application

00:01:03.320 --> 00:01:06.520
<v Speaker 0>developer, you probably already know. It's an open

00:01:06.520 --> 00:01:08.920
<v Speaker 0>source tool that you integrate into your application.

00:01:09.435 --> 00:01:12.314
<v Speaker 0>They support pretty much every runtime available.

00:01:13.274 --> 00:01:15.515
<v Speaker 0>And whenever things go wrong,

00:01:15.915 --> 00:01:18.075
<v Speaker 0>it sends an alert with a stack trace

00:01:18.075 --> 00:01:19.594
<v Speaker 0>to the Sentry system.

00:01:20.555 --> 00:01:22.700
<v Speaker 0>Meaning, you can log in to Sentry, see

00:01:22.700 --> 00:01:25.100
<v Speaker 0>the stack traces, how many times have happened,

00:01:25.100 --> 00:01:26.539
<v Speaker 0>when the last one happened,

00:01:26.780 --> 00:01:29.180
<v Speaker 0>and more information about the request

00:01:29.340 --> 00:01:31.100
<v Speaker 0>depending on where it runs. It could be

00:01:31.100 --> 00:01:32.299
<v Speaker 0>mobile, desktop,

00:01:32.460 --> 00:01:33.979
<v Speaker 0>browser, who knows.

00:01:34.220 --> 00:01:36.299
<v Speaker 0>But everything that you need to handle that

00:01:36.299 --> 00:01:37.820
<v Speaker 0>exception should be at your fingertips.

00:01:38.674 --> 00:01:41.314
<v Speaker 0>So of course, Komodor provide a way to

00:01:41.314 --> 00:01:45.235
<v Speaker 0>present that information as part of their UI.

00:01:46.115 --> 00:01:47.314
<v Speaker 0>Let's take a look.

00:01:47.955 --> 00:01:50.115
<v Speaker 0>So here's the Komodor UI

00:01:50.115 --> 00:01:54.034
<v Speaker 0>and our pretty healthy cluster that we've seen

00:01:53.340 --> 00:01:54.700
<v Speaker 0>in the first tutorial.

00:01:56.140 --> 00:01:57.500
<v Speaker 0>The first thing I want to do is

00:01:57.500 --> 00:01:59.020
<v Speaker 0>pop down to integrations

00:01:59.500 --> 00:02:02.140
<v Speaker 0>where you'll see that I've already added Sentry

00:02:02.140 --> 00:02:04.299
<v Speaker 0>to my Komodor setup.

00:02:04.859 --> 00:02:06.700
<v Speaker 0>However, I'm gonna quickly walk you through the

00:02:06.700 --> 00:02:07.500
<v Speaker 0>steps involved.

00:02:08.275 --> 00:02:10.915
<v Speaker 0>So first, you need to go to Sentry.

00:02:10.915 --> 00:02:12.515
<v Speaker 0>Sign up for an account. There is a

00:02:12.515 --> 00:02:13.795
<v Speaker 0>free tier. Enjoy.

00:02:14.835 --> 00:02:16.515
<v Speaker 0>From there, we go to settings

00:02:17.235 --> 00:02:18.995
<v Speaker 0>and then developer settings.

00:02:19.955 --> 00:02:21.475
<v Speaker 0>And here, you'll be able to add a

00:02:21.475 --> 00:02:22.995
<v Speaker 0>new internal integration.

00:02:25.519 --> 00:02:27.840
<v Speaker 0>You click next and fill in

00:02:28.319 --> 00:02:30.080
<v Speaker 0>just a few details.

00:02:31.920 --> 00:02:34.319
<v Speaker 0>Give it a name. I called mine Komodor.

00:02:34.319 --> 00:02:35.680
<v Speaker 0>Not very inventive,

00:02:35.680 --> 00:02:36.560
<v Speaker 0>but fit for purpose.

00:02:38.194 --> 00:02:39.875
<v Speaker 0>From the Komodor side, when you go to

00:02:39.875 --> 00:02:42.355
<v Speaker 0>add the Sentry integration, it will give you

00:02:42.355 --> 00:02:45.795
<v Speaker 0>a URL to use as the webhook URL.

00:02:45.954 --> 00:02:48.034
<v Speaker 0>So don't make it up. Copy and paste.

00:02:50.190 --> 00:02:52.430
<v Speaker 0>Next, you'll need to select project,

00:02:52.510 --> 00:02:55.230
<v Speaker 0>read, and issue an event, read.

00:02:55.950 --> 00:02:56.670
<v Speaker 0>Lastly,

00:02:57.230 --> 00:02:59.630
<v Speaker 0>select tick box, on issue,

00:02:59.950 --> 00:03:00.990
<v Speaker 0>and save.

00:03:02.030 --> 00:03:02.910
<v Speaker 0>And you're good to go.

00:03:04.625 --> 00:03:06.065
<v Speaker 0>From the Komodor side,

00:03:06.225 --> 00:03:07.425
<v Speaker 0>scroll down,

00:03:09.265 --> 00:03:10.705
<v Speaker 0>click install integration,

00:03:11.105 --> 00:03:13.025
<v Speaker 0>and the URL that you need to copy

00:03:13.025 --> 00:03:13.825
<v Speaker 0>is here.

00:03:15.025 --> 00:03:16.865
<v Speaker 0>If you get confused at any point,

00:03:17.490 --> 00:03:19.410
<v Speaker 0>jump to the Komodor documentation.

00:03:19.410 --> 00:03:20.690
<v Speaker 0>Select integrations

00:03:20.770 --> 00:03:21.890
<v Speaker 0>and Sentry,

00:03:22.050 --> 00:03:24.130
<v Speaker 0>and I'll walk you through step by step.

00:03:24.770 --> 00:03:26.850
<v Speaker 0>Now that we've done the setup, we need

00:03:26.850 --> 00:03:29.090
<v Speaker 0>to cause a little bit of panic,

00:03:29.490 --> 00:03:30.770
<v Speaker 0>pun intended,

00:03:30.770 --> 00:03:31.410
<v Speaker 0>as you'll see.

00:03:33.515 --> 00:03:36.075
<v Speaker 0>First, you need to modify the deployment resource

00:03:36.075 --> 00:03:37.675
<v Speaker 0>for your application.

00:03:44.235 --> 00:03:46.795
<v Speaker 0>Here, I have a very simple deployment dot

00:03:46.795 --> 00:03:50.235
<v Speaker 0>YAML for my application called

00:03:49.210 --> 00:03:50.250
<v Speaker 0>Go Crash.

00:03:52.810 --> 00:03:54.890
<v Speaker 0>In order to have Komodor connect the dots

00:03:54.890 --> 00:03:56.970
<v Speaker 0>with Sentry, you will have to provide the

00:03:56.970 --> 00:03:59.450
<v Speaker 0>Sentry DSN as an environment variable.

00:04:00.250 --> 00:04:02.730
<v Speaker 0>I'm doing that as a hard coded value.

00:04:02.730 --> 00:04:05.135
<v Speaker 0>As you can see, I would strongly encourage

00:04:05.135 --> 00:04:07.215
<v Speaker 0>you to store this as a secret

00:04:07.614 --> 00:04:09.295
<v Speaker 0>and mount it inappropriately.

00:04:09.775 --> 00:04:12.095
<v Speaker 0>You can also set the Sentry environment to

00:04:12.095 --> 00:04:13.935
<v Speaker 0>which I set it to production.

00:04:14.254 --> 00:04:16.334
<v Speaker 0>So let's deploy this to my cluster with

00:04:16.334 --> 00:04:17.854
<v Speaker 0>the Komodor agent installed.

00:04:21.740 --> 00:04:23.580
<v Speaker 0>We can run kubectl

00:04:23.580 --> 00:04:24.460
<v Speaker 0>apply

00:04:24.460 --> 00:04:25.740
<v Speaker 0>example app

00:04:26.700 --> 00:04:28.060
<v Speaker 0>deployment.jaml.

00:04:29.420 --> 00:04:31.500
<v Speaker 0>From here, we can run kubectl

00:04:31.500 --> 00:04:34.220
<v Speaker 0>get pods to watch the rollout status of

00:04:34.220 --> 00:04:34.860
<v Speaker 0>our application.

00:04:38.975 --> 00:04:41.455
<v Speaker 0>And already, we can see that our application

00:04:41.455 --> 00:04:43.535
<v Speaker 0>is in a crash loop back off.

00:04:45.215 --> 00:04:47.455
<v Speaker 0>Let's head over to Komodor and see why.

00:04:48.970 --> 00:04:51.050
<v Speaker 0>Alright. So here we are in the Komodor

00:04:51.050 --> 00:04:51.770
<v Speaker 0>UI,

00:04:51.850 --> 00:04:53.930
<v Speaker 0>and we can actually see that currently, Go

00:04:53.930 --> 00:04:55.610
<v Speaker 0>Crash appears to be healthy.

00:04:56.410 --> 00:04:57.770
<v Speaker 0>But if we click on it, we can

00:04:57.770 --> 00:05:00.675
<v Speaker 0>see that this application has failed, had a

00:05:00.675 --> 00:05:02.915
<v Speaker 0>brief stunt as maybe healthy, which I think

00:05:02.915 --> 00:05:05.235
<v Speaker 0>was just being rescheduled on another node,

00:05:05.555 --> 00:05:07.555
<v Speaker 0>and then began to crash again.

00:05:08.275 --> 00:05:10.115
<v Speaker 0>So in a moment, this will change to

00:05:10.115 --> 00:05:12.275
<v Speaker 0>GoCrash being an unhealthy application.

00:05:12.995 --> 00:05:14.835
<v Speaker 0>But we can already see down here

00:05:15.439 --> 00:05:17.439
<v Speaker 0>that we have two notifications

00:05:17.439 --> 00:05:19.120
<v Speaker 0>from Sentry itself.

00:05:19.759 --> 00:05:21.280
<v Speaker 0>Now we'll see the code in a minute

00:05:21.280 --> 00:05:23.840
<v Speaker 0>and why Sentry says, hey. It works. But

00:05:23.840 --> 00:05:26.479
<v Speaker 0>this is me sending a default capture message

00:05:26.479 --> 00:05:28.319
<v Speaker 0>or event to the Sentry system.

00:05:29.175 --> 00:05:31.014
<v Speaker 0>And then we also see this is a

00:05:31.014 --> 00:05:31.975
<v Speaker 0>test panic.

00:05:33.014 --> 00:05:34.775
<v Speaker 0>So if we click on this, we get

00:05:34.775 --> 00:05:36.055
<v Speaker 0>some more context.

00:05:36.535 --> 00:05:38.294
<v Speaker 0>We can see that a Sentry issue was

00:05:38.294 --> 00:05:39.975
<v Speaker 0>created, example three,

00:05:40.455 --> 00:05:41.495
<v Speaker 0>with level fatal.

00:05:41.950 --> 00:05:44.030
<v Speaker 0>And we can see that this is currently

00:05:44.030 --> 00:05:45.390
<v Speaker 0>unresolved.

00:05:46.350 --> 00:05:48.990
<v Speaker 0>So if we click view issue on center,

00:05:49.550 --> 00:05:50.910
<v Speaker 0>it takes us to here,

00:05:51.950 --> 00:05:53.870
<v Speaker 0>where we can see the go run time

00:05:53.870 --> 00:05:54.830
<v Speaker 0>for application

00:05:54.910 --> 00:05:56.910
<v Speaker 0>is 01:19.5

00:05:58.264 --> 00:06:00.585
<v Speaker 0>running on a Linux machine, which is AMD

00:06:00.585 --> 00:06:01.625
<v Speaker 0>sixty four.

00:06:04.905 --> 00:06:06.505
<v Speaker 0>If you scroll down, we see the message

00:06:06.505 --> 00:06:07.785
<v Speaker 0>that this is a test panic,

00:06:10.290 --> 00:06:12.610
<v Speaker 0>as well as the packages available

00:06:12.850 --> 00:06:15.170
<v Speaker 0>and the Go SDK version.

00:06:19.410 --> 00:06:21.170
<v Speaker 0>Now these events are as rich as you

00:06:21.170 --> 00:06:23.490
<v Speaker 0>want them to be by your instrumentation and

00:06:23.490 --> 00:06:24.290
<v Speaker 0>the Go application.

00:06:25.275 --> 00:06:26.875
<v Speaker 0>So let's take a look at that.

00:06:30.715 --> 00:06:32.715
<v Speaker 0>If we open main.Go, you'll see my hard

00:06:32.715 --> 00:06:34.715
<v Speaker 0>code is sent to DSN, which you really

00:06:34.715 --> 00:06:37.195
<v Speaker 0>shouldn't do. Trust me. Do not do that.

00:06:38.315 --> 00:06:39.595
<v Speaker 0>And then we'll see

00:06:40.760 --> 00:06:43.480
<v Speaker 0>that we have the capture message I sent

00:06:43.480 --> 00:06:45.320
<v Speaker 0>as a test to ensure that the central

00:06:45.320 --> 00:06:46.600
<v Speaker 0>integration was working,

00:06:47.880 --> 00:06:48.840
<v Speaker 0>followed by

00:06:49.320 --> 00:06:50.360
<v Speaker 0>a panic.

00:06:50.840 --> 00:06:53.080
<v Speaker 0>I'm explicitly telling this application

00:06:53.160 --> 00:06:53.880
<v Speaker 0>to crash.

00:06:55.735 --> 00:06:57.255
<v Speaker 0>So let's remove that

00:06:57.735 --> 00:07:00.055
<v Speaker 0>and replace it with a hello world.

00:07:00.775 --> 00:07:02.135
<v Speaker 0>Now I'm not going to go through the

00:07:02.135 --> 00:07:04.455
<v Speaker 0>motions of committing, rebuilding the image, pushing this

00:07:04.455 --> 00:07:06.615
<v Speaker 0>to cluster, pushing out a new deployment.

00:07:06.855 --> 00:07:09.175
<v Speaker 0>Instead, I'm just gonna pop over

00:07:09.650 --> 00:07:10.770
<v Speaker 0>and resolve.

00:07:19.650 --> 00:07:21.969
<v Speaker 0>Now we can refresh the Komodor page

00:07:22.775 --> 00:07:24.535
<v Speaker 0>and we'll see that this is a test

00:07:24.535 --> 00:07:26.055
<v Speaker 0>panic has been resolved.

00:07:27.095 --> 00:07:29.015
<v Speaker 0>Now this is a contrived situation,

00:07:29.415 --> 00:07:31.095
<v Speaker 0>but it's important to know that if you

00:07:31.095 --> 00:07:33.575
<v Speaker 0>instrument your application with a tool like Sentri,

00:07:33.655 --> 00:07:34.855
<v Speaker 0>integrate it with Komodor,

00:07:35.280 --> 00:07:37.360
<v Speaker 0>you can get real time information with that

00:07:37.360 --> 00:07:40.080
<v Speaker 0>integration directly in the Komodor UI,

00:07:40.400 --> 00:07:42.160
<v Speaker 0>and that is a cool feature.

00:07:43.200 --> 00:07:45.280
<v Speaker 0>So it's time to say goodbye to Go

00:07:45.280 --> 00:07:47.200
<v Speaker 0>Crash, and we'll move on to the next

00:07:47.200 --> 00:07:47.680
<v Speaker 0>integration.

00:07:48.325 --> 00:07:50.725
<v Speaker 0>So another tool that developers love to use

00:07:50.965 --> 00:07:52.885
<v Speaker 0>well, I love to use, but I'll speak

00:07:52.885 --> 00:07:54.245
<v Speaker 0>for all developers now,

00:07:54.485 --> 00:07:55.605
<v Speaker 0>is Grafana,

00:07:55.765 --> 00:07:59.525
<v Speaker 0>especially in coordination with Prometheus and Alert Manager.

00:08:00.725 --> 00:08:03.125
<v Speaker 0>So let's pop down the integration list,

00:08:06.289 --> 00:08:08.050
<v Speaker 0>And you'll see at the bottom left,

00:08:08.289 --> 00:08:11.330
<v Speaker 0>we have an integration with Prometheus Alert Manager.

00:08:13.250 --> 00:08:15.169
<v Speaker 0>If we click on this, we'll get another

00:08:15.169 --> 00:08:17.169
<v Speaker 0>URL that we can hook up to our

00:08:17.169 --> 00:08:18.210
<v Speaker 0>alert manager

00:08:19.474 --> 00:08:22.435
<v Speaker 0>to inform Komodor when things are alerting.

00:08:23.474 --> 00:08:26.195
<v Speaker 0>So let's copy this URL like so.

00:08:29.235 --> 00:08:31.395
<v Speaker 0>So if you're not familiar with configuring alert

00:08:31.395 --> 00:08:34.274
<v Speaker 0>manager, it all happens through a Kubernetes secret.

00:08:35.090 --> 00:08:36.850
<v Speaker 0>Here's the one that I pulled out of

00:08:36.850 --> 00:08:37.650
<v Speaker 0>my cluster.

00:08:38.050 --> 00:08:41.170
<v Speaker 0>This is this generic Kube Prometheus install.

00:08:41.490 --> 00:08:44.770
<v Speaker 0>However, to the receivers list, I've added one

00:08:44.770 --> 00:08:45.330
<v Speaker 0>more.

00:08:46.450 --> 00:08:48.050
<v Speaker 0>So all I need to do to get

00:08:48.050 --> 00:08:50.130
<v Speaker 0>this into the alert manager in my cluster

00:08:51.195 --> 00:08:53.355
<v Speaker 0>is first secure it.

00:08:53.915 --> 00:08:56.795
<v Speaker 0>And by secure, I mean, 64 encode.

00:08:58.235 --> 00:08:59.595
<v Speaker 0>So let's cat

00:08:59.995 --> 00:09:01.835
<v Speaker 0>my alert manager configuration,

00:09:02.075 --> 00:09:04.235
<v Speaker 0>pipe it through base 64,

00:09:04.900 --> 00:09:07.780
<v Speaker 0>and copy it in to my buffer.

00:09:08.980 --> 00:09:11.140
<v Speaker 0>From here, I can edit the secret in

00:09:11.140 --> 00:09:12.180
<v Speaker 0>my monitoring

00:09:12.340 --> 00:09:13.460
<v Speaker 0>namespace

00:09:17.235 --> 00:09:19.315
<v Speaker 0>called alert manager main.

00:09:20.435 --> 00:09:22.515
<v Speaker 0>I can use my VIM shortcuts to say

00:09:22.515 --> 00:09:23.795
<v Speaker 0>I want to change to the end of

00:09:23.795 --> 00:09:24.515
<v Speaker 0>the line

00:09:28.355 --> 00:09:30.915
<v Speaker 0>and drop in our new base 64 encoded

00:09:30.915 --> 00:09:32.355
<v Speaker 0>config map

00:09:32.940 --> 00:09:33.980
<v Speaker 0>and save.

00:09:36.700 --> 00:09:39.180
<v Speaker 0>We can now pull the pods

00:09:40.220 --> 00:09:41.980
<v Speaker 0>from the monitor namespace

00:09:45.675 --> 00:09:48.795
<v Speaker 0>and delete all the alert manager pods forcing

00:09:48.795 --> 00:09:50.955
<v Speaker 0>the configuration to be reloaded.

00:09:56.155 --> 00:09:56.715
<v Speaker 0>Like so.

00:10:02.470 --> 00:10:04.790
<v Speaker 0>Next, we run a git and we'll see

00:10:04.790 --> 00:10:06.950
<v Speaker 0>that our alert managers are coming up quite

00:10:06.950 --> 00:10:07.750
<v Speaker 0>nicely.

00:10:08.070 --> 00:10:09.670
<v Speaker 0>Now we can go to the alert manager

00:10:09.670 --> 00:10:11.910
<v Speaker 0>UI by port forwarding to the service on

00:10:11.910 --> 00:10:13.635
<v Speaker 0>port nine zero nine three. And if we

00:10:13.635 --> 00:10:14.995
<v Speaker 0>go to status,

00:10:15.555 --> 00:10:17.155
<v Speaker 0>scroll all the way down to the bottom,

00:10:17.155 --> 00:10:20.115
<v Speaker 0>we'll see our Komodor webhook receiver configured.

00:10:21.955 --> 00:10:23.635
<v Speaker 0>So now we're gonna make one more change

00:10:23.635 --> 00:10:25.315
<v Speaker 0>to the alert manager config

00:10:25.550 --> 00:10:27.389
<v Speaker 0>to tell it to start written some of

00:10:27.389 --> 00:10:29.070
<v Speaker 0>our alerts to Komodor.

00:10:31.870 --> 00:10:33.310
<v Speaker 0>And we're going to add

00:10:33.629 --> 00:10:34.509
<v Speaker 0>matters

00:10:37.470 --> 00:10:38.509
<v Speaker 0>receiver

00:10:40.670 --> 00:10:41.230
<v Speaker 0>Komodor.

00:10:42.454 --> 00:10:45.654
<v Speaker 0>This should send all alerts to Komodor

00:10:46.535 --> 00:10:47.334
<v Speaker 0>like so.

00:10:49.654 --> 00:10:52.774
<v Speaker 0>So we rotate the alert manager pods one

00:10:52.774 --> 00:10:53.255
<v Speaker 0>more time.

00:10:54.500 --> 00:10:56.340
<v Speaker 0>So now if we go to status and

00:10:56.340 --> 00:10:58.180
<v Speaker 0>scroll down, we'll see

00:10:58.500 --> 00:11:00.500
<v Speaker 0>the Komodor root receiver

00:11:00.820 --> 00:11:02.420
<v Speaker 0>and our webhook configuration.

00:11:02.580 --> 00:11:04.420
<v Speaker 0>That's all it takes to start sending the

00:11:04.420 --> 00:11:06.660
<v Speaker 0>alert manager letters to your Komodor instance.

00:11:06.900 --> 00:11:09.140
<v Speaker 0>So let's pop back over to Komodor.

00:11:10.514 --> 00:11:12.995
<v Speaker 0>Let's just get this reload for good measure.

00:11:15.795 --> 00:11:18.595
<v Speaker 0>And it would appear that everything cell looks

00:11:18.595 --> 00:11:19.395
<v Speaker 0>green,

00:11:19.475 --> 00:11:20.915
<v Speaker 0>which is awesome.

00:11:20.995 --> 00:11:21.714
<v Speaker 0>However,

00:11:22.035 --> 00:11:23.795
<v Speaker 0>let's pop over to events.

00:11:26.520 --> 00:11:29.320
<v Speaker 0>So already, we can see the top issue

00:11:29.320 --> 00:11:31.160
<v Speaker 0>is from alert manager.

00:11:32.280 --> 00:11:35.400
<v Speaker 0>A cube scheduler has disappeared from the Prometheus

00:11:35.400 --> 00:11:38.040
<v Speaker 0>target discovery. This alert is still firing,

00:11:40.065 --> 00:11:42.385
<v Speaker 0>and we can see the summary,

00:11:42.465 --> 00:11:43.345
<v Speaker 0>severity,

00:11:43.585 --> 00:11:44.465
<v Speaker 0>alert name,

00:11:44.705 --> 00:11:47.265
<v Speaker 0>and a description and runbook URL.

00:11:47.985 --> 00:11:51.105
<v Speaker 0>Now because my Prometheus is not exposed on

00:11:51.105 --> 00:11:53.105
<v Speaker 0>the public Internet, I'm going to right click

00:11:53.105 --> 00:11:55.530
<v Speaker 0>and copy this address instead of clicking the

00:11:55.530 --> 00:11:56.490
<v Speaker 0>link directly.

00:11:57.450 --> 00:11:59.530
<v Speaker 0>From here, I can paste it in and

00:11:59.530 --> 00:12:02.490
<v Speaker 0>just change the service name to be localhost.

00:12:07.415 --> 00:12:09.895
<v Speaker 0>Now we have the Prometheus dashboard and the

00:12:09.895 --> 00:12:12.215
<v Speaker 0>query that is triggering the alert.

00:12:12.695 --> 00:12:14.855
<v Speaker 0>Now quickly before we finish, I wanna pop

00:12:14.855 --> 00:12:16.055
<v Speaker 0>over to Grafana.

00:12:17.415 --> 00:12:20.215
<v Speaker 0>Could Prometheus configures Grafana for us as well?

00:12:20.589 --> 00:12:22.350
<v Speaker 0>And in fact, if we go to Grafana

00:12:22.350 --> 00:12:24.670
<v Speaker 0>alerting, we'll see that we have seven filing,

00:12:24.670 --> 00:12:26.910
<v Speaker 0>two pending, and everything else is normal.

00:12:27.710 --> 00:12:29.550
<v Speaker 0>Now these are pretty much the same alerts

00:12:29.550 --> 00:12:32.830
<v Speaker 0>from our alert month alert manager instance. So

00:12:32.830 --> 00:12:34.750
<v Speaker 0>I'm gonna configure Grafana

00:12:35.205 --> 00:12:36.565
<v Speaker 0>to speak to Komodor.

00:12:37.125 --> 00:12:38.965
<v Speaker 0>We can click on the bell and go

00:12:38.965 --> 00:12:40.245
<v Speaker 0>to contact points

00:12:41.205 --> 00:12:42.965
<v Speaker 0>where we can create a new one.

00:12:44.005 --> 00:12:46.245
<v Speaker 0>I'll call this Komodor.

00:12:46.965 --> 00:12:49.605
<v Speaker 0>And this will be a webhook integration.

00:12:51.680 --> 00:12:53.280
<v Speaker 0>We can drop the URL

00:12:53.680 --> 00:12:54.960
<v Speaker 0>and click save.

00:12:56.240 --> 00:12:58.480
<v Speaker 0>Next, we go back to the bell

00:12:59.280 --> 00:13:01.280
<v Speaker 0>and see notification policies.

00:13:02.560 --> 00:13:04.720
<v Speaker 0>And I'm gonna modify the root policy.

00:13:06.045 --> 00:13:08.125
<v Speaker 0>I'm gonna set the default contact point to

00:13:08.125 --> 00:13:09.085
<v Speaker 0>be Komodor

00:13:09.165 --> 00:13:10.365
<v Speaker 0>and hit save.

00:13:11.085 --> 00:13:13.325
<v Speaker 0>Of course, if you're familiar with Grafana, you

00:13:13.325 --> 00:13:16.125
<v Speaker 0>can set specific policies based on labels

00:13:16.925 --> 00:13:18.445
<v Speaker 0>to match your own requirements.

00:13:19.920 --> 00:13:21.920
<v Speaker 0>And it's as easy as that.

00:13:24.160 --> 00:13:25.759
<v Speaker 0>Integrating Sentry,

00:13:25.759 --> 00:13:26.639
<v Speaker 0>Grafana,

00:13:26.959 --> 00:13:30.079
<v Speaker 0>and Prometheus with Alert Manager with Komodor

00:13:30.720 --> 00:13:32.000
<v Speaker 0>brings you unprecedented

00:13:32.000 --> 00:13:35.235
<v Speaker 0>context when debugging, when things go wrong.

00:13:36.514 --> 00:13:38.274
<v Speaker 0>So I hope this guide was useful to

00:13:38.274 --> 00:13:40.915
<v Speaker 0>you. There's one more part still to come

00:13:41.394 --> 00:13:43.315
<v Speaker 0>where we'll be taking a look at automating

00:13:43.315 --> 00:13:45.795
<v Speaker 0>the deploy of Komodor and vCluster.

00:13:46.195 --> 00:13:47.875
<v Speaker 0>I'll see you then. Have a great day.
