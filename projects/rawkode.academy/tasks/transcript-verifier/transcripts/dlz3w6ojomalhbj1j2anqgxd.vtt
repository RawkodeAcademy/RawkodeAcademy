WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: a5a128bf-2d5a-4707-9bd4-dd15b7790f8c
Created: 2025-04-29T21:36:53.765Z
Duration: 4849.9907
Channels: 1

00:01:30.245 --> 00:01:33.525
<v Speaker 0>Hello and welcome to today's episode. This is

00:01:33.525 --> 00:01:35.685
<v Speaker 0>Rawkode live. I'm your host Rawkode.

00:01:35.685 --> 00:01:37.285
<v Speaker 0>Today, we're gonna be taking a look at

00:01:37.285 --> 00:01:38.165
<v Speaker 0>Falco,

00:01:38.165 --> 00:01:40.405
<v Speaker 0>a security run time for Kubernetes with the

00:01:40.405 --> 00:01:41.765
<v Speaker 0>magic of EBPF.

00:01:42.329 --> 00:01:43.689
<v Speaker 0>I don't really know what that means, but

00:01:43.689 --> 00:01:46.090
<v Speaker 0>fortunately I have two wonderful guests who do.

00:01:46.570 --> 00:01:49.689
<v Speaker 0>Leo DiDonato and Lorenzo Fattana, two former colleagues

00:01:49.689 --> 00:01:51.850
<v Speaker 0>of mine at my days from influx data,

00:01:51.850 --> 00:01:54.969
<v Speaker 0>now working as engineers at Sysdig and maintainers

00:01:54.969 --> 00:01:56.009
<v Speaker 0>of the Falco project.

00:01:56.795 --> 00:01:58.635
<v Speaker 0>Before we bring them in, I wanna thank

00:01:58.635 --> 00:02:01.515
<v Speaker 0>my employer, Equinix Medal. They provide the time

00:02:01.515 --> 00:02:03.115
<v Speaker 0>for me to work on the show and

00:02:03.115 --> 00:02:05.355
<v Speaker 0>produce content to hopefully educate and help us

00:02:05.355 --> 00:02:08.475
<v Speaker 0>all learn this very vast and complicated cloud

00:02:08.475 --> 00:02:09.275
<v Speaker 0>native landscape.

00:02:09.879 --> 00:02:12.120
<v Speaker 0>If you want to try Equinix Metal yourself,

00:02:12.120 --> 00:02:14.280
<v Speaker 0>you can use the code Rawkode live. This

00:02:14.280 --> 00:02:16.760
<v Speaker 0>will get you $50 of compute time.

00:02:17.080 --> 00:02:18.680
<v Speaker 0>That can get you roughly

00:02:18.840 --> 00:02:21.959
<v Speaker 0>a hundred hours of a sixty six ninety

00:02:21.959 --> 00:02:23.319
<v Speaker 0>six giga ram machine

00:02:23.575 --> 00:02:25.735
<v Speaker 0>with 28 cores or you can splurge it

00:02:25.735 --> 00:02:28.215
<v Speaker 0>all in five hours with hundreds of gigs

00:02:28.215 --> 00:02:30.215
<v Speaker 0>of ram, 400 gig of ram and three

00:02:30.215 --> 00:02:32.454
<v Speaker 0>terabytes of disk. So you know, take that

00:02:32.454 --> 00:02:34.775
<v Speaker 0>take that $50 and use it wisely or

00:02:34.775 --> 00:02:36.135
<v Speaker 0>unwisely. That is up to you.

00:02:37.040 --> 00:02:38.879
<v Speaker 0>Now, I am going to bring in my

00:02:38.879 --> 00:02:40.560
<v Speaker 0>wonderful guest for today.

00:02:41.440 --> 00:02:41.920
<v Speaker 0>Lorenzo. Hey.

00:02:44.239 --> 00:02:46.480
<v Speaker 1>Nice to see you. There we go. How

00:02:46.480 --> 00:02:47.760
<v Speaker 0>are you both doing?

00:02:49.120 --> 00:02:50.560
<v Speaker 2>So far so good.

00:02:51.120 --> 00:02:51.920
<v Speaker 2>We are

00:02:53.034 --> 00:02:54.475
<v Speaker 2>really into some

00:02:55.355 --> 00:02:57.674
<v Speaker 2>new things for Falco at the moment, but

00:02:57.674 --> 00:02:59.115
<v Speaker 2>everything's fine.

00:02:59.674 --> 00:03:02.075
<v Speaker 2>Aside from the fact that everyone is buying

00:03:02.075 --> 00:03:03.595
<v Speaker 2>into our houses

00:03:03.915 --> 00:03:05.355
<v Speaker 2>here in Italy again

00:03:05.594 --> 00:03:07.435
<v Speaker 2>as everyone else in the in the world.

00:03:09.260 --> 00:03:11.260
<v Speaker 0>Alright. Well, why don't you I enjoyed your

00:03:11.260 --> 00:03:12.220
<v Speaker 1>music, honestly.

00:03:12.540 --> 00:03:14.860
<v Speaker 0>Yeah. Yeah. Yeah. Like, I don't know. I

00:03:14.860 --> 00:03:16.460
<v Speaker 0>keep meaning to make a joke about it.

00:03:16.460 --> 00:03:18.300
<v Speaker 0>Like, the intro and the outro are quite

00:03:18.860 --> 00:03:19.980
<v Speaker 0>quite energetic,

00:03:19.980 --> 00:03:21.420
<v Speaker 0>and then there's me, which is, like, way

00:03:21.420 --> 00:03:23.315
<v Speaker 0>down here in the energy kind of space.

00:03:23.315 --> 00:03:25.875
<v Speaker 0>So the better polarity, but, you know, I

00:03:25.875 --> 00:03:28.035
<v Speaker 0>I like it. It's good. So why don't

00:03:28.035 --> 00:03:29.875
<v Speaker 0>we start with Lorenzo? Do you wanna just

00:03:29.875 --> 00:03:31.155
<v Speaker 0>introduce yourself?

00:03:31.395 --> 00:03:32.915
<v Speaker 0>And then we'll move over to Leo, and

00:03:32.915 --> 00:03:34.195
<v Speaker 0>then we'll talk about Falco.

00:03:34.755 --> 00:03:36.915
<v Speaker 1>Yeah. Well, I'm Lorenzo Fontana.

00:03:37.880 --> 00:03:40.520
<v Speaker 1>My nickname is unpronounceable, so I'm not going

00:03:40.520 --> 00:03:41.560
<v Speaker 1>to pronounce it.

00:03:41.880 --> 00:03:44.440
<v Speaker 1>Just read it. And I'm

00:03:44.440 --> 00:03:46.040
<v Speaker 1>working at Sysdig,

00:03:46.120 --> 00:03:48.040
<v Speaker 1>and Sysdig is sponsorship.

00:03:48.600 --> 00:03:50.520
<v Speaker 1>Mine and Rawkode works on Falco

00:03:51.095 --> 00:03:53.175
<v Speaker 1>to be the maintainers of Falco and to,

00:03:53.175 --> 00:03:55.175
<v Speaker 1>you know, help Falco becoming

00:03:55.334 --> 00:03:58.215
<v Speaker 1>some more, you know, stable and adding features.

00:03:58.375 --> 00:04:00.295
<v Speaker 1>And also, you know, with, hopefully,

00:04:00.775 --> 00:04:03.975
<v Speaker 1>having Git graduated in CNCF after reaching the

00:04:03.975 --> 00:04:04.855
<v Speaker 1>incubation last year.

00:04:05.630 --> 00:04:07.630
<v Speaker 1>I'm also the author of the Hooks of

00:04:07.630 --> 00:04:10.830
<v Speaker 1>SurveyMedi with with David Calavera for Riley,

00:04:10.830 --> 00:04:12.510
<v Speaker 1>if you want to check out that book.

00:04:12.910 --> 00:04:15.710
<v Speaker 1>And I'm doing a lot of work

00:04:15.710 --> 00:04:16.670
<v Speaker 1>recently,

00:04:17.230 --> 00:04:18.670
<v Speaker 1>with my friend Leo

00:04:18.830 --> 00:04:20.190
<v Speaker 1>and with others,

00:04:20.670 --> 00:04:21.310
<v Speaker 1>and that's it.

00:04:23.255 --> 00:04:24.295
<v Speaker 1>Leo, to you.

00:04:25.095 --> 00:04:26.535
<v Speaker 2>Okay. So it's

00:04:27.175 --> 00:04:29.175
<v Speaker 2>my name is Leonardo DiDonato.

00:04:29.574 --> 00:04:31.574
<v Speaker 2>As Lorenzo said, I'm an open source an

00:04:31.574 --> 00:04:33.495
<v Speaker 2>open source software engineer at Sysdig,

00:04:34.060 --> 00:04:37.820
<v Speaker 2>where, basically, our daily jobs is to code

00:04:37.820 --> 00:04:40.620
<v Speaker 2>Falco, maintain it, and all of it. So,

00:04:40.620 --> 00:04:43.020
<v Speaker 2>yes, we spend all the day on GitHub,

00:04:43.020 --> 00:04:45.419
<v Speaker 2>which is something that we love. And

00:04:46.315 --> 00:04:49.275
<v Speaker 2>basic basically, you can find me in the

00:04:49.275 --> 00:04:51.675
<v Speaker 2>web verse with nickname that I put here,

00:04:51.675 --> 00:04:54.555
<v Speaker 2>Ledido, over Twitter, over GitHub. My

00:04:55.035 --> 00:04:57.995
<v Speaker 2>daily duties are very similar to Lorenzo's

00:04:57.995 --> 00:05:00.555
<v Speaker 2>one. So, basically, we're we're in charge of

00:05:02.290 --> 00:05:03.650
<v Speaker 2>coding Falco,

00:05:03.730 --> 00:05:05.970
<v Speaker 2>which is a c plus plus project,

00:05:05.970 --> 00:05:09.410
<v Speaker 2>but also to maintain other parts of Falco

00:05:09.410 --> 00:05:11.410
<v Speaker 2>that that makes possible

00:05:12.450 --> 00:05:14.850
<v Speaker 2>to detect security threats at runtime,

00:05:15.090 --> 00:05:15.810
<v Speaker 2>namely

00:05:16.210 --> 00:05:16.850
<v Speaker 2>Libsys,

00:05:17.014 --> 00:05:17.655
<v Speaker 2>and

00:05:18.215 --> 00:05:20.615
<v Speaker 2>the drivers of Falco that at at the

00:05:20.615 --> 00:05:23.495
<v Speaker 2>moment, have, like, three drivers, a kernel module

00:05:23.495 --> 00:05:26.535
<v Speaker 2>and a BPF probe one and user space

00:05:26.535 --> 00:05:28.775
<v Speaker 2>one based on Big Trace,

00:05:29.014 --> 00:05:30.455
<v Speaker 2>Ackery, Wizardry.

00:05:31.480 --> 00:05:32.520
<v Speaker 1>Great stuff.

00:05:33.800 --> 00:05:35.400
<v Speaker 0>Yeah. I mean, I understand some of the

00:05:35.400 --> 00:05:37.560
<v Speaker 0>words. So, I mean, we're making progress here.

00:05:37.800 --> 00:05:39.720
<v Speaker 0>Can we We we don't even understand them

00:05:39.720 --> 00:05:40.360
<v Speaker 1>words.

00:05:41.320 --> 00:05:43.080
<v Speaker 0>Yeah. I mean, you said c plus plus,

00:05:43.080 --> 00:05:44.440
<v Speaker 0>and I was like, oh, dear. Like,

00:05:45.345 --> 00:05:47.025
<v Speaker 0>that takes me way back. I haven't written

00:05:47.025 --> 00:05:48.225
<v Speaker 0>a line of c plus plus in a

00:05:48.225 --> 00:05:49.825
<v Speaker 0>long time. Although I do keep up with

00:05:49.825 --> 00:05:51.425
<v Speaker 0>the changes to the language and it's looking

00:05:51.425 --> 00:05:53.025
<v Speaker 0>really more impressive these days with some of

00:05:53.025 --> 00:05:54.225
<v Speaker 0>the newer changes. So

00:05:54.705 --> 00:05:56.865
<v Speaker 0>Yeah. Let's talk about Falco then.

00:05:57.440 --> 00:05:59.520
<v Speaker 0>What are the primary use cases for Falco?

00:05:59.520 --> 00:06:01.840
<v Speaker 0>Why should people have Falco running on their

00:06:01.840 --> 00:06:02.480
<v Speaker 0>cluster?

00:06:05.280 --> 00:06:06.080
<v Speaker 1>Go.

00:06:07.280 --> 00:06:08.160
<v Speaker 2>You wanna go or

00:06:09.040 --> 00:06:09.760
<v Speaker 1>I I go.

00:06:10.395 --> 00:06:11.675
<v Speaker 1>You can complement.

00:06:11.835 --> 00:06:14.075
<v Speaker 1>Leo keeps me sane usually. This is one

00:06:14.075 --> 00:06:16.395
<v Speaker 1>of also of Leo's duty, I mean, keeping

00:06:16.395 --> 00:06:18.315
<v Speaker 1>me alive. So

00:06:19.275 --> 00:06:22.715
<v Speaker 1>Falco is, you know, kind of simple,

00:06:22.955 --> 00:06:24.875
<v Speaker 1>but also, you know, somewhat complicated.

00:06:26.330 --> 00:06:29.850
<v Speaker 1>Basically, you use it to be alerted

00:06:30.650 --> 00:06:32.890
<v Speaker 1>when something bad happens in your cluster. This

00:06:32.890 --> 00:06:34.490
<v Speaker 1>is a very basic explanation,

00:06:35.050 --> 00:06:37.930
<v Speaker 1>very high level explanation. So let's say someone

00:06:37.930 --> 00:06:39.850
<v Speaker 1>spawns a shell or someone,

00:06:40.495 --> 00:06:43.535
<v Speaker 1>know, creates a privileged pod or someone creates

00:06:43.535 --> 00:06:46.175
<v Speaker 1>a config map in Kubernetes with, you know,

00:06:46.175 --> 00:06:48.655
<v Speaker 1>some, credential that should not be there, like,

00:06:48.655 --> 00:06:50.414
<v Speaker 1>you know, AWS credential or,

00:06:50.655 --> 00:06:52.815
<v Speaker 1>Equinix credential, these kind of things.

00:06:53.535 --> 00:06:53.935
<v Speaker 1>Someone

00:06:55.810 --> 00:06:57.010
<v Speaker 1>she modified,

00:06:57.010 --> 00:06:59.570
<v Speaker 1>they should not be she mod, or someone

00:06:59.650 --> 00:07:02.290
<v Speaker 1>gets root access to something, or someone manages

00:07:02.290 --> 00:07:02.850
<v Speaker 1>to,

00:07:03.170 --> 00:07:05.490
<v Speaker 1>you know, get a root shell somewhere where

00:07:05.490 --> 00:07:07.170
<v Speaker 1>it should not be allowed to.

00:07:07.730 --> 00:07:10.210
<v Speaker 1>This is all done via

00:07:10.655 --> 00:07:12.575
<v Speaker 1>a thing that we call Falco rules,

00:07:12.895 --> 00:07:15.535
<v Speaker 1>and they are just expressed in YAML

00:07:15.695 --> 00:07:17.775
<v Speaker 1>because, you know, everything is YAML.

00:07:18.015 --> 00:07:18.895
<v Speaker 1>And

00:07:19.535 --> 00:07:21.375
<v Speaker 1>so you just write some YAML,

00:07:21.455 --> 00:07:23.455
<v Speaker 1>and out of that YAML, you get some

00:07:23.455 --> 00:07:25.295
<v Speaker 1>nice alert messages

00:07:25.530 --> 00:07:29.050
<v Speaker 1>for when something happens. The value of Falco

00:07:29.290 --> 00:07:31.130
<v Speaker 1>is not just, you know, the code that,

00:07:31.130 --> 00:07:32.810
<v Speaker 1>you know, processes the YAML and gives you

00:07:32.810 --> 00:07:35.050
<v Speaker 1>the alerts, but the community also puts a

00:07:35.050 --> 00:07:37.050
<v Speaker 1>lot of effort into

00:07:37.290 --> 00:07:40.010
<v Speaker 1>creating a same default rule set

00:07:40.375 --> 00:07:42.695
<v Speaker 1>for, you know, the vast majority of the

00:07:42.695 --> 00:07:44.375
<v Speaker 1>people out there. So you can create your

00:07:44.375 --> 00:07:46.775
<v Speaker 1>own rules. You can make rules, you know,

00:07:46.775 --> 00:07:48.855
<v Speaker 1>adapt to your organization and your needs.

00:07:49.095 --> 00:07:51.335
<v Speaker 1>But by default, we ship a default rule

00:07:51.335 --> 00:07:53.415
<v Speaker 1>set, which should be, you know, good enough

00:07:53.415 --> 00:07:54.775
<v Speaker 1>for most of the use cases.

00:07:56.430 --> 00:07:57.870
<v Speaker 1>That's what I had to do.

00:07:58.510 --> 00:07:59.950
<v Speaker 2>Can I add a bit?

00:08:00.190 --> 00:08:02.750
<v Speaker 0>Yeah. Please. Please, sir. Basically,

00:08:02.990 --> 00:08:05.550
<v Speaker 2>just like an introduction, more more generic.

00:08:07.645 --> 00:08:10.205
<v Speaker 2>If we look a way to better position

00:08:10.205 --> 00:08:12.284
<v Speaker 2>Falco in the security landscape I mean, if

00:08:12.284 --> 00:08:13.965
<v Speaker 2>we look at the security landscape,

00:08:14.365 --> 00:08:17.725
<v Speaker 2>we could simplify it into, basically,

00:08:17.965 --> 00:08:20.525
<v Speaker 2>two parts, prevention and detection.

00:08:20.960 --> 00:08:23.440
<v Speaker 2>Both of the parts have one thing in

00:08:23.440 --> 00:08:25.920
<v Speaker 2>common, which is policies, which is another cool

00:08:25.920 --> 00:08:28.880
<v Speaker 2>name that we could give to Falco rules.

00:08:29.280 --> 00:08:32.159
<v Speaker 2>And the difference is that while

00:08:32.160 --> 00:08:33.280
<v Speaker 2>prevention

00:08:33.280 --> 00:08:34.000
<v Speaker 2>tools

00:08:34.814 --> 00:08:37.375
<v Speaker 2>use those policies to change the behavior

00:08:38.095 --> 00:08:41.294
<v Speaker 2>of processes by preventing Cisco's to happen or

00:08:41.294 --> 00:08:44.334
<v Speaker 2>stopping processing to to execute and things like

00:08:44.334 --> 00:08:44.815
<v Speaker 2>that.

00:08:45.295 --> 00:08:47.214
<v Speaker 2>On the other side on the other end,

00:08:47.214 --> 00:08:50.350
<v Speaker 2>the policies detection tools use policies to monitor

00:08:50.350 --> 00:08:52.830
<v Speaker 2>the behavior and notify a a user

00:08:52.990 --> 00:08:53.630
<v Speaker 2>when

00:08:53.950 --> 00:08:56.270
<v Speaker 2>the behavior of a process steps outside of

00:08:56.270 --> 00:08:57.150
<v Speaker 2>the policy,

00:08:57.710 --> 00:08:59.550
<v Speaker 2>which means that Falco,

00:08:59.790 --> 00:09:02.910
<v Speaker 2>differently from other tools like Secom, Secom BPF,

00:09:03.894 --> 00:09:07.334
<v Speaker 2>app app armor is poses the Falco position

00:09:07.334 --> 00:09:09.975
<v Speaker 2>is on the detection side of the security

00:09:09.975 --> 00:09:10.935
<v Speaker 2>landscape,

00:09:11.334 --> 00:09:13.575
<v Speaker 2>which does not mean that you should only

00:09:13.575 --> 00:09:16.135
<v Speaker 2>use Falco or you should only use prevention.

00:09:16.750 --> 00:09:19.230
<v Speaker 2>Basically, the best approaches in the security is

00:09:19.230 --> 00:09:21.470
<v Speaker 2>to use a debt defense in that, which

00:09:21.470 --> 00:09:25.550
<v Speaker 2>means stacking different tools with different strategies, some

00:09:25.550 --> 00:09:28.670
<v Speaker 2>for prevention and some for detection together to

00:09:28.670 --> 00:09:29.710
<v Speaker 2>achieve

00:09:30.185 --> 00:09:31.144
<v Speaker 2>satisfactory

00:09:31.865 --> 00:09:33.305
<v Speaker 2>level of security,

00:09:33.545 --> 00:09:35.785
<v Speaker 2>which, by the way, will not all will

00:09:35.785 --> 00:09:38.105
<v Speaker 2>not be perfect in any case.

00:09:38.505 --> 00:09:40.745
<v Speaker 2>So this is where we can position Falco

00:09:40.745 --> 00:09:42.745
<v Speaker 2>to make clear maybe to the to the

00:09:42.745 --> 00:09:43.385
<v Speaker 2>audience

00:09:43.720 --> 00:09:47.000
<v Speaker 2>that different from other tools like AppArmor,

00:09:47.080 --> 00:09:48.760
<v Speaker 2>Secop, and things like that,

00:09:49.320 --> 00:09:50.280
<v Speaker 2>it positions

00:09:50.360 --> 00:09:51.800
<v Speaker 2>on the detection side,

00:09:52.360 --> 00:09:55.080
<v Speaker 2>especially for cloud native environment like the Kubernetes

00:09:55.080 --> 00:09:55.880
<v Speaker 2>based ones,

00:09:56.315 --> 00:09:58.395
<v Speaker 2>which is a a field that's

00:09:58.555 --> 00:10:00.635
<v Speaker 2>where security, I mean, should

00:10:00.875 --> 00:10:03.595
<v Speaker 2>yeah. Should be solved yet. There there's only

00:10:03.595 --> 00:10:04.875
<v Speaker 2>Falco and nothing

00:10:05.595 --> 00:10:07.515
<v Speaker 2>more to as far as I know.

00:10:08.235 --> 00:10:10.555
<v Speaker 0>Alright. Yeah. I mean We call it container

00:10:10.555 --> 00:10:11.355
<v Speaker 1>runtime security.

00:10:12.160 --> 00:10:14.320
<v Speaker 0>Yep. Yeah. That makes sense to me then.

00:10:14.320 --> 00:10:15.840
<v Speaker 0>Like, I I like the, you know, defense

00:10:15.840 --> 00:10:17.840
<v Speaker 0>and death. We should be using our Palmer

00:10:17.840 --> 00:10:19.840
<v Speaker 0>sec comp, all these things to restrict what

00:10:19.840 --> 00:10:22.560
<v Speaker 0>our containers can do. But, inevitably, things can

00:10:22.560 --> 00:10:24.400
<v Speaker 0>and will go wrong, and Falco is what

00:10:24.400 --> 00:10:26.640
<v Speaker 0>we use inside of our clusters or or,

00:10:26.640 --> 00:10:28.055
<v Speaker 0>I guess, it doesn't doesn't need to be

00:10:28.055 --> 00:10:29.255
<v Speaker 0>in a cluster. Can it just run on

00:10:29.255 --> 00:10:31.735
<v Speaker 0>on Linux? Like Yeah. It's going to you

00:10:31.735 --> 00:10:33.255
<v Speaker 2>can also run on

00:10:34.135 --> 00:10:37.015
<v Speaker 2>theoretically, that theoretically, that's the preferred way to

00:10:37.015 --> 00:10:39.575
<v Speaker 2>run Falco on the host. The only cluster.

00:10:39.575 --> 00:10:41.030
<v Speaker 0>So we are on Falco on our host.

00:10:41.030 --> 00:10:42.950
<v Speaker 0>It's gonna use e b p f and

00:10:42.950 --> 00:10:44.950
<v Speaker 0>some other drivers. It's gonna alert to us

00:10:44.950 --> 00:10:46.710
<v Speaker 0>when things happen that we want to be

00:10:46.710 --> 00:10:48.710
<v Speaker 0>aware of. And then Yeah. From that, we

00:10:48.710 --> 00:10:50.630
<v Speaker 0>can then react to that. We can then

00:10:50.630 --> 00:10:52.630
<v Speaker 0>decide how we want to handle that information.

00:10:52.630 --> 00:10:53.590
<v Speaker 0>Sometimes it may just be,

00:10:54.315 --> 00:10:55.595
<v Speaker 0>notifications,

00:10:55.595 --> 00:10:56.315
<v Speaker 0>like someone

00:10:57.355 --> 00:10:59.035
<v Speaker 0>pseudo or whatever. I don't know what the

00:10:59.035 --> 00:11:01.035
<v Speaker 0>capabilities are, but we'll look into that shortly.

00:11:01.035 --> 00:11:02.795
<v Speaker 0>But I get it. That makes sense.

00:11:03.915 --> 00:11:05.595
<v Speaker 0>Alright. Let's tackle. We got a couple of

00:11:05.595 --> 00:11:07.515
<v Speaker 0>comments, so I'll just run through those quickly.

00:11:07.995 --> 00:11:08.715
<v Speaker 1>Oh, there's someone.

00:11:10.370 --> 00:11:12.290
<v Speaker 0>So Robin says, you've been enjoying the streams.

00:11:12.290 --> 00:11:13.810
<v Speaker 0>Thank you very much, Robin. They're gonna keep

00:11:13.810 --> 00:11:15.250
<v Speaker 0>coming because I love to sound in my

00:11:15.250 --> 00:11:15.970
<v Speaker 0>own voice.

00:11:16.610 --> 00:11:18.850
<v Speaker 0>Alison is saying, looking forward to learn more

00:11:18.850 --> 00:11:20.210
<v Speaker 0>about Falco. Me too.

00:11:20.610 --> 00:11:22.850
<v Speaker 0>Definitely one of those things that seems scary

00:11:22.850 --> 00:11:24.905
<v Speaker 0>and I'm hoping that you two are gonna

00:11:24.905 --> 00:11:26.585
<v Speaker 0>make this easy for me to understand.

00:11:27.145 --> 00:11:28.825
<v Speaker 0>And at Kakaran,

00:11:28.825 --> 00:11:31.305
<v Speaker 0>bloody YAML, I think we are all

00:11:32.345 --> 00:11:33.785
<v Speaker 0>we all have that same sentiment.

00:11:34.425 --> 00:11:36.745
<v Speaker 2>Yeah. We all have that sentiment, but I

00:11:36.745 --> 00:11:38.345
<v Speaker 2>still prefer YAML to

00:11:39.040 --> 00:11:42.000
<v Speaker 2>second policies. So I have a few And

00:11:42.000 --> 00:11:44.800
<v Speaker 1>also processing YAML in Go is, I think,

00:11:44.800 --> 00:11:46.720
<v Speaker 1>processing YAML in c plus plus, different

00:11:47.200 --> 00:11:49.120
<v Speaker 1>league. It's a whole new level.

00:11:51.135 --> 00:11:53.535
<v Speaker 0>I mean, as much as we rant about

00:11:53.535 --> 00:11:54.735
<v Speaker 0>YAML, I think we all do in the

00:11:54.735 --> 00:11:56.335
<v Speaker 0>cloud native space because there's so much of

00:11:56.335 --> 00:11:58.655
<v Speaker 0>it. It's really, I mean, besides the edge

00:11:58.655 --> 00:12:00.255
<v Speaker 0>cases, it's really easy for people to pick

00:12:00.255 --> 00:12:01.695
<v Speaker 0>up and learn like, you know, there are

00:12:01.695 --> 00:12:03.295
<v Speaker 0>a lot of benefits as well. We shouldn't

00:12:03.295 --> 00:12:05.055
<v Speaker 0>maybe be too quick to judge it. But

00:12:05.160 --> 00:12:06.040
<v Speaker 0>anyway,

00:12:06.920 --> 00:12:07.959
<v Speaker 0>let's get started.

00:12:08.199 --> 00:12:10.120
<v Speaker 0>This is gonna be interesting

00:12:10.759 --> 00:12:13.000
<v Speaker 0>because I had some homework to do upfront

00:12:13.240 --> 00:12:15.160
<v Speaker 0>and I'm hoping I've not messed that up.

00:12:15.160 --> 00:12:15.720
<v Speaker 0>So

00:12:16.360 --> 00:12:18.680
<v Speaker 0>if anyone wants to learn more about Falco

00:12:18.680 --> 00:12:19.639
<v Speaker 0>after today's session,

00:12:20.245 --> 00:12:21.764
<v Speaker 0>it is open source, you can go to

00:12:21.764 --> 00:12:25.125
<v Speaker 0>github.com/falcosecurity/falco.

00:12:25.845 --> 00:12:28.805
<v Speaker 0>Today's servers are provided by my employer Equinix

00:12:28.805 --> 00:12:30.404
<v Speaker 0>metal. I have spun up using the cluster

00:12:30.404 --> 00:12:33.279
<v Speaker 0>API, which is just amazing. My own Kubernetes

00:12:33.279 --> 00:12:34.000
<v Speaker 0>cluster,

00:12:34.399 --> 00:12:36.560
<v Speaker 0>and I have some backup resources here that

00:12:36.560 --> 00:12:37.920
<v Speaker 0>I think I'm gonna need when it comes

00:12:37.920 --> 00:12:39.440
<v Speaker 0>to doing some of the Falco stuff. That

00:12:39.440 --> 00:12:41.519
<v Speaker 0>was my homework that I failed to do.

00:12:41.759 --> 00:12:42.560
<v Speaker 0>Regardless,

00:12:43.120 --> 00:12:45.519
<v Speaker 0>we do have a running Kubernetes cluster, which

00:12:45.519 --> 00:12:46.399
<v Speaker 0>should still be running.

00:12:47.255 --> 00:12:49.415
<v Speaker 0>There's always that moment of fear. But yes,

00:12:49.415 --> 00:12:51.975
<v Speaker 0>we have a nine one nineteen two

00:12:52.295 --> 00:12:55.575
<v Speaker 0>Kubernetes cluster. We are running Ubuntu 20.

00:12:55.895 --> 00:12:58.135
<v Speaker 0>Now, there were some prerequisites from you both

00:12:58.135 --> 00:13:00.375
<v Speaker 0>regarding to what I needed in this cluster.

00:13:00.615 --> 00:13:03.330
<v Speaker 0>Can we maybe just discuss why we

00:13:03.730 --> 00:13:05.570
<v Speaker 0>why we're worried about the operating system version

00:13:05.570 --> 00:13:07.490
<v Speaker 0>being Ubuntu? Why we're worried about the Kubernetes

00:13:07.490 --> 00:13:09.490
<v Speaker 0>version? What are some of those prereqs?

00:13:12.370 --> 00:13:12.930
<v Speaker 1>So

00:13:13.730 --> 00:13:14.850
<v Speaker 1>very quickly,

00:13:15.570 --> 00:13:16.290
<v Speaker 1>Falco

00:13:16.764 --> 00:13:19.565
<v Speaker 1>is very tied to the kernel.

00:13:20.204 --> 00:13:20.845
<v Speaker 1>Right?

00:13:21.404 --> 00:13:21.964
<v Speaker 1>So

00:13:23.485 --> 00:13:26.204
<v Speaker 1>we are trying to make the Falco experience

00:13:26.204 --> 00:13:28.285
<v Speaker 1>very you know, to be very good on,

00:13:28.285 --> 00:13:30.125
<v Speaker 1>you know, most of the kernels,

00:13:30.524 --> 00:13:32.045
<v Speaker 1>most of the distributions.

00:13:33.170 --> 00:13:35.250
<v Speaker 1>It's very easy for us to be very

00:13:35.650 --> 00:13:37.970
<v Speaker 1>working very well on newer kernels

00:13:38.370 --> 00:13:39.170
<v Speaker 1>because

00:13:39.650 --> 00:13:41.410
<v Speaker 1>you have a couple of options to run

00:13:41.410 --> 00:13:43.490
<v Speaker 1>Falco. I mean, the, you know,

00:13:45.095 --> 00:13:47.095
<v Speaker 1>real options. We have, you know, the new

00:13:47.095 --> 00:13:48.935
<v Speaker 1>user space option which which is, you know,

00:13:48.935 --> 00:13:50.695
<v Speaker 1>still under heavy development,

00:13:51.095 --> 00:13:53.095
<v Speaker 1>which should be solving the problems that, you

00:13:53.095 --> 00:13:55.334
<v Speaker 1>know, I'm talking about. But the option that

00:13:55.334 --> 00:13:57.654
<v Speaker 1>you have are are essentially the kernel module

00:13:57.654 --> 00:14:00.690
<v Speaker 1>and the eBPF pro. Right? So the eBPF

00:14:00.690 --> 00:14:03.010
<v Speaker 1>program is solely on very new kernels, as

00:14:03.010 --> 00:14:04.770
<v Speaker 1>well on very new kernels.

00:14:05.089 --> 00:14:07.570
<v Speaker 1>And the kernel module runs from kernel, like,

00:14:07.570 --> 00:14:10.930
<v Speaker 1>two dot six to, you know, newer kernels.

00:14:11.410 --> 00:14:14.290
<v Speaker 1>This means that you have to compile

00:14:14.385 --> 00:14:17.105
<v Speaker 1>a kinda module or compile a BPF probe

00:14:17.105 --> 00:14:20.465
<v Speaker 1>because both, you know, rely on a stable,

00:14:21.425 --> 00:14:23.025
<v Speaker 1>API from the kernel.

00:14:23.265 --> 00:14:26.625
<v Speaker 1>So they cannot be compiled once run everywhere

00:14:26.625 --> 00:14:29.030
<v Speaker 1>yet. Right? So you just have to compile

00:14:29.030 --> 00:14:30.310
<v Speaker 1>for kind of where you are.

00:14:31.030 --> 00:14:32.230
<v Speaker 1>The Falco

00:14:32.230 --> 00:14:33.190
<v Speaker 1>community

00:14:33.510 --> 00:14:35.350
<v Speaker 1>tries to package a Falco in a way

00:14:35.350 --> 00:14:36.950
<v Speaker 1>that you you don't have to worry about

00:14:36.950 --> 00:14:38.150
<v Speaker 1>that. And

00:14:38.710 --> 00:14:41.110
<v Speaker 1>the way that we package that is, you

00:14:41.110 --> 00:14:44.825
<v Speaker 1>know, the usual RPM and dev based packages.

00:14:44.825 --> 00:14:46.745
<v Speaker 1>So if you install from those, it should

00:14:46.745 --> 00:14:49.305
<v Speaker 1>be installed smoothly, and you shall just should

00:14:49.305 --> 00:14:50.105
<v Speaker 1>just work.

00:14:50.665 --> 00:14:53.305
<v Speaker 1>If you install from a container,

00:14:53.305 --> 00:14:56.505
<v Speaker 1>like, QCTL run QCTL apply something

00:14:56.900 --> 00:14:59.140
<v Speaker 1>where, you know, a Falco container is running.

00:14:59.140 --> 00:15:01.540
<v Speaker 1>Like, you use your our own chart or

00:15:01.540 --> 00:15:03.860
<v Speaker 1>you use our YAML definitions.

00:15:04.260 --> 00:15:06.820
<v Speaker 1>It will use a Falco docker image, Falco

00:15:06.820 --> 00:15:07.860
<v Speaker 1>container image,

00:15:08.580 --> 00:15:09.460
<v Speaker 1>that will

00:15:09.975 --> 00:15:13.175
<v Speaker 1>need to figure out the kernel and compile

00:15:13.175 --> 00:15:15.335
<v Speaker 1>the kernel module, the BPF pro for you.

00:15:15.815 --> 00:15:17.095
<v Speaker 1>Right? Okay.

00:15:18.695 --> 00:15:19.975
<v Speaker 1>If it can't,

00:15:20.055 --> 00:15:22.535
<v Speaker 1>we have a web server where we ask

00:15:22.870 --> 00:15:23.830
<v Speaker 1>thousands

00:15:23.830 --> 00:15:26.310
<v Speaker 1>of compiled kernel module in VP of probes

00:15:26.310 --> 00:15:28.790
<v Speaker 1>for thousands of different kernel combinations.

00:15:29.830 --> 00:15:31.270
<v Speaker 1>So you are trying.

00:15:31.990 --> 00:15:34.710
<v Speaker 2>You can go to downdownload.falco.org

00:15:34.710 --> 00:15:36.950
<v Speaker 2>to to count all the the the page

00:15:36.950 --> 00:15:37.430
<v Speaker 2>drivers.

00:15:39.254 --> 00:15:39.975
<v Speaker 1>And

00:15:42.774 --> 00:15:44.694
<v Speaker 1>this is very I mean, just quick driver

00:15:44.694 --> 00:15:47.095
<v Speaker 1>and other should QA is the latest.

00:15:47.495 --> 00:15:49.815
<v Speaker 1>So this is very

00:15:51.030 --> 00:15:52.470
<v Speaker 1>this is very useful,

00:15:52.630 --> 00:15:53.190
<v Speaker 1>but

00:15:54.150 --> 00:15:55.750
<v Speaker 1>what happens is that

00:15:56.150 --> 00:15:59.430
<v Speaker 1>for common operating systems, we pay more attention

00:15:59.430 --> 00:16:01.430
<v Speaker 1>to it. Like, for Ubuntu 20,

00:16:01.670 --> 00:16:02.230
<v Speaker 1>for

00:16:02.630 --> 00:16:03.990
<v Speaker 1>US Fedoras,

00:16:03.990 --> 00:16:04.470
<v Speaker 1>for

00:16:04.795 --> 00:16:05.675
<v Speaker 1>Centos,

00:16:05.755 --> 00:16:07.435
<v Speaker 1>for very widely used of our thesis. We

00:16:07.435 --> 00:16:09.275
<v Speaker 1>did a survey, and it turned out that,

00:16:09.275 --> 00:16:11.675
<v Speaker 1>you know, people use Ubuntu, Fedora, Centos

00:16:11.915 --> 00:16:14.715
<v Speaker 1>Amazon Linux. Amazon Linux. A lot of Amazon

00:16:14.715 --> 00:16:17.115
<v Speaker 1>Linux is probably our, you know, most used,

00:16:17.595 --> 00:16:18.235
<v Speaker 1>image,

00:16:19.515 --> 00:16:21.680
<v Speaker 1>and the others. So we try to keep

00:16:21.680 --> 00:16:24.320
<v Speaker 1>up with that. We have a lot of

00:16:24.320 --> 00:16:25.920
<v Speaker 1>Yam every every one of them is a

00:16:25.920 --> 00:16:26.880
<v Speaker 1>YAML file.

00:16:27.760 --> 00:16:29.920
<v Speaker 1>So, yeah, more YAMLs

00:16:29.920 --> 00:16:31.040
<v Speaker 1>for the comments.

00:16:31.920 --> 00:16:33.600
<v Speaker 1>So if you want to compile if you

00:16:33.600 --> 00:16:35.840
<v Speaker 1>want us to provide a precompile

00:16:36.085 --> 00:16:38.085
<v Speaker 1>for your specific combination,

00:16:38.325 --> 00:16:39.845
<v Speaker 1>you open up a request with a YAML

00:16:39.845 --> 00:16:42.885
<v Speaker 1>file, and our build system keeps that takes

00:16:42.885 --> 00:16:45.045
<v Speaker 1>it and compile the Falco driver for that

00:16:45.045 --> 00:16:47.285
<v Speaker 1>one. The current module or the BPF probe

00:16:47.285 --> 00:16:49.605
<v Speaker 2>or bus? Yeah. The current module. Depends on

00:16:49.605 --> 00:16:50.245
<v Speaker 1>if it can.

00:16:51.170 --> 00:16:53.490
<v Speaker 1>And you put it on this downloads

00:16:53.490 --> 00:16:54.450
<v Speaker 1>repository.

00:16:54.930 --> 00:16:56.370
<v Speaker 1>So we are trying to, you know, make

00:16:56.370 --> 00:16:59.329
<v Speaker 1>sure. But for this demo because, you know,

00:16:59.329 --> 00:17:01.730
<v Speaker 1>the demo gods are not always good.

00:17:02.050 --> 00:17:03.889
<v Speaker 1>We just said, oh, work to 20 should

00:17:03.889 --> 00:17:05.089
<v Speaker 1>work. Maybe it doesn't,

00:17:06.044 --> 00:17:06.604
<v Speaker 1>but

00:17:07.244 --> 00:17:08.604
<v Speaker 1>sure. We'll see.

00:17:09.244 --> 00:17:10.044
<v Speaker 0>So

00:17:10.125 --> 00:17:12.365
<v Speaker 0>to summarize that, it it wasn't actually a

00:17:12.365 --> 00:17:14.605
<v Speaker 0>prerequisite. It was just to simplify things for

00:17:14.605 --> 00:17:17.085
<v Speaker 0>today's session. If if you want to use

00:17:17.085 --> 00:17:19.005
<v Speaker 0>other operating systems, it's always an option. You

00:17:19.005 --> 00:17:20.764
<v Speaker 0>just may have to compel the drivers of

00:17:20.764 --> 00:17:22.819
<v Speaker 0>yourself. That's it. I okay.

00:17:23.060 --> 00:17:25.060
<v Speaker 0>Yeah. I think I get that. That makes

00:17:25.060 --> 00:17:25.540
<v Speaker 0>sense.

00:17:26.340 --> 00:17:29.300
<v Speaker 0>So let's That's the last resort we want

00:17:29.300 --> 00:17:30.660
<v Speaker 1>you to have. But

00:17:31.700 --> 00:17:32.660
<v Speaker 1>hopefully

00:17:33.140 --> 00:17:35.525
<v Speaker 0>I'm sure things things are on their side.

00:17:35.525 --> 00:17:38.485
<v Speaker 0>Yeah. Yeah. We'll be fine. Okay. So I

00:17:39.525 --> 00:17:41.365
<v Speaker 0>should I pull up the docs? That would

00:17:41.365 --> 00:17:42.884
<v Speaker 0>probably be the first step. Right?

00:17:43.925 --> 00:17:44.644
<v Speaker 2>Exactly.

00:17:44.805 --> 00:17:45.445
<v Speaker 1>Yes.

00:17:46.085 --> 00:17:46.885
<v Speaker 0>Alright.

00:17:46.885 --> 00:17:47.125
<v Speaker 0>So

00:17:48.049 --> 00:17:51.330
<v Speaker 0>we have a Kubernetes cluster. I have access

00:17:51.570 --> 00:17:53.489
<v Speaker 0>to all of the machines.

00:17:53.490 --> 00:17:54.129
<v Speaker 0>So

00:17:54.370 --> 00:17:57.169
<v Speaker 0>I'm assuming you mentioned earlier that we're gonna

00:17:57.169 --> 00:17:58.770
<v Speaker 0>apt get install Falco.

00:17:58.770 --> 00:18:00.450
<v Speaker 0>It's kinda what I'm seeing here too. So

00:18:00.450 --> 00:18:02.289
<v Speaker 0>am I just gonna go ahead and add

00:18:02.289 --> 00:18:03.490
<v Speaker 0>this repository.

00:18:03.490 --> 00:18:03.650
<v Speaker 0>Right?

00:18:04.345 --> 00:18:06.345
<v Speaker 1>Yeah. We have two. As I said, we

00:18:06.345 --> 00:18:08.345
<v Speaker 1>have two ways of installing Falco. Maybe, Leo,

00:18:08.345 --> 00:18:10.505
<v Speaker 1>you want to give a reason why we

00:18:10.505 --> 00:18:11.864
<v Speaker 1>are suggesting apt?

00:18:14.024 --> 00:18:14.265
<v Speaker 2>Well,

00:18:16.070 --> 00:18:17.270
<v Speaker 2>this way, we're

00:18:17.750 --> 00:18:20.550
<v Speaker 2>this way, we'll install Falco on Diosk. I

00:18:20.550 --> 00:18:22.150
<v Speaker 2>don't I I'm it's not clear to me

00:18:22.150 --> 00:18:23.750
<v Speaker 2>if we want to install Falco on Diosk,

00:18:23.750 --> 00:18:25.270
<v Speaker 2>which is the recommended way or if we

00:18:25.270 --> 00:18:27.590
<v Speaker 2>want to install it with something like Alcharts.

00:18:27.590 --> 00:18:30.710
<v Speaker 2>I will go with everything because the experience

00:18:30.710 --> 00:18:31.110
<v Speaker 2>is

00:18:31.555 --> 00:18:34.355
<v Speaker 2>way cleaner in my opinion. And also I

00:18:34.355 --> 00:18:36.195
<v Speaker 2>agree. Architecturally,

00:18:36.915 --> 00:18:38.995
<v Speaker 2>that's the place where the Falco should be

00:18:38.995 --> 00:18:41.075
<v Speaker 2>in the host. Yeah. Otherwise

00:18:42.675 --> 00:18:43.635
<v Speaker 0>Sorry. Sorry.

00:18:43.955 --> 00:18:45.075
<v Speaker 1>It's very

00:18:46.700 --> 00:18:49.100
<v Speaker 1>what what do they want to say? Maybe

00:18:49.100 --> 00:18:50.940
<v Speaker 1>I'm just saying it for him.

00:18:51.340 --> 00:18:54.300
<v Speaker 1>Is that Falco is a very foundational component

00:18:54.300 --> 00:18:55.580
<v Speaker 1>in an infrastructure

00:18:56.220 --> 00:18:57.020
<v Speaker 1>because

00:18:57.020 --> 00:18:59.260
<v Speaker 1>it actually, you know, makes sure that nothing

00:18:59.260 --> 00:19:00.059
<v Speaker 1>happens

00:19:00.140 --> 00:19:02.664
<v Speaker 1>in the host. Right? We are also doing

00:19:02.664 --> 00:19:04.824
<v Speaker 1>steps to make sure that Falco boots

00:19:04.825 --> 00:19:07.704
<v Speaker 1>as fast as possible in a system,

00:19:07.865 --> 00:19:10.264
<v Speaker 1>like, even maybe, if possible,

00:19:10.745 --> 00:19:12.664
<v Speaker 1>like, exactly when the kernel boots at some

00:19:12.664 --> 00:19:13.065
<v Speaker 1>point

00:19:13.570 --> 00:19:15.250
<v Speaker 1>because Falco

00:19:15.410 --> 00:19:17.250
<v Speaker 1>needs to see everything. I mean, if someone

00:19:17.250 --> 00:19:19.490
<v Speaker 1>put a rootkit in your unit 30,

00:19:20.850 --> 00:19:23.010
<v Speaker 1>you're not gonna have Kubernetes booted up in

00:19:23.010 --> 00:19:23.970
<v Speaker 1>your unit 30.

00:19:24.210 --> 00:19:24.850
<v Speaker 1>Right?

00:19:25.090 --> 00:19:26.050
<v Speaker 1>So, for example,

00:19:26.985 --> 00:19:29.625
<v Speaker 1>so we are, you know, encouraging users

00:19:29.785 --> 00:19:31.865
<v Speaker 1>to always deploy Falco at the same level

00:19:31.865 --> 00:19:34.265
<v Speaker 1>they deploy, you know, their other,

00:19:34.825 --> 00:19:36.985
<v Speaker 1>machine component that they use for, like, the

00:19:36.985 --> 00:19:39.465
<v Speaker 1>queue the cubelet or the CNI plugin. So

00:19:39.465 --> 00:19:40.664
<v Speaker 1>it's at same level

00:19:40.905 --> 00:19:42.105
<v Speaker 1>so that they

00:19:42.330 --> 00:19:44.490
<v Speaker 1>so that Falco can take over and, you

00:19:44.490 --> 00:19:46.970
<v Speaker 1>know, understand everything that's happening. You can still

00:19:46.970 --> 00:19:48.570
<v Speaker 1>deploy Falco in Kubernetes.

00:19:48.570 --> 00:19:50.889
<v Speaker 1>Right now, it doesn't have, you know, any

00:19:51.049 --> 00:19:52.570
<v Speaker 1>differences in features.

00:19:53.049 --> 00:19:55.049
<v Speaker 1>But in the future, we want to make

00:19:55.049 --> 00:19:56.730
<v Speaker 1>sure that Falco, you know, takes over more

00:19:56.730 --> 00:19:59.705
<v Speaker 1>components. So we are, you know, suggesting that.

00:19:59.705 --> 00:20:00.344
<v Speaker 1>Also,

00:20:00.585 --> 00:20:02.745
<v Speaker 1>if you install Falco in Kubernetes, that means

00:20:02.745 --> 00:20:03.384
<v Speaker 1>that

00:20:03.784 --> 00:20:06.184
<v Speaker 1>if someone access your Kubernetes cluster, you know,

00:20:06.184 --> 00:20:07.464
<v Speaker 1>unauthorizedly,

00:20:08.184 --> 00:20:09.464
<v Speaker 1>they can stop Falco,

00:20:10.585 --> 00:20:12.585
<v Speaker 1>like, immediately from every node that you have.

00:20:12.910 --> 00:20:14.830
<v Speaker 1>And that's not good because Falco is there

00:20:14.830 --> 00:20:14.990
<v Speaker 1>for

00:20:15.870 --> 00:20:17.710
<v Speaker 2>Or worse, they can leave it

00:20:18.270 --> 00:20:20.190
<v Speaker 2>running but removing

00:20:20.270 --> 00:20:22.830
<v Speaker 2>rules. So you will not notice. You will

00:20:22.830 --> 00:20:24.670
<v Speaker 2>go, okay. Everything is fine. Falco is not

00:20:24.670 --> 00:20:27.985
<v Speaker 2>for triggering any rule, any alert, and that's

00:20:27.985 --> 00:20:31.184
<v Speaker 2>because they disabled the the rules at all.

00:20:31.184 --> 00:20:32.544
<v Speaker 2>So that's You know, worse.

00:20:32.865 --> 00:20:34.784
<v Speaker 1>I Yeah. Yeah. That's that's makes sense. You

00:20:34.784 --> 00:20:37.424
<v Speaker 0>know, Kubernetes is great. Containers are great for

00:20:37.424 --> 00:20:39.745
<v Speaker 0>most workloads. But if we're integrating and talking

00:20:39.810 --> 00:20:42.530
<v Speaker 0>the kernel, we're providing security concerns, like, running

00:20:42.530 --> 00:20:43.890
<v Speaker 0>this on the host seems to me like

00:20:43.890 --> 00:20:45.650
<v Speaker 0>it should be the right way forward. So

00:20:45.890 --> 00:20:47.890
<v Speaker 0>yeah. Let's And also,

00:20:48.210 --> 00:20:50.210
<v Speaker 1>not many people want to run a privileges

00:20:50.210 --> 00:20:52.210
<v Speaker 1>container in a cluster, and Falco would be

00:20:52.210 --> 00:20:54.050
<v Speaker 1>one because it does no other way.

00:20:54.770 --> 00:20:55.650
<v Speaker 1>So so

00:20:55.985 --> 00:20:57.424
<v Speaker 0>It's broadcast.

00:20:59.185 --> 00:21:00.385
<v Speaker 0>So that should

00:21:01.025 --> 00:21:02.545
<v Speaker 1>Yeah. Yeah. Yeah. I know this is gonna

00:21:02.545 --> 00:21:04.145
<v Speaker 0>be a pain for people to read, but

00:21:04.145 --> 00:21:05.665
<v Speaker 0>all I'm doing is copy and pasting the

00:21:05.665 --> 00:21:08.465
<v Speaker 0>command. So we've added our Falco repository.

00:21:08.785 --> 00:21:11.450
<v Speaker 0>We need the Linux headers because we're compiling

00:21:11.450 --> 00:21:13.610
<v Speaker 0>a kernel module or installing a kernel module,

00:21:13.610 --> 00:21:14.570
<v Speaker 0>I would imagine.

00:21:15.130 --> 00:21:16.809
<v Speaker 0>And then we install Falco. And

00:21:19.610 --> 00:21:20.650
<v Speaker 0>that should be it.

00:21:21.530 --> 00:21:23.930
<v Speaker 1>You're really mastering this science, David.

00:21:26.235 --> 00:21:28.634
<v Speaker 0>Yeah. It's it's always start off strong and

00:21:28.634 --> 00:21:30.235
<v Speaker 0>it goes down fast. Don't worry. Like

00:21:31.514 --> 00:21:32.634
<v Speaker 0>so

00:21:33.034 --> 00:21:35.195
<v Speaker 0>that's it. Okay. That's just other

00:21:35.595 --> 00:21:36.315
<v Speaker 0>distributions.

00:21:36.910 --> 00:21:37.470
<v Speaker 0>So

00:21:38.830 --> 00:21:42.030
<v Speaker 0>does the a bunch of package do the

00:21:42.030 --> 00:21:43.630
<v Speaker 0>driver installation, or do I still need to

00:21:43.630 --> 00:21:45.550
<v Speaker 0>run through these steps here? It should be

00:21:45.550 --> 00:21:47.470
<v Speaker 1>already done. You can check that out with

00:21:47.470 --> 00:21:48.270
<v Speaker 1>LS mod

00:21:49.275 --> 00:21:50.715
<v Speaker 1>pipe grep Falco.

00:21:51.035 --> 00:21:51.515
<v Speaker 1>Alright.

00:21:53.675 --> 00:21:55.195
<v Speaker 0>So mod probe Falco?

00:21:55.995 --> 00:21:57.915
<v Speaker 1>Oh, wait. You probably didn't do a p

00:21:57.915 --> 00:21:59.195
<v Speaker 1>t install Falco.

00:21:59.435 --> 00:22:01.035
<v Speaker 0>I did. Oh, yes. Oh, yes. It's it's

00:22:01.035 --> 00:22:03.260
<v Speaker 1>there. Okay. Okay. Okay. I just had to

00:22:03.260 --> 00:22:05.020
<v Speaker 0>mod probe it, and all of the machines

00:22:05.020 --> 00:22:07.340
<v Speaker 0>now have Falco returning on Alice mods. But

00:22:07.340 --> 00:22:09.419
<v Speaker 0>I think that's a win. If you just

00:22:09.419 --> 00:22:11.179
<v Speaker 1>see the CTL start Falco,

00:22:11.260 --> 00:22:12.940
<v Speaker 1>it will it will have done the mod

00:22:12.940 --> 00:22:13.500
<v Speaker 1>probe for you.

00:22:14.665 --> 00:22:16.825
<v Speaker 1>Yeah. Just we didn't start it.

00:22:17.065 --> 00:22:19.225
<v Speaker 0>Of course. Test on the all the things.

00:22:19.225 --> 00:22:20.745
<v Speaker 0>I always forget. Okay.

00:22:21.865 --> 00:22:26.185
<v Speaker 0>So that Let's verify let's verify. Okay. PSOX.

00:22:26.185 --> 00:22:26.505
<v Speaker 2>Okay?

00:22:27.720 --> 00:22:29.879
<v Speaker 2>If you run Oh my gosh. It's working.

00:22:30.520 --> 00:22:33.400
<v Speaker 2>Yeah. If you run journal

00:22:33.400 --> 00:22:34.600
<v Speaker 2>CTL

00:22:35.880 --> 00:22:37.559
<v Speaker 2>dash f

00:22:39.080 --> 00:22:41.160
<v Speaker 2>f u, Falco,

00:22:41.160 --> 00:22:42.200
<v Speaker 2>we should see something.

00:22:44.534 --> 00:22:45.895
<v Speaker 0>I feel like you just told me to

00:22:45.895 --> 00:22:47.414
<v Speaker 0>go fuck myself. Yeah.

00:22:47.655 --> 00:22:49.734
<v Speaker 1>Fuck. Yeah. No. Sorry.

00:22:49.735 --> 00:22:51.335
<v Speaker 2>No. That's so that's what

00:22:52.375 --> 00:22:54.215
<v Speaker 1>That's another way to see it.

00:22:54.934 --> 00:22:58.534
<v Speaker 0>Okay. And you will see that Falcon already

00:22:57.960 --> 00:22:59.320
<v Speaker 1>showing you something.

00:22:59.720 --> 00:23:02.360
<v Speaker 2>I see something. Yep. Okay. Yep. I think

00:23:02.360 --> 00:23:02.919
<v Speaker 0>it

00:23:03.399 --> 00:23:06.039
<v Speaker 0>we're good. It's running. Okay? We is that

00:23:06.360 --> 00:23:07.640
<v Speaker 0>do you wanna run anything else? Is there

00:23:07.640 --> 00:23:09.240
<v Speaker 0>anything else that's gonna give you a bit

00:23:09.240 --> 00:23:11.240
<v Speaker 0>more confidence? Or we We can do like,

00:23:11.485 --> 00:23:14.044
<v Speaker 1>before we dive into Kubernetes or we see

00:23:14.044 --> 00:23:16.845
<v Speaker 1>anything else, I will love for us to

00:23:16.845 --> 00:23:17.644
<v Speaker 1>analyze

00:23:17.804 --> 00:23:19.164
<v Speaker 1>what Falco's saying.

00:23:20.044 --> 00:23:21.964
<v Speaker 1>Looks like you're running Calico.

00:23:22.445 --> 00:23:25.190
<v Speaker 0>Yep. And, you know, Calico is totally, you

00:23:25.190 --> 00:23:27.270
<v Speaker 1>know, a good workload here because you installed

00:23:27.270 --> 00:23:27.830
<v Speaker 1>it.

00:23:28.230 --> 00:23:30.310
<v Speaker 1>And but Falco is complaining because it's a

00:23:30.310 --> 00:23:31.510
<v Speaker 1>privileged container

00:23:31.750 --> 00:23:35.350
<v Speaker 1>and has been started by the image Calico

00:23:35.350 --> 00:23:36.950
<v Speaker 1>node v three one five three.

00:23:37.615 --> 00:23:39.774
<v Speaker 1>It looks like we don't have an exclusion

00:23:39.774 --> 00:23:42.414
<v Speaker 1>for Calico. Right? We try to do as

00:23:42.414 --> 00:23:44.174
<v Speaker 1>much exclusions as we

00:23:44.575 --> 00:23:47.134
<v Speaker 1>are able to, but we don't, you know,

00:23:47.375 --> 00:23:49.934
<v Speaker 1>find we don't have exclusions for all the,

00:23:49.934 --> 00:23:52.015
<v Speaker 1>you know, software that should be excluded.

00:23:53.360 --> 00:23:55.759
<v Speaker 1>So if someone is listening

00:23:55.759 --> 00:23:58.159
<v Speaker 1>and they want to, you know, do a

00:23:58.159 --> 00:23:58.959
<v Speaker 1>contribution,

00:23:59.360 --> 00:24:01.759
<v Speaker 1>just go to our rules file in the

00:24:01.759 --> 00:24:03.039
<v Speaker 1>Falco repository

00:24:03.039 --> 00:24:04.399
<v Speaker 1>under the rules folder

00:24:04.735 --> 00:24:07.455
<v Speaker 1>and make an exclusion for Calico. It would

00:24:07.455 --> 00:24:10.094
<v Speaker 1>be very good as a first contribution.

00:24:10.495 --> 00:24:11.054
<v Speaker 1>And

00:24:11.615 --> 00:24:13.375
<v Speaker 1>if you want to try something just to

00:24:13.375 --> 00:24:15.455
<v Speaker 1>see, you know, what Falco can do, go

00:24:15.455 --> 00:24:17.615
<v Speaker 1>to the TMP folder and create a file.

00:24:18.259 --> 00:24:20.259
<v Speaker 2>Alright. Like, touch or

00:24:20.580 --> 00:24:22.500
<v Speaker 2>read to file in t m p. Alright.

00:24:22.500 --> 00:24:24.659
<v Speaker 0>Can I ask a question first then? Yeah.

00:24:24.659 --> 00:24:25.299
<v Speaker 2>Sure.

00:24:26.259 --> 00:24:27.460
<v Speaker 0>So that this is Why are we here?

00:24:27.460 --> 00:24:27.940
<v Speaker 0>So

00:24:28.500 --> 00:24:30.820
<v Speaker 0>this is visible to people. Do I have

00:24:30.820 --> 00:24:32.580
<v Speaker 0>any more commands I need to broadcast, or

00:24:32.580 --> 00:24:34.605
<v Speaker 0>can I close these other tabs?

00:24:35.405 --> 00:24:36.765
<v Speaker 1>Okay. So we don't

00:24:36.925 --> 00:24:39.005
<v Speaker 1>have to do anything, but we probably want

00:24:39.005 --> 00:24:40.445
<v Speaker 1>to configure the

00:24:41.165 --> 00:24:42.045
<v Speaker 1>Kubelet,

00:24:42.045 --> 00:24:44.684
<v Speaker 1>the Kube API servers of the machines Alright.

00:24:44.445 --> 00:24:46.765
<v Speaker 0>Later. I'll just grab the IP address of

00:24:46.765 --> 00:24:49.769
<v Speaker 0>this note then and get a new tab.

00:24:49.769 --> 00:24:51.049
<v Speaker 1>Yeah. Maybe.

00:24:51.690 --> 00:24:53.609
<v Speaker 1>If you want. If you are able.

00:24:54.090 --> 00:24:55.690
<v Speaker 0>Yeah. That's fine. I'll keep the I'll keep

00:24:55.690 --> 00:24:57.610
<v Speaker 0>the splits here because I we may have

00:24:57.610 --> 00:24:59.529
<v Speaker 0>to do other stuff and the rules fail

00:24:59.529 --> 00:25:02.090
<v Speaker 0>itself may have to show up. Okay. So

00:25:02.090 --> 00:25:03.450
<v Speaker 0>let's jump on this box.

00:25:06.165 --> 00:25:10.004
<v Speaker 0>Now what we were seeing there was so

00:25:10.085 --> 00:25:11.845
<v Speaker 0>that yeah. This is the line here. So

00:25:11.845 --> 00:25:13.525
<v Speaker 0>Falco is running. As noticed, we have a

00:25:13.525 --> 00:25:16.085
<v Speaker 0>privileged container and Yeah. Okay.

00:25:16.580 --> 00:25:18.580
<v Speaker 1>And what as Falco is saying here, we're

00:25:18.580 --> 00:25:20.419
<v Speaker 1>starting an internal web server

00:25:20.660 --> 00:25:21.460
<v Speaker 1>because

00:25:21.620 --> 00:25:23.779
<v Speaker 1>we, by default, start the web server,

00:25:24.420 --> 00:25:26.740
<v Speaker 1>which exposes a cube API

00:25:26.900 --> 00:25:28.340
<v Speaker 1>server

00:25:29.145 --> 00:25:29.945
<v Speaker 1>webhook

00:25:29.945 --> 00:25:30.825
<v Speaker 1>endpoint

00:25:30.825 --> 00:25:32.665
<v Speaker 1>for the audit logs,

00:25:33.305 --> 00:25:33.945
<v Speaker 1>and

00:25:34.185 --> 00:25:36.185
<v Speaker 1>you can configure a cube API server to

00:25:36.185 --> 00:25:37.705
<v Speaker 1>send hooks to that. But before we dig

00:25:37.785 --> 00:25:38.985
<v Speaker 1>we dive into that,

00:25:39.385 --> 00:25:41.305
<v Speaker 1>I will love you to, you know, try

00:25:41.305 --> 00:25:42.665
<v Speaker 1>to make Falco angry.

00:25:45.059 --> 00:25:45.700
<v Speaker 2>Yeah.

00:25:45.860 --> 00:25:48.419
<v Speaker 2>Let's create a Lorenzo file here.

00:25:51.220 --> 00:25:52.499
<v Speaker 2>Okay. And

00:25:52.980 --> 00:25:56.340
<v Speaker 2>then g mod g plus s Lorenzo.

00:25:58.645 --> 00:26:01.525
<v Speaker 2>Save save this file. Also, empty it's no.

00:26:01.525 --> 00:26:03.925
<v Speaker 2>Change mode to on the file. Yeah. Just

00:26:03.925 --> 00:26:05.125
<v Speaker 1>change mode the file.

00:26:05.845 --> 00:26:08.005
<v Speaker 2>Set the suite d group ID g g

00:26:08.005 --> 00:26:08.965
<v Speaker 2>plus s.

00:26:09.605 --> 00:26:11.284
<v Speaker 1>Plus s. Plus

00:26:12.085 --> 00:26:13.285
<v Speaker 2>s, Lorenzo.

00:26:15.660 --> 00:26:18.860
<v Speaker 2>Okay. Now if you go to the Falco

00:26:18.860 --> 00:26:19.820
<v Speaker 2>outputs,

00:26:19.900 --> 00:26:20.940
<v Speaker 2>you should see

00:26:22.140 --> 00:26:23.740
<v Speaker 2>another triggered.

00:26:25.500 --> 00:26:25.980
<v Speaker 0>Uh-huh.

00:26:26.695 --> 00:26:28.775
<v Speaker 2>Look. Now this set to your set to

00:26:28.775 --> 00:26:31.655
<v Speaker 2>the beat is set via c mod, and

00:26:31.655 --> 00:26:34.855
<v Speaker 2>it tells you everything that he knows. That

00:26:34.855 --> 00:26:37.575
<v Speaker 2>the file name was the MP Lorenzo,

00:26:37.735 --> 00:26:39.655
<v Speaker 2>the flags that have been set, the user

00:26:39.655 --> 00:26:40.295
<v Speaker 2>that

00:26:41.920 --> 00:26:44.400
<v Speaker 2>did the operation and other things like that.

00:26:44.400 --> 00:26:46.800
<v Speaker 2>The the exact command line, she mod g

00:26:46.800 --> 00:26:48.240
<v Speaker 2>plus s Lorenzo.

00:26:48.480 --> 00:26:50.800
<v Speaker 2>And in this case, container ID is sourced

00:26:50.800 --> 00:26:53.120
<v Speaker 2>because we are running this operation on the

00:26:53.120 --> 00:26:53.600
<v Speaker 2>host,

00:26:54.095 --> 00:26:56.735
<v Speaker 2>not in a container. But if you do

00:26:56.735 --> 00:26:59.295
<v Speaker 2>the same, like starting a container, an Alpine

00:26:59.295 --> 00:27:00.415
<v Speaker 2>one, for example,

00:27:01.135 --> 00:27:02.174
<v Speaker 2>and the second

00:27:02.575 --> 00:27:04.735
<v Speaker 2>exponer shell in the container and you do

00:27:04.735 --> 00:27:07.055
<v Speaker 2>the same thing, Falco detects it. In that

00:27:07.055 --> 00:27:10.570
<v Speaker 2>case, it will give you the container ID

00:27:10.650 --> 00:27:13.370
<v Speaker 2>of the container where you did that operation

00:27:13.530 --> 00:27:15.289
<v Speaker 2>that malicious operation.

00:27:16.890 --> 00:27:19.450
<v Speaker 1>Exactly. And also shows you before telling you

00:27:19.450 --> 00:27:22.169
<v Speaker 1>that, tells you, hey. Someone started a container

00:27:22.250 --> 00:27:25.114
<v Speaker 1>with root shell, and they are doing comments,

00:27:25.195 --> 00:27:27.115
<v Speaker 1>and the comment is this one. Yeah. Let's

00:27:27.115 --> 00:27:29.035
<v Speaker 2>try. Maybe it's better if we try it.

00:27:29.035 --> 00:27:29.275
<v Speaker 2>So

00:27:31.835 --> 00:27:34.235
<v Speaker 0>Okay. So what's the docker run run

00:27:34.635 --> 00:27:35.355
<v Speaker 1>IT Alpine.

00:27:36.200 --> 00:27:36.919
<v Speaker 2>Docker. Alpine

00:27:40.280 --> 00:27:43.080
<v Speaker 0>3.9.

00:27:43.800 --> 00:27:46.680
<v Speaker 2>Do do dash do dash IT.

00:27:46.680 --> 00:27:48.600
<v Speaker 2>Yeah. Yeah. Something like

00:27:50.015 --> 00:27:51.935
<v Speaker 1>Oh, this connection is very fast.

00:27:52.975 --> 00:27:53.935
<v Speaker 1>Okay. Cool.

00:27:54.655 --> 00:27:55.455
<v Speaker 2>So, like,

00:27:55.855 --> 00:27:58.095
<v Speaker 2>you can you can edit a file in

00:27:58.095 --> 00:27:59.375
<v Speaker 2>the bin in the bin

00:27:59.615 --> 00:28:01.855
<v Speaker 2>directory, or you could you could redo the

00:28:01.855 --> 00:28:03.215
<v Speaker 2>TMP, Laurens, a thing.

00:28:04.390 --> 00:28:06.950
<v Speaker 2>Or you can Maybe maybe try to

00:28:07.350 --> 00:28:09.350
<v Speaker 1>create a file in the BIM directory

00:28:09.590 --> 00:28:11.190
<v Speaker 1>with whatever you want

00:28:12.390 --> 00:28:14.789
<v Speaker 1>and just save it and then go out.

00:28:16.150 --> 00:28:19.030
<v Speaker 2>Just touch just touch the file without anything.

00:28:19.545 --> 00:28:21.785
<v Speaker 1>And if you do APK like you were

00:28:21.785 --> 00:28:24.825
<v Speaker 1>doing, it will also see, hey. Someone spawned

00:28:24.825 --> 00:28:26.345
<v Speaker 1>the package manager.

00:28:26.585 --> 00:28:27.625
<v Speaker 2>Yep. Okay.

00:28:29.065 --> 00:28:29.225
<v Speaker 0>Like

00:28:30.425 --> 00:28:32.025
<v Speaker 0>So just touching that file, and then you

00:28:32.025 --> 00:28:33.305
<v Speaker 0>want me to drop out the container and

00:28:33.305 --> 00:28:35.730
<v Speaker 0>look at the Falco logs again. Yep. Yep.

00:28:37.650 --> 00:28:40.370
<v Speaker 1>Yeah. Love the comments. It's read. I love

00:28:40.370 --> 00:28:41.810
<v Speaker 1>the comment I just said. I love how

00:28:41.810 --> 00:28:44.050
<v Speaker 1>Leo is sat here like I wanna type.

00:28:44.050 --> 00:28:45.410
<v Speaker 1>Yeah. It's always like that.

00:28:48.285 --> 00:28:49.165
<v Speaker 0>Okay.

00:28:49.165 --> 00:28:50.605
<v Speaker 0>So Falco

00:28:50.605 --> 00:28:51.485
<v Speaker 0>internal

00:28:51.485 --> 00:28:53.565
<v Speaker 0>Cisco event drop. So it

00:28:54.445 --> 00:28:55.965
<v Speaker 0>so what what does this one mean? What

00:28:55.965 --> 00:28:57.725
<v Speaker 0>does it mean by the one system call

00:28:57.725 --> 00:29:00.205
<v Speaker 0>was dropped in last second? That in some

00:29:00.205 --> 00:29:02.400
<v Speaker 2>cases, this is something

00:29:02.400 --> 00:29:04.159
<v Speaker 2>that we are really been

00:29:04.720 --> 00:29:07.200
<v Speaker 2>trying to solve, and we improved that a

00:29:07.200 --> 00:29:08.239
<v Speaker 2>lot. Basically,

00:29:08.720 --> 00:29:10.000
<v Speaker 2>as Lorenzo say

00:29:10.240 --> 00:29:11.119
<v Speaker 2>we're saying

00:29:11.520 --> 00:29:12.720
<v Speaker 2>ten minutes before,

00:29:13.120 --> 00:29:15.120
<v Speaker 2>we are using Ciscos, which which are the

00:29:15.120 --> 00:29:17.575
<v Speaker 2>main interface that we have to the Linux

00:29:17.575 --> 00:29:18.294
<v Speaker 2>kernel.

00:29:18.534 --> 00:29:21.414
<v Speaker 2>And the problem is that Cisco's are a

00:29:21.414 --> 00:29:23.735
<v Speaker 2>lot. They change very often, so it's very

00:29:23.735 --> 00:29:25.575
<v Speaker 2>hard to keep Falco track.

00:29:26.215 --> 00:29:29.520
<v Speaker 2>But, also, they happens at a rate that

00:29:29.520 --> 00:29:32.560
<v Speaker 2>sometimes is very, very difficult to keep up.

00:29:32.560 --> 00:29:35.440
<v Speaker 2>So in some cases, for various reasons that

00:29:35.440 --> 00:29:38.160
<v Speaker 2>can depends on the the throughput of Cisco,

00:29:38.160 --> 00:29:39.920
<v Speaker 2>the amount of Cisco's that are happening on

00:29:39.920 --> 00:29:40.640
<v Speaker 2>the machine,

00:29:40.960 --> 00:29:43.520
<v Speaker 2>or, at the same time, issues with the

00:29:44.065 --> 00:29:47.265
<v Speaker 2>page the memory pages and things like that,

00:29:47.265 --> 00:29:49.745
<v Speaker 2>we can experience and detect some drops. So

00:29:49.745 --> 00:29:52.785
<v Speaker 2>we can experience that we have not received

00:29:53.105 --> 00:29:56.305
<v Speaker 2>some input events on Falco, so we could

00:29:56.305 --> 00:29:56.465
<v Speaker 2>not

00:29:57.700 --> 00:30:00.580
<v Speaker 2>know what happened in that only in that

00:30:00.580 --> 00:30:01.859
<v Speaker 2>exact instant.

00:30:01.940 --> 00:30:02.499
<v Speaker 2>But

00:30:02.740 --> 00:30:05.700
<v Speaker 2>this basically is dropping, like, what what? One

00:30:05.700 --> 00:30:08.259
<v Speaker 2>system calls in the last second. In a

00:30:08.259 --> 00:30:08.659
<v Speaker 2>second,

00:30:09.625 --> 00:30:11.785
<v Speaker 2>can also happen one or two millions of

00:30:11.785 --> 00:30:12.664
<v Speaker 2>Cisco's.

00:30:12.745 --> 00:30:13.465
<v Speaker 2>I mean

00:30:14.105 --> 00:30:14.585
<v Speaker 2>so

00:30:15.545 --> 00:30:18.105
<v Speaker 2>okay. We will fix it. We will try

00:30:18.105 --> 00:30:20.585
<v Speaker 2>to avoid this to bring this number down

00:30:20.585 --> 00:30:22.240
<v Speaker 2>to zero, but

00:30:22.400 --> 00:30:24.639
<v Speaker 2>this is what what the backlog

00:30:24.960 --> 00:30:27.760
<v Speaker 2>tells us. What we are really interested here,

00:30:27.760 --> 00:30:28.960
<v Speaker 2>we about the

00:30:29.120 --> 00:30:31.440
<v Speaker 2>the experiment that we were doing, yes, is

00:30:31.440 --> 00:30:34.720
<v Speaker 2>that line. File below a non binary directory

00:30:34.720 --> 00:30:35.840
<v Speaker 2>open for writing,

00:30:36.605 --> 00:30:39.565
<v Speaker 2>touch by doctor, file being by doctor. So

00:30:39.565 --> 00:30:42.445
<v Speaker 2>it detects it and Yeah. You can reconstruct

00:30:42.445 --> 00:30:46.205
<v Speaker 1>the whole story. Right? If you go notice,

00:30:46.205 --> 00:30:47.804
<v Speaker 1>privilege container started

00:30:47.885 --> 00:30:49.805
<v Speaker 1>as first event after web server.

00:30:50.530 --> 00:30:52.690
<v Speaker 1>And then notice at the so with the

00:30:52.690 --> 00:30:55.330
<v Speaker 1>GDB, which is what we did before. And

00:30:55.330 --> 00:30:57.010
<v Speaker 1>then notice a shell was spawned in a

00:30:57.010 --> 00:30:57.649
<v Speaker 1>container.

00:30:58.210 --> 00:31:00.450
<v Speaker 1>And this is was the a s h

00:31:00.450 --> 00:31:01.809
<v Speaker 1>shell that you spawned,

00:31:01.970 --> 00:31:03.650
<v Speaker 1>and it tells you the image and the

00:31:03.650 --> 00:31:05.434
<v Speaker 1>container ID. Right?

00:31:05.755 --> 00:31:06.554
<v Speaker 1>Then,

00:31:06.555 --> 00:31:08.315
<v Speaker 1>you know, that's the drop. But then it

00:31:08.315 --> 00:31:09.835
<v Speaker 1>immediately keeps up

00:31:10.235 --> 00:31:12.715
<v Speaker 1>and, you know, shows that you just, you

00:31:12.715 --> 00:31:13.995
<v Speaker 1>know, created the file.

00:31:14.475 --> 00:31:15.995
<v Speaker 1>So it gives you a kind of, you

00:31:15.995 --> 00:31:17.675
<v Speaker 1>know, history of what happened so that you

00:31:17.675 --> 00:31:18.555
<v Speaker 1>can reconstruct

00:31:18.919 --> 00:31:20.519
<v Speaker 1>the whole attack

00:31:20.520 --> 00:31:21.639
<v Speaker 1>payload and

00:31:22.200 --> 00:31:24.919
<v Speaker 1>see what happened during the session of the

00:31:24.919 --> 00:31:27.880
<v Speaker 1>attacker. Yep. Also, in this case, David, as

00:31:27.880 --> 00:31:30.360
<v Speaker 2>you as we were mentioning before, we have

00:31:30.360 --> 00:31:32.520
<v Speaker 2>the container ID and the image name

00:31:33.425 --> 00:31:36.145
<v Speaker 2>differently from the past experiment

00:31:36.145 --> 00:31:39.664
<v Speaker 2>that was telling us container ID host

00:31:40.305 --> 00:31:42.384
<v Speaker 2>because it was run on the host.

00:31:43.345 --> 00:31:43.745
<v Speaker 2>Exactly.

00:31:44.960 --> 00:31:45.679
<v Speaker 0>Okay.

00:31:45.920 --> 00:31:46.559
<v Speaker 0>So

00:31:46.960 --> 00:31:49.040
<v Speaker 0>the one thing that I'm I'm kinda thinking

00:31:49.040 --> 00:31:50.240
<v Speaker 0>about now, like,

00:31:51.040 --> 00:31:53.920
<v Speaker 0>haven't configured any rules. So can you is

00:31:53.920 --> 00:31:55.680
<v Speaker 0>this a default rule then? If we create

00:31:55.680 --> 00:31:57.840
<v Speaker 0>something on a known binary directory, it's gonna

00:31:57.840 --> 00:31:59.325
<v Speaker 0>trigger on it. What what are some of

00:31:59.325 --> 00:32:00.684
<v Speaker 0>the default rules? Can we look at Good

00:32:00.684 --> 00:32:01.325
<v Speaker 1>question.

00:32:03.885 --> 00:32:06.605
<v Speaker 1>Yeah. If you go to h c Falco.

00:32:07.804 --> 00:32:09.885
<v Speaker 1>Yes. I love it when stuff's just intuitive.

00:32:09.885 --> 00:32:11.245
<v Speaker 0>It's like, I just I I just thought

00:32:11.245 --> 00:32:13.645
<v Speaker 0>it's definitely gonna be there. So Yeah.

00:32:15.059 --> 00:32:15.700
<v Speaker 0>Just

00:32:15.940 --> 00:32:17.379
<v Speaker 1>it's DG path.

00:32:18.659 --> 00:32:20.980
<v Speaker 1>And so you have Falco YAML where all

00:32:20.980 --> 00:32:24.500
<v Speaker 1>the default Cisco rules are. You have Falco

00:32:24.659 --> 00:32:26.899
<v Speaker 1>you have Kate Savit rules YAML

00:32:27.424 --> 00:32:29.585
<v Speaker 1>where all the rules for the Kubernetes,

00:32:29.745 --> 00:32:31.424
<v Speaker 1>we didn't use it yet.

00:32:31.985 --> 00:32:33.744
<v Speaker 1>And your Falco rules local,

00:32:33.825 --> 00:32:35.745
<v Speaker 1>where you can add your own rules without

00:32:35.745 --> 00:32:38.225
<v Speaker 1>the package system to override them, or you

00:32:38.225 --> 00:32:39.184
<v Speaker 1>can create,

00:32:39.825 --> 00:32:41.745
<v Speaker 1>you know, multiple files in rules default.

00:32:43.799 --> 00:32:45.640
<v Speaker 1>A couple of options. Rules

00:32:45.640 --> 00:32:49.080
<v Speaker 2>dot d. Yep. Rules dot d. Yes. We

00:32:50.120 --> 00:32:52.359
<v Speaker 1>are also working on a system to

00:32:53.720 --> 00:32:55.159
<v Speaker 1>enable people

00:32:55.575 --> 00:32:58.375
<v Speaker 1>to cruise from the outside, like, from distributed

00:32:58.375 --> 00:33:00.934
<v Speaker 1>system, like, you know, it's CD or Kubernetes,

00:33:00.934 --> 00:33:01.335
<v Speaker 1>and

00:33:01.815 --> 00:33:03.494
<v Speaker 1>also, like, reload them

00:33:03.975 --> 00:33:05.575
<v Speaker 2>Yeah. Which is something that we go in

00:33:05.575 --> 00:33:07.495
<v Speaker 1>the next features. The next That is

00:33:08.260 --> 00:33:10.740
<v Speaker 2>that is what we were working before entering

00:33:10.740 --> 00:33:11.700
<v Speaker 2>this stream.

00:33:12.340 --> 00:33:13.059
<v Speaker 0>Yeah.

00:33:14.500 --> 00:33:16.100
<v Speaker 0>Alright. So

00:33:19.460 --> 00:33:22.095
<v Speaker 0>let me see what we have here. Okay.

00:33:22.415 --> 00:33:24.415
<v Speaker 0>So this is the Falco configuration, but the

00:33:24.415 --> 00:33:26.015
<v Speaker 0>the default rules are

00:33:26.255 --> 00:33:27.855
<v Speaker 1>Yeah. Sorry. This one.

00:33:28.735 --> 00:33:31.134
<v Speaker 0>If I if I could type. So rules.

00:33:31.455 --> 00:33:33.375
<v Speaker 0>YAML. You can type YAML.

00:33:34.255 --> 00:33:34.975
<v Speaker 2>Yeah.

00:33:36.560 --> 00:33:38.320
<v Speaker 0>Okay. So we got

00:33:38.960 --> 00:33:40.640
<v Speaker 2>Wait a minute. Wait a wait a minute.

00:33:40.640 --> 00:33:42.640
<v Speaker 2>Since since we are here,

00:33:42.960 --> 00:33:45.200
<v Speaker 2>Falco rules is YAML,

00:33:45.360 --> 00:33:47.280
<v Speaker 2>but, basically, we built

00:33:47.615 --> 00:33:49.775
<v Speaker 2>a language, let's call a language,

00:33:50.255 --> 00:33:52.975
<v Speaker 2>on top of the off top of the

00:33:53.055 --> 00:33:54.895
<v Speaker 2>I was on YAML features.

00:33:55.135 --> 00:33:57.375
<v Speaker 2>For example, we you

00:33:58.255 --> 00:34:00.175
<v Speaker 2>can define Falco rules using

00:34:00.175 --> 00:34:02.960
<v Speaker 2>macros. So you can also define macros to

00:34:02.960 --> 00:34:05.840
<v Speaker 2>later reuse them in different rules. For example,

00:34:05.840 --> 00:34:08.800
<v Speaker 2>here we have some macros that are specifically

00:34:08.800 --> 00:34:10.320
<v Speaker 2>being created to

00:34:10.880 --> 00:34:12.800
<v Speaker 2>detect open Ciscos,

00:34:12.800 --> 00:34:14.960
<v Speaker 2>open read, open write. You can do the

00:34:14.960 --> 00:34:16.960
<v Speaker 2>same, and we have for exec v,

00:34:17.475 --> 00:34:19.155
<v Speaker 2>another Cisco that's

00:34:19.315 --> 00:34:22.755
<v Speaker 2>usually used to run executables.

00:34:23.475 --> 00:34:24.995
<v Speaker 2>You can also create lists

00:34:25.635 --> 00:34:28.115
<v Speaker 2>that you can use to exclude or include

00:34:28.275 --> 00:34:31.235
<v Speaker 2>a list of topics. For example, I will

00:34:30.780 --> 00:34:33.179
<v Speaker 2>exclude Calico, this other and this other this

00:34:33.179 --> 00:34:35.500
<v Speaker 2>other CNI plug in because I know that

00:34:35.500 --> 00:34:38.699
<v Speaker 2>they are okay to run-in my Kubernetes cluster.

00:34:38.699 --> 00:34:40.300
<v Speaker 2>So I will create a list with the

00:34:40.380 --> 00:34:43.020
<v Speaker 2>all the name of the CNI plug ins

00:34:43.020 --> 00:34:45.265
<v Speaker 2>in ages and exclude them in a in

00:34:45.265 --> 00:34:47.905
<v Speaker 2>a in that rule that we were talking

00:34:47.905 --> 00:34:48.864
<v Speaker 2>about before.

00:34:50.145 --> 00:34:53.505
<v Speaker 2>Soon, we are also implementing a mechanism

00:34:53.505 --> 00:34:55.505
<v Speaker 2>for exceptions in rules,

00:34:56.145 --> 00:34:58.705
<v Speaker 2>but the Falco default rule set tries

00:34:59.060 --> 00:35:01.300
<v Speaker 2>to cover the most common

00:35:01.780 --> 00:35:04.180
<v Speaker 2>threats, the most common use cases. And

00:35:04.740 --> 00:35:05.780
<v Speaker 2>since it's

00:35:05.860 --> 00:35:08.420
<v Speaker 2>checked in the GitHub repo, everyone, and this

00:35:08.420 --> 00:35:10.900
<v Speaker 2>is very common, can contribute to it and

00:35:10.900 --> 00:35:13.060
<v Speaker 2>help us to keep it on track with

00:35:13.060 --> 00:35:15.515
<v Speaker 2>new new tools, new methodologies,

00:35:15.515 --> 00:35:18.555
<v Speaker 2>new things, and so keeping the rules updated

00:35:18.555 --> 00:35:21.195
<v Speaker 2>day by day. Anyway, if you scroll.

00:35:22.475 --> 00:35:24.075
<v Speaker 1>If you want to have, like, an example

00:35:24.075 --> 00:35:25.995
<v Speaker 1>of what you did before, you can search

00:35:25.995 --> 00:35:26.715
<v Speaker 1>for privileged,

00:35:27.570 --> 00:35:29.250
<v Speaker 1>and you will see the rule

00:35:29.410 --> 00:35:30.130
<v Speaker 1>that

00:35:30.930 --> 00:35:32.530
<v Speaker 1>privilege it. Yeah.

00:35:33.250 --> 00:35:35.970
<v Speaker 2>Search for privileged container started.

00:35:36.850 --> 00:35:37.250
<v Speaker 1>Yes.

00:35:40.015 --> 00:35:42.975
<v Speaker 1>Exactly. Launch privilege of container. This is what

00:35:42.975 --> 00:35:44.495
<v Speaker 1>triggered when you

00:35:45.375 --> 00:35:46.735
<v Speaker 1>started Calico

00:35:47.055 --> 00:35:47.935
<v Speaker 1>in your

00:35:48.735 --> 00:35:50.735
<v Speaker 1>in your cluster.

00:35:51.535 --> 00:35:52.975
<v Speaker 0>Okay. So Yeah.

00:35:54.260 --> 00:35:57.859
<v Speaker 2>Here, there's container started. There's a macro sorry.

00:35:57.859 --> 00:35:58.500
<v Speaker 2>Go.

00:35:59.460 --> 00:36:01.220
<v Speaker 0>No. I mean, you're I I was gonna

00:36:01.220 --> 00:36:02.660
<v Speaker 0>just guess what I think it means, but

00:36:02.660 --> 00:36:04.099
<v Speaker 0>I'm more than happy for you just to

00:36:04.099 --> 00:36:05.619
<v Speaker 0>walk us through that. So if you wanna

00:36:05.619 --> 00:36:07.665
<v Speaker 0>run through the conditions, that's that's all good.

00:36:07.665 --> 00:36:07.985
<v Speaker 2>Yeah. The

00:36:08.945 --> 00:36:11.985
<v Speaker 2>is what I we were saying before. Basically,

00:36:11.985 --> 00:36:14.225
<v Speaker 2>the to provide this rule to become, like,

00:36:14.545 --> 00:36:17.105
<v Speaker 2>a a flow of if a a flow

00:36:17.105 --> 00:36:18.145
<v Speaker 2>of conditions,

00:36:18.865 --> 00:36:19.585
<v Speaker 2>basically, we

00:36:21.740 --> 00:36:24.619
<v Speaker 2>used some macro here. Container started

00:36:24.619 --> 00:36:26.300
<v Speaker 2>and container

00:36:26.460 --> 00:36:29.020
<v Speaker 2>and container privilege is true, which is a

00:36:29.020 --> 00:36:30.460
<v Speaker 2>field. In this case, this is not a

00:36:30.460 --> 00:36:33.579
<v Speaker 2>macro, and not Falco privileged containers and not

00:36:33.579 --> 00:36:35.260
<v Speaker 2>user privileged containers,

00:36:35.660 --> 00:36:38.115
<v Speaker 2>which are true lists, which means that you

00:36:38.115 --> 00:36:39.715
<v Speaker 2>can pull you can

00:36:40.435 --> 00:36:43.875
<v Speaker 2>put something in the user privileged containers list

00:36:43.875 --> 00:36:44.995
<v Speaker 2>to exclude

00:36:46.035 --> 00:36:49.599
<v Speaker 2>that thing to trigger this this rule. At

00:36:49.599 --> 00:36:50.480
<v Speaker 2>the same time,

00:36:50.720 --> 00:36:52.720
<v Speaker 2>you can go and look at the container

00:36:52.720 --> 00:36:55.119
<v Speaker 2>start at the macro or at the container

00:36:55.119 --> 00:36:57.200
<v Speaker 2>macro. If you search for macro,

00:36:57.200 --> 00:36:58.880
<v Speaker 2>colon, space, container,

00:36:58.880 --> 00:37:00.960
<v Speaker 2>you will reach the

00:37:02.565 --> 00:37:03.365
<v Speaker 2>column,

00:37:04.165 --> 00:37:04.805
<v Speaker 2>micro

00:37:05.365 --> 00:37:07.365
<v Speaker 2>double column. I don't remember how to call

00:37:07.365 --> 00:37:08.165
<v Speaker 2>it English.

00:37:09.285 --> 00:37:11.525
<v Speaker 2>No. One. Sorry. Column space

00:37:11.605 --> 00:37:12.565
<v Speaker 2>container.

00:37:12.565 --> 00:37:13.605
<v Speaker 2>Space.

00:37:13.605 --> 00:37:14.085
<v Speaker 0>Yeah.

00:37:14.750 --> 00:37:16.430
<v Speaker 0>There we go. Nope.

00:37:16.750 --> 00:37:18.590
<v Speaker 1>Really they already want to type.

00:37:19.230 --> 00:37:19.950
<v Speaker 2>Yeah. I

00:37:21.150 --> 00:37:23.950
<v Speaker 2>okay. Yeah. So as you can imagine, this

00:37:23.950 --> 00:37:25.870
<v Speaker 2>this this model is very simple.

00:37:26.270 --> 00:37:28.829
<v Speaker 2>If container ID is not us, as we've

00:37:28.829 --> 00:37:30.109
<v Speaker 2>seen with the two examples,

00:37:30.645 --> 00:37:32.485
<v Speaker 2>that means we are in con we we

00:37:32.485 --> 00:37:34.165
<v Speaker 2>are in a container and not in in

00:37:34.165 --> 00:37:34.965
<v Speaker 2>The Us.

00:37:35.285 --> 00:37:37.365
<v Speaker 2>And so that evaluates to true.

00:37:38.165 --> 00:37:40.885
<v Speaker 2>At the same time, container started checks

00:37:42.085 --> 00:37:44.085
<v Speaker 2>the event type. It's exactly.

00:37:45.420 --> 00:37:46.060
<v Speaker 2>And

00:37:46.300 --> 00:37:46.619
<v Speaker 2>that

00:37:47.180 --> 00:37:49.740
<v Speaker 2>basically, the we have the container image

00:37:49.740 --> 00:37:50.540
<v Speaker 2>name

00:37:50.619 --> 00:37:51.580
<v Speaker 2>complete.

00:37:53.819 --> 00:37:55.100
<v Speaker 0>Yeah. Okay.

00:37:55.660 --> 00:37:57.900
<v Speaker 1>I think we have a question, which I

00:37:57.900 --> 00:38:01.555
<v Speaker 1>believe it's interesting. Cool rules come from OPA

00:38:01.555 --> 00:38:02.115
<v Speaker 1>tool?

00:38:02.595 --> 00:38:03.235
<v Speaker 2>Yep.

00:38:04.515 --> 00:38:05.875
<v Speaker 2>Interesting question.

00:38:06.435 --> 00:38:09.155
<v Speaker 1>It's a very interesting question. And the question

00:38:09.155 --> 00:38:10.595
<v Speaker 1>is interesting because

00:38:10.995 --> 00:38:12.595
<v Speaker 1>the work that

00:38:12.755 --> 00:38:15.155
<v Speaker 1>I mentioned before that Liran and I are

00:38:15.155 --> 00:38:17.090
<v Speaker 1>doing, you know, like, today

00:38:17.410 --> 00:38:18.850
<v Speaker 1>is explicitly

00:38:19.410 --> 00:38:20.050
<v Speaker 1>to

00:38:20.290 --> 00:38:21.250
<v Speaker 1>allow

00:38:21.730 --> 00:38:23.570
<v Speaker 1>external implementations

00:38:23.890 --> 00:38:25.970
<v Speaker 1>to load rules into Falco. What I mean,

00:38:25.970 --> 00:38:27.810
<v Speaker 1>that we will have a default implementation of

00:38:27.810 --> 00:38:30.210
<v Speaker 1>our rule loader that we go, like, on,

00:38:30.210 --> 00:38:32.105
<v Speaker 1>you know, files, Kubernetes,

00:38:32.105 --> 00:38:33.465
<v Speaker 1>you know, whatever we

00:38:33.865 --> 00:38:35.865
<v Speaker 1>find the default means.

00:38:36.425 --> 00:38:37.785
<v Speaker 1>But, you know,

00:38:38.105 --> 00:38:41.385
<v Speaker 1>either the Falco project or anyone can create

00:38:41.385 --> 00:38:43.065
<v Speaker 1>a Falco rule loader

00:38:43.400 --> 00:38:45.000
<v Speaker 1>that watches something

00:38:45.240 --> 00:38:47.960
<v Speaker 1>and load rules in Falco. OPA is a

00:38:47.960 --> 00:38:50.200
<v Speaker 1>very, you know, good use cases use case

00:38:50.200 --> 00:38:51.800
<v Speaker 1>for that because,

00:38:52.040 --> 00:38:52.600
<v Speaker 1>you know,

00:38:53.400 --> 00:38:55.800
<v Speaker 1>it's, you know, what you express in OPA,

00:38:55.800 --> 00:38:57.665
<v Speaker 1>and, you know, it's very, you know, how

00:38:57.665 --> 00:38:58.065
<v Speaker 1>to say

00:38:59.105 --> 00:39:01.185
<v Speaker 1>it's very expressive, and it's also very

00:39:02.545 --> 00:39:03.265
<v Speaker 1>generic.

00:39:03.585 --> 00:39:05.744
<v Speaker 1>So you can express, you know, a condition

00:39:05.744 --> 00:39:08.065
<v Speaker 1>that resembles the Falco rules and then create

00:39:08.065 --> 00:39:10.625
<v Speaker 1>the Falco rules and load them in Falco.

00:39:10.950 --> 00:39:12.950
<v Speaker 1>All these kind of use cases are exactly

00:39:12.950 --> 00:39:14.470
<v Speaker 1>why we are developing that.

00:39:14.869 --> 00:39:15.430
<v Speaker 1>And

00:39:15.910 --> 00:39:17.910
<v Speaker 1>I believe that at some point, something like

00:39:17.910 --> 00:39:20.150
<v Speaker 1>this will will happens once we have this,

00:39:20.390 --> 00:39:21.270
<v Speaker 1>this thing.

00:39:21.589 --> 00:39:22.630
<v Speaker 1>If you

00:39:23.030 --> 00:39:25.190
<v Speaker 1>believe that this is important for you, I

00:39:25.190 --> 00:39:26.150
<v Speaker 1>will love to see you

00:39:26.825 --> 00:39:28.345
<v Speaker 1>in our community calls,

00:39:28.744 --> 00:39:30.025
<v Speaker 1>to define maybe

00:39:30.825 --> 00:39:32.265
<v Speaker 1>some more details.

00:39:32.265 --> 00:39:34.424
<v Speaker 1>Because what does, you know, what does that

00:39:34.424 --> 00:39:36.505
<v Speaker 1>mean? At some point, it's just, you know,

00:39:36.505 --> 00:39:38.105
<v Speaker 1>what do the user expect,

00:39:38.265 --> 00:39:39.785
<v Speaker 1>and I'm not a user of Falco.

00:39:40.569 --> 00:39:42.650
<v Speaker 1>So I will just, you know, love to

00:39:42.650 --> 00:39:44.330
<v Speaker 1>talk with some users about that.

00:39:44.809 --> 00:39:47.210
<v Speaker 0>Okay. Just for anyone who's not familiar, Opa

00:39:47.210 --> 00:39:49.050
<v Speaker 0>is open policy agent. And if you want

00:39:49.050 --> 00:39:50.730
<v Speaker 0>an introduction to that, I do have an

00:39:50.730 --> 00:39:53.805
<v Speaker 0>episode scheduled for the November 18. So feel

00:39:53.805 --> 00:39:55.325
<v Speaker 0>free to tune in for that one too.

00:39:56.525 --> 00:39:57.645
<v Speaker 0>That's a question.

00:39:58.204 --> 00:39:59.965
<v Speaker 0>Yeah. That was a really good question.

00:40:00.365 --> 00:40:01.325
<v Speaker 0>Okay.

00:40:01.325 --> 00:40:02.045
<v Speaker 0>Let's

00:40:02.525 --> 00:40:03.964
<v Speaker 0>let's move on then. So we've got our

00:40:03.964 --> 00:40:05.805
<v Speaker 0>Falco rules. Do we get all these default

00:40:05.805 --> 00:40:08.204
<v Speaker 0>rules by default? They monitor things, the containers

00:40:08.204 --> 00:40:10.340
<v Speaker 0>being run as privileged. They monitor for binaries

00:40:10.340 --> 00:40:11.220
<v Speaker 0>and no one,

00:40:12.180 --> 00:40:14.100
<v Speaker 0>know, privileged direct, not privileged, but where we

00:40:14.100 --> 00:40:15.860
<v Speaker 0>keep binaries. So we have

00:40:16.900 --> 00:40:19.620
<v Speaker 0>plask stuff, SSH stuff, like, so it seems

00:40:19.620 --> 00:40:21.380
<v Speaker 0>like you're just you're casting a wide net

00:40:21.380 --> 00:40:23.635
<v Speaker 0>here with regards to what we think could

00:40:23.635 --> 00:40:26.194
<v Speaker 0>be potentially dangerous and then giving people alerts

00:40:26.194 --> 00:40:27.235
<v Speaker 0>on that information.

00:40:28.275 --> 00:40:30.115
<v Speaker 0>And if I scroll to the bottom, we

00:40:30.115 --> 00:40:31.395
<v Speaker 0>had 3,000

00:40:31.714 --> 00:40:34.434
<v Speaker 0>lines of YAML. So Do do you want

00:40:34.434 --> 00:40:36.194
<v Speaker 1>to know a very funny story about Falco

00:40:36.194 --> 00:40:37.800
<v Speaker 1>rules? I would love to.

00:40:38.440 --> 00:40:41.160
<v Speaker 1>At at some point, we introduced the rules

00:40:41.160 --> 00:40:44.120
<v Speaker 1>so that we can detect whether or not

00:40:44.600 --> 00:40:47.160
<v Speaker 1>your cluster is mining some Bitcoins.

00:40:47.480 --> 00:40:48.360
<v Speaker 1>Right? At

00:40:49.400 --> 00:40:49.880
<v Speaker 1>that point,

00:40:50.855 --> 00:40:53.335
<v Speaker 1>to detect if we were mining Bitcoins,

00:40:53.815 --> 00:40:55.095
<v Speaker 1>the only way

00:40:55.815 --> 00:40:57.015
<v Speaker 1>that we had

00:40:57.575 --> 00:40:59.255
<v Speaker 1>was I mean, because, you know, a Bitcoin

00:40:59.255 --> 00:41:01.494
<v Speaker 1>miner what does a Bitcoin miner do? Right?

00:41:01.494 --> 00:41:03.620
<v Speaker 1>I mean, they are all different. A very

00:41:03.620 --> 00:41:05.220
<v Speaker 1>common thing that they do is that they

00:41:05.220 --> 00:41:06.740
<v Speaker 1>connect to a miner pool

00:41:07.460 --> 00:41:08.660
<v Speaker 1>to, you know,

00:41:09.380 --> 00:41:11.620
<v Speaker 1>exchange keys and, you know, say, yeah. Yeah.

00:41:11.620 --> 00:41:13.300
<v Speaker 1>I miner this. I miner that. Do I

00:41:13.300 --> 00:41:14.180
<v Speaker 1>need tokens?

00:41:14.420 --> 00:41:14.740
<v Speaker 1>And

00:41:15.545 --> 00:41:17.705
<v Speaker 1>so what we did, we created a rule

00:41:18.265 --> 00:41:20.345
<v Speaker 1>that connects to minor pools

00:41:22.265 --> 00:41:24.425
<v Speaker 1>to figure out their IP address

00:41:24.665 --> 00:41:26.105
<v Speaker 1>so that we can

00:41:26.585 --> 00:41:29.130
<v Speaker 1>filter out the IP address for rules. At

00:41:29.130 --> 00:41:31.210
<v Speaker 1>some point, people start opening issues of Falco

00:41:31.210 --> 00:41:32.810
<v Speaker 1>is connected to minor pools.

00:41:32.970 --> 00:41:34.090
<v Speaker 1>It's a minor,

00:41:35.529 --> 00:41:37.369
<v Speaker 1>and Falco was not really a minor. But

00:41:37.369 --> 00:41:39.289
<v Speaker 1>that was a good idea, honestly, because, know,

00:41:39.289 --> 00:41:40.410
<v Speaker 1>you can make some millions.

00:41:41.465 --> 00:41:44.265
<v Speaker 2>We were probably on an island somewhere.

00:41:44.265 --> 00:41:44.665
<v Speaker 2>Yeah.

00:41:46.505 --> 00:41:47.785
<v Speaker 0>Yeah. Well, I guess That would be very

00:41:47.785 --> 00:41:50.185
<v Speaker 2>cool. Yeah. If you're working on security software

00:41:50.185 --> 00:41:51.865
<v Speaker 0>that helps people there on that stuff. It's

00:41:51.865 --> 00:41:53.385
<v Speaker 0>also the best backdoor, though, where you could

00:41:53.385 --> 00:41:54.665
<v Speaker 0>just go and make all the crypto you

00:41:54.665 --> 00:41:55.785
<v Speaker 0>want. So why not?

00:41:57.750 --> 00:41:58.470
<v Speaker 0>Okay.

00:41:58.550 --> 00:42:00.710
<v Speaker 0>So We don't do that. No. Of course

00:42:00.710 --> 00:42:02.950
<v Speaker 0>not. We're We're we're good people. So

00:42:03.270 --> 00:42:05.510
<v Speaker 0>we have Falco running on all of these

00:42:05.510 --> 00:42:06.230
<v Speaker 0>machines.

00:42:06.710 --> 00:42:09.110
<v Speaker 0>We can see right away that we're getting

00:42:09.315 --> 00:42:12.435
<v Speaker 0>output to our system d log that tells

00:42:12.435 --> 00:42:13.955
<v Speaker 0>us when bad things are happening.

00:42:14.515 --> 00:42:17.075
<v Speaker 0>Is the next step now to hook up

00:42:17.075 --> 00:42:18.994
<v Speaker 0>the Kubernetes audit log, or is there something

00:42:18.994 --> 00:42:20.515
<v Speaker 0>else that you you wanna show off just

00:42:20.515 --> 00:42:22.930
<v Speaker 0>from this setup that we have? Before

00:42:22.930 --> 00:42:24.370
<v Speaker 1>we dive into that, I would love to

00:42:24.370 --> 00:42:26.850
<v Speaker 1>just say something to the audience just for,

00:42:26.850 --> 00:42:28.130
<v Speaker 1>you know, completeness.

00:42:28.610 --> 00:42:30.530
<v Speaker 1>Because you installed Falco

00:42:30.610 --> 00:42:31.250
<v Speaker 1>in,

00:42:31.890 --> 00:42:34.395
<v Speaker 1>you know, with APT in all your machines.

00:42:34.395 --> 00:42:36.795
<v Speaker 1>Right? And, you know, in a real production

00:42:36.795 --> 00:42:37.595
<v Speaker 1>environment,

00:42:37.675 --> 00:42:39.275
<v Speaker 1>what you will do

00:42:39.755 --> 00:42:41.835
<v Speaker 1>is to, you know, put the Falco logs

00:42:41.835 --> 00:42:43.995
<v Speaker 1>somewhere or be able to, you know, at

00:42:43.995 --> 00:42:45.595
<v Speaker 1>at least see them in a way that

00:42:45.595 --> 00:42:48.190
<v Speaker 1>it's not SSH in the machine. So Falco

00:42:48.190 --> 00:42:50.030
<v Speaker 1>has some constructs to do that that you

00:42:50.030 --> 00:42:52.750
<v Speaker 1>can use. Falco can write logs to either

00:42:52.750 --> 00:42:56.030
<v Speaker 1>a file or to the CS log or

00:42:56.030 --> 00:42:58.110
<v Speaker 1>to To another program. It can be like

00:42:58.110 --> 00:42:59.790
<v Speaker 1>you're doing to other program.

00:43:00.525 --> 00:43:02.285
<v Speaker 1>It can use a it can it has

00:43:02.285 --> 00:43:04.845
<v Speaker 1>a gRPC server where it can connect where

00:43:04.845 --> 00:43:06.285
<v Speaker 1>it can connect with the g r p

00:43:06.365 --> 00:43:08.525
<v Speaker 1>with a go or rust or a Python

00:43:08.525 --> 00:43:10.605
<v Speaker 1>client that are already there. So you can,

00:43:10.605 --> 00:43:12.444
<v Speaker 1>you know, integrate that into, you know, your

00:43:12.444 --> 00:43:14.205
<v Speaker 1>stream log stream pipeline.

00:43:14.684 --> 00:43:15.005
<v Speaker 1>Or,

00:43:15.740 --> 00:43:17.900
<v Speaker 1>you know, we have a software in the

00:43:17.900 --> 00:43:20.780
<v Speaker 1>Falco security organization which is called Falco Sidekick

00:43:20.859 --> 00:43:22.700
<v Speaker 1>that, you know, for example, can take,

00:43:23.180 --> 00:43:25.099
<v Speaker 1>the Falco logs and send them to Slack

00:43:25.099 --> 00:43:27.579
<v Speaker 1>or send them to AWS SNS or these

00:43:27.579 --> 00:43:29.885
<v Speaker 1>kind things. So in a production environment, you

00:43:29.885 --> 00:43:31.645
<v Speaker 1>will have also that piece

00:43:31.885 --> 00:43:34.045
<v Speaker 1>that, you know, strings along somewhere

00:43:34.445 --> 00:43:36.685
<v Speaker 1>so that you can analyze them, for example.

00:43:36.685 --> 00:43:39.645
<v Speaker 1>Right? But that's, you know, not something that

00:43:39.645 --> 00:43:41.165
<v Speaker 1>we do, like, in this

00:43:41.485 --> 00:43:42.045
<v Speaker 1>session.

00:43:42.840 --> 00:43:44.680
<v Speaker 0>Yeah. That makes sense. Very

00:43:44.760 --> 00:43:45.800
<v Speaker 1>good for that.

00:43:47.080 --> 00:43:49.720
<v Speaker 0>Okay. Cool. Oh, let's go with the audit.

00:43:50.440 --> 00:43:51.160
<v Speaker 0>Yep.

00:43:51.560 --> 00:43:52.920
<v Speaker 0>Okay.

00:43:53.640 --> 00:43:54.680
<v Speaker 1>What what does that mean?

00:43:55.404 --> 00:43:57.644
<v Speaker 1>Yeah. Oh, so we said that we have

00:43:57.644 --> 00:43:59.085
<v Speaker 1>a Falco web server.

00:43:59.404 --> 00:43:59.964
<v Speaker 1>Right?

00:44:00.605 --> 00:44:02.444
<v Speaker 1>The first thing that you can try to

00:44:02.444 --> 00:44:02.925
<v Speaker 1>do

00:44:03.724 --> 00:44:05.645
<v Speaker 1>is to actually send

00:44:07.325 --> 00:44:09.484
<v Speaker 1>event ourself. Like, let's pretend that you are

00:44:09.484 --> 00:44:11.930
<v Speaker 1>Kubernetes. Right? And we want to trigger an

00:44:11.930 --> 00:44:13.770
<v Speaker 1>event to Falco.

00:44:14.010 --> 00:44:16.809
<v Speaker 1>I'm sending the comment to you because we

00:44:16.809 --> 00:44:18.650
<v Speaker 1>don't want to figure it to figure that

00:44:18.650 --> 00:44:19.290
<v Speaker 1>out.

00:44:19.690 --> 00:44:21.529
<v Speaker 1>Give me a second. Yeah. Sure.

00:44:24.954 --> 00:44:26.395
<v Speaker 1>Okay.

00:44:26.714 --> 00:44:27.435
<v Speaker 1>So

00:44:28.875 --> 00:44:30.635
<v Speaker 0>I like the sound of your switches.

00:44:33.595 --> 00:44:35.115
<v Speaker 1>I don't know if it can I send

00:44:35.115 --> 00:44:36.954
<v Speaker 1>Jason in this private chat?

00:44:38.040 --> 00:44:39.960
<v Speaker 0>Yeah. Sure. It'll work.

00:44:40.440 --> 00:44:41.480
<v Speaker 1>It should work.

00:44:42.040 --> 00:44:44.440
<v Speaker 1>Okay. This is an event. You should just

00:44:44.440 --> 00:44:45.720
<v Speaker 1>save it to

00:44:46.360 --> 00:44:47.960
<v Speaker 1>you just copy the command and save it

00:44:47.960 --> 00:44:48.760
<v Speaker 1>to a file.

00:44:50.040 --> 00:44:53.080
<v Speaker 2>Are we sure it has not been

00:44:52.555 --> 00:44:54.075
<v Speaker 2>trunk truncated,

00:44:54.315 --> 00:44:56.795
<v Speaker 2>Laura? Oh, maybe yes. It has. I I

00:44:56.795 --> 00:44:58.795
<v Speaker 1>can I can send a guest? Maybe Yeah.

00:44:58.795 --> 00:44:59.755
<v Speaker 0>Sure. Yeah.

00:45:00.235 --> 00:45:01.355
<v Speaker 2>Share a guest.

00:45:02.395 --> 00:45:04.315
<v Speaker 1>I I knew. I knew. I I should

00:45:04.315 --> 00:45:05.195
<v Speaker 1>have done this before.

00:45:06.200 --> 00:45:07.880
<v Speaker 1>Things dot txt

00:45:09.720 --> 00:45:11.000
<v Speaker 1>and then this.

00:45:15.800 --> 00:45:16.280
<v Speaker 1>Alright.

00:45:18.615 --> 00:45:21.335
<v Speaker 1>Alright. Here's my guest. Great.

00:45:22.135 --> 00:45:24.855
<v Speaker 1>So just a guest, it tests two comments

00:45:25.095 --> 00:45:27.735
<v Speaker 1>in a file name, things update txt.

00:45:29.975 --> 00:45:32.775
<v Speaker 1>And the first one creates

00:45:32.220 --> 00:45:34.300
<v Speaker 1>just do them one by one because we

00:45:34.300 --> 00:45:35.020
<v Speaker 1>need to

00:45:35.420 --> 00:45:38.380
<v Speaker 1>the first one is creates a file sample

00:45:38.380 --> 00:45:41.099
<v Speaker 1>event dot JSON. So what happens when the

00:45:41.099 --> 00:45:41.980
<v Speaker 1>Kubernetes

00:45:43.020 --> 00:45:45.580
<v Speaker 1>when Kubernetes sends audit log is that it

00:45:45.580 --> 00:45:47.820
<v Speaker 1>it just takes an endpoint with some JSON.

00:45:47.934 --> 00:45:48.575
<v Speaker 1>Right?

00:45:49.375 --> 00:45:52.414
<v Speaker 1>And, like, surprising, it's not the YAML.

00:45:52.414 --> 00:45:52.974
<v Speaker 1>So

00:45:54.015 --> 00:45:55.455
<v Speaker 1>it send this event,

00:45:56.174 --> 00:45:58.974
<v Speaker 1>and the event here should trigger

00:45:59.055 --> 00:46:00.255
<v Speaker 1>Falco

00:46:01.055 --> 00:46:03.135
<v Speaker 1>a Falco rule

00:46:02.440 --> 00:46:05.400
<v Speaker 1>described in Kate's audit rule YAML,

00:46:05.960 --> 00:46:08.120
<v Speaker 1>and you shall see it in the Falco

00:46:08.120 --> 00:46:10.040
<v Speaker 1>log. This is just to confirm that, you

00:46:10.040 --> 00:46:11.080
<v Speaker 1>know, Falco

00:46:11.160 --> 00:46:12.760
<v Speaker 1>is configured correctly,

00:46:12.840 --> 00:46:13.640
<v Speaker 1>and it's working

00:46:14.195 --> 00:46:18.195
<v Speaker 1>to accept Falco Kubernetes audit event should be,

00:46:18.435 --> 00:46:19.715
<v Speaker 1>like that by default.

00:46:19.875 --> 00:46:21.315
<v Speaker 1>But we just, you know, want to see

00:46:21.315 --> 00:46:23.155
<v Speaker 1>an event before we configure

00:46:23.475 --> 00:46:26.515
<v Speaker 1>of Kubernetes itself to send them so that

00:46:26.515 --> 00:46:28.835
<v Speaker 1>we don't think, hey. It's it's, it's Falco

00:46:28.835 --> 00:46:31.370
<v Speaker 1>that's not accepting event or something like that.

00:46:32.650 --> 00:46:34.650
<v Speaker 1>So then you can do the cool command

00:46:34.650 --> 00:46:35.530
<v Speaker 1>sent to you.

00:46:37.450 --> 00:46:39.770
<v Speaker 0>Okay. So this is just gonna send

00:46:40.090 --> 00:46:42.890
<v Speaker 0>that to Yes. The Falco web server? Yeah.

00:46:42.890 --> 00:46:46.055
<v Speaker 1>This, yeah, opens the sample event event JSON

00:46:46.055 --> 00:46:48.215
<v Speaker 1>file and just sends it to the case,

00:46:48.535 --> 00:46:50.455
<v Speaker 1>add it, and says, okay.

00:46:51.175 --> 00:46:52.295
<v Speaker 1>And you can now

00:46:52.615 --> 00:46:54.455
<v Speaker 1>yeah. We have to improve it. And you

00:46:54.455 --> 00:46:55.815
<v Speaker 1>can now return our CTL,

00:46:56.180 --> 00:46:59.060
<v Speaker 1>and it says, warning request by anonymous users.

00:46:59.380 --> 00:47:00.340
<v Speaker 1>Allowed

00:47:00.340 --> 00:47:01.540
<v Speaker 1>a verb. Create

00:47:03.060 --> 00:47:04.660
<v Speaker 1>API need spaces.

00:47:04.820 --> 00:47:05.380
<v Speaker 2>So

00:47:07.540 --> 00:47:09.780
<v Speaker 1>this is how an audit log that triggers

00:47:09.780 --> 00:47:12.055
<v Speaker 1>a rule looks like. And you could open

00:47:12.055 --> 00:47:14.535
<v Speaker 1>the rule file for the create Savvy logs

00:47:14.695 --> 00:47:15.575
<v Speaker 1>and see

00:47:15.735 --> 00:47:18.615
<v Speaker 1>the actual The re this rule one, request

00:47:18.615 --> 00:47:19.975
<v Speaker 2>by anonymous user.

00:47:21.095 --> 00:47:21.575
<v Speaker 1>Exactly.

00:47:24.730 --> 00:47:26.890
<v Speaker 0>Okay. So we'll It's very cool because that

00:47:26.970 --> 00:47:28.569
<v Speaker 1>when you have Falco ops, you can also

00:47:28.809 --> 00:47:31.050
<v Speaker 1>at some point, you cannot start ignoring them.

00:47:32.009 --> 00:47:32.490
<v Speaker 1>No.

00:47:33.130 --> 00:47:35.130
<v Speaker 2>It's the other it's the other file, the

00:47:35.130 --> 00:47:37.369
<v Speaker 2>file named gates underscore auditor.

00:47:38.835 --> 00:47:39.715
<v Speaker 2>Exactly.

00:47:40.835 --> 00:47:41.555
<v Speaker 2>Yes?

00:47:42.755 --> 00:47:43.875
<v Speaker 2>Exactly. So

00:47:45.395 --> 00:47:47.715
<v Speaker 1>the rule the rule sees it's a Kubernetes

00:47:47.715 --> 00:47:48.515
<v Speaker 1>event,

00:47:48.915 --> 00:47:50.755
<v Speaker 1>and the username is system anonymous.

00:47:51.690 --> 00:47:55.210
<v Speaker 1>And it their authentication was allowed. And, you

00:47:55.210 --> 00:47:57.849
<v Speaker 1>know, anonymous authentication should not be allowed in

00:47:57.849 --> 00:47:58.810
<v Speaker 1>your clusters.

00:47:59.210 --> 00:48:01.450
<v Speaker 1>And this is not manages to do that.

00:48:03.965 --> 00:48:04.525
<v Speaker 1>Yeah.

00:48:05.245 --> 00:48:08.285
<v Speaker 1>And this is to match the SYS benchmarks.

00:48:08.605 --> 00:48:10.845
<v Speaker 1>There's a CIS benchmark

00:48:11.965 --> 00:48:13.325
<v Speaker 1>one one one that

00:48:14.205 --> 00:48:15.885
<v Speaker 1>we I mean, every time a c I

00:48:16.045 --> 00:48:18.045
<v Speaker 1>CIS benchmark

00:48:17.380 --> 00:48:20.180
<v Speaker 1>comes out or a courtesy CV comes out,

00:48:20.500 --> 00:48:22.660
<v Speaker 1>we try to update the rules files both

00:48:22.660 --> 00:48:24.820
<v Speaker 1>for Kubernetes audit and both for the Ciscos

00:48:24.820 --> 00:48:25.300
<v Speaker 1>to

00:48:25.780 --> 00:48:27.220
<v Speaker 1>make sure that we are there from that

00:48:27.220 --> 00:48:28.020
<v Speaker 1>behavior.

00:48:29.700 --> 00:48:30.900
<v Speaker 0>Alright. Awesome.

00:48:34.025 --> 00:48:36.025
<v Speaker 1>If we find the email for the CV.

00:48:36.585 --> 00:48:38.825
<v Speaker 0>So I'm just processing in my head. So

00:48:38.825 --> 00:48:39.945
<v Speaker 0>we actually without

00:48:40.424 --> 00:48:42.585
<v Speaker 0>enabling any of the kubelet flags, we we

00:48:42.585 --> 00:48:45.020
<v Speaker 0>just showed that the Kubernetes stuff works. Right?

00:48:45.020 --> 00:48:48.780
<v Speaker 0>Like, we Yeah. We created a Kubernetes

00:48:49.020 --> 00:48:49.820
<v Speaker 0>JSON,

00:48:49.900 --> 00:48:51.820
<v Speaker 0>and then we just send it to Falco

00:48:51.820 --> 00:48:52.780
<v Speaker 0>directly.

00:48:52.780 --> 00:48:55.020
<v Speaker 0>And Yeah. This event, of course, didn't really

00:48:55.020 --> 00:48:57.339
<v Speaker 1>happen in Kubernetes. It's just that we simulate

00:48:57.339 --> 00:48:57.500
<v Speaker 1>it.

00:48:58.194 --> 00:49:00.674
<v Speaker 1>We can now go and edit the the

00:49:00.674 --> 00:49:02.755
<v Speaker 1>Kubernetes API server flags

00:49:03.234 --> 00:49:05.955
<v Speaker 1>and configure it with the,

00:49:06.994 --> 00:49:07.715
<v Speaker 1>the

00:49:08.194 --> 00:49:10.994
<v Speaker 1>with the audit log path, audit policy file,

00:49:12.000 --> 00:49:14.400
<v Speaker 1>and audit webhook config file.

00:49:17.280 --> 00:49:20.400
<v Speaker 1>And in the Falco evolution repository,

00:49:20.400 --> 00:49:22.240
<v Speaker 1>we have an audit policy

00:49:22.560 --> 00:49:23.600
<v Speaker 1>that you can pass.

00:49:24.935 --> 00:49:27.494
<v Speaker 1>But that is basically how you configure Kubernetes

00:49:27.494 --> 00:49:29.975
<v Speaker 1>for, you know, sending events on endpoint.

00:49:30.695 --> 00:49:32.775
<v Speaker 1>The for Falco, the dynamic

00:49:33.494 --> 00:49:34.455
<v Speaker 1>webhook

00:49:34.615 --> 00:49:35.335
<v Speaker 1>feature

00:49:35.494 --> 00:49:37.015
<v Speaker 1>that existed in Kubernetes,

00:49:37.539 --> 00:49:38.339
<v Speaker 1>like, eight

00:49:38.980 --> 00:49:41.300
<v Speaker 1>up until 01/18 was very useful.

00:49:41.619 --> 00:49:44.500
<v Speaker 1>But, you know, it got dropped, so everyone

00:49:44.500 --> 00:49:45.859
<v Speaker 1>who needs to configure

00:49:46.180 --> 00:49:48.420
<v Speaker 1>their Kubernetes cluster needs to do this manual

00:49:48.420 --> 00:49:50.339
<v Speaker 1>step, which is something that you are working

00:49:50.339 --> 00:49:51.540
<v Speaker 1>on, you're removing,

00:49:51.700 --> 00:49:53.885
<v Speaker 1>if it's even feasible for us.

00:49:54.765 --> 00:49:56.685
<v Speaker 1>But every cluster is different. You might not

00:49:56.685 --> 00:49:57.885
<v Speaker 1>have, you know, cluster.

00:49:58.125 --> 00:49:59.965
<v Speaker 1>You might have a cluster from a distribution

00:49:59.965 --> 00:50:01.885
<v Speaker 1>that doesn't do the same things in that

00:50:01.885 --> 00:50:04.765
<v Speaker 1>way. So it's just, you know, just configuring

00:50:04.765 --> 00:50:07.559
<v Speaker 1>the other log. So where is your API

00:50:07.559 --> 00:50:09.080
<v Speaker 1>server flags,

00:50:09.559 --> 00:50:10.440
<v Speaker 1>file?

00:50:12.279 --> 00:50:13.080
<v Speaker 2>Yep.

00:50:14.839 --> 00:50:15.720
<v Speaker 0>Kubernetes

00:50:15.960 --> 00:50:18.039
<v Speaker 0>No worries. One step at time. Server.

00:50:29.464 --> 00:50:30.505
<v Speaker 0>Container d.

00:50:33.400 --> 00:50:34.920
<v Speaker 0>I did look this up, and I have

00:50:34.920 --> 00:50:36.520
<v Speaker 0>drawn a blank. Let's see.

00:50:38.360 --> 00:50:40.680
<v Speaker 1>Oh, before before you, you know, start changing

00:50:40.680 --> 00:50:43.560
<v Speaker 1>it on every node, we should just also

00:50:43.560 --> 00:50:45.480
<v Speaker 1>download the audit policy file.

00:50:45.720 --> 00:50:47.480
<v Speaker 2>Yeah. Go to

00:50:48.075 --> 00:50:56.075
<v Speaker 2>github.com/falcosecurity/evolutionexamplefolderevolution.Evolution.

00:50:56.075 --> 00:50:56.875
<v Speaker 0>Yeah. Okay.

00:50:58.075 --> 00:50:59.595
<v Speaker 1>Yeah. It's like a bug.

00:51:00.075 --> 00:51:01.275
<v Speaker 0>I think I've looked at this.

00:51:02.230 --> 00:51:06.550
<v Speaker 2>Yeah. Go go yeah. One app. Yes. Auditing

00:51:06.550 --> 00:51:08.230
<v Speaker 2>policy. Yeah. More. Okay.

00:51:09.110 --> 00:51:10.870
<v Speaker 1>Yeah. We have a good extension to do

00:51:10.870 --> 00:51:13.190
<v Speaker 1>this here, but we are trying to do

00:51:13.190 --> 00:51:14.230
<v Speaker 1>it without looking at it.

00:51:15.465 --> 00:51:16.825
<v Speaker 0>Okay. So you want me to copy all

00:51:16.825 --> 00:51:17.465
<v Speaker 0>of this?

00:51:17.785 --> 00:51:19.625
<v Speaker 1>Yeah. Just download this file in all your

00:51:19.625 --> 00:51:22.265
<v Speaker 1>notes. Yeah. Do get this file or do

00:51:22.265 --> 00:51:24.665
<v Speaker 2>get as you prefer. In a place where

00:51:24.665 --> 00:51:26.825
<v Speaker 1>you feel like you can leave it there.

00:51:26.905 --> 00:51:28.185
<v Speaker 1>Like, for example,

00:51:28.905 --> 00:51:31.620
<v Speaker 1>I don't know, ATC Falco over

00:51:34.420 --> 00:51:35.619
<v Speaker 0>Okay.

00:51:35.619 --> 00:51:36.980
<v Speaker 0>So broadcast

00:51:36.980 --> 00:51:38.260
<v Speaker 0>w get

00:51:40.260 --> 00:51:41.140
<v Speaker 1>Broadcast. Yes.

00:51:42.275 --> 00:51:45.475
<v Speaker 1>I'm broadcasting some we are broadcasting a broadcast.

00:51:46.275 --> 00:51:48.115
<v Speaker 0>Oh my gosh. Etcetera.

00:51:48.115 --> 00:51:49.475
<v Speaker 0>I'll just start here.

00:51:51.075 --> 00:51:51.715
<v Speaker 1>Yeah.

00:51:51.955 --> 00:51:53.715
<v Speaker 1>Yep. I should have

00:51:53.955 --> 00:51:56.720
<v Speaker 0>auto policy. Good. Very good. You don't have

00:51:56.720 --> 00:51:58.560
<v Speaker 1>to configure it because it's actually,

00:51:59.040 --> 00:52:01.280
<v Speaker 1>you know, set it up to

00:52:02.560 --> 00:52:03.440
<v Speaker 1>to

00:52:04.960 --> 00:52:07.359
<v Speaker 1>the default things, which should be good.

00:52:08.295 --> 00:52:11.255
<v Speaker 1>And now we need the web config

00:52:12.055 --> 00:52:12.775
<v Speaker 1>for

00:52:13.815 --> 00:52:16.295
<v Speaker 1>to pass to Kubernetes, which should should also

00:52:16.295 --> 00:52:17.175
<v Speaker 1>be there,

00:52:17.494 --> 00:52:19.255
<v Speaker 1>but they can drop it in the guest.

00:52:19.415 --> 00:52:20.295
<v Speaker 0>This one here?

00:52:20.775 --> 00:52:21.415
<v Speaker 2>Yeah.

00:52:21.575 --> 00:52:22.135
<v Speaker 2>That one.

00:52:22.710 --> 00:52:25.990
<v Speaker 1>Exactly. Yeah. We have to change Falco service

00:52:25.990 --> 00:52:29.510
<v Speaker 1>cluster IP to local 127001.

00:52:29.670 --> 00:52:30.390
<v Speaker 1>Yep.

00:52:31.990 --> 00:52:32.710
<v Speaker 0>Okay.

00:52:33.910 --> 00:52:35.430
<v Speaker 0>This is just something I'm going to apply

00:52:35.430 --> 00:52:36.550
<v Speaker 0>to the cluster. Right?

00:52:38.234 --> 00:52:40.395
<v Speaker 1>No. This is something that you still pass

00:52:40.395 --> 00:52:41.835
<v Speaker 1>it to the Kubernetes API server.

00:52:42.395 --> 00:52:43.755
<v Speaker 2>To the to the flags.

00:52:44.555 --> 00:52:46.234
<v Speaker 1>We need to pass to the Kubernetes API

00:52:46.234 --> 00:52:49.115
<v Speaker 1>server two files, the audit policy file and

00:52:49.115 --> 00:52:50.474
<v Speaker 1>the audit web book config.

00:52:50.820 --> 00:52:52.020
<v Speaker 1>And What?

00:52:52.660 --> 00:52:54.500
<v Speaker 2>Also the audit log file.

00:52:54.660 --> 00:52:56.820
<v Speaker 1>Yeah. And also the other log file if

00:52:56.820 --> 00:52:58.980
<v Speaker 1>you want to save the logs of file

00:52:58.980 --> 00:52:59.620
<v Speaker 1>too.

00:53:02.100 --> 00:53:04.580
<v Speaker 1>Okay. That's great. Yep. That was good.

00:53:05.460 --> 00:53:07.655
<v Speaker 0>So what's next? We have to add the

00:53:07.655 --> 00:53:10.775
<v Speaker 0>the API server flags. Right? Exactly. Edit API

00:53:10.775 --> 00:53:11.895
<v Speaker 1>server flags.

00:53:11.895 --> 00:53:14.935
<v Speaker 0>Alright. So let me find the status.

00:53:15.575 --> 00:53:17.175
<v Speaker 1>Let let's over this. Go ahead and discuss

00:53:17.175 --> 00:53:18.775
<v Speaker 1>our stats again after we do this.

00:53:19.800 --> 00:53:21.080
<v Speaker 0>It it will.

00:53:21.880 --> 00:53:23.800
<v Speaker 0>It looks like it's being controlled by the

00:53:23.880 --> 00:53:26.280
<v Speaker 1>Can you edit them via the cluster API

00:53:26.280 --> 00:53:28.280
<v Speaker 1>thing that you did, or you can't? I'm

00:53:28.280 --> 00:53:30.440
<v Speaker 1>not sure. I could, but we'd have to

00:53:30.440 --> 00:53:33.555
<v Speaker 0>wait for that to roll the changes out.

00:53:33.555 --> 00:53:35.555
<v Speaker 1>Yeah. Just my curiosity. I don't want to

00:53:35.555 --> 00:53:38.355
<v Speaker 1>do it. I mean, I'm scared already. But

00:53:39.155 --> 00:53:40.755
<v Speaker 0>Okay. So Kubernetes

00:53:40.755 --> 00:53:41.714
<v Speaker 0>manifest,

00:53:41.714 --> 00:53:42.994
<v Speaker 0>cube API server.

00:53:46.230 --> 00:53:47.910
<v Speaker 0>Alright. Okay. We got what we need here.

00:53:47.910 --> 00:53:48.390
<v Speaker 0>So

00:53:48.790 --> 00:53:51.670
<v Speaker 1>That's cool. So the flags are But we

00:53:51.670 --> 00:53:53.190
<v Speaker 0>wanted to do that on all of them.

00:53:53.190 --> 00:53:54.150
<v Speaker 0>So let me

00:53:55.109 --> 00:53:55.670
<v Speaker 0>Kubernetes

00:53:56.150 --> 00:53:57.350
<v Speaker 0>manifests

00:53:57.350 --> 00:53:57.910
<v Speaker 0>cube

00:53:58.390 --> 00:53:59.830
<v Speaker 0>API server. Okay.

00:54:00.855 --> 00:54:02.935
<v Speaker 1>Yeah. So the flags that you have to

00:54:02.935 --> 00:54:03.815
<v Speaker 1>add are

00:54:04.935 --> 00:54:06.135
<v Speaker 1>are developer I

00:54:07.494 --> 00:54:08.215
<v Speaker 0>think that's

00:54:08.695 --> 00:54:09.655
<v Speaker 0>I've got

00:54:09.975 --> 00:54:11.895
<v Speaker 0>something. Let me let me copy them in

00:54:11.895 --> 00:54:13.015
<v Speaker 2>the chat, probably.

00:54:14.250 --> 00:54:15.690
<v Speaker 0>Oh, yeah. Sure. Go for it.

00:54:18.170 --> 00:54:20.410
<v Speaker 1>I think they are in documentation too, but,

00:54:20.890 --> 00:54:22.410
<v Speaker 1>I mean, I hope they are.

00:54:24.410 --> 00:54:26.490
<v Speaker 2>Well, the first one should be this one,

00:54:27.405 --> 00:54:30.125
<v Speaker 2>dash epic server dash shark equal audit policy

00:54:30.125 --> 00:54:30.925
<v Speaker 2>file.

00:54:31.645 --> 00:54:33.405
<v Speaker 2>And then the other is about the workbook

00:54:33.405 --> 00:54:34.525
<v Speaker 2>config file.

00:54:35.805 --> 00:54:38.525
<v Speaker 1>Yeah. Just change audit policy file with the

00:54:38.525 --> 00:54:41.325
<v Speaker 1>if you copy the net c file. I

00:54:40.839 --> 00:54:44.839
<v Speaker 1>don't remember where you copied it. Yeah. I'm

00:54:44.839 --> 00:54:47.960
<v Speaker 2>I'm writing the comments in the private chat.

00:54:50.040 --> 00:54:52.200
<v Speaker 0>You've already done it for me. Perfect. Thank

00:54:52.200 --> 00:54:53.240
<v Speaker 0>you, Leo.

00:54:53.559 --> 00:54:54.359
<v Speaker 2>You're welcome.

00:54:56.055 --> 00:54:57.815
<v Speaker 1>Those file there, or they are in Etsy

00:54:57.815 --> 00:55:00.375
<v Speaker 1>Falco? I don't remember. Alright. Etsy. They

00:55:00.855 --> 00:55:03.335
<v Speaker 2>are in Etsy, not Etsy Falco. Okay. So

00:55:03.335 --> 00:55:05.415
<v Speaker 0>we're adding two Kube API server arguments. One

00:55:05.415 --> 00:55:07.335
<v Speaker 0>of them is audit policy file, which goes

00:55:07.335 --> 00:55:09.815
<v Speaker 0>to the YAML file we got from the

00:55:08.970 --> 00:55:12.090
<v Speaker 0>Sysdig repository, the evolution repository. No. I I

00:55:12.090 --> 00:55:13.930
<v Speaker 1>need I wait. Wait. Wait. This is wrong.

00:55:13.930 --> 00:55:16.330
<v Speaker 1>We have to remove Kube API server arg

00:55:16.330 --> 00:55:18.010
<v Speaker 1>and just leave

00:55:18.170 --> 00:55:21.530
<v Speaker 1>dash dash eight audit policy file. Right. Yes.

00:55:21.530 --> 00:55:23.450
<v Speaker 2>Yes. Yeah. Of course.

00:55:24.275 --> 00:55:25.635
<v Speaker 0>So dash dash.

00:55:26.035 --> 00:55:28.515
<v Speaker 1>Yeah. Exactly. Yeah. This was for

00:55:28.675 --> 00:55:30.915
<v Speaker 1>k three s k three s. Okay.

00:55:31.315 --> 00:55:33.235
<v Speaker 0>So we're at an audit policy, audit web

00:55:33.235 --> 00:55:35.155
<v Speaker 0>config, and those go to the two YAML

00:55:35.155 --> 00:55:35.795
<v Speaker 0>files.

00:55:35.955 --> 00:55:36.195
<v Speaker 0>Done.

00:55:37.100 --> 00:55:37.980
<v Speaker 1>Exactly.

00:55:39.340 --> 00:55:41.020
<v Speaker 0>And then restart our

00:55:42.380 --> 00:55:43.820
<v Speaker 1>System CTL.

00:55:43.980 --> 00:55:45.180
<v Speaker 1>Demo load.

00:55:47.500 --> 00:55:49.820
<v Speaker 0>So these are running in the cluster

00:55:50.060 --> 00:55:52.585
<v Speaker 0>because they're static manifest. So if I just

00:55:52.585 --> 00:55:54.745
<v Speaker 0>run get pods dash a

00:55:57.065 --> 00:55:58.105
<v Speaker 1>Oh, nice.

00:55:58.265 --> 00:55:59.625
<v Speaker 1>You really broke it?

00:56:00.025 --> 00:56:02.185
<v Speaker 0>I broke it. We have broke it.

00:56:03.305 --> 00:56:06.050
<v Speaker 1>Alright. Alright. So the static manifest that this

00:56:06.050 --> 00:56:07.730
<v Speaker 0>change would have been detected by the kubelet

00:56:07.730 --> 00:56:10.290
<v Speaker 0>as then restarted them. So let's jump over

00:56:10.290 --> 00:56:11.810
<v Speaker 0>to one of them and find out what

00:56:11.810 --> 00:56:12.930
<v Speaker 0>is going on here.

00:56:13.410 --> 00:56:14.130
<v Speaker 0>So

00:56:14.450 --> 00:56:14.930
<v Speaker 0>I

00:56:15.250 --> 00:56:17.250
<v Speaker 1>Very cool. I know that we will have

00:56:17.250 --> 00:56:20.125
<v Speaker 1>broken it. Yeah. We have no no API.

00:56:20.125 --> 00:56:21.005
<v Speaker 0>Doesn't work.

00:56:21.724 --> 00:56:22.765
<v Speaker 0>No.

00:56:22.765 --> 00:56:25.484
<v Speaker 0>Let's just confirm the two paths. So we

00:56:25.484 --> 00:56:27.485
<v Speaker 0>said we had a webhook.YAML.

00:56:28.125 --> 00:56:31.724
<v Speaker 2>Okay. Probably Yeah. We're passing There's no webhook

00:56:31.724 --> 00:56:34.109
<v Speaker 1>config. It's .com. It's webhookYAML.

00:56:34.109 --> 00:56:36.510
<v Speaker 2>It's only webhookYAML. I will rename the file,

00:56:36.510 --> 00:56:38.670
<v Speaker 1>honestly. Easy fix. So

00:56:41.630 --> 00:56:42.350
<v Speaker 1>k.

00:56:42.589 --> 00:56:44.109
<v Speaker 0>And then by magic,

00:56:44.905 --> 00:56:46.985
<v Speaker 0>this is gonna come back any

00:56:46.985 --> 00:56:48.905
<v Speaker 0>second there. It's gonna come back. Are you

00:56:48.905 --> 00:56:50.665
<v Speaker 1>sure? I don't know. Don't know. It's still

00:56:50.665 --> 00:56:51.545
<v Speaker 1>Kubernetes.

00:56:54.985 --> 00:56:56.345
<v Speaker 1>And also Falco.

00:56:56.505 --> 00:56:57.065
<v Speaker 1>So

00:56:57.945 --> 00:56:59.545
<v Speaker 0>Let's restart our Kubelet.

00:57:03.430 --> 00:57:05.430
<v Speaker 0>Alright. So something's still

00:57:05.670 --> 00:57:07.990
<v Speaker 0>failing. So okay. So let's just confirm.

00:57:08.549 --> 00:57:11.190
<v Speaker 0>We have webhook.catyamo.

00:57:11.990 --> 00:57:13.109
<v Speaker 0>And we have Yes.

00:57:13.430 --> 00:57:14.789
<v Speaker 0>Auditpolicy.yamo

00:57:14.789 --> 00:57:15.910
<v Speaker 0>with a dash,

00:57:19.565 --> 00:57:20.525
<v Speaker 0>which is

00:57:21.485 --> 00:57:23.405
<v Speaker 0>auditpolicy.yaml.

00:57:23.405 --> 00:57:25.325
<v Speaker 0>Okay. Those are just Are both yaml or

00:57:25.325 --> 00:57:26.685
<v Speaker 1>y m l?

00:57:27.965 --> 00:57:28.525
<v Speaker 0>Good question.

00:57:30.570 --> 00:57:32.890
<v Speaker 0>Too many tabs. Too many tabs.

00:57:36.730 --> 00:57:37.530
<v Speaker 0>One more.

00:57:38.330 --> 00:57:39.690
<v Speaker 0>Yeah. .Ya

00:57:39.930 --> 00:57:42.410
<v Speaker 0>yeah. They're okay. And do we have any

00:57:42.410 --> 00:57:44.570
<v Speaker 1>logs from the API server, like,

00:57:45.565 --> 00:57:46.045
<v Speaker 1>anywhere? Yes.

00:57:49.005 --> 00:57:50.205
<v Speaker 0>So varlog

00:57:50.605 --> 00:57:51.485
<v Speaker 0>containers.

00:57:52.045 --> 00:57:55.405
<v Speaker 0>Let's get our to the Qtube API server.

00:57:59.849 --> 00:58:02.170
<v Speaker 0>Which one is the most recent?

00:58:02.250 --> 00:58:02.970
<v Speaker 0>This

00:58:04.090 --> 00:58:04.730
<v Speaker 0>one here.

00:58:09.785 --> 00:58:12.665
<v Speaker 0>Okay. So auditpolicy.YAML

00:58:12.665 --> 00:58:14.825
<v Speaker 0>does not No such file of that. So

00:58:14.825 --> 00:58:16.185
<v Speaker 2>the name is not that.

00:58:16.745 --> 00:58:17.785
<v Speaker 0>Alright. Audit.

00:58:25.790 --> 00:58:27.470
<v Speaker 1>It's the same user.

00:58:29.950 --> 00:58:32.830
<v Speaker 0>Okay. So, yes. Here's the challenge. Right? This

00:58:32.830 --> 00:58:34.190
<v Speaker 0>is a static manifest.

00:58:34.190 --> 00:58:34.830
<v Speaker 0>So

00:58:35.390 --> 00:58:37.470
<v Speaker 0>we need to move that file, don't we?

00:58:38.805 --> 00:58:39.525
<v Speaker 0>Maybe.

00:58:39.765 --> 00:58:41.685
<v Speaker 0>We do. So let's look at the mode

00:58:41.685 --> 00:58:43.685
<v Speaker 0>points. Let's just open.

00:58:45.365 --> 00:58:47.525
<v Speaker 1>Oh, yes. Because this is in the container.

00:58:47.525 --> 00:58:49.365
<v Speaker 1>It's not the right.

00:58:49.685 --> 00:58:52.520
<v Speaker 1>Oh, right. Very good. I I love this.

00:58:52.760 --> 00:58:53.160
<v Speaker 1>I

00:58:54.520 --> 00:58:57.000
<v Speaker 0>hate it. But, anyway, so let's

00:58:57.960 --> 00:58:59.160
<v Speaker 2>so we need share the

00:58:59.800 --> 00:59:01.560
<v Speaker 0>Oh, I need to do this in everything.

00:59:01.560 --> 00:59:02.440
<v Speaker 0>Right? So

00:59:02.920 --> 00:59:05.055
<v Speaker 1>Oh, it's very very good. Now so if

00:59:05.055 --> 00:59:06.734
<v Speaker 1>the Kubernetes is not on there, it will

00:59:06.734 --> 00:59:08.494
<v Speaker 1>not be able to just talk to Falco

00:59:08.494 --> 00:59:11.855
<v Speaker 1>via +1 270001

00:59:12.335 --> 00:59:13.215
<v Speaker 1>also.

00:59:13.375 --> 00:59:15.935
<v Speaker 0>Shall we switch over to the backup cluster?

00:59:18.575 --> 00:59:20.095
<v Speaker 0>Or do you wanna or shall we stick

00:59:20.095 --> 00:59:20.494
<v Speaker 0>with this?

00:59:21.110 --> 00:59:22.310
<v Speaker 2>As you prefer.

00:59:23.270 --> 00:59:24.310
<v Speaker 1>Fine. Do do.

00:59:25.750 --> 00:59:27.110
<v Speaker 1>You are David.

00:59:27.110 --> 00:59:28.390
<v Speaker 1>I'm just worried. So

00:59:29.190 --> 00:59:30.950
<v Speaker 0>Okay. So let me explain the problem then

00:59:30.950 --> 00:59:32.390
<v Speaker 0>to the people that are watching. What's happening

00:59:32.390 --> 00:59:35.355
<v Speaker 0>here is our API server is running inside

00:59:35.355 --> 00:59:37.275
<v Speaker 0>of a container and not on a host.

00:59:37.275 --> 00:59:39.115
<v Speaker 0>The challenge with that is these two files

00:59:39.115 --> 00:59:41.515
<v Speaker 0>exist on the host file system. Now what

00:59:41.515 --> 00:59:43.275
<v Speaker 0>we can do is modify the main points

00:59:43.275 --> 00:59:44.875
<v Speaker 0>at the bottom. And if we do that,

00:59:44.875 --> 00:59:46.955
<v Speaker 0>the API server will start. But then Falco

00:59:46.955 --> 00:59:47.835
<v Speaker 0>still has to speak.

00:59:49.160 --> 00:59:50.840
<v Speaker 0>Does Falco speak to the API server or

00:59:50.840 --> 00:59:51.720
<v Speaker 0>the Kubelet?

00:59:52.360 --> 00:59:55.480
<v Speaker 1>API server, but we can I think that

00:59:55.480 --> 00:59:57.560
<v Speaker 1>we can figure it out? Right. Let's do

00:59:57.560 --> 00:59:59.640
<v Speaker 0>it. So let's just I'm gonna move both

00:59:59.640 --> 01:00:01.720
<v Speaker 0>of these files to somewhere that is a

01:00:01.720 --> 01:00:04.355
<v Speaker 0>bit more friendly. So let's call this our

01:00:04.355 --> 01:00:05.315
<v Speaker 0>Falco

01:00:05.715 --> 01:00:07.795
<v Speaker 0>two. That's horrible naming.

01:00:08.035 --> 01:00:10.355
<v Speaker 0>No. Yeah. I'll do that. API server.

01:00:11.155 --> 01:00:13.795
<v Speaker 0>And let's move our web hook and our

01:00:13.795 --> 01:00:15.635
<v Speaker 0>audit fail into the API server.

01:00:16.569 --> 01:00:19.850
<v Speaker 0>Let's modify our static manifest now

01:00:20.089 --> 01:00:22.170
<v Speaker 0>and add that as a mount point.

01:00:22.329 --> 01:00:25.450
<v Speaker 0>So cube API server, jump down the bottom.

01:00:27.450 --> 01:00:29.130
<v Speaker 0>Let's add a new volume,

01:00:30.089 --> 01:00:30.970
<v Speaker 0>host path.

01:00:32.285 --> 01:00:33.085
<v Speaker 0>Mhmm.

01:00:33.965 --> 01:00:36.845
<v Speaker 0>Path slash etcetera API server

01:00:37.005 --> 01:00:38.685
<v Speaker 0>and type

01:00:38.685 --> 01:00:39.725
<v Speaker 0>directory

01:00:39.725 --> 01:00:40.925
<v Speaker 0>or create

01:00:41.565 --> 01:00:42.765
<v Speaker 0>a name

01:00:42.845 --> 01:00:44.845
<v Speaker 0>API server config.

01:00:44.845 --> 01:00:46.765
<v Speaker 0>Now we can go to volume mounts.

01:00:49.970 --> 01:00:51.490
<v Speaker 0>Mount path,

01:00:51.890 --> 01:00:52.450
<v Speaker 0>etcetera,

01:00:52.930 --> 01:00:54.370
<v Speaker 0>API server.

01:00:55.250 --> 01:00:56.690
<v Speaker 0>Read only true.

01:00:57.570 --> 01:00:59.904
<v Speaker 0>And we need the name which I called

01:00:59.904 --> 01:01:00.704
<v Speaker 0>API.

01:01:00.704 --> 01:01:02.545
<v Speaker 2>API server config. I I love how you

01:01:02.545 --> 01:01:03.424
<v Speaker 1>remember all the

01:01:05.184 --> 01:01:07.025
<v Speaker 0>Alright. So that is gonna make that available.

01:01:07.025 --> 01:01:08.385
<v Speaker 0>Now we've one more change to make in

01:01:08.385 --> 01:01:10.385
<v Speaker 0>this file, which is those arguments.

01:01:10.385 --> 01:01:12.944
<v Speaker 0>So instead of here is etcetera,

01:01:12.944 --> 01:01:13.744
<v Speaker 0>API server,

01:01:14.589 --> 01:01:15.630
<v Speaker 0>API

01:01:15.710 --> 01:01:16.430
<v Speaker 0>server.

01:01:16.750 --> 01:01:18.190
<v Speaker 1>Oh, wait. Right?

01:01:19.869 --> 01:01:21.390
<v Speaker 1>I also think that we need to change

01:01:21.390 --> 01:01:21.710
<v Speaker 1>the

01:01:22.270 --> 01:01:23.630
<v Speaker 2>The IP address in

01:01:24.190 --> 01:01:27.150
<v Speaker 0>yeah. So it's advertising on the host IP.

01:01:27.150 --> 01:01:27.950
<v Speaker 0>So we can just change.

01:01:29.065 --> 01:01:31.305
<v Speaker 0>So we should be okay. And we can

01:01:31.305 --> 01:01:33.065
<v Speaker 0>fix that anyway if we need to.

01:01:34.665 --> 01:01:36.505
<v Speaker 0>What happened on these machines?

01:01:37.785 --> 01:01:39.065
<v Speaker 0>We'll just ignore it.

01:01:39.705 --> 01:01:41.625
<v Speaker 0>No. That's a static manifest

01:01:42.410 --> 01:01:44.330
<v Speaker 0>which has now been reapplied.

01:01:44.890 --> 01:01:46.970
<v Speaker 0>I'm gonna feel brave.

01:01:47.850 --> 01:01:50.010
<v Speaker 1>Because you can get notes. Yeah.

01:01:53.770 --> 01:01:55.210
<v Speaker 2>Yes. Party.

01:01:56.255 --> 01:01:59.375
<v Speaker 2>Party online long. It's less notes than before,

01:01:59.375 --> 01:02:02.095
<v Speaker 1>but should be It's okay. No. It's I

01:02:02.095 --> 01:02:02.895
<v Speaker 0>was joking.

01:02:05.215 --> 01:02:07.695
<v Speaker 0>So we got our API server running with

01:02:07.695 --> 01:02:11.290
<v Speaker 0>our Falco and audit integrations. We can celebrate,

01:02:11.290 --> 01:02:13.690
<v Speaker 0>but that's only step one. So next,

01:02:14.809 --> 01:02:16.730
<v Speaker 0>can we confirm that Falco can speak to

01:02:16.730 --> 01:02:17.770
<v Speaker 0>the API server?

01:02:17.930 --> 01:02:19.770
<v Speaker 1>Yeah. Let's open the Falco logs in one

01:02:19.770 --> 01:02:20.650
<v Speaker 1>of the the

01:02:21.210 --> 01:02:22.890
<v Speaker 1>in one of the nodes, and then we

01:02:22.890 --> 01:02:24.809
<v Speaker 1>can try to do something evil

01:02:24.575 --> 01:02:26.415
<v Speaker 1>and see what Falco thinks about that.

01:02:26.734 --> 01:02:27.375
<v Speaker 1>Yeah.

01:02:27.694 --> 01:02:29.375
<v Speaker 0>I see Kubernetes stuff.

01:02:29.855 --> 01:02:32.734
<v Speaker 2>Yeah. So It's working. It seems to be

01:02:32.734 --> 01:02:35.535
<v Speaker 2>working. It seems. Let's now try. Yes. It's

01:02:35.535 --> 01:02:35.855
<v Speaker 1>working.

01:02:36.690 --> 01:02:38.770
<v Speaker 2>Yeah. I'm joking. We knew it was gonna

01:02:38.770 --> 01:02:40.610
<v Speaker 0>work. Right? We knew. It's fine.

01:02:41.089 --> 01:02:43.410
<v Speaker 1>I sent you a call, man. You can

01:02:43.410 --> 01:02:44.370
<v Speaker 1>try to create

01:02:45.250 --> 01:02:48.610
<v Speaker 1>a config map with the credential for, like,

01:02:49.089 --> 01:02:51.890
<v Speaker 1>an AWS his an AWS access key.

01:02:52.355 --> 01:02:54.434
<v Speaker 0>Okay. So I For example

01:02:54.595 --> 01:02:56.835
<v Speaker 0>Well, yeah. Over to

01:02:57.474 --> 01:02:59.234
<v Speaker 0>here. So this is me speaking to our

01:02:59.234 --> 01:03:01.555
<v Speaker 0>cluster. We're creating a conflict map. We're calling

01:03:01.555 --> 01:03:03.635
<v Speaker 0>AWS creds, and we're giving it something that

01:03:03.635 --> 01:03:06.275
<v Speaker 0>looks like a secret. Right? Remove the backslash.

01:03:06.275 --> 01:03:06.434
<v Speaker 1>Yeah.

01:03:08.480 --> 01:03:09.359
<v Speaker 2>After

01:03:09.359 --> 01:03:10.160
<v Speaker 2>AWS

01:03:10.160 --> 01:03:12.560
<v Speaker 2>threads. Yeah. Oh, oh, yep.

01:03:13.920 --> 01:03:14.640
<v Speaker 1>Yeah.

01:03:16.480 --> 01:03:18.560
<v Speaker 1>Yes. So this should alert

01:03:19.599 --> 01:03:21.440
<v Speaker 1>all the Falco instances

01:03:22.525 --> 01:03:23.725
<v Speaker 1>at some point.

01:03:26.525 --> 01:03:28.845
<v Speaker 2>It depends on which instance

01:03:29.005 --> 01:03:30.125
<v Speaker 2>are you locking the

01:03:32.445 --> 01:03:33.005
<v Speaker 0>Ah,

01:03:34.720 --> 01:03:35.520
<v Speaker 0>Okay.

01:03:36.240 --> 01:03:38.400
<v Speaker 0>So if I can't Try try to get

01:03:38.400 --> 01:03:39.120
<v Speaker 1>logs again.

01:03:46.734 --> 01:03:47.855
<v Speaker 2>No. Or

01:03:48.494 --> 01:03:50.815
<v Speaker 1>or maybe just went into sea into the

01:03:50.815 --> 01:03:52.015
<v Speaker 1>sea of the logs.

01:03:53.214 --> 01:03:54.415
<v Speaker 0>So where do you want me to look?

01:03:54.415 --> 01:03:54.895
<v Speaker 0>Sorry.

01:03:56.335 --> 01:03:58.175
<v Speaker 1>We we want to see or or maybe

01:03:58.175 --> 01:04:00.655
<v Speaker 1>it's not in this rule set that things

01:04:00.655 --> 01:04:01.455
<v Speaker 1>I want to trigger.

01:04:04.220 --> 01:04:06.300
<v Speaker 0>Okay. So we can check that as well.

01:04:06.300 --> 01:04:08.940
<v Speaker 0>Right? So Yeah. If we do Kubernetes

01:04:08.940 --> 01:04:09.820
<v Speaker 0>rules

01:04:10.460 --> 01:04:12.859
<v Speaker 0>Yes. I'm assuming if I search for secret

01:04:13.020 --> 01:04:13.820
<v Speaker 1>AWS.

01:04:13.820 --> 01:04:15.580
<v Speaker 1>Yes. Oh, AWS rule.

01:04:16.525 --> 01:04:18.445
<v Speaker 0>Okay. So we have a macro at least.

01:04:18.445 --> 01:04:20.205
<v Speaker 1>I'm saying private credentials.

01:04:20.205 --> 01:04:20.765
<v Speaker 1>Yes.

01:04:21.485 --> 01:04:24.285
<v Speaker 0>And we do have a rule that uses

01:04:24.285 --> 01:04:26.445
<v Speaker 0>the macro as a condition here.

01:04:27.085 --> 01:04:29.325
<v Speaker 1>I believe that there's some other rule that

01:04:29.325 --> 01:04:29.725
<v Speaker 1>it's

01:04:31.119 --> 01:04:32.720
<v Speaker 1>because the way

01:04:34.080 --> 01:04:35.440
<v Speaker 1>events are triggered

01:04:35.599 --> 01:04:38.400
<v Speaker 1>is that if the an event triggers

01:04:38.400 --> 01:04:39.520
<v Speaker 1>a rule first,

01:04:40.320 --> 01:04:42.800
<v Speaker 1>you're not going to see the other. So

01:04:42.800 --> 01:04:44.880
<v Speaker 1>probably the way you create things

01:04:46.194 --> 01:04:49.635
<v Speaker 1>is triggering the rules first. Like, maybe it's

01:04:49.635 --> 01:04:50.675
<v Speaker 1>triggering someone

01:04:50.915 --> 01:04:52.275
<v Speaker 1>some privileged user,

01:04:52.675 --> 01:04:54.434
<v Speaker 1>the other the the other rule that you're

01:04:54.434 --> 01:04:55.315
<v Speaker 1>seeing, right,

01:04:55.875 --> 01:04:57.155
<v Speaker 1>if you show me the logs.

01:04:59.980 --> 01:05:02.460
<v Speaker 0>Yes? Okay. So we wanna look at the

01:05:02.460 --> 01:05:04.380
<v Speaker 0>Falco logs again. Right?

01:05:05.020 --> 01:05:05.820
<v Speaker 1>Yep.

01:05:06.140 --> 01:05:07.900
<v Speaker 1>Yes. The cluster

01:05:07.900 --> 01:05:11.100
<v Speaker 2>binding cluster binding cluster. Yeah. That's a lot

01:05:11.100 --> 01:05:11.500
<v Speaker 1>of stuff.

01:05:12.105 --> 01:05:14.665
<v Speaker 2>There's a there's a lot. Maybe it's even

01:05:15.225 --> 01:05:17.705
<v Speaker 2>before these ones. Yeah. I think I want

01:05:17.705 --> 01:05:18.345
<v Speaker 1>to see

01:05:21.785 --> 01:05:22.985
<v Speaker 1>the

01:05:24.369 --> 01:05:27.090
<v Speaker 1>you did journal CTL x a f.

01:05:27.490 --> 01:05:29.730
<v Speaker 0>Let's try You, Falco.

01:05:30.050 --> 01:05:32.130
<v Speaker 1>Okay. Let's have a look at it this

01:05:32.130 --> 01:05:32.690
<v Speaker 0>way.

01:05:35.890 --> 01:05:37.090
<v Speaker 1>I verified below.

01:05:38.575 --> 01:05:40.735
<v Speaker 1>There's a lot. There's a lot.

01:05:42.335 --> 01:05:45.375
<v Speaker 0>Let's see if I warning pods sensitive file

01:05:45.375 --> 01:05:46.095
<v Speaker 1>open.

01:05:46.255 --> 01:05:48.575
<v Speaker 1>Warning pod file. Yeah. There's a lot of

01:05:48.575 --> 01:05:50.735
<v Speaker 1>stuff. Let me turn off the pager.

01:05:54.060 --> 01:05:57.980
<v Speaker 1>Maybe grep for Grep for com AWS.

01:05:57.980 --> 01:05:58.380
<v Speaker 0>Oh,

01:05:59.500 --> 01:06:00.220
<v Speaker 0>AWS.

01:06:02.060 --> 01:06:03.500
<v Speaker 1>No. It didn't show up

01:06:04.700 --> 01:06:06.460
<v Speaker 1>for some reason. Maybe that.

01:06:07.635 --> 01:06:09.715
<v Speaker 1>I don't know. So can I just understand

01:06:09.715 --> 01:06:11.635
<v Speaker 0>what's going on here? Right? Because currently, I

01:06:11.635 --> 01:06:14.195
<v Speaker 0>am on the control plane node. Should all

01:06:14.195 --> 01:06:16.995
<v Speaker 0>of the Falco's be alerted to this secret

01:06:16.995 --> 01:06:17.315
<v Speaker 0>creation?

01:06:19.940 --> 01:06:20.660
<v Speaker 1>That's

01:06:20.740 --> 01:06:23.140
<v Speaker 1>a very good question. It should not be

01:06:23.140 --> 01:06:24.180
<v Speaker 1>like that

01:06:24.500 --> 01:06:26.420
<v Speaker 1>because you don't have the API server on

01:06:26.420 --> 01:06:28.500
<v Speaker 1>on all nodes, but you have to manifest

01:06:28.500 --> 01:06:29.540
<v Speaker 1>on all nodes.

01:06:29.700 --> 01:06:31.779
<v Speaker 0>So we have to go to the active

01:06:31.779 --> 01:06:34.235
<v Speaker 0>master then. Right? Exactly.

01:06:34.235 --> 01:06:36.235
<v Speaker 1>I thought you were in the active master.

01:06:36.795 --> 01:06:39.275
<v Speaker 0>Well, when we restarted the API server, I

01:06:39.275 --> 01:06:40.875
<v Speaker 0>have no idea which one picked it up,

01:06:40.875 --> 01:06:41.915
<v Speaker 0>so we need to look.

01:06:42.315 --> 01:06:44.875
<v Speaker 1>Okay. Cool. Okay. So if I take a

01:06:44.875 --> 01:06:46.635
<v Speaker 0>look here, let's see if I can see

01:06:46.635 --> 01:06:47.595
<v Speaker 0>the IP address.

01:06:48.560 --> 01:06:50.960
<v Speaker 1>Because they're only the masters that they create

01:06:51.040 --> 01:06:52.800
<v Speaker 1>that they send the events. Right?

01:06:54.640 --> 01:06:57.440
<v Speaker 0>So this one actually potentially is the master,

01:06:57.440 --> 01:06:58.720
<v Speaker 0>but what I will do is open the

01:06:58.720 --> 01:06:59.600
<v Speaker 0>other two.

01:07:00.960 --> 01:07:03.255
<v Speaker 1>And If you still get notes dash all

01:07:03.255 --> 01:07:05.655
<v Speaker 1>wide should should be useful.

01:07:07.655 --> 01:07:08.295
<v Speaker 0>Okay.

01:07:09.095 --> 01:07:10.055
<v Speaker 0>Get note.

01:07:10.695 --> 01:07:12.455
<v Speaker 0>Get notes all wide.

01:07:18.920 --> 01:07:21.720
<v Speaker 0>Let's just grab these IPs.

01:07:22.680 --> 01:07:25.080
<v Speaker 1>Or maybe it doesn't work. Right? Just

01:07:25.800 --> 01:07:28.120
<v Speaker 0>It does work. I know it works. We

01:07:28.120 --> 01:07:29.880
<v Speaker 0>just need to find the correct API server.

01:07:30.215 --> 01:07:32.055
<v Speaker 0>Now that I know how it's working, I'm

01:07:32.055 --> 01:07:34.135
<v Speaker 0>I'm confident we can get the logs. Okay?

01:07:34.135 --> 01:07:36.695
<v Speaker 1>You can insert your password with your fingerprint.

01:07:37.415 --> 01:07:39.655
<v Speaker 0>Yeah. SE key is fantastic.

01:07:40.215 --> 01:07:40.695
<v Speaker 0>Amazing.

01:07:41.095 --> 01:07:42.775
<v Speaker 0>Or or if you're on Linux, there's a

01:07:42.775 --> 01:07:43.495
<v Speaker 0>similar one too.

01:07:44.109 --> 01:07:45.869
<v Speaker 0>But I have to use Mac as my

01:07:45.869 --> 01:07:49.470
<v Speaker 0>new role, which I'm hoping changes soon.

01:07:49.950 --> 01:07:51.150
<v Speaker 0>There we go. Yeah.

01:07:51.790 --> 01:07:52.510
<v Speaker 1>I

01:07:53.390 --> 01:07:55.390
<v Speaker 1>knew it worked. I mean, I didn't dream

01:07:55.390 --> 01:07:55.630
<v Speaker 1>it.

01:07:56.685 --> 01:07:58.925
<v Speaker 2>I mean Right. We tried this, like, ten

01:07:58.925 --> 01:07:59.965
<v Speaker 2>hours ago,

01:07:59.965 --> 01:08:02.285
<v Speaker 2>so nothing changed in Falco in the past

01:08:02.285 --> 01:08:03.565
<v Speaker 2>ten ten hours. So

01:08:05.085 --> 01:08:07.405
<v Speaker 0>Alright. That was One good one good improvement

01:08:07.405 --> 01:08:09.005
<v Speaker 1>to Falco that we could do is we

01:08:09.005 --> 01:08:11.005
<v Speaker 1>don't print out the credential

01:08:11.890 --> 01:08:13.570
<v Speaker 1>logs. Yeah. I mean,

01:08:14.050 --> 01:08:15.570
<v Speaker 2>otherwise, the this is

01:08:17.090 --> 01:08:19.649
<v Speaker 2>very useful. So But this is a rule

01:08:19.649 --> 01:08:21.569
<v Speaker 1>change. It's not a software change.

01:08:22.050 --> 01:08:24.370
<v Speaker 1>Like, the person that made the rule

01:08:24.895 --> 01:08:26.015
<v Speaker 1>explicitly

01:08:26.015 --> 01:08:28.015
<v Speaker 1>decide to print out the credential.

01:08:28.895 --> 01:08:29.455
<v Speaker 1>Yep.

01:08:29.695 --> 01:08:30.575
<v Speaker 1>So it's not

01:08:31.935 --> 01:08:33.375
<v Speaker 1>so maybe we can we can make a

01:08:33.375 --> 01:08:34.895
<v Speaker 1>longer change that if we if we find

01:08:34.895 --> 01:08:37.774
<v Speaker 1>the credential, we just hide it, but it's

01:08:37.774 --> 01:08:39.215
<v Speaker 1>a bit more complicated than that.

01:08:40.810 --> 01:08:43.290
<v Speaker 0>Okay. So that was really cool. I'm gonna

01:08:43.290 --> 01:08:45.850
<v Speaker 0>try and summarize this. Right? So we modified

01:08:45.850 --> 01:08:48.330
<v Speaker 0>the API server on our control plane with

01:08:48.330 --> 01:08:50.890
<v Speaker 0>two flags, audit policy and audit webhook.

01:08:51.050 --> 01:08:53.290
<v Speaker 0>We injected some pre canned configs that we

01:08:53.290 --> 01:08:54.010
<v Speaker 0>got from

01:08:54.675 --> 01:08:56.115
<v Speaker 0>the Falco repository,

01:08:56.115 --> 01:08:58.915
<v Speaker 0>that's evolution repository here. Yep. So we just

01:08:58.915 --> 01:09:00.194
<v Speaker 0>copy and pasted that. We don't really do

01:09:00.194 --> 01:09:01.955
<v Speaker 0>anything else except change the

01:09:02.595 --> 01:09:04.354
<v Speaker 0>change the Falco IP just to be local

01:09:04.354 --> 01:09:06.675
<v Speaker 0>host. And by that, we get all of

01:09:06.675 --> 01:09:09.369
<v Speaker 0>the Kubernetes events going to Falco where the

01:09:09.369 --> 01:09:11.689
<v Speaker 0>rules kicked in, detected a privacy

01:09:12.010 --> 01:09:13.449
<v Speaker 0>and logged that. Now we had a better

01:09:13.449 --> 01:09:15.369
<v Speaker 0>struggle finding that, but normally in a production

01:09:15.369 --> 01:09:16.169
<v Speaker 0>scenario,

01:09:16.250 --> 01:09:18.250
<v Speaker 0>that would be getting centralized anyway. I'd see

01:09:18.250 --> 01:09:19.609
<v Speaker 0>that in Elasticsearch.

01:09:19.609 --> 01:09:20.969
<v Speaker 0>I'd see that in Splunk. I'd see that

01:09:20.969 --> 01:09:22.489
<v Speaker 0>wherever I'm storing all my logs and that

01:09:22.489 --> 01:09:24.255
<v Speaker 0>would be visible front and center.

01:09:24.895 --> 01:09:26.014
<v Speaker 0>That's awesome. So,

01:09:27.295 --> 01:09:29.375
<v Speaker 1>yeah, in a normal production scenario or in

01:09:29.375 --> 01:09:31.614
<v Speaker 1>a development because, you know, development machine only

01:09:31.614 --> 01:09:34.335
<v Speaker 1>have one Kubernetes node. In a production scenario,

01:09:34.335 --> 01:09:36.335
<v Speaker 1>you have the centralized locking.

01:09:36.574 --> 01:09:38.200
<v Speaker 1>So when this kind of when you do

01:09:38.200 --> 01:09:40.600
<v Speaker 1>this kind of demos, you'll never remember that

01:09:41.240 --> 01:09:42.279
<v Speaker 1>kind of details.

01:09:42.920 --> 01:09:44.280
<v Speaker 0>But Yeah. I should have spun up a

01:09:44.280 --> 01:09:46.280
<v Speaker 0>single master control plane. I I probably went

01:09:46.280 --> 01:09:47.720
<v Speaker 0>a little bit over the top with my

01:09:47.720 --> 01:09:49.880
<v Speaker 0>HD setup. But A little just a little

01:09:49.880 --> 01:09:51.534
<v Speaker 2>bit. It's very cool to see how you

01:09:51.534 --> 01:09:53.854
<v Speaker 1>over engineered this demo. Yeah. You should see

01:09:53.854 --> 01:09:55.375
<v Speaker 0>how many cores I've got on this thing

01:09:55.375 --> 01:09:56.574
<v Speaker 0>and how much RAM as well for a

01:09:56.574 --> 01:09:58.175
<v Speaker 0>cluster I'm spinning up for an hour.

01:09:59.775 --> 01:10:01.375
<v Speaker 0>But that's the joy of bare metal. Like,

01:10:01.375 --> 01:10:02.974
<v Speaker 0>it's great how much power I can throw

01:10:02.974 --> 01:10:03.295
<v Speaker 0>at this.

01:10:04.579 --> 01:10:07.860
<v Speaker 2>Right? Anyways, David, since we are since you

01:10:07.860 --> 01:10:10.820
<v Speaker 2>mentioned the evolution repository, I think it's could

01:10:10.820 --> 01:10:13.059
<v Speaker 2>be useful for the audience and people interested

01:10:13.059 --> 01:10:14.099
<v Speaker 2>in Falco

01:10:14.179 --> 01:10:16.659
<v Speaker 2>to know that this repo evolution is

01:10:17.415 --> 01:10:19.815
<v Speaker 2>a simple repo where we basically

01:10:20.775 --> 01:10:23.175
<v Speaker 2>try to keep all the

01:10:23.415 --> 01:10:24.135
<v Speaker 2>things

01:10:24.375 --> 01:10:26.215
<v Speaker 2>the getting started guides

01:10:26.215 --> 01:10:28.375
<v Speaker 2>for users. For example, you can find here

01:10:28.375 --> 01:10:30.215
<v Speaker 2>examples manifest for

01:10:31.050 --> 01:10:34.010
<v Speaker 2>deploying your first Falco in your Kubernetes.

01:10:34.010 --> 01:10:34.570
<v Speaker 2>So

01:10:35.770 --> 01:10:38.570
<v Speaker 2>there were also m charts here, then later

01:10:38.570 --> 01:10:41.450
<v Speaker 2>we will bring the in the charts repository.

01:10:43.125 --> 01:10:45.445
<v Speaker 2>Various examples, third party integrations,

01:10:45.445 --> 01:10:47.605
<v Speaker 2>things like that can be very useful for

01:10:47.605 --> 01:10:50.565
<v Speaker 2>people that just want that loves to approach

01:10:50.565 --> 01:10:52.804
<v Speaker 2>a new a new project just by trying

01:10:52.804 --> 01:10:55.764
<v Speaker 2>it without having to study all the

01:10:56.565 --> 01:10:58.164
<v Speaker 2>the moving pieces of Falco.

01:10:58.940 --> 01:11:01.579
<v Speaker 1>Without a PhD in a for.

01:11:03.260 --> 01:11:05.100
<v Speaker 0>Alright. So I'll add that to the show

01:11:05.100 --> 01:11:07.659
<v Speaker 0>notes. This this repository is definitely worth checking

01:11:07.659 --> 01:11:09.260
<v Speaker 0>it then for anyone that is gonna start

01:11:09.260 --> 01:11:11.020
<v Speaker 0>playing with Falco. Excellent.

01:11:11.965 --> 01:11:12.605
<v Speaker 0>Is

01:11:12.925 --> 01:11:16.365
<v Speaker 0>there anything else you wanna show off, cover,

01:11:16.365 --> 01:11:18.365
<v Speaker 0>after that before we finish up for this

01:11:18.365 --> 01:11:20.205
<v Speaker 0>afternoon? Is there anything that we've not covered

01:11:20.205 --> 01:11:22.525
<v Speaker 0>that makes sense? Oh, yeah. That's the thing.

01:11:22.605 --> 01:11:24.045
<v Speaker 1>Go to Falcosecurity/

01:11:24.045 --> 01:11:24.605
<v Speaker 1>p dig.

01:11:25.590 --> 01:11:27.989
<v Speaker 2>Yep. And that's also in BPF if we

01:11:27.989 --> 01:11:30.710
<v Speaker 2>want to. Because we run Falcon now with

01:11:30.710 --> 01:11:33.590
<v Speaker 2>the current model, not with BPF probe. Okay.

01:11:33.590 --> 01:11:35.190
<v Speaker 1>Yeah. Maybe we don't want to run to

01:11:35.190 --> 01:11:37.429
<v Speaker 1>restart Falco to run with BPF for now.

01:11:39.545 --> 01:11:41.304
<v Speaker 0>So sorry. What what what should I go

01:11:41.304 --> 01:11:41.945
<v Speaker 0>to here?

01:11:42.344 --> 01:11:44.264
<v Speaker 1>I I just want maybe to talk for

01:11:44.264 --> 01:11:46.985
<v Speaker 1>ten seconds about our user space efforts

01:11:47.705 --> 01:11:48.425
<v Speaker 1>for

01:11:48.905 --> 01:11:50.425
<v Speaker 1>with the pdig repo.

01:11:50.824 --> 01:11:52.584
<v Speaker 2>Search for pdig.

01:11:52.824 --> 01:11:53.945
<v Speaker 0>Oh, pdig.

01:11:54.025 --> 01:11:56.119
<v Speaker 0>Thank you. Yeah. P dig. P dig. Yes.

01:11:56.119 --> 01:11:56.519
<v Speaker 2>So,

01:11:58.599 --> 01:12:02.360
<v Speaker 1>just a very underrepresented repository in our community.

01:12:03.239 --> 01:12:06.679
<v Speaker 1>But For now. For now. Yes. So

01:12:07.255 --> 01:12:09.335
<v Speaker 1>we we told about the fact that we,

01:12:09.335 --> 01:12:10.455
<v Speaker 1>you know, either run with a kind of

01:12:10.455 --> 01:12:13.175
<v Speaker 1>module or a BPF probe. Right? And

01:12:13.175 --> 01:12:14.935
<v Speaker 1>that's a very good thing, you know, to

01:12:14.935 --> 01:12:16.935
<v Speaker 1>have, like, because, you know, you can start

01:12:16.935 --> 01:12:18.535
<v Speaker 1>kind of modules that you can use in

01:12:18.535 --> 01:12:21.895
<v Speaker 1>a BPF probe. But that doesn't work in

01:12:21.895 --> 01:12:22.535
<v Speaker 1>every environment.

01:12:23.119 --> 01:12:24.479
<v Speaker 1>Yeah. For example,

01:12:24.719 --> 01:12:27.439
<v Speaker 1>words are very good on bare metal,

01:12:28.159 --> 01:12:31.679
<v Speaker 1>but, like, it doesn't work on sandbox environments.

01:12:32.159 --> 01:12:34.559
<v Speaker 1>For example, if you put that, you know,

01:12:34.559 --> 01:12:34.800
<v Speaker 1>on

01:12:36.975 --> 01:12:39.935
<v Speaker 1>Fargate environment or something like that, I just

01:12:40.574 --> 01:12:42.335
<v Speaker 1>the only one that came in mind.

01:12:43.215 --> 01:12:45.135
<v Speaker 1>Or you put, like, on a device or

01:12:45.135 --> 01:12:46.494
<v Speaker 1>or on something like that.

01:12:47.295 --> 01:12:50.414
<v Speaker 1>So you need something that doesn't rely on

01:12:50.780 --> 01:12:51.580
<v Speaker 1>you know?

01:12:51.900 --> 01:12:55.100
<v Speaker 2>The possibility for to assess the the kernel.

01:12:55.420 --> 01:12:56.060
<v Speaker 1>Yeah.

01:12:56.620 --> 01:12:59.740
<v Speaker 1>And so we started working on an interface,

01:13:00.140 --> 01:13:01.660
<v Speaker 1>which is the user space

01:13:01.900 --> 01:13:02.460
<v Speaker 1>API,

01:13:03.225 --> 01:13:05.865
<v Speaker 1>which is not very well documented yet because

01:13:05.865 --> 01:13:08.025
<v Speaker 1>it's just a ring buffer in memory that's

01:13:08.025 --> 01:13:09.385
<v Speaker 1>shared between processes.

01:13:10.425 --> 01:13:12.745
<v Speaker 1>But that one allows us to send events

01:13:12.905 --> 01:13:14.425
<v Speaker 1>input events to Falco,

01:13:14.665 --> 01:13:16.985
<v Speaker 1>and one implementation of that is PDG.

01:13:17.340 --> 01:13:19.500
<v Speaker 1>So PDG just uses p trace to send

01:13:19.500 --> 01:13:22.060
<v Speaker 1>events to Falco. It's not as performant as

01:13:22.060 --> 01:13:22.860
<v Speaker 1>Falco,

01:13:23.340 --> 01:13:24.780
<v Speaker 1>as the Falco kind of module. It's not

01:13:24.780 --> 01:13:27.580
<v Speaker 1>as performant as the eBPF probe, but it's

01:13:27.580 --> 01:13:29.820
<v Speaker 1>a way to show that Falco can accept

01:13:29.820 --> 01:13:30.380
<v Speaker 1>different

01:13:31.175 --> 01:13:33.735
<v Speaker 1>kind of events coming from different sources

01:13:33.975 --> 01:13:35.735
<v Speaker 1>that are not just, you know, those two

01:13:35.735 --> 01:13:37.975
<v Speaker 1>that we are deploying production right now.

01:13:38.535 --> 01:13:39.175
<v Speaker 1>And,

01:13:39.335 --> 01:13:41.095
<v Speaker 1>also, this open, you know, a world of

01:13:41.095 --> 01:13:43.335
<v Speaker 1>possibility for different kind of devices,

01:13:44.000 --> 01:13:45.760
<v Speaker 1>like, you know, you want to play Falco

01:13:45.760 --> 01:13:47.200
<v Speaker 1>on Mac OS or

01:13:47.600 --> 01:13:49.520
<v Speaker 1>Windows, something like that,

01:13:50.000 --> 01:13:51.760
<v Speaker 1>you have an interface.

01:13:52.640 --> 01:13:55.440
<v Speaker 1>And you can to different kind of inputs.

01:13:55.760 --> 01:13:58.000
<v Speaker 2>Maybe maybe you could

01:13:58.255 --> 01:14:01.135
<v Speaker 2>our our goal here is to create in

01:14:01.135 --> 01:14:02.655
<v Speaker 2>the future, we are working

01:14:02.895 --> 01:14:05.455
<v Speaker 2>on a an interface so that the community

01:14:05.455 --> 01:14:06.975
<v Speaker 2>can create, for example,

01:14:07.375 --> 01:14:09.615
<v Speaker 2>another inputs for Falco that this time is

01:14:09.615 --> 01:14:12.220
<v Speaker 2>not Kubernetes audit logs, but some some other

01:14:12.220 --> 01:14:13.739
<v Speaker 2>kind of audit logs

01:14:14.140 --> 01:14:15.580
<v Speaker 2>without naming names.

01:14:15.900 --> 01:14:17.179
<v Speaker 2>I don't know. But just,

01:14:17.660 --> 01:14:18.460
<v Speaker 2>or

01:14:19.020 --> 01:14:20.940
<v Speaker 2>other other kind of events,

01:14:21.820 --> 01:14:22.620
<v Speaker 2>whatever.

01:14:22.780 --> 01:14:23.900
<v Speaker 2>And so,

01:14:24.860 --> 01:14:27.175
<v Speaker 2>in that in that way, user then could

01:14:27.175 --> 01:14:29.655
<v Speaker 2>write will be able to write rules

01:14:29.815 --> 01:14:31.175
<v Speaker 2>to to detect

01:14:31.815 --> 01:14:32.295
<v Speaker 2>even

01:14:32.935 --> 01:14:35.335
<v Speaker 2>some events and trigger alerts on some events

01:14:35.335 --> 01:14:36.215
<v Speaker 2>depending

01:14:36.375 --> 01:14:38.054
<v Speaker 2>on this new input.

01:14:38.695 --> 01:14:40.135
<v Speaker 1>I I found this

01:14:40.620 --> 01:14:42.540
<v Speaker 1>I found this useful when I was trying

01:14:42.540 --> 01:14:45.739
<v Speaker 1>to make Falco work on Arch 64.

01:14:46.300 --> 01:14:47.979
<v Speaker 1>I was using

01:14:48.380 --> 01:14:49.420
<v Speaker 1>Equinix

01:14:49.659 --> 01:14:51.979
<v Speaker 1>for starting a very beefy machine

01:14:52.219 --> 01:14:54.435
<v Speaker 1>because, you know, I had some I I

01:14:54.435 --> 01:14:56.515
<v Speaker 1>didn't really have a Raspberry Pi. I didn't

01:14:56.515 --> 01:14:57.395
<v Speaker 1>want to wait

01:14:57.715 --> 01:15:00.035
<v Speaker 1>for it to compile Falco because it already

01:15:00.035 --> 01:15:00.675
<v Speaker 1>takes

01:15:00.915 --> 01:15:01.955
<v Speaker 1>a lot of time.

01:15:02.435 --> 01:15:04.915
<v Speaker 1>Like, you compile open SSL and other things.

01:15:05.155 --> 01:15:06.995
<v Speaker 1>So, it takes a lot of time. And

01:15:06.995 --> 01:15:08.435
<v Speaker 1>you don't want to wait. So I just

01:15:08.435 --> 01:15:10.520
<v Speaker 1>started that machine, but then I didn't have

01:15:10.520 --> 01:15:12.680
<v Speaker 1>a driver because our kind of modular VPF

01:15:12.680 --> 01:15:15.320
<v Speaker 1>Pro are not made for r 64.

01:15:15.480 --> 01:15:17.079
<v Speaker 1>They are made for x 86.

01:15:17.239 --> 01:15:19.800
<v Speaker 1>We ported that to r 64 now. But

01:15:19.800 --> 01:15:21.560
<v Speaker 1>when I want to just, you know, see,

01:15:21.560 --> 01:15:22.440
<v Speaker 1>hey. This thing works,

01:15:23.085 --> 01:15:24.765
<v Speaker 1>I was kind of I can just use

01:15:24.765 --> 01:15:26.285
<v Speaker 1>PD because it's not,

01:15:27.165 --> 01:15:29.005
<v Speaker 1>I can just use the user space interface

01:15:29.005 --> 01:15:31.005
<v Speaker 1>because it's not architecture dependent.

01:15:31.805 --> 01:15:33.885
<v Speaker 1>And, you know, that will work about very

01:15:33.885 --> 01:15:36.045
<v Speaker 1>well. For so also for, you know, porting

01:15:36.045 --> 01:15:37.005
<v Speaker 1>to new architectures.

01:15:38.630 --> 01:15:39.429
<v Speaker 0>Nice.

01:15:39.510 --> 01:15:41.990
<v Speaker 1>That's it. This is a very cool improvement

01:15:41.990 --> 01:15:43.750
<v Speaker 1>that we did over the last year.

01:15:44.390 --> 01:15:46.949
<v Speaker 1>I mean, thanks to the whole team and

01:15:47.030 --> 01:15:49.430
<v Speaker 1>overall to Lawrence, which actually made the code

01:15:49.430 --> 01:15:49.750
<v Speaker 1>happen.

01:15:51.325 --> 01:15:53.245
<v Speaker 0>Awesome. That's cool. That's good that people have

01:15:53.245 --> 01:15:55.325
<v Speaker 0>that choice then depending on the environment that

01:15:55.325 --> 01:15:57.085
<v Speaker 0>they're running. They still got an option to

01:15:57.085 --> 01:15:59.565
<v Speaker 0>instrument and understand their applications using Falco or

01:16:00.205 --> 01:16:03.325
<v Speaker 0>that's awesome. Nice one. So we have a

01:16:03.500 --> 01:16:06.619
<v Speaker 0>couple more comments. Our mutual friend, says,

01:16:06.860 --> 01:16:08.219
<v Speaker 0>Ciao. Hi. And

01:16:10.300 --> 01:16:12.139
<v Speaker 0>we got a question from,

01:16:12.940 --> 01:16:13.980
<v Speaker 0>is there a GUI?

01:16:16.505 --> 01:16:18.744
<v Speaker 0>I mean, I'm happy to give you what

01:16:18.744 --> 01:16:20.105
<v Speaker 0>I think the answer is, and then you

01:16:20.105 --> 01:16:21.304
<v Speaker 0>two can correct me if you were to.

01:16:21.304 --> 01:16:24.025
<v Speaker 1>Yeah. Please. I'm gonna assume there there's no

01:16:24.025 --> 01:16:25.945
<v Speaker 0>GUI. From what I understand of what you've

01:16:25.945 --> 01:16:27.545
<v Speaker 0>you've explained to me today about Falco is

01:16:27.545 --> 01:16:30.250
<v Speaker 0>that it's a detection system that events,

01:16:30.250 --> 01:16:32.810
<v Speaker 0>and we should be storing those events somewhere

01:16:32.890 --> 01:16:34.410
<v Speaker 0>where we have the ability to query them

01:16:34.410 --> 01:16:36.330
<v Speaker 0>and notify on them and alert on them.

01:16:36.330 --> 01:16:38.490
<v Speaker 0>And that may be something like Elasticsearch,

01:16:38.490 --> 01:16:40.969
<v Speaker 0>and FoxDB, or even just Sesslog.

01:16:41.130 --> 01:16:43.324
<v Speaker 0>But from there would be the interface. Is

01:16:43.324 --> 01:16:44.445
<v Speaker 0>that is that correct?

01:16:44.685 --> 01:16:45.565
<v Speaker 2>Exactly.

01:16:45.725 --> 01:16:49.005
<v Speaker 1>Yeah. The the answer is correct. There's a

01:16:49.005 --> 01:16:50.684
<v Speaker 1>GUI which is commercial,

01:16:51.405 --> 01:16:53.164
<v Speaker 1>which is developed by Sysdig,

01:16:53.965 --> 01:16:56.660
<v Speaker 1>but it's not, you know, Falco. It's, you

01:16:56.660 --> 01:16:58.420
<v Speaker 1>know, a product of Sysdig, which is called

01:16:58.420 --> 01:17:00.580
<v Speaker 1>Sysdig Secure, which also has a query for

01:17:00.580 --> 01:17:04.500
<v Speaker 1>Falco. Yeah. But it's just you know, they're

01:17:04.740 --> 01:17:06.660
<v Speaker 1>it's one of their additional values on top

01:17:06.660 --> 01:17:07.460
<v Speaker 1>of Falco.

01:17:07.860 --> 01:17:10.100
<v Speaker 2>I want to I want to be clear

01:17:10.100 --> 01:17:11.140
<v Speaker 2>with the audience here.

01:17:12.015 --> 01:17:14.175
<v Speaker 2>Since they paid us a salary, I don't

01:17:14.175 --> 01:17:15.934
<v Speaker 2>know why, honestly, but

01:17:17.935 --> 01:17:19.295
<v Speaker 2>but Falco

01:17:19.295 --> 01:17:22.094
<v Speaker 2>is a CNCF incubated project that plans to

01:17:22.094 --> 01:17:23.454
<v Speaker 2>graduate next year,

01:17:23.855 --> 01:17:25.695
<v Speaker 2>and that's being donated to the CNCF.

01:17:26.130 --> 01:17:27.890
<v Speaker 2>Maybe we missed a bit of history of

01:17:27.890 --> 01:17:30.210
<v Speaker 2>Falco, so let me just be brief about

01:17:30.210 --> 01:17:33.250
<v Speaker 2>it. But Falco's graduated was sent back in

01:17:33.250 --> 01:17:34.930
<v Speaker 2>02/2018,

01:17:35.250 --> 01:17:37.890
<v Speaker 2>was initially started at Falco in 02/2016 as

01:17:37.890 --> 01:17:38.850
<v Speaker 2>an open source project.

01:17:39.405 --> 01:17:41.485
<v Speaker 2>But after that, it has been donated to

01:17:41.485 --> 01:17:44.605
<v Speaker 2>CNCF. Basically, we are CNCF maintainers,

01:17:45.005 --> 01:17:46.205
<v Speaker 2>which means that

01:17:46.845 --> 01:17:50.364
<v Speaker 2>since the engineering in any way can interfere

01:17:50.365 --> 01:17:52.980
<v Speaker 2>with the plans that we have with Falco,

01:17:52.980 --> 01:17:54.420
<v Speaker 2>which is, by the way, something that I

01:17:54.420 --> 01:17:55.860
<v Speaker 2>love because it means that I can do

01:17:55.860 --> 01:17:57.699
<v Speaker 2>whatever the hell I want.

01:17:59.460 --> 01:18:00.179
<v Speaker 2>So,

01:18:01.300 --> 01:18:04.260
<v Speaker 2>yes, there's a commercial GUI. The probably, are

01:18:04.260 --> 01:18:05.940
<v Speaker 2>also other commercial GUIs

01:18:06.525 --> 01:18:08.364
<v Speaker 2>and that will be out there.

01:18:09.245 --> 01:18:11.165
<v Speaker 2>But this is not a problem for the

01:18:11.165 --> 01:18:12.285
<v Speaker 2>Falco maintainers,

01:18:12.285 --> 01:18:14.525
<v Speaker 2>for Falco community Exactly. Because

01:18:14.685 --> 01:18:17.245
<v Speaker 2>our goal is to make Falco

01:18:17.245 --> 01:18:18.045
<v Speaker 2>consumable

01:18:18.540 --> 01:18:20.860
<v Speaker 2>by the cloud native community,

01:18:20.860 --> 01:18:22.139
<v Speaker 2>and this is the reason that we are

01:18:22.139 --> 01:18:25.579
<v Speaker 2>working on APIs for rules that that watches

01:18:25.579 --> 01:18:26.459
<v Speaker 2>rules

01:18:26.540 --> 01:18:30.699
<v Speaker 2>that can changes, APIs for user space inputs,

01:18:30.699 --> 01:18:32.665
<v Speaker 2>and things like that to make it more

01:18:32.665 --> 01:18:36.344
<v Speaker 2>inter integrated with the the whole cloud native

01:18:36.344 --> 01:18:37.224
<v Speaker 2>ecosystem.

01:18:38.745 --> 01:18:42.025
<v Speaker 2>That's the goal. Sweet. So to summarize that

01:18:42.025 --> 01:18:42.664
<v Speaker 0>again,

01:18:43.465 --> 01:18:45.784
<v Speaker 0>you should be responsible for storing the events

01:18:45.784 --> 01:18:47.304
<v Speaker 0>wherever you want and visualize them that way.

01:18:47.190 --> 01:18:49.350
<v Speaker 0>But if you wanna support further development of

01:18:49.350 --> 01:18:51.350
<v Speaker 0>Sysdig and their time to work on this

01:18:51.350 --> 01:18:52.070
<v Speaker 0>continually

01:18:52.390 --> 01:18:53.830
<v Speaker 0>and you're happy to pay, you should look

01:18:53.830 --> 01:18:55.989
<v Speaker 0>into Sysdig Secure, which does it all for

01:18:55.989 --> 01:18:57.349
<v Speaker 0>you. That sounds awesome.

01:18:57.830 --> 01:18:59.110
<v Speaker 0>And, of course Yeah. Or or you can

01:18:59.110 --> 01:19:01.030
<v Speaker 1>pay someone else that does the same thing,

01:19:01.030 --> 01:19:02.735
<v Speaker 1>but it just just

01:19:03.534 --> 01:19:06.094
<v Speaker 1>because Susie made a product out of it.

01:19:06.735 --> 01:19:08.895
<v Speaker 0>Alright. Well, I just wanna say thank you

01:19:08.895 --> 01:19:10.895
<v Speaker 0>to both of you. This has been a

01:19:10.895 --> 01:19:13.454
<v Speaker 0>very great learning experience for me as even

01:19:13.454 --> 01:19:15.375
<v Speaker 0>though we had a couple of small challenges,

01:19:15.375 --> 01:19:18.410
<v Speaker 0>we overcome it. We've seen Falco running on

01:19:18.490 --> 01:19:20.490
<v Speaker 0>our bare Linux system and side of our

01:19:20.490 --> 01:19:23.130
<v Speaker 0>Kubernetes cluster. We saw those events. They're gonna

01:19:23.130 --> 01:19:25.770
<v Speaker 0>help me provide secure platforms for my Kubernetes

01:19:25.770 --> 01:19:27.850
<v Speaker 0>stuff. So that's awesome. Thank you again for

01:19:27.850 --> 01:19:30.490
<v Speaker 0>joining me. Thanks, David. Any closing thoughts before

01:19:30.490 --> 01:19:32.895
<v Speaker 0>I before we say goodbye? Yeah. I'll be

01:19:32.895 --> 01:19:34.975
<v Speaker 1>all set up, David, and your music.

01:19:35.295 --> 01:19:38.095
<v Speaker 2>Me too. I also have another another thought.

01:19:38.095 --> 01:19:40.335
<v Speaker 2>Don't we have five minutes to try VPS

01:19:40.335 --> 01:19:40.975
<v Speaker 2>driver?

01:19:41.775 --> 01:19:43.534
<v Speaker 2>I'm joking. I

01:19:44.495 --> 01:19:45.614
<v Speaker 1>don't think we do.

01:19:46.255 --> 01:19:47.535
<v Speaker 2>I'm I'm just joking.

01:19:48.230 --> 01:19:50.230
<v Speaker 0>We can always have another session. Don't worry,

01:19:50.230 --> 01:19:52.310
<v Speaker 0>Luca. We we can come back anytime you

01:19:52.310 --> 01:19:53.910
<v Speaker 0>want and look at more stuff here. We

01:19:53.910 --> 01:19:55.510
<v Speaker 1>can have a session on debugging why the

01:19:55.510 --> 01:19:58.070
<v Speaker 1>PPI driver doesn't work on Keras 5.9.

01:19:58.470 --> 01:20:00.950
<v Speaker 2>With Clang 10 or things like that. Okay.

01:20:00.950 --> 01:20:01.670
<v Speaker 2>Let's do it.

01:20:02.735 --> 01:20:04.655
<v Speaker 1>Do you have GDP on your Mac installed

01:20:04.655 --> 01:20:05.534
<v Speaker 1>and everything?

01:20:07.934 --> 01:20:10.334
<v Speaker 1>We'll figure it out. Not today. Alright.

01:20:10.735 --> 01:20:13.054
<v Speaker 0>Thanks again. Have an absolute great day, and

01:20:13.054 --> 01:20:14.574
<v Speaker 0>I'll speak to you both. Thanks for inviting

01:20:14.574 --> 01:20:17.054
<v Speaker 2>us. Thanks for asking us. Cheers. Bye bye.

01:20:17.730 --> 01:20:18.370
<v Speaker 2>Ciao. Bye bye.
