WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: f943a0a4-aab4-4e1a-81bf-587bec804928
Created: 2025-04-29T18:25:13.071Z
Duration: 150.94788
Channels: 1

00:00:00.480 --> 00:00:01.200
<v Speaker 0>Hi.

00:00:01.760 --> 00:00:03.999
<v Speaker 0>And welcome to another Rawkode Bite

00:00:04.319 --> 00:00:05.920
<v Speaker 0>at the Rawkode Academy.

00:00:07.120 --> 00:00:09.120
<v Speaker 0>Today, I wanna show you why you should

00:00:09.120 --> 00:00:11.519
<v Speaker 0>always check your kube config fails

00:00:11.920 --> 00:00:14.480
<v Speaker 0>before you start interacting with your Kubernetes cluster.

00:00:16.045 --> 00:00:17.645
<v Speaker 0>Not a lot of people know this, but

00:00:17.645 --> 00:00:18.925
<v Speaker 0>a kube config

00:00:19.245 --> 00:00:21.325
<v Speaker 0>can actually delegate authentication

00:00:21.885 --> 00:00:24.765
<v Speaker 0>with your cluster to another binary on your

00:00:24.765 --> 00:00:25.404
<v Speaker 0>machine.

00:00:27.005 --> 00:00:28.925
<v Speaker 0>This is called an off provider and is

00:00:28.925 --> 00:00:31.539
<v Speaker 0>primarily used by cloud providers that want to

00:00:31.539 --> 00:00:33.700
<v Speaker 0>ensure the service account you're using to communicate

00:00:33.700 --> 00:00:36.660
<v Speaker 0>with your cluster is still active and valid.

00:00:37.460 --> 00:00:39.540
<v Speaker 0>They do this by issuing short lease tokens

00:00:39.540 --> 00:00:41.379
<v Speaker 0>that need refreshed on a regular.

00:00:42.660 --> 00:00:43.300
<v Speaker 0>As such,

00:00:44.005 --> 00:00:47.205
<v Speaker 0>kubectl can execute the g cloud command or

00:00:47.205 --> 00:00:50.485
<v Speaker 0>the AWS IAM authenticator command before reaching out

00:00:50.485 --> 00:00:51.845
<v Speaker 0>to your current context.

00:00:53.125 --> 00:00:55.365
<v Speaker 0>There's no restrictions on what binaries can actually

00:00:55.365 --> 00:00:56.085
<v Speaker 0>be executed.

00:00:58.060 --> 00:00:59.420
<v Speaker 0>So let's take a look.

00:01:00.700 --> 00:01:04.220
<v Speaker 0>First, let's run some harmless kubectl commands.

00:01:05.580 --> 00:01:07.100
<v Speaker 0>Before we get started, I just wanna do

00:01:07.100 --> 00:01:08.860
<v Speaker 0>an l s on my home directory.

00:01:09.660 --> 00:01:10.540
<v Speaker 0>All looks good.

00:01:13.375 --> 00:01:15.455
<v Speaker 0>Now, let's run get nodes

00:01:16.335 --> 00:01:18.655
<v Speaker 0>followed by get pods.

00:01:19.775 --> 00:01:21.935
<v Speaker 0>All looks pretty normal. Right?

00:01:23.534 --> 00:01:23.854
<v Speaker 0>Well,

00:01:25.140 --> 00:01:27.380
<v Speaker 0>let's actually take a look at what really

00:01:27.380 --> 00:01:28.020
<v Speaker 0>happened.

00:01:29.060 --> 00:01:29.700
<v Speaker 0>First,

00:01:29.860 --> 00:01:32.340
<v Speaker 0>there's some new fails in my home directory.

00:01:32.659 --> 00:01:33.619
<v Speaker 0>Uh-oh.

00:01:34.820 --> 00:01:36.340
<v Speaker 0>And if we take a look at our

00:01:36.340 --> 00:01:37.299
<v Speaker 0>kube config

00:01:37.515 --> 00:01:39.515
<v Speaker 0>and jump down to the off provider script

00:01:39.515 --> 00:01:40.395
<v Speaker 0>at the bottom,

00:01:41.354 --> 00:01:42.635
<v Speaker 0>oh, dear.

00:01:43.595 --> 00:01:46.635
<v Speaker 0>So while these commands are pretty superficial,

00:01:46.715 --> 00:01:48.475
<v Speaker 0>an attacker could execute

00:01:48.555 --> 00:01:49.354
<v Speaker 0>SCP,

00:01:49.515 --> 00:01:52.570
<v Speaker 0>RM, no preserve root, curl, or pretty much

00:01:52.570 --> 00:01:53.690
<v Speaker 0>anything else.

00:01:55.130 --> 00:01:55.690
<v Speaker 0>So

00:01:56.730 --> 00:01:57.770
<v Speaker 0>be careful.

00:01:58.410 --> 00:02:00.650
<v Speaker 0>Even when you download a Kube config from

00:02:00.650 --> 00:02:01.290
<v Speaker 0>someone,

00:02:01.930 --> 00:02:03.850
<v Speaker 0>always check the user section.

00:02:05.610 --> 00:02:08.335
<v Speaker 0>Major props go to Grace. Grace got their

00:02:08.335 --> 00:02:10.815
<v Speaker 0>first PR merged into the Kubernetes project,

00:02:11.295 --> 00:02:13.215
<v Speaker 0>and it actually adds a warning that will

00:02:13.215 --> 00:02:15.615
<v Speaker 0>be invaluable in making everyone aware of this

00:02:15.615 --> 00:02:17.295
<v Speaker 0>potential attack vector.

00:02:17.695 --> 00:02:18.495
<v Speaker 0>Grace,

00:02:18.975 --> 00:02:19.455
<v Speaker 0>thank you.

00:02:20.342 --> 00:02:21.302
<v Speaker 0>Everyone else,

00:02:21.622 --> 00:02:22.662
<v Speaker 0>be careful.

00:02:23.542 --> 00:02:24.342
<v Speaker 0>Have a great day.
