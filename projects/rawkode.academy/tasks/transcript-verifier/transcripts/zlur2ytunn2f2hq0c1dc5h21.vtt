WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: a6feccb0-aa49-4239-ada5-ebc2dec23a6b
Created: 2025-04-29T23:15:16.256Z
Duration: 201.20744
Channels: 1

00:00:01.199 --> 00:00:03.760
<v Speaker 0>Hey there. Welcome to kube bisect, the show

00:00:03.760 --> 00:00:05.200
<v Speaker 0>where we take a look at the latest

00:00:05.200 --> 00:00:07.440
<v Speaker 0>developments in the Kubernetes master branch.

00:00:08.720 --> 00:00:10.160
<v Speaker 0>The first thing I wanna take a look

00:00:10.160 --> 00:00:12.240
<v Speaker 0>at today is some changes to the way

00:00:12.240 --> 00:00:13.360
<v Speaker 0>the logs command works.

00:00:14.275 --> 00:00:16.435
<v Speaker 0>To do that, I'll need to apply a

00:00:16.435 --> 00:00:17.635
<v Speaker 0>simple deployment,

00:00:18.195 --> 00:00:20.275
<v Speaker 0>run-in the h t t p d image,

00:00:20.515 --> 00:00:22.675
<v Speaker 0>and we're gonna have five replicas.

00:00:24.755 --> 00:00:26.195
<v Speaker 0>So we can apply this now,

00:00:27.020 --> 00:00:29.420
<v Speaker 0>and we'll just give that a few seconds

00:00:29.420 --> 00:00:31.660
<v Speaker 0>for each of those pods to quickly become

00:00:31.660 --> 00:00:32.380
<v Speaker 0>healthy.

00:00:35.740 --> 00:00:37.340
<v Speaker 0>So now we can begin to pull the

00:00:37.340 --> 00:00:40.060
<v Speaker 0>logs out from one of those pods. So

00:00:40.060 --> 00:00:41.900
<v Speaker 0>we'll just auto complete the first one

00:00:42.655 --> 00:00:44.255
<v Speaker 0>and there we go, we have some log

00:00:44.255 --> 00:00:44.895
<v Speaker 0>data.

00:00:45.695 --> 00:00:47.934
<v Speaker 0>But sometimes you wanna get logs from more

00:00:47.934 --> 00:00:50.015
<v Speaker 0>than one pod and to do that we

00:00:50.015 --> 00:00:51.454
<v Speaker 0>use the label selector.

00:00:52.015 --> 00:00:52.495
<v Speaker 0>Excellent.

00:00:54.380 --> 00:00:55.820
<v Speaker 0>But there may be a time where you

00:00:55.820 --> 00:00:57.740
<v Speaker 0>wish to use the label selector and follow

00:00:57.740 --> 00:01:00.300
<v Speaker 0>the logs and unfortunately

00:01:00.540 --> 00:01:02.620
<v Speaker 0>those flags cannot be used together.

00:01:03.100 --> 00:01:04.860
<v Speaker 0>At least that was until now.

00:01:05.740 --> 00:01:08.060
<v Speaker 0>With the latest kubectl built from the master

00:01:08.060 --> 00:01:10.575
<v Speaker 0>branch, we can use logs with a label

00:01:10.575 --> 00:01:12.655
<v Speaker 0>selector and the follow flag

00:01:13.534 --> 00:01:15.135
<v Speaker 0>to get all of our logs and stream

00:01:15.135 --> 00:01:16.255
<v Speaker 0>them in real time.

00:01:21.390 --> 00:01:23.470
<v Speaker 0>The next thing that I wanna show you

00:01:23.790 --> 00:01:25.150
<v Speaker 0>is that customize

00:01:25.150 --> 00:01:27.310
<v Speaker 0>has been built into the kube control command

00:01:27.310 --> 00:01:30.590
<v Speaker 0>itself rather than being an external third party

00:01:30.590 --> 00:01:31.390
<v Speaker 0>command.

00:01:32.030 --> 00:01:34.030
<v Speaker 0>So inside our base directory, we have another

00:01:34.030 --> 00:01:35.390
<v Speaker 0>simple deployment manifest,

00:01:37.325 --> 00:01:38.685
<v Speaker 0>And alongside that,

00:01:38.925 --> 00:01:40.925
<v Speaker 0>we also have a customization

00:01:40.925 --> 00:01:41.965
<v Speaker 0>dot YAML.

00:01:43.085 --> 00:01:45.885
<v Speaker 0>The customization YAML file allows us to modify

00:01:45.885 --> 00:01:48.445
<v Speaker 0>a single deployment for multiple environments.

00:01:48.445 --> 00:01:50.285
<v Speaker 0>Here, you can see we're specifying a namespace

00:01:50.285 --> 00:01:51.325
<v Speaker 0>and some common labels.

00:01:52.270 --> 00:01:54.270
<v Speaker 0>We also have to create a namespace itself

00:01:54.270 --> 00:01:55.870
<v Speaker 0>for the deployment to succeed.

00:01:57.310 --> 00:01:59.230
<v Speaker 0>Inside of our prod directory, we have another

00:01:59.230 --> 00:02:00.670
<v Speaker 0>customization YAML.

00:02:00.830 --> 00:02:03.310
<v Speaker 0>Only instead of setting the namespace to kubisect,

00:02:03.310 --> 00:02:04.350
<v Speaker 0>we're setting it to prod.

00:02:06.465 --> 00:02:08.625
<v Speaker 0>And just like the base directory, we also

00:02:08.625 --> 00:02:10.625
<v Speaker 0>need to create the namespace for the production

00:02:10.625 --> 00:02:11.505
<v Speaker 0>deployment,

00:02:11.905 --> 00:02:14.065
<v Speaker 0>and this is our file tree here. Nice

00:02:14.065 --> 00:02:15.025
<v Speaker 0>and simple.

00:02:16.225 --> 00:02:19.025
<v Speaker 0>Now we can use kube control master apply

00:02:19.025 --> 00:02:21.850
<v Speaker 0>using dash k instead of f to deploy

00:02:21.850 --> 00:02:23.530
<v Speaker 0>our base environment.

00:02:25.770 --> 00:02:28.170
<v Speaker 0>So this will have augmented our deployment dot

00:02:28.170 --> 00:02:30.410
<v Speaker 0>YAML with the changes on the customization dot

00:02:30.410 --> 00:02:33.050
<v Speaker 0>YAML, meaning our deployment will exist inside of

00:02:33.050 --> 00:02:34.250
<v Speaker 0>the KubeBiset

00:02:34.250 --> 00:02:34.970
<v Speaker 0>namespace.

00:02:37.425 --> 00:02:39.665
<v Speaker 0>And as well as specifying the namespace we

00:02:39.665 --> 00:02:41.665
<v Speaker 0>also requested some common labels.

00:02:42.545 --> 00:02:45.345
<v Speaker 0>If we see here the label YouTube cube

00:02:45.345 --> 00:02:47.665
<v Speaker 0>bisect was also added to our deployment.

00:02:49.500 --> 00:02:52.140
<v Speaker 0>Now if we do that apply once again,

00:02:52.220 --> 00:02:53.739
<v Speaker 0>only this time specify

00:02:53.739 --> 00:02:55.260
<v Speaker 0>the production environment,

00:02:56.060 --> 00:02:58.860
<v Speaker 0>we'll see that we created our production namespace

00:02:59.019 --> 00:03:01.579
<v Speaker 0>and we created a new deployment inside of

00:03:01.579 --> 00:03:03.019
<v Speaker 0>the prod namespace.

00:03:04.505 --> 00:03:06.505
<v Speaker 0>And just like the previous example,

00:03:06.505 --> 00:03:08.985
<v Speaker 0>our common labels were also added to the

00:03:08.985 --> 00:03:09.545
<v Speaker 0>deployment.

00:03:14.172 --> 00:03:16.412
<v Speaker 0>And that's it. Those are my two favorite

00:03:16.412 --> 00:03:18.172
<v Speaker 0>changes in the last couple of weeks to

00:03:18.172 --> 00:03:19.452
<v Speaker 0>Kubernetes master.

00:03:19.532 --> 00:03:20.412
<v Speaker 0>Until next time.
