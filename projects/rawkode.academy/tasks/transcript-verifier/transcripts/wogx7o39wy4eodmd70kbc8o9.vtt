WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: edd0e30f-a307-4e4b-8ec9-40b56d87bf75
Created: 2025-04-29T17:15:58.840Z
Duration: 6164.3936
Channels: 1

00:01:46.175 --> 00:01:48.495
<v Speaker 0>No audio. Thank you, Marcos.

00:01:51.159 --> 00:01:52.840
<v Speaker 0>After a flying start.

00:01:53.079 --> 00:01:54.999
<v Speaker 0>Alright. Let me start that again.

00:01:55.479 --> 00:01:58.600
<v Speaker 1>So welcome to the Rawkode Academy.

00:01:58.679 --> 00:02:01.000
<v Speaker 1>I'm David Flanagan, blah blah blah, also known

00:02:01.000 --> 00:02:03.000
<v Speaker 1>as Rawkode. This is the first cluster that

00:02:03.000 --> 00:02:05.235
<v Speaker 1>we've had in quite a while. So I'm

00:02:05.235 --> 00:02:07.315
<v Speaker 1>really excited to be back. We've got lots

00:02:07.315 --> 00:02:09.715
<v Speaker 1>of clusters planned over the next twelve weeks.

00:02:09.715 --> 00:02:11.475
<v Speaker 1>And today is a good special one to

00:02:11.475 --> 00:02:13.635
<v Speaker 1>kick us back off because we've got two

00:02:13.635 --> 00:02:15.795
<v Speaker 1>people who have previously participated

00:02:15.795 --> 00:02:16.835
<v Speaker 1>in clustered,

00:02:16.915 --> 00:02:18.115
<v Speaker 1>and it's gonna be a whole lot of

00:02:18.115 --> 00:02:20.579
<v Speaker 1>fun. So lots of hellos in the chat,

00:02:20.579 --> 00:02:22.180
<v Speaker 1>I'll get to them in just a minute.

00:02:22.180 --> 00:02:23.620
<v Speaker 1>But before we do that, I wanna just

00:02:23.620 --> 00:02:26.019
<v Speaker 1>say thank you to our sponsors that help

00:02:26.019 --> 00:02:27.300
<v Speaker 1>make Clustered happen.

00:02:27.780 --> 00:02:30.420
<v Speaker 1>So first and foremost, Teleport. Teleport is a

00:02:30.420 --> 00:02:32.340
<v Speaker 1>product that we have been using on Clustered

00:02:32.340 --> 00:02:34.260
<v Speaker 1>since the very first episode, and they've been

00:02:34.260 --> 00:02:36.715
<v Speaker 1>supporting this channel for the last few months,

00:02:36.715 --> 00:02:38.715
<v Speaker 1>and I can't thank them enough. Teleport is

00:02:38.715 --> 00:02:40.395
<v Speaker 1>a great product. We use it every single

00:02:40.395 --> 00:02:43.115
<v Speaker 1>week to fix these broken clusters, and I

00:02:43.115 --> 00:02:44.715
<v Speaker 1>recommend that you all go check it out

00:02:44.715 --> 00:02:45.835
<v Speaker 1>at the link below.

00:02:47.110 --> 00:02:49.030
<v Speaker 1>There. I've never done that before.

00:02:49.590 --> 00:02:51.910
<v Speaker 1>I also wanna thank Equinix Metal. They were

00:02:51.910 --> 00:02:53.590
<v Speaker 1>my previous employer and, you know, it was

00:02:53.590 --> 00:02:55.750
<v Speaker 1>great having access to bare metal, but Equinix

00:02:55.750 --> 00:02:58.790
<v Speaker 1>have very generously decided to continue supporting cluster

00:02:58.790 --> 00:03:01.110
<v Speaker 1>by providing all the bare metal clusters, all

00:03:01.110 --> 00:03:03.355
<v Speaker 1>the bare metal machines for me to install

00:03:03.355 --> 00:03:05.195
<v Speaker 1>a cluster onto. So thank you very much

00:03:05.195 --> 00:03:07.595
<v Speaker 1>Equinix Medal, always a pleasure.

00:03:08.715 --> 00:03:12.155
<v Speaker 1>Alrighty. Let's say hello to our wonderful guests

00:03:12.155 --> 00:03:13.035
<v Speaker 1>for today.

00:03:13.675 --> 00:03:15.035
<v Speaker 1>Hello,

00:03:15.035 --> 00:03:17.195
<v Speaker 1>Russell. Hello, Marek. How are you both?

00:03:19.030 --> 00:03:21.270
<v Speaker 2>Hey. How are you doing? Good. Just just

00:03:21.270 --> 00:03:23.349
<v Speaker 2>got my break in on time. Well, I've

00:03:23.349 --> 00:03:25.510
<v Speaker 1>already broken the show by muting myself at

00:03:25.510 --> 00:03:27.349
<v Speaker 1>the start. So, you know, at least the

00:03:27.349 --> 00:03:28.790
<v Speaker 1>first thing that went wrong was me, as

00:03:28.790 --> 00:03:29.110
<v Speaker 1>always.

00:03:30.835 --> 00:03:33.395
<v Speaker 1>Can we start with a little bit of

00:03:33.395 --> 00:03:36.195
<v Speaker 1>an introduction? We'll start with you, Russell.

00:03:37.875 --> 00:03:39.795
<v Speaker 2>Hi. I'm Russell. I'm

00:03:40.275 --> 00:03:43.395
<v Speaker 2>in Rawkode's Discord quite a lot. I

00:03:43.650 --> 00:03:45.489
<v Speaker 2>I don't work in tech anymore, so I'm

00:03:45.489 --> 00:03:47.970
<v Speaker 2>not gonna promote anything or try to recruit

00:03:47.970 --> 00:03:49.410
<v Speaker 2>anybody. Just

00:03:49.730 --> 00:03:50.850
<v Speaker 2>just have fun.

00:03:51.810 --> 00:03:53.490
<v Speaker 1>Alright. Thank you very much.

00:03:53.970 --> 00:03:54.450
<v Speaker 1>Mark?

00:03:56.045 --> 00:03:57.325
<v Speaker 3>My name is Mark.

00:03:57.645 --> 00:04:00.205
<v Speaker 3>I've worked with Kubernetes for a little while.

00:04:01.885 --> 00:04:04.845
<v Speaker 3>Did a lot with actually, like, the control

00:04:04.845 --> 00:04:08.045
<v Speaker 3>plane stuff. And, I've been trying to share

00:04:08.045 --> 00:04:09.885
<v Speaker 3>my knowledge, with some educational

00:04:10.420 --> 00:04:12.980
<v Speaker 3>content here on YouTube. And,

00:04:13.700 --> 00:04:15.220
<v Speaker 3>yeah, I'm excited to

00:04:16.260 --> 00:04:18.180
<v Speaker 3>excited to get into this cluster and see

00:04:18.180 --> 00:04:19.140
<v Speaker 3>how it's broken.

00:04:19.940 --> 00:04:21.940
<v Speaker 1>I'm sure they're not broken too badly. Right?

00:04:21.940 --> 00:04:24.020
<v Speaker 1>You've both been very kind to each other

00:04:24.180 --> 00:04:26.595
<v Speaker 1>as those sparks fell up your face.

00:04:27.235 --> 00:04:29.155
<v Speaker 1>You can always tell how devious someone's been

00:04:29.155 --> 00:04:30.754
<v Speaker 1>by that smirk, that smile that comes on

00:04:30.754 --> 00:04:32.435
<v Speaker 1>their faces, we're about to get started.

00:04:33.634 --> 00:04:35.955
<v Speaker 1>All right, lots of lows. Hello everybody.

00:04:36.275 --> 00:04:38.995
<v Speaker 1>Let's get onto our first cluster. So before

00:04:38.995 --> 00:04:41.770
<v Speaker 1>we get started, Marek, you offered to be

00:04:41.770 --> 00:04:43.130
<v Speaker 1>the first fixer.

00:04:43.449 --> 00:04:45.690
<v Speaker 1>So I'm gonna pop up my screen share.

00:04:47.210 --> 00:04:49.449
<v Speaker 1>I've set the timer to forty six minutes,

00:04:49.449 --> 00:04:51.050
<v Speaker 1>so that's one minute for us to get

00:04:51.050 --> 00:04:52.410
<v Speaker 1>things going.

00:04:52.889 --> 00:04:57.130
<v Speaker 1>So I'm gonna open a session on the

00:04:56.224 --> 00:04:57.824
<v Speaker 1>Russell control plan.

00:04:58.705 --> 00:05:00.465
<v Speaker 1>And if you can join a session, please

00:05:00.465 --> 00:05:02.305
<v Speaker 1>remember not to open a new one and

00:05:02.305 --> 00:05:04.465
<v Speaker 1>start exporting your KubeConfig,

00:05:04.865 --> 00:05:06.465
<v Speaker 1>and then we'll take it from there. So

00:05:06.465 --> 00:05:07.025
<v Speaker 1>best of luck.

00:05:13.630 --> 00:05:15.310
<v Speaker 3>Okay. One second.

00:05:16.430 --> 00:05:18.190
<v Speaker 3>How do I join that session? It's not

00:05:18.190 --> 00:05:18.990
<v Speaker 3>letting me.

00:05:19.470 --> 00:05:20.750
<v Speaker 1>It's not letting you?

00:05:22.350 --> 00:05:24.350
<v Speaker 1>So I don't I was gonna flash my

00:05:24.350 --> 00:05:25.710
<v Speaker 1>IP address, but I guess it doesn't really

00:05:25.710 --> 00:05:26.350
<v Speaker 1>matter, does it?

00:05:29.285 --> 00:05:30.325
<v Speaker 1>If you go to

00:05:30.885 --> 00:05:31.765
<v Speaker 1>activity

00:05:31.925 --> 00:05:34.085
<v Speaker 1>and then click on active sessions, there should

00:05:34.085 --> 00:05:36.405
<v Speaker 1>be a join button next to my IP

00:05:36.405 --> 00:05:39.285
<v Speaker 1>address and stuff. Yep. Yep. Sorry. My bad.

00:05:40.750 --> 00:05:41.870
<v Speaker 3>I forgot.

00:05:43.070 --> 00:05:47.070
<v Speaker 3>Alright. Hey. You're in. You're in. Let's

00:05:47.070 --> 00:05:50.190
<v Speaker 3>let's get started with setting up our kubectl

00:05:50.190 --> 00:05:50.830
<v Speaker 3>here.

00:05:52.430 --> 00:05:53.070
<v Speaker 3>Let's see.

00:05:53.905 --> 00:05:56.145
<v Speaker 3>So oh, we have a story. I have

00:05:56.145 --> 00:05:58.544
<v Speaker 3>heard that the stories are legendary, so we're

00:05:58.544 --> 00:05:59.585
<v Speaker 3>gonna check that out.

00:06:03.185 --> 00:06:06.065
<v Speaker 3>Let's see. We have oh, chapters. My goodness.

00:06:06.759 --> 00:06:08.360
<v Speaker 1>Are these hints or are these the story

00:06:08.360 --> 00:06:10.840
<v Speaker 1>we should be following along, Russell? What what

00:06:10.840 --> 00:06:11.800
<v Speaker 1>do want us to do?

00:06:12.360 --> 00:06:13.560
<v Speaker 2>I'm

00:06:13.560 --> 00:06:15.719
<v Speaker 2>surprised. Welcome to the Shire still. Think that

00:06:15.719 --> 00:06:17.719
<v Speaker 2>might be empty, but yeah. So

00:06:18.824 --> 00:06:20.345
<v Speaker 2>do do what you want, but as soon

00:06:20.345 --> 00:06:21.785
<v Speaker 2>as you find a problem, maybe go into

00:06:21.785 --> 00:06:23.705
<v Speaker 2>chapter one and have a look. Alright. So

00:06:23.705 --> 00:06:25.384
<v Speaker 1>let let's let's check for our control plan

00:06:25.384 --> 00:06:26.505
<v Speaker 1>first, Mark. Right?

00:06:27.145 --> 00:06:28.585
<v Speaker 3>Yeah. Okay. So the

00:06:29.544 --> 00:06:32.664
<v Speaker 3>let's get the let's export our cube config,

00:06:33.310 --> 00:06:35.630
<v Speaker 3>which I think our kube config

00:06:36.270 --> 00:06:37.070
<v Speaker 3>is

00:06:37.229 --> 00:06:38.830
<v Speaker 3>stored at

00:06:49.105 --> 00:06:50.065
<v Speaker 3>admin.com.

00:06:50.065 --> 00:06:51.665
<v Speaker 3>Okay. So we'll just do

00:06:54.705 --> 00:06:55.425
<v Speaker 3>this.

00:06:56.385 --> 00:06:57.505
<v Speaker 3>This is where,

00:06:58.065 --> 00:06:59.985
<v Speaker 3>as I was reminded, kubeadm

00:07:01.310 --> 00:07:04.110
<v Speaker 3>likes to deposit its kube config.

00:07:04.270 --> 00:07:04.910
<v Speaker 3>So

00:07:15.155 --> 00:07:16.835
<v Speaker 1>Alright. And what command are you gonna use

00:07:16.835 --> 00:07:18.675
<v Speaker 1>to check for this control plan then?

00:07:18.995 --> 00:07:20.195
<v Speaker 1>What's your choice?

00:07:21.395 --> 00:07:23.955
<v Speaker 3>I just kinda start with nodes.

00:07:25.155 --> 00:07:25.875
<v Speaker 3>One second.

00:07:26.810 --> 00:07:28.010
<v Speaker 3>KubeCTL.

00:07:30.090 --> 00:07:32.490
<v Speaker 1>I do love a good permission denied editor.

00:07:32.490 --> 00:07:34.490
<v Speaker 1>I always Yeah. Right off the bat.

00:07:34.970 --> 00:07:38.410
<v Speaker 3>Okay. Was that I don't have permission to

00:07:38.410 --> 00:07:39.610
<v Speaker 3>KubeCTL

00:07:39.610 --> 00:07:41.290
<v Speaker 3>or to the git nodes.

00:07:42.294 --> 00:07:43.414
<v Speaker 1>That

00:07:43.414 --> 00:07:46.854
<v Speaker 1>is the binary Linux editor. Right? Yeah. Which

00:07:46.854 --> 00:07:47.735
<v Speaker 3>would just

00:07:51.974 --> 00:07:52.775
<v Speaker 1>Kevin

00:07:52.775 --> 00:07:54.455
<v Speaker 1>is watching with snacks.

00:07:54.694 --> 00:07:56.534
<v Speaker 1>Hopefully, you've got a beer there too, Kevin.

00:07:57.470 --> 00:07:59.230
<v Speaker 1>If not Where? Maybe next time.

00:08:06.990 --> 00:08:09.070
<v Speaker 1>Yeah. W H I C H.

00:08:09.390 --> 00:08:09.790
<v Speaker 1>Oh.

00:08:22.105 --> 00:08:24.345
<v Speaker 3>So I have root here.

00:08:25.900 --> 00:08:27.980
<v Speaker 3>One second. Let me just do

00:08:44.059 --> 00:08:45.105
<v Speaker 1>oh. I'll go to that.

00:08:46.625 --> 00:08:48.865
<v Speaker 3>Oh, yeah. That was actually really that's not

00:08:48.865 --> 00:08:49.825
<v Speaker 3>what I meant.

00:08:51.265 --> 00:08:53.105
<v Speaker 3>That is that is not what I meant.

00:08:53.980 --> 00:08:55.580
<v Speaker 1>And if you control c that, we're probably

00:08:55.580 --> 00:08:57.820
<v Speaker 1>gonna be stuck with a rather interesting terminal,

00:08:57.820 --> 00:08:59.500
<v Speaker 1>I think. Right? Oh.

00:08:59.740 --> 00:09:01.660
<v Speaker 3>Oh, was I not supposed to control c?

00:09:02.220 --> 00:09:04.060
<v Speaker 1>No. If you control c oh, no. You're

00:09:04.060 --> 00:09:05.980
<v Speaker 1>okay. You're okay. Normally, you get stuck in,

00:09:05.980 --> 00:09:07.420
<v Speaker 1>like, some sort of weird Unicode

00:09:07.964 --> 00:09:09.725
<v Speaker 1>binary blurb and you have to reset the

00:09:09.725 --> 00:09:11.404
<v Speaker 1>session, but I think you're alright.

00:09:12.125 --> 00:09:13.565
<v Speaker 3>How do I stop it?

00:09:14.365 --> 00:09:15.565
<v Speaker 1>It has stopped.

00:09:16.125 --> 00:09:17.964
<v Speaker 1>You know, c l s? I just typed

00:09:17.964 --> 00:09:18.445
<v Speaker 1>it.

00:09:18.925 --> 00:09:20.524
<v Speaker 3>No. I'm gonna reconnect.

00:09:20.764 --> 00:09:23.400
<v Speaker 1>I just refreshed the page. It'll be fine.

00:09:29.480 --> 00:09:30.200
<v Speaker 3>Alright.

00:09:31.080 --> 00:09:33.960
<v Speaker 3>Don't do that. That was dumb. Moving on.

00:09:33.960 --> 00:09:36.440
<v Speaker 3>Alright. So why was I getting permission denied?

00:09:37.025 --> 00:09:39.345
<v Speaker 3>I was going to actually check its permission,

00:09:39.345 --> 00:09:41.185
<v Speaker 3>its file permission. That's what I wanted to

00:09:41.185 --> 00:09:43.185
<v Speaker 3>do. Not Yeah. Cat may not be the

00:09:43.185 --> 00:09:45.425
<v Speaker 1>best command for that. Maybe try something else.

00:09:49.665 --> 00:09:50.065
<v Speaker 1>Yep.

00:09:52.480 --> 00:09:54.639
<v Speaker 3>I haven't rejoined yet. So

00:09:57.600 --> 00:10:00.399
<v Speaker 1>Alright. I'll check the permissions while you're rejoining.

00:10:02.079 --> 00:10:03.199
<v Speaker 1>Make myself useful.

00:10:10.975 --> 00:10:13.135
<v Speaker 1>Those look alright, actually.

00:10:15.135 --> 00:10:16.815
<v Speaker 3>So was it binary?

00:10:16.975 --> 00:10:19.710
<v Speaker 3>Was it a Linux final permission? Like, it

00:10:19.710 --> 00:10:21.550
<v Speaker 3>seems weird, especially being root that

00:10:22.110 --> 00:10:24.430
<v Speaker 3>I mean, unless it was owned by somebody

00:10:24.430 --> 00:10:26.350
<v Speaker 3>else, which it's owned by root,

00:10:26.910 --> 00:10:29.070
<v Speaker 3>and it has rewrite and execute.

00:10:30.110 --> 00:10:32.670
<v Speaker 3>Actually, could you try running kubectl

00:10:32.975 --> 00:10:35.535
<v Speaker 3>with, like, the full path and not like,

00:10:35.535 --> 00:10:38.815
<v Speaker 3>did he do some weird alias on kubectl,

00:10:40.975 --> 00:10:42.495
<v Speaker 3>which would hurt my feelings?

00:10:47.310 --> 00:10:49.550
<v Speaker 1>Nope. You're definitely getting permission denied.

00:10:50.030 --> 00:10:51.630
<v Speaker 1>But what could be causing that?

00:10:56.830 --> 00:10:57.630
<v Speaker 1>Any thoughts?

00:11:00.455 --> 00:11:02.935
<v Speaker 1>Keen observation from James in the the chat

00:11:02.935 --> 00:11:04.214
<v Speaker 1>there, I've gotta say.

00:11:04.535 --> 00:11:07.335
<v Speaker 3>That time stamp looks a little suspicious.

00:11:07.735 --> 00:11:09.175
<v Speaker 1>It does, doesn't it?

00:11:09.735 --> 00:11:11.255
<v Speaker 3>I've actually never run into this.

00:11:12.810 --> 00:11:15.529
<v Speaker 1>Alright. Let's let's talk about this. So

00:11:15.930 --> 00:11:18.490
<v Speaker 1>there I think there are few ways that

00:11:18.490 --> 00:11:19.690
<v Speaker 1>this could be achieved,

00:11:20.170 --> 00:11:21.769
<v Speaker 1>and then maybe we'll read chapter one in

00:11:21.769 --> 00:11:23.690
<v Speaker 1>a minute if I'm wrong. But we've checked

00:11:23.690 --> 00:11:26.490
<v Speaker 1>out the base permissions. Right? The alter permissions,

00:11:26.490 --> 00:11:27.945
<v Speaker 1>and those look

00:11:28.505 --> 00:11:30.905
<v Speaker 1>fine. We have the executable bit.

00:11:32.825 --> 00:11:34.904
<v Speaker 1>So the other thing that it could be

00:11:34.904 --> 00:11:37.305
<v Speaker 1>is potentially an attribute on the file that

00:11:37.305 --> 00:11:39.464
<v Speaker 1>doesn't allow it to be executed. Although, I'm

00:11:39.464 --> 00:11:40.505
<v Speaker 1>not sure

00:11:43.140 --> 00:11:44.900
<v Speaker 1>what attribute that would be.

00:11:45.779 --> 00:11:47.380
<v Speaker 1>No. That does not appear to be the

00:11:47.380 --> 00:11:47.940
<v Speaker 1>case.

00:11:48.740 --> 00:11:49.460
<v Speaker 1>So

00:11:50.260 --> 00:11:52.740
<v Speaker 1>what else could cause a permission denied would

00:11:52.740 --> 00:11:53.779
<v Speaker 1>be

00:11:55.464 --> 00:11:56.505
<v Speaker 1>potentially

00:11:56.824 --> 00:11:58.985
<v Speaker 1>that Russell has just compiled his own cube

00:11:58.985 --> 00:12:01.865
<v Speaker 1>control, which I think would be particularly devious.

00:12:02.105 --> 00:12:04.105
<v Speaker 1>But I don't put it past them, especially

00:12:04.105 --> 00:12:06.345
<v Speaker 1>considering our home directory here

00:12:06.584 --> 00:12:08.505
<v Speaker 1>has a good directory, doesn't it?

00:12:11.110 --> 00:12:13.990
<v Speaker 3>I'm I think my Internet's having trouble. One

00:12:13.990 --> 00:12:15.030
<v Speaker 3>second. Let me

00:12:15.750 --> 00:12:16.870
<v Speaker 3>let me check.

00:12:17.190 --> 00:12:19.190
<v Speaker 1>You're coming through just fine. I think that

00:12:19.190 --> 00:12:19.510
<v Speaker 1>okay.

00:12:25.815 --> 00:12:28.135
<v Speaker 3>I don't know. I'm, I'm breaking up.

00:12:28.774 --> 00:12:31.415
<v Speaker 1>You're okay on this side?

00:12:32.375 --> 00:12:34.535
<v Speaker 3>I can't hear anything that you're saying if

00:12:34.535 --> 00:12:35.654
<v Speaker 3>you guys are saying something.

00:12:37.760 --> 00:12:39.360
<v Speaker 1>Russell, can you hear me okay?

00:12:40.240 --> 00:12:41.680
<v Speaker 2>Yeah. I can hear you fine.

00:12:44.240 --> 00:12:45.920
<v Speaker 2>So can you hear me, Marek?

00:12:47.520 --> 00:12:50.000
<v Speaker 3>Okay. Yeah. So I heard you, Russell.

00:12:50.320 --> 00:12:51.279
<v Speaker 1>But you didn't hear me?

00:12:54.505 --> 00:12:55.145
<v Speaker 3>No?

00:12:55.705 --> 00:12:58.745
<v Speaker 3>I I cannot 01:00, two o'clock, three o'clock,

00:12:58.745 --> 00:13:01.465
<v Speaker 1>rock. No? You're not Oh, I got 03:00.

00:13:04.425 --> 00:13:05.465
<v Speaker 1>Yeah.

00:13:05.465 --> 00:13:07.225
<v Speaker 1>I'm not sure what that could be.

00:13:11.040 --> 00:13:12.720
<v Speaker 2>This is a part of my break.

00:13:15.680 --> 00:13:16.480
<v Speaker 1>Alright.

00:13:17.360 --> 00:13:18.639
<v Speaker 1>Well, Merrick works.

00:13:18.959 --> 00:13:21.360
<v Speaker 1>Don't we entertain ourselves with the

00:13:21.680 --> 00:13:22.079
<v Speaker 1>story?

00:13:24.695 --> 00:13:26.214
<v Speaker 1>So we go to chapter

00:13:26.615 --> 00:13:27.335
<v Speaker 1>one.

00:13:28.535 --> 00:13:29.735
<v Speaker 3>Alright. So

00:13:30.535 --> 00:13:32.855
<v Speaker 3>the I I couldn't hear you guys, but

00:13:32.855 --> 00:13:34.055
<v Speaker 3>I don't know if you can hear me.

00:13:34.055 --> 00:13:36.055
<v Speaker 3>But he could have

00:13:37.110 --> 00:13:38.550
<v Speaker 3>I think what you guys were saying is

00:13:38.550 --> 00:13:40.550
<v Speaker 3>his own KubeCTL. So I I think that

00:13:40.550 --> 00:13:43.270
<v Speaker 3>we could look at at the history on

00:13:43.270 --> 00:13:45.510
<v Speaker 3>that KubeCTL and if it's the actual right

00:13:45.510 --> 00:13:46.070
<v Speaker 3>one,

00:13:47.190 --> 00:13:48.390
<v Speaker 3>or we could read his story.

00:13:50.495 --> 00:13:52.575
<v Speaker 1>Well, if I mean, you've got a hypothesis.

00:13:52.575 --> 00:13:53.935
<v Speaker 1>I I'm assuming you can hear me, but

00:13:53.935 --> 00:13:55.855
<v Speaker 1>I don't know. We've got a hypothesis. Right?

00:13:55.855 --> 00:13:57.455
<v Speaker 1>We think potentially he swapped out the Kube

00:13:57.455 --> 00:13:59.855
<v Speaker 1>control paneling. I'm kind of inclined to believe

00:13:59.855 --> 00:14:01.615
<v Speaker 1>that he has. So I would suggest that

00:14:01.615 --> 00:14:03.215
<v Speaker 1>why don't we just reinstall

00:14:04.529 --> 00:14:06.450
<v Speaker 1>the Kube control binary with that?

00:14:10.130 --> 00:14:11.970
<v Speaker 1>Although Russell has said in the chat that

00:14:11.970 --> 00:14:13.890
<v Speaker 1>he only attacked the cluster.

00:14:15.250 --> 00:14:18.130
<v Speaker 2>That was about the dossing somebody. Not about.

00:14:19.265 --> 00:14:20.865
<v Speaker 1>Don't trip me up, Russell. This is hard

00:14:20.865 --> 00:14:22.065
<v Speaker 1>on him. Right.

00:14:23.025 --> 00:14:24.145
<v Speaker 1>Mark, you there?

00:14:28.545 --> 00:14:28.945
<v Speaker 1>Nope.

00:14:36.030 --> 00:14:36.830
<v Speaker 1>Alright.

00:14:37.550 --> 00:14:40.270
<v Speaker 1>Oh, he's away. Hopefully, hopefully he comes back.

00:14:41.710 --> 00:14:44.110
<v Speaker 1>Otherwise, I'm I'm fixing that cluster.

00:14:44.430 --> 00:14:45.950
<v Speaker 1>Let's see if we got a control plan.

00:14:45.950 --> 00:14:48.584
<v Speaker 1>So go on. Tell us, Russell, did you

00:14:48.584 --> 00:14:50.345
<v Speaker 1>recompile your own cube control?

00:14:50.825 --> 00:14:52.025
<v Speaker 2>I did indeed.

00:14:52.185 --> 00:14:54.265
<v Speaker 2>I compile I compiled it. I took a

00:14:54.265 --> 00:14:56.105
<v Speaker 2>look at it, did the modifications myself, looked

00:14:56.105 --> 00:14:57.865
<v Speaker 2>at the error messages. I was like, I

00:14:57.865 --> 00:14:59.625
<v Speaker 2>could just, yeah, I could just echo that

00:14:59.625 --> 00:15:00.665
<v Speaker 2>out. And then

00:15:01.144 --> 00:15:01.865
<v Speaker 2>I've

00:15:01.980 --> 00:15:03.980
<v Speaker 2>to to make it look more realistic, what

00:15:03.980 --> 00:15:05.180
<v Speaker 2>what I didn't do is change the data.

00:15:05.180 --> 00:15:06.300
<v Speaker 2>I should change the data. To make it

00:15:06.300 --> 00:15:09.339
<v Speaker 2>look more realistic, I I embedded the actual

00:15:09.339 --> 00:15:11.260
<v Speaker 2>cube control in it as a as a

00:15:11.260 --> 00:15:13.100
<v Speaker 2>resource, as in the binary sort of a

00:15:13.100 --> 00:15:13.420
<v Speaker 2>binary.

00:15:14.205 --> 00:15:16.205
<v Speaker 2>However, if you look at the the

00:15:17.005 --> 00:15:18.925
<v Speaker 2>hints, I kind of show you where it

00:15:18.925 --> 00:15:19.405
<v Speaker 2>is.

00:15:20.125 --> 00:15:22.285
<v Speaker 2>So I actually copied it before I put

00:15:22.285 --> 00:15:23.005
<v Speaker 2>my owner.

00:15:24.285 --> 00:15:26.205
<v Speaker 2>However, you you install the new ones up.

00:15:26.205 --> 00:15:27.245
<v Speaker 2>That's how easy it is.

00:15:27.965 --> 00:15:29.325
<v Speaker 1>Alright. So

00:15:30.209 --> 00:15:31.810
<v Speaker 1>I'm not gonna read this out loud for

00:15:31.810 --> 00:15:33.490
<v Speaker 1>everybody. I'll just leave it there for a

00:15:33.490 --> 00:15:34.050
<v Speaker 1>moment.

00:15:37.010 --> 00:15:39.010
<v Speaker 2>Yeah. I have to apologize to anybody that

00:15:39.010 --> 00:15:40.930
<v Speaker 2>likes Lord of the Rings. Yeah. I might

00:15:40.930 --> 00:15:43.329
<v Speaker 2>have I might have desecrated it. Sorry.

00:15:48.895 --> 00:15:51.055
<v Speaker 1>Alright. Okay. So we got a plot. We

00:15:51.055 --> 00:15:52.735
<v Speaker 1>got the hint, which I'm assuming is just

00:15:52.735 --> 00:15:53.535
<v Speaker 1>gonna say.

00:15:55.375 --> 00:15:56.495
<v Speaker 1>Yeah. Okay. Cool.

00:15:57.640 --> 00:15:59.960
<v Speaker 1>So when we run kget pods,

00:16:00.440 --> 00:16:02.279
<v Speaker 1>we have a Postgres,

00:16:02.279 --> 00:16:04.680
<v Speaker 1>but we don't have our clustered application.

00:16:06.520 --> 00:16:08.839
<v Speaker 1>So I'm gonna check for my deployment.

00:16:14.495 --> 00:16:15.695
<v Speaker 1>Oh, that's mean.

00:16:19.375 --> 00:16:21.135
<v Speaker 1>Now I have to get the YAML.

00:16:23.695 --> 00:16:26.095
<v Speaker 1>Alright. So all the automation for this looks

00:16:26.095 --> 00:16:27.215
<v Speaker 1>very clustered.

00:16:29.860 --> 00:16:31.300
<v Speaker 2>That's what I forgot to do. I forgot

00:16:31.300 --> 00:16:32.660
<v Speaker 2>to copy that one for you.

00:16:34.740 --> 00:16:35.540
<v Speaker 2>That's it.

00:16:36.820 --> 00:16:39.140
<v Speaker 1>Regular Kubernetes

00:16:39.300 --> 00:16:40.339
<v Speaker 1>deployment.

00:16:40.899 --> 00:16:41.540
<v Speaker 1>Raw.

00:16:42.180 --> 00:16:43.060
<v Speaker 1>Copy. Copy. Copy.

00:16:43.865 --> 00:16:46.745
<v Speaker 1>Oh, that's pretty much same thing. Oh, wrong

00:16:46.745 --> 00:16:47.385
<v Speaker 1>one.

00:16:49.305 --> 00:16:50.584
<v Speaker 1>Kip control

00:16:50.584 --> 00:16:52.024
<v Speaker 1>apply dash f.

00:16:55.800 --> 00:16:57.960
<v Speaker 1>Oh, sneaky, sneaky, sneaky.

00:17:03.080 --> 00:17:03.880
<v Speaker 1>Alright.

00:17:04.440 --> 00:17:06.839
<v Speaker 1>Let's check for the obvious things here.

00:17:06.920 --> 00:17:07.960
<v Speaker 1>Mutating

00:17:07.960 --> 00:17:09.800
<v Speaker 1>webhook configurations.

00:17:12.575 --> 00:17:13.375
<v Speaker 1>Alright.

00:17:15.935 --> 00:17:18.015
<v Speaker 1>Yeah. Marek has just reached the it says

00:17:18.015 --> 00:17:20.095
<v Speaker 1>his internet is having problems. So I'm just

00:17:20.095 --> 00:17:21.775
<v Speaker 1>gonna keep debugging the cluster for now and

00:17:21.775 --> 00:17:23.295
<v Speaker 1>hopefully Marek can join us again.

00:17:28.830 --> 00:17:32.269
<v Speaker 1>Okay. So cool effect. Like, I applied

00:17:32.590 --> 00:17:34.109
<v Speaker 1>the deployment YAML.

00:17:34.830 --> 00:17:35.950
<v Speaker 1>It appears

00:17:37.309 --> 00:17:37.950
<v Speaker 1>to work.

00:17:44.425 --> 00:17:46.505
<v Speaker 1>Oh, that is a very restricted view of

00:17:46.505 --> 00:17:46.985
<v Speaker 1>my cluster.

00:17:51.720 --> 00:17:53.960
<v Speaker 1>Maybe not actually because oh, yeah. Okay.

00:17:54.520 --> 00:17:57.880
<v Speaker 1>Because this is the rail cluster. Yeah. That's

00:17:57.880 --> 00:18:00.600
<v Speaker 2>deployment, isn't it? So, yeah, that's all it

00:18:00.600 --> 00:18:02.840
<v Speaker 2>should have. Yeah. I was just having a

00:18:02.840 --> 00:18:03.399
<v Speaker 1>moment.

00:18:03.880 --> 00:18:05.000
<v Speaker 1>Okay. So

00:18:08.215 --> 00:18:09.575
<v Speaker 1>where's my deployment?

00:18:13.495 --> 00:18:15.414
<v Speaker 1>So it gets accepted.

00:18:18.055 --> 00:18:18.935
<v Speaker 1>Okay.

00:18:22.360 --> 00:18:23.559
<v Speaker 1>Deployment.

00:18:24.840 --> 00:18:25.960
<v Speaker 1>Deployments.

00:18:29.400 --> 00:18:31.159
<v Speaker 1>Let's say I pop over one more of

00:18:31.159 --> 00:18:31.320
<v Speaker 1>these.

00:18:43.015 --> 00:18:44.375
<v Speaker 1>I'm gonna have to get a URL again

00:18:44.375 --> 00:18:45.575
<v Speaker 1>or copy it from here.

00:18:55.340 --> 00:18:57.340
<v Speaker 1>I'm not gonna have my export.

00:18:58.540 --> 00:19:00.299
<v Speaker 1>This is what I get for trying to

00:19:00.300 --> 00:19:02.300
<v Speaker 1>watch it. Okay. Wanna see if it flashes

00:19:02.300 --> 00:19:03.260
<v Speaker 1>in for a second.

00:19:05.705 --> 00:19:07.544
<v Speaker 1>Or if it's just not there at all.

00:19:07.544 --> 00:19:09.224
<v Speaker 1>Let's go back to our watch.

00:19:12.424 --> 00:19:14.104
<v Speaker 1>There we go. Okay.

00:19:14.904 --> 00:19:18.105
<v Speaker 1>So something it's getting created, but it's getting

00:19:18.105 --> 00:19:19.144
<v Speaker 1>deleted

00:19:19.230 --> 00:19:21.870
<v Speaker 1>pretty quickly. So I suspect that this could

00:19:21.870 --> 00:19:22.429
<v Speaker 1>be

00:19:22.910 --> 00:19:24.590
<v Speaker 1>the story of the rogue process.

00:19:32.425 --> 00:19:34.345
<v Speaker 1>I'll do a c m f in here.

00:19:34.345 --> 00:19:36.025
<v Speaker 1>That has Russell's signature on it.

00:19:45.640 --> 00:19:48.040
<v Speaker 1>You could be hiding something

00:19:49.320 --> 00:19:50.920
<v Speaker 1>on another node as well.

00:20:00.275 --> 00:20:01.315
<v Speaker 1>Looks alright.

00:20:03.235 --> 00:20:04.434
<v Speaker 1>That's that w w.

00:20:08.990 --> 00:20:11.790
<v Speaker 1>Okay. No weird triplet params.

00:20:12.590 --> 00:20:13.950
<v Speaker 1>Don't think so.

00:20:15.950 --> 00:20:17.310
<v Speaker 1>Cilium Teleport.

00:20:23.485 --> 00:20:25.245
<v Speaker 1>I assume that's okay.

00:20:25.965 --> 00:20:27.565
<v Speaker 1>I'll put it in the suspect list.

00:20:33.500 --> 00:20:35.580
<v Speaker 1>Control plan, etcd,

00:20:46.380 --> 00:20:47.980
<v Speaker 1>and then kernel processes.

00:20:49.695 --> 00:20:50.494
<v Speaker 1>Alright.

00:20:52.975 --> 00:20:54.495
<v Speaker 1>Do you mind if I ask you one

00:20:54.495 --> 00:20:56.335
<v Speaker 1>question before I go down some rabbit hole

00:20:56.335 --> 00:20:56.975
<v Speaker 1>here?

00:20:57.215 --> 00:20:58.335
<v Speaker 2>Fire away. No.

00:21:02.470 --> 00:21:04.230
<v Speaker 1>Is there is there a process running on

00:21:04.230 --> 00:21:05.590
<v Speaker 1>one of the worker nodes that I should

00:21:05.590 --> 00:21:06.789
<v Speaker 1>go be looking for, or am I just

00:21:06.870 --> 00:21:08.549
<v Speaker 1>is that we can done the wrong path?

00:21:11.269 --> 00:21:11.989
<v Speaker 2>Yes.

00:21:12.070 --> 00:21:14.389
<v Speaker 2>Yes. Yes. Yes. There is a process.

00:21:15.510 --> 00:21:17.785
<v Speaker 1>Alright. Guys, hear me? We can't hear you.

00:21:17.785 --> 00:21:18.745
<v Speaker 1>Welcome back.

00:21:19.225 --> 00:21:22.265
<v Speaker 3>I'm sorry. I think we're having pretty bad

00:21:22.265 --> 00:21:23.065
<v Speaker 3>snowstorms

00:21:23.065 --> 00:21:25.225
<v Speaker 3>in my area of the world, so I

00:21:25.225 --> 00:21:27.225
<v Speaker 3>don't know. Hopefully, that doesn't happen again.

00:21:28.265 --> 00:21:30.585
<v Speaker 3>Alright. I'm logging back in. You guys can

00:21:30.585 --> 00:21:32.105
<v Speaker 3>continue what you are, and I'll I'll catch

00:21:32.105 --> 00:21:32.929
<v Speaker 3>up. So

00:21:33.809 --> 00:21:34.929
<v Speaker 1>Okay. So

00:21:35.330 --> 00:21:37.090
<v Speaker 1>I'll tell you what I I did is

00:21:37.090 --> 00:21:38.850
<v Speaker 1>I ran a watch on the deployment and

00:21:38.850 --> 00:21:41.570
<v Speaker 1>recreated it because our deployment was missing and

00:21:41.809 --> 00:21:43.570
<v Speaker 1>it got deleted pretty quickly.

00:21:44.865 --> 00:21:45.585
<v Speaker 1>So

00:21:45.825 --> 00:21:48.145
<v Speaker 1>I'm assuming that there was a road process

00:21:48.145 --> 00:21:49.665
<v Speaker 1>running on a control plane, but I couldn't

00:21:49.665 --> 00:21:51.425
<v Speaker 1>see anything. And I asked Russell if I

00:21:51.425 --> 00:21:53.345
<v Speaker 1>should be checking the other nodes, and he

00:21:53.345 --> 00:21:53.904
<v Speaker 1>said,

00:21:54.225 --> 00:21:54.705
<v Speaker 1>yes.

00:21:55.185 --> 00:21:57.505
<v Speaker 1>So I Is there like a road container

00:21:57.585 --> 00:21:58.065
<v Speaker 1>running?

00:21:58.950 --> 00:22:00.230
<v Speaker 1>Well, if I can I'm gonna just see

00:22:00.230 --> 00:22:02.229
<v Speaker 1>if I can find something in PSE UX

00:22:02.470 --> 00:22:03.990
<v Speaker 1>at the moment. So you can join the

00:22:03.990 --> 00:22:05.909
<v Speaker 1>session on the worker one if you want

00:22:05.909 --> 00:22:07.750
<v Speaker 1>and start looking at that process list, or

00:22:07.750 --> 00:22:09.110
<v Speaker 1>you could jump on to worker two and

00:22:09.110 --> 00:22:10.870
<v Speaker 1>see if you could see anything. And then

00:22:10.950 --> 00:22:12.955
<v Speaker 3>I'll jump on to worker two. And then

00:22:12.955 --> 00:22:15.435
<v Speaker 1>I'll hop over once we find that.

00:22:20.315 --> 00:22:21.835
<v Speaker 1>It would be really speed it up.

00:22:22.715 --> 00:22:24.715
<v Speaker 2>You've already guessed it, jump speed it up.

00:22:24.715 --> 00:22:26.475
<v Speaker 2>You probably wanna jump on a worker two.

00:22:28.960 --> 00:22:29.759
<v Speaker 1>Alright.

00:22:30.720 --> 00:22:32.240
<v Speaker 1>Well, I'm gonna open a new session because

00:22:32.240 --> 00:22:33.679
<v Speaker 1>I don't wanna flash your IP address to

00:22:33.679 --> 00:22:36.399
<v Speaker 1>the world, Marek. So if

00:22:37.200 --> 00:22:39.279
<v Speaker 1>you Alright. Wanna join this one. I'll join

00:22:39.279 --> 00:22:40.960
<v Speaker 3>I'll join your session.

00:22:49.095 --> 00:22:49.815
<v Speaker 3>Alright.

00:22:52.855 --> 00:22:53.654
<v Speaker 1>Alright.

00:22:53.815 --> 00:22:55.014
<v Speaker 1>What looks

00:22:55.014 --> 00:22:56.054
<v Speaker 1>suspicious?

00:23:10.330 --> 00:23:12.010
<v Speaker 1>There's a Chrome process running.

00:23:15.745 --> 00:23:17.745
<v Speaker 1>I wonder if we run

00:23:17.745 --> 00:23:19.904
<v Speaker 1>Chrome tab dash e.

00:23:23.345 --> 00:23:23.825
<v Speaker 1>No.

00:23:27.559 --> 00:23:29.160
<v Speaker 1>I should really put this to a pager

00:23:29.160 --> 00:23:31.160
<v Speaker 1>so we can both kinda follow along. Right?

00:23:31.160 --> 00:23:31.799
<v Speaker 1>So

00:23:34.760 --> 00:23:36.520
<v Speaker 1>I'm gonna assume he's not been sneaky enough

00:23:36.520 --> 00:23:38.919
<v Speaker 1>to name the binary starting with a a

00:23:38.919 --> 00:23:40.919
<v Speaker 1>left square bracket. Although, I think we'd still

00:23:40.919 --> 00:23:43.005
<v Speaker 1>see a forward slash at the start. So

00:23:43.005 --> 00:23:44.605
<v Speaker 1>I'm gonna trust the all left square brackets

00:23:44.605 --> 00:23:46.445
<v Speaker 1>are actual kernel processes.

00:23:47.485 --> 00:23:48.845
<v Speaker 1>I'm pretty sure I've tried that before.

00:23:58.180 --> 00:24:00.980
<v Speaker 1>So we got a comment there from Kevin.

00:24:00.980 --> 00:24:03.460
<v Speaker 1>There's an SSH process. There is it.

00:24:05.060 --> 00:24:05.940
<v Speaker 1>Is there?

00:24:06.580 --> 00:24:07.140
<v Speaker 1>That correct?

00:24:10.015 --> 00:24:10.735
<v Speaker 3>Yeah.

00:24:17.935 --> 00:24:18.735
<v Speaker 1>Is that

00:24:19.055 --> 00:24:21.535
<v Speaker 1>not what a normal SSHD command line looks

00:24:21.535 --> 00:24:21.695
<v Speaker 1>like?

00:24:34.340 --> 00:24:35.380
<v Speaker 1>I mean, when is that?

00:24:41.055 --> 00:24:42.975
<v Speaker 1>I I don't think that's suspicious. What what

00:24:42.975 --> 00:24:43.855
<v Speaker 1>do you think?

00:24:45.615 --> 00:24:47.215
<v Speaker 3>No? Absolutely not.

00:24:50.830 --> 00:24:53.070
<v Speaker 3>I don't know. I've never grabbed one, so

00:24:53.070 --> 00:24:54.990
<v Speaker 3>I wanna know. Yeah. I I I think

00:24:54.990 --> 00:24:56.670
<v Speaker 1>it's okay. I'm not I'm not terribly worried

00:24:56.670 --> 00:24:57.549
<v Speaker 1>about that.

00:24:58.990 --> 00:25:00.510
<v Speaker 1>We do have the cron demon and the

00:25:00.510 --> 00:25:02.894
<v Speaker 1>at demon, so I'm not ruling those out.

00:25:02.894 --> 00:25:04.014
<v Speaker 1>I'm not sure if I'd normally yeah. You

00:25:04.014 --> 00:25:06.014
<v Speaker 1>would see those normally, would you? I've just

00:25:06.014 --> 00:25:08.014
<v Speaker 1>got my suspicious head on that. Oh, wait.

00:25:08.014 --> 00:25:08.575
<v Speaker 3>Wait.

00:25:09.134 --> 00:25:10.735
<v Speaker 3>Wait. If it's if

00:25:12.255 --> 00:25:14.495
<v Speaker 3>question. When you were looking at it, was

00:25:14.495 --> 00:25:16.255
<v Speaker 3>it the control plane that was killing the

00:25:16.255 --> 00:25:18.440
<v Speaker 3>pod, or was the pod

00:25:18.760 --> 00:25:20.920
<v Speaker 3>just dying and then the control plane restarting

00:25:20.920 --> 00:25:22.919
<v Speaker 3>it over and over and over again?

00:25:23.800 --> 00:25:25.000
<v Speaker 1>Control plane.

00:25:27.160 --> 00:25:29.720
<v Speaker 3>So if it was the control plane, he'd

00:25:29.720 --> 00:25:31.960
<v Speaker 3>have to have an active connection to the

00:25:31.960 --> 00:25:35.415
<v Speaker 3>control plane. Right? I I did consider changing

00:25:35.415 --> 00:25:37.255
<v Speaker 1>the bank address on the control plane, but

00:25:37.255 --> 00:25:38.855
<v Speaker 1>then, you know, we still wanna deploy workloads

00:25:38.855 --> 00:25:40.775
<v Speaker 1>to the worker. I mean, we I mean,

00:25:40.775 --> 00:25:42.375
<v Speaker 1>we could we could just get rid of

00:25:42.375 --> 00:25:43.815
<v Speaker 1>worker two and have a one worker set

00:25:43.815 --> 00:25:45.415
<v Speaker 1>up. That's a good idea if that's what

00:25:45.415 --> 00:25:47.175
<v Speaker 1>the path you're thinking. But

00:25:48.100 --> 00:25:50.019
<v Speaker 3>Well, I was just trying to limit

00:25:50.500 --> 00:25:52.899
<v Speaker 3>try to understand how it might be working.

00:25:54.100 --> 00:25:55.460
<v Speaker 3>Because if it was, it would have to

00:25:55.460 --> 00:25:58.339
<v Speaker 3>be connecting through via some some

00:25:58.419 --> 00:26:00.419
<v Speaker 3>some connection. So then we could do, like,

00:26:00.419 --> 00:26:01.059
<v Speaker 3>a port scan.

00:26:05.025 --> 00:26:06.705
<v Speaker 1>Yeah. But I don't wanna let this sneaky

00:26:06.705 --> 00:26:08.625
<v Speaker 1>guy away with whatever this is.

00:26:11.665 --> 00:26:13.265
<v Speaker 1>It's your call, Marek. What do you wanna

00:26:13.265 --> 00:26:13.425
<v Speaker 1>do?

00:26:16.230 --> 00:26:17.990
<v Speaker 3>I'm just looking for a second.

00:26:18.630 --> 00:26:21.350
<v Speaker 1>Apparently, the chat are finding something called Rawk.

00:26:21.750 --> 00:26:24.150
<v Speaker 1>Did I met oh, there we go. I

00:26:24.150 --> 00:26:26.230
<v Speaker 1>did I don't see that. Where is it?

00:26:26.230 --> 00:26:26.630
<v Speaker 3>Where is it?

00:26:28.385 --> 00:26:29.904
<v Speaker 3>I don't see it either.

00:26:29.985 --> 00:26:30.864
<v Speaker 3>I'm looking.

00:26:32.144 --> 00:26:34.705
<v Speaker 3>Can we just grep for Rawk? Yeah.

00:26:39.505 --> 00:26:42.065
<v Speaker 1>Alright. Do you wanna take what's happening? Suspicious.

00:26:43.230 --> 00:26:43.950
<v Speaker 3>Yeah.

00:26:44.429 --> 00:26:46.029
<v Speaker 3>Alright. So let's see.

00:26:46.590 --> 00:26:48.190
<v Speaker 1>Alright. Good catch, audience.

00:26:48.670 --> 00:26:49.870
<v Speaker 1>Thank you. Can

00:26:50.270 --> 00:26:51.390
<v Speaker 2>I just add? I

00:26:51.870 --> 00:26:54.110
<v Speaker 2>the one part of my break that didn't

00:26:54.110 --> 00:26:56.924
<v Speaker 2>work because moving between kernels

00:26:57.085 --> 00:26:58.525
<v Speaker 2>was I was recompiling

00:26:58.525 --> 00:26:59.485
<v Speaker 2>PS.

00:26:59.485 --> 00:27:01.165
<v Speaker 2>So if that if I if they got

00:27:01.165 --> 00:27:02.925
<v Speaker 2>that working, you'd never have seen it.

00:27:09.230 --> 00:27:11.309
<v Speaker 2>So be thankful you're on Ubuntu.

00:27:11.790 --> 00:27:13.070
<v Speaker 3>It's like

00:27:13.630 --> 00:27:15.710
<v Speaker 3>work in PS clothing.

00:27:18.030 --> 00:27:19.390
<v Speaker 3>Alright. So

00:27:20.270 --> 00:27:21.150
<v Speaker 3>we found this.

00:27:21.695 --> 00:27:23.135
<v Speaker 3>What do we wanna do? Do we just

00:27:23.135 --> 00:27:24.735
<v Speaker 3>wanna kill it? And then

00:27:25.935 --> 00:27:27.054
<v Speaker 1>let's see.

00:27:27.775 --> 00:27:28.495
<v Speaker 3>How did he

00:27:29.455 --> 00:27:31.455
<v Speaker 3>I'm not sure if I'm connected. I'm I'm

00:27:31.455 --> 00:27:32.975
<v Speaker 3>trying to type. It's not typing.

00:27:38.270 --> 00:27:39.950
<v Speaker 3>Oh, there you go. Oh,

00:27:40.270 --> 00:27:41.629
<v Speaker 3>there we go. Sorry.

00:27:46.510 --> 00:27:48.350
<v Speaker 1>You think he's created a unit file for

00:27:48.350 --> 00:27:48.510
<v Speaker 1>it?

00:27:49.174 --> 00:27:51.975
<v Speaker 3>I don't know. I I thought I'd check.

00:27:56.455 --> 00:27:57.975
<v Speaker 3>Oh, I guess not.

00:27:59.015 --> 00:28:01.015
<v Speaker 1>Yeah. I say we just go We could

00:28:01.015 --> 00:28:03.015
<v Speaker 3>just kill it. Nine sucker that. Yeah.

00:28:10.160 --> 00:28:11.679
<v Speaker 3>It not typing again?

00:28:14.400 --> 00:28:15.200
<v Speaker 1>Let me do it.

00:28:17.275 --> 00:28:19.755
<v Speaker 3>I was trying to do just kill minus

00:28:19.755 --> 00:28:20.715
<v Speaker 3>nine on

00:28:21.195 --> 00:28:21.915
<v Speaker 3>the ID.

00:28:31.780 --> 00:28:33.620
<v Speaker 1>It is not coming back, so that's a

00:28:33.620 --> 00:28:34.419
<v Speaker 1>good sign.

00:28:35.220 --> 00:28:37.540
<v Speaker 3>That's why I was checking the like, if

00:28:37.540 --> 00:28:39.060
<v Speaker 3>you made a system file for it to

00:28:39.060 --> 00:28:40.260
<v Speaker 3>make it just come back.

00:28:41.460 --> 00:28:44.020
<v Speaker 1>Alright. Let's jump back onto our

00:28:44.245 --> 00:28:46.325
<v Speaker 1>control plane. I've got a curl command in

00:28:46.325 --> 00:28:48.244
<v Speaker 1>history that applies my deployment,

00:28:50.005 --> 00:28:52.484
<v Speaker 1>and it does appear to persist this team.

00:28:53.205 --> 00:28:54.965
<v Speaker 1>So I'll let you take over from here.

00:28:55.365 --> 00:28:55.845
<v Speaker 3>Alright.

00:28:59.290 --> 00:29:02.170
<v Speaker 3>We have nodes that look like they're running.

00:29:02.170 --> 00:29:04.250
<v Speaker 3>We have let's check our deployment.

00:29:07.450 --> 00:29:09.450
<v Speaker 3>So we can check the this is just

00:29:09.450 --> 00:29:11.610
<v Speaker 3>the actually, let's check all of it

00:29:13.245 --> 00:29:16.365
<v Speaker 3>just in case there's other things going on

00:29:17.245 --> 00:29:17.725
<v Speaker 3>in

00:29:21.565 --> 00:29:23.885
<v Speaker 3>so we have an ambassador failure. I think

00:29:23.885 --> 00:29:26.630
<v Speaker 3>that's actually normal, though. That is normal because

00:29:26.630 --> 00:29:28.950
<v Speaker 1>they haven't fixed it yet. So yeah. Just

00:29:28.950 --> 00:29:30.389
<v Speaker 1>ignore just ignore We do

00:29:31.190 --> 00:29:32.950
<v Speaker 3>have a core DNS issue.

00:29:35.110 --> 00:29:37.349
<v Speaker 3>This also, I think, is normal,

00:29:37.750 --> 00:29:40.150
<v Speaker 3>this VIP, but the core DNS is not.

00:29:40.425 --> 00:29:42.505
<v Speaker 3>So that's probably going to be an issue.

00:29:43.785 --> 00:29:45.865
<v Speaker 3>Let's see. Is there anything else at this

00:29:45.865 --> 00:29:46.505
<v Speaker 3>point?

00:29:53.945 --> 00:29:56.105
<v Speaker 3>Everything else looks

00:29:57.670 --> 00:29:58.470
<v Speaker 2>let's see.

00:30:03.030 --> 00:30:05.350
<v Speaker 3>So let's check out core DNS.

00:30:05.350 --> 00:30:07.590
<v Speaker 3>Yeah. Let's running the cube system.

00:30:15.784 --> 00:30:16.585
<v Speaker 3>Alright.

00:30:16.745 --> 00:30:18.504
<v Speaker 3>And we want

00:30:19.945 --> 00:30:22.024
<v Speaker 3>we'll just get the logs of this one.

00:30:24.740 --> 00:30:26.740
<v Speaker 1>Created seventy minutes ago.

00:30:28.180 --> 00:30:30.019
<v Speaker 3>Yeah. That's that's suspicious.

00:30:30.100 --> 00:30:33.220
<v Speaker 3>He probably changed the image on it.

00:30:33.540 --> 00:30:35.700
<v Speaker 3>So k. Logs.

00:30:45.075 --> 00:30:46.114
<v Speaker 3>Let's see.

00:30:49.955 --> 00:30:52.355
<v Speaker 3>I don't need the pod in there. I

00:30:53.780 --> 00:30:55.299
<v Speaker 1>Yeah. You could need that.

00:30:58.179 --> 00:31:00.259
<v Speaker 3>Invalid duration five.

00:31:04.500 --> 00:31:07.620
<v Speaker 3>Alright. Let's go ahead and check out

00:31:08.135 --> 00:31:09.975
<v Speaker 3>the core DNS deployment,

00:31:09.975 --> 00:31:10.775
<v Speaker 3>see what

00:31:10.935 --> 00:31:13.495
<v Speaker 3>if if there's anything that looks weird in

00:31:13.495 --> 00:31:16.215
<v Speaker 3>that. We're just going to call maybe a

00:31:16.215 --> 00:31:16.455
<v Speaker 3>dis

00:31:17.095 --> 00:31:18.135
<v Speaker 3>describe.

00:31:19.735 --> 00:31:21.975
<v Speaker 3>Actually, let's do get

00:31:22.560 --> 00:31:23.360
<v Speaker 3>the

00:31:23.680 --> 00:31:24.640
<v Speaker 3>alignment.

00:31:26.560 --> 00:31:27.920
<v Speaker 1>I mean, I would just jump straight in

00:31:27.920 --> 00:31:30.720
<v Speaker 1>there with kubectl get edit, but then I'm

00:31:30.720 --> 00:31:31.920
<v Speaker 1>a bit of a wildcard.

00:31:32.560 --> 00:31:34.720
<v Speaker 3>Alright. Let's do it. Let's edit.

00:31:36.445 --> 00:31:37.805
<v Speaker 1>It's not like we can make it any

00:31:37.805 --> 00:31:40.525
<v Speaker 1>more broken. Right? Oh, no. Don't don't say

00:31:40.525 --> 00:31:42.445
<v Speaker 3>that because I can. Absolutely.

00:31:47.485 --> 00:31:48.365
<v Speaker 3>I can't type.

00:31:51.159 --> 00:31:53.000
<v Speaker 1>Type it on a livestream is always the

00:31:53.000 --> 00:31:54.359
<v Speaker 1>the funniest thing ever.

00:31:55.000 --> 00:31:57.559
<v Speaker 3>I also I've just started like, in the

00:31:57.559 --> 00:31:59.960
<v Speaker 3>last month, I switched to the moon lander

00:31:59.960 --> 00:32:00.440
<v Speaker 3>keyboard,

00:32:03.355 --> 00:32:05.114
<v Speaker 3>and that's been an experience.

00:32:06.554 --> 00:32:08.554
<v Speaker 1>Yeah. You'll need to remove

00:32:08.554 --> 00:32:10.154
<v Speaker 1>deployment or deployment dot apps.

00:32:14.950 --> 00:32:17.190
<v Speaker 1>Yeah. I gave away my Midlander. I gave

00:32:17.190 --> 00:32:19.270
<v Speaker 1>up trying to type with it.

00:32:19.830 --> 00:32:21.350
<v Speaker 3>Oh, did you? Yeah. Alright.

00:32:22.550 --> 00:32:24.790
<v Speaker 3>Let's see. What does this deployment look like?

00:32:24.790 --> 00:32:26.790
<v Speaker 3>We have app, QBNS,

00:32:26.870 --> 00:32:29.430
<v Speaker 3>name, namespace. Where is the image file I'm

00:32:29.430 --> 00:32:30.630
<v Speaker 3>interested in this image?

00:32:34.205 --> 00:32:35.085
<v Speaker 3>Oh, wait.

00:32:38.605 --> 00:32:40.765
<v Speaker 3>Doesn't there have to be an image file?

00:32:41.085 --> 00:32:42.845
<v Speaker 3>Does it Yes. Go ahead. Normal?

00:32:44.590 --> 00:32:45.950
<v Speaker 1>Yeah. You need to scroll down a wee

00:32:45.950 --> 00:32:48.030
<v Speaker 1>bit further to the spec template spec.

00:32:48.110 --> 00:32:50.350
<v Speaker 3>Oh, okay. Sorry. I thought I

00:32:50.590 --> 00:32:53.070
<v Speaker 3>it cuts off halfway on my screen. I

00:32:53.310 --> 00:32:55.710
<v Speaker 1>Just resize the window, like, a millimeter and

00:32:55.710 --> 00:32:57.950
<v Speaker 1>it fixes the scroll. It's a teleport bug.

00:32:58.825 --> 00:32:59.785
<v Speaker 3>Oh.

00:33:00.025 --> 00:33:02.105
<v Speaker 3>Oh, okay. There we go.

00:33:02.425 --> 00:33:04.345
<v Speaker 3>It was all just okay. I got it.

00:33:04.345 --> 00:33:06.905
<v Speaker 3>Thanks. Alright. So let's see. Where is this

00:33:06.905 --> 00:33:07.225
<v Speaker 3>image?

00:33:10.980 --> 00:33:12.100
<v Speaker 1>So the image

00:33:12.260 --> 00:33:13.299
<v Speaker 1>looks okay.

00:33:13.540 --> 00:33:16.980
<v Speaker 3>Yeah. It does. What's failure threshold five?

00:33:17.860 --> 00:33:20.660
<v Speaker 3>I need to pull up maybe an a

00:33:20.660 --> 00:33:23.220
<v Speaker 3>standard one. I'm not sure if I see

00:33:23.220 --> 00:33:25.059
<v Speaker 3>anything that looks suspicious.

00:33:25.985 --> 00:33:27.425
<v Speaker 1>So I'll give you a

00:33:27.825 --> 00:33:30.145
<v Speaker 1>better context here. So this file might be

00:33:30.145 --> 00:33:31.825
<v Speaker 1>tampered with. I think the age of it

00:33:31.825 --> 00:33:34.225
<v Speaker 1>definitely means that it could be. However,

00:33:34.225 --> 00:33:36.305
<v Speaker 1>the there's a conflict map in the cube

00:33:36.305 --> 00:33:37.425
<v Speaker 1>system there. This one?

00:33:39.960 --> 00:33:41.640
<v Speaker 3>Oh, you wanna just check out the config

00:33:41.640 --> 00:33:42.200
<v Speaker 3>map?

00:33:42.520 --> 00:33:44.600
<v Speaker 1>Although, it does also look like he's passing

00:33:44.600 --> 00:33:46.360
<v Speaker 1>in his own core file. Good catch. I

00:33:46.360 --> 00:33:48.360
<v Speaker 1>never saw that. So where's that main main

00:33:48.360 --> 00:33:49.720
<v Speaker 1>point? Do wanna search for that?

00:33:52.434 --> 00:33:54.274
<v Speaker 3>It should be Okay. Towards the bottom of

00:33:54.274 --> 00:33:55.075
<v Speaker 1>this file.

00:33:56.274 --> 00:33:58.914
<v Speaker 3>So let's see. The mount point is right

00:33:58.914 --> 00:34:00.354
<v Speaker 3>here at Etsy

00:34:00.355 --> 00:34:01.154
<v Speaker 3>core DNS.

00:34:03.450 --> 00:34:05.210
<v Speaker 1>Okay. So if we go So

00:34:05.850 --> 00:34:08.810
<v Speaker 1>Then my teleport is doing that thing. Okay.

00:34:09.369 --> 00:34:11.130
<v Speaker 3>Oh, when you resize, it does it to

00:34:11.130 --> 00:34:11.610
<v Speaker 3>me.

00:34:13.530 --> 00:34:15.449
<v Speaker 1>Alright. Okay. I'll just leave it. I just

00:34:15.449 --> 00:34:16.889
<v Speaker 3>will realize that it's

00:34:17.875 --> 00:34:18.515
<v Speaker 3>okay.

00:34:19.395 --> 00:34:21.795
<v Speaker 3>So yeah. Oh, sorry. I won't resize it

00:34:21.795 --> 00:34:23.955
<v Speaker 3>again. You resize for the stream, and then

00:34:23.955 --> 00:34:25.155
<v Speaker 3>I won't touch it.

00:34:26.114 --> 00:34:27.795
<v Speaker 1>Alright. How do test your script right now?

00:34:27.795 --> 00:34:28.675
<v Speaker 1>Is that broken?

00:34:29.075 --> 00:34:30.595
<v Speaker 3>It's broken, but I can deal with it

00:34:30.595 --> 00:34:32.595
<v Speaker 3>if I just understand that I can scroll

00:34:32.595 --> 00:34:35.239
<v Speaker 3>down more. So Right. Okay. So we've got

00:34:35.239 --> 00:34:37.320
<v Speaker 1>a volume amount of the etcetera core DNS.

00:34:37.320 --> 00:34:39.639
<v Speaker 1>It's coming from the column fake volume. So

00:34:39.639 --> 00:34:42.120
<v Speaker 1>if we search for a config volume

00:34:43.400 --> 00:34:45.400
<v Speaker 3>And that's the core file. This is coming

00:34:45.400 --> 00:34:48.195
<v Speaker 1>from a config map called core DNS. So

00:34:48.275 --> 00:34:48.995
<v Speaker 1>let's do

00:34:50.915 --> 00:34:52.675
<v Speaker 1>I'm just gonna type since you've kinda got

00:34:52.675 --> 00:34:54.435
<v Speaker 1>half broken screen, but just

00:34:54.995 --> 00:34:57.795
<v Speaker 3>No. No. That's good. Just edit the yeah.

00:35:02.220 --> 00:35:04.460
<v Speaker 1>This looks like your error message. Right? Yeah.

00:35:04.460 --> 00:35:05.660
<v Speaker 3>The cancel five.

00:35:06.460 --> 00:35:08.220
<v Speaker 3>Maybe we just delete that line.

00:35:09.180 --> 00:35:11.260
<v Speaker 1>I think it should be a duration for

00:35:11.260 --> 00:35:12.380
<v Speaker 1>five s. Oh.

00:35:13.845 --> 00:35:14.565
<v Speaker 1>Okay.

00:35:17.365 --> 00:35:18.645
<v Speaker 3>Should that fix it?

00:35:19.925 --> 00:35:21.845
<v Speaker 3>We could we can check.

00:35:22.165 --> 00:35:23.845
<v Speaker 3>I don't know if you'll need to restart

00:35:23.845 --> 00:35:24.325
<v Speaker 3>it.

00:35:24.885 --> 00:35:26.325
<v Speaker 3>I think it was was it crash loop

00:35:26.325 --> 00:35:28.310
<v Speaker 3>back off, so it should restart anyways? So

00:35:28.310 --> 00:35:30.950
<v Speaker 3>we shouldn't have to delete it. I think

00:35:30.950 --> 00:35:32.870
<v Speaker 1>it's still called kubectin s. Right?

00:35:33.910 --> 00:35:34.310
<v Speaker 1>Yeah.

00:35:41.165 --> 00:35:41.885
<v Speaker 1>Damn it.

00:35:43.565 --> 00:35:44.925
<v Speaker 3>Well, we can get the logs and see

00:35:44.925 --> 00:35:47.085
<v Speaker 3>if that changed it. I don't know the

00:35:47.085 --> 00:35:49.005
<v Speaker 3>core DNS configuration that well.

00:35:54.619 --> 00:35:56.780
<v Speaker 1>Those those things are just all broken,

00:35:57.099 --> 00:35:57.820
<v Speaker 3>Russell.

00:35:58.539 --> 00:35:59.500
<v Speaker 3>He just

00:36:00.299 --> 00:36:02.299
<v Speaker 3>rolled his face on the keyboard in the

00:36:02.460 --> 00:36:04.140
<v Speaker 3>So if he's added these just to make

00:36:04.140 --> 00:36:06.059
<v Speaker 1>me think, oh, Adnan s will be okay,

00:36:06.059 --> 00:36:07.099
<v Speaker 1>but really it does nothing.

00:36:08.705 --> 00:36:10.225
<v Speaker 3>I was gonna say, I think we just

00:36:10.225 --> 00:36:13.185
<v Speaker 3>delete them. I can pull up a standard

00:36:13.185 --> 00:36:14.545
<v Speaker 3>core DNS file.

00:36:21.680 --> 00:36:24.000
<v Speaker 1>Let's go log again. What's the complain about

00:36:24.000 --> 00:36:24.400
<v Speaker 1>now?

00:36:37.055 --> 00:36:38.655
<v Speaker 1>I mean, should this be strength? I don't

00:36:38.655 --> 00:36:40.974
<v Speaker 1>know. I don't configure core DNS ever. I

00:36:40.974 --> 00:36:43.454
<v Speaker 3>I don't either. So, like It doesn't wanna

00:36:43.454 --> 00:36:46.255
<v Speaker 1>put the half limb duck one. Right? So

00:36:47.559 --> 00:36:49.480
<v Speaker 1>although it says string to I. Right? So

00:36:49.480 --> 00:36:51.960
<v Speaker 1>s t o I is string to integer.

00:36:52.119 --> 00:36:53.880
<v Speaker 1>So that probably should be a 30 in

00:36:53.880 --> 00:36:54.520
<v Speaker 1>that case.

00:36:56.520 --> 00:36:58.520
<v Speaker 3>Right. A time to live. Makes sense.

00:36:58.760 --> 00:37:00.119
<v Speaker 1>I'm gonna delete it one more time, and

00:37:00.119 --> 00:37:01.559
<v Speaker 1>if I if I see crash loop back

00:37:01.559 --> 00:37:05.725
<v Speaker 1>off or or failing, I'm gonna I'm

00:37:05.725 --> 00:37:07.085
<v Speaker 1>gonna be annoyed.

00:37:08.045 --> 00:37:09.325
<v Speaker 3>Oh, there we go.

00:37:10.285 --> 00:37:11.005
<v Speaker 1>Okay.

00:37:12.925 --> 00:37:14.205
<v Speaker 1>So we

00:37:14.525 --> 00:37:16.445
<v Speaker 1>found a we found a logline in code

00:37:16.445 --> 00:37:16.845
<v Speaker 1>DNS.

00:37:17.270 --> 00:37:19.109
<v Speaker 1>Someone messed with the config. We have that

00:37:19.109 --> 00:37:20.070
<v Speaker 1>fixed. So

00:37:21.349 --> 00:37:24.230
<v Speaker 3>just get all in the default system here

00:37:24.230 --> 00:37:26.550
<v Speaker 3>and see what it looks like. Oh, let's

00:37:26.550 --> 00:37:28.630
<v Speaker 3>see. Everything looks to be running. Can we

00:37:28.630 --> 00:37:30.950
<v Speaker 3>access this now? We can. So we can

00:37:30.950 --> 00:37:31.910
<v Speaker 1>use the application

00:37:32.775 --> 00:37:34.375
<v Speaker 1>tab on Teleport

00:37:36.214 --> 00:37:38.375
<v Speaker 1>where I have exposed clustered.

00:37:39.734 --> 00:37:40.695
<v Speaker 1>And let's see.

00:37:44.375 --> 00:37:46.615
<v Speaker 1>Alright. We have the watch tab which is

00:37:46.615 --> 00:37:48.890
<v Speaker 1>version one. So now we have to try

00:37:48.890 --> 00:37:50.970
<v Speaker 1>and upgrade the application to v two.

00:37:52.250 --> 00:37:53.130
<v Speaker 3>Alright.

00:37:55.610 --> 00:37:56.250
<v Speaker 3>So

00:37:56.490 --> 00:37:58.730
<v Speaker 3>let's just run

00:38:00.085 --> 00:38:02.405
<v Speaker 3>an update on the let's just edit the

00:38:02.405 --> 00:38:05.045
<v Speaker 3>deployment. I don't know. Good call. Fine.

00:38:08.325 --> 00:38:10.565
<v Speaker 1>I've had comments on clusters where people call

00:38:10.565 --> 00:38:12.085
<v Speaker 1>me careless for the way that I work

00:38:12.085 --> 00:38:13.125
<v Speaker 1>with the cluster. So

00:38:14.460 --> 00:38:16.859
<v Speaker 3>I mean, let's be clear. I probably wouldn't

00:38:16.859 --> 00:38:18.940
<v Speaker 3>do this if this was a production cluster.

00:38:18.940 --> 00:38:19.580
<v Speaker 3>But,

00:38:21.980 --> 00:38:23.900
<v Speaker 3>yeah, that's a little bit different. So we're

00:38:23.900 --> 00:38:25.420
<v Speaker 3>gonna edit deployment of clustered.

00:38:27.845 --> 00:38:29.685
<v Speaker 1>A moment of truth for Russell.

00:38:31.204 --> 00:38:32.885
<v Speaker 1>Is this break gonna work?

00:38:37.605 --> 00:38:39.605
<v Speaker 3>Sorry. I'm working on a little tiny screen

00:38:39.605 --> 00:38:39.924
<v Speaker 3>here.

00:38:40.500 --> 00:38:42.820
<v Speaker 1>Okay. Let me do the version for you.

00:38:45.460 --> 00:38:47.940
<v Speaker 1>Oh, sorry. I'm I'm just making it worse

00:38:47.940 --> 00:38:48.260
<v Speaker 1>now.

00:38:53.665 --> 00:38:55.184
<v Speaker 1>I really need to think of our way

00:38:55.184 --> 00:38:56.785
<v Speaker 1>to search for that. There we go.

00:38:57.105 --> 00:38:58.545
<v Speaker 3>Yeah. That's yeah.

00:38:59.184 --> 00:38:59.905
<v Speaker 3>Thank you.

00:39:00.385 --> 00:39:00.865
<v Speaker 3>Alright.

00:39:06.540 --> 00:39:08.620
<v Speaker 1>Yeah. It looks like it's good.

00:39:10.540 --> 00:39:13.180
<v Speaker 1>Moment of truth processing. Try accessing it again.

00:39:13.260 --> 00:39:14.780
<v Speaker 3>Let's let's access it.

00:39:21.895 --> 00:39:23.975
<v Speaker 1>We have a DNS issue.

00:39:24.295 --> 00:39:25.175
<v Speaker 2>Success.

00:39:28.455 --> 00:39:29.495
<v Speaker 3>Alright. What

00:39:29.735 --> 00:39:30.535
<v Speaker 1>do you wanna look at?

00:39:31.370 --> 00:39:34.090
<v Speaker 3>So we have a DNS issue

00:39:34.090 --> 00:39:36.010
<v Speaker 3>with possibly our

00:39:36.890 --> 00:39:37.850
<v Speaker 3>database.

00:39:37.930 --> 00:39:40.730
<v Speaker 3>Upgrading it to version two is what caused

00:39:40.730 --> 00:39:41.450
<v Speaker 3>that.

00:39:43.450 --> 00:39:44.250
<v Speaker 3>One

00:39:44.730 --> 00:39:45.050
<v Speaker 3>second.

00:39:54.685 --> 00:39:56.605
<v Speaker 3>Let's see if we have anything that looks

00:39:56.605 --> 00:39:57.725
<v Speaker 3>wrong here.

00:40:07.960 --> 00:40:10.760
<v Speaker 3>So you know what? DNS is not my

00:40:10.760 --> 00:40:12.200
<v Speaker 3>greatest strong suit.

00:40:12.695 --> 00:40:13.335
<v Speaker 3>So

00:40:13.815 --> 00:40:16.775
<v Speaker 3>let's see. We could create a sidecar pod

00:40:16.775 --> 00:40:19.175
<v Speaker 3>and try to start pinging around, but that

00:40:19.175 --> 00:40:21.735
<v Speaker 3>seems like a lot of effort. Yeah.

00:40:21.975 --> 00:40:23.895
<v Speaker 1>Why don't we try to scrape why don't

00:40:23.895 --> 00:40:25.495
<v Speaker 1>you do get service and describe it and

00:40:25.495 --> 00:40:27.095
<v Speaker 1>see if we have endpoint as a starting

00:40:27.095 --> 00:40:29.550
<v Speaker 1>point, and then maybe we'll get Sounds good.

00:40:33.150 --> 00:40:35.870
<v Speaker 1>So we have the postgres service there.

00:40:38.910 --> 00:40:41.550
<v Speaker 1>So you'll want to describe it and see

00:40:42.915 --> 00:40:45.315
<v Speaker 1>if that is even working. Although, I suspect

00:40:45.315 --> 00:40:47.155
<v Speaker 1>it is from the first image.

00:40:47.235 --> 00:40:48.675
<v Speaker 3>Well, I was gonna say it worked the

00:40:48.675 --> 00:40:50.915
<v Speaker 3>first time which is the weird thing is

00:40:50.995 --> 00:40:52.195
<v Speaker 3>I would expect

00:40:52.275 --> 00:40:54.435
<v Speaker 3>the upgrade to the version number to not

00:40:54.435 --> 00:40:57.329
<v Speaker 3>have changed the Postgres back end. Right? Because

00:40:57.329 --> 00:40:59.810
<v Speaker 3>it's its own deployment as a stateful set.

00:41:01.250 --> 00:41:03.490
<v Speaker 1>Sure. Shall we exec end to the cluster

00:41:03.490 --> 00:41:05.170
<v Speaker 1>pod and do some debugging?

00:41:06.770 --> 00:41:08.210
<v Speaker 1>If you got I don't know of anything

00:41:08.210 --> 00:41:09.329
<v Speaker 3>else to like,

00:41:10.265 --> 00:41:12.105
<v Speaker 3>I don't know of another way. So I

00:41:12.105 --> 00:41:13.145
<v Speaker 1>mean, he could've

00:41:13.225 --> 00:41:15.465
<v Speaker 1>fart the cluster repository,

00:41:15.465 --> 00:41:17.465
<v Speaker 1>rebuilt his own cluster damage, and injected that

00:41:17.465 --> 00:41:18.505
<v Speaker 1>into the cluster.

00:41:19.305 --> 00:41:19.945
<v Speaker 1>But

00:41:20.825 --> 00:41:22.505
<v Speaker 1>He went through I I don't think Russell

00:41:22.505 --> 00:41:23.065
<v Speaker 1>would do that.

00:41:25.150 --> 00:41:27.790
<v Speaker 3>That's amazing if you did that. Hats off.

00:41:32.110 --> 00:41:32.830
<v Speaker 1>So,

00:41:33.310 --> 00:41:35.230
<v Speaker 1>yeah, there's a few things I'm curious about.

00:41:35.230 --> 00:41:36.510
<v Speaker 1>I I think we should get inside that

00:41:36.510 --> 00:41:36.830
<v Speaker 1>pod.

00:41:38.485 --> 00:41:41.365
<v Speaker 3>Which one? The the clustered? Yeah. Yeah.

00:41:41.605 --> 00:41:43.685
<v Speaker 1>I I wanna run some DNS commands and

00:41:43.685 --> 00:41:45.285
<v Speaker 1>and see if we can actually

00:41:46.725 --> 00:41:48.005
<v Speaker 1>Yeah. If we can get an IP address.

00:41:48.005 --> 00:41:49.845
<v Speaker 3>Go for it. Alright. Okay. It's not typing

00:41:49.845 --> 00:41:51.685
<v Speaker 3>for me again. I'm trying to just do

00:41:51.685 --> 00:41:52.244
<v Speaker 3>the exact.

00:41:53.820 --> 00:41:55.820
<v Speaker 3>I think sometimes when I highlight it, it

00:41:55.820 --> 00:41:56.700
<v Speaker 3>gets weird.

00:41:57.420 --> 00:41:58.860
<v Speaker 1>Alright. So we got

00:42:03.020 --> 00:42:04.460
<v Speaker 1>did I not leave myself? That's

00:42:05.020 --> 00:42:06.540
<v Speaker 1>I I I can't leave a shell on

00:42:06.540 --> 00:42:08.300
<v Speaker 1>these images. Maybe these aren't my images after

00:42:08.300 --> 00:42:08.620
<v Speaker 1>all.

00:42:10.815 --> 00:42:11.535
<v Speaker 3>Okay.

00:42:12.415 --> 00:42:14.175
<v Speaker 3>But he would've had to upload it to

00:42:14.175 --> 00:42:17.055
<v Speaker 3>your like, he would've it it's pulling from

00:42:17.055 --> 00:42:19.215
<v Speaker 3>a public repository. Right? He can't have screwed

00:42:19.215 --> 00:42:19.775
<v Speaker 3>with that image.

00:42:21.390 --> 00:42:22.990
<v Speaker 1>Wait. There are few ways to screw with

00:42:22.990 --> 00:42:23.790
<v Speaker 1>that image.

00:42:26.510 --> 00:42:28.030
<v Speaker 3>Describe the the

00:42:28.349 --> 00:42:29.230
<v Speaker 3>the

00:42:29.630 --> 00:42:30.670
<v Speaker 3>deployment again.

00:42:31.230 --> 00:42:33.549
<v Speaker 3>It's coming from your repository unless we hacked

00:42:33.549 --> 00:42:34.430
<v Speaker 3>your repository.

00:42:35.595 --> 00:42:37.115
<v Speaker 1>Look at the image ID.

00:42:38.395 --> 00:42:39.115
<v Speaker 1>Oh,

00:42:40.795 --> 00:42:41.915
<v Speaker 3>okay.

00:42:43.915 --> 00:42:44.715
<v Speaker 3>So

00:42:44.795 --> 00:42:46.315
<v Speaker 3>what we need to do

00:42:47.035 --> 00:42:47.915
<v Speaker 3>is

00:42:48.155 --> 00:42:50.875
<v Speaker 3>just nuke the local image. Right?

00:42:52.290 --> 00:42:54.690
<v Speaker 1>So what's the code policy on this?

00:42:56.050 --> 00:42:57.490
<v Speaker 3>Just set it to always.

00:42:58.450 --> 00:43:00.130
<v Speaker 1>Yeah. Let's do edit

00:43:00.770 --> 00:43:01.970
<v Speaker 1>deployment

00:43:02.450 --> 00:43:03.090
<v Speaker 1>clustered.

00:43:05.475 --> 00:43:06.595
<v Speaker 1>Pro policy.

00:43:06.595 --> 00:43:08.275
<v Speaker 1>That is on always. Okay.

00:43:08.515 --> 00:43:09.555
<v Speaker 1>He's

00:43:10.915 --> 00:43:13.155
<v Speaker 1>he's injected the image another way. I can

00:43:13.155 --> 00:43:14.435
<v Speaker 1>only think of one way. I don't wanna

00:43:14.435 --> 00:43:15.875
<v Speaker 1>jump to conclusions just yet.

00:43:18.870 --> 00:43:20.150
<v Speaker 1>We've got seven Okay.

00:43:21.910 --> 00:43:22.790
<v Speaker 3>Let's see.

00:43:23.270 --> 00:43:25.990
<v Speaker 3>How would you inject your image? I mean,

00:43:25.990 --> 00:43:28.470
<v Speaker 3>like, you can hijack your DNS so that

00:43:28.470 --> 00:43:30.470
<v Speaker 3>it's not going there. That would be one

00:43:30.470 --> 00:43:33.350
<v Speaker 3>way. I would hope it failed the TLS

00:43:33.350 --> 00:43:34.070
<v Speaker 1>negotiation.

00:43:37.365 --> 00:43:39.845
<v Speaker 3>Yeah. It could've So that's fucked with container

00:43:39.845 --> 00:43:40.485
<v Speaker 1>d.

00:43:42.485 --> 00:43:45.285
<v Speaker 3>To pull from, like, a local repository first?

00:43:45.285 --> 00:43:47.870
<v Speaker 1>Yeah. Container d has, like, this alias support

00:43:47.870 --> 00:43:49.630
<v Speaker 1>where you can tell it to you know,

00:43:49.630 --> 00:43:51.710
<v Speaker 1>instead of going to Docker Hub, go to

00:43:51.710 --> 00:43:54.110
<v Speaker 1>the public GCR or something like that. I've

00:43:54.110 --> 00:43:56.910
<v Speaker 3>never updated that. Let's check that out. I

00:43:56.910 --> 00:43:58.590
<v Speaker 3>don't know where that is. So So what

00:43:58.590 --> 00:43:59.310
<v Speaker 1>worker

00:43:59.790 --> 00:44:00.510
<v Speaker 1>is this on?

00:44:01.355 --> 00:44:02.315
<v Speaker 1>This is

00:44:03.035 --> 00:44:04.555
<v Speaker 1>Worker two. Alright.

00:44:04.954 --> 00:44:05.675
<v Speaker 1>Yeah.

00:44:08.075 --> 00:44:09.435
<v Speaker 1>There we go. Worker two.

00:44:12.395 --> 00:44:13.195
<v Speaker 1>So

00:44:13.434 --> 00:44:16.154
<v Speaker 1>I'm pretty sure there's a dump config on

00:44:16.154 --> 00:44:16.875
<v Speaker 1>container d.

00:44:19.690 --> 00:44:20.490
<v Speaker 1>Oh,

00:44:20.490 --> 00:44:22.410
<v Speaker 1>I just ran another container d.

00:44:26.009 --> 00:44:27.769
<v Speaker 1>It's not respecting my signal.

00:44:30.695 --> 00:44:32.455
<v Speaker 1>Alright. Let's get another one.

00:44:37.175 --> 00:44:40.375
<v Speaker 3>Alright. New session on worker two? Yeah. Alright.

00:44:40.375 --> 00:44:41.095
<v Speaker 1>So

00:44:42.935 --> 00:44:44.375
<v Speaker 1>let's run PS.

00:44:44.775 --> 00:44:45.335
<v Speaker 1>Grap

00:44:46.990 --> 00:44:48.270
<v Speaker 1>container d.

00:44:50.190 --> 00:44:50.910
<v Speaker 1>So

00:44:54.350 --> 00:44:56.350
<v Speaker 1>that's my rogue process. So I guess I

00:44:56.350 --> 00:44:56.910
<v Speaker 1>can kill that.

00:44:59.955 --> 00:45:00.995
<v Speaker 3>So if

00:45:01.235 --> 00:45:02.115
<v Speaker 3>let's

00:45:02.115 --> 00:45:02.675
<v Speaker 3>see.

00:45:09.075 --> 00:45:10.915
<v Speaker 1>It's not showing me. I'm sure I told

00:45:10.915 --> 00:45:11.955
<v Speaker 1>it to show me everything.

00:45:13.040 --> 00:45:15.600
<v Speaker 1>Oh, wait. I put one too many w's.

00:45:16.240 --> 00:45:17.840
<v Speaker 1>That doesn't help. Okay.

00:45:28.424 --> 00:45:29.224
<v Speaker 1>Container

00:45:29.305 --> 00:45:30.665
<v Speaker 1>d help.

00:45:31.865 --> 00:45:33.785
<v Speaker 1>Oh, now I've got a dodgy session.

00:45:34.984 --> 00:45:37.065
<v Speaker 1>Config

00:45:37.625 --> 00:45:38.505
<v Speaker 1>help

00:45:39.865 --> 00:45:40.345
<v Speaker 1>dump.

00:45:42.210 --> 00:45:44.290
<v Speaker 1>Okay. So there is he's not doing this

00:45:44.290 --> 00:45:46.050
<v Speaker 1>to the container d. I don't think.

00:45:59.215 --> 00:46:01.535
<v Speaker 1>There was no admission controllers,

00:46:01.535 --> 00:46:03.295
<v Speaker 1>at least dynamic ones.

00:46:05.295 --> 00:46:06.975
<v Speaker 1>We then checked the control plane for static

00:46:06.975 --> 00:46:09.295
<v Speaker 1>admission controllers, but then I'm not even sure

00:46:09.295 --> 00:46:11.215
<v Speaker 1>if there is one that substitutes the images.

00:46:12.140 --> 00:46:13.500
<v Speaker 3>Oh, yeah. Just

00:46:14.140 --> 00:46:16.300
<v Speaker 3>it would have to also be pretty sophisticated

00:46:16.300 --> 00:46:17.580
<v Speaker 3>because it had to pick up that it

00:46:17.580 --> 00:46:20.060
<v Speaker 3>was version two that it needed to substitute

00:46:20.060 --> 00:46:22.300
<v Speaker 3>for because version one worked. I guess maybe

00:46:22.300 --> 00:46:24.380
<v Speaker 3>he just left version one working,

00:46:25.100 --> 00:46:26.860
<v Speaker 3>and we were on a bad container anyways.

00:46:27.625 --> 00:46:28.505
<v Speaker 3>Never mind.

00:46:28.905 --> 00:46:31.465
<v Speaker 1>That falls apart. Maybe he can pound container

00:46:31.465 --> 00:46:32.105
<v Speaker 1>d?

00:46:35.945 --> 00:46:37.785
<v Speaker 3>Wait. Wait. Let's go back to his story.

00:46:37.785 --> 00:46:38.425
<v Speaker 1>Yeah.

00:46:39.305 --> 00:46:42.140
<v Speaker 1>Chapter should we be looking at? Chapter four.

00:46:42.140 --> 00:46:43.980
<v Speaker 1>Oh, this is this is the the final

00:46:43.980 --> 00:46:44.620
<v Speaker 1>break.

00:46:47.020 --> 00:46:47.500
<v Speaker 3>Take the

00:47:04.135 --> 00:47:06.375
<v Speaker 1>And so there's that trust issue, which is

00:47:06.855 --> 00:47:08.295
<v Speaker 1>so I think we are.

00:47:09.000 --> 00:47:11.640
<v Speaker 1>Oh. Maybe he has done some DNS trickery,

00:47:11.640 --> 00:47:14.120
<v Speaker 1>but he's put it on an unsecure mode

00:47:14.120 --> 00:47:16.840
<v Speaker 1>of some sort. Right? Wait. What about what

00:47:16.840 --> 00:47:18.600
<v Speaker 3>about network policy?

00:47:20.120 --> 00:47:21.400
<v Speaker 1>To redirect traffic?

00:47:23.135 --> 00:47:23.775
<v Speaker 1>Yeah.

00:47:24.015 --> 00:47:25.935
<v Speaker 1>Maybe. I I I I've not heard of

00:47:25.935 --> 00:47:27.135
<v Speaker 1>it used in that way, but I'm not

00:47:27.135 --> 00:47:28.255
<v Speaker 1>gonna write it off.

00:47:28.974 --> 00:47:29.695
<v Speaker 3>I

00:47:30.895 --> 00:47:32.095
<v Speaker 3>I don't know.

00:47:33.535 --> 00:47:34.975
<v Speaker 3>I was just thinking

00:47:35.135 --> 00:47:36.015
<v Speaker 3>possibly

00:47:36.015 --> 00:47:36.895
<v Speaker 3>on

00:47:39.430 --> 00:47:40.230
<v Speaker 1>I I

00:47:40.950 --> 00:47:43.190
<v Speaker 1>I'm not Okay. Seeing anything.

00:47:44.070 --> 00:47:45.670
<v Speaker 1>I don't think that I mean, could this

00:47:45.670 --> 00:47:47.910
<v Speaker 1>be just be as hacky as

00:47:49.110 --> 00:47:49.910
<v Speaker 1>post?

00:47:52.390 --> 00:47:52.630
<v Speaker 1>No.

00:47:56.464 --> 00:47:58.224
<v Speaker 1>Alright. We've got two and a half minutes.

00:47:58.224 --> 00:47:59.665
<v Speaker 1>Do we wanna look at the hand?

00:48:00.305 --> 00:48:01.905
<v Speaker 3>Yeah. Let's look at the hand.

00:48:02.224 --> 00:48:03.184
<v Speaker 3>I don't

00:48:16.430 --> 00:48:18.110
<v Speaker 1>I think that's just telling us that we

00:48:18.110 --> 00:48:20.030
<v Speaker 1>can't trust the image, which we know.

00:48:20.755 --> 00:48:21.635
<v Speaker 1>Yeah.

00:48:22.755 --> 00:48:24.435
<v Speaker 1>So there's a good comment there from our

00:48:24.435 --> 00:48:26.515
<v Speaker 1>loop in the chat saying that we should

00:48:26.515 --> 00:48:29.955
<v Speaker 1>check for the DNS policy on our deployment,

00:48:29.955 --> 00:48:31.395
<v Speaker 1>which is a really good idea.

00:48:32.195 --> 00:48:32.835
<v Speaker 1>Yeah.

00:48:33.875 --> 00:48:34.595
<v Speaker 1>Let's do that.

00:48:35.750 --> 00:48:37.510
<v Speaker 1>Edit deployment.

00:48:37.910 --> 00:48:40.310
<v Speaker 1>There's too many ways to break a Kubernetes.

00:48:43.910 --> 00:48:45.430
<v Speaker 2>I will say this is

00:48:45.670 --> 00:48:47.670
<v Speaker 2>incredibly mean what I've done.

00:48:49.190 --> 00:48:50.470
<v Speaker 1>Alright. This is

00:48:50.715 --> 00:48:52.635
<v Speaker 1>a clustered first policy, which

00:48:55.515 --> 00:48:57.275
<v Speaker 1>I think is all right.

00:49:01.595 --> 00:49:02.875
<v Speaker 1>Now if he was gonna do it with

00:49:02.875 --> 00:49:04.475
<v Speaker 1>the cluster DNS, we would be able to

00:49:04.475 --> 00:49:05.915
<v Speaker 1>see it in

00:49:07.170 --> 00:49:07.810
<v Speaker 1>here.

00:49:10.770 --> 00:49:12.290
<v Speaker 1>And there's nothing there.

00:49:13.890 --> 00:49:15.730
<v Speaker 1>Oh, I hate you so much, Russell.

00:49:17.089 --> 00:49:18.210
<v Speaker 2>Yeah. That's the

00:49:18.450 --> 00:49:19.569
<v Speaker 2>only thing I wanted for this.

00:49:22.475 --> 00:49:23.915
<v Speaker 2>Because it is so mean. Do you wanna

00:49:23.915 --> 00:49:25.515
<v Speaker 2>just talk through how it could be done

00:49:25.515 --> 00:49:26.955
<v Speaker 2>instead of you going having a look at

00:49:26.955 --> 00:49:28.235
<v Speaker 2>things and wasting time?

00:49:29.195 --> 00:49:31.035
<v Speaker 1>I don't waste the time. I'm fixing a

00:49:31.035 --> 00:49:33.355
<v Speaker 1>cluster. Okay. Are are we close?

00:49:34.395 --> 00:49:35.195
<v Speaker 2>Are we close?

00:49:36.190 --> 00:49:37.870
<v Speaker 2>You've you've obviously found the fact that I'm

00:49:37.870 --> 00:49:40.750
<v Speaker 2>changing the image. It's just how how does

00:49:40.750 --> 00:49:42.910
<v Speaker 2>an image get onto a pod?

00:49:43.230 --> 00:49:45.310
<v Speaker 2>Not pod. A node, I guess.

00:49:46.430 --> 00:49:47.070
<v Speaker 3>Oh,

00:49:47.310 --> 00:49:49.795
<v Speaker 3>can we it it's the can we check

00:49:49.795 --> 00:49:52.915
<v Speaker 3>the kube config or the kubelet config?

00:49:54.435 --> 00:49:56.755
<v Speaker 3>Or am I completely off in checking that?

00:49:57.235 --> 00:49:58.915
<v Speaker 2>Okay. Superbots.

00:49:59.155 --> 00:49:59.795
<v Speaker 2>Superbots. Superbots.

00:50:02.049 --> 00:50:03.010
<v Speaker 3>Super

00:50:03.010 --> 00:50:03.810
<v Speaker 3>warm?

00:50:05.170 --> 00:50:05.890
<v Speaker 2>Okay.

00:50:07.730 --> 00:50:09.970
<v Speaker 3>Because the cubelet is the one that's going

00:50:09.970 --> 00:50:13.250
<v Speaker 3>to be responsible for telling the OCI to

00:50:14.525 --> 00:50:16.445
<v Speaker 1>I think it tells container d to pull

00:50:16.445 --> 00:50:17.325
<v Speaker 1>the image.

00:50:17.725 --> 00:50:20.605
<v Speaker 1>He's not he's not modified to cluster DNS,

00:50:20.605 --> 00:50:21.245
<v Speaker 1>which I thought

00:50:22.445 --> 00:50:23.005
<v Speaker 2>So

00:50:23.725 --> 00:50:25.165
<v Speaker 2>if you were there, I would have said

00:50:25.165 --> 00:50:25.565
<v Speaker 2>hot.

00:50:26.910 --> 00:50:28.510
<v Speaker 2>And I but at a time and and

00:50:28.510 --> 00:50:30.270
<v Speaker 2>just what I've done is, like, really, really

00:50:30.270 --> 00:50:30.910
<v Speaker 2>mean.

00:50:31.150 --> 00:50:33.390
<v Speaker 2>You know, it's that way I'd go on

00:50:33.630 --> 00:50:35.950
<v Speaker 1>Uh-huh. We we noticed go. Yeah.

00:50:37.069 --> 00:50:39.710
<v Speaker 2>Yeah. It wasn't just cube CTL that I

00:50:39.710 --> 00:50:40.030
<v Speaker 2>built.

00:50:41.935 --> 00:50:44.335
<v Speaker 1>Did did you actually compare that Kubler?

00:50:44.895 --> 00:50:45.535
<v Speaker 2>Yes.

00:50:48.095 --> 00:50:49.535
<v Speaker 2>Specifically targeting

00:50:49.535 --> 00:50:50.895
<v Speaker 2>clustered v two.

00:50:52.575 --> 00:50:57.135
<v Speaker 2>I you you've you've found the the trick

00:50:55.730 --> 00:50:57.970
<v Speaker 2>soup like, really, really quickly. So if you

00:50:57.970 --> 00:50:59.490
<v Speaker 2>look at your actual page, it'll give you

00:50:59.490 --> 00:51:01.090
<v Speaker 2>a hint in a meta tag.

00:51:01.410 --> 00:51:02.849
<v Speaker 2>I was hoping you could go have a

00:51:02.849 --> 00:51:04.289
<v Speaker 2>look at the oh, it's broke DNS again

00:51:04.289 --> 00:51:06.369
<v Speaker 2>somehow. So if you view the source,

00:51:07.250 --> 00:51:08.369
<v Speaker 2>that's not actually

00:51:08.609 --> 00:51:10.529
<v Speaker 2>obviously, you know it's not actually your container.

00:51:12.045 --> 00:51:14.765
<v Speaker 3>You compiled half of Kubernetes for this. You

00:51:14.765 --> 00:51:18.205
<v Speaker 3>realize? Pretty much. And on on the unbundling

00:51:18.205 --> 00:51:20.205
<v Speaker 2>system because I could do it on my

00:51:20.205 --> 00:51:21.485
<v Speaker 2>my laptop,

00:51:21.565 --> 00:51:23.724
<v Speaker 2>copied it over, and it didn't work. This

00:51:23.724 --> 00:51:25.645
<v Speaker 2>is like I'm on a different kernel version.

00:51:26.730 --> 00:51:27.930
<v Speaker 1>Yeah.

00:51:32.010 --> 00:51:34.090
<v Speaker 2>And, again, I I I did a backup,

00:51:34.090 --> 00:51:34.810
<v Speaker 2>but, like, it's

00:51:35.770 --> 00:51:37.690
<v Speaker 2>as I said, it was incredibly mean what

00:51:37.690 --> 00:51:41.095
<v Speaker 2>I did. Close all tabs. Russell is gone.

00:51:41.095 --> 00:51:43.415
<v Speaker 1>We yep. Bye bye. Russell.

00:51:43.895 --> 00:51:46.135
<v Speaker 3>Bye. Russell, I don't even want you I

00:51:46.135 --> 00:51:47.895
<v Speaker 3>don't even want you to touch my cluster

00:51:47.895 --> 00:51:49.895
<v Speaker 3>because, like, I didn't do

00:51:50.215 --> 00:51:51.015
<v Speaker 3>anything

00:51:51.735 --> 00:51:54.660
<v Speaker 3>half as good. That was fantastic. No. That

00:51:54.660 --> 00:51:56.740
<v Speaker 1>was me. No. No. I think yeah. I

00:51:56.740 --> 00:51:58.500
<v Speaker 2>I I agree with David. That was me.

00:51:58.500 --> 00:51:58.980
<v Speaker 2>Yeah.

00:51:59.300 --> 00:52:00.980
<v Speaker 2>That that was that was me. More

00:52:01.540 --> 00:52:03.140
<v Speaker 2>for David than for you. That

00:52:04.660 --> 00:52:05.380
<v Speaker 3>was good.

00:52:06.339 --> 00:52:08.420
<v Speaker 3>I will never try you know what? Honestly,

00:52:08.420 --> 00:52:09.380
<v Speaker 3>it's probably a good

00:52:10.194 --> 00:52:12.515
<v Speaker 3>moral of the story is don't trust your

00:52:12.515 --> 00:52:13.395
<v Speaker 3>binaries.

00:52:13.795 --> 00:52:15.474
<v Speaker 1>Well, that's one of those things. You know,

00:52:15.474 --> 00:52:16.994
<v Speaker 1>I was talking on the Discord about how

00:52:16.994 --> 00:52:18.835
<v Speaker 1>I'd really love, like, a a cluster check

00:52:18.835 --> 00:52:20.515
<v Speaker 1>command. And one of the things we would

00:52:20.515 --> 00:52:22.115
<v Speaker 1>have to do is just do those checks

00:52:22.115 --> 00:52:24.035
<v Speaker 1>on all of the compiled binaries for the

00:52:24.035 --> 00:52:24.115
<v Speaker 1>first.

00:52:25.820 --> 00:52:27.820
<v Speaker 1>Because you all have after the first

00:52:28.140 --> 00:52:30.460
<v Speaker 3>binary, we should have just replaced all the

00:52:30.460 --> 00:52:33.180
<v Speaker 3>binaries. Just been like, no. We're done. Well,

00:52:33.180 --> 00:52:34.620
<v Speaker 1>yeah, we had to hand. We've seen the

00:52:34.620 --> 00:52:36.540
<v Speaker 1>Go folder. Like, we should have we should

00:52:36.540 --> 00:52:36.940
<v Speaker 1>have known.

00:52:38.625 --> 00:52:41.025
<v Speaker 1>I thought he would've stopped the cube control.

00:52:42.785 --> 00:52:45.185
<v Speaker 1>Alright. Yeah. Good break, Russell. That was that

00:52:45.185 --> 00:52:46.065
<v Speaker 1>was good fun.

00:52:47.025 --> 00:52:49.025
<v Speaker 1>And I could Hopefully, yeah. I I learned

00:52:49.025 --> 00:52:50.785
<v Speaker 2>that the how sort of, like,

00:52:52.770 --> 00:52:54.610
<v Speaker 2>parts get deployed on. I was like, I

00:52:54.610 --> 00:52:55.730
<v Speaker 2>kind of think I know what is going

00:52:55.730 --> 00:52:57.250
<v Speaker 2>on, but, it goes by the API server

00:52:57.250 --> 00:52:59.570
<v Speaker 2>into the Kubelet. Kubelet tells container d, and

00:52:59.570 --> 00:53:01.650
<v Speaker 2>I was like, Kubelet, I can attack it

00:53:01.650 --> 00:53:03.010
<v Speaker 2>down and change it before it gets to

00:53:03.010 --> 00:53:05.105
<v Speaker 2>container d. It's like, I learned a little

00:53:05.105 --> 00:53:07.265
<v Speaker 2>bit about how the overall ecosystem works from

00:53:07.265 --> 00:53:08.785
<v Speaker 2>it. Yeah. I knew you wouldn't go down

00:53:08.785 --> 00:53:10.385
<v Speaker 1>a container d route in my head because

00:53:10.385 --> 00:53:12.065
<v Speaker 1>I'm like, we've seen that a couple of

00:53:12.065 --> 00:53:13.984
<v Speaker 1>times now in clusters. I didn't think you

00:53:13.984 --> 00:53:15.744
<v Speaker 1>would go down that because you'd know how

00:53:15.744 --> 00:53:16.545
<v Speaker 1>it would look.

00:53:17.505 --> 00:53:19.425
<v Speaker 1>But to compare it on Kubelet was particularly

00:53:19.425 --> 00:53:19.825
<v Speaker 1>harsh.

00:53:20.680 --> 00:53:21.480
<v Speaker 1>Good job.

00:53:22.440 --> 00:53:23.240
<v Speaker 2>It's

00:53:23.240 --> 00:53:24.440
<v Speaker 2>easier than you think. You can get the

00:53:24.440 --> 00:53:27.400
<v Speaker 2>source code from GitHub for the actual release.

00:53:27.720 --> 00:53:29.720
<v Speaker 2>And it's all the make files set in

00:53:29.720 --> 00:53:31.560
<v Speaker 2>everything good for you. So you can get

00:53:31.560 --> 00:53:32.840
<v Speaker 2>it done within, like, a few minutes.

00:53:33.535 --> 00:53:34.975
<v Speaker 1>Well, now

00:53:35.775 --> 00:53:37.535
<v Speaker 1>the boot is on the other foot.

00:53:37.695 --> 00:53:38.415
<v Speaker 2>Yep.

00:53:38.735 --> 00:53:39.935
<v Speaker 2>Now I'm

00:53:39.935 --> 00:53:42.895
<v Speaker 3>gonna warn you, Russell. One of these breaks

00:53:43.215 --> 00:53:44.735
<v Speaker 3>is unintentional.

00:53:45.215 --> 00:53:47.455
<v Speaker 3>I accidentally broke a teleport,

00:53:48.090 --> 00:53:49.770
<v Speaker 3>and one of the nodes just never came

00:53:49.770 --> 00:53:50.330
<v Speaker 3>back.

00:53:50.570 --> 00:53:52.650
<v Speaker 3>And I never touched that node. So we're

00:53:52.650 --> 00:53:54.650
<v Speaker 3>gonna have to debug that one together.

00:53:57.050 --> 00:53:57.610
<v Speaker 3>So

00:53:57.850 --> 00:53:58.890
<v Speaker 3>fair warning on that one.

00:54:00.225 --> 00:54:02.945
<v Speaker 1>Alright. I have opened the session on control

00:54:02.945 --> 00:54:05.505
<v Speaker 1>player one for the cluster.

00:54:05.665 --> 00:54:08.625
<v Speaker 1>Russell, if you could please join start exporting

00:54:08.625 --> 00:54:09.905
<v Speaker 1>your KubeConfig.

00:54:09.905 --> 00:54:11.905
<v Speaker 1>Your forty five minutes start in forty five

00:54:11.905 --> 00:54:14.065
<v Speaker 3>minutes. Hang on a minute. So where's the

00:54:14.065 --> 00:54:15.985
<v Speaker 2>sessions at? I can't see it on the

00:54:16.065 --> 00:54:18.920
<v Speaker 1>screen. And then active session. Activity. Ah, sorry.

00:54:28.359 --> 00:54:29.480
<v Speaker 2>Oh, nervous now.

00:54:34.155 --> 00:54:35.915
<v Speaker 1>Oh, you're in. Awesome.

00:54:36.954 --> 00:54:37.755
<v Speaker 2>Yep.

00:54:41.595 --> 00:54:44.954
<v Speaker 1>Zero trust. Yep. That's that's the only way

00:54:44.954 --> 00:54:45.434
<v Speaker 1>this is.

00:54:46.580 --> 00:54:47.780
<v Speaker 2>Right. So

00:54:49.860 --> 00:54:52.420
<v Speaker 2>oh, yeah. Just Russell, just do me a

00:54:52.420 --> 00:54:54.660
<v Speaker 3>favor and resize your screen a bunch to

00:54:55.700 --> 00:54:57.940
<v Speaker 3>yeah. I've heard that he likes that.

00:55:03.885 --> 00:55:06.605
<v Speaker 1>Apparently, it's just because Oh, it's okay. Xterm

00:55:06.605 --> 00:55:07.405
<v Speaker 1>GS

00:55:07.645 --> 00:55:09.485
<v Speaker 1>doesn't like it when the two terminals are

00:55:09.485 --> 00:55:12.045
<v Speaker 1>different sizes, and it tries to accommodate it.

00:55:12.045 --> 00:55:15.005
<v Speaker 1>I'm gonna have to, like, set out a

00:55:14.070 --> 00:55:16.230
<v Speaker 1>size of my window and then ask everybody

00:55:16.230 --> 00:55:18.230
<v Speaker 1>to resize their window to be exactly the

00:55:18.230 --> 00:55:19.510
<v Speaker 1>same number of pixels.

00:55:22.630 --> 00:55:24.550
<v Speaker 1>Or we could always use the terminal CLI,

00:55:24.550 --> 00:55:24.790
<v Speaker 1>I guess.

00:55:27.335 --> 00:55:28.934
<v Speaker 3>If I do this again, I think I'll

00:55:28.934 --> 00:55:30.694
<v Speaker 3>try to set up the terminal CLI. I

00:55:30.694 --> 00:55:32.455
<v Speaker 3>think that would just be a better experience.

00:55:33.494 --> 00:55:35.415
<v Speaker 1>Yeah. The CLI does work well.

00:55:36.135 --> 00:55:38.375
<v Speaker 1>Alright. We have a working control plan to

00:55:38.375 --> 00:55:39.415
<v Speaker 1>not ready worker node.

00:55:43.010 --> 00:55:45.490
<v Speaker 2>So one of them is unintentionally broken, and

00:55:45.490 --> 00:55:47.410
<v Speaker 2>one of them is actually broken. Is that

00:55:47.410 --> 00:55:48.210
<v Speaker 2>what we're saying?

00:55:48.850 --> 00:55:50.290
<v Speaker 3>Yes. Yes.

00:55:50.770 --> 00:55:52.450
<v Speaker 1>And he's not telling you which.

00:55:53.250 --> 00:55:55.090
<v Speaker 1>Nope. That's fair enough. That's fair enough.

00:55:55.925 --> 00:55:57.445
<v Speaker 2>Actually,

00:55:59.445 --> 00:56:01.045
<v Speaker 3>I made a I I didn't tell you

00:56:01.045 --> 00:56:02.965
<v Speaker 3>this. There's a setup file that would have

00:56:02.965 --> 00:56:04.645
<v Speaker 3>alias that out for you.

00:56:09.670 --> 00:56:11.190
<v Speaker 2>So scheduler

00:56:11.190 --> 00:56:11.910
<v Speaker 2>is

00:56:12.390 --> 00:56:13.830
<v Speaker 2>a real break.

00:56:13.990 --> 00:56:15.510
<v Speaker 2>Postgres is down.

00:56:16.150 --> 00:56:17.030
<v Speaker 2>Ambassador,

00:56:17.030 --> 00:56:19.670
<v Speaker 2>I'm assuming, is just Yep. Some Collateral damage.

00:56:19.670 --> 00:56:22.150
<v Speaker 1>Yep. Okay. Cool. Same with keep that.

00:56:25.015 --> 00:56:25.815
<v Speaker 2>Right. Okay.

00:56:29.335 --> 00:56:30.295
<v Speaker 2>Right. So

00:56:32.135 --> 00:56:33.975
<v Speaker 2>why would

00:56:36.190 --> 00:56:37.310
<v Speaker 2>the notes

00:56:44.350 --> 00:56:45.870
<v Speaker 2>notes be offline.

00:56:46.830 --> 00:56:48.190
<v Speaker 2>What is it called?

00:56:48.350 --> 00:56:50.990
<v Speaker 1>K twenty dash clavin dash worker dash one.

00:56:51.675 --> 00:56:53.035
<v Speaker 1>I can copy and paste it if you

00:56:53.035 --> 00:56:53.595
<v Speaker 1>want.

00:56:59.275 --> 00:57:01.515
<v Speaker 2>Alright. Nope. It's not on it.

00:57:02.235 --> 00:57:02.955
<v Speaker 2>Whoops.

00:57:03.675 --> 00:57:04.395
<v Speaker 2>Right there, brother.

00:57:07.670 --> 00:57:09.430
<v Speaker 2>Did you do it? I did do it.

00:57:09.430 --> 00:57:11.750
<v Speaker 1>As always, there's a road key, I think,

00:57:11.750 --> 00:57:13.350
<v Speaker 1>from us typing over each other. So just

00:57:13.350 --> 00:57:14.630
<v Speaker 1>knock that off the end.

00:57:19.910 --> 00:57:20.470
<v Speaker 2>CPU.

00:57:25.375 --> 00:57:27.455
<v Speaker 1>Qubel stop posting status.

00:57:28.575 --> 00:57:29.855
<v Speaker 2>Oh, where'd you say that?

00:57:31.055 --> 00:57:32.974
<v Speaker 1>If you scroll up to the the event

00:57:32.974 --> 00:57:33.615
<v Speaker 1>tags.

00:57:35.375 --> 00:57:38.460
<v Speaker 2>Ah, yeah. Okay. That makes right.

00:57:38.780 --> 00:57:41.100
<v Speaker 2>My screen's only partially full.

00:57:41.340 --> 00:57:42.300
<v Speaker 2>So if I re

00:57:45.100 --> 00:57:47.260
<v Speaker 2>no. Even the browser screen's just, like, squished.

00:57:47.260 --> 00:57:50.445
<v Speaker 2>It's, like, weird. Yeah. That's that. Sorry.

00:57:50.605 --> 00:57:53.325
<v Speaker 1>What are those weird teleport bugs? I didn't

00:57:53.325 --> 00:57:54.925
<v Speaker 2>understand what you're talking about before when you're

00:57:54.925 --> 00:57:56.365
<v Speaker 2>saying, like, resize the screen and all that.

00:57:56.365 --> 00:57:57.645
<v Speaker 1>What size is your monitor?

00:57:58.925 --> 00:57:59.725
<v Speaker 2>Four k.

00:58:00.045 --> 00:58:01.085
<v Speaker 1>Oh, yeah. Okay.

00:58:02.060 --> 00:58:03.820
<v Speaker 1>Oh, I think we're we're gonna be too

00:58:03.820 --> 00:58:05.180
<v Speaker 1>far apart to get it close.

00:58:05.500 --> 00:58:06.860
<v Speaker 2>No. It's alright. I can deal with this.

00:58:06.860 --> 00:58:08.460
<v Speaker 2>I'll just resize my window.

00:58:08.860 --> 00:58:10.300
<v Speaker 2>Oh, no. I can't. I'll just leave it

00:58:10.300 --> 00:58:11.740
<v Speaker 2>as it is. You can resize your window,

00:58:11.740 --> 00:58:13.260
<v Speaker 1>and then I'll resize mine, and maybe it'll

00:58:13.260 --> 00:58:15.340
<v Speaker 1>magically work. There's a there is, like, a

00:58:15.340 --> 00:58:16.619
<v Speaker 1>certain number of times you can do it,

00:58:16.619 --> 00:58:17.420
<v Speaker 1>and it will start working.

00:58:18.275 --> 00:58:18.915
<v Speaker 2>Right.

00:58:19.235 --> 00:58:21.315
<v Speaker 2>You just fix yours now. I'll leave mine

00:58:21.315 --> 00:58:22.115
<v Speaker 2>as it is.

00:58:24.515 --> 00:58:25.475
<v Speaker 1>Are you good?

00:58:26.675 --> 00:58:29.155
<v Speaker 2>Yeah. I think so. Right. Alright. Don't touch

00:58:29.155 --> 00:58:30.515
<v Speaker 1>anything except

00:58:30.595 --> 00:58:32.275
<v Speaker 1>maybe type in kubectro command.

00:58:36.580 --> 00:58:38.020
<v Speaker 1>Alright. So do you wanna jump on to

00:58:38.020 --> 00:58:40.100
<v Speaker 1>the workers and check the kubelet out?

00:58:40.740 --> 00:58:42.180
<v Speaker 2>I'm still trying to see the message that

00:58:42.180 --> 00:58:44.420
<v Speaker 2>says the kubelet is down. I can't see

00:58:44.420 --> 00:58:45.540
<v Speaker 2>that in my

00:58:47.335 --> 00:58:48.535
<v Speaker 1>It's underneath

00:58:49.495 --> 00:58:51.255
<v Speaker 1>lease, and then there's conditions.

00:58:55.735 --> 00:58:56.775
<v Speaker 2>I don't know if you got it on

00:58:56.775 --> 00:58:58.215
<v Speaker 2>your screen. Uh-huh.

00:58:58.295 --> 00:58:58.855
<v Speaker 1>These ones.

00:59:02.010 --> 00:59:04.570
<v Speaker 1>Ah. Oh, yeah. Okay. I'm blind.

00:59:05.290 --> 00:59:06.890
<v Speaker 2>Right. Okay. So we need to go on

00:59:06.890 --> 00:59:07.450
<v Speaker 2>to

00:59:08.890 --> 00:59:10.330
<v Speaker 2>Yes. Go work one first.

00:59:13.545 --> 00:59:15.305
<v Speaker 1>Alright. Session started.

00:59:23.705 --> 00:59:24.905
<v Speaker 2>Give my Internet a minute.

00:59:25.890 --> 00:59:26.289
<v Speaker 2>Alright.

00:59:41.265 --> 00:59:43.425
<v Speaker 1>Alright. There's definitely some errors there.

00:59:49.105 --> 00:59:50.705
<v Speaker 2>Ever get a node,

00:59:50.945 --> 00:59:52.305
<v Speaker 2>worker one not found.

00:59:54.880 --> 00:59:57.040
<v Speaker 2>Yet the key, but it's up and running.

01:00:02.000 --> 01:00:05.200
<v Speaker 2>What's the command to find out the is

01:00:05.200 --> 01:00:05.359
<v Speaker 2>it?

01:00:10.045 --> 01:00:11.085
<v Speaker 2>So it's not

01:00:15.085 --> 01:00:16.045
<v Speaker 1>What do you see?

01:00:16.765 --> 01:00:18.685
<v Speaker 2>No. There's I think I remember from one

01:00:18.685 --> 01:00:20.205
<v Speaker 2>of the one of the one of your

01:00:20.205 --> 01:00:20.525
<v Speaker 2>shows.

01:00:22.119 --> 01:00:24.119
<v Speaker 2>If you change the name of the host

01:00:24.119 --> 01:00:26.760
<v Speaker 2>and then restart Cuba and then change it

01:00:26.760 --> 01:00:27.960
<v Speaker 2>back, it

01:00:29.720 --> 01:00:31.240
<v Speaker 2>messes up with Cuba.

01:00:31.320 --> 01:00:32.840
<v Speaker 2>I wonder if he's done that.

01:00:33.240 --> 01:00:35.160
<v Speaker 1>So you want to restart the Cuba again?

01:00:36.425 --> 01:00:37.705
<v Speaker 2>No. I'll look first.

01:00:49.385 --> 01:00:49.705
<v Speaker 2>Oh.

01:00:54.790 --> 01:00:55.670
<v Speaker 2>Yeah. You've

01:00:57.190 --> 01:00:58.710
<v Speaker 2>have you resized again?

01:01:00.710 --> 01:01:01.190
<v Speaker 1>No.

01:01:05.305 --> 01:01:07.385
<v Speaker 2>I've lost a lot of text. I've now

01:01:07.385 --> 01:01:09.625
<v Speaker 2>down to, like, a quarter of what I

01:01:09.625 --> 01:01:10.425
<v Speaker 2>was before.

01:01:10.745 --> 01:01:11.625
<v Speaker 3>Welcome

01:01:12.505 --> 01:01:13.705
<v Speaker 3>to my pain.

01:01:13.945 --> 01:01:15.865
<v Speaker 3>And then, like, it will stop letting me

01:01:15.865 --> 01:01:17.785
<v Speaker 3>type for a little while because I think

01:01:17.785 --> 01:01:19.305
<v Speaker 3>it puts the cursor somewhere.

01:01:19.920 --> 01:01:20.880
<v Speaker 3>I don't know.

01:01:21.280 --> 01:01:22.640
<v Speaker 3>I was having troubles.

01:01:23.200 --> 01:01:25.119
<v Speaker 3>I'm using the terminal next time I do

01:01:25.119 --> 01:01:25.680
<v Speaker 3>this.

01:01:29.200 --> 01:01:30.320
<v Speaker 2>So

01:01:30.480 --> 01:01:32.240
<v Speaker 2>it is timing out,

01:01:32.559 --> 01:01:33.760
<v Speaker 2>waiting for something.

01:01:37.575 --> 01:01:38.535
<v Speaker 2>So that

01:01:39.975 --> 01:01:42.215
<v Speaker 2>is that the IP of the

01:01:42.455 --> 01:01:44.935
<v Speaker 2>API or machine to the API server?

01:01:47.575 --> 01:01:49.735
<v Speaker 2>That 91.

01:01:49.735 --> 01:01:51.255
<v Speaker 2>Let's have a look. Is it 91?

01:01:55.890 --> 01:01:56.450
<v Speaker 2>Yeah.

01:01:57.570 --> 01:01:58.770
<v Speaker 1>That is the

01:01:59.650 --> 01:02:01.410
<v Speaker 1>BGP address

01:02:01.410 --> 01:02:02.930
<v Speaker 1>of our control plane.

01:02:06.565 --> 01:02:09.125
<v Speaker 2>So it looks like he's blocking.

01:02:10.005 --> 01:02:12.165
<v Speaker 1>So I'm gonna ask Barack a question because

01:02:12.165 --> 01:02:13.605
<v Speaker 1>I don't want us to go down a

01:02:13.605 --> 01:02:14.725
<v Speaker 1>rabbit hole here.

01:02:16.645 --> 01:02:18.325
<v Speaker 1>Is this intentional,

01:02:18.325 --> 01:02:20.805
<v Speaker 1>Marek, or is this

01:02:20.049 --> 01:02:21.170
<v Speaker 1>not intentional?

01:02:24.289 --> 01:02:25.250
<v Speaker 1>You're muted.

01:02:26.450 --> 01:02:27.570
<v Speaker 1>You're still muted.

01:02:28.849 --> 01:02:30.530
<v Speaker 1>The guest has muted himself.

01:02:31.569 --> 01:02:33.170
<v Speaker 1>Nope. He's just hit the hang up button.

01:02:34.935 --> 01:02:37.255
<v Speaker 2>Well, I deserve that for the the Kubelet,

01:02:37.255 --> 01:02:39.415
<v Speaker 2>so fair enough. Alright.

01:02:42.215 --> 01:02:42.775
<v Speaker 2>So

01:02:44.855 --> 01:02:46.935
<v Speaker 1>See, because if this is not intentional,

01:02:47.255 --> 01:02:49.200
<v Speaker 1>I would get us out of it very

01:02:49.200 --> 01:02:51.280
<v Speaker 1>quickly because it could just be that KubeBlep

01:02:51.280 --> 01:02:53.840
<v Speaker 1>is acting up and not advertising our address

01:02:53.840 --> 01:02:54.480
<v Speaker 1>anymore.

01:02:55.680 --> 01:02:57.360
<v Speaker 1>But if it is intentional, then it's gonna

01:02:57.360 --> 01:02:58.800
<v Speaker 1>be some networking thing that we have to

01:02:58.800 --> 01:03:02.080
<v Speaker 1>start debugging. So you could try curling HTTPS

01:03:02.205 --> 01:03:03.965
<v Speaker 1>on the IP address and see what you

01:03:03.965 --> 01:03:06.285
<v Speaker 1>get back. I'd say that's a good or

01:03:06.365 --> 01:03:07.405
<v Speaker 1>a ping. Yeah.

01:03:10.525 --> 01:03:11.805
<v Speaker 1>The space at the start.

01:03:13.005 --> 01:03:14.445
<v Speaker 2>It's a double top. Double top.

01:03:20.260 --> 01:03:22.100
<v Speaker 1>Yeah. There's no ICMP

01:03:22.100 --> 01:03:24.180
<v Speaker 1>ping here, so maybe it isn't functional.

01:03:24.740 --> 01:03:27.140
<v Speaker 2>Can I control c? Will just break everything.

01:03:27.460 --> 01:03:30.255
<v Speaker 1>No. You control c. Hey. Welcome back, Mark.

01:03:30.255 --> 01:03:30.655
<v Speaker 3>I

01:03:31.135 --> 01:03:33.214
<v Speaker 3>heard I'm gonna ask Mark a question, and

01:03:33.214 --> 01:03:34.335
<v Speaker 3>then everything

01:03:34.415 --> 01:03:35.215
<v Speaker 3>died.

01:03:35.855 --> 01:03:36.495
<v Speaker 1>Okay.

01:03:36.655 --> 01:03:39.375
<v Speaker 1>Is this intentional break, or should I quickly

01:03:39.375 --> 01:03:40.974
<v Speaker 1>get around this BGP issue?

01:03:46.730 --> 01:03:48.170
<v Speaker 3>Wait. What's the issue?

01:03:48.650 --> 01:03:49.930
<v Speaker 1>Worker one

01:03:50.170 --> 01:03:52.330
<v Speaker 1>can't reach the control plane on this BGP

01:03:52.330 --> 01:03:52.970
<v Speaker 1>IP.

01:03:53.850 --> 01:03:56.905
<v Speaker 3>Yeah. This is the unintentional break. Okay. So

01:03:56.905 --> 01:03:58.905
<v Speaker 1>that's alright. I think that's because kubect is

01:03:58.905 --> 01:04:01.225
<v Speaker 1>broken. So I am gonna quickly fix this.

01:04:02.105 --> 01:04:05.305
<v Speaker 1>We have the other IP address here.

01:04:07.065 --> 01:04:09.305
<v Speaker 3>That's why I warned you that it was

01:04:10.580 --> 01:04:11.540
<v Speaker 3>unintentional.

01:04:11.540 --> 01:04:12.820
<v Speaker 1>Yeah. That's alright.

01:04:15.700 --> 01:04:17.140
<v Speaker 1>F m kiplet.

01:04:19.060 --> 01:04:20.980
<v Speaker 1>What IP address is this using?

01:04:21.860 --> 01:04:22.820
<v Speaker 1>Yeah. Okay.

01:04:23.300 --> 01:04:24.660
<v Speaker 1>Now let's just swap this over.

01:04:27.195 --> 01:04:29.355
<v Speaker 3>And this might actually be affecting the other

01:04:29.355 --> 01:04:30.875
<v Speaker 3>node as well. Yeah.

01:04:31.595 --> 01:04:33.995
<v Speaker 3>Was other breaks to it though. So yeah.

01:04:34.315 --> 01:04:36.315
<v Speaker 1>Yeah. I think could fit this had a

01:04:36.315 --> 01:04:37.835
<v Speaker 1>little bit of a moment itself.

01:04:41.130 --> 01:04:42.730
<v Speaker 3>Sorry about that. I I think I helped

01:04:42.730 --> 01:04:44.410
<v Speaker 3>it along in its issue.

01:04:45.450 --> 01:04:46.170
<v Speaker 3>Yeah.

01:04:46.329 --> 01:04:47.690
<v Speaker 3>I gave it a little kick in the

01:04:47.690 --> 01:04:48.010
<v Speaker 3>pants.

01:04:56.454 --> 01:04:58.535
<v Speaker 3>So if you guys wanna know the lesson,

01:04:58.535 --> 01:05:00.535
<v Speaker 3>the moral of the story here is do

01:05:00.535 --> 01:05:01.095
<v Speaker 3>not

01:05:01.415 --> 01:05:03.335
<v Speaker 3>restart your clustered

01:05:03.415 --> 01:05:04.535
<v Speaker 3>control plane

01:05:05.015 --> 01:05:08.215
<v Speaker 3>an hour before the cluster goes live because

01:05:08.750 --> 01:05:10.750
<v Speaker 1>Annoyingly, I'm gonna have to fake the cube

01:05:10.750 --> 01:05:13.230
<v Speaker 1>clip because we don't have the IP address

01:05:13.230 --> 01:05:15.470
<v Speaker 1>at our control plane.

01:05:18.910 --> 01:05:20.670
<v Speaker 1>So it's I'm super sorry, Russell.

01:05:21.375 --> 01:05:22.335
<v Speaker 2>That's alright.

01:05:23.455 --> 01:05:25.535
<v Speaker 1>Alright. Let's get this fixed.

01:05:26.815 --> 01:05:28.495
<v Speaker 2>After what I did with that cube, but

01:05:28.575 --> 01:05:31.455
<v Speaker 2>yeah. Just just don't apologize to me.

01:05:33.375 --> 01:05:34.415
<v Speaker 1>Alright.

01:05:34.575 --> 01:05:36.815
<v Speaker 1>Come here, cube that. What is your problem?

01:05:42.720 --> 01:05:45.119
<v Speaker 3>After what you did with a cubelet, I

01:05:45.119 --> 01:05:47.040
<v Speaker 3>have a ton of respect for you. So

01:05:49.040 --> 01:05:49.920
<v Speaker 3>that was awesome.

01:05:53.474 --> 01:05:55.875
<v Speaker 2>I'm not sure what David thinks that. Thank

01:05:55.875 --> 01:05:56.355
<v Speaker 2>you.

01:05:56.835 --> 01:05:58.275
<v Speaker 2>I mean, I think he made his feelings

01:05:58.275 --> 01:05:59.155
<v Speaker 2>very clear.

01:06:02.675 --> 01:06:03.955
<v Speaker 2>Am I disconnected? Are you

01:06:05.900 --> 01:06:08.300
<v Speaker 1>I'm still here. He's he's trying not he's

01:06:08.300 --> 01:06:09.500
<v Speaker 3>trying not to swear.

01:06:12.140 --> 01:06:13.900
<v Speaker 1>I'm not trying not to swear.

01:06:15.020 --> 01:06:16.380
<v Speaker 1>I'm pretty sure this is a bug that

01:06:16.380 --> 01:06:18.140
<v Speaker 1>KubePap introduced recently.

01:06:18.860 --> 01:06:20.220
<v Speaker 1>Yeah. But the bank address.

01:06:21.474 --> 01:06:23.875
<v Speaker 1>And I did look for 221

01:06:23.875 --> 01:06:26.275
<v Speaker 1>in here and then find it.

01:06:27.635 --> 01:06:31.315
<v Speaker 3>So interestingly enough, this bug actually

01:06:32.275 --> 01:06:35.540
<v Speaker 3>was always here. It just caused it not

01:06:35.540 --> 01:06:36.900
<v Speaker 3>to come back okay.

01:06:37.380 --> 01:06:39.460
<v Speaker 3>The cube bit was always complaining about this

01:06:39.460 --> 01:06:42.020
<v Speaker 3>bind address because I actually wasted about an

01:06:42.020 --> 01:06:43.380
<v Speaker 3>hour and a half of my time digging

01:06:43.380 --> 01:06:43.860
<v Speaker 3>into this.

01:06:47.775 --> 01:06:49.855
<v Speaker 1>Yeah. There's a file you can pass.

01:06:52.575 --> 01:06:54.895
<v Speaker 3>Yeah. I've never used CubeBit before, though. There

01:06:54.895 --> 01:06:55.535
<v Speaker 1>we go.

01:06:58.015 --> 01:06:59.535
<v Speaker 1>What we need is this.

01:07:00.599 --> 01:07:03.559
<v Speaker 1>And then as we modify our daemon stack,

01:07:03.559 --> 01:07:05.400
<v Speaker 1>and I'll just add this flag very, very

01:07:05.400 --> 01:07:06.040
<v Speaker 1>quickly.

01:07:07.400 --> 01:07:08.920
<v Speaker 1>So why does this not happen on the

01:07:08.920 --> 01:07:09.800
<v Speaker 1>other cluster?

01:07:11.720 --> 01:07:13.640
<v Speaker 3>Did you restart the control plane?

01:07:14.519 --> 01:07:14.839
<v Speaker 3>No.

01:07:16.315 --> 01:07:16.955
<v Speaker 3>So

01:07:17.355 --> 01:07:20.715
<v Speaker 3>I bet you his KubeVit is

01:07:21.035 --> 01:07:23.515
<v Speaker 3>in a bad state. The cluster just isn't

01:07:23.515 --> 01:07:25.355
<v Speaker 3>broken until you restart it.

01:07:25.675 --> 01:07:26.155
<v Speaker 1>Right.

01:07:38.960 --> 01:07:39.760
<v Speaker 1>Alright.

01:07:41.200 --> 01:07:42.160
<v Speaker 1>That should fix it.

01:07:44.765 --> 01:07:46.125
<v Speaker 1>We should see

01:07:46.525 --> 01:07:47.565
<v Speaker 1>pending.

01:07:51.005 --> 01:07:52.445
<v Speaker 1>Oh, yeah. Okay. So

01:07:53.165 --> 01:07:54.605
<v Speaker 1>you're gonna have to fix the schedule and

01:07:54.605 --> 01:07:55.085
<v Speaker 1>I'll wrestle.

01:07:58.910 --> 01:08:00.910
<v Speaker 2>So can I go back onto the notes?

01:08:00.910 --> 01:08:02.830
<v Speaker 2>Or I'll I'll at the schedule first, but

01:08:02.830 --> 01:08:05.150
<v Speaker 2>then are the notes gonna be working now?

01:08:05.150 --> 01:08:06.990
<v Speaker 1>Not until we get oh, yes. Okay. So

01:08:06.990 --> 01:08:08.670
<v Speaker 1>I I can just cheat and schedule the

01:08:08.670 --> 01:08:10.430
<v Speaker 1>cube map daemon set if you want.

01:08:10.750 --> 01:08:12.830
<v Speaker 1>Although, that shouldn't actually go through a scheduler.

01:08:12.830 --> 01:08:12.990
<v Speaker 1>Right?

01:08:17.594 --> 01:08:19.435
<v Speaker 2>I thought you're

01:08:19.435 --> 01:08:20.635
<v Speaker 2>asking me. I don't know.

01:08:22.154 --> 01:08:23.514
<v Speaker 1>I don't use keep it.

01:08:24.875 --> 01:08:27.160
<v Speaker 3>Well, wait. How is it being run? Is

01:08:27.160 --> 01:08:29.319
<v Speaker 3>it run as a deployment, or is it

01:08:29.319 --> 01:08:31.880
<v Speaker 3>run as a It's a daemon set.

01:08:32.120 --> 01:08:34.200
<v Speaker 3>If it's a daemon set, then yeah. But

01:08:34.200 --> 01:08:35.399
<v Speaker 1>it has no node.

01:08:37.800 --> 01:08:39.000
<v Speaker 1>And we need a That's interesting.

01:08:41.535 --> 01:08:42.895
<v Speaker 1>Alright. Let's cheat.

01:08:44.015 --> 01:08:45.935
<v Speaker 1>Oh, we can't cheat because he was there.

01:08:45.935 --> 01:08:47.854
<v Speaker 1>Alright. Let's fix the schedule, Russell.

01:08:48.175 --> 01:08:49.055
<v Speaker 2>Okay.

01:08:49.695 --> 01:08:51.535
<v Speaker 2>Back to me. Alright. So

01:08:53.535 --> 01:08:55.535
<v Speaker 2>I can't use my shot because it's gonna

01:09:24.620 --> 01:09:25.580
<v Speaker 1>Namespace.

01:09:26.300 --> 01:09:27.580
<v Speaker 2>Thank you.

01:09:28.620 --> 01:09:30.460
<v Speaker 2>See, I'm not that good at Kubernetes, really.

01:09:30.460 --> 01:09:31.979
<v Speaker 2>I'm just good at breaking things.

01:09:33.420 --> 01:09:34.540
<v Speaker 3>I'm not good at anything.

01:09:36.774 --> 01:09:38.854
<v Speaker 2>If you're also good at breaking things.

01:09:39.415 --> 01:09:40.454
<v Speaker 3>Oh, okay.

01:09:43.015 --> 01:09:44.774
<v Speaker 2>But we failed container.

01:09:49.939 --> 01:09:51.140
<v Speaker 1>Yeah. I think you're gonna have to get

01:09:51.140 --> 01:09:52.420
<v Speaker 1>the logs with that pod.

01:09:54.100 --> 01:09:54.900
<v Speaker 1>Okay.

01:09:57.860 --> 01:09:59.540
<v Speaker 3>Is my greatest letdown.

01:09:59.700 --> 01:10:00.739
<v Speaker 3>This break

01:10:01.300 --> 01:10:03.060
<v Speaker 3>was supposed to rival

01:10:03.060 --> 01:10:03.860
<v Speaker 3>Russell's,

01:10:04.565 --> 01:10:05.204
<v Speaker 3>but

01:10:06.005 --> 01:10:06.965
<v Speaker 3>didn't.

01:10:07.364 --> 01:10:08.405
<v Speaker 3>Namespace.

01:10:09.685 --> 01:10:10.644
<v Speaker 2>Yeah.

01:10:13.125 --> 01:10:15.525
<v Speaker 1>Have you just tried the tool QB? It's

01:10:15.525 --> 01:10:17.764
<v Speaker 1>really cool for switching context to namespace.

01:10:18.750 --> 01:10:20.750
<v Speaker 1>Oh, look. Have a scheduler. I have a

01:10:20.750 --> 01:10:22.349
<v Speaker 1>scheduler. I have a scheduler.

01:10:22.590 --> 01:10:25.150
<v Speaker 2>I don't think that's what

01:10:25.150 --> 01:10:27.790
<v Speaker 2>it normally puts out, so I'm assuming that

01:10:27.790 --> 01:10:28.110
<v Speaker 2>the

01:10:29.550 --> 01:10:31.710
<v Speaker 2>somebody has gone and changed

01:10:32.434 --> 01:10:34.034
<v Speaker 2>the static manifest.

01:10:34.434 --> 01:10:36.034
<v Speaker 2>So I have a trick

01:10:36.114 --> 01:10:37.795
<v Speaker 2>if he's done this on the

01:10:39.074 --> 01:10:40.914
<v Speaker 2>if it works. Let me try and find

01:10:40.914 --> 01:10:41.155
<v Speaker 2>it.

01:10:50.940 --> 01:10:52.860
<v Speaker 2>Well, it might have ripped. So

01:10:54.460 --> 01:10:56.540
<v Speaker 1>We are always ripped on custard.

01:11:05.235 --> 01:11:06.915
<v Speaker 1>You're gonna use the VIM backup?

01:11:07.635 --> 01:11:08.435
<v Speaker 1>Yeah.

01:11:10.115 --> 01:11:10.755
<v Speaker 3>I

01:11:11.075 --> 01:11:12.435
<v Speaker 3>I I left the backup.

01:11:13.699 --> 01:11:15.860
<v Speaker 3>I'm never that mean. If I change a

01:11:15.860 --> 01:11:17.380
<v Speaker 3>if I change a file,

01:11:17.699 --> 01:11:19.380
<v Speaker 3>it's back in here. Save that. It's all

01:11:19.380 --> 01:11:19.620
<v Speaker 1>good.

01:11:29.715 --> 01:11:30.514
<v Speaker 1>Thank you.

01:11:32.115 --> 01:11:35.315
<v Speaker 2>So he's changed the scheduler. He has edited

01:11:37.875 --> 01:11:39.715
<v Speaker 2>some things, which I assume

01:11:40.989 --> 01:11:42.190
<v Speaker 2>I'm not sure if we can get back

01:11:42.190 --> 01:11:42.829
<v Speaker 2>to that.

01:11:43.710 --> 01:11:45.229
<v Speaker 2>Right. So

01:11:45.949 --> 01:11:48.669
<v Speaker 1>Yeah. Three and four look pretty ominous.

01:11:50.989 --> 01:11:51.389
<v Speaker 2>Yeah.

01:11:54.385 --> 01:11:56.385
<v Speaker 2>So the real one is in manifest.

01:11:56.945 --> 01:11:58.145
<v Speaker 2>The one in

01:11:58.945 --> 01:12:00.705
<v Speaker 2>just Kubernetes is

01:12:01.265 --> 01:12:03.585
<v Speaker 2>I'm assuming is the backup. So we're gonna

01:12:03.585 --> 01:12:05.665
<v Speaker 2>have a look at the manifest first. That's

01:12:05.665 --> 01:12:06.705
<v Speaker 1>its authentication

01:12:06.705 --> 01:12:08.625
<v Speaker 1>to the cluster. That is KubeConfig.

01:12:09.690 --> 01:12:10.329
<v Speaker 1>Yep.

01:12:11.290 --> 01:12:12.090
<v Speaker 2>Shetler.

01:12:12.250 --> 01:12:13.610
<v Speaker 2>Oh, Shetler.conf.

01:12:13.610 --> 01:12:14.170
<v Speaker 2>Yep.

01:12:14.650 --> 01:12:15.690
<v Speaker 2>Not YAML.

01:12:15.770 --> 01:12:18.250
<v Speaker 2>Yeah. Remember, you're only seeing what's in BIM.

01:12:22.115 --> 01:12:24.115
<v Speaker 1>Alright. Let's go look at the static manifest,

01:12:24.115 --> 01:12:24.995
<v Speaker 1>and we'll take it from there.

01:12:42.580 --> 01:12:43.780
<v Speaker 2>Alright. So,

01:12:46.739 --> 01:12:49.185
<v Speaker 2>hopefully, it's going straight to that. Also, I

01:12:49.185 --> 01:12:52.224
<v Speaker 2>believe if you use g and semicolon

01:12:52.224 --> 01:12:54.545
<v Speaker 2>or g and comma, you can go to

01:12:54.545 --> 01:12:55.985
<v Speaker 2>all of the edits. So let's have a

01:12:55.985 --> 01:12:56.784
<v Speaker 2>look at that.

01:13:01.025 --> 01:13:02.784
<v Speaker 1>Well, there's something there that's

01:13:03.290 --> 01:13:04.090
<v Speaker 1>interesting.

01:13:04.090 --> 01:13:04.650
<v Speaker 1>Yeah.

01:13:05.130 --> 01:13:06.170
<v Speaker 2>Yep. So

01:13:06.810 --> 01:13:07.770
<v Speaker 2>command

01:13:07.770 --> 01:13:09.690
<v Speaker 2>and the image have been changed.

01:13:10.650 --> 01:13:13.290
<v Speaker 2>So I am not sure. So

01:13:15.625 --> 01:13:17.624
<v Speaker 2>I don't know what the actual

01:13:18.505 --> 01:13:20.665
<v Speaker 2>real ones are gonna be. I think the

01:13:20.665 --> 01:13:22.104
<v Speaker 2>image is GCH.

01:13:22.344 --> 01:13:23.465
<v Speaker 2>Is it Google?

01:13:23.625 --> 01:13:25.864
<v Speaker 1>Yeah. I think I can take that off

01:13:25.864 --> 01:13:28.104
<v Speaker 1>the top of my head. No. Fair enough.

01:13:28.105 --> 01:13:28.585
<v Speaker 2>Thank you.

01:13:33.930 --> 01:13:34.730
<v Speaker 1>I

01:13:34.970 --> 01:13:37.449
<v Speaker 1>can't spell scheduler, but scheduler

01:13:37.770 --> 01:13:40.410
<v Speaker 1>one point So there's also a backup file

01:13:40.410 --> 01:13:42.570
<v Speaker 3>in dot backup if you just want that

01:13:42.570 --> 01:13:42.810
<v Speaker 3>one.

01:13:43.625 --> 01:13:46.025
<v Speaker 3>You guys found both things. So Alright. Okay.

01:13:46.025 --> 01:13:46.905
<v Speaker 1>Right. Okay.

01:13:50.425 --> 01:13:53.225
<v Speaker 3>So the actual real shame of this, Russell,

01:13:53.225 --> 01:13:55.945
<v Speaker 3>is that I wrote my own scheduler,

01:13:56.370 --> 01:13:58.209
<v Speaker 3>and it was supposed to run.

01:13:59.889 --> 01:14:02.130
<v Speaker 3>Why is everybody being so harsh?

01:14:03.170 --> 01:14:03.889
<v Speaker 3>It

01:14:05.170 --> 01:14:08.610
<v Speaker 3>actually runs on my my kind cluster,

01:14:08.610 --> 01:14:11.364
<v Speaker 3>but I didn't get its credentials correct. And

01:14:11.364 --> 01:14:12.885
<v Speaker 3>then I kinda broke my cluster, so I

01:14:12.885 --> 01:14:15.284
<v Speaker 3>didn't have enough time to debug it. But

01:14:15.605 --> 01:14:17.764
<v Speaker 3>it all it did was print out one

01:14:17.764 --> 01:14:19.844
<v Speaker 3>does not simply run a pod

01:14:21.685 --> 01:14:22.005
<v Speaker 2>Nice.

01:14:23.110 --> 01:14:26.310
<v Speaker 3>Whenever you tried to schedule something. So Well,

01:14:26.310 --> 01:14:28.390
<v Speaker 1>you've not been that nice with your backup.

01:14:29.990 --> 01:14:31.430
<v Speaker 1>Because you forgot to

01:14:32.710 --> 01:14:34.230
<v Speaker 1>no. That is right. Oh, if I got

01:14:34.230 --> 01:14:35.430
<v Speaker 1>that right, cool. Okay. Cool.

01:14:36.155 --> 01:14:37.995
<v Speaker 3>I was gonna say I'm kind with my

01:14:37.995 --> 01:14:40.315
<v Speaker 3>backups. Anytime I change a manifest file, I

01:14:40.315 --> 01:14:41.755
<v Speaker 3>make a backup so that Well, it's because

01:14:41.755 --> 01:14:43.515
<v Speaker 1>the deaf didn't show the image, but it's

01:14:43.515 --> 01:14:45.195
<v Speaker 1>because I forgot I fixed the image and

01:14:45.195 --> 01:14:45.835
<v Speaker 1>then did the the

01:14:49.099 --> 01:14:51.500
<v Speaker 1>alright. Even got the version right? That's that's

01:14:51.500 --> 01:14:52.219
<v Speaker 3>impressive.

01:14:52.780 --> 01:14:53.979
<v Speaker 1>Hey. These are

01:14:54.380 --> 01:14:56.940
<v Speaker 1>hand rolled well, fully automated clusters, but I

01:14:56.940 --> 01:14:58.699
<v Speaker 1>put a lot of stuff into these clusters.

01:15:00.860 --> 01:15:02.780
<v Speaker 1>And then QVAP comes along and

01:15:03.075 --> 01:15:04.835
<v Speaker 1>makes my list of all the visitors.

01:15:05.795 --> 01:15:07.715
<v Speaker 2>Can't see the scheduler. That just means the

01:15:07.715 --> 01:15:10.835
<v Speaker 1>kubelet's restarted. It takes ten, twenty seconds.

01:15:13.235 --> 01:15:15.315
<v Speaker 2>Okay. Probably saying that maybe pulling an image

01:15:15.315 --> 01:15:17.715
<v Speaker 1>right now because the pull policy was always,

01:15:17.715 --> 01:15:18.195
<v Speaker 1>I believe.

01:15:19.449 --> 01:15:20.329
<v Speaker 2>Fair enough.

01:15:20.650 --> 01:15:22.810
<v Speaker 2>So, yeah, sounds like you've run into the

01:15:22.810 --> 01:15:24.570
<v Speaker 2>same problems I did, Mark, because I was

01:15:24.570 --> 01:15:25.769
<v Speaker 2>developing my

01:15:26.889 --> 01:15:27.689
<v Speaker 2>evil

01:15:27.690 --> 01:15:29.290
<v Speaker 2>on a kind cluster as well. And when

01:15:29.290 --> 01:15:31.449
<v Speaker 2>I moved it over, nothing worked properly.

01:15:32.995 --> 01:15:35.395
<v Speaker 3>Yeah. I just made the grave mistake of

01:15:35.395 --> 01:15:37.955
<v Speaker 3>restarting my control plane, and then nothing worked.

01:15:37.955 --> 01:15:39.395
<v Speaker 3>And so I didn't have time to debug

01:15:39.395 --> 01:15:40.035
<v Speaker 3>it. So

01:15:42.195 --> 01:15:43.715
<v Speaker 3>sorry about that. It was supposed to be

01:15:43.715 --> 01:15:45.315
<v Speaker 3>a little bit more devious, just a little

01:15:45.315 --> 01:15:45.475
<v Speaker 3>bit.

01:15:50.440 --> 01:15:51.880
<v Speaker 1>Come on, scheduler.

01:15:53.560 --> 01:15:55.880
<v Speaker 3>You know what? I don't know why, but

01:15:55.880 --> 01:15:57.880
<v Speaker 3>I found the scheduler doesn't come back until

01:15:57.880 --> 01:15:59.480
<v Speaker 3>you restart the cubelet.

01:16:03.184 --> 01:16:05.184
<v Speaker 1>I finally cut it along a wee bit.

01:16:07.425 --> 01:16:08.385
<v Speaker 1>There we go.

01:16:08.864 --> 01:16:10.224
<v Speaker 1>Cool. It

01:16:10.465 --> 01:16:13.985
<v Speaker 3>should. Anytime you update the static pod manifest,

01:16:13.985 --> 01:16:15.025
<v Speaker 3>it should. But for some reason,

01:16:15.640 --> 01:16:16.599
<v Speaker 3>it wasn't.

01:16:17.000 --> 01:16:19.080
<v Speaker 1>Okay. It's now rescheduling everything that needs to

01:16:19.080 --> 01:16:21.480
<v Speaker 1>reschedule. So that's good. Although my cue put

01:16:21.480 --> 01:16:22.520
<v Speaker 1>fix doesn't work.

01:16:32.665 --> 01:16:35.065
<v Speaker 2>So we just give up on. That's fine.

01:16:40.920 --> 01:16:42.600
<v Speaker 2>Oh, you're going you're gonna try and fix

01:16:42.600 --> 01:16:44.920
<v Speaker 2>it? There's also an environment variable we can

01:16:44.920 --> 01:16:46.760
<v Speaker 1>pass them to change that port.

01:16:48.280 --> 01:16:48.680
<v Speaker 2>Okay.

01:16:55.245 --> 01:16:57.165
<v Speaker 1>There. No. That's the flag.

01:17:06.440 --> 01:17:08.520
<v Speaker 1>I have try to flag again. I'm sure

01:17:08.520 --> 01:17:10.280
<v Speaker 1>there's an environment variable though.

01:17:15.240 --> 01:17:16.600
<v Speaker 1>I'll make one more change to it and

01:17:16.600 --> 01:17:17.640
<v Speaker 1>we'll see if we can get by with

01:17:17.640 --> 01:17:17.800
<v Speaker 1>that.

01:17:19.815 --> 01:17:20.534
<v Speaker 2>Okay.

01:17:26.934 --> 01:17:27.894
<v Speaker 1>What's wrong with that?

01:17:36.639 --> 01:17:39.119
<v Speaker 1>Just because that's what it shows as the

01:17:39.119 --> 01:17:41.440
<v Speaker 1>default minus the port change that we need

01:17:41.440 --> 01:17:42.159
<v Speaker 1>to make.

01:17:42.480 --> 01:17:43.520
<v Speaker 1>I'll call on two.

01:17:54.315 --> 01:17:55.915
<v Speaker 1>Alright. We'll see if that helps.

01:17:57.515 --> 01:17:58.155
<v Speaker 1>Off you go.

01:18:00.820 --> 01:18:02.020
<v Speaker 2>Right. So

01:18:02.580 --> 01:18:03.700
<v Speaker 2>you've sorry.

01:18:04.100 --> 01:18:05.220
<v Speaker 2>Fixed the

01:18:06.660 --> 01:18:09.380
<v Speaker 2>worker nodes. So if I why is it

01:18:09.380 --> 01:18:10.180
<v Speaker 2>not typing?

01:18:10.500 --> 01:18:10.900
<v Speaker 2>Okay.

01:18:13.125 --> 01:18:15.125
<v Speaker 3>Yeah. I had the same problem. Why isn't

01:18:15.125 --> 01:18:15.925
<v Speaker 3>it typing?

01:18:16.565 --> 01:18:18.005
<v Speaker 3>Sometimes it doesn't.

01:18:25.605 --> 01:18:27.525
<v Speaker 2>Oh, both of the work are not gonna

01:18:27.525 --> 01:18:28.325
<v Speaker 2>ask this question.

01:18:30.640 --> 01:18:31.440
<v Speaker 3>Uh-huh.

01:18:32.800 --> 01:18:34.480
<v Speaker 2>Are both of the working nodes

01:18:35.120 --> 01:18:37.760
<v Speaker 2>now intentionally broken, or is one of them

01:18:37.760 --> 01:18:39.440
<v Speaker 2>still unintentionally

01:18:39.440 --> 01:18:40.159
<v Speaker 2>broken?

01:18:41.840 --> 01:18:42.480
<v Speaker 3>I mean,

01:18:45.455 --> 01:18:46.415
<v Speaker 3>there are

01:18:46.575 --> 01:18:47.534
<v Speaker 3>minor

01:18:48.335 --> 01:18:49.215
<v Speaker 3>breaks

01:18:49.215 --> 01:18:50.415
<v Speaker 3>on the nodes.

01:18:51.055 --> 01:18:51.614
<v Speaker 3>Yes.

01:18:56.335 --> 01:18:57.215
<v Speaker 2>I

01:18:57.295 --> 01:18:59.695
<v Speaker 2>don't think I'm gonna see anything from

01:19:01.520 --> 01:19:03.520
<v Speaker 2>oh, let's just do it anyway.

01:19:04.240 --> 01:19:05.840
<v Speaker 2>I described the pod.

01:19:11.680 --> 01:19:12.880
<v Speaker 2>That's not how you do that.

01:19:21.885 --> 01:19:23.485
<v Speaker 2>Copy and paste isn't very

01:19:24.445 --> 01:19:25.325
<v Speaker 2>friendly for

01:19:26.605 --> 01:19:28.125
<v Speaker 3>I was just using the mouse. The mouse

01:19:28.125 --> 01:19:30.460
<v Speaker 3>worked pretty well, which, I mean, is a

01:19:30.460 --> 01:19:32.540
<v Speaker 3>context switch from your keyboard. But

01:19:36.460 --> 01:19:37.500
<v Speaker 2>So I think

01:19:37.980 --> 01:19:40.540
<v Speaker 2>what happened? Oh. I resized.

01:19:42.300 --> 01:19:43.820
<v Speaker 2>Know I know we're gonna get used to

01:19:43.820 --> 01:19:43.980
<v Speaker 2>that.

01:19:45.114 --> 01:19:47.835
<v Speaker 1>I gotta open another session quickly and fix.

01:19:47.835 --> 01:19:49.514
<v Speaker 1>I'll pop that over here so it doesn't

01:19:49.755 --> 01:19:51.994
<v Speaker 1>but I'll get cube bit working

01:19:52.635 --> 01:19:54.074
<v Speaker 1>while you debug.

01:19:55.435 --> 01:19:56.155
<v Speaker 3>Okay.

01:19:57.034 --> 01:19:58.474
<v Speaker 3>Really sorry about the cube bit.

01:19:59.950 --> 01:20:02.110
<v Speaker 1>That's not your fault. That is Dan Federan's

01:20:02.110 --> 01:20:03.230
<v Speaker 1>fault. Dan.

01:20:06.590 --> 01:20:07.949
<v Speaker 3>I I do believe

01:20:08.270 --> 01:20:10.430
<v Speaker 3>you warned us that restarting the nodes would

01:20:10.430 --> 01:20:12.750
<v Speaker 3>take a long time, and you meant they

01:20:12.750 --> 01:20:13.470
<v Speaker 3>take a long time.

01:20:14.185 --> 01:20:15.304
<v Speaker 1>They do. Yeah.

01:20:19.625 --> 01:20:21.065
<v Speaker 2>So those tolerations,

01:20:21.065 --> 01:20:21.784
<v Speaker 2>are they

01:20:24.985 --> 01:20:26.745
<v Speaker 2>they look a bit dodgy, but I'm not

01:20:26.745 --> 01:20:28.344
<v Speaker 2>sure if that's always there or not.

01:20:31.320 --> 01:20:35.000
<v Speaker 2>Not ready, no execute, and unreachable, no execute.

01:20:35.880 --> 01:20:36.840
<v Speaker 2>Is that just

01:20:39.160 --> 01:20:40.120
<v Speaker 2>the norm?

01:20:40.280 --> 01:20:42.040
<v Speaker 1>Okay. Sorry. I'm back with you now. So

01:20:42.040 --> 01:20:44.040
<v Speaker 1>we're looking we're looking at

01:20:44.985 --> 01:20:46.425
<v Speaker 2>Can you see the highlight?

01:20:46.585 --> 01:20:48.025
<v Speaker 1>No. I don't see it. That would be

01:20:48.025 --> 01:20:50.184
<v Speaker 1>a cool feature though, but sadly not though.

01:20:51.304 --> 01:20:53.304
<v Speaker 2>Yeah. Obviously, it's yeah. Okay. So we got

01:20:53.304 --> 01:20:55.225
<v Speaker 1>zero nodes are available. One node has a

01:20:55.225 --> 01:20:55.864
<v Speaker 1>tint.

01:20:56.905 --> 01:20:59.545
<v Speaker 2>So just under the tolerations,

01:21:01.180 --> 01:21:02.300
<v Speaker 2>are they normal?

01:21:03.900 --> 01:21:06.060
<v Speaker 3>It's pretty normal for a node to have

01:21:06.060 --> 01:21:08.300
<v Speaker 3>a toleration that the node has to be

01:21:08.300 --> 01:21:10.460
<v Speaker 3>ready to run on it. Right. So that

01:21:10.620 --> 01:21:12.540
<v Speaker 2>so what that's saying is it's not ready.

01:21:12.540 --> 01:21:14.300
<v Speaker 2>If it's not ready or unreachable,

01:21:15.885 --> 01:21:18.045
<v Speaker 2>yeah, don't try execute don't try schedule to

01:21:18.045 --> 01:21:18.525
<v Speaker 2>it.

01:21:19.085 --> 01:21:21.885
<v Speaker 2>Okay. Right. And it's no execute on a

01:21:21.885 --> 01:21:24.765
<v Speaker 3>not ready or unreachable mode. Mhmm. CubeBit is

01:21:24.765 --> 01:21:27.165
<v Speaker 1>happy again. I would expect our notes to

01:21:27.165 --> 01:21:28.685
<v Speaker 1>be happy again very, very soon.

01:21:29.599 --> 01:21:32.159
<v Speaker 3>I I would expect them to be happier.

01:21:33.599 --> 01:21:33.999
<v Speaker 1>But

01:21:34.559 --> 01:21:37.039
<v Speaker 1>the BGP issue is not a thing anymore.

01:21:37.039 --> 01:21:37.519
<v Speaker 1>So

01:21:38.880 --> 01:21:40.239
<v Speaker 1>if you can So I can go on

01:21:40.239 --> 01:21:41.280
<v Speaker 2>to worker one, can I?

01:21:42.195 --> 01:21:44.835
<v Speaker 1>We have a session open on worker one.

01:21:44.835 --> 01:21:46.274
<v Speaker 1>Yep. You can pop over there.

01:21:47.155 --> 01:21:49.155
<v Speaker 1>K. Go. Hello. There we go.

01:21:52.514 --> 01:21:54.114
<v Speaker 2>Oh, that's because you were typing as well.

01:21:54.114 --> 01:21:54.834
<v Speaker 2>Oh, okay.

01:21:55.235 --> 01:21:57.710
<v Speaker 2>What was I doing last? Yeah. Apparently, spelled

01:21:57.710 --> 01:22:00.590
<v Speaker 1>Prometheus wrong in the flag. Thanks to James

01:22:00.590 --> 01:22:01.789
<v Speaker 1>for pointing that out.

01:22:02.830 --> 01:22:03.869
<v Speaker 1>I got it fixed.

01:22:08.190 --> 01:22:09.790
<v Speaker 1>So if you restart that, I could I

01:22:09.790 --> 01:22:11.070
<v Speaker 1>think that'll be okay.

01:22:11.230 --> 01:22:11.710
<v Speaker 3>Okay.

01:22:21.015 --> 01:22:22.775
<v Speaker 1>Assuming I set the IP address back in

01:22:22.775 --> 01:22:25.655
<v Speaker 1>their config, which I'm pretty confident I did.

01:22:25.655 --> 01:22:27.335
<v Speaker 1>Yeah. That's a good kubelet.

01:22:33.460 --> 01:22:34.820
<v Speaker 1>That's a bad kubelet.

01:22:37.060 --> 01:22:39.139
<v Speaker 1>Did I not change the IP address back?

01:22:41.220 --> 01:22:42.020
<v Speaker 1>Well, I'm sorry.

01:22:45.025 --> 01:22:47.105
<v Speaker 1>That just makes me a terrible, terrible person.

01:22:56.900 --> 01:22:59.460
<v Speaker 1>Should be 8191.

01:23:01.700 --> 01:23:03.620
<v Speaker 1>Is it using 8191?

01:23:08.900 --> 01:23:09.300
<v Speaker 1>No.

01:23:12.475 --> 01:23:14.795
<v Speaker 1>Alright. I thought I was confident I changed

01:23:14.795 --> 01:23:15.594
<v Speaker 1>that back.

01:23:19.515 --> 01:23:22.235
<v Speaker 1>Oops. Sorry. I was just gonna run a

01:23:22.235 --> 01:23:22.635
<v Speaker 1>journal.

01:23:23.390 --> 01:23:25.630
<v Speaker 2>Alright. I'll step back and let you. I

01:23:25.630 --> 01:23:27.150
<v Speaker 1>just wanna make sure that I'm not tripping

01:23:27.150 --> 01:23:28.750
<v Speaker 1>you up anymore than I already am.

01:23:35.595 --> 01:23:38.235
<v Speaker 1>Okay. So this isn't the BGP. This isn't

01:23:38.235 --> 01:23:40.155
<v Speaker 1>TLS. This is now just a broken node

01:23:40.155 --> 01:23:41.675
<v Speaker 1>from, I believe.

01:23:42.235 --> 01:23:42.555
<v Speaker 1>So

01:23:43.755 --> 01:23:44.395
<v Speaker 1>Right.

01:23:45.755 --> 01:23:47.675
<v Speaker 2>Felt like a node node in four.

01:23:47.995 --> 01:23:50.235
<v Speaker 2>Keep it container runtime network not ready. Not

01:23:50.235 --> 01:23:52.789
<v Speaker 2>ready. Network plug in not ready. Network plug

01:23:52.789 --> 01:23:55.510
<v Speaker 2>in returns error. CNI plug in not initialized.

01:23:56.070 --> 01:23:56.709
<v Speaker 2>So

01:24:00.070 --> 01:24:01.510
<v Speaker 2>what has it done to the network?

01:24:03.715 --> 01:24:05.235
<v Speaker 1>Do you know how the CNI

01:24:05.315 --> 01:24:06.035
<v Speaker 1>works?

01:24:07.395 --> 01:24:09.235
<v Speaker 2>No. I've never touched that to try and

01:24:09.235 --> 01:24:10.595
<v Speaker 2>break it for you yet.

01:24:13.635 --> 01:24:14.035
<v Speaker 2>Alright.

01:24:21.130 --> 01:24:23.050
<v Speaker 1>And so what happens I I was just

01:24:23.050 --> 01:24:24.650
<v Speaker 1>checking on a control plan there to see

01:24:24.650 --> 01:24:26.249
<v Speaker 1>if we had our Cilium

01:24:26.409 --> 01:24:28.570
<v Speaker 1>pods on all the nodes, which appears that

01:24:28.570 --> 01:24:29.209
<v Speaker 1>we do.

01:24:30.250 --> 01:24:32.409
<v Speaker 1>They have an a container that actually downloads

01:24:32.409 --> 01:24:33.849
<v Speaker 1>binaries to each node,

01:24:34.305 --> 01:24:37.344
<v Speaker 1>which I suspect could have been tampered with

01:24:37.665 --> 01:24:40.784
<v Speaker 1>and may maybe the binaries removed,

01:24:42.225 --> 01:24:43.824
<v Speaker 1>which would cause that error.

01:24:45.344 --> 01:24:47.580
<v Speaker 2>Say that again, sorry. Missed that. So we

01:24:47.580 --> 01:24:49.340
<v Speaker 1>have an error in our kubelet logs. Container

01:24:49.340 --> 01:24:52.540
<v Speaker 1>runtime network not ready, network ready false, network

01:24:52.540 --> 01:24:54.540
<v Speaker 1>plugins returned an error, c and I plugin

01:24:54.540 --> 01:24:55.579
<v Speaker 1>not initialized.

01:24:56.300 --> 01:24:58.540
<v Speaker 1>I can't remember where they download to. I

01:24:58.540 --> 01:25:00.539
<v Speaker 1>thought it was maybe slash c and I.

01:25:00.699 --> 01:25:02.094
<v Speaker 1>But if we jump to the control plane

01:25:02.094 --> 01:25:03.135
<v Speaker 1>node for a moment

01:25:03.614 --> 01:25:06.574
<v Speaker 1>and if we edit the daemon set.

01:25:09.135 --> 01:25:11.054
<v Speaker 2>Right. I'm on that. Yeah. Alright.

01:25:12.975 --> 01:25:13.534
<v Speaker 1>So Liam,

01:25:14.700 --> 01:25:16.860
<v Speaker 1>There's Emmet containers.

01:25:23.580 --> 01:25:25.340
<v Speaker 1>Not what I expected to see,

01:25:26.700 --> 01:25:28.140
<v Speaker 1>but doesn't mean it's wrong.

01:25:34.574 --> 01:25:36.175
<v Speaker 1>Is that they download

01:25:36.175 --> 01:25:38.574
<v Speaker 1>the binaries to the machine,

01:25:41.375 --> 01:25:44.015
<v Speaker 1>OpsCNI, okay. So if we take a look

01:25:44.015 --> 01:25:44.495
<v Speaker 1>in here,

01:25:50.310 --> 01:25:51.590
<v Speaker 1>those all look okay.

01:25:52.950 --> 01:25:55.270
<v Speaker 1>So Okay. That idea is

01:25:56.550 --> 01:25:57.190
<v Speaker 1>dumped.

01:26:01.255 --> 01:26:02.855
<v Speaker 2>So can I have a look,

01:26:03.175 --> 01:26:04.054
<v Speaker 2>which

01:26:04.135 --> 01:26:05.094
<v Speaker 2>one am I on?

01:26:12.780 --> 01:26:14.139
<v Speaker 2>Why can I see

01:26:14.460 --> 01:26:16.380
<v Speaker 2>inside what's to do VIM

01:26:16.620 --> 01:26:17.580
<v Speaker 2>in my

01:26:19.660 --> 01:26:21.740
<v Speaker 2>Alright? In the control. I'm on the control

01:26:21.740 --> 01:26:23.740
<v Speaker 2>plan. I can I'm inside VIM. I've kinda

01:26:23.740 --> 01:26:24.860
<v Speaker 2>stepped out of that. Yep.

01:26:25.845 --> 01:26:26.485
<v Speaker 2>Alright.

01:26:34.005 --> 01:26:35.605
<v Speaker 2>So what are the

01:26:41.970 --> 01:26:43.730
<v Speaker 1>And there's comment on the chat there from

01:26:43.730 --> 01:26:45.490
<v Speaker 1>Cook Jan saying, what do the logs from

01:26:45.490 --> 01:26:46.530
<v Speaker 1>Solium say?

01:26:47.650 --> 01:26:49.730
<v Speaker 1>Yeah. I'd be curious about that too.

01:26:52.290 --> 01:26:53.090
<v Speaker 2>That's not the.

01:27:17.400 --> 01:27:20.199
<v Speaker 1>Just pick any of the non operator sodium.

01:27:21.000 --> 01:27:21.400
<v Speaker 2>Okay.

01:27:31.165 --> 01:27:32.045
<v Speaker 1>Useful.

01:27:34.045 --> 01:27:34.445
<v Speaker 2>Okay.

01:27:38.130 --> 01:27:39.650
<v Speaker 2>Will that be the same for all of

01:27:39.650 --> 01:27:42.369
<v Speaker 2>them? Yeah. I feel it will be too.

01:27:44.370 --> 01:27:45.810
<v Speaker 2>Just have a look at this one.

01:27:53.435 --> 01:27:53.994
<v Speaker 2>I

01:28:02.875 --> 01:28:04.395
<v Speaker 1>feel like we wanna look at that demon

01:28:04.395 --> 01:28:05.034
<v Speaker 1>set again,

01:28:05.540 --> 01:28:06.820
<v Speaker 1>potentially.

01:28:07.060 --> 01:28:07.940
<v Speaker 1>Oh, what's the

01:28:09.219 --> 01:28:10.659
<v Speaker 2>So this was another

01:28:10.900 --> 01:28:13.380
<v Speaker 2>of the cilium. So let's just check that

01:28:13.380 --> 01:28:13.940
<v Speaker 2>I'm

01:28:14.580 --> 01:28:15.699
<v Speaker 2>not going crazy.

01:28:16.180 --> 01:28:19.620
<v Speaker 2>So I looked at this cilium, which had

01:28:19.620 --> 01:28:20.420
<v Speaker 2>a restart,

01:28:23.475 --> 01:28:24.915
<v Speaker 2>And that's what the logs are from this

01:28:24.915 --> 01:28:25.555
<v Speaker 2>one.

01:28:25.875 --> 01:28:26.755
<v Speaker 3>I I

01:28:28.835 --> 01:28:29.475
<v Speaker 3>yeah.

01:28:33.075 --> 01:28:34.380
<v Speaker 2>Shall we take a look? Chip in if

01:28:34.380 --> 01:28:35.900
<v Speaker 2>you want. Well, we've got hints in the

01:28:35.900 --> 01:28:37.420
<v Speaker 1>in the story, do we?

01:28:37.900 --> 01:28:39.900
<v Speaker 1>Are they on the root fail system?

01:28:41.500 --> 01:28:43.340
<v Speaker 1>No. You'd be No. There is your setup

01:28:43.340 --> 01:28:43.820
<v Speaker 1>script.

01:28:45.855 --> 01:28:46.494
<v Speaker 3>Yep.

01:28:49.455 --> 01:28:50.735
<v Speaker 2>But I don't wanna I don't wanna be

01:28:50.495 --> 01:28:51.455
<v Speaker 3>I just want to

01:28:53.215 --> 01:28:55.375
<v Speaker 3>I I'll just say there is no more

01:28:55.375 --> 01:28:56.495
<v Speaker 3>image shenanigans.

01:28:56.495 --> 01:28:58.495
<v Speaker 3>You can trust every other image that you

01:28:58.495 --> 01:29:00.230
<v Speaker 3>find so that we don't have to go

01:29:00.230 --> 01:29:02.470
<v Speaker 3>down that rabbit hole with literally every image.

01:29:02.790 --> 01:29:04.870
<v Speaker 3>You don't have to think that I hijacked

01:29:04.870 --> 01:29:07.190
<v Speaker 3>Cilium image and compiled it. But you have

01:29:07.190 --> 01:29:08.550
<v Speaker 1>broken Cilium. Right?

01:29:09.670 --> 01:29:13.030
<v Speaker 3>I have broken something that has broken Cilium.

01:29:13.030 --> 01:29:13.990
<v Speaker 3>Yes. Alright.

01:29:14.595 --> 01:29:16.034
<v Speaker 1>On the worker nodes.

01:29:16.755 --> 01:29:18.195
<v Speaker 3>Possibly. Yeah.

01:29:22.035 --> 01:29:24.275
<v Speaker 3>Cilium won't be working possibly. Yes.

01:29:27.159 --> 01:29:27.879
<v Speaker 3>Yeah.

01:29:31.800 --> 01:29:32.999
<v Speaker 2>Okay. So

01:29:36.199 --> 01:29:37.639
<v Speaker 2>I don't know. So we might have to

01:29:37.639 --> 01:29:39.000
<v Speaker 2>know whether or not it would help us.

01:29:40.195 --> 01:29:42.835
<v Speaker 1>Neither. What the problem is. Do I?

01:29:44.675 --> 01:29:47.395
<v Speaker 1>Alright. So what would what would break So

01:29:47.395 --> 01:29:48.594
<v Speaker 1>Liam? Right? So

01:29:49.875 --> 01:29:52.195
<v Speaker 1>we don't get any logs from the pod.

01:29:52.275 --> 01:29:54.114
<v Speaker 1>So we need to just work this out.

01:29:55.120 --> 01:29:57.040
<v Speaker 1>The binaries do exist in.

01:30:01.680 --> 01:30:03.360
<v Speaker 2>So I'm thinking, like,

01:30:04.720 --> 01:30:06.160
<v Speaker 2>it's probably something

01:30:07.365 --> 01:30:10.485
<v Speaker 2>I think, outside of Kubernetes that's network based,

01:30:10.485 --> 01:30:12.885
<v Speaker 2>where it can't be taking the

01:30:12.885 --> 01:30:14.805
<v Speaker 2>network interface down because of a bit of

01:30:14.805 --> 01:30:16.965
<v Speaker 2>talk to it. I believe that's right, isn't

01:30:16.965 --> 01:30:18.085
<v Speaker 2>it? Mhmm. Even

01:30:18.885 --> 01:30:20.885
<v Speaker 2>so it shares the same IP. So

01:30:24.380 --> 01:30:27.660
<v Speaker 2>it could either be a firewall or IP

01:30:27.660 --> 01:30:28.460
<v Speaker 2>tables.

01:30:30.140 --> 01:30:31.340
<v Speaker 1>Let's take a look.

01:30:32.700 --> 01:30:34.060
<v Speaker 2>Alright. So are we

01:30:34.780 --> 01:30:35.740
<v Speaker 2>on worker one?

01:30:36.525 --> 01:30:39.085
<v Speaker 1>We are. I've ran a list on IP

01:30:39.085 --> 01:30:39.885
<v Speaker 1>tables.

01:30:41.885 --> 01:30:44.445
<v Speaker 1>I mean, we could just yolo this right

01:30:44.445 --> 01:30:45.565
<v Speaker 1>into a flush

01:30:46.365 --> 01:30:47.325
<v Speaker 1>and see

01:30:48.045 --> 01:30:49.725
<v Speaker 1>it gets things kicking over again.

01:30:51.070 --> 01:30:53.870
<v Speaker 1>So gone. If there was an IP table

01:30:53.870 --> 01:30:54.510
<v Speaker 1>rule,

01:30:55.310 --> 01:30:56.750
<v Speaker 1>it no longer exists.

01:30:58.510 --> 01:30:59.390
<v Speaker 1>What else can we Will

01:31:00.910 --> 01:31:03.230
<v Speaker 2>that break Cilium though or will Cilium

01:31:04.190 --> 01:31:05.390
<v Speaker 2>inject its rules back in?

01:31:06.565 --> 01:31:08.565
<v Speaker 1>Cilium will just add the rules back in.

01:31:08.645 --> 01:31:09.045
<v Speaker 3>Okay.

01:31:17.860 --> 01:31:20.900
<v Speaker 1>Now we're getting a connection timeout and our

01:31:20.900 --> 01:31:22.260
<v Speaker 1>IP here.

01:31:25.460 --> 01:31:27.220
<v Speaker 2>No. Because it is an IP, it can't

01:31:27.220 --> 01:31:29.540
<v Speaker 2>be a host file entry. You can't override

01:31:29.620 --> 01:31:31.460
<v Speaker 2>I don't think you can override IPs to

01:31:31.460 --> 01:31:31.940
<v Speaker 2>IPs.

01:31:32.525 --> 01:31:34.605
<v Speaker 1>I really hope this isn't the BGP thing

01:31:34.605 --> 01:31:36.525
<v Speaker 1>again. And that's just something

01:31:37.085 --> 01:31:39.725
<v Speaker 1>just intentional, Mark. Just wanna check.

01:31:42.045 --> 01:31:43.405
<v Speaker 1>Because the BGP looks okay.

01:31:44.380 --> 01:31:45.740
<v Speaker 1>In fact, you can't bang out you can't

01:31:45.740 --> 01:31:47.500
<v Speaker 1>ping a BGP address. I'm just being really

01:31:47.500 --> 01:31:48.140
<v Speaker 1>silly.

01:31:55.100 --> 01:31:56.220
<v Speaker 1>Okay. Networking thing.

01:31:57.364 --> 01:32:00.725
<v Speaker 1>Has back any rules? No. Should we rotate

01:32:00.725 --> 01:32:01.605
<v Speaker 1>the pods?

01:32:04.485 --> 01:32:05.284
<v Speaker 2>It's

01:32:07.285 --> 01:32:09.285
<v Speaker 1>yeah. Like I guess so. Like, it's it's

01:32:09.285 --> 01:32:12.005
<v Speaker 2>always been yeah. Let's

01:32:12.880 --> 01:32:15.199
<v Speaker 1>Delete everything and the world.

01:32:15.360 --> 01:32:17.440
<v Speaker 1>Bye bye. Bye bye. Bye bye. Bye bye.

01:32:17.440 --> 01:32:18.159
<v Speaker 1>Alright.

01:32:18.960 --> 01:32:20.560
<v Speaker 1>I get a bit happy when I delete

01:32:20.560 --> 01:32:20.880
<v Speaker 1>things.

01:32:23.535 --> 01:32:25.935
<v Speaker 1>Alright. Those are terminating.

01:32:26.015 --> 01:32:29.295
<v Speaker 1>We've got one up, but not quite ready.

01:32:30.815 --> 01:32:32.655
<v Speaker 1>Alright. One ready, one up.

01:32:33.935 --> 01:32:34.975
<v Speaker 1>No rules yet.

01:32:43.600 --> 01:32:45.520
<v Speaker 1>Makes that we win for that node.

01:32:46.080 --> 01:32:46.880
<v Speaker 1>Let's check.

01:32:50.415 --> 01:32:51.295
<v Speaker 1>Grip.

01:32:56.095 --> 01:32:58.255
<v Speaker 1>This one's still terminating.

01:33:01.215 --> 01:33:03.055
<v Speaker 2>You want, well you want a control plug,

01:33:03.055 --> 01:33:03.215
<v Speaker 2>mate.

01:33:04.090 --> 01:33:06.810
<v Speaker 1>Yeah. It's not I mean, we could maybe

01:33:06.810 --> 01:33:09.370
<v Speaker 1>try and speed that along, but perhaps that's

01:33:09.370 --> 01:33:10.650
<v Speaker 1>part of the brick.

01:33:12.650 --> 01:33:13.850
<v Speaker 1>I'm not feeling it running.

01:33:19.304 --> 01:33:20.905
<v Speaker 1>So we don't have currently, we don't have

01:33:20.905 --> 01:33:23.144
<v Speaker 1>Celium working on our node

01:33:24.665 --> 01:33:26.344
<v Speaker 1>and it's not terminating.

01:33:26.505 --> 01:33:27.864
<v Speaker 1>I don't see a process.

01:33:29.090 --> 01:33:31.409
<v Speaker 1>So this must be a Kubernetes thing. Right?

01:33:34.449 --> 01:33:35.089
<v Speaker 2>So

01:33:36.210 --> 01:33:37.329
<v Speaker 2>if the node

01:33:39.170 --> 01:33:40.769
<v Speaker 2>if the node was down,

01:33:42.449 --> 01:33:44.690
<v Speaker 2>Kubernetes wouldn't be able reschedule anything, would it?

01:33:46.125 --> 01:33:49.324
<v Speaker 1>I can't delete it because yeah. Of course.

01:33:50.925 --> 01:33:52.925
<v Speaker 1>I forgot about that. So the it's never

01:33:52.925 --> 01:33:54.525
<v Speaker 1>gonna terminate because it's not I can't reach

01:33:54.525 --> 01:33:55.485
<v Speaker 1>the kubelet.

01:33:56.284 --> 01:33:58.125
<v Speaker 1>We could try restarting the kubelet now that

01:33:58.125 --> 01:33:59.885
<v Speaker 1>we flushed all those rules.

01:34:02.679 --> 01:34:04.599
<v Speaker 1>Let's see if we got a happier kubelet.

01:34:04.760 --> 01:34:06.600
<v Speaker 2>But I think there's an underlying problem that's

01:34:06.600 --> 01:34:09.239
<v Speaker 2>gonna stop the kubelet from talking to

01:34:09.560 --> 01:34:10.999
<v Speaker 2>the API server.

01:34:11.080 --> 01:34:11.960
<v Speaker 1>I think you're right.

01:34:12.645 --> 01:34:15.205
<v Speaker 2>I just I just don't know enough now.

01:34:15.205 --> 01:34:16.645
<v Speaker 2>Like, this this is where we start to

01:34:16.645 --> 01:34:18.405
<v Speaker 2>reach my limit of Linux.

01:34:18.645 --> 01:34:22.325
<v Speaker 2>I don't know anything about firewalls and for

01:34:22.325 --> 01:34:23.364
<v Speaker 2>a lot. So

01:34:23.605 --> 01:34:25.285
<v Speaker 3>Alright. Do want me to give a hint?

01:34:25.980 --> 01:34:27.180
<v Speaker 2>Yes,

01:34:27.180 --> 01:34:29.500
<v Speaker 2>please. Now I was kind of ex

01:34:30.460 --> 01:34:33.100
<v Speaker 3>I was kind of expecting the flush of

01:34:33.100 --> 01:34:35.020
<v Speaker 3>the IP tables to fix it because I

01:34:35.020 --> 01:34:37.500
<v Speaker 3>just did a UFW

01:34:37.500 --> 01:34:38.620
<v Speaker 3>rule rule

01:34:38.865 --> 01:34:42.065
<v Speaker 3>to drop all communication from the server.

01:34:42.305 --> 01:34:43.745
<v Speaker 1>No. It's UFW, but

01:34:45.745 --> 01:34:47.825
<v Speaker 3>But UFW just sets up

01:34:48.865 --> 01:34:50.305
<v Speaker 3>IP table rules. Right?

01:34:52.420 --> 01:34:54.260
<v Speaker 3>Now I don't know if it just reset

01:34:54.260 --> 01:34:55.860
<v Speaker 3>it, but it didn't look like it reupdated

01:34:55.860 --> 01:34:58.099
<v Speaker 3>the IP table. So I don't know.

01:35:05.155 --> 01:35:07.875
<v Speaker 1>Is the IP table flush should have w

01:35:07.875 --> 01:35:08.995
<v Speaker 1>now. Yeah.

01:35:09.315 --> 01:35:11.715
<v Speaker 3>Yeah. The the IP table flush should have

01:35:11.715 --> 01:35:14.035
<v Speaker 3>fixed it because, again, UFW is just a

01:35:14.035 --> 01:35:15.635
<v Speaker 3>front end for the IP tables.

01:35:16.355 --> 01:35:16.995
<v Speaker 1>So

01:35:17.750 --> 01:35:20.550
<v Speaker 1>So this this probably has my BGP thing

01:35:20.550 --> 01:35:21.190
<v Speaker 1>again.

01:35:21.670 --> 01:35:23.750
<v Speaker 3>This is probably your b b I was

01:35:23.750 --> 01:35:25.590
<v Speaker 3>gonna say, you actually did fix

01:35:25.670 --> 01:35:27.830
<v Speaker 3>the thing I broke because I just

01:35:28.310 --> 01:35:29.990
<v Speaker 3>dropped the port

01:35:30.150 --> 01:35:32.310
<v Speaker 3>that the cubelet communicates on.

01:35:33.555 --> 01:35:34.275
<v Speaker 2>Okay.

01:35:35.315 --> 01:35:36.355
<v Speaker 3>So that was

01:35:36.915 --> 01:35:38.675
<v Speaker 2>Has that been done on worker two as

01:35:38.675 --> 01:35:39.235
<v Speaker 2>well?

01:35:39.555 --> 01:35:41.475
<v Speaker 3>No. I didn't repeat. I don't I don't

01:35:41.475 --> 01:35:42.355
<v Speaker 3>do repeat

01:35:43.635 --> 01:35:46.275
<v Speaker 3>this time. Alright. So is worker two down

01:35:46.275 --> 01:35:47.315
<v Speaker 2>intentionally,

01:35:47.315 --> 01:35:48.995
<v Speaker 2>or is that a BGP problem as well?

01:35:49.930 --> 01:35:51.210
<v Speaker 3>Probably both.

01:35:53.210 --> 01:35:54.730
<v Speaker 2>Ah, okay. Right. So

01:35:54.970 --> 01:35:57.290
<v Speaker 2>there is a definite break on worker two

01:35:57.290 --> 01:35:58.010
<v Speaker 2>as well.

01:36:00.090 --> 01:36:02.410
<v Speaker 3>The break on worker two is more subtle.

01:36:02.410 --> 01:36:04.250
<v Speaker 3>I would actually expect the node to show

01:36:04.250 --> 01:36:04.810
<v Speaker 3>available,

01:36:05.075 --> 01:36:06.915
<v Speaker 3>just not function properly.

01:36:08.435 --> 01:36:11.315
<v Speaker 1>Okay. I am gonna very quickly delete

01:36:11.635 --> 01:36:13.075
<v Speaker 1>QPub control plan.

01:36:28.580 --> 01:36:30.420
<v Speaker 1>Fair mail is hard. You know?

01:36:32.364 --> 01:36:35.005
<v Speaker 2>It's hard. It's it's very, very big.

01:36:50.410 --> 01:36:52.490
<v Speaker 1>I should save that curl command.

01:36:54.490 --> 01:36:56.170
<v Speaker 1>Just so I'm gonna try restarting the kubel

01:36:56.170 --> 01:36:56.970
<v Speaker 1>one more time.

01:36:57.625 --> 01:36:58.344
<v Speaker 2>Okay.

01:36:59.705 --> 01:37:00.185
<v Speaker 1>Why?

01:37:11.840 --> 01:37:13.599
<v Speaker 1>I I don't think ship that is doing

01:37:13.599 --> 01:37:15.360
<v Speaker 1>what it's supposed to be doing, which is

01:37:15.360 --> 01:37:17.199
<v Speaker 1>really frustrating because that's kind of

01:37:17.520 --> 01:37:19.679
<v Speaker 1>ruined any chances we have of getting this

01:37:19.679 --> 01:37:20.399
<v Speaker 1>to work.

01:37:20.960 --> 01:37:22.639
<v Speaker 3>Yeah. I'm sorry, guys.

01:37:23.280 --> 01:37:25.440
<v Speaker 1>That is my my I p g p

01:37:25.440 --> 01:37:26.079
<v Speaker 1>address. Right?

01:37:27.225 --> 01:37:28.105
<v Speaker 1>The

01:37:28.825 --> 01:37:30.185
<v Speaker 1>8191.

01:37:32.665 --> 01:37:33.305
<v Speaker 1>Yeah.

01:37:36.345 --> 01:37:37.225
<v Speaker 1>178

01:37:37.225 --> 01:37:38.825
<v Speaker 1>and I've not messed up, have I?

01:37:40.449 --> 01:37:41.169
<v Speaker 1>No.

01:37:43.250 --> 01:37:44.610
<v Speaker 1>Damn. You keep that.

01:37:48.849 --> 01:37:49.250
<v Speaker 3>So

01:37:50.210 --> 01:37:51.809
<v Speaker 3>So with this, it's going to be really

01:37:51.809 --> 01:37:53.730
<v Speaker 3>hard to actually debug the other thing. So

01:37:53.730 --> 01:37:56.210
<v Speaker 1>I can either just step you through them

01:37:56.935 --> 01:37:59.415
<v Speaker 3>since we're low on time. Well, with any

01:37:59.415 --> 01:38:01.495
<v Speaker 1>of your breaks, I've actually stopped Kubelet from

01:38:01.495 --> 01:38:02.934
<v Speaker 1>being able to advertise.

01:38:03.895 --> 01:38:07.735
<v Speaker 3>No. No. I specifically with, like I I

01:38:07.735 --> 01:38:10.055
<v Speaker 3>did very targeted. So, like, with my firewall,

01:38:10.055 --> 01:38:13.260
<v Speaker 3>I dropped the Kubelet port, not anything else.

01:38:13.260 --> 01:38:15.980
<v Speaker 3>I didn't drop all communication ports because that

01:38:15.980 --> 01:38:17.820
<v Speaker 3>would, like, break SSH and things like that.

01:38:17.820 --> 01:38:20.940
<v Speaker 3>So they were very targeted towards the cubelet.

01:38:20.940 --> 01:38:23.020
<v Speaker 3>So, no, it wouldn't have broken it.

01:38:24.985 --> 01:38:25.864
<v Speaker 2>So should we try

01:38:26.665 --> 01:38:27.945
<v Speaker 2>oh, we've only got a minute left. I

01:38:27.945 --> 01:38:28.985
<v Speaker 2>was gonna say, should we go on to

01:38:28.985 --> 01:38:29.465
<v Speaker 2>the

01:38:29.864 --> 01:38:32.345
<v Speaker 2>worker worker two? Because that that hasn't had

01:38:32.345 --> 01:38:34.665
<v Speaker 2>its IP tables pushed yet or This cilium

01:38:34.665 --> 01:38:35.145
<v Speaker 2>stopped.

01:38:36.360 --> 01:38:38.120
<v Speaker 3>Yeah. This is where it's gonna be very

01:38:38.120 --> 01:38:40.600
<v Speaker 3>hard to solve the other issues. They're not

01:38:40.680 --> 01:38:42.040
<v Speaker 3>hard. They're just

01:38:42.760 --> 01:38:45.320
<v Speaker 3>if this isn't working, then the other issues

01:38:45.320 --> 01:38:46.520
<v Speaker 3>aren't seen.

01:38:48.600 --> 01:38:51.685
<v Speaker 2>Okay. I'm

01:38:51.685 --> 01:38:52.885
<v Speaker 2>gonna run out I'm gonna run out of

01:38:52.885 --> 01:38:54.245
<v Speaker 2>time then, I guess, but I I I

01:38:54.245 --> 01:38:55.685
<v Speaker 2>don't mind going on a little bit further

01:38:55.685 --> 01:38:56.724
<v Speaker 2>if you want, but

01:38:57.365 --> 01:38:59.445
<v Speaker 2>if you wanna explain it then. Yeah. Why

01:38:59.445 --> 01:39:01.284
<v Speaker 1>don't you walk us through it, Marek?

01:39:01.365 --> 01:39:03.365
<v Speaker 3>Okay. Yeah. I I right now, don't think

01:39:03.365 --> 01:39:06.010
<v Speaker 1>we can curl and speak to that BGP

01:39:06.010 --> 01:39:08.170
<v Speaker 1>address, which makes me think that it's not

01:39:08.170 --> 01:39:09.370
<v Speaker 1>being advertised,

01:39:09.370 --> 01:39:10.490
<v Speaker 1>and we're just

01:39:10.890 --> 01:39:12.570
<v Speaker 1>we're dead in the war at that rate.

01:39:12.570 --> 01:39:14.890
<v Speaker 3>So on node one, I just dropped all

01:39:14.890 --> 01:39:16.810
<v Speaker 3>communication on the cubelet port

01:39:17.455 --> 01:39:19.455
<v Speaker 3>so that Kubelet wouldn't be able to communicate

01:39:19.455 --> 01:39:20.175
<v Speaker 3>anymore.

01:39:20.495 --> 01:39:21.935
<v Speaker 3>That's

01:39:21.935 --> 01:39:23.935
<v Speaker 3>all I did there. And then on the

01:39:23.935 --> 01:39:26.335
<v Speaker 3>second node, the only thing I did was

01:39:26.335 --> 01:39:27.054
<v Speaker 3>I

01:39:27.695 --> 01:39:28.414
<v Speaker 3>took

01:39:28.815 --> 01:39:29.295
<v Speaker 3>the

01:39:30.180 --> 01:39:33.060
<v Speaker 3>kube config and turned its quality of service

01:39:33.060 --> 01:39:35.860
<v Speaker 3>down so it could only make one request

01:39:35.860 --> 01:39:36.820
<v Speaker 3>per second,

01:39:37.220 --> 01:39:38.580
<v Speaker 3>which means that

01:39:39.620 --> 01:39:41.380
<v Speaker 3>when you pull pods and stuff, it actually

01:39:41.380 --> 01:39:44.145
<v Speaker 3>communicates more than that. And it makes a

01:39:44.145 --> 01:39:46.625
<v Speaker 3>funny error because, like, the cubelets working and

01:39:46.625 --> 01:39:47.425
<v Speaker 3>communicating,

01:39:47.425 --> 01:39:49.185
<v Speaker 3>it's just doing it really, really slowly and

01:39:49.185 --> 01:39:51.345
<v Speaker 3>it causes weird errors. I thought that would

01:39:51.345 --> 01:39:53.665
<v Speaker 3>be fun, but we never got to that.

01:39:53.825 --> 01:39:53.985
<v Speaker 3>So

01:39:54.865 --> 01:39:56.545
<v Speaker 2>But unless it said in the logs rate

01:39:56.545 --> 01:39:58.705
<v Speaker 2>limited or something, I would never have found

01:39:58.705 --> 01:39:58.945
<v Speaker 2>that.

01:39:59.690 --> 01:40:02.010
<v Speaker 1>Did you use that? Can Was the traffic

01:40:02.010 --> 01:40:03.690
<v Speaker 1>control you used or something else to change

01:40:03.690 --> 01:40:05.050
<v Speaker 1>the quality of service?

01:40:05.770 --> 01:40:08.650
<v Speaker 3>I used Go's built in. You Go has

01:40:08.650 --> 01:40:11.210
<v Speaker 3>a built in rate limiter, so I use

01:40:11.210 --> 01:40:11.450
<v Speaker 3>that.

01:40:13.045 --> 01:40:15.125
<v Speaker 3>That that will do it. So it was

01:40:15.845 --> 01:40:18.645
<v Speaker 3>anyways, I was pretty happy with that one.

01:40:18.645 --> 01:40:20.165
<v Speaker 3>And then the very last thing that I

01:40:20.165 --> 01:40:22.244
<v Speaker 3>did is I went into the deployment

01:40:22.725 --> 01:40:23.685
<v Speaker 3>and

01:40:25.765 --> 01:40:27.685
<v Speaker 3>for your your Postgres database,

01:40:28.270 --> 01:40:30.110
<v Speaker 3>and I dropped all

01:40:31.150 --> 01:40:32.030
<v Speaker 3>capabilities

01:40:32.030 --> 01:40:33.950
<v Speaker 3>on the container, which it has to access

01:40:33.950 --> 01:40:35.949
<v Speaker 3>the file system and the network and stuff.

01:40:36.990 --> 01:40:39.390
<v Speaker 3>So it had no capability, so the database

01:40:39.390 --> 01:40:40.430
<v Speaker 3>would never run

01:40:41.105 --> 01:40:43.025
<v Speaker 3>because it didn't have it didn't have the

01:40:43.025 --> 01:40:45.745
<v Speaker 3>permissions too. So that was the last last

01:40:45.745 --> 01:40:46.385
<v Speaker 3>thing.

01:40:47.025 --> 01:40:48.145
<v Speaker 1>Well, damn, we both

01:40:48.625 --> 01:40:49.425
<v Speaker 1>I mean,

01:40:49.985 --> 01:40:52.145
<v Speaker 1>I know we got a recompiled kubelet and

01:40:52.145 --> 01:40:54.784
<v Speaker 1>a recompiled kubectl, but messing with networking is

01:40:54.784 --> 01:40:57.249
<v Speaker 1>just as evil. Well,

01:40:58.929 --> 01:40:59.250
<v Speaker 3>I

01:40:59.730 --> 01:41:01.010
<v Speaker 3>Russell, I

01:41:01.730 --> 01:41:04.050
<v Speaker 3>I appreciate your cluster. That was good.

01:41:04.370 --> 01:41:06.850
<v Speaker 2>Thank you very much. I was absolutely flummoxed

01:41:06.850 --> 01:41:07.889
<v Speaker 2>by yours. Yeah.

01:41:08.690 --> 01:41:09.890
<v Speaker 2>As I said, I would not have got

01:41:09.890 --> 01:41:11.855
<v Speaker 2>that quality of service thing. Well, I set

01:41:11.855 --> 01:41:13.855
<v Speaker 1>you up for failure with this broken BGP,

01:41:13.855 --> 01:41:15.775
<v Speaker 1>looks like. So Oh, yeah. Yeah. I'm definitely

01:41:15.775 --> 01:41:18.095
<v Speaker 2>gonna blame you. I'm definitely blaming you.

01:41:19.615 --> 01:41:22.575
<v Speaker 1>Alright. Well, thank you both for joining me.

01:41:22.575 --> 01:41:24.495
<v Speaker 1>Those are some really good breaks on both

01:41:24.495 --> 01:41:26.840
<v Speaker 1>sides there. Really cool. And I hope that

01:41:26.840 --> 01:41:28.280
<v Speaker 1>we were able to share some knowledge with

01:41:28.280 --> 01:41:30.200
<v Speaker 1>the audience of how to potentially debug some

01:41:30.200 --> 01:41:31.960
<v Speaker 1>stuff. And I will make sure that we

01:41:31.960 --> 01:41:33.239
<v Speaker 1>have some properly

01:41:33.400 --> 01:41:35.560
<v Speaker 1>working clusters before our next session.

01:41:36.920 --> 01:41:38.760
<v Speaker 1>All right. I wanna say thank you to

01:41:38.760 --> 01:41:40.875
<v Speaker 1>Teleport and Equinix Medal again. Thank you to

01:41:40.875 --> 01:41:42.635
<v Speaker 1>Russell. Thank you to Merrick. I hope you

01:41:42.635 --> 01:41:45.515
<v Speaker 1>all have a wonderful evening. Clustard is not

01:41:45.515 --> 01:41:47.435
<v Speaker 1>back next week, unfortunately, but we are back

01:41:47.435 --> 01:41:48.554
<v Speaker 1>the following week.

01:41:49.115 --> 01:41:51.275
<v Speaker 1>So I will see you all then. Yes.

01:41:52.155 --> 01:41:54.075
<v Speaker 1>Alright. Have a a great day. I'll speak

01:41:54.075 --> 01:41:55.355
<v Speaker 1>to you all soon. Thanks. Bye.

01:41:56.150 --> 01:41:56.630
<v Speaker 2>Bye.
