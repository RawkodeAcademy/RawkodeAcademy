WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: bd0eb789-f7cd-4331-a98b-46255726cff0
Created: 2025-04-29T19:33:54.893Z
Duration: 8440.089
Channels: 1

00:03:16.810 --> 00:03:17.530
<v Speaker 0>Hello,

00:03:17.610 --> 00:03:20.170
<v Speaker 0>and welcome to today's episode of Rawkode live.

00:03:20.170 --> 00:03:21.690
<v Speaker 0>I am your host Rawkode.

00:03:21.930 --> 00:03:25.530
<v Speaker 0>Today is our seventh episode of clustered,

00:03:25.530 --> 00:03:26.170
<v Speaker 0>a

00:03:26.569 --> 00:03:27.610
<v Speaker 0>show in which

00:03:28.090 --> 00:03:30.650
<v Speaker 0>me and I guess will attempt to fix

00:03:30.785 --> 00:03:33.425
<v Speaker 0>broken Kubernetes clusters. The catch is these clusters

00:03:33.425 --> 00:03:36.225
<v Speaker 0>are broken by members of our community

00:03:36.785 --> 00:03:39.425
<v Speaker 0>and sometimes they're nice to us and sometimes

00:03:39.425 --> 00:03:41.745
<v Speaker 0>they're downright evil. No idea what we're gonna

00:03:41.745 --> 00:03:44.545
<v Speaker 0>expect today, but hopefully it will be educational

00:03:44.690 --> 00:03:47.090
<v Speaker 0>and fun for all. Now before we get

00:03:47.090 --> 00:03:49.730
<v Speaker 0>started and I introduce today's guest, please remember

00:03:49.730 --> 00:03:51.570
<v Speaker 0>to subscribe to the YouTube channel and click

00:03:51.570 --> 00:03:53.330
<v Speaker 0>the bell. You will get alerts for every

00:03:53.330 --> 00:03:54.850
<v Speaker 0>episode of clustered as well as all the

00:03:54.850 --> 00:03:57.570
<v Speaker 0>other educational materials that I'm putting out there

00:03:57.570 --> 00:03:58.690
<v Speaker 0>in the cloud native landscape.

00:03:59.585 --> 00:04:01.505
<v Speaker 0>I would also encourage you to join the

00:04:01.505 --> 00:04:03.584
<v Speaker 0>Discord. We're doing something a little bit different

00:04:03.584 --> 00:04:05.425
<v Speaker 0>today. If you're on the Discord, there is

00:04:05.425 --> 00:04:07.905
<v Speaker 0>a Discord stage, a feature which launched yesterday.

00:04:07.905 --> 00:04:10.385
<v Speaker 0>People in there can communicate and discuss the

00:04:10.385 --> 00:04:11.905
<v Speaker 0>episode live over audio.

00:04:12.065 --> 00:04:14.690
<v Speaker 0>And if we get stuck during today's episode,

00:04:14.690 --> 00:04:16.130
<v Speaker 0>we are gonna go to the audience for

00:04:16.130 --> 00:04:18.529
<v Speaker 0>some help. So get in there, get involved.

00:04:18.930 --> 00:04:21.089
<v Speaker 0>Also, I'd love to thank my employer. They

00:04:21.089 --> 00:04:23.490
<v Speaker 0>allow me to spend time and energy and

00:04:23.490 --> 00:04:24.450
<v Speaker 0>compute resources

00:04:24.845 --> 00:04:27.245
<v Speaker 0>putting these educational materials together. So thank you

00:04:27.245 --> 00:04:29.245
<v Speaker 0>to Equinix Medal. If you wanna check out

00:04:29.245 --> 00:04:31.725
<v Speaker 0>Equinix Medal, you can use a coupon code,

00:04:31.725 --> 00:04:33.645
<v Speaker 0>which will get you $50, which is around

00:04:33.645 --> 00:04:35.325
<v Speaker 0>one hundred hours of compute.

00:04:35.405 --> 00:04:36.685
<v Speaker 0>That code is Rawkode9.

00:04:37.770 --> 00:04:40.090
<v Speaker 0>Awesome. That is the housekeeping done. Now, I

00:04:40.090 --> 00:04:43.290
<v Speaker 0>can introduce today's wonderful guest. I am joined

00:04:43.290 --> 00:04:46.490
<v Speaker 0>by Guinevere Zinger. Hi, Guinevere. How are you?

00:04:46.889 --> 00:04:49.850
<v Speaker 1>Hey. Good morning from Seattle.

00:04:51.705 --> 00:04:54.264
<v Speaker 1>I'm doing well today. Thanks. Thanks for having

00:04:54.264 --> 00:04:56.265
<v Speaker 1>me. How are you? Yes.

00:04:57.225 --> 00:04:59.865
<v Speaker 0>I'm very well, but as always, I'm clustered,

00:04:59.865 --> 00:05:03.065
<v Speaker 0>slightly scared, worried, paranoid, and excited all in

00:05:03.065 --> 00:05:04.264
<v Speaker 0>one rolled up into a ball.

00:05:05.330 --> 00:05:07.170
<v Speaker 0>So you're I don't think you need an

00:05:07.170 --> 00:05:08.850
<v Speaker 0>introduction. Everyone is familiar with you in the

00:05:08.850 --> 00:05:10.530
<v Speaker 0>Kubernetes community. Why

00:05:11.810 --> 00:05:14.450
<v Speaker 0>don't you give us the well, give us

00:05:14.450 --> 00:05:16.050
<v Speaker 0>the TLDR and anything else that you wanna

00:05:16.050 --> 00:05:17.490
<v Speaker 0>share, and then we'll move on and get

00:05:17.490 --> 00:05:18.770
<v Speaker 0>started on today's clusters.

00:05:20.035 --> 00:05:22.355
<v Speaker 1>I am the loud, bouncy one that asks

00:05:22.355 --> 00:05:23.555
<v Speaker 1>all the questions.

00:05:26.275 --> 00:05:26.915
<v Speaker 1>So

00:05:27.395 --> 00:05:27.794
<v Speaker 1>I'm

00:05:28.435 --> 00:05:30.675
<v Speaker 1>I don't know everything about Kubernetes.

00:05:30.835 --> 00:05:33.155
<v Speaker 1>Some people think I do. I

00:05:33.475 --> 00:05:35.475
<v Speaker 1>I

00:05:35.540 --> 00:05:37.940
<v Speaker 1>I usually know who to ask for help.

00:05:38.740 --> 00:05:42.180
<v Speaker 1>I consider that my secret power, and I

00:05:42.180 --> 00:05:45.300
<v Speaker 1>just I'm here to share that it's okay

00:05:45.300 --> 00:05:48.565
<v Speaker 1>to not know everything and learn together and

00:05:48.565 --> 00:05:49.445
<v Speaker 1>find out.

00:05:50.005 --> 00:05:50.565
<v Speaker 1>So,

00:05:51.365 --> 00:05:52.245
<v Speaker 1>that's

00:05:52.245 --> 00:05:54.005
<v Speaker 1>that's I think. That's me.

00:05:54.485 --> 00:05:56.325
<v Speaker 1>Yeah. I live at Seattle,

00:05:56.485 --> 00:05:58.085
<v Speaker 1>which is beautiful

00:05:58.085 --> 00:06:01.280
<v Speaker 1>right now. We have awesome spring weather, mountains

00:06:01.280 --> 00:06:03.920
<v Speaker 1>on three sides when we all can. Again,

00:06:03.920 --> 00:06:05.120
<v Speaker 1>you should all come visit.

00:06:06.560 --> 00:06:07.360
<v Speaker 1>It's

00:06:08.400 --> 00:06:10.640
<v Speaker 1>I yeah. I have a kiddo.

00:06:10.880 --> 00:06:13.040
<v Speaker 1>He's maybe going to poke in his head

00:06:13.040 --> 00:06:13.600
<v Speaker 1>at some point.

00:06:14.355 --> 00:06:15.315
<v Speaker 1>And,

00:06:16.355 --> 00:06:18.675
<v Speaker 1>yeah, I'm really excited. I've I've not watched

00:06:18.675 --> 00:06:20.515
<v Speaker 1>one of these before, so

00:06:20.755 --> 00:06:21.555
<v Speaker 1>I'm

00:06:21.635 --> 00:06:23.795
<v Speaker 1>I'm I'm gonna be like, wait. How does

00:06:23.795 --> 00:06:24.515
<v Speaker 1>this work?

00:06:24.755 --> 00:06:25.395
<v Speaker 1>And

00:06:26.160 --> 00:06:28.160
<v Speaker 1>yeah. I'm I'm I'm looking at this and

00:06:28.160 --> 00:06:30.640
<v Speaker 1>I'm I'm really excited. I love pair programming,

00:06:30.640 --> 00:06:33.440
<v Speaker 1>so pair debugging is my next favorite thing.

00:06:34.080 --> 00:06:34.560
<v Speaker 0>Well,

00:06:35.200 --> 00:06:36.240
<v Speaker 0>yeah. We'll be We'll

00:06:36.880 --> 00:06:38.480
<v Speaker 0>be doing a lot of debugging. I'm pretty

00:06:38.480 --> 00:06:39.040
<v Speaker 0>sure.

00:06:39.360 --> 00:06:41.120
<v Speaker 0>Like I said, we have two broken clusters.

00:06:41.120 --> 00:06:42.080
<v Speaker 0>We're gonna

00:06:42.375 --> 00:06:44.855
<v Speaker 0>use teleport. We're gonna pair in the same

00:06:44.855 --> 00:06:47.015
<v Speaker 0>session. We're gonna work out what's wrong and

00:06:47.015 --> 00:06:47.895
<v Speaker 0>hopefully

00:06:47.895 --> 00:06:49.015
<v Speaker 0>we're gonna fix it.

00:06:49.335 --> 00:06:51.175
<v Speaker 0>I love that you said, know, you wanna

00:06:51.175 --> 00:06:52.375
<v Speaker 0>show people that you don't have to know

00:06:52.375 --> 00:06:53.095
<v Speaker 0>everything.

00:06:53.175 --> 00:06:54.775
<v Speaker 0>I feel like I've done a sterling job

00:06:54.775 --> 00:06:56.695
<v Speaker 0>of that in the first six episodes. I

00:06:56.695 --> 00:06:57.175
<v Speaker 0>have

00:06:58.050 --> 00:07:00.370
<v Speaker 0>I've definitely shown that you know, you can

00:07:00.370 --> 00:07:01.970
<v Speaker 0>work in this space for a long time

00:07:01.970 --> 00:07:04.610
<v Speaker 0>and work with Kubernetes daily. There's still things

00:07:04.610 --> 00:07:06.690
<v Speaker 0>that catch me every single time and I

00:07:06.690 --> 00:07:08.290
<v Speaker 0>think that's true for everybody. Right? We wanna

00:07:08.290 --> 00:07:10.130
<v Speaker 0>set new norms that you don't know everything

00:07:10.130 --> 00:07:12.450
<v Speaker 0>and then it's just about experience and learning

00:07:12.450 --> 00:07:12.850
<v Speaker 0>together.

00:07:13.455 --> 00:07:14.975
<v Speaker 0>It's awesome. Yeah.

00:07:15.935 --> 00:07:18.735
<v Speaker 1>Yeah. I mean, what was it? Yesterday? No.

00:07:18.735 --> 00:07:21.295
<v Speaker 1>Two days ago, I learned that the default

00:07:21.295 --> 00:07:24.415
<v Speaker 1>back off limit on jobs is six.

00:07:25.630 --> 00:07:27.389
<v Speaker 1>I learned that the hard way.

00:07:28.349 --> 00:07:30.910
<v Speaker 1>I kept waiting for my job to fail

00:07:31.069 --> 00:07:32.510
<v Speaker 1>and it didn't.

00:07:34.190 --> 00:07:35.710
<v Speaker 0>Well, there you go. Today, I've learned that

00:07:35.710 --> 00:07:38.590
<v Speaker 0>as well. So Right? We've already started off

00:07:38.590 --> 00:07:40.190
<v Speaker 0>on the right foot, which is exactly what

00:07:40.190 --> 00:07:40.509
<v Speaker 0>we want.

00:07:41.965 --> 00:07:42.765
<v Speaker 0>Alright.

00:07:42.765 --> 00:07:44.845
<v Speaker 0>Let's well you've not seen this before so

00:07:44.845 --> 00:07:45.565
<v Speaker 0>like,

00:07:45.725 --> 00:07:47.245
<v Speaker 0>I mean you don't know what all the

00:07:47.245 --> 00:07:48.925
<v Speaker 0>other breaks that people have been quite evil

00:07:48.925 --> 00:07:50.845
<v Speaker 0>about. So we're gonna we're really gonna see

00:07:50.845 --> 00:07:53.245
<v Speaker 0>today whether these people like us or not.

00:07:53.245 --> 00:07:55.645
<v Speaker 0>So we should introduce our first broken cluster.

00:07:56.390 --> 00:07:59.190
<v Speaker 0>So we're gonna start with cluster 14 today,

00:07:59.190 --> 00:08:00.950
<v Speaker 0>which is broken by Phil,

00:08:00.950 --> 00:08:02.870
<v Speaker 0>Phil Weltz, who is a member of the

00:08:02.870 --> 00:08:04.710
<v Speaker 0>Discord community, active on Twitter,

00:08:05.510 --> 00:08:05.910
<v Speaker 0>and

00:08:06.470 --> 00:08:08.710
<v Speaker 0>as European. So we offered to do this

00:08:08.710 --> 00:08:10.115
<v Speaker 0>cluster first so that you can spend a

00:08:10.115 --> 00:08:11.555
<v Speaker 0>little time with us and hopefully give us

00:08:11.555 --> 00:08:13.315
<v Speaker 0>any advice if required.

00:08:13.875 --> 00:08:15.795
<v Speaker 0>Well, when required, let's just put that out

00:08:15.795 --> 00:08:16.675
<v Speaker 0>there already.

00:08:17.235 --> 00:08:20.435
<v Speaker 0>Now, let me pop open my screen share.

00:08:21.155 --> 00:08:22.195
<v Speaker 0>We

00:08:22.275 --> 00:08:24.699
<v Speaker 0>are now floating bubbles. We have our teleport.

00:08:24.699 --> 00:08:26.780
<v Speaker 0>I'm gonna jump on to the control plane

00:08:26.780 --> 00:08:29.819
<v Speaker 0>node of cluster 14. I will zoom in

00:08:29.819 --> 00:08:31.740
<v Speaker 0>just a smidgen and if you can just

00:08:31.740 --> 00:08:33.740
<v Speaker 0>join that and type echo hello or something

00:08:33.740 --> 00:08:35.740
<v Speaker 0>so we know your web is and we

00:08:35.740 --> 00:08:36.700
<v Speaker 0>will get started.

00:08:38.084 --> 00:08:40.645
<v Speaker 0>As always audience, please feel free to leave

00:08:40.645 --> 00:08:43.044
<v Speaker 0>your YouTube comments for anything that we missed,

00:08:43.044 --> 00:08:44.565
<v Speaker 0>things you want us to check. If you're

00:08:44.565 --> 00:08:45.685
<v Speaker 0>in the Discord

00:08:45.845 --> 00:08:46.725
<v Speaker 0>stage,

00:08:46.725 --> 00:08:48.885
<v Speaker 0>we will try and get you involved as

00:08:48.885 --> 00:08:50.404
<v Speaker 0>well as we get started.

00:08:50.645 --> 00:08:50.885
<v Speaker 0>So,

00:08:52.720 --> 00:08:54.320
<v Speaker 0>how is your session looking?

00:08:55.440 --> 00:08:57.600
<v Speaker 1>I might not have joined your session.

00:08:58.480 --> 00:09:01.040
<v Speaker 0>Let's

00:09:01.040 --> 00:09:03.440
<v Speaker 1>see. Let me disconnect

00:09:03.440 --> 00:09:04.320
<v Speaker 1>active

00:09:04.320 --> 00:09:05.600
<v Speaker 1>sessions.

00:09:06.295 --> 00:09:07.495
<v Speaker 1>Options.

00:09:07.575 --> 00:09:10.215
<v Speaker 1>Root session is in progress.

00:09:10.215 --> 00:09:11.095
<v Speaker 1>I'll

00:09:11.095 --> 00:09:12.135
<v Speaker 1>join yours.

00:09:12.455 --> 00:09:13.975
<v Speaker 1>I joined my own session.

00:09:15.495 --> 00:09:16.695
<v Speaker 1>That was smart of me.

00:09:18.150 --> 00:09:20.470
<v Speaker 0>Right. Well, Fell assures us to that he

00:09:20.470 --> 00:09:23.190
<v Speaker 0>has treated the cluster kindly.

00:09:23.190 --> 00:09:25.190
<v Speaker 0>We are gonna find out.

00:09:26.630 --> 00:09:28.630
<v Speaker 0>What normally what I would do first here

00:09:28.630 --> 00:09:30.524
<v Speaker 0>is just kinda get a set up. Well

00:09:30.524 --> 00:09:32.365
<v Speaker 0>first I always do my alias otherwise I'm

00:09:32.365 --> 00:09:34.365
<v Speaker 0>gonna type that 14,000 times and get that

00:09:34.365 --> 00:09:36.444
<v Speaker 0>wrong. The other thing I wanna do is

00:09:37.725 --> 00:09:38.444
<v Speaker 1>Sorry.

00:09:43.190 --> 00:09:44.950
<v Speaker 0>So that we don't have to specify dash

00:09:44.950 --> 00:09:47.270
<v Speaker 0>dash kube config every fourteen seconds, I will

00:09:47.270 --> 00:09:49.350
<v Speaker 0>just export that too. So now, in theory,

00:09:49.350 --> 00:09:51.190
<v Speaker 0>we can run k get notes. I'll let

00:09:51.190 --> 00:09:52.710
<v Speaker 0>you jump in and get that done, and

00:09:52.710 --> 00:09:54.310
<v Speaker 0>we'll see if Fella's kind enough to leave

00:09:54.310 --> 00:09:55.430
<v Speaker 0>us an API server.

00:09:56.705 --> 00:09:57.505
<v Speaker 0>That

00:09:57.745 --> 00:09:59.105
<v Speaker 0>rarely ever happens.

00:10:00.945 --> 00:10:03.745
<v Speaker 1>Maybe, you know, maybe this cluster isn't broken

00:10:03.745 --> 00:10:05.425
<v Speaker 1>and it's an April fool's joke.

00:10:10.370 --> 00:10:12.610
<v Speaker 0>We've broken something, but we will so do

00:10:12.610 --> 00:10:14.610
<v Speaker 0>our best to give this cluster a little

00:10:14.610 --> 00:10:15.970
<v Speaker 0>bit of diligence and see if we can

00:10:15.970 --> 00:10:17.410
<v Speaker 0>find something that is wrong.

00:10:18.370 --> 00:10:21.330
<v Speaker 0>Now because you've not seen this before, I'll

00:10:21.330 --> 00:10:22.850
<v Speaker 0>just kinda run through the objectives.

00:10:24.985 --> 00:10:27.785
<v Speaker 0>Normally, in our default namespace, we would have

00:10:28.025 --> 00:10:29.385
<v Speaker 0>a couple of workloads.

00:10:29.625 --> 00:10:31.545
<v Speaker 0>An application that has a little video of

00:10:31.545 --> 00:10:33.225
<v Speaker 0>me pointing to my watch going we better

00:10:33.225 --> 00:10:35.145
<v Speaker 0>fix this. It would appear we don't have

00:10:35.145 --> 00:10:35.865
<v Speaker 0>said workload.

00:10:38.150 --> 00:10:39.670
<v Speaker 0>So we'll need to work that one out

00:10:39.670 --> 00:10:41.830
<v Speaker 0>first. Although I'm curious about the Postgres

00:10:42.070 --> 00:10:42.950
<v Speaker 0>zero.

00:10:43.270 --> 00:10:44.390
<v Speaker 0>So it looks like we do have the

00:10:44.390 --> 00:10:46.230
<v Speaker 0>database, but we don't have the web application.

00:10:48.390 --> 00:10:50.150
<v Speaker 0>And normally, I'd want to deploy an upgrade

00:10:50.150 --> 00:10:52.150
<v Speaker 0>to the application, which schedules a new shiny

00:10:52.150 --> 00:10:54.074
<v Speaker 0>video of me dancing, but we're not in

00:10:54.074 --> 00:10:55.675
<v Speaker 0>a position to do that yet.

00:10:57.195 --> 00:10:59.355
<v Speaker 1>Let's see if we have pods hiding in

00:10:59.355 --> 00:11:00.315
<v Speaker 1>other namespaces,

00:11:00.315 --> 00:11:01.915
<v Speaker 1>though. Yeah. Go for it.

00:11:09.029 --> 00:11:09.910
<v Speaker 1>Oopsies.

00:11:10.310 --> 00:11:12.070
<v Speaker 1>I could type in front of people. Oh,

00:11:12.070 --> 00:11:13.910
<v Speaker 1>yeah. Did I fail to mention that?

00:11:14.390 --> 00:11:16.390
<v Speaker 1>So

00:11:16.870 --> 00:11:17.750
<v Speaker 1>there's a

00:11:18.070 --> 00:11:19.750
<v Speaker 1>bunch more stuff.

00:11:23.625 --> 00:11:24.825
<v Speaker 0>Yeah.

00:11:24.825 --> 00:11:26.185
<v Speaker 0>It looks

00:11:28.505 --> 00:11:30.584
<v Speaker 1>Let's see. One of the staff pods Oh,

00:11:30.584 --> 00:11:31.225
<v Speaker 1>no.

00:11:31.545 --> 00:11:33.144
<v Speaker 0>Appears to be hanging.

00:11:35.640 --> 00:11:37.080
<v Speaker 0>I'm just gonna run that again because my

00:11:37.080 --> 00:11:40.040
<v Speaker 0>scroll seems to there we go. Scrolls running.

00:11:40.040 --> 00:11:40.840
<v Speaker 1>Good.

00:11:40.920 --> 00:11:42.520
<v Speaker 1>Yeah. Okay. Awesome.

00:11:45.480 --> 00:11:47.480
<v Speaker 1>So there's a Cilium operator

00:11:47.865 --> 00:11:50.425
<v Speaker 1>that's been going on that is in a

00:11:50.425 --> 00:11:51.705
<v Speaker 1>Cilium namespace.

00:11:51.705 --> 00:11:53.785
<v Speaker 1>I don't even know what Cilium is, so

00:11:53.785 --> 00:11:54.745
<v Speaker 1>that's cool.

00:11:56.105 --> 00:11:58.505
<v Speaker 0>Cilium is the CNI plugin that we use

00:11:58.505 --> 00:11:59.385
<v Speaker 0>on these clusters.

00:12:00.690 --> 00:12:03.970
<v Speaker 2>Awesome. So and then, Qiverno,

00:12:04.210 --> 00:12:05.650
<v Speaker 2>also of interest.

00:12:06.210 --> 00:12:08.690
<v Speaker 2>That one looks like it was installed

00:12:10.290 --> 00:12:13.010
<v Speaker 2>eighteen hours ago, so that's different. I don't

00:12:13.010 --> 00:12:14.930
<v Speaker 2>know. Again, I don't know what that is.

00:12:17.005 --> 00:12:18.685
<v Speaker 2>And and

00:12:19.565 --> 00:12:21.805
<v Speaker 2>then we have a hanging

00:12:22.125 --> 00:12:24.605
<v Speaker 2>two minutes thirty six seconds.

00:12:24.845 --> 00:12:25.565
<v Speaker 2>Okay.

00:12:26.365 --> 00:12:29.005
<v Speaker 2>Also, of the operators had some restarts.

00:12:29.590 --> 00:12:32.470
<v Speaker 2>Oh gosh. The CSI plugin has been restarted

00:12:32.470 --> 00:12:33.830
<v Speaker 2>17 times,

00:12:34.710 --> 00:12:36.630
<v Speaker 2>14 times. Okay.

00:12:37.270 --> 00:12:38.870
<v Speaker 2>There might be some clues there.

00:12:40.150 --> 00:12:41.350
<v Speaker 0>Yeah. Definitely.

00:12:42.790 --> 00:12:45.245
<v Speaker 0>I think we have to follow, I guess

00:12:45.245 --> 00:12:46.925
<v Speaker 0>what if a bread crumb. Right? The only

00:12:46.925 --> 00:12:49.084
<v Speaker 0>container in this entire cluster which is not

00:12:49.084 --> 00:12:52.765
<v Speaker 0>currently running is our Rookseth detect version

00:12:53.485 --> 00:12:55.565
<v Speaker 1>is stuck on a in a container step.

00:12:55.565 --> 00:12:57.005
<v Speaker 0>So I reckon we're gonna have to get

00:12:57.005 --> 00:12:58.365
<v Speaker 0>some logs out of there.

00:12:59.190 --> 00:13:01.830
<v Speaker 0>The Kivernal that you're not familiar with is

00:13:01.830 --> 00:13:02.550
<v Speaker 0>a

00:13:03.590 --> 00:13:04.790
<v Speaker 0>policy agent

00:13:04.790 --> 00:13:07.590
<v Speaker 0>which probably has some admission controllers in the

00:13:07.590 --> 00:13:08.950
<v Speaker 0>system that we wanna take a look at

00:13:08.950 --> 00:13:11.030
<v Speaker 0>later. That definitely is new. I did not

00:13:11.030 --> 00:13:12.550
<v Speaker 0>deploy Kivernal to these clusters.

00:13:13.235 --> 00:13:15.875
<v Speaker 1>So I think we we pointed that out.

00:13:16.995 --> 00:13:19.634
<v Speaker 1>Qyvernal sounds like the main character in a

00:13:19.634 --> 00:13:20.995
<v Speaker 1>high fantasy novel.

00:13:21.795 --> 00:13:24.274
<v Speaker 1>Like, you know, winter is coming,

00:13:24.595 --> 00:13:25.875
<v Speaker 1>but where Qyvernal's

00:13:25.875 --> 00:13:28.115
<v Speaker 1>curse? I I

00:13:28.570 --> 00:13:30.810
<v Speaker 1>don't I actually have never

00:13:31.210 --> 00:13:32.410
<v Speaker 1>I have avoided

00:13:32.490 --> 00:13:33.690
<v Speaker 1>Game of Thrones

00:13:34.410 --> 00:13:36.570
<v Speaker 1>for its entire existence, so maybe I shouldn't

00:13:36.570 --> 00:13:37.690
<v Speaker 1>make jokes about it.

00:13:39.529 --> 00:13:41.675
<v Speaker 1>Let's see. Okay. So

00:13:41.915 --> 00:13:43.835
<v Speaker 1>where is my prompt? I think I lost

00:13:43.835 --> 00:13:45.755
<v Speaker 1>my prompt somehow. Nope. There it is. I

00:13:45.755 --> 00:13:47.595
<v Speaker 1>had a scroll. Excellent.

00:13:47.675 --> 00:13:48.795
<v Speaker 1>Let's

00:13:48.795 --> 00:13:50.555
<v Speaker 1>get some logs out of there.

00:13:54.699 --> 00:13:57.259
<v Speaker 1>K. Log. Is it log or logs? I

00:13:57.259 --> 00:13:59.579
<v Speaker 1>always forget. I think it's logs. I tend

00:13:59.579 --> 00:14:00.620
<v Speaker 0>to use logs.

00:14:01.100 --> 00:14:02.380
<v Speaker 0>But you'll need to specify the names.

00:14:10.785 --> 00:14:11.824
<v Speaker 1>Okay.

00:14:11.824 --> 00:14:14.625
<v Speaker 1>It's waiting to start pod initializing.

00:14:14.625 --> 00:14:16.144
<v Speaker 1>What happens if we, like

00:14:17.345 --> 00:14:19.024
<v Speaker 0>So if we wanna get the edit container

00:14:19.024 --> 00:14:20.704
<v Speaker 0>log, we'll need to provide the name of

00:14:20.704 --> 00:14:22.625
<v Speaker 0>the container. So we're probably gonna have to

00:14:22.704 --> 00:14:24.639
<v Speaker 2>Oh, wait. Describe it and see what's actually

00:14:24.639 --> 00:14:26.320
<v Speaker 0>going on in that back,

00:14:26.800 --> 00:14:27.680
<v Speaker 0>I think.

00:14:29.120 --> 00:14:29.920
<v Speaker 1>Okay.

00:14:30.880 --> 00:14:31.920
<v Speaker 1>Script

00:14:31.920 --> 00:14:32.560
<v Speaker 1>pod.

00:14:42.405 --> 00:14:43.765
<v Speaker 1>Cool.

00:14:44.485 --> 00:14:47.525
<v Speaker 1>Failed to set up network for sandbox.

00:14:47.525 --> 00:14:49.685
<v Speaker 1>Failed to find plug in cilium c and

00:14:49.685 --> 00:14:51.685
<v Speaker 1>I in path

00:14:51.110 --> 00:14:53.350
<v Speaker 1>up CNI bin, and there were a bunch

00:14:53.350 --> 00:14:55.589
<v Speaker 1>of restarts on that Cilium

00:14:56.149 --> 00:14:57.110
<v Speaker 1>container.

00:14:59.670 --> 00:15:01.430
<v Speaker 0>Yeah. That's weird. Why would

00:15:06.865 --> 00:15:09.505
<v Speaker 0>I'm not sure why our CSI

00:15:11.905 --> 00:15:12.865
<v Speaker 0>plug in

00:15:13.185 --> 00:15:13.665
<v Speaker 0>is

00:15:15.505 --> 00:15:17.665
<v Speaker 1>It's a CNI plug in.

00:15:18.470 --> 00:15:20.070
<v Speaker 1>They don't know what they have to Alright.

00:15:20.070 --> 00:15:21.590
<v Speaker 0>Okay. So the CNI can't send out the

00:15:21.590 --> 00:15:23.430
<v Speaker 0>sandbox for this. Okay.

00:15:24.950 --> 00:15:27.670
<v Speaker 0>Okay. So I think they've done I think

00:15:27.670 --> 00:15:30.550
<v Speaker 0>Phil has done something to our CNI. I'm

00:15:30.550 --> 00:15:32.230
<v Speaker 0>curious. How brave are you feeling?

00:15:34.375 --> 00:15:35.815
<v Speaker 1>I am terrified,

00:15:36.134 --> 00:15:40.055
<v Speaker 1>but that doesn't necessarily contradict the bravery. Do

00:15:40.055 --> 00:15:42.214
<v Speaker 1>we want to just like kick a pod?

00:15:42.214 --> 00:15:43.975
<v Speaker 1>Like kill it? Well, yeah. That's what I'm

00:15:43.975 --> 00:15:45.175
<v Speaker 0>thinking is I I

00:15:45.860 --> 00:15:47.540
<v Speaker 0>in order to confirm that this is not

00:15:47.540 --> 00:15:49.060
<v Speaker 0>related to Rawkode and Seth and this is

00:15:49.060 --> 00:15:51.060
<v Speaker 0>a CNI thing, I've got a funny suspicion

00:15:51.060 --> 00:15:53.220
<v Speaker 0>that if we kill any other pod, it

00:15:53.220 --> 00:15:55.700
<v Speaker 0>will also fail to star. It's kind of

00:15:55.700 --> 00:15:57.060
<v Speaker 0>what I'm thinking.

00:15:58.180 --> 00:15:59.140
<v Speaker 1>Interesting.

00:15:59.964 --> 00:16:03.245
<v Speaker 1>Yeah. Sure. Let's see. We have detect version.

00:16:03.245 --> 00:16:06.045
<v Speaker 1>That one is, like it's literally just detecting

00:16:06.045 --> 00:16:06.925
<v Speaker 1>a version.

00:16:09.805 --> 00:16:11.805
<v Speaker 1>Let's let's not kill the operator one.

00:16:13.300 --> 00:16:16.260
<v Speaker 0>What what what what's harmless. Which one do

00:16:16.260 --> 00:16:17.779
<v Speaker 1>you want which one do you wanna boot

00:16:17.779 --> 00:16:18.339
<v Speaker 1>out?

00:16:19.060 --> 00:16:20.660
<v Speaker 0>Let's kill one of the metal l b

00:16:20.660 --> 00:16:22.339
<v Speaker 0>speakers because we're not even using

00:16:23.300 --> 00:16:24.260
<v Speaker 0>load balancing. So

00:16:25.060 --> 00:16:27.300
<v Speaker 0>what is the what was that namespace called?

00:16:27.525 --> 00:16:29.685
<v Speaker 0>Metal l b Yeah. System.

00:16:30.645 --> 00:16:31.285
<v Speaker 0>Oh,

00:16:31.525 --> 00:16:33.045
<v Speaker 0>system delete

00:16:33.365 --> 00:16:33.925
<v Speaker 0>pod.

00:16:36.325 --> 00:16:37.205
<v Speaker 0>And then

00:16:42.600 --> 00:16:44.600
<v Speaker 0>Oh, it started just fine. It started.

00:16:45.720 --> 00:16:46.440
<v Speaker 1>Well,

00:16:46.600 --> 00:16:48.279
<v Speaker 1>let's take let's take a look at the

00:16:48.279 --> 00:16:49.000
<v Speaker 1>logs.

00:16:53.000 --> 00:16:53.320
<v Speaker 0>Yeah.

00:16:56.465 --> 00:16:59.105
<v Speaker 1>Sorry. I I guess I could type too.

00:17:00.065 --> 00:17:01.825
<v Speaker 0>Alright. We'll we'll we'll take our fair share

00:17:01.825 --> 00:17:02.705
<v Speaker 0>of typing.

00:17:03.825 --> 00:17:05.665
<v Speaker 0>That's that's all fine. No. Is that that

00:17:05.665 --> 00:17:07.345
<v Speaker 0>p g p Oh, yeah. No. That's true.

00:17:07.345 --> 00:17:09.505
<v Speaker 0>Yeah. It's okay. We can ignore that. That's

00:17:09.505 --> 00:17:10.065
<v Speaker 0>echoic thing.

00:17:11.849 --> 00:17:12.970
<v Speaker 1>So maybe

00:17:17.290 --> 00:17:19.210
<v Speaker 1>so it's the init container.

00:17:19.210 --> 00:17:19.450
<v Speaker 1>Right?

00:17:23.355 --> 00:17:25.835
<v Speaker 0>So it could be something Let me No.

00:17:25.835 --> 00:17:27.194
<v Speaker 0>On you go. What's your what's your train

00:17:27.194 --> 00:17:29.035
<v Speaker 0>of thought there? Let's take a look at

00:17:29.035 --> 00:17:30.874
<v Speaker 1>let's take a look at one of those,

00:17:31.035 --> 00:17:33.274
<v Speaker 1>like so we have the

00:17:33.515 --> 00:17:36.750
<v Speaker 1>CSI plug in. Wait. What's? Okay. So first

00:17:36.750 --> 00:17:38.910
<v Speaker 1>of all, what's the difference between CSI and

00:17:38.910 --> 00:17:39.950
<v Speaker 1>CNI?

00:17:40.190 --> 00:17:42.350
<v Speaker 1>Let's let's talk about it. There's too many

00:17:42.350 --> 00:17:43.550
<v Speaker 1>acronyms here.

00:17:44.910 --> 00:17:47.070
<v Speaker 1>Container system interface?

00:17:47.150 --> 00:17:48.430
<v Speaker 0>A storage. Storage

00:17:49.310 --> 00:17:50.110
<v Speaker 1>interface.

00:17:50.110 --> 00:17:53.904
<v Speaker 1>Okay. Thank you. And then container network interface.

00:17:53.905 --> 00:17:57.424
<v Speaker 1>Right? Yes. Correct. Okay. Those ones have seen

00:17:57.424 --> 00:17:59.105
<v Speaker 1>a bunch of restarts,

00:17:59.665 --> 00:18:00.384
<v Speaker 1>but

00:18:02.865 --> 00:18:05.265
<v Speaker 1>they're in the same but we might wanna

00:18:05.265 --> 00:18:07.070
<v Speaker 1>we might wanna describe one of those and

00:18:07.070 --> 00:18:09.230
<v Speaker 1>see why they got restarted so many times

00:18:09.390 --> 00:18:12.350
<v Speaker 1>because that might be related. So the Rawkode

00:18:12.350 --> 00:18:13.710
<v Speaker 1>namespace

00:18:13.710 --> 00:18:16.030
<v Speaker 1>seems to be having some trouble. Maybe there's

00:18:16.030 --> 00:18:17.789
<v Speaker 1>something messed up in the namespace.

00:18:18.350 --> 00:18:20.270
<v Speaker 1>The other thing that we might look at

00:18:20.270 --> 00:18:21.630
<v Speaker 1>is the operator logs.

00:18:23.715 --> 00:18:25.875
<v Speaker 0>Okay. So yeah. You're right. If we'll

00:18:26.755 --> 00:18:27.554
<v Speaker 0>the

00:18:28.275 --> 00:18:31.315
<v Speaker 0>14 restarts, five restarts, 17 restarts. Yeah. Maybe

00:18:31.315 --> 00:18:32.915
<v Speaker 0>there's something that is confined

00:18:33.315 --> 00:18:33.795
<v Speaker 0>this

00:18:34.195 --> 00:18:35.395
<v Speaker 1>Can we get the

00:18:35.715 --> 00:18:38.210
<v Speaker 1>previous logs for that pod?

00:18:39.650 --> 00:18:42.050
<v Speaker 0>We could. Although, we just had a spanner

00:18:42.050 --> 00:18:44.850
<v Speaker 0>thrown into our our hypothesis. Philip has commented

00:18:44.850 --> 00:18:47.410
<v Speaker 0>saying that he has not touched the CSI.

00:18:48.050 --> 00:18:48.770
<v Speaker 1>Okay.

00:18:51.095 --> 00:18:54.215
<v Speaker 0>Good. This is potentially just a red herring.

00:18:54.775 --> 00:18:56.135
<v Speaker 1>Alright. Alright.

00:18:57.895 --> 00:18:59.015
<v Speaker 0>Okay. I'm gonna

00:18:59.655 --> 00:19:02.549
<v Speaker 0>so there there should be a workload running

00:19:02.549 --> 00:19:05.269
<v Speaker 0>on our default namespace which hasn't Yes. I'm

00:19:05.269 --> 00:19:06.469
<v Speaker 0>gonna redeploy it.

00:19:07.669 --> 00:19:09.190
<v Speaker 0>Yep. Just to see if it works.

00:19:09.750 --> 00:19:11.269
<v Speaker 0>I'm gonna do that from my own machine

00:19:11.269 --> 00:19:13.110
<v Speaker 0>because that's just where the manifests are,

00:19:14.085 --> 00:19:15.445
<v Speaker 0>which I know you won't be able to

00:19:15.445 --> 00:19:17.124
<v Speaker 0>see, but I'll do

00:19:17.684 --> 00:19:18.565
<v Speaker 0>just

00:19:18.645 --> 00:19:19.604
<v Speaker 0>workload

00:19:23.765 --> 00:19:25.684
<v Speaker 0>and pop back over here.

00:19:28.245 --> 00:19:28.804
<v Speaker 0>Uh-huh.

00:19:31.130 --> 00:19:32.970
<v Speaker 0>So that was all unchanged.

00:19:36.330 --> 00:19:37.850
<v Speaker 0>I really hope I'm working on a rate

00:19:37.850 --> 00:19:38.489
<v Speaker 0>cluster.

00:19:39.450 --> 00:19:40.409
<v Speaker 0>But

00:19:40.650 --> 00:19:41.770
<v Speaker 0>we can't see anything.

00:19:43.625 --> 00:19:45.544
<v Speaker 0>So if we don't see pods,

00:19:46.345 --> 00:19:47.784
<v Speaker 0>I do expect to see

00:19:49.465 --> 00:19:50.585
<v Speaker 0>Alright.

00:19:50.585 --> 00:19:51.304
<v Speaker 0>We

00:19:51.385 --> 00:19:53.304
<v Speaker 0>have a deployment but we don't have pods.

00:19:57.100 --> 00:19:58.220
<v Speaker 1>Interesting.

00:19:59.100 --> 00:20:01.420
<v Speaker 0>I guess Yeah. Let's describe that deployment.

00:20:07.505 --> 00:20:09.665
<v Speaker 1>Let's

00:20:09.665 --> 00:20:10.305
<v Speaker 1>see.

00:20:11.105 --> 00:20:11.825
<v Speaker 1>Oh,

00:20:12.145 --> 00:20:14.705
<v Speaker 1>okay. Rolling update strategy,

00:20:14.705 --> 00:20:15.905
<v Speaker 1>25%

00:20:15.905 --> 00:20:17.345
<v Speaker 1>max unavailable.

00:20:19.519 --> 00:20:22.239
<v Speaker 1>Available false. Minimum replicas

00:20:22.399 --> 00:20:23.440
<v Speaker 1>unavailable.

00:20:23.519 --> 00:20:25.679
<v Speaker 1>Progress deadline exceeded

00:20:28.159 --> 00:20:31.039
<v Speaker 1>all the replica sets. Yeah. Okay.

00:20:31.039 --> 00:20:32.320
<v Speaker 0>We've got a couple of

00:20:32.804 --> 00:20:34.884
<v Speaker 0>failures here. It seems to be saying

00:20:36.644 --> 00:20:38.485
<v Speaker 0>I think it's unable to create the replica

00:20:38.485 --> 00:20:39.124
<v Speaker 0>sets.

00:20:39.764 --> 00:20:40.565
<v Speaker 1>Yeah.

00:20:41.044 --> 00:20:42.965
<v Speaker 1>I also

00:20:50.270 --> 00:20:50.830
<v Speaker 0>And

00:20:54.590 --> 00:20:56.190
<v Speaker 1>there's zero pods.

00:20:56.270 --> 00:20:57.630
<v Speaker 1>What if so we cannot

00:20:58.030 --> 00:20:58.669
<v Speaker 1>okay.

00:20:58.830 --> 00:21:00.030
<v Speaker 1>So we

00:21:00.030 --> 00:21:02.510
<v Speaker 1>try to redeploy this? Can we

00:21:03.655 --> 00:21:04.775
<v Speaker 0>So I think Can we do

00:21:06.775 --> 00:21:08.615
<v Speaker 0>Yeah. So we tried to redeploy it. It's

00:21:08.615 --> 00:21:10.855
<v Speaker 0>all unchanged. Right? It's the cluster thinks the

00:21:10.855 --> 00:21:12.295
<v Speaker 0>deployment is fine. It looks like we do

00:21:12.295 --> 00:21:14.215
<v Speaker 0>have the replica sets. We're not getting pods.

00:21:14.779 --> 00:21:17.500
<v Speaker 0>We did see the kivernal earlier. So I

00:21:17.500 --> 00:21:19.580
<v Speaker 0>think we're probably gonna wanna see what kivernal

00:21:19.580 --> 00:21:20.779
<v Speaker 0>has done to our cluster.

00:21:21.260 --> 00:21:22.860
<v Speaker 0>But I'm just gonna run and get events

00:21:22.860 --> 00:21:24.219
<v Speaker 0>and see. Yeah.

00:21:25.179 --> 00:21:25.659
<v Speaker 1>Uh-huh.

00:21:27.025 --> 00:21:28.545
<v Speaker 0>We've got a whole bunch of errors here.

00:21:28.545 --> 00:21:30.865
<v Speaker 0>Okay. And the mutating web configuration.

00:21:30.945 --> 00:21:33.505
<v Speaker 0>Always a pleasure. Conor ref invalid

00:21:33.505 --> 00:21:34.624
<v Speaker 1>namespace.

00:21:35.425 --> 00:21:36.144
<v Speaker 1>Okay.

00:21:36.785 --> 00:21:38.945
<v Speaker 1>So it's it looks like it's a permission

00:21:38.945 --> 00:21:39.585
<v Speaker 1>thing.

00:21:40.785 --> 00:21:43.665
<v Speaker 1>Does not exist in namespace

00:21:43.100 --> 00:21:43.900
<v Speaker 1>empty.

00:21:45.500 --> 00:21:48.620
<v Speaker 1>So we're in the default namespace, not the

00:21:48.620 --> 00:21:50.220
<v Speaker 1>namespace empty.

00:21:51.020 --> 00:21:52.059
<v Speaker 1>Empty string.

00:21:53.500 --> 00:21:54.300
<v Speaker 0>I I think.

00:21:55.294 --> 00:21:56.654
<v Speaker 1>Right? It's

00:21:57.135 --> 00:21:59.134
<v Speaker 0>I can't remember how long it's in space.

00:21:59.775 --> 00:22:02.495
<v Speaker 0>It's not something I've ever tested before. I

00:22:02.495 --> 00:22:03.934
<v Speaker 0>I think

00:22:04.095 --> 00:22:06.414
<v Speaker 0>I would hope. I don't even know. Maybe

00:22:06.414 --> 00:22:08.174
<v Speaker 0>an empty string should be default, but then

00:22:08.174 --> 00:22:09.775
<v Speaker 0>that error message makes it look pretty weird.

00:22:10.740 --> 00:22:13.060
<v Speaker 1>That error message makes it look like somebody

00:22:13.060 --> 00:22:15.779
<v Speaker 1>is just giving in a blank namespace.

00:22:16.340 --> 00:22:18.419
<v Speaker 0>Why don't we see if we can

00:22:20.100 --> 00:22:22.915
<v Speaker 0>what's the I can never remember it. It's

00:22:22.915 --> 00:22:24.115
<v Speaker 0>the cluster

00:22:25.075 --> 00:22:26.995
<v Speaker 0>Oh, no. API resources. Right?

00:22:28.355 --> 00:22:30.195
<v Speaker 1>We can also just get all.

00:22:34.035 --> 00:22:36.755
<v Speaker 0>I'm gonna grab that for mutating.

00:22:36.755 --> 00:22:37.555
<v Speaker 0>Yeah. There we go.

00:22:38.590 --> 00:22:41.310
<v Speaker 0>Let's let's see what is in our cluster.

00:22:46.110 --> 00:22:48.590
<v Speaker 0>These seem to be twenty six seconds old.

00:22:48.990 --> 00:22:50.750
<v Speaker 1>When we deploy. Wait.

00:22:51.390 --> 00:22:52.110
<v Speaker 1>That's

00:22:52.565 --> 00:22:54.804
<v Speaker 1>that's not when we deployed. That's, like, more

00:22:54.804 --> 00:22:57.365
<v Speaker 1>recent than that. That is more recent than

00:22:57.365 --> 00:22:57.924
<v Speaker 0>that.

00:22:58.485 --> 00:22:59.205
<v Speaker 1>Okay.

00:23:00.804 --> 00:23:03.205
<v Speaker 1>Let's describe these because these those are those

00:23:03.765 --> 00:23:05.125
<v Speaker 0>are, a little suspicious,

00:23:05.125 --> 00:23:05.445
<v Speaker 0>don't they?

00:23:08.400 --> 00:23:11.440
<v Speaker 1>I know nothing about admissions policy. I'm just

00:23:11.440 --> 00:23:13.840
<v Speaker 1>used to having permissions everywhere. Does not exist

00:23:13.840 --> 00:23:14.800
<v Speaker 1>in namespace

00:23:14.800 --> 00:23:16.159
<v Speaker 1>empty string.

00:23:16.320 --> 00:23:16.799
<v Speaker 1>So

00:23:22.925 --> 00:23:24.765
<v Speaker 0>Okay. So it looks like

00:23:28.365 --> 00:23:29.725
<v Speaker 0>a lot of noise,

00:23:30.045 --> 00:23:30.525
<v Speaker 0>but

00:23:33.085 --> 00:23:34.765
<v Speaker 1>Clients can fit.

00:23:36.049 --> 00:23:38.370
<v Speaker 0>Although the policy on this is ignored.

00:23:38.370 --> 00:23:40.210
<v Speaker 0>So even if this webhook failed.

00:23:41.490 --> 00:23:43.490
<v Speaker 0>Although I wonder if this is mutating the

00:23:43.490 --> 00:23:44.210
<v Speaker 0>namespace.

00:23:51.174 --> 00:23:52.134
<v Speaker 1>Interesting.

00:23:53.095 --> 00:23:53.815
<v Speaker 1>So

00:23:54.135 --> 00:23:55.734
<v Speaker 1>the owner ref

00:23:58.774 --> 00:24:00.774
<v Speaker 1>garbage garbage collector controller?

00:24:04.400 --> 00:24:08.080
<v Speaker 1>What happens if we delete the Qiverno

00:24:08.400 --> 00:24:09.200
<v Speaker 1>pod?

00:24:10.960 --> 00:24:12.559
<v Speaker 0>I think that's a great idea.

00:24:13.039 --> 00:24:13.919
<v Speaker 0>Kill it with fire.

00:24:20.275 --> 00:24:23.235
<v Speaker 0>We'll need to delete the mutating webhooks.

00:24:24.755 --> 00:24:26.595
<v Speaker 0>I mean, we can delete the kivernal part,

00:24:26.595 --> 00:24:27.395
<v Speaker 0>but I don't think it's

00:24:29.155 --> 00:24:31.955
<v Speaker 0>the mutating webhooks will still be there although

00:24:31.955 --> 00:24:33.635
<v Speaker 0>I guess the failure policy is

00:24:36.260 --> 00:24:38.660
<v Speaker 1>What do mutating webhooks even do?

00:24:39.620 --> 00:24:41.460
<v Speaker 1>I've I've gotta I've gotta

00:24:42.580 --> 00:24:45.059
<v Speaker 1>So gotta ask Google. What these do?

00:24:46.100 --> 00:24:48.905
<v Speaker 0>It just means that anytime that the API

00:24:48.905 --> 00:24:50.665
<v Speaker 0>server wants to create a new resource within

00:24:50.665 --> 00:24:52.424
<v Speaker 0>the cluster, it will send that request to

00:24:52.424 --> 00:24:54.345
<v Speaker 0>all of the Mutant Webhooks who can actually

00:24:54.345 --> 00:24:56.585
<v Speaker 0>modify that request and the cluster without us

00:24:56.585 --> 00:24:57.144
<v Speaker 0>knowing.

00:24:57.465 --> 00:24:58.744
<v Speaker 0>I suspect

00:24:58.745 --> 00:25:01.145
<v Speaker 0>what's happening here is that one of these

00:25:01.145 --> 00:25:04.259
<v Speaker 0>Mutant Webhooks is deleting the namespace

00:25:04.340 --> 00:25:05.779
<v Speaker 0>on all of the

00:25:07.140 --> 00:25:08.820
<v Speaker 0>pod objects, potentially.

00:25:08.980 --> 00:25:09.539
<v Speaker 0>So

00:25:09.860 --> 00:25:12.419
<v Speaker 0>I'm gonna say go away. Like, we do

00:25:12.419 --> 00:25:14.100
<v Speaker 0>not want any of these cavernal policies in

00:25:14.100 --> 00:25:16.554
<v Speaker 0>our cluster. Oh, thought I missed it. Yeah.

00:25:16.554 --> 00:25:18.394
<v Speaker 0>Oh, oh, not that shit.

00:25:20.875 --> 00:25:22.554
<v Speaker 0>We can give that a few seconds and

00:25:22.554 --> 00:25:24.874
<v Speaker 0>maybe we'll start getting a pod up.

00:25:25.755 --> 00:25:27.275
<v Speaker 0>We may have to actually

00:25:28.840 --> 00:25:31.879
<v Speaker 0>encourage that to happen. Why don't we delete

00:25:32.040 --> 00:25:34.360
<v Speaker 0>both the replica sets and try to speed

00:25:34.360 --> 00:25:35.480
<v Speaker 0>speed that up?

00:25:35.799 --> 00:25:37.960
<v Speaker 0>And hopefully the deployment controller will

00:25:38.840 --> 00:25:40.919
<v Speaker 0>yeah. There we go. There's a replica set.

00:25:41.785 --> 00:25:43.544
<v Speaker 0>Although we still don't have our pod.

00:25:46.105 --> 00:25:47.065
<v Speaker 0>Oh, well.

00:25:48.185 --> 00:25:48.665
<v Speaker 1>Do

00:25:49.065 --> 00:25:49.865
<v Speaker 1>okay.

00:25:50.185 --> 00:25:50.904
<v Speaker 1>So

00:25:52.345 --> 00:25:54.025
<v Speaker 1>can we describe the deploy again?

00:25:55.980 --> 00:25:57.020
<v Speaker 1>See what happened?

00:25:58.060 --> 00:25:59.740
<v Speaker 1>Should have some events.

00:26:03.420 --> 00:26:05.340
<v Speaker 1>Scaled up replica sets

00:26:05.820 --> 00:26:06.620
<v Speaker 1>to one.

00:26:07.395 --> 00:26:08.035
<v Speaker 1>Okay.

00:26:08.595 --> 00:26:09.715
<v Speaker 1>So So

00:26:10.275 --> 00:26:12.195
<v Speaker 0>So not quite an April fool, but Phil

00:26:12.195 --> 00:26:15.315
<v Speaker 0>has commented that he installed Hiverno just for

00:26:15.315 --> 00:26:16.195
<v Speaker 0>distraction.

00:26:16.515 --> 00:26:17.794
<v Speaker 0>Uh-huh. Nice.

00:26:18.835 --> 00:26:20.914
<v Speaker 0>Thanks, Phil. So

00:26:21.315 --> 00:26:22.835
<v Speaker 1>I'm looking at

00:26:23.770 --> 00:26:26.090
<v Speaker 1>I'm looking at some of this. So if

00:26:26.090 --> 00:26:28.010
<v Speaker 1>if we are having a replica set that

00:26:28.010 --> 00:26:30.490
<v Speaker 1>says we want this thing, but it's not

00:26:30.490 --> 00:26:31.690
<v Speaker 1>coming up

00:26:34.330 --> 00:26:35.050
<v Speaker 1>at all.

00:26:36.065 --> 00:26:39.105
<v Speaker 0>Well, Waleed At all at all. We're getting

00:26:39.105 --> 00:26:41.505
<v Speaker 0>a lot of comments from Waleed in the

00:26:41.505 --> 00:26:43.345
<v Speaker 0>chat. Shall we jump over and ask him

00:26:43.345 --> 00:26:44.144
<v Speaker 0>what he thinks?

00:26:44.945 --> 00:26:47.184
<v Speaker 1>Sure. Where are we jumping over to? Oh,

00:26:47.184 --> 00:26:48.785
<v Speaker 0>sorry. I'll I'll bring Waleed over here.

00:26:51.100 --> 00:26:53.020
<v Speaker 0>Waleed, do you wanna jump into the Discord

00:26:53.020 --> 00:26:55.019
<v Speaker 0>stage and we'll get your advice?

00:26:58.620 --> 00:27:00.060
<v Speaker 0>And she's right. I wish I knew exactly

00:27:00.060 --> 00:27:01.985
<v Speaker 0>how long the latency was between YouTube because

00:27:01.985 --> 00:27:03.025
<v Speaker 0>I could see that, and I don't know

00:27:03.025 --> 00:27:04.385
<v Speaker 0>if he's gonna hear it within one second

00:27:04.385 --> 00:27:05.745
<v Speaker 0>or, like, fourteen hours.

00:27:06.225 --> 00:27:07.425
<v Speaker 0>I'll

00:27:07.425 --> 00:27:10.465
<v Speaker 0>magic him along. So I see a failed

00:27:10.465 --> 00:27:12.785
<v Speaker 1>create for the replica set.

00:27:15.825 --> 00:27:16.385
<v Speaker 2>And then.

00:27:17.980 --> 00:27:20.220
<v Speaker 0>Oh, there's Walid. Replica failure.

00:27:20.220 --> 00:27:21.419
<v Speaker 1>Failed create.

00:27:21.580 --> 00:27:23.179
<v Speaker 0>Hey, Walid. Can you hear me?

00:27:30.955 --> 00:27:31.754
<v Speaker 0>Waleed.

00:27:32.315 --> 00:27:33.514
<v Speaker 0>I can hear you.

00:27:33.835 --> 00:27:34.874
<v Speaker 0>There we go.

00:27:35.275 --> 00:27:37.914
<v Speaker 0>Gwen, can you hear Waleed okay? Yes.

00:27:37.995 --> 00:27:39.995
<v Speaker 0>Alright. You were typing into the chat quite

00:27:39.995 --> 00:27:41.275
<v Speaker 0>a bit there. What are you suggesting we

00:27:41.275 --> 00:27:42.235
<v Speaker 0>look at next, Waleed?

00:27:43.700 --> 00:27:46.180
<v Speaker 3>I'm not sure because Phil says he installed

00:27:46.180 --> 00:27:48.020
<v Speaker 3>the Kiverna as a distraction.

00:27:49.060 --> 00:27:51.220
<v Speaker 3>I would like to check if there are

00:27:51.380 --> 00:27:52.580
<v Speaker 3>Kiverna policies.

00:27:52.580 --> 00:27:55.140
<v Speaker 3>So if you do okay, Kubectl

00:27:55.140 --> 00:27:57.940
<v Speaker 3>get the cluster policies or c port

00:27:59.035 --> 00:27:59.995
<v Speaker 3>to just

00:28:03.355 --> 00:28:05.435
<v Speaker 0>It looks like we have a cluster policy

00:28:05.435 --> 00:28:07.755
<v Speaker 0>called disallow privilege escalation.

00:28:08.155 --> 00:28:09.595
<v Speaker 0>I'm gonna assume unless

00:28:09.595 --> 00:28:12.250
<v Speaker 0>that has been very sneakily named in order

00:28:12.250 --> 00:28:14.490
<v Speaker 0>to take our attention away from it, but

00:28:14.490 --> 00:28:16.010
<v Speaker 0>that's probably unrelated.

00:28:22.330 --> 00:28:25.050
<v Speaker 0>Alright. Okay. The latency on YouTube and Discord

00:28:25.050 --> 00:28:27.054
<v Speaker 0>is a bit funky. So I'm just gonna

00:28:27.054 --> 00:28:29.215
<v Speaker 0>mute that now, and Gwen and I are

00:28:29.215 --> 00:28:30.334
<v Speaker 0>gonna march on.

00:28:31.534 --> 00:28:33.214
<v Speaker 0>Okay. Let's see.

00:28:37.294 --> 00:28:40.735
<v Speaker 1>So I'm looking okay. So, basically, I see

00:28:40.735 --> 00:28:41.375
<v Speaker 1>that, like,

00:28:43.980 --> 00:28:44.700
<v Speaker 1>the

00:28:47.419 --> 00:28:48.700
<v Speaker 1>okay. So

00:28:50.380 --> 00:28:53.179
<v Speaker 0>No. We deleted all these webhooks. I'm I'm

00:28:54.075 --> 00:28:55.835
<v Speaker 0>are these just filling up our event log

00:28:55.835 --> 00:28:58.715
<v Speaker 0>and really making things weird for us?

00:29:02.715 --> 00:29:04.715
<v Speaker 0>Oh, validating too.

00:29:04.875 --> 00:29:05.195
<v Speaker 0>Right.

00:29:10.980 --> 00:29:13.860
<v Speaker 0>Oh, okay. Look. There we go. Hot security

00:29:13.860 --> 00:29:14.820
<v Speaker 1>policy.

00:29:14.900 --> 00:29:16.100
<v Speaker 1>It's

00:29:16.100 --> 00:29:18.180
<v Speaker 1>just clogging up the logs. Yeah. So

00:29:18.820 --> 00:29:22.100
<v Speaker 0>Nice. That's I see that kavernal distraction as

00:29:22.100 --> 00:29:24.900
<v Speaker 0>Phil called it was actually hating and obfuscating

00:29:24.900 --> 00:29:27.434
<v Speaker 0>all the debugging stuff that we needed.

00:29:28.075 --> 00:29:31.915
<v Speaker 1>Alright. So Eric Hating Pods is forbidden.

00:29:31.915 --> 00:29:35.674
<v Speaker 1>Pod security, unable to admit pod empty. Okay.

00:29:38.235 --> 00:29:38.875
<v Speaker 0>There we go.

00:29:42.059 --> 00:29:43.580
<v Speaker 0>So we have

00:29:45.419 --> 00:29:47.580
<v Speaker 0>the RIC privilege policy. I think it's just

00:29:47.580 --> 00:29:49.260
<v Speaker 0>part of Rawkode and Seth. I think that's

00:29:49.260 --> 00:29:49.899
<v Speaker 0>okay.

00:29:51.580 --> 00:29:54.779
<v Speaker 0>I'm gonna assume this forty two one

00:29:54.175 --> 00:29:56.735
<v Speaker 0>which is such a random name is possibly

00:29:56.735 --> 00:29:59.455
<v Speaker 0>doing something a bit funky. Why do I

00:29:59.615 --> 00:30:00.575
<v Speaker 1>Describe that.

00:30:00.815 --> 00:30:02.174
<v Speaker 0>Yeah. Can

00:30:03.695 --> 00:30:04.815
<v Speaker 0>you do PSPs?

00:30:04.815 --> 00:30:05.774
<v Speaker 0>Let's find out.

00:30:06.735 --> 00:30:08.895
<v Speaker 0>Oh, you can. Nice. Okay. Okay.

00:30:09.990 --> 00:30:11.269
<v Speaker 1>So this is It

00:30:14.790 --> 00:30:16.470
<v Speaker 1>has a path prefix.

00:30:16.790 --> 00:30:17.429
<v Speaker 1>I wonder.

00:30:23.205 --> 00:30:24.565
<v Speaker 0>Will we just delete it?

00:30:25.285 --> 00:30:26.164
<v Speaker 1>Sure.

00:30:27.285 --> 00:30:29.845
<v Speaker 1>What does it belong to, though? Is it

00:30:29.845 --> 00:30:32.325
<v Speaker 1>is it managed by something? Who created this

00:30:32.325 --> 00:30:32.965
<v Speaker 1>pod?

00:30:34.085 --> 00:30:36.004
<v Speaker 0>There's Look at the namespace.

00:30:36.005 --> 00:30:37.045
<v Speaker 1>It's namespace.

00:30:37.230 --> 00:30:39.630
<v Speaker 1>There. It has no namespace. There's no metadata

00:30:39.630 --> 00:30:41.150
<v Speaker 0>on this which I think it just means

00:30:41.150 --> 00:30:43.230
<v Speaker 0>that bad actor has

00:30:43.630 --> 00:30:45.470
<v Speaker 0>decided to drop this in

00:30:45.870 --> 00:30:47.630
<v Speaker 0>and cause a little bit of carnage. So

00:30:47.630 --> 00:30:49.950
<v Speaker 0>I'm just gonna sledgehammer approach and we're gonna

00:30:49.950 --> 00:30:50.510
<v Speaker 0>delete that.

00:30:51.355 --> 00:30:52.154
<v Speaker 1>Okay.

00:30:52.554 --> 00:30:54.154
<v Speaker 0>Do we think we have a pod?

00:30:56.715 --> 00:30:57.434
<v Speaker 1>No.

00:30:58.875 --> 00:30:59.994
<v Speaker 1>Still no.

00:31:01.914 --> 00:31:05.355
<v Speaker 1>I'm wondering who created this

00:31:04.440 --> 00:31:06.359
<v Speaker 1>pod security policy.

00:31:06.440 --> 00:31:08.679
<v Speaker 1>There are some extra operators in here. Aren't

00:31:08.679 --> 00:31:08.919
<v Speaker 1>there?

00:31:21.315 --> 00:31:22.835
<v Speaker 1>Right here.

00:31:23.235 --> 00:31:24.114
<v Speaker 1>Cilium

00:31:25.554 --> 00:31:26.034
<v Speaker 1>operator.

00:31:31.350 --> 00:31:32.870
<v Speaker 1>Hubbell Relay

00:31:33.350 --> 00:31:34.549
<v Speaker 1>default.

00:31:35.910 --> 00:31:37.750
<v Speaker 1>Yeah. I want to know what the Cilium

00:31:37.750 --> 00:31:38.870
<v Speaker 1>operator does.

00:31:39.510 --> 00:31:41.990
<v Speaker 1>Maybe this is totally off.

00:31:42.630 --> 00:31:44.870
<v Speaker 0>So that manages the CNI plugins.

00:31:45.465 --> 00:31:47.465
<v Speaker 1>I see. I see. I see. Okay. I

00:31:47.465 --> 00:31:50.345
<v Speaker 0>think that should be all right.

00:31:50.424 --> 00:31:50.825
<v Speaker 0>Okay.

00:31:52.345 --> 00:31:53.384
<v Speaker 0>I wonder

00:31:54.904 --> 00:31:56.825
<v Speaker 0>that's the thing with this show like, you

00:31:56.825 --> 00:31:59.145
<v Speaker 0>think you're onto something and then nothing happened.

00:31:59.145 --> 00:31:59.705
<v Speaker 0>I'm

00:32:00.440 --> 00:32:02.440
<v Speaker 0>I'm going to delete the replica sets again

00:32:03.240 --> 00:32:05.240
<v Speaker 0>to try and Sure. Try and encourage your

00:32:05.240 --> 00:32:06.840
<v Speaker 0>pod to be recreated. Because if the pod

00:32:06.840 --> 00:32:09.800
<v Speaker 0>security policy did block it, the replication controller,

00:32:09.800 --> 00:32:11.480
<v Speaker 0>I'm not sure when it would try again.

00:32:12.040 --> 00:32:12.760
<v Speaker 1>That's fair.

00:32:15.825 --> 00:32:16.544
<v Speaker 0>No.

00:32:22.065 --> 00:32:23.344
<v Speaker 1>Alright.

00:32:23.424 --> 00:32:24.704
<v Speaker 1>Can we

00:32:25.264 --> 00:32:28.705
<v Speaker 1>describe the replica set

00:32:29.020 --> 00:32:31.100
<v Speaker 1>that we're getting? Yes.

00:32:38.540 --> 00:32:40.540
<v Speaker 0>Oh, we still have the pod security policy.

00:32:40.620 --> 00:32:41.820
<v Speaker 1>Pod security policy.

00:32:42.184 --> 00:32:43.945
<v Speaker 1>Replica set controller.

00:32:44.345 --> 00:32:45.465
<v Speaker 0>I didn't think those are

00:32:46.345 --> 00:32:48.664
<v Speaker 0>no. They're not named so

00:32:49.865 --> 00:32:52.744
<v Speaker 0>I wonder Well because these ones I saw

00:32:53.465 --> 00:32:56.345
<v Speaker 0>were okay and happy pod security policies are

00:32:56.345 --> 00:32:56.665
<v Speaker 0>actually

00:32:57.820 --> 00:33:00.140
<v Speaker 0>sneaky sneaky pod security policies.

00:33:00.380 --> 00:33:03.100
<v Speaker 1>So what are the caps there? I don't

00:33:03.100 --> 00:33:06.380
<v Speaker 1>know what that column is. I That's the

00:33:07.820 --> 00:33:09.260
<v Speaker 0>that's the capabilities,

00:33:09.500 --> 00:33:10.940
<v Speaker 0>Gavin. Yeah. See,

00:33:11.900 --> 00:33:13.980
<v Speaker 1>I see caps and I think capybar

00:33:14.835 --> 00:33:15.794
<v Speaker 1>That's just

00:33:16.595 --> 00:33:19.235
<v Speaker 1>please send me capybarra pictures on Twitter,

00:33:19.315 --> 00:33:20.115
<v Speaker 1>everyone.

00:33:24.355 --> 00:33:26.115
<v Speaker 1>Okay. So sysadmin,

00:33:26.115 --> 00:33:27.155
<v Speaker 1>Rawk privileged.

00:33:29.509 --> 00:33:32.470
<v Speaker 1>And then yeah. I don't know what's let's

00:33:32.470 --> 00:33:35.029
<v Speaker 1>let's describe those, I guess. Can we do

00:33:35.029 --> 00:33:35.589
<v Speaker 1>that?

00:33:36.549 --> 00:33:37.429
<v Speaker 0>Yeah.

00:33:37.750 --> 00:33:38.950
<v Speaker 0>Well, I mean, we could have, like, a

00:33:38.950 --> 00:33:40.470
<v Speaker 0>tape, but there we go.

00:33:43.375 --> 00:33:44.174
<v Speaker 1>Okay.

00:33:45.775 --> 00:33:47.054
<v Speaker 1>Run as any

00:33:48.095 --> 00:33:48.975
<v Speaker 1>manager

00:33:50.175 --> 00:33:51.375
<v Speaker 1>q CTL

00:33:51.375 --> 00:33:53.615
<v Speaker 1>client side apply.

00:33:54.895 --> 00:33:57.295
<v Speaker 1>Allow privilege escalation false.

00:34:00.630 --> 00:34:02.950
<v Speaker 1>Okay. Is this the one we're using, though?

00:34:02.950 --> 00:34:04.470
<v Speaker 1>Is this the one we're under?

00:34:04.870 --> 00:34:07.110
<v Speaker 1>What was the pod security policy? Hang on.

00:34:07.110 --> 00:34:08.150
<v Speaker 1>Let me scroll back.

00:34:08.710 --> 00:34:10.869
<v Speaker 1>Oh, gosh. I I scroll back, everybody.

00:34:12.545 --> 00:34:14.864
<v Speaker 0>No. No. When you scroll, it's it's it's

00:34:14.864 --> 00:34:15.025
<v Speaker 0>it's

00:34:16.144 --> 00:34:18.625
<v Speaker 1>you're scrolling as well? I was. Yeah. Looking

00:34:18.625 --> 00:34:20.065
<v Speaker 0>for any sort of hint.

00:34:21.105 --> 00:34:22.545
<v Speaker 1>Okay.

00:34:25.505 --> 00:34:27.424
<v Speaker 1>Pod security

00:34:26.790 --> 00:34:27.750
<v Speaker 1>policy.

00:34:29.110 --> 00:34:30.150
<v Speaker 1>Oh,

00:34:30.630 --> 00:34:33.590
<v Speaker 1>wait. From replica set controller,

00:34:33.590 --> 00:34:34.710
<v Speaker 1>can we, like,

00:34:36.630 --> 00:34:38.790
<v Speaker 1>can we get logs from the replica set

00:34:38.790 --> 00:34:40.070
<v Speaker 1>controller? Is that a thing?

00:34:41.155 --> 00:34:42.755
<v Speaker 1>Because I would like to figure out which

00:34:42.755 --> 00:34:44.995
<v Speaker 1>pod security policy is broken.

00:34:48.275 --> 00:34:48.995
<v Speaker 0>So

00:34:50.995 --> 00:34:53.155
<v Speaker 0>we could go and take a look

00:34:53.315 --> 00:34:55.875
<v Speaker 0>at the API server

00:34:57.080 --> 00:34:57.480
<v Speaker 0>I

00:34:58.200 --> 00:35:00.040
<v Speaker 0>think that would be a good idea.

00:35:03.880 --> 00:35:07.640
<v Speaker 1>Because Sledgehammer deleting pod security policies feels like

00:35:07.640 --> 00:35:09.080
<v Speaker 1>maybe now we're

00:35:10.434 --> 00:35:11.795
<v Speaker 1>we're removing

00:35:11.954 --> 00:35:13.635
<v Speaker 1>the debug abilities

00:35:13.635 --> 00:35:15.875
<v Speaker 1>since none of this gets exported to any

00:35:15.875 --> 00:35:17.154
<v Speaker 1>external logging system.

00:35:25.589 --> 00:35:27.910
<v Speaker 0>Okay. There's more Hiverno.

00:35:28.790 --> 00:35:31.349
<v Speaker 0>Yeah. Let's let's try and get Hiverno as

00:35:31.349 --> 00:35:32.150
<v Speaker 0>a picture.

00:35:33.990 --> 00:35:36.069
<v Speaker 0>Nothing. Okay. Why don't I just open it

00:35:36.069 --> 00:35:37.030
<v Speaker 0>and then

00:35:42.484 --> 00:35:44.885
<v Speaker 0>Okay. Alright. This seems to be all Kivera

00:35:44.885 --> 00:35:45.445
<v Speaker 0>now.

00:35:49.605 --> 00:35:51.525
<v Speaker 1>Authority set to yep.

00:35:52.404 --> 00:35:53.605
<v Speaker 0>Yeah. Like

00:35:55.130 --> 00:35:55.850
<v Speaker 1>Okay.

00:35:59.930 --> 00:36:02.170
<v Speaker 0>Alright. Let's just

00:36:02.570 --> 00:36:03.610
<v Speaker 0>clarify.

00:36:05.130 --> 00:36:06.810
<v Speaker 0>We have an API server. We got a

00:36:06.810 --> 00:36:08.970
<v Speaker 0>proxy. We got a schedule. Everything we expect.

00:36:09.135 --> 00:36:11.695
<v Speaker 0>Keyboard's running. It seems quite happy. It's it's

00:36:11.695 --> 00:36:14.335
<v Speaker 0>happy. We're communicating with the API server.

00:36:14.895 --> 00:36:16.975
<v Speaker 2>This is a permissions thing.

00:36:16.975 --> 00:36:19.135
<v Speaker 0>Yeah. For some wacky reason.

00:36:23.300 --> 00:36:26.020
<v Speaker 0>It's claiming a pod security policy was unable

00:36:26.020 --> 00:36:29.060
<v Speaker 0>to admit our pod even though we have

00:36:29.060 --> 00:36:31.060
<v Speaker 0>no pod security policy.

00:36:33.220 --> 00:36:33.940
<v Speaker 1>And

00:36:34.180 --> 00:36:35.620
<v Speaker 1>there's an empty

00:36:35.700 --> 00:36:36.260
<v Speaker 1>list.

00:36:42.855 --> 00:36:43.495
<v Speaker 1>Like,

00:36:45.095 --> 00:36:47.015
<v Speaker 1>it it feels like there is an error

00:36:47.015 --> 00:36:50.935
<v Speaker 1>message that's not that we aren't getting

00:36:49.830 --> 00:36:51.270
<v Speaker 1>at the end there.

00:36:51.750 --> 00:36:53.750
<v Speaker 1>Right? Unable to admit pod.

00:36:55.110 --> 00:36:55.910
<v Speaker 0>Yeah.

00:36:55.910 --> 00:36:56.150
<v Speaker 0>I'm

00:36:57.270 --> 00:36:59.750
<v Speaker 0>I gotta say, I'm feeling a little confused.

00:37:16.475 --> 00:37:17.355
<v Speaker 1>What's the

00:37:19.630 --> 00:37:20.270
<v Speaker 1>okay.

00:37:20.430 --> 00:37:21.150
<v Speaker 1>So

00:37:22.590 --> 00:37:25.790
<v Speaker 1>I don't know anything about pod security policies.

00:37:25.790 --> 00:37:28.030
<v Speaker 1>So I'm just going to Nor should you.

00:37:28.030 --> 00:37:29.070
<v Speaker 0>They're deprecated.

00:37:29.869 --> 00:37:31.630
<v Speaker 1>Which

00:37:31.630 --> 00:37:34.350
<v Speaker 1>which which Kubernetes version are we using?

00:37:35.484 --> 00:37:36.925
<v Speaker 0>One twenty,

00:37:36.925 --> 00:37:39.805
<v Speaker 0>I think. They're deprecated but not removed, but

00:37:39.805 --> 00:37:41.565
<v Speaker 0>they're still available at the moment.

00:37:41.965 --> 00:37:42.125
<v Speaker 0>Okay.

00:37:51.990 --> 00:37:53.270
<v Speaker 0>Let's see.

00:37:53.750 --> 00:37:56.150
<v Speaker 0>So this is our API server configuration.

00:37:56.470 --> 00:37:57.030
<v Speaker 1>Yeah.

00:38:05.315 --> 00:38:06.675
<v Speaker 0>We can disable

00:38:06.994 --> 00:38:08.435
<v Speaker 0>pod security policies.

00:38:08.994 --> 00:38:10.835
<v Speaker 0>Is that is that too harsh?

00:38:12.115 --> 00:38:12.755
<v Speaker 1>No.

00:38:12.915 --> 00:38:15.555
<v Speaker 1>No. Let's do it. We want this to

00:38:15.555 --> 00:38:15.955
<v Speaker 1>work.

00:38:17.350 --> 00:38:20.870
<v Speaker 0>Alright. Let's see if how that restarted.

00:38:21.990 --> 00:38:23.590
<v Speaker 0>QP API server.

00:38:24.230 --> 00:38:25.030
<v Speaker 0>Yeah. It did.

00:38:36.565 --> 00:38:37.925
<v Speaker 0>Make sure there's no I'm gonna give that

00:38:37.925 --> 00:38:39.845
<v Speaker 0>a second and check the pod again but

00:38:39.845 --> 00:38:41.685
<v Speaker 0>see if there's anything suspect

00:38:41.685 --> 00:38:42.245
<v Speaker 0>in here.

00:38:45.500 --> 00:38:47.180
<v Speaker 0>Do

00:38:54.859 --> 00:38:55.580
<v Speaker 0>you see anything?

00:38:57.734 --> 00:39:00.055
<v Speaker 0>Sorry. I know I'm scrolling fast but

00:39:01.815 --> 00:39:03.095
<v Speaker 0>that looks normal.

00:39:03.974 --> 00:39:04.695
<v Speaker 0>Yeah.

00:39:05.494 --> 00:39:06.295
<v Speaker 0>Maybe.

00:39:08.775 --> 00:39:10.375
<v Speaker 0>I love that everything I see is in

00:39:10.375 --> 00:39:12.135
<v Speaker 0>the form of a question without being a

00:39:12.135 --> 00:39:13.950
<v Speaker 0>question. Like, is it? Or

00:39:14.670 --> 00:39:15.550
<v Speaker 1>What's

00:39:15.550 --> 00:39:16.190
<v Speaker 1>a

00:39:16.830 --> 00:39:18.750
<v Speaker 2>what's the insecure port

00:39:19.150 --> 00:39:19.790
<v Speaker 2>thing?

00:39:19.950 --> 00:39:21.470
<v Speaker 2>I don't know. I think that can be

00:39:21.630 --> 00:39:23.230
<v Speaker 0>I think no. I don't think that does

00:39:23.230 --> 00:39:24.910
<v Speaker 0>anything anymore. I think insecure ports,

00:39:25.805 --> 00:39:28.045
<v Speaker 0>again, maybe Well, we have an insecure port

00:39:28.045 --> 00:39:30.205
<v Speaker 1>equals zero, and we have a secure port

00:39:30.205 --> 00:39:33.085
<v Speaker 1>equals six four four three. So I guess

00:39:34.605 --> 00:39:35.325
<v Speaker 0>I

00:39:35.965 --> 00:39:36.685
<v Speaker 0>hate this show.

00:39:39.840 --> 00:39:42.000
<v Speaker 0>What have I done? I broke the API

00:39:42.000 --> 00:39:42.720
<v Speaker 0>server.

00:39:43.200 --> 00:39:43.920
<v Speaker 1>Yep.

00:39:46.080 --> 00:39:46.800
<v Speaker 0>Shit.

00:39:46.880 --> 00:39:47.440
<v Speaker 0>Shit.

00:39:54.160 --> 00:39:54.880
<v Speaker 0>Oh, wait.

00:39:55.415 --> 00:39:56.775
<v Speaker 0>Oh, is it restarting?

00:39:56.935 --> 00:39:57.415
<v Speaker 0>Oh,

00:39:58.535 --> 00:40:00.055
<v Speaker 0>I think because I dropped out of them

00:40:00.055 --> 00:40:02.455
<v Speaker 0>and it's just restart. Okay. Phew.

00:40:10.670 --> 00:40:11.390
<v Speaker 1>So

00:40:13.390 --> 00:40:14.190
<v Speaker 1>why

00:40:14.190 --> 00:40:16.750
<v Speaker 1>do we I'm also confused.

00:40:17.470 --> 00:40:18.670
<v Speaker 1>Why do we have

00:40:20.030 --> 00:40:22.510
<v Speaker 1>two roles on the API server? Is that

00:40:22.510 --> 00:40:22.990
<v Speaker 1>normal?

00:40:24.684 --> 00:40:26.045
<v Speaker 0>Which ones do you see?

00:40:26.684 --> 00:40:28.285
<v Speaker 1>Well, when we describe

00:40:28.605 --> 00:40:31.405
<v Speaker 1>when we when we describe the I'm sorry.

00:40:31.405 --> 00:40:33.484
<v Speaker 1>I just noticed that the Kube API server

00:40:33.484 --> 00:40:35.885
<v Speaker 1>also has is when you just describe the

00:40:35.885 --> 00:40:36.285
<v Speaker 1>nodes.

00:40:42.630 --> 00:40:45.990
<v Speaker 0>Every time I acquire them, it restarts it.

00:40:47.190 --> 00:40:47.910
<v Speaker 0>Oh,

00:40:48.150 --> 00:40:48.950
<v Speaker 0>sorry.

00:40:48.950 --> 00:40:50.230
<v Speaker 0>No. Off you go. You can type.

00:40:52.145 --> 00:40:53.585
<v Speaker 1>And I mean, maybe.

00:40:54.945 --> 00:40:55.585
<v Speaker 1>What?

00:40:57.185 --> 00:40:59.425
<v Speaker 1>What do we want? Yeah. Don't think it's

00:40:59.425 --> 00:41:00.224
<v Speaker 0>restarted yet.

00:41:04.850 --> 00:41:06.530
<v Speaker 0>Alright. We're get oops. Sorry.

00:41:07.250 --> 00:41:10.530
<v Speaker 0>We're

00:41:10.530 --> 00:41:12.610
<v Speaker 0>getting some advice from the audience here that

00:41:12.610 --> 00:41:14.930
<v Speaker 0>there was an alert privileged false flag in

00:41:14.930 --> 00:41:16.690
<v Speaker 0>the API server manifest,

00:41:16.770 --> 00:41:18.915
<v Speaker 0>which needs to be changed

00:41:18.915 --> 00:41:19.715
<v Speaker 0>to

00:41:19.715 --> 00:41:21.715
<v Speaker 0>a low privilege true.

00:41:22.835 --> 00:41:24.355
<v Speaker 0>So Okay.

00:41:24.595 --> 00:41:27.395
<v Speaker 1>Wait. So we're having too many privileges.

00:41:27.475 --> 00:41:29.315
<v Speaker 1>So a privilege true.

00:41:29.635 --> 00:41:31.635
<v Speaker 0>Yeah. I'm I'm actually not entirely sure.

00:41:32.619 --> 00:41:34.380
<v Speaker 0>I'm assuming the API server is saying that

00:41:34.380 --> 00:41:36.540
<v Speaker 0>we are low privileged pods.

00:41:36.940 --> 00:41:38.700
<v Speaker 0>I'm not entirely sure what that flag does.

00:41:38.700 --> 00:41:40.220
<v Speaker 0>I think I'll need to let the audience

00:41:40.220 --> 00:41:41.820
<v Speaker 0>tell us because I have no idea.

00:41:47.905 --> 00:41:49.745
<v Speaker 0>Oh, there we go. That was it.

00:41:50.545 --> 00:41:51.345
<v Speaker 1>Dang.

00:41:53.345 --> 00:41:54.705
<v Speaker 0>Alright.

00:41:54.705 --> 00:41:56.945
<v Speaker 0>So we'll give that a second.

00:41:57.425 --> 00:41:59.665
<v Speaker 0>So post the container image, we'll do our

00:41:59.665 --> 00:42:01.890
<v Speaker 0>upgrade and hopefully that is enough to get

00:42:01.890 --> 00:42:03.570
<v Speaker 0>us onto our second cluster.

00:42:05.810 --> 00:42:07.250
<v Speaker 0>So there was not a lot changed What

00:42:07.250 --> 00:42:08.530
<v Speaker 1>container creating?

00:42:08.690 --> 00:42:10.450
<v Speaker 0>Still sneaky. I'm

00:42:10.450 --> 00:42:11.650
<v Speaker 0>hoping it's pulling the image.

00:42:17.355 --> 00:42:17.915
<v Speaker 0>No.

00:42:28.050 --> 00:42:32.050
<v Speaker 0>Okay. Didn't we didn't we get that before?

00:42:33.970 --> 00:42:36.610
<v Speaker 0>We were seeing that with the Rawkode stuff.

00:42:36.770 --> 00:42:38.050
<v Speaker 0>But everything else seems

00:42:38.690 --> 00:42:41.090
<v Speaker 0>to oh, no. We we've lost this we've

00:42:41.090 --> 00:42:42.450
<v Speaker 0>lost our Cillium pods.

00:42:43.845 --> 00:42:45.845
<v Speaker 0>Oh, I'm such an idiot.

00:42:49.205 --> 00:42:50.805
<v Speaker 0>When we ran get pods in the Cilium

00:42:50.805 --> 00:42:53.605
<v Speaker 0>namespace earlier, there were only the two operators.

00:42:54.485 --> 00:42:56.325
<v Speaker 0>Right. Now it's just occurred to me that,

00:42:56.325 --> 00:42:57.925
<v Speaker 0>yeah, there was not actually any c and

00:42:57.925 --> 00:43:00.450
<v Speaker 0>I agents running on the nodes. And now,

00:43:00.450 --> 00:43:01.890
<v Speaker 0>I see one in an error state and

00:43:01.890 --> 00:43:03.650
<v Speaker 0>I'm even more worried. But

00:43:03.970 --> 00:43:05.170
<v Speaker 0>I should have picked that up.

00:43:11.435 --> 00:43:12.875
<v Speaker 0>Why did that fail?

00:43:19.515 --> 00:43:21.115
<v Speaker 0>They're

00:43:21.115 --> 00:43:22.955
<v Speaker 0>coming, maybe. No.

00:43:23.275 --> 00:43:23.515
<v Speaker 0>Enter.

00:43:26.820 --> 00:43:27.780
<v Speaker 0>Logs.

00:43:28.020 --> 00:43:29.060
<v Speaker 0>Let's see.

00:43:33.140 --> 00:43:34.500
<v Speaker 1>Could not open.

00:43:36.980 --> 00:43:38.020
<v Speaker 1>Subsystem,

00:43:38.100 --> 00:43:39.700
<v Speaker 1>read only file system.

00:43:41.735 --> 00:43:42.695
<v Speaker 1>So

00:43:47.495 --> 00:43:48.535
<v Speaker 1>what are the

00:43:49.815 --> 00:43:51.095
<v Speaker 1>system control

00:43:51.255 --> 00:43:52.215
<v Speaker 1>files here?

00:43:55.880 --> 00:43:58.200
<v Speaker 1>Not open. I p v four. I p

00:43:58.200 --> 00:43:58.760
<v Speaker 1>forward.

00:44:00.280 --> 00:44:01.400
<v Speaker 0>I p forward.

00:44:01.640 --> 00:44:02.440
<v Speaker 0>So

00:44:03.880 --> 00:44:05.320
<v Speaker 1>sounds like we need to

00:44:08.005 --> 00:44:10.165
<v Speaker 1>change the permissions on that.

00:44:13.125 --> 00:44:13.845
<v Speaker 1>What?

00:44:15.205 --> 00:44:16.165
<v Speaker 0>Let's

00:44:16.165 --> 00:44:16.965
<v Speaker 0>try

00:44:17.045 --> 00:44:18.645
<v Speaker 0>edit daemon set

00:44:18.965 --> 00:44:20.244
<v Speaker 0>cilium. I mean,

00:44:22.040 --> 00:44:23.640
<v Speaker 0>is that not a daemon set?

00:44:24.119 --> 00:44:25.720
<v Speaker 0>Oh, it's in the wrong namespace.

00:44:28.040 --> 00:44:28.760
<v Speaker 0>Edit.

00:44:32.440 --> 00:44:34.680
<v Speaker 1>It's

00:44:34.680 --> 00:44:35.800
<v Speaker 1>in the Cilium namespace.

00:44:36.915 --> 00:44:37.875
<v Speaker 0>Thank

00:44:38.675 --> 00:44:40.275
<v Speaker 0>you. I'm pretty sure I set that out

00:44:40.275 --> 00:44:42.435
<v Speaker 0>loud and I continued not to tape it.

00:44:42.435 --> 00:44:43.875
<v Speaker 0>That was useful.

00:44:46.835 --> 00:44:48.595
<v Speaker 0>Okay. What is going on with this demon

00:44:48.595 --> 00:44:48.835
<v Speaker 0>set?

00:45:01.240 --> 00:45:02.040
<v Speaker 1>Enable

00:45:02.040 --> 00:45:03.400
<v Speaker 1>debug false.

00:45:03.400 --> 00:45:05.685
<v Speaker 1>So maybe, first of all, we wanna enable

00:45:05.685 --> 00:45:06.885
<v Speaker 1>debug true.

00:45:08.485 --> 00:45:10.645
<v Speaker 0>That may may be healthy.

00:45:11.205 --> 00:45:13.125
<v Speaker 0>Wonder if these read only is true though,

00:45:13.125 --> 00:45:15.605
<v Speaker 0>should just be removed. I don't know. Yeah.

00:45:17.079 --> 00:45:18.599
<v Speaker 0>I I I I don't really know if

00:45:18.599 --> 00:45:20.040
<v Speaker 0>those are supposed to be

00:45:20.440 --> 00:45:23.160
<v Speaker 0>or not. That's the thing with this show.

00:45:23.160 --> 00:45:24.440
<v Speaker 0>People are cruel.

00:45:26.680 --> 00:45:28.280
<v Speaker 0>Like, what was the file system? Was it

00:45:30.385 --> 00:45:31.025
<v Speaker 1>The

00:45:32.144 --> 00:45:34.625
<v Speaker 1>there was a read only file system, but

00:45:34.625 --> 00:45:36.385
<v Speaker 1>the file system, I don't think were any

00:45:36.385 --> 00:45:37.265
<v Speaker 1>of these

00:45:38.305 --> 00:45:38.944
<v Speaker 1>paths.

00:45:43.100 --> 00:45:44.700
<v Speaker 0>Yeah. I don't think it was it. I

00:45:44.700 --> 00:45:47.740
<v Speaker 1>don't modules. Oh, wait. Tip Cilium config map?

00:45:48.140 --> 00:45:50.140
<v Speaker 1>No. But there were underscores

00:45:50.140 --> 00:45:52.700
<v Speaker 1>in the read only error. We can just

00:45:52.700 --> 00:45:54.060
<v Speaker 0>pull it up again, can't we? Let's get

00:45:54.220 --> 00:45:54.380
<v Speaker 0>Yeah.

00:45:58.815 --> 00:46:00.815
<v Speaker 1>Yeah. It's like, proc

00:46:01.295 --> 00:46:03.535
<v Speaker 1>sys net I p v four.

00:46:06.255 --> 00:46:08.255
<v Speaker 1>Wait. Disabled support for

00:46:08.495 --> 00:46:10.495
<v Speaker 1>due to missing kernel support.

00:46:13.619 --> 00:46:15.780
<v Speaker 0>I guess what we could always do,

00:46:18.339 --> 00:46:19.220
<v Speaker 0>I'm guessing.

00:46:20.180 --> 00:46:22.099
<v Speaker 0>Let's take a look at this filling and

00:46:22.099 --> 00:46:22.900
<v Speaker 0>config.

00:46:25.380 --> 00:46:26.980
<v Speaker 0>See if something in there has been changed,

00:46:27.135 --> 00:46:28.575
<v Speaker 0>not that I would even know that I

00:46:28.575 --> 00:46:29.055
<v Speaker 0>had.

00:46:32.735 --> 00:46:35.055
<v Speaker 0>So the operator should monitor this conflict map

00:46:35.055 --> 00:46:37.055
<v Speaker 0>and rule out the agents for us.

00:46:38.255 --> 00:46:41.695
<v Speaker 0>So, really, I guess, we just wanna see

00:46:46.130 --> 00:46:48.290
<v Speaker 1>I don't see anything. It's

00:46:49.170 --> 00:46:50.130
<v Speaker 2>monitor

00:46:50.930 --> 00:46:52.610
<v Speaker 2>aggregation interval.

00:46:54.130 --> 00:46:55.970
<v Speaker 0>No. That looks alright to me.

00:46:56.450 --> 00:46:56.930
<v Speaker 1>Yeah.

00:46:58.985 --> 00:47:00.105
<v Speaker 1>Sidecar

00:47:00.105 --> 00:47:00.665
<v Speaker 1>is still

00:47:01.785 --> 00:47:02.745
<v Speaker 1>Yeah.

00:47:07.385 --> 00:47:08.265
<v Speaker 0>I don't think

00:47:09.545 --> 00:47:11.385
<v Speaker 0>I don't think that's been touched.

00:47:11.865 --> 00:47:13.865
<v Speaker 0>So why is

00:47:16.240 --> 00:47:17.680
<v Speaker 0>I mean, the only reason that it could

00:47:17.680 --> 00:47:19.440
<v Speaker 0>write the process net

00:47:20.960 --> 00:47:22.400
<v Speaker 0>would be if it wasn't privileged.

00:47:34.005 --> 00:47:36.005
<v Speaker 0>Maybe we Do we have a Cilium config

00:47:36.005 --> 00:47:36.725
<v Speaker 1>map?

00:47:37.125 --> 00:47:38.805
<v Speaker 0>Yeah. We just that was the thing we

00:47:38.805 --> 00:47:40.645
<v Speaker 0>were just done. It doesn't really seem to

00:47:40.645 --> 00:47:42.660
<v Speaker 0>have too much in it,

00:47:51.940 --> 00:47:54.099
<v Speaker 0>which means we're kinda back to looking at

00:47:54.099 --> 00:47:56.660
<v Speaker 0>those redone lasers. Now

00:47:57.125 --> 00:47:58.645
<v Speaker 0>should we just remove them and just see

00:47:58.645 --> 00:47:59.445
<v Speaker 0>what happens?

00:48:03.285 --> 00:48:05.605
<v Speaker 1>Let's see. So this is the Cilium.

00:48:06.645 --> 00:48:08.565
<v Speaker 1>Sorry. I just did some I could just

00:48:08.565 --> 00:48:09.525
<v Speaker 0>redeploy Cilium.

00:48:10.100 --> 00:48:11.220
<v Speaker 0>Is that cheating?

00:48:12.820 --> 00:48:14.100
<v Speaker 1>I don't think so.

00:48:14.740 --> 00:48:15.540
<v Speaker 0>Alright.

00:48:17.060 --> 00:48:18.180
<v Speaker 0>Let's just do it.

00:48:21.620 --> 00:48:22.820
<v Speaker 0>Oh, I need to tell it not to

00:48:22.820 --> 00:48:23.620
<v Speaker 0>create the namespace.

00:48:29.135 --> 00:48:30.895
<v Speaker 0>Create namespace.

00:48:32.734 --> 00:48:34.654
<v Speaker 0>Okay. We'll just reapply it. We'll see what

00:48:34.654 --> 00:48:34.895
<v Speaker 0>happens.

00:48:36.750 --> 00:48:39.870
<v Speaker 0>Unchanged, unchanged. The operator was changed

00:48:41.390 --> 00:48:44.110
<v Speaker 0>and the demon set was changed. Okay. So,

00:48:44.830 --> 00:48:46.510
<v Speaker 0>something does happen

00:48:47.070 --> 00:48:49.724
<v Speaker 0>on those two. I'm curious if we edit

00:48:49.724 --> 00:48:51.565
<v Speaker 0>the daemon set now if those read only

00:48:51.565 --> 00:48:53.085
<v Speaker 0>file systems are still there.

00:48:56.605 --> 00:48:59.724
<v Speaker 0>They are. Okay. So something had changed in

00:48:59.724 --> 00:49:01.565
<v Speaker 0>here. Something had changed

00:49:01.565 --> 00:49:02.525
<v Speaker 0>in the operator,

00:49:04.900 --> 00:49:06.580
<v Speaker 0>And we're getting

00:49:06.900 --> 00:49:08.740
<v Speaker 0>running Acetym agents.

00:49:09.060 --> 00:49:09.620
<v Speaker 0>Yeah.

00:49:10.260 --> 00:49:10.980
<v Speaker 0>Good.

00:49:12.820 --> 00:49:13.540
<v Speaker 0>Phew.

00:49:14.100 --> 00:49:15.620
<v Speaker 0>I was getting panicked.

00:49:15.860 --> 00:49:18.100
<v Speaker 0>I'm curious what you changed, Phil. Feel free

00:49:18.100 --> 00:49:19.140
<v Speaker 0>to let us know in the comments.

00:49:19.755 --> 00:49:20.714
<v Speaker 0>So does that mean

00:49:22.315 --> 00:49:25.035
<v Speaker 1>Does that mean we have our pods?

00:49:27.755 --> 00:49:29.355
<v Speaker 2>Pending. That's different.

00:49:31.450 --> 00:49:34.010
<v Speaker 1>Right? Was that the same pod? Oh, no.

00:49:34.010 --> 00:49:35.530
<v Speaker 1>No. Pending. Yeah.

00:49:41.610 --> 00:49:41.850
<v Speaker 2>Okay.

00:49:44.415 --> 00:49:47.135
<v Speaker 1>Node role Kubernetes IO master.

00:49:47.295 --> 00:49:48.015
<v Speaker 1>Yes.

00:49:48.175 --> 00:49:50.335
<v Speaker 1>I was going to say here when we

00:49:50.335 --> 00:49:52.415
<v Speaker 1>did k get nodes.

00:49:54.735 --> 00:49:56.095
<v Speaker 1>I think I just

00:49:56.710 --> 00:49:58.950
<v Speaker 1>looked at it a little bit. But

00:50:00.870 --> 00:50:01.910
<v Speaker 1>see this?

00:50:02.630 --> 00:50:06.070
<v Speaker 1>Uh-huh. The control plane node has two roles.

00:50:07.350 --> 00:50:08.790
<v Speaker 1>Why does it need two roles?

00:50:11.905 --> 00:50:12.545
<v Speaker 0>And

00:50:13.265 --> 00:50:15.265
<v Speaker 1>Why does it need the master role? I

00:50:15.265 --> 00:50:17.025
<v Speaker 1>don't think it does need that.

00:50:17.665 --> 00:50:19.265
<v Speaker 0>I think that's the

00:50:19.505 --> 00:50:21.744
<v Speaker 0>a legacy thing because it was renamed from

00:50:21.744 --> 00:50:23.580
<v Speaker 0>master to control plane. So it's maybe just

00:50:23.580 --> 00:50:25.500
<v Speaker 0>left around because there's still things that depend

00:50:25.500 --> 00:50:27.020
<v Speaker 0>on that label being there.

00:50:27.420 --> 00:50:30.460
<v Speaker 1>But we're in Kubernetes one twenty. Seriously? I

00:50:32.780 --> 00:50:33.100
<v Speaker 0>So

00:50:37.685 --> 00:50:38.645
<v Speaker 1>Taint

00:50:38.965 --> 00:50:42.085
<v Speaker 1>zero to four nodes are available. Nodes one

00:50:42.085 --> 00:50:43.445
<v Speaker 1>node had taint,

00:50:44.085 --> 00:50:45.765
<v Speaker 1>but the pod didn't tolerate.

00:50:46.245 --> 00:50:47.765
<v Speaker 1>Okay. That's fine.

00:50:48.565 --> 00:50:48.885
<v Speaker 1>Three,

00:50:49.720 --> 00:50:51.080
<v Speaker 1>too many pods.

00:50:51.240 --> 00:50:52.600
<v Speaker 1>Too many pods?

00:50:57.160 --> 00:50:58.760
<v Speaker 0>Does that does it say too many pod?

00:50:58.760 --> 00:51:00.360
<v Speaker 0>Oh, okay. Yeah.

00:51:01.000 --> 00:51:02.440
<v Speaker 0>Ah. Rachel, let the

00:51:02.680 --> 00:51:04.600
<v Speaker 0>the pod

00:51:04.295 --> 00:51:07.015
<v Speaker 0>limit on the APIs or the Is it

00:51:07.015 --> 00:51:08.935
<v Speaker 0>the cubelet or the API server?

00:51:10.295 --> 00:51:11.415
<v Speaker 1>I don't know.

00:51:13.975 --> 00:51:15.095
<v Speaker 0>Let's find it.

00:51:15.415 --> 00:51:17.015
<v Speaker 0>I think it's the cubelet, but I'm gonna

00:51:17.015 --> 00:51:17.255
<v Speaker 0>check.

00:51:18.680 --> 00:51:20.519
<v Speaker 0>Yeah. Okay. It's not in here. Let's find

00:51:20.519 --> 00:51:21.400
<v Speaker 0>the cubelet.

00:51:21.960 --> 00:51:22.680
<v Speaker 0>So

00:51:22.760 --> 00:51:25.480
<v Speaker 0>the cubelet is starting for system d.

00:51:25.640 --> 00:51:26.280
<v Speaker 1>System

00:51:26.519 --> 00:51:27.080
<v Speaker 1>d.

00:51:28.200 --> 00:51:30.359
<v Speaker 1>Oops. Sorry. I'm about to drive.

00:51:31.565 --> 00:51:33.245
<v Speaker 0>Oh, no. You feel free if if you

00:51:33.245 --> 00:51:35.085
<v Speaker 0>wanna open the Qubelet. No.

00:51:40.765 --> 00:51:42.365
<v Speaker 0>Okay. So this just tells us where all

00:51:42.365 --> 00:51:44.365
<v Speaker 0>the configurations are. So we'll just pop these

00:51:44.365 --> 00:51:45.245
<v Speaker 0>open one by one.

00:51:46.690 --> 00:51:49.010
<v Speaker 0>Let's look at Q bled config.

00:51:49.170 --> 00:51:49.730
<v Speaker 0>Yeah.

00:51:51.730 --> 00:51:53.250
<v Speaker 0>Nope. That's just the

00:51:53.730 --> 00:51:55.650
<v Speaker 0>thing. Let's try this one.

00:52:03.265 --> 00:52:03.985
<v Speaker 0>Pod.

00:52:05.984 --> 00:52:06.865
<v Speaker 0>Anything.

00:52:09.665 --> 00:52:10.865
<v Speaker 0>Nope. Okay. Next.

00:52:11.980 --> 00:52:13.340
<v Speaker 0>Could be QPDM

00:52:13.340 --> 00:52:14.300
<v Speaker 0>flags.

00:52:22.140 --> 00:52:22.860
<v Speaker 0>No.

00:52:23.660 --> 00:52:24.860
<v Speaker 0>Which one did I miss?

00:52:26.415 --> 00:52:28.095
<v Speaker 1>Etsy default keyboard?

00:52:29.295 --> 00:52:30.335
<v Speaker 1>User bin

00:52:30.415 --> 00:52:31.375
<v Speaker 1>keyboard?

00:52:33.055 --> 00:52:33.855
<v Speaker 0>No.

00:52:36.415 --> 00:52:37.855
<v Speaker 0>Maybe it was that first one.

00:52:47.860 --> 00:52:48.500
<v Speaker 0>No.

00:52:50.500 --> 00:52:51.700
<v Speaker 0>I must have missed one.

00:52:58.744 --> 00:52:59.145
<v Speaker 0>The

00:52:59.945 --> 00:53:01.945
<v Speaker 0>one for connecting to the cluster. The kubelet

00:53:01.945 --> 00:53:03.465
<v Speaker 0>we just opened, I've opened it three times

00:53:03.465 --> 00:53:04.105
<v Speaker 0>now.

00:53:05.465 --> 00:53:07.225
<v Speaker 0>The controller manager is not the one I'm

00:53:07.225 --> 00:53:07.705
<v Speaker 0>looking for.

00:53:08.900 --> 00:53:10.500
<v Speaker 0>It has to Why

00:53:10.980 --> 00:53:12.340
<v Speaker 0>am I so bad at this?

00:53:17.300 --> 00:53:19.220
<v Speaker 0>CD bar lib

00:53:19.380 --> 00:53:20.420
<v Speaker 0>kubelet

00:53:20.500 --> 00:53:21.940
<v Speaker 0>config.

00:53:24.224 --> 00:53:25.265
<v Speaker 0>Not there.

00:53:33.265 --> 00:53:34.625
<v Speaker 0>Maybe I just don't know what the flag

00:53:34.625 --> 00:53:36.144
<v Speaker 0>is called. Maybe I should just read them

00:53:36.144 --> 00:53:36.385
<v Speaker 0>all.

00:53:50.460 --> 00:53:51.580
<v Speaker 1>Can we restart the?

00:53:53.165 --> 00:53:55.245
<v Speaker 0>Yeah. But we need to find that config

00:53:55.245 --> 00:53:56.045
<v Speaker 0>first.

00:54:01.085 --> 00:54:03.005
<v Speaker 0>Are you sure it's max pods?

00:54:03.405 --> 00:54:05.485
<v Speaker 0>Unless it's not the kubelet under control. Oh,

00:54:05.485 --> 00:54:06.765
<v Speaker 0>I'm such an idiot again.

00:54:08.810 --> 00:54:10.410
<v Speaker 0>It's gonna be the kubelet on the worker

00:54:10.410 --> 00:54:12.250
<v Speaker 0>nodes. He's modified the kubelet on all the

00:54:12.250 --> 00:54:14.250
<v Speaker 0>worker nodes so that they can't run anymore.

00:54:15.690 --> 00:54:17.850
<v Speaker 0>I've joined another session if you wanna pop

00:54:17.850 --> 00:54:18.490
<v Speaker 0>over

00:54:19.210 --> 00:54:20.090
<v Speaker 0>hopefully.

00:54:21.595 --> 00:54:23.595
<v Speaker 0>I'm finally starting to come to my senses

00:54:23.595 --> 00:54:25.435
<v Speaker 0>a little bit here. There we go.

00:54:26.235 --> 00:54:26.875
<v Speaker 1>I

00:54:27.035 --> 00:54:28.075
<v Speaker 1>am having

00:54:28.155 --> 00:54:28.715
<v Speaker 1>super

00:54:31.035 --> 00:54:32.555
<v Speaker 1>I'm going to

00:54:33.435 --> 00:54:36.440
<v Speaker 1>drop off, I think, and reconnect because I

00:54:36.440 --> 00:54:38.920
<v Speaker 1>cannot see. It's very fuzzy. Your screen is

00:54:38.920 --> 00:54:40.839
<v Speaker 1>incredibly fuzzy. Right? Oh, no. Yeah. Feel free

00:54:40.839 --> 00:54:43.079
<v Speaker 0>to drop off. I'll some Be right back.

00:54:43.079 --> 00:54:44.599
<v Speaker 0>While you do that.

00:54:45.079 --> 00:54:45.559
<v Speaker 1>Perfect.

00:54:48.585 --> 00:54:49.385
<v Speaker 0>Var

00:54:49.385 --> 00:54:50.265
<v Speaker 0>lib

00:54:50.265 --> 00:54:52.265
<v Speaker 0>shiplit config.

00:54:54.185 --> 00:54:56.265
<v Speaker 0>Oh, a different number on each host. That's

00:54:56.265 --> 00:54:57.065
<v Speaker 0>fun. Thanks, Phil.

00:55:01.290 --> 00:55:02.410
<v Speaker 0>Welcome back.

00:55:02.970 --> 00:55:03.770
<v Speaker 1>Hooray.

00:55:03.770 --> 00:55:04.810
<v Speaker 1>I can see you.

00:55:05.610 --> 00:55:09.370
<v Speaker 0>Okay. I have removed all those very sneaky

00:55:10.890 --> 00:55:11.690
<v Speaker 0>max

00:55:11.850 --> 00:55:12.890
<v Speaker 0>pod settings.

00:55:15.675 --> 00:55:17.675
<v Speaker 0>And I'll probably need to restart the kubelet

00:55:17.675 --> 00:55:18.955
<v Speaker 0>on all of these.

00:55:21.595 --> 00:55:23.275
<v Speaker 0>We'd have to start stacking salt stack and

00:55:23.275 --> 00:55:25.115
<v Speaker 0>all these machines so this is easier.

00:55:27.195 --> 00:55:29.355
<v Speaker 0>Okay. All those kubelets now been restarted.

00:55:31.670 --> 00:55:32.470
<v Speaker 1>Uh-huh.

00:55:32.630 --> 00:55:33.270
<v Speaker 0>And

00:55:33.829 --> 00:55:35.349
<v Speaker 0>hopefully our pending

00:55:35.750 --> 00:55:36.710
<v Speaker 0>changes.

00:55:38.309 --> 00:55:40.150
<v Speaker 0>I hope so. I hope there's nothing else

00:55:40.150 --> 00:55:41.190
<v Speaker 0>on this cluster.

00:55:43.510 --> 00:55:45.935
<v Speaker 1>Failed to sync secret cache. Timed out waiting

00:55:45.935 --> 00:55:47.295
<v Speaker 1>for the condition.

00:55:47.775 --> 00:55:49.375
<v Speaker 0>I'm hoping those are old.

00:55:49.615 --> 00:55:50.415
<v Speaker 1>Yeah.

00:55:54.575 --> 00:55:55.375
<v Speaker 0>There

00:55:55.375 --> 00:55:57.455
<v Speaker 0>we go. Oops. Sorry. Off you go. I

00:55:57.455 --> 00:55:58.895
<v Speaker 0>would I won't touch the keyboard anymore.

00:56:04.600 --> 00:56:06.600
<v Speaker 0>It doesn't log anything. It's a it's just

00:56:06.600 --> 00:56:08.920
<v Speaker 0>a really Nice. Okay. Do you wanna modify

00:56:08.920 --> 00:56:10.760
<v Speaker 0>that deployment and change the version to v

00:56:10.760 --> 00:56:11.000
<v Speaker 0>two?

00:56:16.815 --> 00:56:17.935
<v Speaker 1>Which version?

00:56:19.135 --> 00:56:21.935
<v Speaker 0>On the image. So just k edit deploy

00:56:21.935 --> 00:56:22.494
<v Speaker 0>clustered.

00:56:36.190 --> 00:56:37.630
<v Speaker 2>API version.

00:56:37.710 --> 00:56:39.870
<v Speaker 0>No. Change it on the container image.

00:56:40.110 --> 00:56:42.670
<v Speaker 0>So we're gonna upgrade my application

00:56:42.990 --> 00:56:44.545
<v Speaker 0>so we can see my events.

00:56:44.865 --> 00:56:46.225
<v Speaker 1>I see. I see. I see. I see.

00:56:46.225 --> 00:56:48.305
<v Speaker 1>I see. Container image.

00:56:48.625 --> 00:56:50.065
<v Speaker 0>Yeah. There we go.

00:56:50.785 --> 00:56:52.545
<v Speaker 0>On help container registry.

00:56:53.185 --> 00:56:54.465
<v Speaker 0>My new favorite registry.

00:56:55.910 --> 00:56:56.790
<v Speaker 1>Uh-huh.

00:56:57.910 --> 00:56:59.190
<v Speaker 0>So we should be able to change that

00:56:59.190 --> 00:57:00.950
<v Speaker 0>v one to a v two. I'll put

00:57:00.950 --> 00:57:03.350
<v Speaker 0>forward from my local machine. We'll see the

00:57:03.350 --> 00:57:04.870
<v Speaker 0>dance, and we will move on to our

00:57:04.870 --> 00:57:05.830
<v Speaker 0>second cluster.

00:57:08.070 --> 00:57:08.630
<v Speaker 0>Thanks, Phil.

00:57:13.444 --> 00:57:14.885
<v Speaker 1>Let's dash f.

00:57:23.580 --> 00:57:26.780
<v Speaker 0>Okay. Our new version is almost running.

00:57:32.780 --> 00:57:34.780
<v Speaker 0>There we go. Okay. I'm gonna Ariminating?

00:57:39.905 --> 00:57:41.585
<v Speaker 0>Okay. I'm port forwarding.

00:57:42.145 --> 00:57:43.265
<v Speaker 0>I'm now gonna

00:57:45.985 --> 00:57:46.705
<v Speaker 0>one, Pat.

00:57:54.210 --> 00:57:55.970
<v Speaker 0>Something weird networking there.

00:57:57.970 --> 00:58:00.210
<v Speaker 0>No video supported. Well, we're not getting to

00:58:00.210 --> 00:58:01.570
<v Speaker 0>see my dance this time.

00:58:02.930 --> 00:58:03.650
<v Speaker 0>That's annoying.

00:58:05.105 --> 00:58:07.425
<v Speaker 0>Alright. Fixed. Let's move on to our second

00:58:07.425 --> 00:58:08.145
<v Speaker 0>cluster.

00:58:10.305 --> 00:58:12.385
<v Speaker 1>Alright. How was your first cluster?

00:58:14.224 --> 00:58:14.705
<v Speaker 1>Whoo.

00:58:16.785 --> 00:58:17.345
<v Speaker 1>Steve.

00:58:18.380 --> 00:58:19.180
<v Speaker 1>Alright.

00:58:19.260 --> 00:58:22.220
<v Speaker 0>Alright. Close all of my 14 tabs.

00:58:25.420 --> 00:58:27.820
<v Speaker 0>We're now on Cluster 12.

00:58:27.900 --> 00:58:29.660
<v Speaker 0>Thank you again, Phil.

00:58:30.700 --> 00:58:32.375
<v Speaker 0>For something that you said you'd went easy

00:58:32.375 --> 00:58:33.895
<v Speaker 0>on is, took us a little bit of

00:58:33.895 --> 00:58:35.575
<v Speaker 0>time to find what we got there.

00:58:37.015 --> 00:58:40.055
<v Speaker 0>Second broken cluster is by Guy Templeton who

00:58:40.055 --> 00:58:43.095
<v Speaker 0>is the co chair of SIC auto scaling

00:58:43.650 --> 00:58:46.049
<v Speaker 0>and an engineer at SkyScanner.

00:58:46.049 --> 00:58:48.770
<v Speaker 0>And happens to live very local to me.

00:58:49.010 --> 00:58:50.290
<v Speaker 0>Hey, guy. How are you doing?

00:58:51.329 --> 00:58:53.330
<v Speaker 0>I have created a Auto scam.

00:58:54.609 --> 00:58:55.970
<v Speaker 0>I've created a

00:58:56.235 --> 00:58:58.715
<v Speaker 0>teleport session on the control plane of Cluster

00:58:58.715 --> 00:59:00.635
<v Speaker 0>12 if you wanna pop over.

00:59:01.275 --> 00:59:04.235
<v Speaker 0>I will set up our cube controls

00:59:04.235 --> 00:59:06.555
<v Speaker 0>stuff for alias k.

00:59:06.795 --> 00:59:08.395
<v Speaker 0>I should really just bake these into the

00:59:08.395 --> 00:59:09.195
<v Speaker 0>image, shouldn't I?

00:59:11.780 --> 00:59:12.740
<v Speaker 1>Fascinating.

00:59:15.540 --> 00:59:18.100
<v Speaker 0>Is it broken again? Nope. Wait. I keep

00:59:18.100 --> 00:59:20.420
<v Speaker 1>doing I keep connecting to my own

00:59:20.660 --> 00:59:21.140
<v Speaker 1>session.

00:59:24.555 --> 00:59:26.075
<v Speaker 1>Alright. Here we are.

00:59:26.715 --> 00:59:28.955
<v Speaker 1>Maybe. It's thinking about it.

00:59:32.315 --> 00:59:34.475
<v Speaker 0>Oh, excellent. Hi.

00:59:34.820 --> 00:59:36.420
<v Speaker 1>There I am. I will give you the

00:59:36.420 --> 00:59:39.860
<v Speaker 0>honor of running k get nodes, get pods,

00:59:39.860 --> 00:59:41.619
<v Speaker 0>whatever you fancy, and see if we have

00:59:41.780 --> 00:59:44.660
<v Speaker 0>oh, two clusters of an API server.

00:59:44.820 --> 00:59:46.260
<v Speaker 0>People are being very kind.

00:59:47.244 --> 00:59:49.165
<v Speaker 0>Although at this point in time, I actually

00:59:49.165 --> 00:59:51.165
<v Speaker 0>think it's easier for me to debug the

00:59:51.165 --> 00:59:54.045
<v Speaker 0>API server than stuff Yeah. Yeah.

00:59:55.244 --> 00:59:55.885
<v Speaker 1>Alright.

00:59:56.205 --> 00:59:58.925
<v Speaker 1>Okay. So we're looking for the cluster deployment.

00:59:59.165 --> 00:59:59.724
<v Speaker 0>We are.

01:00:01.329 --> 01:00:03.010
<v Speaker 1>And that is running.

01:00:03.650 --> 01:00:04.930
<v Speaker 1>So is Postgres.

01:00:04.930 --> 01:00:08.370
<v Speaker 1>And there are some Smerle tools,

01:00:09.089 --> 01:00:11.170
<v Speaker 1>which what is Smerle?

01:00:12.210 --> 01:00:14.835
<v Speaker 0>I have no idea. I am gonna Let's

01:00:14.835 --> 01:00:16.755
<v Speaker 1>ask Google. Smerle.

01:00:18.995 --> 01:00:21.875
<v Speaker 0>Smerle, connected counters for social media.

01:00:23.395 --> 01:00:24.915
<v Speaker 1>Surprisingly powerful

01:00:24.915 --> 01:00:25.875
<v Speaker 1>communication

01:00:25.875 --> 01:00:27.570
<v Speaker 1>tools for your business.

01:00:28.290 --> 01:00:30.370
<v Speaker 0>I wonder why we have Smeril on our

01:00:30.370 --> 01:00:31.010
<v Speaker 0>cluster.

01:00:31.410 --> 01:00:32.930
<v Speaker 1>Sam count

01:00:33.170 --> 01:00:35.890
<v Speaker 1>display in real time is my first

01:00:36.690 --> 01:00:37.490
<v Speaker 1>result.

01:00:37.490 --> 01:00:37.730
<v Speaker 1>Alright.

01:00:40.155 --> 01:00:41.195
<v Speaker 0>Shall we

01:00:41.995 --> 01:00:45.435
<v Speaker 0>run get pods in namespaces and see Yeah.

01:00:46.555 --> 01:00:47.435
<v Speaker 1>Oopsies.

01:00:47.435 --> 01:00:49.115
<v Speaker 0>See if there's elephant's effect.

01:01:07.625 --> 01:01:09.944
<v Speaker 1>Ping back in and see some of those

01:01:09.944 --> 01:01:12.905
<v Speaker 1>logs. There's three completed jobs.

01:01:12.905 --> 01:01:13.545
<v Speaker 1>So

01:01:13.865 --> 01:01:15.545
<v Speaker 1>why are there jobs here?

01:01:17.464 --> 01:01:19.145
<v Speaker 1>There's this system,

01:01:20.619 --> 01:01:22.140
<v Speaker 1>cube scheduler,

01:01:22.859 --> 01:01:23.660
<v Speaker 1>speaker.

01:01:23.740 --> 01:01:26.700
<v Speaker 1>Okay. So this this looks like somewhat

01:01:27.020 --> 01:01:27.820
<v Speaker 1>less

01:01:28.540 --> 01:01:29.420
<v Speaker 1>terrifying.

01:01:31.020 --> 01:01:33.675
<v Speaker 1>We have a pending sleep pod. So that

01:01:33.675 --> 01:01:35.995
<v Speaker 1>just looks like something that is sleeping forever.

01:01:36.955 --> 01:01:39.835
<v Speaker 1>It does. And timing out due to, like,

01:01:39.835 --> 01:01:41.595
<v Speaker 1>health checks or something.

01:01:42.395 --> 01:01:44.715
<v Speaker 0>It's also the weird smell stuff, which probably

01:01:44.715 --> 01:01:46.555
<v Speaker 0>shouldn't even be there anyway.

01:01:47.035 --> 01:01:50.020
<v Speaker 1>Yeah. Let's do Let's describe the deploy

01:01:50.580 --> 01:01:52.980
<v Speaker 1>and see why there are extra pods in

01:01:52.980 --> 01:01:53.940
<v Speaker 1>it. Yes?

01:01:55.300 --> 01:01:57.700
<v Speaker 0>Yeah. Yeah. Why let's see why this one's

01:01:57.700 --> 01:01:58.580
<v Speaker 0>pending, I guess.

01:02:00.945 --> 01:02:01.825
<v Speaker 0>Oh, no.

01:02:07.185 --> 01:02:09.105
<v Speaker 0>Yeah. Custard is fine. It looked like it

01:02:09.105 --> 01:02:09.585
<v Speaker 0>was running.

01:02:14.799 --> 01:02:16.880
<v Speaker 1>Yeah. Should we just try and apply the

01:02:16.880 --> 01:02:17.600
<v Speaker 0>update?

01:02:18.079 --> 01:02:19.599
<v Speaker 0>Well, we should switch it to version two.

01:02:19.599 --> 01:02:21.360
<v Speaker 0>Maybe maybe this cluster's working.

01:02:23.839 --> 01:02:25.920
<v Speaker 1>Rolling update. Yeah. Yeah.

01:02:26.480 --> 01:02:26.880
<v Speaker 1>Sure.

01:02:43.910 --> 01:02:44.790
<v Speaker 1>Alright.

01:02:45.670 --> 01:02:49.030
<v Speaker 1>Progress deadline seconds. Oh, I can't scroll. Right.

01:03:11.100 --> 01:03:11.820
<v Speaker 0>Uh-oh.

01:03:14.380 --> 01:03:16.300
<v Speaker 1>Could not be patched.

01:03:16.300 --> 01:03:19.100
<v Speaker 1>Request is too large. FCD server.

01:03:21.165 --> 01:03:21.965
<v Speaker 1>Oh, shit.

01:03:22.685 --> 01:03:24.765
<v Speaker 1>Okay.

01:03:26.845 --> 01:03:29.485
<v Speaker 0>I don't like ETCD problems.

01:03:34.605 --> 01:03:36.045
<v Speaker 1>Deployments.apps

01:03:36.045 --> 01:03:38.360
<v Speaker 1>could not be patched. Request is too large.

01:03:38.360 --> 01:03:39.720
<v Speaker 1>So I'm wondering.

01:03:39.720 --> 01:03:40.280
<v Speaker 1>So

01:03:43.160 --> 01:03:45.560
<v Speaker 1>what what are these so we have these

01:03:45.560 --> 01:03:47.720
<v Speaker 1>extra pods in the namespace. Right?

01:03:49.485 --> 01:03:51.565
<v Speaker 1>How big are these pods?

01:03:51.645 --> 01:03:54.125
<v Speaker 1>And they've been sitting there. Right?

01:03:54.445 --> 01:03:56.125
<v Speaker 1>And the sleep pod

01:03:56.285 --> 01:03:57.725
<v Speaker 1>has a pending status.

01:04:02.920 --> 01:04:04.120
<v Speaker 1>No logs.

01:04:05.240 --> 01:04:07.880
<v Speaker 0>You may want to scrape it and see.

01:04:08.280 --> 01:04:08.760
<v Speaker 1>Yeah.

01:04:17.535 --> 01:04:19.375
<v Speaker 1>Exists tolerations.

01:04:20.015 --> 01:04:22.415
<v Speaker 1>Not ready. Execute exists

01:04:22.815 --> 01:04:26.335
<v Speaker 1>for OP. Exists for three three hundred seconds.

01:04:26.335 --> 01:04:27.695
<v Speaker 1>Okay. So five minutes.

01:04:29.695 --> 01:04:30.895
<v Speaker 1>Tolerations.

01:04:31.455 --> 01:04:33.570
<v Speaker 1>Unreachable. Execute.

01:04:35.009 --> 01:04:37.490
<v Speaker 0>Something tells me these are just noise to

01:04:37.490 --> 01:04:39.890
<v Speaker 0>get us looking at the wrong thing.

01:04:40.529 --> 01:04:41.490
<v Speaker 1>Maybe.

01:04:42.529 --> 01:04:45.410
<v Speaker 0>So when we try to modify the

01:04:45.490 --> 01:04:47.885
<v Speaker 0>clustered deployment with the new version of our

01:04:47.885 --> 01:04:48.525
<v Speaker 0>image,

01:04:48.925 --> 01:04:50.845
<v Speaker 0>we got an error from etcd

01:04:50.845 --> 01:04:52.845
<v Speaker 0>saying that the request was too large.

01:04:53.325 --> 01:04:54.525
<v Speaker 0>So Yeah.

01:04:54.845 --> 01:04:57.725
<v Speaker 0>I think we wanna go check

01:04:58.765 --> 01:05:00.845
<v Speaker 0>our etcd manifest

01:05:01.320 --> 01:05:03.400
<v Speaker 0>and maybe the STD logs.

01:05:03.800 --> 01:05:05.240
<v Speaker 0>Yeah. We should probably look at the STD

01:05:05.240 --> 01:05:07.000
<v Speaker 0>logs. Right? So

01:05:07.960 --> 01:05:10.680
<v Speaker 1>cool. Where do those live? Is it varloggedtd?

01:05:11.240 --> 01:05:13.000
<v Speaker 0>They'll be under varlogged

01:05:13.000 --> 01:05:15.080
<v Speaker 0>containers and then there should be an STD

01:05:15.080 --> 01:05:16.440
<v Speaker 0>file hopefully

01:05:16.440 --> 01:05:17.080
<v Speaker 0>in there.

01:05:23.214 --> 01:05:24.415
<v Speaker 1>Is it directory?

01:05:24.895 --> 01:05:25.615
<v Speaker 0>Yeah.

01:05:25.775 --> 01:05:26.975
<v Speaker 0>Yeah. That's the one.

01:05:29.775 --> 01:05:31.214
<v Speaker 0>Alright. Lots of hell.

01:05:33.490 --> 01:05:34.610
<v Speaker 1>Okay.

01:05:34.930 --> 01:05:35.810
<v Speaker 1>Wow.

01:05:36.450 --> 01:05:38.610
<v Speaker 1>I hit control c

01:05:39.490 --> 01:05:40.850
<v Speaker 1>just so we can

01:05:42.130 --> 01:05:44.850
<v Speaker 1>wow. Health okay. Okay. There's a ton of

01:05:44.850 --> 01:05:46.130
<v Speaker 1>health checks here.

01:05:46.370 --> 01:05:47.170
<v Speaker 0>Yeah. I

01:05:48.915 --> 01:05:52.755
<v Speaker 1>Somebody is sending so many health checks that

01:05:53.155 --> 01:05:53.795
<v Speaker 1>right?

01:05:57.715 --> 01:05:59.475
<v Speaker 1>There are like what?

01:06:00.435 --> 01:06:03.155
<v Speaker 0>Every ten seconds. Yeah. There's a health check.

01:06:04.080 --> 01:06:06.400
<v Speaker 1>Okay. That's okay though. That shouldn't

01:06:06.640 --> 01:06:08.160
<v Speaker 0>So I think this is

01:06:08.800 --> 01:06:11.600
<v Speaker 0>strangely Okay. Good because it means that STD

01:06:11.600 --> 01:06:14.320
<v Speaker 0>probably isn't broken and just misconfigured.

01:06:14.880 --> 01:06:16.160
<v Speaker 0>That's kinda what my hunch is So

01:06:17.165 --> 01:06:19.325
<v Speaker 0>why don't we jump into slash e t

01:06:19.325 --> 01:06:21.885
<v Speaker 0>c slash kubernetes slash manifests?

01:06:24.525 --> 01:06:25.405
<v Speaker 1>Kubernetes

01:06:25.405 --> 01:06:26.285
<v Speaker 1>every time.

01:06:33.010 --> 01:06:34.050
<v Speaker 0>And if we do

01:06:34.930 --> 01:06:35.490
<v Speaker 0>yeah.

01:06:36.130 --> 01:06:37.730
<v Speaker 0>Take a look at that cd.gam.

01:06:37.730 --> 01:06:39.010
<v Speaker 0>In fact, let's see if it's been modified.

01:06:39.010 --> 01:06:40.370
<v Speaker 0>Do I do a l s dash l

01:06:40.370 --> 01:06:42.130
<v Speaker 0>and see the timestamp on it?

01:06:42.770 --> 01:06:43.490
<v Speaker 1>Sure.

01:06:44.050 --> 01:06:44.530
<v Speaker 2>Oops.

01:06:48.035 --> 01:06:49.795
<v Speaker 0>I really hope it's been modified.

01:06:54.035 --> 01:06:55.155
<v Speaker 1>March 30

01:06:55.555 --> 01:06:56.915
<v Speaker 0>Yeah. Last night. '23.

01:06:58.490 --> 01:07:00.170
<v Speaker 0>Yeah. We see you guy. We know what

01:07:00.170 --> 01:07:02.490
<v Speaker 0>you're doing here. Alright. Let's pop this open.

01:07:02.650 --> 01:07:04.650
<v Speaker 0>And hopefully, it's as simple as a flag

01:07:04.650 --> 01:07:07.050
<v Speaker 0>he's passing them to restrict the size

01:07:07.050 --> 01:07:07.770
<v Speaker 0>of

01:07:08.010 --> 01:07:09.210
<v Speaker 0>the request.

01:07:11.369 --> 01:07:12.089
<v Speaker 0>Do you see it?

01:07:13.085 --> 01:07:15.885
<v Speaker 1>I hang on. Max request bytes

01:07:15.885 --> 01:07:16.685
<v Speaker 1>five.

01:07:18.365 --> 01:07:20.125
<v Speaker 1>Shall we just delete that line?

01:07:20.924 --> 01:07:22.365
<v Speaker 0>We can either delete it or make it

01:07:22.365 --> 01:07:24.285
<v Speaker 0>really big. I'm happy to delete it and

01:07:24.285 --> 01:07:25.164
<v Speaker 0>put it back if we need.

01:07:25.970 --> 01:07:28.450
<v Speaker 0>We'll remember my request by or comment oh,

01:07:28.450 --> 01:07:30.210
<v Speaker 0>no. If you yeah. Comment at it. Let's

01:07:30.210 --> 01:07:32.049
<v Speaker 0>do that. Good idea. Can we do that?

01:07:32.049 --> 01:07:33.809
<v Speaker 1>Does that even more how do we comment?

01:07:33.809 --> 01:07:36.210
<v Speaker 1>Oh, wait. Wait. Wait. It'll be a hash

01:07:36.210 --> 01:07:38.849
<v Speaker 0>symbol. Yeah. Or a pound Sorry. If you're

01:07:38.849 --> 01:07:41.410
<v Speaker 0>American, which well, the audience maybe.

01:07:42.025 --> 01:07:44.505
<v Speaker 0>Never understood. Oktothorp.

01:07:44.505 --> 01:07:45.785
<v Speaker 1>Oktothorp.

01:07:47.385 --> 01:07:49.225
<v Speaker 1>What? The German word?

01:07:50.105 --> 01:07:52.105
<v Speaker 1>No. That's the that's

01:07:53.145 --> 01:07:54.505
<v Speaker 1>saw you were telling me the German word

01:07:54.505 --> 01:07:56.105
<v Speaker 0>for, like, a pound symbol or some or

01:07:56.105 --> 01:07:58.820
<v Speaker 0>a hash symbol there. Yeah. The German symbol

01:07:58.820 --> 01:08:00.580
<v Speaker 1>for the pound is the same. Oh, alright.

01:08:00.580 --> 01:08:01.460
<v Speaker 1>The number.

01:08:04.020 --> 01:08:05.460
<v Speaker 1>The number's the thing.

01:08:06.100 --> 01:08:08.420
<v Speaker 1>Yeah. I only know this because my grandmother's

01:08:08.420 --> 01:08:09.940
<v Speaker 1>old recipes were still in pounds.

01:08:11.775 --> 01:08:14.335
<v Speaker 0>Got it. A German pound is 500 grams.

01:08:14.335 --> 01:08:16.014
<v Speaker 1>How much is a British pound?

01:08:16.495 --> 01:08:18.814
<v Speaker 1>I mean, like, the weight, not the money.

01:08:18.895 --> 01:08:20.175
<v Speaker 0>I have no idea.

01:08:20.574 --> 01:08:21.854
<v Speaker 0>I wish I knew that.

01:08:22.335 --> 01:08:24.975
<v Speaker 0>I'm gonna modify deployment just to see if

01:08:24.975 --> 01:08:26.734
<v Speaker 0>it works. Maybe this is gonna be nice

01:08:26.734 --> 01:08:28.050
<v Speaker 0>and simple.

01:08:30.770 --> 01:08:32.369
<v Speaker 0>I always say that was such hope.

01:08:39.984 --> 01:08:40.625
<v Speaker 0>Well,

01:08:41.665 --> 01:08:43.264
<v Speaker 0>the good news and bad news

01:08:44.944 --> 01:08:45.265
<v Speaker 1>It

01:08:45.825 --> 01:08:47.984
<v Speaker 1>saves get But it's not doing it. But

01:08:47.984 --> 01:08:49.024
<v Speaker 1>it didn't get edited.

01:08:52.220 --> 01:08:54.939
<v Speaker 0>So the edit does show it, but yeah,

01:08:54.939 --> 01:08:55.739
<v Speaker 0>we're not

01:08:57.260 --> 01:08:58.779
<v Speaker 1>Shall we redeploy it?

01:09:02.460 --> 01:09:04.220
<v Speaker 1>What possibly delete the pod first?

01:09:05.585 --> 01:09:07.505
<v Speaker 0>Yeah. Why don't we delete the pod and

01:09:07.505 --> 01:09:09.665
<v Speaker 0>then I reckon we're probably gonna have to

01:09:09.665 --> 01:09:10.224
<v Speaker 0>check

01:09:10.864 --> 01:09:13.265
<v Speaker 0>replicate could be the same problem as the

01:09:13.265 --> 01:09:15.264
<v Speaker 0>last one. Probably it could be

01:09:16.625 --> 01:09:18.625
<v Speaker 0>pod security policy or mutate webhook.

01:09:19.420 --> 01:09:20.859
<v Speaker 0>But let's delete the pods and see what

01:09:20.859 --> 01:09:21.099
<v Speaker 0>happens.

01:09:31.845 --> 01:09:32.885
<v Speaker 1>Hanging.

01:09:36.165 --> 01:09:38.325
<v Speaker 0>That should be okay. I think it's thinking

01:09:38.325 --> 01:09:39.285
<v Speaker 0>about it, hopefully.

01:09:45.590 --> 01:09:47.270
<v Speaker 0>I'm gonna control c it and just see

01:09:47.270 --> 01:09:48.069
<v Speaker 0>what's happening.

01:09:49.270 --> 01:09:52.229
<v Speaker 0>Yeah. I think it's trying. Okay. Why Terminating.

01:09:52.309 --> 01:09:53.590
<v Speaker 0>Why don't we Why is it

01:09:56.070 --> 01:09:57.349
<v Speaker 1>Why

01:09:57.429 --> 01:09:58.789
<v Speaker 1>is it terminating forever?

01:10:01.605 --> 01:10:04.804
<v Speaker 0>Either something It won't. Mess with again or

01:10:05.845 --> 01:10:08.005
<v Speaker 0>it's just being particularly slow.

01:10:08.405 --> 01:10:10.324
<v Speaker 0>Let's describe our replica set.

01:10:12.885 --> 01:10:13.285
<v Speaker 0>Okay.

01:10:14.860 --> 01:10:16.780
<v Speaker 0>No. We don't see anything here.

01:10:20.220 --> 01:10:21.820
<v Speaker 0>There's no PSP.

01:10:26.380 --> 01:10:28.300
<v Speaker 0>And I can never remember the mutated web.

01:10:28.300 --> 01:10:29.500
<v Speaker 0>I think this is the same as the

01:10:29.500 --> 01:10:29.900
<v Speaker 0>last one.

01:10:30.514 --> 01:10:31.954
<v Speaker 0>It feels like it. Right?

01:10:33.155 --> 01:10:34.274
<v Speaker 1>Sure.

01:10:34.275 --> 01:10:37.635
<v Speaker 1>It's not No. Well, it's a little different

01:10:37.635 --> 01:10:40.994
<v Speaker 1>though because the replica set, like, it's just

01:10:40.994 --> 01:10:42.435
<v Speaker 1>literally not

01:10:43.300 --> 01:10:44.180
<v Speaker 1>leaving.

01:10:46.260 --> 01:10:48.580
<v Speaker 1>Like, do we not have delete permissions?

01:10:48.820 --> 01:10:49.460
<v Speaker 1>Like,

01:10:50.660 --> 01:10:52.580
<v Speaker 1>why is it taking forever to terminate?

01:10:57.844 --> 01:10:58.724
<v Speaker 0>Don't do.

01:11:01.445 --> 01:11:04.644
<v Speaker 0>Okay. It's definitely Warning. Node's not ready.

01:11:07.925 --> 01:11:10.165
<v Speaker 1>From node controller. Node is not ready.

01:11:11.260 --> 01:11:12.780
<v Speaker 1>Let's let's

01:11:12.780 --> 01:11:15.340
<v Speaker 1>describe the nodes. Yeah. Good idea.

01:11:19.580 --> 01:11:19.980
<v Speaker 1>I

01:11:20.460 --> 01:11:21.179
<v Speaker 1>oh.

01:11:22.620 --> 01:11:23.020
<v Speaker 0>Yeah.

01:11:23.735 --> 01:11:24.534
<v Speaker 1>Alright.

01:11:26.215 --> 01:11:27.014
<v Speaker 1>So

01:11:28.375 --> 01:11:30.054
<v Speaker 1>these are all of the nodes.

01:11:31.735 --> 01:11:33.974
<v Speaker 2>Maybe I should just describe them in

01:11:34.775 --> 01:11:35.494
<v Speaker 1>in turn.

01:11:36.300 --> 01:11:39.340
<v Speaker 1>Non terminated pods, 15 in total.

01:11:39.820 --> 01:11:40.460
<v Speaker 1>What?

01:11:47.660 --> 01:11:50.060
<v Speaker 0>The kubel isn't posting node status anymore.

01:11:51.435 --> 01:11:53.755
<v Speaker 0>There's something wrong with the kubelet.

01:11:53.755 --> 01:11:54.794
<v Speaker 0>Do you see that?

01:11:59.275 --> 01:12:02.155
<v Speaker 1>Memory pressure. Kubelet stopped posting.

01:12:02.235 --> 01:12:02.954
<v Speaker 0>Yeah.

01:12:03.114 --> 01:12:04.474
<v Speaker 0>There's something wrong.

01:12:05.870 --> 01:12:08.670
<v Speaker 0>Okay. Which was also actually, the cubelet would

01:12:08.670 --> 01:12:10.670
<v Speaker 0>explain why we're not getting our new pod

01:12:10.670 --> 01:12:13.389
<v Speaker 0>created either because Yes.

01:12:14.190 --> 01:12:15.070
<v Speaker 1>It's just

01:12:17.655 --> 01:12:19.495
<v Speaker 0>well, it's running. There's that's a I guess

01:12:19.495 --> 01:12:20.455
<v Speaker 0>that's a star.

01:12:21.175 --> 01:12:23.255
<v Speaker 1>This is we're still on the API server

01:12:23.255 --> 01:12:23.895
<v Speaker 1>node.

01:12:24.695 --> 01:12:25.255
<v Speaker 0>Oh, yeah.

01:12:30.619 --> 01:12:32.699
<v Speaker 1>Why don't you hop over to the other

01:12:32.699 --> 01:12:34.459
<v Speaker 1>node and check on the cubelet?

01:12:35.099 --> 01:12:36.059
<v Speaker 0>Good idea.

01:12:36.460 --> 01:12:37.099
<v Speaker 0>Okay.

01:12:40.060 --> 01:12:41.260
<v Speaker 0>That's good. I guess if we can get

01:12:41.260 --> 01:12:42.300
<v Speaker 0>it working on one,

01:12:42.835 --> 01:12:44.355
<v Speaker 0>we should be able to see it. It

01:12:44.355 --> 01:12:46.434
<v Speaker 0>depends where it's scheduled. Let's check that first.

01:12:46.434 --> 01:12:47.635
<v Speaker 0>So get

01:12:49.474 --> 01:12:52.994
<v Speaker 0>oh, boy. So this terminating pod was scheduled

01:12:52.994 --> 01:12:53.794
<v Speaker 0>on

01:12:54.195 --> 01:12:56.034
<v Speaker 0>l zed. Is that the one I happen

01:12:56.034 --> 01:12:57.970
<v Speaker 0>to go on? No. Of course not. No.

01:12:57.970 --> 01:12:58.370
<v Speaker 1>Okay.

01:13:00.050 --> 01:13:01.570
<v Speaker 0>Let's go on to l zed.

01:13:05.490 --> 01:13:06.770
<v Speaker 0>And there's no kubelet.

01:13:14.945 --> 01:13:17.345
<v Speaker 0>Oh, that's not my it's a system

01:13:17.905 --> 01:13:19.025
<v Speaker 0>d service.

01:13:19.105 --> 01:13:19.505
<v Speaker 0>So

01:13:19.905 --> 01:13:20.385
<v Speaker 1>Yeah.

01:13:27.630 --> 01:13:28.830
<v Speaker 1>Exact start

01:13:29.390 --> 01:13:30.510
<v Speaker 1>is missing.

01:13:33.790 --> 01:13:35.790
<v Speaker 0>I don't know if the order there is

01:13:35.790 --> 01:13:36.830
<v Speaker 0>some No.

01:13:37.070 --> 01:13:38.430
<v Speaker 0>I don't like the look of that, so

01:13:38.430 --> 01:13:39.230
<v Speaker 0>I'm gonna remove it.

01:13:40.284 --> 01:13:42.124
<v Speaker 0>I don't want an enthusiastic star.

01:13:46.684 --> 01:13:48.364
<v Speaker 0>It looked alright. I would at least unless

01:13:48.364 --> 01:13:49.484
<v Speaker 0>it's crashing.

01:13:49.485 --> 01:13:51.885
<v Speaker 0>I see a status. Right? We should let's

01:13:51.885 --> 01:13:52.684
<v Speaker 0>trust system d.

01:13:54.150 --> 01:13:56.630
<v Speaker 0>Okay. It says oh, it's telling me that

01:13:56.630 --> 01:13:59.269
<v Speaker 0>it's been really Active activating

01:13:59.350 --> 01:14:00.870
<v Speaker 1>since Thursday

01:14:00.870 --> 01:14:02.230
<v Speaker 1>1810.

01:14:02.230 --> 01:14:05.030
<v Speaker 1>That is literally right now three seconds ago.

01:14:09.125 --> 01:14:10.965
<v Speaker 1>Right there. Active.

01:14:11.125 --> 01:14:12.164
<v Speaker 1>Keyboard service.

01:14:13.045 --> 01:14:13.925
<v Speaker 1>We just

01:14:15.045 --> 01:14:16.965
<v Speaker 0>Oh, yeah. Service has more than one exact

01:14:16.965 --> 01:14:19.364
<v Speaker 0>start setting which is not allowed. I just

01:14:19.364 --> 01:14:20.565
<v Speaker 0>removed that. Right?

01:14:22.260 --> 01:14:23.940
<v Speaker 0>Yeah. Why did

01:14:24.340 --> 01:14:26.500
<v Speaker 0>maybe my daemon reload didn't work.

01:14:27.540 --> 01:14:30.500
<v Speaker 0>And then restart Can you restart kubelet?

01:14:33.860 --> 01:14:36.500
<v Speaker 1>Unit kubelet service has a bad unit file

01:14:36.500 --> 01:14:36.980
<v Speaker 1>setting.

01:14:38.625 --> 01:14:41.025
<v Speaker 0>More than one exact star. Okay. So I'm

01:14:41.025 --> 01:14:42.385
<v Speaker 0>I'm

01:14:42.385 --> 01:14:43.184
<v Speaker 0>assuming

01:14:45.905 --> 01:14:48.144
<v Speaker 0>one of these other files.

01:14:49.184 --> 01:14:51.344
<v Speaker 0>There must be another system, the overlay.

01:14:52.760 --> 01:14:54.440
<v Speaker 0>There's a way to get that as well.

01:14:56.520 --> 01:14:57.320
<v Speaker 0>K.

01:15:00.920 --> 01:15:02.680
<v Speaker 1>You know, I think we need to like

01:15:02.680 --> 01:15:03.720
<v Speaker 1>stop

01:15:03.720 --> 01:15:05.000
<v Speaker 1>the cubelet first.

01:15:10.475 --> 01:15:12.235
<v Speaker 1>And then restart it?

01:15:15.594 --> 01:15:16.315
<v Speaker 1>Because

01:15:17.675 --> 01:15:19.034
<v Speaker 1>environment file.

01:15:19.275 --> 01:15:20.955
<v Speaker 1>There's a lot of environment file.

01:15:23.410 --> 01:15:26.530
<v Speaker 1>This drop in only works with cube, Adam.

01:15:27.490 --> 01:15:27.810
<v Speaker 1>K.

01:15:45.085 --> 01:15:46.925
<v Speaker 0>Okay. Let's stop to keep it.

01:15:48.844 --> 01:15:51.369
<v Speaker 0>Why does it keep Wait, I did modify

01:15:51.369 --> 01:15:53.289
<v Speaker 0>it. I put that exact start back in

01:15:53.289 --> 01:15:55.129
<v Speaker 0>because I wanted to confirm the message.

01:15:55.770 --> 01:15:56.969
<v Speaker 0>Stop kubelet.

01:15:56.969 --> 01:15:58.729
<v Speaker 0>Let's start kubelet

01:15:59.770 --> 01:16:00.969
<v Speaker 0>status kubelet.

01:16:05.985 --> 01:16:07.745
<v Speaker 0>How did I get that without the

01:16:08.145 --> 01:16:08.945
<v Speaker 0>pager?

01:16:12.705 --> 01:16:15.745
<v Speaker 0>Okay. So this is complaining now that

01:16:17.280 --> 01:16:18.959
<v Speaker 0>who knows? Let's go to logs.

01:16:23.360 --> 01:16:24.320
<v Speaker 1>Failed

01:16:24.320 --> 01:16:26.159
<v Speaker 1>code accident exception

01:16:26.159 --> 01:16:28.320
<v Speaker 1>failed. Oh, there's quite a lot in here.

01:16:28.320 --> 01:16:28.480
<v Speaker 0>Right?

01:16:30.835 --> 01:16:31.715
<v Speaker 1>Oh, god.

01:16:33.395 --> 01:16:34.274
<v Speaker 0>It just

01:16:34.835 --> 01:16:36.274
<v Speaker 0>speed up on our screen.

01:16:40.114 --> 01:16:41.235
<v Speaker 2>Go routine.

01:16:44.034 --> 01:16:45.474
<v Speaker 0>I don't see an

01:16:46.360 --> 01:16:47.960
<v Speaker 0>actual error yet.

01:16:55.320 --> 01:16:56.600
<v Speaker 0>And ah, there we go.

01:17:00.105 --> 01:17:03.065
<v Speaker 0>So the CPU, CPS quota period of one

01:17:03.065 --> 01:17:05.065
<v Speaker 0>second requires a feature set

01:17:05.705 --> 01:17:07.865
<v Speaker 0>feature gate to be enabled on the kubelet.

01:17:07.865 --> 01:17:08.585
<v Speaker 0>Okay.

01:17:10.025 --> 01:17:12.105
<v Speaker 0>So we can either enable this feature or

01:17:12.105 --> 01:17:12.425
<v Speaker 1>enable.

01:17:15.050 --> 01:17:17.050
<v Speaker 0>That makes sense? I I I don't know.

01:17:17.050 --> 01:17:18.890
<v Speaker 1>I've I've got Yep. Yep. I've got Kiplet

01:17:18.890 --> 01:17:20.090
<v Speaker 0>blindness now.

01:17:20.890 --> 01:17:24.730
<v Speaker 1>Yep. Let's go and add that custom.

01:17:25.210 --> 01:17:26.330
<v Speaker 0>Are you in this session?

01:17:27.265 --> 01:17:29.105
<v Speaker 1>I am. Sorry.

01:17:33.265 --> 01:17:36.705
<v Speaker 1>Maybe I am? Wait. Hang on. No. I'm

01:17:36.705 --> 01:17:38.385
<v Speaker 1>not in that session. Sorry. You're in the

01:17:38.385 --> 01:17:39.825
<v Speaker 1>node. I I haven't joined you.

01:17:41.700 --> 01:17:42.900
<v Speaker 1>LZ. Right?

01:17:44.180 --> 01:17:45.140
<v Speaker 0>Yes.

01:17:48.660 --> 01:17:49.780
<v Speaker 1>There we are.

01:17:50.500 --> 01:17:52.580
<v Speaker 0>Okay. That we broke. Okay.

01:17:55.245 --> 01:17:57.005
<v Speaker 1>We do have the CPUCFS

01:17:57.005 --> 01:17:58.205
<v Speaker 1>quota period.

01:17:59.005 --> 01:18:01.085
<v Speaker 0>Should we just comment that out?

01:18:01.485 --> 01:18:02.285
<v Speaker 1>Yep.

01:18:04.125 --> 01:18:05.245
<v Speaker 0>And

01:18:05.245 --> 01:18:06.685
<v Speaker 0>we'll restart.

01:18:14.100 --> 01:18:15.380
<v Speaker 0>Maybe that'll help.

01:18:17.380 --> 01:18:18.739
<v Speaker 0>Although I don't know if the fax is

01:18:18.739 --> 01:18:20.500
<v Speaker 0>just to disable the feature or enable the

01:18:20.500 --> 01:18:22.585
<v Speaker 0>feature gate, but we'll just we just wanna

01:18:22.585 --> 01:18:24.184
<v Speaker 0>get the system all running.

01:18:25.224 --> 01:18:26.664
<v Speaker 0>It's doing stuff.

01:18:27.945 --> 01:18:28.744
<v Speaker 1>Yeah.

01:18:31.864 --> 01:18:33.704
<v Speaker 1>Let me check on the other thing.

01:18:41.500 --> 01:18:41.900
<v Speaker 1>So,

01:18:42.540 --> 01:18:43.900
<v Speaker 1>on this side,

01:18:44.140 --> 01:18:46.460
<v Speaker 1>both Postgres and

01:18:47.420 --> 01:18:49.660
<v Speaker 1>our clustered workload are,

01:18:49.900 --> 01:18:50.540
<v Speaker 1>terminating.

01:18:52.845 --> 01:18:55.485
<v Speaker 1>Bunches of things are terminating.

01:18:57.805 --> 01:18:59.885
<v Speaker 1>Uh-huh. We are down to

01:19:02.925 --> 01:19:03.485
<v Speaker 1>pending.

01:19:06.030 --> 01:19:06.829
<v Speaker 1>Interesting.

01:19:10.829 --> 01:19:12.030
<v Speaker 1>We broke it.

01:19:16.110 --> 01:19:16.829
<v Speaker 0>Okay.

01:19:17.150 --> 01:19:18.349
<v Speaker 0>I'm

01:19:18.349 --> 01:19:21.265
<v Speaker 0>gonna check the kubelet on the last machine.

01:19:21.265 --> 01:19:22.625
<v Speaker 0>Did I join name two?

01:19:23.505 --> 01:19:24.385
<v Speaker 0>Eight nine.

01:19:25.265 --> 01:19:26.145
<v Speaker 0>No. Okay.

01:19:27.505 --> 01:19:28.865
<v Speaker 0>Let's just see if we have a kubelet

01:19:28.865 --> 01:19:29.505
<v Speaker 0>on here.

01:19:34.590 --> 01:19:36.030
<v Speaker 0>Yeah. We do have a kubelet. Okay. So

01:19:36.030 --> 01:19:37.710
<v Speaker 0>we now have a kubelet running on all

01:19:37.710 --> 01:19:39.070
<v Speaker 0>of the worker nodes.

01:19:40.750 --> 01:19:43.150
<v Speaker 0>However, we're still having a problems

01:19:43.469 --> 01:19:45.070
<v Speaker 0>terminating and scheduling

01:19:46.030 --> 01:19:47.230
<v Speaker 0>the cluster pod. Right?

01:19:52.985 --> 01:19:53.785
<v Speaker 0>Available.

01:19:54.185 --> 01:19:56.025
<v Speaker 0>Run get pods again or just does it

01:19:56.025 --> 01:19:57.385
<v Speaker 0>still just say terminating?

01:19:59.225 --> 01:20:00.344
<v Speaker 0>Oh, no. It's not.

01:20:01.785 --> 01:20:02.505
<v Speaker 0>Anything?

01:20:02.825 --> 01:20:04.585
<v Speaker 0>That that's better. Okay. So

01:20:05.520 --> 01:20:07.840
<v Speaker 0>why is Right. Postgres pending?

01:20:09.840 --> 01:20:10.639
<v Speaker 1>I

01:20:10.640 --> 01:20:13.679
<v Speaker 1>don't know. And oh, thirty four seconds.

01:20:16.480 --> 01:20:18.495
<v Speaker 0>You wanna try to describe and post this?

01:20:18.495 --> 01:20:20.495
<v Speaker 0>May maybe we're just being impatient. Maybe it's

01:20:20.495 --> 01:20:21.935
<v Speaker 0>it's coming back to life.

01:20:25.375 --> 01:20:26.415
<v Speaker 1>Every

01:20:26.495 --> 01:20:26.815
<v Speaker 1>time.

01:20:31.290 --> 01:20:32.489
<v Speaker 1>No events.

01:20:32.490 --> 01:20:35.770
<v Speaker 0>Absolutely no information there. State till set.

01:20:38.650 --> 01:20:39.530
<v Speaker 1>Node,

01:20:39.530 --> 01:20:40.170
<v Speaker 1>none.

01:20:41.130 --> 01:20:42.969
<v Speaker 1>Stat Oh, there's no scheduler.

01:20:47.130 --> 01:20:49.025
<v Speaker 0>Where did you see note none?

01:20:49.985 --> 01:20:52.065
<v Speaker 1>Note none. Right here. Oh, yeah. Yeah. Okay.

01:20:52.065 --> 01:20:55.345
<v Speaker 1>So Oh, sorry. I'm, like, highlighting it. Do

01:20:55.345 --> 01:20:56.864
<v Speaker 1>me use the screen sharing.

01:20:58.385 --> 01:21:00.945
<v Speaker 1>Yeah. There's no node, and there's no IP.

01:21:03.380 --> 01:21:05.620
<v Speaker 0>So we do have a scheduler running. I'm

01:21:05.620 --> 01:21:07.380
<v Speaker 0>gonna grab the logs of it.

01:21:11.300 --> 01:21:12.100
<v Speaker 0>Copy and paste.

01:21:18.695 --> 01:21:21.815
<v Speaker 0>Schedule appears to be okay.

01:21:25.815 --> 01:21:26.215
<v Speaker 0>Shoot.

01:21:37.760 --> 01:21:40.400
<v Speaker 0>Okay. So our schedule is running, but we're

01:21:40.400 --> 01:21:42.560
<v Speaker 0>not getting pods assigned to a node.

01:21:51.425 --> 01:21:52.545
<v Speaker 0>I'm not sure.

01:21:56.880 --> 01:21:58.320
<v Speaker 2>I'm looking at this.

01:22:00.560 --> 01:22:02.719
<v Speaker 0>And the the notes are reported healthy. Right?

01:22:02.719 --> 01:22:02.960
<v Speaker 0>Yeah.

01:22:07.845 --> 01:22:08.565
<v Speaker 1>Yeah.

01:22:08.725 --> 01:22:09.925
<v Speaker 1>What

01:22:10.325 --> 01:22:12.485
<v Speaker 1>about taints? Do the notes have weird taints

01:22:12.485 --> 01:22:13.205
<v Speaker 1>on them

01:22:15.445 --> 01:22:18.485
<v Speaker 0>We can that wouldn't allow us to schedule

01:22:18.485 --> 01:22:18.885
<v Speaker 1>things?

01:22:22.470 --> 01:22:24.550
<v Speaker 2>Invalid disk capacity.

01:22:32.390 --> 01:22:33.270
<v Speaker 0>Oh, yeah.

01:22:33.910 --> 01:22:34.790
<v Speaker 0>Good catch.

01:22:36.070 --> 01:22:39.165
<v Speaker 1>And then so note is now

01:22:39.805 --> 01:22:40.445
<v Speaker 1>so

01:22:41.805 --> 01:22:44.525
<v Speaker 0>So our Updated node

01:22:44.525 --> 01:22:47.324
<v Speaker 1>allocatable limit across pods.

01:22:48.285 --> 01:22:48.765
<v Speaker 1>K.

01:22:52.850 --> 01:22:54.290
<v Speaker 1>Sorry. What are you thinking?

01:22:56.530 --> 01:22:57.650
<v Speaker 0>Yes. So

01:22:58.210 --> 01:23:00.050
<v Speaker 0>when you pointed out the

01:23:01.330 --> 01:23:04.210
<v Speaker 0>valid capacity zero and image fail system, that's

01:23:04.210 --> 01:23:05.090
<v Speaker 0>obviously a

01:23:05.855 --> 01:23:06.735
<v Speaker 0>problem.

01:23:08.094 --> 01:23:09.695
<v Speaker 0>And that's on the

01:23:11.775 --> 01:23:13.215
<v Speaker 0>let's notice that.

01:23:18.175 --> 01:23:18.735
<v Speaker 0>L zed.

01:23:20.500 --> 01:23:21.539
<v Speaker 2>L zed.

01:23:21.780 --> 01:23:23.219
<v Speaker 0>And the other one

01:23:23.460 --> 01:23:25.780
<v Speaker 0>oh, no. Wait. No disk pressure. Sufficient memory.

01:23:25.780 --> 01:23:28.260
<v Speaker 0>Okay. So the other nodes aren't reporting the

01:23:28.260 --> 01:23:28.979
<v Speaker 0>same.

01:23:29.860 --> 01:23:31.460
<v Speaker 0>But it's just that one node that seems

01:23:31.460 --> 01:23:32.420
<v Speaker 0>to be reporting that.

01:23:35.195 --> 01:23:36.554
<v Speaker 0>But that wouldn't explain

01:23:42.554 --> 01:23:44.074
<v Speaker 0>So it only happened once,

01:23:44.554 --> 01:23:46.954
<v Speaker 0>which means it's not recurring. It's not repeated.

01:23:47.195 --> 01:23:47.835
<v Speaker 1>Right.

01:23:53.500 --> 01:23:56.219
<v Speaker 1>Node has no disc pressure.

01:23:56.460 --> 01:23:58.380
<v Speaker 1>Five times two over

01:24:04.235 --> 01:24:06.635
<v Speaker 1>It's happened a couple times, though. I know

01:24:06.635 --> 01:24:08.155
<v Speaker 1>it has no disc pressure.

01:24:09.275 --> 01:24:09.994
<v Speaker 1>Right?

01:24:12.235 --> 01:24:15.594
<v Speaker 1>And it still has, like, non terminated pods,

01:24:16.500 --> 01:24:18.900
<v Speaker 1>Five in total. Okay. So there's five pods

01:24:18.900 --> 01:24:20.579
<v Speaker 1>on there. Yes. That makes sense.

01:24:33.735 --> 01:24:35.735
<v Speaker 1>Limits Thanks. Memory.

01:24:40.695 --> 01:24:44.295
<v Speaker 0>Julia, annoying me. So this is really weird.

01:24:44.295 --> 01:24:45.190
<v Speaker 1>Why are

01:24:46.469 --> 01:24:49.110
<v Speaker 1>so I'm looking at the allocated resources,

01:24:50.790 --> 01:24:51.429
<v Speaker 1>and

01:24:52.309 --> 01:24:55.510
<v Speaker 1>it's saying it's 0%.

01:24:56.790 --> 01:24:58.710
<v Speaker 1>Like, if you if you look at the

01:24:58.710 --> 01:24:59.429
<v Speaker 1>note description,

01:25:01.825 --> 01:25:04.545
<v Speaker 1>the request and the limits, like, 200

01:25:04.785 --> 01:25:07.505
<v Speaker 1>I mean, those aren't, like, super huge. Right?

01:25:07.505 --> 01:25:08.465
<v Speaker 1>But, like,

01:25:09.505 --> 01:25:10.945
<v Speaker 1>it's all 0%

01:25:10.945 --> 01:25:13.425
<v Speaker 1>of the note. Why? Is it just

01:25:14.180 --> 01:25:15.460
<v Speaker 1>does it just get, like

01:25:18.900 --> 01:25:20.820
<v Speaker 1>this looks really weird to me, but I

01:25:20.820 --> 01:25:22.980
<v Speaker 1>I I might not know anything. Like, CPU

01:25:22.980 --> 01:25:24.580
<v Speaker 1>requests are zero

01:25:25.300 --> 01:25:26.580
<v Speaker 1>for the cube system?

01:25:27.335 --> 01:25:29.815
<v Speaker 0>I think that's just because the resources that

01:25:29.815 --> 01:25:32.375
<v Speaker 0>are applied to the cluster are requested. So

01:25:32.375 --> 01:25:33.015
<v Speaker 1>small.

01:25:33.335 --> 01:25:35.975
<v Speaker 0>Resources. Okay. I'm not really doing Okay.

01:25:39.335 --> 01:25:41.335
<v Speaker 1>Sorry. I was I'm just looking at that.

01:25:41.280 --> 01:25:42.639
<v Speaker 1>00%

01:25:42.639 --> 01:25:44.320
<v Speaker 1>looks weird to me. In production,

01:25:44.400 --> 01:25:46.479
<v Speaker 1>I see, like, you know,

01:25:47.520 --> 01:25:48.639
<v Speaker 1>massive

01:25:49.599 --> 01:25:50.480
<v Speaker 1>percentages.

01:25:50.480 --> 01:25:53.039
<v Speaker 1>So like that. Okay.

01:25:54.775 --> 01:25:57.734
<v Speaker 0>So the thing that's really bothering me is

01:25:59.094 --> 01:26:00.534
<v Speaker 0>if we describe

01:26:01.014 --> 01:26:02.855
<v Speaker 0>in fact, we're not even getting yeah. Well,

01:26:02.855 --> 01:26:04.215
<v Speaker 0>let's describe the postage for And

01:26:05.414 --> 01:26:07.974
<v Speaker 1>and randomly these clusters died.

01:26:09.100 --> 01:26:11.900
<v Speaker 1>I mean, these pods, not clusters. Randomly, pods

01:26:11.900 --> 01:26:13.420
<v Speaker 1>just, like, went away

01:26:14.620 --> 01:26:15.340
<v Speaker 1>and

01:26:15.500 --> 01:26:16.940
<v Speaker 1>didn't come back

01:26:18.860 --> 01:26:19.739
<v Speaker 1>at all.

01:26:20.140 --> 01:26:21.739
<v Speaker 1>Like, not even pending.

01:26:21.820 --> 01:26:22.140
<v Speaker 0>Was

01:26:23.375 --> 01:26:25.935
<v Speaker 0>it? Yeah. Yeah. Okay. That's a good point.

01:26:25.935 --> 01:26:26.815
<v Speaker 0>Let's go back to our

01:26:27.455 --> 01:26:29.614
<v Speaker 0>we must be missing something obvious here, I'm

01:26:29.614 --> 01:26:32.815
<v Speaker 0>hoping. Let's describe this new replica set. Why

01:26:32.815 --> 01:26:33.695
<v Speaker 0>is nothing

01:26:34.735 --> 01:26:36.255
<v Speaker 0>happening here? Okay. So

01:26:38.950 --> 01:26:41.430
<v Speaker 0>this is very similar to the last cluster.

01:26:41.430 --> 01:26:44.150
<v Speaker 0>The pods aren't showing up. They're not being

01:26:44.150 --> 01:26:45.030
<v Speaker 0>created.

01:26:46.230 --> 01:26:47.590
<v Speaker 0>Let's check our events.

01:26:56.765 --> 01:26:58.205
<v Speaker 1>No. It is not ready.

01:26:59.485 --> 01:27:02.765
<v Speaker 1>It says and tool sleepy too. No. It

01:27:02.765 --> 01:27:03.645
<v Speaker 1>is not ready.

01:27:03.965 --> 01:27:05.085
<v Speaker 1>Tools.

01:27:05.085 --> 01:27:06.765
<v Speaker 1>No. It is not ready. And then post

01:27:06.765 --> 01:27:07.165
<v Speaker 1>pop

01:27:07.940 --> 01:27:10.100
<v Speaker 1>yeah. It all just says node is not

01:27:10.100 --> 01:27:10.820
<v Speaker 1>ready.

01:27:11.699 --> 01:27:13.940
<v Speaker 1>Node has sufficient

01:27:15.460 --> 01:27:18.820
<v Speaker 1>sorry. I'm just reading a starting Kubelet.

01:27:19.540 --> 01:27:21.619
<v Speaker 1>Why is the Kubelet starting

01:27:22.580 --> 01:27:23.619
<v Speaker 1>on that node?

01:27:27.275 --> 01:27:29.594
<v Speaker 0>Should we ask guys for some help

01:27:30.955 --> 01:27:32.715
<v Speaker 0>since we're approaching it? Like, look at the

01:27:32.715 --> 01:27:35.355
<v Speaker 1>logs on this replica set. Why is the

01:27:35.355 --> 01:27:37.995
<v Speaker 1>Kubelet not what why is that even on

01:27:37.995 --> 01:27:38.235
<v Speaker 1>there?

01:27:41.120 --> 01:27:45.040
<v Speaker 1>Invalid capacity zero on large file system.

01:27:48.080 --> 01:27:50.640
<v Speaker 0>Yeah. That's the batching guy. Scrolls. And how

01:27:50.640 --> 01:27:51.680
<v Speaker 0>does I never use the time.

01:27:52.935 --> 01:27:55.735
<v Speaker 1>I'm fine. Okay. My coworker,

01:27:55.815 --> 01:27:57.655
<v Speaker 1>who I'm supposed to be meeting with

01:27:58.055 --> 01:27:59.574
<v Speaker 1>in six minutes,

01:28:00.455 --> 01:28:03.495
<v Speaker 1>is currently waiting for his vaccine.

01:28:03.495 --> 01:28:05.735
<v Speaker 1>So he won't be there in six minutes.

01:28:13.460 --> 01:28:15.380
<v Speaker 1>So we just oh, we got the cluster

01:28:15.380 --> 01:28:17.619
<v Speaker 1>events. Alright. And then we started the kubelet.

01:28:17.619 --> 01:28:19.139
<v Speaker 1>Right? That was eight minutes ago.

01:28:21.185 --> 01:28:23.185
<v Speaker 1>We established

01:28:26.945 --> 01:28:27.905
<v Speaker 1>weird.

01:28:32.865 --> 01:28:34.225
<v Speaker 2>No. It's not ready,

01:28:34.465 --> 01:28:35.345
<v Speaker 2>but now

01:28:36.065 --> 01:28:37.420
<v Speaker 1>set up failed.

01:28:38.300 --> 01:28:39.340
<v Speaker 1>Failed mount.

01:28:39.900 --> 01:28:41.580
<v Speaker 1>Failed mount. There it is. Eight minutes twenty

01:28:41.580 --> 01:28:42.380
<v Speaker 1>four seconds.

01:28:44.140 --> 01:28:47.100
<v Speaker 0>Yeah. I see that. Killing. Stopping container tools.

01:28:49.215 --> 01:28:51.215
<v Speaker 1>Yeah. The whole note is not ready. That

01:28:51.215 --> 01:28:52.975
<v Speaker 1>one, we fixed. But,

01:28:53.935 --> 01:28:55.055
<v Speaker 1>the volumes

01:28:55.055 --> 01:28:57.855
<v Speaker 1>that are in the Postgres pod are

01:28:58.255 --> 01:28:59.375
<v Speaker 1>not valid.

01:29:02.255 --> 01:29:04.415
<v Speaker 1>And then there's a tape manager eviction

01:29:05.239 --> 01:29:06.999
<v Speaker 1>for the Smurl tools,

01:29:08.679 --> 01:29:10.440
<v Speaker 1>which I don't know that we need to

01:29:10.440 --> 01:29:12.999
<v Speaker 1>worry about those necessarily.

01:29:13.960 --> 01:29:17.400
<v Speaker 1>But let's fix the Postgres one first, which

01:29:17.400 --> 01:29:18.360
<v Speaker 1>is a

01:29:19.605 --> 01:29:21.925
<v Speaker 1>right there, taint man oh, it's also a

01:29:21.925 --> 01:29:23.845
<v Speaker 1>taint manager eviction right there.

01:29:25.365 --> 01:29:26.965
<v Speaker 1>And then a failed moan.

01:29:27.365 --> 01:29:30.085
<v Speaker 1>Oh, that's twelve minutes ago. But but yeah.

01:29:30.965 --> 01:29:31.525
<v Speaker 0>Where did you?

01:29:33.110 --> 01:29:36.469
<v Speaker 1>Twelve minutes ago, pod right. Slightly up. Marking

01:29:36.469 --> 01:29:40.150
<v Speaker 1>for deletion pod taint manager eviction. Why why

01:29:40.150 --> 01:29:40.710
<v Speaker 1>did it get

01:29:41.590 --> 01:29:43.349
<v Speaker 1>why is that a taint manager eviction?

01:29:44.115 --> 01:29:46.435
<v Speaker 1>We just tried to restart the

01:29:49.795 --> 01:29:51.955
<v Speaker 0>I don't see tint manager eviction.

01:29:52.595 --> 01:29:55.075
<v Speaker 1>Go up go up to go up to

01:29:55.475 --> 01:29:56.515
<v Speaker 1>two lines

01:29:56.730 --> 01:29:58.090
<v Speaker 1>twelve minutes ago.

01:29:58.650 --> 01:30:00.570
<v Speaker 1>Two lines from your highlight. Yeah.

01:30:00.810 --> 01:30:01.449
<v Speaker 1>Oh,

01:30:01.850 --> 01:30:02.410
<v Speaker 1>scroll

01:30:02.890 --> 01:30:04.890
<v Speaker 1>moving your cursor down, down, down. Oh, yeah.

01:30:04.890 --> 01:30:06.730
<v Speaker 0>Okay. Alright. There it is.

01:30:06.970 --> 01:30:08.170
<v Speaker 1>And there's a bunch of those.

01:30:11.655 --> 01:30:14.375
<v Speaker 1>And that happened when we deleted it. Why

01:30:14.375 --> 01:30:17.495
<v Speaker 1>does it report a paint manager eviction when

01:30:17.495 --> 01:30:18.055
<v Speaker 1>we

01:30:18.695 --> 01:30:21.015
<v Speaker 1>just wanted to delete the thing?

01:30:24.760 --> 01:30:25.880
<v Speaker 1>Didn't we just, like

01:30:28.680 --> 01:30:31.400
<v Speaker 1>we edited it. We edited the

01:30:34.600 --> 01:30:36.440
<v Speaker 1>let's look at the let's look at the

01:30:36.440 --> 01:30:37.800
<v Speaker 1>deploy description.

01:30:40.385 --> 01:30:42.304
<v Speaker 1>That could have gotten edited. Right?

01:30:45.184 --> 01:30:46.465
<v Speaker 0>I'm kinda worried.

01:30:46.704 --> 01:30:47.985
<v Speaker 0>I don't even know.

01:30:48.625 --> 01:30:51.264
<v Speaker 0>This header here seems really consistent, don't you

01:30:51.264 --> 01:30:51.505
<v Speaker 0>think?

01:30:52.230 --> 01:30:54.310
<v Speaker 0>Failed to set secret cache.

01:30:55.430 --> 01:30:56.230
<v Speaker 1>Yes.

01:30:56.390 --> 01:30:58.550
<v Speaker 0>Time to wait until the condition. Wait until

01:30:58.550 --> 01:30:59.590
<v Speaker 1>the condition.

01:31:00.150 --> 01:31:01.990
<v Speaker 0>What the hell is the secret cache?

01:31:04.710 --> 01:31:05.910
<v Speaker 1>I'm gonna Google this.

01:31:07.395 --> 01:31:09.635
<v Speaker 0>Yeah. Let's let's Google that message, actually. Good

01:31:09.635 --> 01:31:10.275
<v Speaker 0>call.

01:31:11.715 --> 01:31:13.795
<v Speaker 0>Beast me guessing for the next five minutes.

01:31:31.480 --> 01:31:33.160
<v Speaker 0>Partner is Rvac permission.

01:31:35.225 --> 01:31:36.025
<v Speaker 0>Joy.

01:31:43.065 --> 01:31:44.185
<v Speaker 0>Let's get ahead.

01:31:53.480 --> 01:31:54.679
<v Speaker 0>Are you there, Guy?

01:31:58.199 --> 01:32:01.079
<v Speaker 0>Forgot what's it. Latency. Oh, so they shouldn't

01:32:01.079 --> 01:32:02.360
<v Speaker 0>be because he's in the thing.

01:32:07.594 --> 01:32:09.275
<v Speaker 0>What is the point of a live audience

01:32:09.275 --> 01:32:11.195
<v Speaker 0>for support if they're not available there to

01:32:11.195 --> 01:32:11.835
<v Speaker 0>give you support?

01:32:23.100 --> 01:32:24.219
<v Speaker 1>Cassette.

01:32:24.300 --> 01:32:26.619
<v Speaker 1>Desired two, current one.

01:32:29.195 --> 01:32:30.554
<v Speaker 2>Yes. Thanks

01:32:32.235 --> 01:32:33.195
<v Speaker 0>for showing up.

01:32:36.155 --> 01:32:37.835
<v Speaker 2>This is all the slightly freaky with the

01:32:37.835 --> 01:32:39.355
<v Speaker 2>wait and see. Hang on. I'm gonna mute

01:32:39.355 --> 01:32:39.995
<v Speaker 2>the YouTube.

01:32:41.850 --> 01:32:43.610
<v Speaker 0>Alright. Give us a hint because

01:32:44.970 --> 01:32:46.250
<v Speaker 0>I'm over I

01:32:46.890 --> 01:32:48.810
<v Speaker 2>think I think you've got a bit

01:32:48.970 --> 01:32:50.489
<v Speaker 2>sidetracked on

01:32:50.650 --> 01:32:54.490
<v Speaker 2>the the errors and the events. There are

01:32:54.490 --> 01:32:55.210
<v Speaker 2>two

01:32:56.090 --> 01:32:56.490
<v Speaker 2>things

01:32:56.975 --> 01:32:58.574
<v Speaker 2>still going on here,

01:32:59.455 --> 01:33:01.375
<v Speaker 2>just to add to the confusion.

01:33:01.935 --> 01:33:02.655
<v Speaker 2>One

01:33:03.055 --> 01:33:05.775
<v Speaker 2>is why are pods stuck in pending and

01:33:05.775 --> 01:33:07.935
<v Speaker 2>not getting scheduled? You are on the right

01:33:07.935 --> 01:33:10.255
<v Speaker 2>tracks having a look at the scheduler.

01:33:10.415 --> 01:33:12.320
<v Speaker 2>I think you want to have a closer

01:33:12.320 --> 01:33:13.360
<v Speaker 2>look at it.

01:33:15.280 --> 01:33:16.639
<v Speaker 2>And the other,

01:33:17.280 --> 01:33:18.320
<v Speaker 2>you should see

01:33:18.800 --> 01:33:21.920
<v Speaker 2>once you fix it so it starts scheduling

01:33:21.920 --> 01:33:22.639
<v Speaker 2>pods.

01:33:22.720 --> 01:33:23.360
<v Speaker 0>Okay.

01:33:23.735 --> 01:33:26.775
<v Speaker 0>And was the CPU CFS quota thing being

01:33:26.775 --> 01:33:28.375
<v Speaker 0>commented out if I made that worse or

01:33:28.375 --> 01:33:29.334
<v Speaker 0>was that a fix?

01:33:29.895 --> 01:33:32.135
<v Speaker 2>No. That's fixed. I I was trying to

01:33:32.135 --> 01:33:33.815
<v Speaker 2>I I was trying to make a pod

01:33:33.895 --> 01:33:36.934
<v Speaker 2>a node very slow by putting the CPU

01:33:36.934 --> 01:33:37.650
<v Speaker 2>up really

01:33:38.130 --> 01:33:40.849
<v Speaker 2>CPU, CFS quarter window up really high.

01:33:41.489 --> 01:33:43.170
<v Speaker 2>The API server won't know.

01:33:43.570 --> 01:33:45.170
<v Speaker 0>Well, thank you for the hint. I hate

01:33:45.170 --> 01:33:46.530
<v Speaker 0>you. I'll speak to you later.

01:33:49.090 --> 01:33:51.489
<v Speaker 0>Thanks, guys. I don't hate you. This isn't

01:33:51.570 --> 01:33:52.290
<v Speaker 1>this is amusing.

01:33:53.145 --> 01:33:56.025
<v Speaker 1>I I I enjoy watching Scottish people hate

01:33:56.025 --> 01:33:59.145
<v Speaker 1>doing things because it's it's it's wonderful.

01:34:01.945 --> 01:34:02.665
<v Speaker 0>Okay.

01:34:03.465 --> 01:34:04.744
<v Speaker 0>So there's something

01:34:05.065 --> 01:34:07.625
<v Speaker 0>let's bake about our scheduler here. In fact,

01:34:07.625 --> 01:34:08.265
<v Speaker 0>yeah, we

01:34:09.349 --> 01:34:10.869
<v Speaker 0>I think if we in fact, we can

01:34:10.869 --> 01:34:12.789
<v Speaker 0>see here all these files have been modified.

01:34:12.789 --> 01:34:15.030
<v Speaker 0>So I'm not sure how we missed Yeah.

01:34:15.030 --> 01:34:17.030
<v Speaker 0>Air and air. So this is the scheduler

01:34:17.030 --> 01:34:17.829
<v Speaker 0>manifest.

01:34:19.829 --> 01:34:21.190
<v Speaker 0>Let's see if we can spot

01:34:21.815 --> 01:34:22.454
<v Speaker 0>Oh.

01:34:23.094 --> 01:34:23.814
<v Speaker 1>Special

01:34:23.895 --> 01:34:25.175
<v Speaker 1>scheduler?

01:34:28.695 --> 01:34:30.454
<v Speaker 0>I'm gonna remove that.

01:34:30.935 --> 01:34:33.255
<v Speaker 0>Thought We we should be overriding the scheduler

01:34:33.255 --> 01:34:33.574
<v Speaker 0>name.

01:34:35.160 --> 01:34:36.680
<v Speaker 0>Special as it might be,

01:34:37.400 --> 01:34:38.520
<v Speaker 0>not today.

01:34:40.280 --> 01:34:42.360
<v Speaker 1>Initial delay seconds,

01:34:42.760 --> 01:34:44.360
<v Speaker 1>time out seconds.

01:34:44.360 --> 01:34:44.760
<v Speaker 1>Okay.

01:34:45.240 --> 01:34:47.160
<v Speaker 1>Let's let's just change one thing at a

01:34:46.995 --> 01:34:50.515
<v Speaker 1>time though. Yeah. That's great advice. Definitely.

01:34:52.195 --> 01:34:54.275
<v Speaker 0>Although, I yeah. I I get a little

01:34:54.275 --> 01:34:56.435
<v Speaker 0>bit gun hold sometimes, so it's good to

01:34:56.435 --> 01:34:57.795
<v Speaker 0>change one thing at a time.

01:34:59.395 --> 01:35:00.195
<v Speaker 1>Alright.

01:35:00.195 --> 01:35:01.315
<v Speaker 0>Do we have a scheduler?

01:35:11.079 --> 01:35:12.599
<v Speaker 0>Maybe it just takes a minute. Alright?

01:35:15.675 --> 01:35:16.155
<v Speaker 0>We go.

01:35:17.595 --> 01:35:18.875
<v Speaker 1>Zero to one.

01:35:19.275 --> 01:35:21.995
<v Speaker 0>So that that affects our scheduling problem.

01:35:22.715 --> 01:35:24.074
<v Speaker 1>Maybe. If it comes Has

01:35:25.035 --> 01:35:25.995
<v Speaker 0>postgres

01:35:26.395 --> 01:35:28.395
<v Speaker 0>zero been assigned to node yet? No.

01:35:29.870 --> 01:35:30.910
<v Speaker 0>Okay.

01:35:30.910 --> 01:35:32.830
<v Speaker 0>So let's pull up the So maybe kill

01:35:32.830 --> 01:35:35.469
<v Speaker 1>the replica set. Kick the replica set.

01:35:36.190 --> 01:35:38.030
<v Speaker 0>Yeah. It's still not running though.

01:35:41.585 --> 01:35:43.185
<v Speaker 0>Yeah. It's not oh, yeah. It's not healthy

01:35:43.185 --> 01:35:44.465
<v Speaker 0>yet. So it may

01:35:45.025 --> 01:35:47.264
<v Speaker 0>so we just acquired the

01:35:47.425 --> 01:35:48.864
<v Speaker 0>leader lease.

01:35:49.905 --> 01:35:51.184
<v Speaker 0>So in theory,

01:35:55.665 --> 01:35:56.705
<v Speaker 0>this has been scheduled.

01:35:58.260 --> 01:35:58.979
<v Speaker 0>Alright?

01:35:59.380 --> 01:36:00.260
<v Speaker 1>Alright.

01:36:01.780 --> 01:36:04.179
<v Speaker 0>Cool. It has. Oh my gosh.

01:36:04.579 --> 01:36:08.179
<v Speaker 1>It's on that node too. Our favorite node.

01:36:10.095 --> 01:36:12.735
<v Speaker 0>Alright. So we'll override the scheduler name. Obviously,

01:36:12.735 --> 01:36:14.495
<v Speaker 0>I beg no no. We don't do that.

01:36:15.695 --> 01:36:19.375
<v Speaker 1>Sweet. So now we are still not seeing

01:36:21.295 --> 01:36:22.335
<v Speaker 0>Oh, sorry. On you go.

01:36:29.429 --> 01:36:31.749
<v Speaker 1>Clustered,

01:36:32.389 --> 01:36:34.230
<v Speaker 1>and we're not k. Describe.

01:36:46.195 --> 01:36:46.914
<v Speaker 1>Nope.

01:36:48.755 --> 01:36:49.795
<v Speaker 1>Okay.

01:36:49.875 --> 01:36:51.715
<v Speaker 1>Scaling replica set.

01:36:51.875 --> 01:36:55.060
<v Speaker 1>Scaled up replica set. One desired.

01:36:55.060 --> 01:36:56.260
<v Speaker 1>One available.

01:36:56.260 --> 01:36:57.620
<v Speaker 1>One unavailable.

01:36:58.100 --> 01:36:58.900
<v Speaker 1>Alright.

01:36:58.900 --> 01:36:59.460
<v Speaker 1>So

01:37:00.260 --> 01:37:02.820
<v Speaker 0>Yeah. I still think That's our that's our

01:37:02.820 --> 01:37:03.780
<v Speaker 1>clustered.

01:37:04.420 --> 01:37:04.980
<v Speaker 0>Yeah.

01:37:05.300 --> 01:37:07.140
<v Speaker 0>Check those replica sets again. I find it

01:37:07.140 --> 01:37:07.380
<v Speaker 0>really

01:37:08.035 --> 01:37:10.195
<v Speaker 0>weird that we're like, it's not like the

01:37:10.195 --> 01:37:12.595
<v Speaker 0>pod has been created and it's unscheduled. It's

01:37:12.595 --> 01:37:13.074
<v Speaker 0>just

01:37:13.875 --> 01:37:16.355
<v Speaker 0>there's just no pods. Right? And

01:37:18.595 --> 01:37:20.115
<v Speaker 0>Yeah. We're still

01:37:19.890 --> 01:37:22.450
<v Speaker 0>desired one on that second replica set. Okay.

01:37:22.450 --> 01:37:24.290
<v Speaker 0>So there's something wrong with the product. Wait.

01:37:24.290 --> 01:37:25.730
<v Speaker 1>What's happening here?

01:37:26.210 --> 01:37:27.890
<v Speaker 1>Three days, eight hours,

01:37:28.210 --> 01:37:30.290
<v Speaker 1>we have a replica set.

01:37:31.010 --> 01:37:34.505
<v Speaker 1>But the pod but it says desired and

01:37:34.505 --> 01:37:38.025
<v Speaker 1>current, but I don't see any current pods.

01:37:38.825 --> 01:37:41.305
<v Speaker 0>Yeah. I think he's What's happening there?

01:37:41.705 --> 01:37:44.344
<v Speaker 0>I think he's modified the controller manager,

01:37:44.345 --> 01:37:45.785
<v Speaker 0>and it's making all this

01:37:46.600 --> 01:37:49.000
<v Speaker 1>It's lying to us because I don't see

01:37:49.000 --> 01:37:50.039
<v Speaker 1>any pods.

01:37:51.239 --> 01:37:54.120
<v Speaker 1>What? It's not. No. You're right. Right. You're

01:37:54.120 --> 01:37:57.400
<v Speaker 0>right. So there must be something in here.

01:37:59.235 --> 01:38:00.835
<v Speaker 0>The fact that they could the fact that

01:38:00.835 --> 01:38:02.755
<v Speaker 0>the replica set isn't even creating the pod

01:38:02.755 --> 01:38:04.835
<v Speaker 0>for it to not be scheduled or rescheduled

01:38:05.315 --> 01:38:07.074
<v Speaker 0>is a big warning sign.

01:38:07.315 --> 01:38:07.875
<v Speaker 0>So

01:38:08.835 --> 01:38:11.955
<v Speaker 0>what has our sneaky Scottish person done in

01:38:11.955 --> 01:38:12.275
<v Speaker 0>here?

01:38:19.969 --> 01:38:22.210
<v Speaker 0>Look at all those controllers listed here.

01:38:26.645 --> 01:38:28.485
<v Speaker 0>That's a large attack surface

01:38:29.605 --> 01:38:30.645
<v Speaker 0>to change stuff.

01:38:42.570 --> 01:38:45.610
<v Speaker 1>What else is there? Can I scroll?

01:38:45.610 --> 01:38:46.329
<v Speaker 1>No.

01:38:46.570 --> 01:38:48.810
<v Speaker 1>Maybe I can't. No. That's right. Oh god.

01:38:48.810 --> 01:38:50.010
<v Speaker 1>Weird. That's

01:38:52.425 --> 01:38:54.344
<v Speaker 1>I'm good at them. I promise.

01:38:55.385 --> 01:38:55.864
<v Speaker 1>Okay.

01:38:56.985 --> 01:38:58.665
<v Speaker 1>What's happening down here?

01:38:59.785 --> 01:39:02.905
<v Speaker 1>Scheme, h t t p s port.

01:39:02.905 --> 01:39:04.025
<v Speaker 1>That seems fine.

01:39:07.100 --> 01:39:07.980
<v Speaker 0>So

01:39:08.780 --> 01:39:11.180
<v Speaker 0>I I think it's the that controller's list.

01:39:11.180 --> 01:39:12.220
<v Speaker 0>One of the weird things you can do

01:39:12.220 --> 01:39:13.900
<v Speaker 0>with Kubernetes is I only know this because

01:39:13.900 --> 01:39:15.340
<v Speaker 0>of an earlier episode

01:39:15.500 --> 01:39:16.460
<v Speaker 0>is is

01:39:17.740 --> 01:39:18.700
<v Speaker 0>that

01:39:18.985 --> 01:39:21.865
<v Speaker 0>you can do weird shit like, you know,

01:39:21.865 --> 01:39:24.825
<v Speaker 0>disable the replica set controller and stuff.

01:39:25.225 --> 01:39:26.745
<v Speaker 0>But one of the other things is you

01:39:26.745 --> 01:39:27.945
<v Speaker 0>can just tell it to run them all

01:39:27.945 --> 01:39:30.345
<v Speaker 0>like this. So I think he's purposely

01:39:31.470 --> 01:39:34.190
<v Speaker 0>typed all of these out to kinda hide

01:39:34.190 --> 01:39:36.110
<v Speaker 0>the fact that the replica set controller is

01:39:36.110 --> 01:39:36.750
<v Speaker 0>missing.

01:39:37.790 --> 01:39:38.990
<v Speaker 0>And in fact, if we set

01:39:40.030 --> 01:39:42.670
<v Speaker 0>there is a replica set replication controller.

01:39:43.070 --> 01:39:44.110
<v Speaker 1>Replication.

01:39:44.350 --> 01:39:45.390
<v Speaker 1>Is that same?

01:39:45.915 --> 01:39:46.874
<v Speaker 0>No. I think

01:39:47.514 --> 01:39:49.195
<v Speaker 0>let's say that. Let's do the star.

01:39:49.594 --> 01:39:50.875
<v Speaker 0>Like, what's the what's the worst that can

01:39:50.875 --> 01:39:52.954
<v Speaker 0>happen? Let's let's try and let's try and

01:39:52.954 --> 01:39:53.994
<v Speaker 0>spin up a version.

01:39:54.315 --> 01:39:56.395
<v Speaker 1>I mean, somebody could later take over this

01:39:56.395 --> 01:39:58.315
<v Speaker 1>cluster after you deleted it from

01:40:00.074 --> 01:40:00.315
<v Speaker 0>Well,

01:40:01.130 --> 01:40:04.250
<v Speaker 0>there is that. I'm gonna I'm gonna ignore

01:40:04.250 --> 01:40:07.449
<v Speaker 0>that. We just I didn't that wasn't me.

01:40:08.489 --> 01:40:10.090
<v Speaker 0>And then I'll do my impatient thing when

01:40:10.090 --> 01:40:12.250
<v Speaker 0>I run PS every fourteen seconds or every

01:40:12.250 --> 01:40:14.650
<v Speaker 0>fourteen milliseconds. Okay. We have a controller manager.

01:40:18.015 --> 01:40:19.375
<v Speaker 0>And I better see a pod in a

01:40:19.375 --> 01:40:20.015
<v Speaker 0>second.

01:40:25.455 --> 01:40:27.215
<v Speaker 0>I wonder if we should delete like build

01:40:27.215 --> 01:40:29.295
<v Speaker 0>replica sets and try and encourage it to

01:40:29.940 --> 01:40:31.699
<v Speaker 1>Yeah. I was thinking that.

01:40:37.699 --> 01:40:41.620
<v Speaker 1>Although, why is there an ancient replica set?

01:40:42.994 --> 01:40:44.354
<v Speaker 0>It's gone there. Oh.

01:40:46.755 --> 01:40:47.874
<v Speaker 0>Oh. And we have a Okay.

01:40:48.514 --> 01:40:50.834
<v Speaker 0>Look at that. Wow. And it's talking about

01:40:51.235 --> 01:40:52.195
<v Speaker 1>terminating

01:40:53.235 --> 01:40:54.195
<v Speaker 1>pods.

01:40:54.594 --> 01:40:57.635
<v Speaker 0>It's terminating pods that don't exist?

01:40:58.650 --> 01:41:00.969
<v Speaker 0>Interesting. We didn't know about before.

01:41:02.969 --> 01:41:05.130
<v Speaker 0>Alright. So that's the hopefully, that's now pulling

01:41:05.130 --> 01:41:06.329
<v Speaker 0>the image.

01:41:09.929 --> 01:41:10.810
<v Speaker 1>And it's running.

01:41:11.565 --> 01:41:12.844
<v Speaker 1>Wait. It is running.

01:41:14.205 --> 01:41:15.005
<v Speaker 1>Alright.

01:41:15.085 --> 01:41:16.605
<v Speaker 0>Let's go into Oh,

01:41:19.324 --> 01:41:21.245
<v Speaker 0>yeah. Did we deploy our update? I can't

01:41:21.245 --> 01:41:22.765
<v Speaker 0>remember. Yes. Oh, we we tried to. Right.

01:41:22.765 --> 01:41:24.445
<v Speaker 0>Okay. So we can port forward

01:41:25.805 --> 01:41:26.205
<v Speaker 0>cost.

01:41:29.960 --> 01:41:32.119
<v Speaker 0>There we go. It should be edited.

01:41:32.520 --> 01:41:33.960
<v Speaker 0>Yeah. I think it was one of the

01:41:33.960 --> 01:41:35.239
<v Speaker 0>first things we did and then we realized

01:41:35.239 --> 01:41:36.599
<v Speaker 0>that everything was broken.

01:41:38.760 --> 01:41:39.719
<v Speaker 2>Yes.

01:41:39.800 --> 01:41:40.840
<v Speaker 0>Although we have a second.

01:41:42.184 --> 01:41:43.864
<v Speaker 0>At least like we have a second problem

01:41:43.864 --> 01:41:46.184
<v Speaker 0>though. And that Oh, no. Wait. It it

01:41:46.184 --> 01:41:47.864
<v Speaker 0>can't hit the database service.

01:41:51.224 --> 01:41:54.105
<v Speaker 0>So there's potentially one more problem or maybe

01:41:54.105 --> 01:41:55.144
<v Speaker 0>it's unrelated.

01:41:55.385 --> 01:41:57.320
<v Speaker 0>So I'm just gonna describe the service and

01:41:57.320 --> 01:41:58.760
<v Speaker 0>see if we have any endpoint.

01:41:59.560 --> 01:42:00.760
<v Speaker 0>Shit. We do.

01:42:03.639 --> 01:42:05.960
<v Speaker 0>Is this an intended guy before I start

01:42:06.040 --> 01:42:08.440
<v Speaker 0>Wait. Let's let's double check let's double check

01:42:08.440 --> 01:42:10.440
<v Speaker 1>that we did in fact

01:42:12.545 --> 01:42:13.744
<v Speaker 1>edit the deploy.

01:42:16.625 --> 01:42:17.344
<v Speaker 1>Yes.

01:42:24.304 --> 01:42:24.864
<v Speaker 1>Oh, yeah?

01:42:28.120 --> 01:42:28.520
<v Speaker 0>Okay.

01:42:40.135 --> 01:42:41.655
<v Speaker 0>Okay. So why

01:42:42.295 --> 01:42:44.375
<v Speaker 0>can it not speak to a database?

01:42:46.455 --> 01:42:49.015
<v Speaker 0>Yeah. It definite it definitely can't speak to

01:42:49.015 --> 01:42:49.575
<v Speaker 0>a database.

01:42:51.310 --> 01:42:52.749
<v Speaker 1>Let's look at the logs.

01:42:53.070 --> 01:42:54.830
<v Speaker 0>I don't think there are any. You can

01:42:54.830 --> 01:42:56.030
<v Speaker 0>try. What?

01:42:57.390 --> 01:43:00.030
<v Speaker 0>It's a very terribly written Rust application that

01:43:00.030 --> 01:43:00.750
<v Speaker 0>I wrote. So

01:43:06.315 --> 01:43:08.155
<v Speaker 1>Oh, I mean, I wonder if it can't

01:43:08.155 --> 01:43:09.515
<v Speaker 1>connect because

01:43:10.475 --> 01:43:11.755
<v Speaker 1>they're out of sync.

01:43:13.915 --> 01:43:15.595
<v Speaker 0>It looks like it's DNS.

01:43:16.315 --> 01:43:18.730
<v Speaker 0>It's always DNS. Right? It says failed to

01:43:18.730 --> 01:43:21.690
<v Speaker 0>look up address information, name not found. So

01:43:22.810 --> 01:43:24.650
<v Speaker 0>let's check Kube DNS is working. Do you

01:43:24.650 --> 01:43:26.330
<v Speaker 0>wanna run a get pods on the Kube

01:43:26.330 --> 01:43:27.290
<v Speaker 0>system namespace?

01:43:34.265 --> 01:43:36.505
<v Speaker 0>Have to DNS is running.

01:43:36.905 --> 01:43:37.705
<v Speaker 1>Well,

01:43:38.425 --> 01:43:39.705
<v Speaker 1>why do we need

01:43:39.865 --> 01:43:41.545
<v Speaker 1>to

01:43:51.120 --> 01:43:53.200
<v Speaker 0>So DNS is really bad for logging. In

01:43:53.200 --> 01:43:54.960
<v Speaker 0>fact, I don't expect to see anything come

01:43:54.960 --> 01:43:56.880
<v Speaker 0>out of that container. But it also says

01:43:56.880 --> 01:43:58.159
<v Speaker 1>not found.

01:43:58.240 --> 01:44:00.160
<v Speaker 0>Oh, you're it's just missing the cube system

01:44:00.160 --> 01:44:01.040
<v Speaker 0>namespace flag.

01:44:02.005 --> 01:44:04.085
<v Speaker 1>Ah, right. Thank you.

01:44:05.285 --> 01:44:06.885
<v Speaker 1>I'm like, it's broken.

01:44:06.965 --> 01:44:08.165
<v Speaker 1>Right? Okay.

01:44:08.645 --> 01:44:10.405
<v Speaker 1>I'm I'm losing I lost

01:44:10.725 --> 01:44:13.285
<v Speaker 1>I lost connection here. Ah.

01:44:14.085 --> 01:44:14.725
<v Speaker 1>Wait. Maybe?

01:44:16.340 --> 01:44:18.900
<v Speaker 1>Go ahead. You type. Yeah. Was just gonna

01:44:18.900 --> 01:44:20.500
<v Speaker 0>say it's a lot easier to spot tables

01:44:20.500 --> 01:44:21.940
<v Speaker 0>than missing words when you're not the one

01:44:21.940 --> 01:44:22.580
<v Speaker 0>typing.

01:44:22.740 --> 01:44:25.139
<v Speaker 1>No. I lost connection to the

01:44:25.780 --> 01:44:28.180
<v Speaker 1>I think I Oh, sugar. My

01:44:30.665 --> 01:44:31.625
<v Speaker 1>Alright.

01:44:31.625 --> 01:44:33.065
<v Speaker 1>Connection refused.

01:44:33.225 --> 01:44:34.824
<v Speaker 1>Failed to watch

01:44:35.065 --> 01:44:37.545
<v Speaker 1>v one service unknown.

01:44:38.425 --> 01:44:39.465
<v Speaker 1>Get namespaces.

01:44:44.970 --> 01:44:47.050
<v Speaker 0>So it looks like it is

01:44:49.450 --> 01:44:50.810
<v Speaker 0>trying to speak to the

01:44:51.050 --> 01:44:52.410
<v Speaker 0>API server.

01:44:58.665 --> 01:45:00.745
<v Speaker 0>I'm getting connection refused.

01:45:03.465 --> 01:45:04.185
<v Speaker 0>Maybe

01:45:04.665 --> 01:45:06.105
<v Speaker 0>not. I don't know if there should be

01:45:06.105 --> 01:45:08.505
<v Speaker 0>a selector on that service. Let's describe the

01:45:08.505 --> 01:45:08.825
<v Speaker 0>service.

01:45:16.300 --> 01:45:18.540
<v Speaker 0>Yeah. Okay. So it's it's fine.

01:45:20.780 --> 01:45:24.060
<v Speaker 0>There is an endpoint. The service is available

01:45:24.220 --> 01:45:25.500
<v Speaker 0>on port four four three.

01:45:28.155 --> 01:45:29.755
<v Speaker 0>Why can core DNS

01:45:30.074 --> 01:45:33.915
<v Speaker 0>not speak to our API server? Because core

01:45:33.915 --> 01:45:35.994
<v Speaker 1>DNS never talks to anybody.

01:45:38.395 --> 01:45:38.715
<v Speaker 1>What?

01:45:42.900 --> 01:45:46.020
<v Speaker 0>Okay. So this is a Selium cluster.

01:45:47.860 --> 01:45:49.460
<v Speaker 1>Okay. Which means

01:45:50.180 --> 01:45:51.940
<v Speaker 0>there are no network policies. Okay. Sugar.

01:46:00.055 --> 01:46:01.655
<v Speaker 1>Why are there two

01:46:02.775 --> 01:46:03.575
<v Speaker 1>pods

01:46:04.935 --> 01:46:06.135
<v Speaker 1>for cordianess?

01:46:06.135 --> 01:46:08.455
<v Speaker 1>Why are there two cordianess pods? It just

01:46:08.455 --> 01:46:09.735
<v Speaker 0>runs for redundancy.

01:46:10.579 --> 01:46:11.459
<v Speaker 0>That should

01:46:11.860 --> 01:46:12.979
<v Speaker 0>be okay.

01:46:13.780 --> 01:46:14.499
<v Speaker 0>Maybe.

01:46:18.420 --> 01:46:19.459
<v Speaker 0>Okay. So

01:46:20.500 --> 01:46:21.780
<v Speaker 0>core DNS

01:46:22.260 --> 01:46:24.675
<v Speaker 0>has a pod. It's scheduled. It's running. It

01:46:24.675 --> 01:46:27.074
<v Speaker 0>has no connectivity across the cluster.

01:46:27.635 --> 01:46:28.514
<v Speaker 0>Shit.

01:46:31.475 --> 01:46:33.555
<v Speaker 0>And there's a connection refused. If it's not

01:46:33.555 --> 01:46:36.195
<v Speaker 0>a network pause, it may be

01:46:38.000 --> 01:46:40.559
<v Speaker 0>either kip proxy or

01:46:42.880 --> 01:46:46.079
<v Speaker 0>the core DNS deployment could have been modified

01:46:46.400 --> 01:46:47.520
<v Speaker 0>in some way.

01:46:48.000 --> 01:46:48.400
<v Speaker 1>Okay.

01:46:49.955 --> 01:46:51.955
<v Speaker 1>When was it edited last? How would we

01:46:51.955 --> 01:46:52.675
<v Speaker 1>know that?

01:46:52.995 --> 01:46:54.355
<v Speaker 1>Is it in the manifest?

01:46:54.835 --> 01:46:55.955
<v Speaker 0>Yeah. If we do a

01:46:57.395 --> 01:47:00.195
<v Speaker 0>if we do a cube edit deployment

01:47:00.275 --> 01:47:03.075
<v Speaker 0>cube dash n cube system core DNS, we

01:47:03.075 --> 01:47:04.910
<v Speaker 0>should be able to look at the metadata

01:47:04.910 --> 01:47:06.590
<v Speaker 0>or status that may have a data in

01:47:06.590 --> 01:47:07.070
<v Speaker 0>it.

01:47:08.510 --> 01:47:10.830
<v Speaker 0>Failing that, I think we're gonna have to

01:47:10.830 --> 01:47:12.190
<v Speaker 0>either look at

01:47:14.270 --> 01:47:15.710
<v Speaker 0>yeah. I mean, it could even be IT

01:47:15.710 --> 01:47:17.469
<v Speaker 0>tables. It depends how

01:47:17.710 --> 01:47:19.070
<v Speaker 0>evil Guy was feeling.

01:47:23.945 --> 01:47:25.945
<v Speaker 0>Yeah. So there's a generation four

01:47:25.945 --> 01:47:27.785
<v Speaker 0>on this. So I think it has been

01:47:27.785 --> 01:47:28.585
<v Speaker 0>modified.

01:47:29.545 --> 01:47:31.305
<v Speaker 1>Replicas to

01:47:32.265 --> 01:47:33.225
<v Speaker 1>generation four?

01:47:34.010 --> 01:47:35.370
<v Speaker 1>Tell me more about that.

01:47:36.010 --> 01:47:38.730
<v Speaker 1>Oh, revision four. Yeah. Every time we modify

01:47:38.730 --> 01:47:41.850
<v Speaker 0>it, the generation Creation time stamp. That was

01:47:41.850 --> 01:47:43.130
<v Speaker 1>two days ago, though.

01:47:43.610 --> 01:47:44.490
<v Speaker 1>03/29.

01:47:56.135 --> 01:47:58.695
<v Speaker 0>I'm just scrolling and hoping something jumps out

01:47:58.695 --> 01:48:01.575
<v Speaker 0>at me. Schedule new name is the default

01:48:01.575 --> 01:48:05.539
<v Speaker 1>scheduler priority class name system cluster critical.

01:48:05.540 --> 01:48:06.659
<v Speaker 1>I don't know what that means.

01:48:18.295 --> 01:48:19.175
<v Speaker 0>Okay.

01:48:20.615 --> 01:48:21.815
<v Speaker 0>I wish I had an idea.

01:48:29.330 --> 01:48:30.210
<v Speaker 0>That's

01:48:30.210 --> 01:48:30.929
<v Speaker 0>weird.

01:48:36.930 --> 01:48:40.130
<v Speaker 1>No events on that? The endpoint is a

01:48:40.130 --> 01:48:41.250
<v Speaker 0>public

01:48:41.845 --> 01:48:43.125
<v Speaker 0>IP address?

01:48:48.085 --> 01:48:49.284
<v Speaker 1>Get I

01:48:53.525 --> 01:48:55.710
<v Speaker 0>I don't think it should be.

01:48:58.110 --> 01:49:00.110
<v Speaker 0>So if we do a get pods

01:49:01.390 --> 01:49:02.349
<v Speaker 0>wide

01:49:04.510 --> 01:49:05.870
<v Speaker 0>our IP server has.

01:49:07.855 --> 01:49:10.255
<v Speaker 1>There's the one forty five though down there.

01:49:10.255 --> 01:49:12.094
<v Speaker 1>Packet cloud controller manager

01:49:13.695 --> 01:49:15.055
<v Speaker 1>and cube proxy.

01:49:19.215 --> 01:49:20.815
<v Speaker 0>Okay. So some of them are getting.

01:49:24.310 --> 01:49:25.910
<v Speaker 1>Okay. Wait. Wait.

01:49:26.150 --> 01:49:27.190
<v Speaker 1>Okay.

01:49:27.190 --> 01:49:28.390
<v Speaker 1>So wait.

01:49:28.710 --> 01:49:30.950
<v Speaker 1>Wait. Hang on. The

01:49:33.030 --> 01:49:34.790
<v Speaker 1>cube proxy

01:49:36.195 --> 01:49:37.235
<v Speaker 1>for the

01:49:38.515 --> 01:49:41.395
<v Speaker 1>cluster that we were trying to schedule on,

01:49:42.515 --> 01:49:44.835
<v Speaker 1>L Z 6 N Q,

01:49:46.675 --> 01:49:49.795
<v Speaker 1>am I am I, like, super

01:49:50.970 --> 01:49:53.369
<v Speaker 1>out of whack here?

01:49:53.370 --> 01:49:54.010
<v Speaker 1>Because

01:49:54.410 --> 01:49:57.050
<v Speaker 1>that is the only one that doesn't have

01:49:57.050 --> 01:49:58.090
<v Speaker 1>a public IP.

01:50:07.805 --> 01:50:08.525
<v Speaker 1>I'm

01:50:09.165 --> 01:50:10.045
<v Speaker 1>I'm

01:50:10.205 --> 01:50:11.245
<v Speaker 1>I'm just

01:50:12.125 --> 01:50:14.445
<v Speaker 1>sorry. Like like, right on the third one

01:50:14.445 --> 01:50:15.565
<v Speaker 1>from the bottom. Right?

01:50:16.330 --> 01:50:18.490
<v Speaker 1>But the one right above it is the

01:50:18.490 --> 01:50:20.490
<v Speaker 1>other worker node, and it has a public

01:50:20.490 --> 01:50:21.210
<v Speaker 1>IP.

01:50:22.650 --> 01:50:23.530
<v Speaker 0>Okay.

01:50:23.530 --> 01:50:26.330
<v Speaker 0>So you're So the service

01:50:26.650 --> 01:50:29.450
<v Speaker 1>let's look at the service, the Kubernetes service.

01:50:30.514 --> 01:50:33.394
<v Speaker 1>I think wait. Kube proxy, right, on the

01:50:34.355 --> 01:50:35.554
<v Speaker 1>broken node.

01:50:35.715 --> 01:50:37.474
<v Speaker 1>Are we on that node? No. We're not.

01:50:37.474 --> 01:50:39.395
<v Speaker 1>We're on the control plane node. So I

01:50:39.395 --> 01:50:40.435
<v Speaker 0>think So we should look.

01:50:42.990 --> 01:50:43.790
<v Speaker 1>See that?

01:50:44.430 --> 01:50:46.910
<v Speaker 0>I I think these are okay and these

01:50:47.070 --> 01:50:47.550
<v Speaker 0>why

01:50:47.950 --> 01:50:50.989
<v Speaker 0>does our core DNS have a different

01:50:51.870 --> 01:50:54.830
<v Speaker 0>structure? Why is it a 19216845?

01:50:55.550 --> 01:50:56.350
<v Speaker 0>That's

01:50:56.985 --> 01:50:58.825
<v Speaker 0>not a CIDR address that we're using in

01:50:58.825 --> 01:51:00.745
<v Speaker 0>our cluster. Right? Like,

01:51:01.625 --> 01:51:04.025
<v Speaker 0>our pod IP space is 1012.

01:51:04.025 --> 01:51:06.585
<v Speaker 0>The public IP address is I think is

01:51:06.585 --> 01:51:07.785
<v Speaker 0>typically okay.

01:51:08.345 --> 01:51:09.625
<v Speaker 0>This is fucked.

01:51:11.900 --> 01:51:13.179
<v Speaker 1>Right. And

01:51:13.500 --> 01:51:15.900
<v Speaker 1>also but, like, I bet we can't reach

01:51:15.900 --> 01:51:20.300
<v Speaker 1>that particular node because it also doesn't have

01:51:30.114 --> 01:51:32.195
<v Speaker 0>I should be better at this by now.

01:51:34.755 --> 01:51:37.954
<v Speaker 0>So right now my hypothesis is that the

01:51:37.954 --> 01:51:39.954
<v Speaker 0>IP address of these pods

01:51:39.920 --> 01:51:40.880
<v Speaker 0>has been

01:51:41.520 --> 01:51:44.559
<v Speaker 0>some something ski with there. Right? That that

01:51:44.880 --> 01:51:47.039
<v Speaker 0>shouldn't be the IP address of those pods.

01:51:47.199 --> 01:51:47.840
<v Speaker 0>So

01:51:50.239 --> 01:51:51.039
<v Speaker 1>Yeah.

01:51:51.280 --> 01:51:52.080
<v Speaker 0>I

01:51:52.080 --> 01:51:52.719
<v Speaker 0>I don't know.

01:51:53.835 --> 01:51:55.675
<v Speaker 0>Why is it getting those IP addresses?

01:51:57.275 --> 01:51:59.995
<v Speaker 0>Let's kill them. How'd you feel about that?

01:52:00.715 --> 01:52:02.155
<v Speaker 1>That sounds great.

01:52:04.795 --> 01:52:06.155
<v Speaker 0>And see if it comes back with those

01:52:06.155 --> 01:52:07.755
<v Speaker 0>funky IP addresses again.

01:52:07.995 --> 01:52:08.875
<v Speaker 0>I I

01:52:09.889 --> 01:52:11.650
<v Speaker 0>I'm too quick to delete pods. I know

01:52:11.650 --> 01:52:13.889
<v Speaker 0>it's a terrible practice but sometimes I think

01:52:13.889 --> 01:52:15.250
<v Speaker 0>just let's

01:52:15.250 --> 01:52:16.130
<v Speaker 0>just do it.

01:52:17.570 --> 01:52:18.449
<v Speaker 0>Okay.

01:52:20.369 --> 01:52:22.290
<v Speaker 0>So it has come back with those IP

01:52:22.290 --> 01:52:22.690
<v Speaker 0>addresses.

01:52:24.955 --> 01:52:27.035
<v Speaker 0>Now if it's on a if it's on

01:52:27.035 --> 01:52:29.114
<v Speaker 0>a a network of its own, it's not

01:52:29.114 --> 01:52:30.474
<v Speaker 0>gonna be able to reach

01:52:31.594 --> 01:52:33.515
<v Speaker 0>the IP address of anything that within the

01:52:33.515 --> 01:52:33.915
<v Speaker 0>cluster.

01:52:40.070 --> 01:52:41.829
<v Speaker 0>Like it just wouldn't have the roots

01:52:42.150 --> 01:52:43.030
<v Speaker 0>at all.

01:52:44.150 --> 01:52:44.710
<v Speaker 0>So what

01:52:48.389 --> 01:52:49.749
<v Speaker 1>So what is the

01:52:52.235 --> 01:52:54.635
<v Speaker 1>I'm having to just to delete all these

01:52:54.635 --> 01:52:56.555
<v Speaker 0>the shit and the default namespace that we

01:52:56.555 --> 01:52:57.755
<v Speaker 0>know shouldn't be there.

01:52:59.835 --> 01:53:01.355
<v Speaker 0>Unless you've you've got some

01:53:01.835 --> 01:53:03.915
<v Speaker 0>ideas. I'm drawing a loss again.

01:53:06.470 --> 01:53:06.870
<v Speaker 1>Is it

01:53:13.510 --> 01:53:14.790
<v Speaker 0>You happy with that?

01:53:15.190 --> 01:53:15.670
<v Speaker 1>Yep.

01:53:21.655 --> 01:53:23.015
<v Speaker 0>Oh, no. Wait. They're

01:53:23.495 --> 01:53:25.175
<v Speaker 0>of course, they're deployments.

01:53:31.655 --> 01:53:32.855
<v Speaker 0>Okay. Good. Gone.

01:53:33.990 --> 01:53:35.750
<v Speaker 0>Let's wait for them to go away.

01:53:36.470 --> 01:53:37.429
<v Speaker 0>The only

01:53:38.390 --> 01:53:40.470
<v Speaker 0>I I don't even know. I'm completely guessing.

01:53:40.470 --> 01:53:42.630
<v Speaker 0>I think hopefully we can delete core DNS.

01:53:42.630 --> 01:53:44.870
<v Speaker 0>I I don't think those IP addresses or

01:53:44.870 --> 01:53:46.710
<v Speaker 0>ranges. I think something's messing with it.

01:53:48.034 --> 01:53:50.594
<v Speaker 0>We did look for admission controllers

01:53:50.675 --> 01:53:51.635
<v Speaker 0>earlier.

01:53:55.074 --> 01:53:57.155
<v Speaker 1>Well, I mean, we also have no

01:53:58.034 --> 01:53:58.834
<v Speaker 1>trouble.

01:53:59.235 --> 01:54:00.275
<v Speaker 1>Wow. There's like,

01:54:01.240 --> 01:54:04.520
<v Speaker 1>it's telling us twice that it is terminating.

01:54:04.520 --> 01:54:06.679
<v Speaker 1>Look at that. For the same one.

01:54:08.280 --> 01:54:09.160
<v Speaker 1>See that?

01:54:09.640 --> 01:54:12.200
<v Speaker 1>The the the the deletion log is weird.

01:54:13.815 --> 01:54:16.295
<v Speaker 0>Yeah. But I just blame Kubernetes for that.

01:54:16.775 --> 01:54:17.415
<v Speaker 0>Yeah.

01:54:17.735 --> 01:54:19.095
<v Speaker 0>I'm gonna delete this and then you're on

01:54:19.095 --> 01:54:20.535
<v Speaker 0>your own. I have no idea. I'm just

01:54:20.535 --> 01:54:21.735
<v Speaker 1>gonna I

01:54:23.735 --> 01:54:25.575
<v Speaker 0>wanna see core DNS come back with an

01:54:25.575 --> 01:54:27.655
<v Speaker 0>IP address that I know exists in my

01:54:27.655 --> 01:54:28.055
<v Speaker 0>cluster.

01:54:32.510 --> 01:54:33.230
<v Speaker 0>No. Okay.

01:54:42.554 --> 01:54:44.954
<v Speaker 0>So the CNI plugin is responsible for giving

01:54:44.954 --> 01:54:46.714
<v Speaker 0>everything an IP address.

01:54:48.875 --> 01:54:51.594
<v Speaker 0>Let's check the

01:54:54.840 --> 01:54:56.520
<v Speaker 0>So then config map.

01:55:01.560 --> 01:55:02.040
<v Speaker 1>There

01:55:02.360 --> 01:55:04.360
<v Speaker 0>Oh, there's a cluster at P V 4

01:55:04.360 --> 01:55:06.920
<v Speaker 0>Pool Of 1921680016.

01:55:14.265 --> 01:55:15.945
<v Speaker 0>Is core DNS I don't know what that

01:55:15.945 --> 01:55:16.344
<v Speaker 1>means.

01:55:20.600 --> 01:55:22.440
<v Speaker 0>Means I may have done something very bad.

01:55:37.565 --> 01:55:38.364
<v Speaker 0>Shit.

01:55:44.125 --> 01:55:45.244
<v Speaker 0>I think

01:55:45.725 --> 01:55:48.765
<v Speaker 0>he's changed the cider of our network

01:55:49.659 --> 01:55:50.939
<v Speaker 0>at Medflight.

01:55:54.139 --> 01:55:55.739
<v Speaker 1>Like, right now?

01:55:58.380 --> 01:55:58.860
<v Speaker 0>Okay.

01:56:02.485 --> 01:56:03.845
<v Speaker 0>I

01:56:07.045 --> 01:56:08.725
<v Speaker 0>just I I I

01:56:09.445 --> 01:56:10.245
<v Speaker 1>I'm

01:56:12.565 --> 01:56:14.245
<v Speaker 1>so mad at When when I see a

01:56:14.245 --> 01:56:15.605
<v Speaker 0>get pods all

01:56:16.340 --> 01:56:17.940
<v Speaker 0>and I'm seeing 10.12

01:56:17.940 --> 01:56:18.739
<v Speaker 0>here,

01:56:18.820 --> 01:56:21.300
<v Speaker 0>I'm seeing 1 9 twos here. Are these

01:56:21.300 --> 01:56:22.339
<v Speaker 0>node related?

01:56:24.179 --> 01:56:27.300
<v Speaker 0>Let's do a grep for 89.

01:56:29.355 --> 01:56:31.195
<v Speaker 0>Wait. What did I get? Oh, that's it.

01:56:31.195 --> 01:56:32.554
<v Speaker 0>Silly.

01:56:34.235 --> 01:56:35.835
<v Speaker 0>Okay. So this is all of our pods

01:56:35.835 --> 01:56:37.114
<v Speaker 0>with IP addresses.

01:56:37.195 --> 01:56:39.434
<v Speaker 0>I'm gonna grep on a worker eight nine.

01:56:40.954 --> 01:56:42.074
<v Speaker 0>Nothing. That's not right.

01:56:43.780 --> 01:56:46.820
<v Speaker 0>Oh, no. A dash a 89.

01:56:48.980 --> 01:56:50.980
<v Speaker 0>Yeah. See, we have multiple

01:56:51.380 --> 01:56:53.460
<v Speaker 0>CIDRs across

01:56:56.580 --> 01:56:58.580
<v Speaker 0>I mean, that just seems fucked.

01:57:00.724 --> 01:57:02.565
<v Speaker 0>So let's check out I don't know if

01:57:02.565 --> 01:57:04.085
<v Speaker 0>you're still watching my screen or if you're

01:57:04.085 --> 01:57:05.045
<v Speaker 0>watching my screen or if you're on your

01:57:05.205 --> 01:57:07.525
<v Speaker 1>I am. Alright. Okay. So Yeah. I'm gonna

01:57:07.525 --> 01:57:09.205
<v Speaker 0>pop open Versus Code, and then I'm gonna

01:57:09.205 --> 01:57:11.445
<v Speaker 0>remember which CIDRs are used for cluster creation.

01:57:14.270 --> 01:57:15.550
<v Speaker 0>So here's

01:57:15.949 --> 01:57:18.429
<v Speaker 0>the no. Cluster dot YAML.

01:57:18.910 --> 01:57:20.430
<v Speaker 0>Oh, there's gonna be a token in here,

01:57:20.430 --> 01:57:22.269
<v Speaker 0>but we're just we'll deal with it.

01:57:25.790 --> 01:57:28.074
<v Speaker 1>I'm super out of my depth here. Cider

01:57:28.074 --> 01:57:28.715
<v Speaker 1>blocks.

01:57:29.114 --> 01:57:31.195
<v Speaker 0>Yeah. Okay. So 192168.

01:57:31.275 --> 01:57:32.635
<v Speaker 0>I weirdly

01:57:32.635 --> 01:57:33.594
<v Speaker 0>enough then.

01:57:36.074 --> 01:57:36.715
<v Speaker 0>However

01:57:36.955 --> 01:57:38.554
<v Speaker 0>That that looks right then.

01:57:39.170 --> 01:57:40.850
<v Speaker 0>But only for core DNS and a few

01:57:40.850 --> 01:57:43.010
<v Speaker 0>other things. We have a whole bunch

01:57:43.890 --> 01:57:46.210
<v Speaker 0>of other stuff on its own network.

01:57:48.530 --> 01:57:49.250
<v Speaker 1>Right.

01:57:49.490 --> 01:57:50.210
<v Speaker 0>I don't know.

01:57:52.175 --> 01:57:52.975
<v Speaker 0>So

01:57:52.975 --> 01:57:54.495
<v Speaker 0>we just we're gonna have to just check

01:57:54.495 --> 01:57:56.014
<v Speaker 0>all the obvious stuff then.

01:57:59.535 --> 01:58:01.375
<v Speaker 0>Cluster size Oh, service cluster. Service

01:58:02.175 --> 01:58:04.094
<v Speaker 1>cluster IP range.

01:58:05.535 --> 01:58:06.975
<v Speaker 1>172

01:58:07.350 --> 01:58:08.310
<v Speaker 1>down there.

01:58:10.790 --> 01:58:13.270
<v Speaker 0>Service cluster IP address range.

01:58:13.590 --> 01:58:15.430
<v Speaker 1>I don't know what that means, but I

01:58:15.590 --> 01:58:17.750
<v Speaker 1>all all I see is different. It's different.

01:58:18.310 --> 01:58:20.550
<v Speaker 0>I think that's just for Kubernetes

01:58:20.550 --> 01:58:22.870
<v Speaker 0>and core DNS. I'm not even sure.

01:58:34.125 --> 01:58:37.645
<v Speaker 0>Okay. Okay. I'm confusing myself. That was wrong.

01:58:37.645 --> 01:58:41.350
<v Speaker 0>10 or 12 is the actual bare metal

01:58:41.910 --> 01:58:44.630
<v Speaker 0>network. So I'm going to describe this pod.

01:58:44.630 --> 01:58:46.150
<v Speaker 0>I bet you it's just got

01:58:47.510 --> 01:58:48.230
<v Speaker 0>both.

01:58:51.830 --> 01:58:52.070
<v Speaker 0>Rawkode.

01:58:55.545 --> 01:58:57.865
<v Speaker 0>Is it just got multiple IP addresses and

01:58:57.865 --> 01:58:59.865
<v Speaker 0>get pods that's just pecking a random one

01:58:59.865 --> 01:59:00.745
<v Speaker 0>to show me?

01:59:01.625 --> 01:59:04.265
<v Speaker 0>No. That's it's only IP address. Which means

01:59:04.265 --> 01:59:06.105
<v Speaker 0>it's either running a host networking or doing

01:59:06.105 --> 01:59:07.785
<v Speaker 0>something else. So I think that's a completely

01:59:07.785 --> 01:59:10.520
<v Speaker 0>different thing, and I'm debugging the wrong problem.

01:59:10.520 --> 01:59:11.079
<v Speaker 0>So

01:59:11.639 --> 01:59:12.999
<v Speaker 0>which is very standard.

01:59:14.280 --> 01:59:16.920
<v Speaker 0>So now back to this. Core DNS cannot

01:59:16.920 --> 01:59:19.479
<v Speaker 0>speak to the Kubernetes API server.

01:59:19.800 --> 01:59:21.719
<v Speaker 0>It's getting a connection refused. I don't think

01:59:21.719 --> 01:59:24.584
<v Speaker 0>it's our back. It literally cannot hit

01:59:25.784 --> 01:59:28.264
<v Speaker 0>the service. We've checked the service. It has

01:59:28.264 --> 01:59:30.024
<v Speaker 0>endpoints. They look alright.

01:59:30.665 --> 01:59:32.744
<v Speaker 1>What about the cube API server?

01:59:37.480 --> 01:59:39.160
<v Speaker 0>Yeah. Let's check.

01:59:41.240 --> 01:59:43.640
<v Speaker 1>Because that one has been up forty three

01:59:43.640 --> 01:59:44.360
<v Speaker 1>hours,

01:59:44.520 --> 01:59:46.440
<v Speaker 1>which is not the same time as when

01:59:46.440 --> 01:59:47.880
<v Speaker 1>the cluster was made.

01:59:50.040 --> 01:59:50.760
<v Speaker 0>Well spotted.

01:59:51.585 --> 01:59:52.705
<v Speaker 0>Okay. So

01:59:54.065 --> 01:59:55.425
<v Speaker 0>I mean, we could just look at this

01:59:55.425 --> 01:59:57.345
<v Speaker 0>as a static manifest. I shouldn't look at

01:59:57.345 --> 01:59:58.385
<v Speaker 0>it in the cluster.

02:00:02.305 --> 02:00:05.345
<v Speaker 0>So we're back to suspecting something in here.

02:00:05.905 --> 02:00:06.305
<v Speaker 0>Mhmm.

02:00:07.450 --> 02:00:10.170
<v Speaker 1>Kubernetesdefault.service.cluster.local

02:00:10.170 --> 02:00:11.690
<v Speaker 1>is a service account.

02:00:13.370 --> 02:00:14.570
<v Speaker 1>Do we have it?

02:00:18.410 --> 02:00:19.130
<v Speaker 1>Why?

02:00:19.450 --> 02:00:20.810
<v Speaker 1>Does that make sense?

02:00:29.815 --> 02:00:32.135
<v Speaker 1>Why does a keyblade have a preferred address

02:00:32.135 --> 02:00:32.455
<v Speaker 1>type?

02:00:38.950 --> 02:00:41.590
<v Speaker 1>Enable admission plugins, node restriction.

02:00:41.670 --> 02:00:42.869
<v Speaker 1>Is that normal?

02:00:43.190 --> 02:00:44.230
<v Speaker 0>Yes.

02:00:44.230 --> 02:00:45.830
<v Speaker 0>I've fallen for that before. I tried to

02:00:45.830 --> 02:00:47.270
<v Speaker 0>delete it, and it turns out that is

02:00:47.270 --> 02:00:50.435
<v Speaker 0>normal. Normal. What about the advertised add address?

02:00:50.835 --> 02:00:52.755
<v Speaker 0>Yeah. I'm looking at that. So

02:00:53.955 --> 02:00:56.435
<v Speaker 0>we wanna correlate that to the service IP

02:00:56.435 --> 02:00:59.155
<v Speaker 0>address. Right now, I'm gonna assume it's okay.

02:01:01.670 --> 02:01:04.070
<v Speaker 0>But definitely something I'm gonna check-in a moment.

02:01:04.469 --> 02:01:05.989
<v Speaker 0>The rest of this looks fine. I mean,

02:01:05.989 --> 02:01:07.989
<v Speaker 0>we're speaking to the API server. Right? It

02:01:07.989 --> 02:01:09.510
<v Speaker 0>it it is working.

02:01:10.469 --> 02:01:13.349
<v Speaker 0>Controller and other server seats are scheduling pods.

02:01:13.349 --> 02:01:15.190
<v Speaker 0>They're speaking to it. It's

02:01:15.285 --> 02:01:16.325
<v Speaker 0>only Yeah.

02:01:16.725 --> 02:01:18.005
<v Speaker 1>It's only core DNS.

02:01:21.525 --> 02:01:23.925
<v Speaker 0>Is there something funny about core DNS?

02:01:35.090 --> 02:01:35.810
<v Speaker 0>Yeah.

02:01:37.970 --> 02:01:39.570
<v Speaker 0>Let's go back into this. I feel like

02:01:39.570 --> 02:01:41.570
<v Speaker 0>we've missed something. I've missed something.

02:01:45.375 --> 02:01:47.775
<v Speaker 1>Oh, I missed something too.

02:01:47.775 --> 02:01:48.574
<v Speaker 1>So

02:01:49.935 --> 02:01:51.855
<v Speaker 1>where are we in right now? This is

02:01:51.855 --> 02:01:52.494
<v Speaker 0>the

02:01:52.815 --> 02:01:54.094
<v Speaker 0>core DNS

02:01:54.495 --> 02:01:55.455
<v Speaker 0>config.

02:01:57.055 --> 02:01:59.215
<v Speaker 0>I'm really looking to see if this

02:02:00.370 --> 02:02:01.810
<v Speaker 0>networking stuff

02:02:02.450 --> 02:02:03.570
<v Speaker 0>is wrong.

02:02:04.370 --> 02:02:06.849
<v Speaker 0>Now he could have changed the security context.

02:02:07.010 --> 02:02:08.850
<v Speaker 0>I'm not sure what core DNS needs, but

02:02:08.850 --> 02:02:11.330
<v Speaker 0>I'm assuming that being service is probably alright,

02:02:11.330 --> 02:02:12.770
<v Speaker 0>etcetera and all. It doesn't run a DNS

02:02:12.770 --> 02:02:13.250
<v Speaker 0>server.

02:02:13.945 --> 02:02:15.465
<v Speaker 1>But it drops all?

02:02:15.945 --> 02:02:18.905
<v Speaker 0>The DNS policy yeah. That should be alright.

02:02:18.905 --> 02:02:20.585
<v Speaker 0>Although, I think there is a DNS policy

02:02:20.585 --> 02:02:22.105
<v Speaker 0>of host firewall. Wait.

02:02:25.145 --> 02:02:25.625
<v Speaker 1>Wait.

02:02:29.800 --> 02:02:32.440
<v Speaker 1>Okay. So default is not the default.

02:02:35.560 --> 02:02:36.760
<v Speaker 0>You know what we could do?

02:02:40.305 --> 02:02:41.185
<v Speaker 0>CoreDNS

02:02:41.185 --> 02:02:41.985
<v Speaker 0>Kubernetes

02:02:41.985 --> 02:02:43.025
<v Speaker 0>manifest.

02:02:44.865 --> 02:02:46.625
<v Speaker 0>What's this supposed to look like? And you

02:02:46.625 --> 02:02:47.905
<v Speaker 0>can see I've been on this before because

02:02:47.905 --> 02:02:49.985
<v Speaker 0>clearly people keep fucking with CoreDNS.

02:02:49.985 --> 02:02:50.065
<v Speaker 0>But

02:02:53.380 --> 02:02:55.300
<v Speaker 0>so what was it we said was potentially

02:02:55.300 --> 02:02:57.539
<v Speaker 0>suspect? We wanted to look at

02:03:03.380 --> 02:03:04.739
<v Speaker 0>DNS policy.

02:03:05.205 --> 02:03:07.765
<v Speaker 0>Yeah. Default seems to be okay. Okay. That's

02:03:07.765 --> 02:03:08.405
<v Speaker 2>fine.

02:03:08.805 --> 02:03:11.045
<v Speaker 0>What was the other thing? I'm not sure

02:03:11.045 --> 02:03:13.845
<v Speaker 0>about enable service links. That sounds bad to

02:03:13.845 --> 02:03:14.965
<v Speaker 0>me. Yeah.

02:03:16.645 --> 02:03:18.885
<v Speaker 0>Because that would imply that it's maybe

02:03:20.890 --> 02:03:23.850
<v Speaker 0>yeah. I don't There's something that's missing. Priority?

02:03:23.850 --> 02:03:25.290
<v Speaker 1>What about priority?

02:03:25.770 --> 02:03:26.409
<v Speaker 1>Two

02:03:26.650 --> 02:03:27.610
<v Speaker 1>bajillion?

02:03:31.530 --> 02:03:33.625
<v Speaker 1>That looks huge. What

02:03:33.945 --> 02:03:34.985
<v Speaker 1>is that even?

02:03:37.705 --> 02:03:39.305
<v Speaker 0>It's not set in here,

02:03:39.625 --> 02:03:41.465
<v Speaker 0>but the priority class name is. So, yeah,

02:03:41.465 --> 02:03:43.945
<v Speaker 0>let's let's comment that. The class name seems

02:03:43.945 --> 02:03:46.265
<v Speaker 0>okay. Preemption policy

02:03:47.490 --> 02:03:49.330
<v Speaker 0>isn't set so we're gonna take that out

02:03:49.330 --> 02:03:49.969
<v Speaker 0>too.

02:03:50.530 --> 02:03:52.369
<v Speaker 0>Schedule the name security context.

02:03:53.170 --> 02:03:54.610
<v Speaker 0>Like you said, let's change one thing at

02:03:54.610 --> 02:03:56.290
<v Speaker 0>a time. Let's let's see if any of

02:03:56.290 --> 02:03:56.929
<v Speaker 0>that

02:03:57.170 --> 02:03:58.210
<v Speaker 0>helps us whatsoever.

02:04:02.045 --> 02:04:03.725
<v Speaker 0>I really wanna be on the viewer side

02:04:03.725 --> 02:04:06.125
<v Speaker 0>of this one one week. Right? I just

02:04:06.125 --> 02:04:08.045
<v Speaker 0>not be on the side of it for

02:04:08.045 --> 02:04:08.605
<v Speaker 0>sure.

02:04:09.485 --> 02:04:10.844
<v Speaker 0>I'm gonna have to get someone else to

02:04:10.844 --> 02:04:11.405
<v Speaker 0>host this.

02:04:13.380 --> 02:04:16.260
<v Speaker 0>Okay. So we're deleting core DNS. I'm hoping

02:04:16.340 --> 02:04:18.340
<v Speaker 0>this is the enable service links or that

02:04:18.340 --> 02:04:21.300
<v Speaker 0>priority crazy big number whatever that's doing.

02:04:21.700 --> 02:04:23.700
<v Speaker 0>Maybe guy would join us if it fixes

02:04:23.700 --> 02:04:24.980
<v Speaker 0>it and tells what the hell that was

02:04:24.980 --> 02:04:25.220
<v Speaker 0>doing.

02:04:37.344 --> 02:04:38.145
<v Speaker 0>Let's

02:04:38.145 --> 02:04:39.505
<v Speaker 0>see if I can port forward again.

02:04:45.000 --> 02:04:47.000
<v Speaker 0>I just forget maybe it's still broken.

02:04:49.320 --> 02:04:50.360
<v Speaker 1>Should we

02:04:51.000 --> 02:04:54.040
<v Speaker 1>restart the whole Kubernetes deployment rather than just

02:04:54.040 --> 02:04:54.920
<v Speaker 1>delete the pods?

02:04:59.135 --> 02:05:00.815
<v Speaker 0>Well, let's check the logs of it first

02:05:00.815 --> 02:05:02.815
<v Speaker 0>in case of something. Sure.

02:05:03.615 --> 02:05:05.535
<v Speaker 0>No. It's healthy now. Whereas I was complaining

02:05:05.535 --> 02:05:07.375
<v Speaker 0>a lot last time, wasn't it?

02:05:08.735 --> 02:05:09.695
<v Speaker 1>I don't remember.

02:05:14.700 --> 02:05:15.660
<v Speaker 0>It was. There were

02:05:16.620 --> 02:05:17.739
<v Speaker 1>We deploy

02:05:17.820 --> 02:05:20.060
<v Speaker 1>our clustered deployment.

02:05:21.420 --> 02:05:23.420
<v Speaker 0>Yeah. Okay. So it can pick up on

02:05:23.420 --> 02:05:26.175
<v Speaker 1>things. I I just like starting with a

02:05:26.175 --> 02:05:27.855
<v Speaker 1>fresh slate sometimes.

02:05:28.015 --> 02:05:30.335
<v Speaker 0>Yeah. I'm just gonna check both of these.

02:05:30.735 --> 02:05:32.735
<v Speaker 0>Yeah. Those both look good. So let's try

02:05:32.735 --> 02:05:33.775
<v Speaker 0>your suggestion.

02:05:37.295 --> 02:05:38.895
<v Speaker 1>Actually, just like

02:05:42.440 --> 02:05:45.880
<v Speaker 1>delete the whole deploy, like, redeploy it.

02:05:46.680 --> 02:05:47.560
<v Speaker 0>Okay.

02:05:47.560 --> 02:05:48.200
<v Speaker 0>Well,

02:05:49.720 --> 02:05:51.880
<v Speaker 0>since it's up, I'm gonna just check it.

02:05:52.360 --> 02:05:53.000
<v Speaker 0>See what happens.

02:05:59.895 --> 02:06:01.735
<v Speaker 0>Yeah, we still have no cluster DNS.

02:06:21.989 --> 02:06:25.350
<v Speaker 0>Kubectl s has endpoints. I'm assuming Kubernetes has

02:06:25.350 --> 02:06:25.830
<v Speaker 0>endpoint.

02:06:33.055 --> 02:06:35.375
<v Speaker 0>Are they scheduled on different nodes?

02:06:38.735 --> 02:06:40.335
<v Speaker 0>Okay. That's after eight.

02:06:42.390 --> 02:06:45.030
<v Speaker 0>Yeah. Let's see if Guy wants to come

02:06:45.030 --> 02:06:47.030
<v Speaker 0>back and give us last bit of advice

02:06:47.030 --> 02:06:50.150
<v Speaker 0>before we we wrap this up. Yeah.

02:06:50.550 --> 02:06:51.270
<v Speaker 0>You there, Guy?

02:06:58.145 --> 02:06:59.425
<v Speaker 2>I am indeed.

02:07:00.145 --> 02:07:01.344
<v Speaker 0>Very close.

02:07:02.785 --> 02:07:05.985
<v Speaker 2>You've you've not looked at the configuration of

02:07:05.985 --> 02:07:08.065
<v Speaker 2>core DNS. You've looked at the pods, but

02:07:08.065 --> 02:07:11.860
<v Speaker 2>not how the pods are configured to run

02:07:11.860 --> 02:07:12.979
<v Speaker 2>the DNS.

02:07:16.739 --> 02:07:17.940
<v Speaker 0>Okay. So the

02:07:18.659 --> 02:07:19.940
<v Speaker 0>you want us to look at the core

02:07:19.940 --> 02:07:21.459
<v Speaker 0>DNS conflict map?

02:07:21.860 --> 02:07:23.685
<v Speaker 2>Yeah. And you can

02:07:24.245 --> 02:07:27.285
<v Speaker 2>I I nicely left you some small tools

02:07:27.285 --> 02:07:29.365
<v Speaker 2>pods so that you could if you didn't

02:07:29.365 --> 02:07:31.605
<v Speaker 2>have anything in the cluster to exec into

02:07:31.605 --> 02:07:34.005
<v Speaker 2>and run decks against things in the cluster

02:07:34.005 --> 02:07:36.165
<v Speaker 2>and outside the cluster, you could use that?

02:07:37.480 --> 02:07:39.640
<v Speaker 2>You didn't seem to like my present much.

02:07:39.960 --> 02:07:40.840
<v Speaker 0>I

02:07:42.600 --> 02:07:44.920
<v Speaker 0>I didn't know where Smurl was. I just

02:07:44.920 --> 02:07:46.440
<v Speaker 0>was like, hey, go away.

02:07:46.920 --> 02:07:49.800
<v Speaker 0>Because in in my experience of these episodes,

02:07:50.115 --> 02:07:52.195
<v Speaker 0>people don't leave me helpful things. They leave

02:07:52.195 --> 02:07:54.035
<v Speaker 0>me bad nasty things. And I just wanted

02:07:54.035 --> 02:07:55.395
<v Speaker 0>rid of anything I didn't know what it

02:07:55.395 --> 02:07:56.595
<v Speaker 0>was. So

02:07:57.635 --> 02:07:59.635
<v Speaker 2>I mean, that's that's reasonable.

02:08:00.035 --> 02:08:02.835
<v Speaker 0>Alright. Thank you. We'll give this another few

02:08:02.835 --> 02:08:04.115
<v Speaker 0>minutes to see how we get on. Thanks,

02:08:04.115 --> 02:08:04.275
<v Speaker 0>guy.

02:08:06.739 --> 02:08:07.540
<v Speaker 0>I

02:08:07.540 --> 02:08:09.300
<v Speaker 0>like my phone a friend button. That's coming

02:08:09.300 --> 02:08:11.059
<v Speaker 0>in quite handy. Okay.

02:08:11.860 --> 02:08:15.620
<v Speaker 0>Unfortunately, we had this YAML open so why

02:08:15.620 --> 02:08:16.020
<v Speaker 0>don't we

02:08:17.435 --> 02:08:19.275
<v Speaker 0>go through the config map? So we're looking

02:08:19.275 --> 02:08:20.155
<v Speaker 0>to see

02:08:20.635 --> 02:08:21.435
<v Speaker 0>errors

02:08:21.435 --> 02:08:22.235
<v Speaker 0>of

02:08:22.475 --> 02:08:24.795
<v Speaker 0>ready. So I'm I'm I'm I'm impressed to

02:08:24.795 --> 02:08:27.034
<v Speaker 1>see that lame duck is a real thing.

02:08:28.395 --> 02:08:28.715
<v Speaker 1>Great.

02:08:30.270 --> 02:08:32.670
<v Speaker 1>Kubernetes cluster dot local.

02:08:32.670 --> 02:08:35.550
<v Speaker 1>That's different. Cluster domain reverse

02:08:37.470 --> 02:08:39.710
<v Speaker 1>sliders. Yeah. I think these are

02:08:41.950 --> 02:08:42.830
<v Speaker 0>substituted

02:08:42.830 --> 02:08:43.710
<v Speaker 0>apply

02:08:43.710 --> 02:08:46.375
<v Speaker 0>time. Oh, sure. Sure. Sure. So that's fall

02:08:46.375 --> 02:08:47.094
<v Speaker 0>through.

02:08:47.255 --> 02:08:49.094
<v Speaker 0>We've got bad stuff here.

02:08:50.135 --> 02:08:52.375
<v Speaker 1>Do we? Oh, TTL.

02:08:52.615 --> 02:08:55.415
<v Speaker 0>And TTL. Yeah. Let's get rid of those.

02:08:55.495 --> 02:08:56.935
<v Speaker 0>Is there anything else?

02:08:57.575 --> 02:09:00.775
<v Speaker 0>Prometheus forward cash flow. Prometheus

02:09:01.650 --> 02:09:05.010
<v Speaker 0>forward cache list reload load balance reload load

02:09:05.010 --> 02:09:05.730
<v Speaker 0>balance.

02:09:06.449 --> 02:09:07.249
<v Speaker 0>Yep.

02:09:07.810 --> 02:09:09.890
<v Speaker 0>So I just like What about forward at

02:09:09.890 --> 02:09:10.850
<v Speaker 1>c resolve con?

02:09:15.465 --> 02:09:17.225
<v Speaker 0>Yeah. I think that's just telling it to

02:09:17.225 --> 02:09:18.985
<v Speaker 0>fall back on Yep. Both.

02:09:20.985 --> 02:09:23.385
<v Speaker 0>Okay. So now we've modified a config map.

02:09:23.385 --> 02:09:25.625
<v Speaker 0>There's no core DNS controller. We will need

02:09:25.625 --> 02:09:27.385
<v Speaker 0>to put those pods.

02:09:30.680 --> 02:09:32.760
<v Speaker 0>And then let's just hope it fixes it.

02:09:38.680 --> 02:09:40.600
<v Speaker 0>It's always this slow. I should start doing

02:09:40.600 --> 02:09:42.840
<v Speaker 0>a force kill with a grace period on

02:09:42.840 --> 02:09:43.000
<v Speaker 0>it.

02:09:43.695 --> 02:09:45.854
<v Speaker 1>I hate config maps.

02:09:46.014 --> 02:09:46.574
<v Speaker 1>Just I

02:09:47.614 --> 02:09:49.854
<v Speaker 1>really just don't like them. I'm like, no.

02:09:56.094 --> 02:09:58.094
<v Speaker 0>I don't think that helped.

02:10:05.599 --> 02:10:06.320
<v Speaker 1>Well

02:10:14.475 --> 02:10:15.275
<v Speaker 0>Okay.

02:10:20.074 --> 02:10:22.475
<v Speaker 0>While he told us to try that, let's

02:10:22.475 --> 02:10:23.275
<v Speaker 0>try it.

02:10:23.915 --> 02:10:25.755
<v Speaker 0>I guess that's the nicer way instead of

02:10:25.755 --> 02:10:26.635
<v Speaker 0>deleting the pods.

02:10:28.340 --> 02:10:30.100
<v Speaker 0>But we already deleted the pods and we

02:10:30.100 --> 02:10:32.260
<v Speaker 0>still weren't getting the work in DNS.

02:10:33.780 --> 02:10:35.780
<v Speaker 0>Although I guess the server never really checked

02:10:35.780 --> 02:10:38.260
<v Speaker 0>to check the service was actually responding yet.

02:10:39.235 --> 02:10:40.115
<v Speaker 0>Bad me.

02:10:47.635 --> 02:10:48.995
<v Speaker 0>Okay, we have endpoints.

02:10:53.310 --> 02:10:54.749
<v Speaker 0>We have put DNS.

02:10:55.949 --> 02:10:56.749
<v Speaker 0>Yeah.

02:11:01.310 --> 02:11:03.789
<v Speaker 0>Just keeps coming. Alright.

02:11:04.110 --> 02:11:05.150
<v Speaker 0>Did we miss something?

02:11:08.135 --> 02:11:09.895
<v Speaker 0>Is that errors supposed to be at the

02:11:09.895 --> 02:11:11.575
<v Speaker 0>top? Yeah. Errors.

02:11:13.015 --> 02:11:14.775
<v Speaker 0>Health lame doc. Ready

02:11:16.055 --> 02:11:16.775
<v Speaker 0>Kubernetes.

02:11:30.480 --> 02:11:32.080
<v Speaker 0>I wonder if this lane is wrong.

02:11:36.315 --> 02:11:39.195
<v Speaker 1>Is it custard at local dot service?

02:11:41.995 --> 02:11:42.875
<v Speaker 0>Oh, no.

02:11:43.435 --> 02:11:46.395
<v Speaker 0>Let's let's I'm gonna see cheat. Let's I'm

02:11:46.395 --> 02:11:48.875
<v Speaker 0>gonna jump on to cluster 14

02:11:49.639 --> 02:11:51.719
<v Speaker 0>and grab the config map and see what's

02:11:51.719 --> 02:11:52.519
<v Speaker 0>different. Yeah.

02:11:56.280 --> 02:11:58.439
<v Speaker 0>I don't need an invite. There we go.

02:12:02.119 --> 02:12:02.679
<v Speaker 0>Okay.

02:12:04.895 --> 02:12:07.215
<v Speaker 0>You think after seven episodes, I would know

02:12:07.215 --> 02:12:09.455
<v Speaker 0>what this config map is supposed to look

02:12:09.455 --> 02:12:10.655
<v Speaker 0>like, but I just

02:12:11.135 --> 02:12:11.934
<v Speaker 0>do not.

02:12:13.375 --> 02:12:14.735
<v Speaker 0>Have cube control,

02:12:14.815 --> 02:12:15.855
<v Speaker 0>cube config.

02:12:19.600 --> 02:12:20.239
<v Speaker 0>Okay.

02:12:20.480 --> 02:12:22.800
<v Speaker 0>This one works. Cool. Cluster dot local. Oh,

02:12:22.800 --> 02:12:24.320
<v Speaker 0>and the pod and secure and the TTL

02:12:24.320 --> 02:12:25.520
<v Speaker 0>are actually there too.

02:12:28.240 --> 02:12:28.880
<v Speaker 0>The forward.

02:12:29.895 --> 02:12:31.734
<v Speaker 0>This is the same contact now.

02:12:38.775 --> 02:12:40.054
<v Speaker 0>Right? Right?

02:12:40.215 --> 02:12:41.974
<v Speaker 1>Yeah. I think so.

02:12:45.560 --> 02:12:47.320
<v Speaker 0>Let's pull them side by side.

02:12:53.000 --> 02:12:54.200
<v Speaker 0>It was in the same.

02:12:56.425 --> 02:12:58.105
<v Speaker 0>And put the lane one.

02:12:58.985 --> 02:13:00.505
<v Speaker 0>Yeah. So we had to move to polygen

02:13:00.505 --> 02:13:01.385
<v Speaker 0>secure

02:13:02.665 --> 02:13:04.985
<v Speaker 0>and TTL. So let's add that back.

02:13:06.265 --> 02:13:06.905
<v Speaker 1>Sure.

02:13:08.985 --> 02:13:09.864
<v Speaker 1>What about

02:13:12.090 --> 02:13:14.650
<v Speaker 0>Yeah. These are the exact same fail. So

02:13:14.730 --> 02:13:16.170
<v Speaker 0>he told us to look in the core

02:13:16.170 --> 02:13:19.050
<v Speaker 0>DNS config and then there is nothing wrong

02:13:19.050 --> 02:13:21.290
<v Speaker 0>with the core DNS config. That's just cruel.

02:13:21.290 --> 02:13:21.370
<v Speaker 0>Yeah.

02:13:35.085 --> 02:13:36.845
<v Speaker 0>Alright. What about the

02:13:38.045 --> 02:13:39.005
<v Speaker 0>You got an idea?

02:13:54.875 --> 02:13:56.635
<v Speaker 1>Okay. I'm I want to get

02:13:57.995 --> 02:13:58.795
<v Speaker 1>seriously.

02:14:06.795 --> 02:14:07.275
<v Speaker 1>K.

02:14:11.329 --> 02:14:13.329
<v Speaker 0>Guy has given us a helpful hint on

02:14:13.329 --> 02:14:16.449
<v Speaker 0>the YouTube chat saying there's a few pixels.

02:14:17.889 --> 02:14:19.809
<v Speaker 0>This is a white space error in the

02:14:19.809 --> 02:14:21.969
<v Speaker 0>core DNS config. I will be

02:14:22.210 --> 02:14:23.170
<v Speaker 0>mighty frustrated.

02:14:28.345 --> 02:14:29.224
<v Speaker 0>Do you mind if I

02:14:29.785 --> 02:14:30.985
<v Speaker 1>Cool. I don't know. Go for it. Yeah.

02:14:30.985 --> 02:14:32.825
<v Speaker 1>Go for it. No. Just feel free to

02:14:32.825 --> 02:14:34.825
<v Speaker 0>open it. Do the thing. Yeah. Okay. Let's

02:14:34.825 --> 02:14:36.505
<v Speaker 0>just pull up in that config map again.

02:14:43.500 --> 02:14:45.500
<v Speaker 0>Unless it's whatever's off screen.

02:14:46.060 --> 02:14:47.180
<v Speaker 0>No. There's nothing.

02:14:47.900 --> 02:14:49.180
<v Speaker 1>Wait. Hang on.

02:14:52.380 --> 02:14:54.220
<v Speaker 1>Which one's the so this is 14.

02:14:54.755 --> 02:14:56.834
<v Speaker 0>Okay. So this one's 14 here.

02:14:57.315 --> 02:14:59.474
<v Speaker 0>And in fact, I'll I'll explain it.

02:15:01.715 --> 02:15:03.715
<v Speaker 1>Might not be a white space error,

02:15:04.915 --> 02:15:06.275
<v Speaker 1>and this is 12.

02:15:08.980 --> 02:15:10.739
<v Speaker 1>K. Resource version

02:15:11.060 --> 02:15:12.099
<v Speaker 1>is different.

02:15:12.580 --> 02:15:13.460
<v Speaker 1>Uh-huh.

02:15:13.860 --> 02:15:15.940
<v Speaker 1>K. Flip back to 14.

02:15:24.445 --> 02:15:25.565
<v Speaker 1>Keep flipping.

02:15:31.165 --> 02:15:31.805
<v Speaker 1>Scroll up.

02:15:37.420 --> 02:15:38.219
<v Speaker 1>Okay.

02:15:38.780 --> 02:15:40.460
<v Speaker 1>Scroll up to where it says data core

02:15:40.460 --> 02:15:41.260
<v Speaker 1>file.

02:15:45.020 --> 02:15:45.980
<v Speaker 1>Damn.

02:15:47.900 --> 02:15:49.900
<v Speaker 0>He's mocking us now because he said you're

02:15:49.900 --> 02:15:52.995
<v Speaker 0>jumping back and forward showed a slight difference.

02:15:56.115 --> 02:15:59.715
<v Speaker 0>This number seems arbitrary. Oh, you're rich.

02:16:03.315 --> 02:16:05.280
<v Speaker 1>That's the one that's so different. And I

02:16:05.280 --> 02:16:07.040
<v Speaker 1>was looking at the time stamp. So that's

02:16:07.120 --> 02:16:09.680
<v Speaker 0>The res the UID is different, and the

02:16:09.680 --> 02:16:11.840
<v Speaker 1>resource version is like

02:16:12.480 --> 02:16:15.040
<v Speaker 0>So the resource version, I would expect different,

02:16:15.440 --> 02:16:17.120
<v Speaker 0>but it's wildly high. Right?

02:16:18.255 --> 02:16:20.015
<v Speaker 1>Yeah. But what I don't even know what

02:16:20.015 --> 02:16:21.614
<v Speaker 1>resource version means

02:16:21.935 --> 02:16:23.054
<v Speaker 1>in this case.

02:16:23.614 --> 02:16:24.735
<v Speaker 1>Is this a

02:16:27.135 --> 02:16:29.534
<v Speaker 1>where does that come from? Could fig map

02:16:29.534 --> 02:16:32.094
<v Speaker 1>resource version? I'm gonna delete it and see

02:16:32.094 --> 02:16:33.215
<v Speaker 0>what it puts in its place.

02:16:33.990 --> 02:16:35.910
<v Speaker 0>Yeah. Our big huge number.

02:16:36.870 --> 02:16:37.590
<v Speaker 1>Okay.

02:16:37.990 --> 02:16:39.110
<v Speaker 1>Six digits.

02:16:45.110 --> 02:16:46.870
<v Speaker 1>Did you just replace it with the previous

02:16:46.870 --> 02:16:48.790
<v Speaker 1>one or with the one from the other

02:16:48.790 --> 02:16:49.270
<v Speaker 1>cluster?

02:16:50.604 --> 02:16:52.764
<v Speaker 1>I'm I'm just gonna look up wait. What

02:16:52.764 --> 02:16:53.004
<v Speaker 1>the

02:16:53.725 --> 02:16:56.205
<v Speaker 1>I don't even know what that means, resource

02:16:56.205 --> 02:16:57.084
<v Speaker 1>version.

02:16:57.324 --> 02:16:58.125
<v Speaker 0>I'm assuming.

02:17:02.049 --> 02:17:04.609
<v Speaker 0>There's like a weird bug and I'm sure

02:17:04.609 --> 02:17:06.449
<v Speaker 0>he's found it because he works at Skyscanner

02:17:06.449 --> 02:17:07.729
<v Speaker 0>and they've got a level of scale that

02:17:07.729 --> 02:17:08.930
<v Speaker 0>most people don't have.

02:17:09.729 --> 02:17:10.370
<v Speaker 0>But

02:17:11.489 --> 02:17:13.568
<v Speaker 0>something to do with this number going so

02:17:13.568 --> 02:17:17.729
<v Speaker 0>high is maybe causing it to load an

02:17:15.285 --> 02:17:18.805
<v Speaker 0>old config map in the pods or

02:17:18.805 --> 02:17:20.325
<v Speaker 0>something. I don't really

02:17:21.605 --> 02:17:22.245
<v Speaker 0>know.

02:17:23.205 --> 02:17:25.605
<v Speaker 0>But the number being so high worries me.

02:17:28.900 --> 02:17:30.340
<v Speaker 0>But we're now at the stage where I

02:17:30.340 --> 02:17:31.780
<v Speaker 0>have to go and pick up my daughter.

02:17:31.780 --> 02:17:32.261
<v Speaker 0>So

02:17:32.740 --> 02:17:34.900
<v Speaker 1>Yeah. I'm just gonna bring Guy in to

02:17:34.900 --> 02:17:36.980
<v Speaker 0>tell us what wonderful magical What we should

02:17:36.900 --> 02:17:38.180
<v Speaker 1>this is. Yeah.

02:17:40.174 --> 02:17:41.136
<v Speaker 0>Alright, guys.

02:17:42.655 --> 02:17:43.855
<v Speaker 0>Lay on us.

02:17:45.775 --> 02:17:46.815
<v Speaker 2>So

02:17:47.135 --> 02:17:49.056
<v Speaker 2>when you were jumping back and forth between

02:17:49.056 --> 02:17:51.615
<v Speaker 2>the working config and the

02:17:51.695 --> 02:17:52.655
<v Speaker 2>non working config,

02:17:53.870 --> 02:17:56.270
<v Speaker 2>If you look really hard at the c

02:17:56.270 --> 02:17:58.910
<v Speaker 2>in front of it in the Kubernetes config

02:18:02.990 --> 02:18:04.830
<v Speaker 0>Oh, you bastard.

02:18:05.389 --> 02:18:06.511
<v Speaker 1>The c?

02:18:08.430 --> 02:18:10.245
<v Speaker 2>Yeah. It's not a c.

02:18:10.645 --> 02:18:12.805
<v Speaker 2>No. It's a it's a character which looks

02:18:12.805 --> 02:18:13.924
<v Speaker 2>a lot like c.

02:18:15.844 --> 02:18:19.924
<v Speaker 1>What? So the Kubernetes plug in became authoritative

02:18:19.924 --> 02:18:20.565
<v Speaker 2>for

02:18:20.965 --> 02:18:24.010
<v Speaker 2>letter that looks like cluster.local.

02:18:25.689 --> 02:18:27.209
<v Speaker 0>That is cruel.

02:18:28.250 --> 02:18:30.250
<v Speaker 2>Yeah. I'm feeling a bit bad about it.

02:18:43.055 --> 02:18:44.096
<v Speaker 0>And it works.

02:18:44.415 --> 02:18:46.334
<v Speaker 0>I mean, my app doesn't work, but it

02:18:46.334 --> 02:18:46.815
<v Speaker 0>worked.

02:18:47.215 --> 02:18:50.255
<v Speaker 0>Alright. That was really harsh, guys. Thank you.

02:18:52.575 --> 02:18:52.975
<v Speaker 2>Sorry.

02:18:55.129 --> 02:18:57.129
<v Speaker 2>I think I only need my best to

02:18:57.129 --> 02:18:57.931
<v Speaker 2>meet

02:18:58.330 --> 02:18:59.130
<v Speaker 2>the person.

02:18:59.930 --> 02:19:00.730
<v Speaker 0>Alright.

02:19:01.049 --> 02:19:01.851
<v Speaker 0>I really

02:19:02.090 --> 02:19:03.851
<v Speaker 0>really do have to go get my daughter

02:19:03.851 --> 02:19:05.770
<v Speaker 0>before she gets really grumpy that she's not

02:19:05.770 --> 02:19:06.570
<v Speaker 0>in her bed.

02:19:06.889 --> 02:19:08.410
<v Speaker 0>Guy, I'm gonna cut you off but thank

02:19:08.410 --> 02:19:10.325
<v Speaker 0>you very much. That was painful.

02:19:11.125 --> 02:19:12.245
<v Speaker 1>Thank

02:19:12.245 --> 02:19:12.806
<v Speaker 1>you.

02:19:13.924 --> 02:19:15.205
<v Speaker 1>I learned a lot.

02:19:16.885 --> 02:19:18.005
<v Speaker 1>Okay.

02:19:18.885 --> 02:19:21.365
<v Speaker 1>This was really this was really fun. Thank

02:19:21.365 --> 02:19:22.806
<v Speaker 1>you so much for having me.

02:19:23.924 --> 02:19:26.690
<v Speaker 1>I'm I learned a ton. I hope I

02:19:26.690 --> 02:19:27.570
<v Speaker 1>was helpful.

02:19:28.450 --> 02:19:30.530
<v Speaker 0>Yeah. You were. You definitely were. It's always

02:19:30.530 --> 02:19:32.931
<v Speaker 0>nice just to have somebody help you, talk

02:19:32.931 --> 02:19:33.570
<v Speaker 0>to you.

02:19:34.049 --> 02:19:35.650
<v Speaker 0>We've got some really good tips from you,

02:19:35.650 --> 02:19:37.245
<v Speaker 0>you know, changing one thing at once. Just

02:19:37.245 --> 02:19:39.885
<v Speaker 0>walking through the whole process. And again, we

02:19:39.885 --> 02:19:41.564
<v Speaker 0>have to make sure that people know that

02:19:41.564 --> 02:19:43.165
<v Speaker 0>doesn't matter how much you work with Kubernetes

02:19:43.165 --> 02:19:44.764
<v Speaker 0>day and day. There's just so much. It's

02:19:44.764 --> 02:19:47.325
<v Speaker 0>such a huge complex project with thousands of

02:19:47.325 --> 02:19:49.245
<v Speaker 0>contributors, millions of lines of code.

02:19:49.485 --> 02:19:51.280
<v Speaker 0>You don't need to know all. So

02:19:52.399 --> 02:19:54.240
<v Speaker 1>You just need to have friends

02:19:54.720 --> 02:19:56.720
<v Speaker 1>to jump on clusters with.

02:19:56.960 --> 02:19:58.960
<v Speaker 0>Sadly. Friends like Gwen to come and help

02:19:58.960 --> 02:20:00.720
<v Speaker 0>you whenever you need it. So

02:20:01.600 --> 02:20:03.840
<v Speaker 1>This was super fun. Yeah. Thank you for

02:20:03.840 --> 02:20:05.840
<v Speaker 0>joining me. Have a a really great day

02:20:05.840 --> 02:20:07.576
<v Speaker 0>and I will speak to you again soon.

02:20:07.815 --> 02:20:10.296
<v Speaker 1>I will. Enjoy bedtime.

02:20:10.296 --> 02:20:11.176
<v Speaker 0>Bye.

02:20:11.336 --> 02:20:11.735
<v Speaker 1>Bye.
