WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: 3bf93492-8c42-4283-8dd2-d5911bd94f63
Created: 2025-04-29T19:36:54.990Z
Duration: 5765.092
Channels: 1

00:00:56.940 --> 00:00:57.740
<v Speaker 0>Hello,

00:00:57.820 --> 00:01:00.380
<v Speaker 0>and welcome to today's episode of Rawkode Live.

00:01:00.380 --> 00:01:02.620
<v Speaker 0>This is episode three of the

00:01:02.860 --> 00:01:03.500
<v Speaker 0>series,

00:01:04.305 --> 00:01:05.665
<v Speaker 0>I guess, clustered.

00:01:05.825 --> 00:01:09.025
<v Speaker 0>A show where we give perfectly functioning and

00:01:09.025 --> 00:01:11.025
<v Speaker 0>working Kubernetes clusters to

00:01:11.345 --> 00:01:13.585
<v Speaker 0>members of the community, and ask them to

00:01:13.585 --> 00:01:16.785
<v Speaker 0>break them with the intention of me and

00:01:17.180 --> 00:01:19.020
<v Speaker 0>a friend joining me to try and fix

00:01:19.020 --> 00:01:20.540
<v Speaker 0>them as best as we can.

00:01:21.340 --> 00:01:23.340
<v Speaker 0>Now, before we get started, I would please

00:01:23.340 --> 00:01:25.340
<v Speaker 0>encourage you all to subscribe and click the

00:01:25.340 --> 00:01:27.900
<v Speaker 0>bell on YouTube. This helps other people find

00:01:27.900 --> 00:01:28.620
<v Speaker 0>this content

00:01:28.955 --> 00:01:30.955
<v Speaker 0>The YouTube algorithms need a little bit of

00:01:30.955 --> 00:01:32.635
<v Speaker 0>nudge to show people that this is good

00:01:32.635 --> 00:01:33.275
<v Speaker 0>TV.

00:01:34.235 --> 00:01:36.955
<v Speaker 0>And finally, there is a Discord channel where

00:01:36.955 --> 00:01:39.755
<v Speaker 0>you can come and participate in the chat.

00:01:39.915 --> 00:01:42.075
<v Speaker 0>We're also giving away a clustered t shirt

00:01:42.075 --> 00:01:44.700
<v Speaker 0>today. So you've got about one hour to

00:01:44.700 --> 00:01:47.340
<v Speaker 0>join a clustered channel and register or by

00:01:47.420 --> 00:01:49.740
<v Speaker 0>enter the draw by clicking that little emoji

00:01:49.740 --> 00:01:51.260
<v Speaker 0>guy on the post.

00:01:51.900 --> 00:01:52.620
<v Speaker 0>Oh,

00:01:52.780 --> 00:01:55.020
<v Speaker 0>please do that. Now, today

00:01:55.625 --> 00:01:57.625
<v Speaker 0>I am joined by Michael

00:01:58.905 --> 00:02:01.384
<v Speaker 0>from AWS. We're gonna do our best to

00:02:01.384 --> 00:02:02.905
<v Speaker 0>fix these broken clusters.

00:02:03.064 --> 00:02:04.744
<v Speaker 0>Would you like to just give us a

00:02:04.744 --> 00:02:07.384
<v Speaker 0>quick introduction about yourself and then we'll pick

00:02:07.384 --> 00:02:07.865
<v Speaker 0>up from there?

00:02:08.990 --> 00:02:10.030
<v Speaker 1>Absolutely.

00:02:10.030 --> 00:02:11.470
<v Speaker 1>Thank you so much for having me on

00:02:11.470 --> 00:02:14.270
<v Speaker 1>the show, Dave. That's really a big honor.

00:02:14.830 --> 00:02:15.390
<v Speaker 1>And,

00:02:15.950 --> 00:02:18.670
<v Speaker 1>yeah, I'm excited. I don't know quite

00:02:18.830 --> 00:02:22.224
<v Speaker 1>what to expect. I watched the previous installment,

00:02:22.224 --> 00:02:25.185
<v Speaker 1>so I have some idea. But I also

00:02:25.185 --> 00:02:27.584
<v Speaker 1>saw the messages on Twitter, and I was

00:02:27.584 --> 00:02:30.305
<v Speaker 1>like, oh, I'm really scared. So yeah.

00:02:31.504 --> 00:02:32.225
<v Speaker 1>Now

00:02:32.784 --> 00:02:35.105
<v Speaker 1>I'm I'm just excited. Let's let's get into

00:02:35.105 --> 00:02:37.390
<v Speaker 1>that. Yeah. Yeah. It's one of those things

00:02:37.390 --> 00:02:39.630
<v Speaker 0>that, you know, there there's I I don't

00:02:39.630 --> 00:02:40.910
<v Speaker 0>wanna say infinite number of ways to break

00:02:40.910 --> 00:02:42.430
<v Speaker 0>a clusters, but there there's a lot of

00:02:42.430 --> 00:02:44.430
<v Speaker 0>ways that someone can break these clusters. And

00:02:44.430 --> 00:02:46.350
<v Speaker 0>I think we've seen a very good variety

00:02:46.350 --> 00:02:48.430
<v Speaker 0>so far, and I think there's there's so

00:02:48.430 --> 00:02:50.270
<v Speaker 0>much more that we can be put up

00:02:50.270 --> 00:02:50.590
<v Speaker 0>against.

00:02:51.125 --> 00:02:53.685
<v Speaker 0>But I'm glad you're here because

00:02:53.844 --> 00:02:56.965
<v Speaker 0>you have a wealth of Kubernetes experience there

00:02:56.965 --> 00:02:58.885
<v Speaker 0>that I'm hoping we can tap into

00:02:59.284 --> 00:03:00.724
<v Speaker 0>and share some of that knowledge with the

00:03:00.724 --> 00:03:02.485
<v Speaker 0>people that are viewing and joining

00:03:03.045 --> 00:03:03.685
<v Speaker 0>in for them Alright.

00:03:06.260 --> 00:03:07.140
<v Speaker 1>Cool. So

00:03:07.700 --> 00:03:08.260
<v Speaker 0>let's

00:03:08.900 --> 00:03:10.260
<v Speaker 0>Let me share my screen.

00:03:11.060 --> 00:03:12.980
<v Speaker 0>So one of the things we want these

00:03:12.980 --> 00:03:15.620
<v Speaker 0>episodes not just to be entertaining, but to

00:03:15.620 --> 00:03:18.099
<v Speaker 0>also help other people. So there is a

00:03:18.099 --> 00:03:20.019
<v Speaker 0>clustered repository on gitlab.com.

00:03:20.845 --> 00:03:22.285
<v Speaker 0>We add

00:03:22.445 --> 00:03:25.405
<v Speaker 0>little reports that show kinda what went wrong.

00:03:25.965 --> 00:03:27.565
<v Speaker 0>You feel free to read through these.

00:03:28.445 --> 00:03:30.205
<v Speaker 0>Sometimes there's a lot of detail here that

00:03:30.205 --> 00:03:32.365
<v Speaker 0>really show what was done to the cluster,

00:03:32.365 --> 00:03:33.725
<v Speaker 0>the best way to fix it. So hopefully

00:03:33.725 --> 00:03:35.805
<v Speaker 0>this is the viable resource moving forward as

00:03:35.805 --> 00:03:35.965
<v Speaker 0>well.

00:03:37.570 --> 00:03:40.050
<v Speaker 0>But of course there are no readmes, there

00:03:40.050 --> 00:03:41.650
<v Speaker 0>are no post mortems for the two clusters

00:03:41.650 --> 00:03:42.930
<v Speaker 0>that we're working with today.

00:03:43.570 --> 00:03:46.850
<v Speaker 0>So our first cluster is cluster three.

00:03:46.850 --> 00:03:47.330
<v Speaker 0>This

00:03:47.890 --> 00:03:49.570
<v Speaker 0>is by Justin Garrison,

00:03:50.050 --> 00:03:50.530
<v Speaker 0>who has,

00:03:52.065 --> 00:03:53.584
<v Speaker 0>I don't know if kindly broken it is

00:03:53.584 --> 00:03:55.345
<v Speaker 0>the right word, but has

00:03:55.345 --> 00:03:57.584
<v Speaker 0>dedicated some of their time to break those

00:03:57.584 --> 00:03:59.025
<v Speaker 0>words and we're gonna do our best to

00:03:59.025 --> 00:04:00.864
<v Speaker 0>fix it. The way that we're gonna do

00:04:00.864 --> 00:04:03.905
<v Speaker 0>that is by hopefully lots of communication

00:04:04.065 --> 00:04:06.224
<v Speaker 0>and one of my favorite projects, Teleport.

00:04:06.580 --> 00:04:09.220
<v Speaker 0>We both have access to Teleport here,

00:04:09.540 --> 00:04:13.060
<v Speaker 0>meaning we can and hopefully can click connect,

00:04:13.860 --> 00:04:15.780
<v Speaker 0>join us route, have an SSH session that

00:04:15.780 --> 00:04:18.260
<v Speaker 0>we share and verbalize as much of our

00:04:18.260 --> 00:04:19.139
<v Speaker 0>thoughts as possible.

00:04:20.495 --> 00:04:22.655
<v Speaker 0>So normally the first thing I would do

00:04:22.655 --> 00:04:23.295
<v Speaker 0>is

00:04:23.855 --> 00:04:25.695
<v Speaker 0>jump into this directory here. This is the

00:04:25.695 --> 00:04:27.535
<v Speaker 0>tooling that I use to prepare all of

00:04:27.535 --> 00:04:30.575
<v Speaker 0>the clusters. And there's a kubect config here.

00:04:30.975 --> 00:04:32.095
<v Speaker 0>And I always like to run a get

00:04:32.095 --> 00:04:33.615
<v Speaker 0>nodes and see what happens. Should we try

00:04:33.615 --> 00:04:34.015
<v Speaker 0>that first?

00:04:35.270 --> 00:04:35.990
<v Speaker 0>Sure.

00:04:36.870 --> 00:04:38.070
<v Speaker 0>Is that is that the first thing you

00:04:38.070 --> 00:04:39.670
<v Speaker 0>would do? Have you got any special tricks,

00:04:39.670 --> 00:04:40.950
<v Speaker 0>any commands you'd prefer?

00:04:42.630 --> 00:04:43.830
<v Speaker 1>I usually,

00:04:44.150 --> 00:04:46.790
<v Speaker 1>as a first step, look at version. So,

00:04:46.790 --> 00:04:48.150
<v Speaker 1>you know, just version.

00:04:49.095 --> 00:04:50.775
<v Speaker 1>Just to have an idea, you know, am

00:04:50.775 --> 00:04:52.135
<v Speaker 1>I on a 1.15

00:04:52.135 --> 00:04:55.575
<v Speaker 1>cluster or 1.2 or whatever. So okay. That's

00:04:56.295 --> 00:04:57.255
<v Speaker 1>something.

00:04:59.815 --> 00:05:01.575
<v Speaker 0>Well, at least we have our first problem.

00:05:02.960 --> 00:05:05.040
<v Speaker 1>That's very nice. Yes. Yes.

00:05:05.600 --> 00:05:06.400
<v Speaker 1>Cool.

00:05:07.440 --> 00:05:08.240
<v Speaker 1>I

00:05:08.240 --> 00:05:11.440
<v Speaker 1>also usually look around in terms of,

00:05:12.000 --> 00:05:12.640
<v Speaker 1>you know,

00:05:13.040 --> 00:05:15.360
<v Speaker 1>CRDs and and stuff like that.

00:05:15.920 --> 00:05:18.025
<v Speaker 1>But, you know, keep cutting that notes is

00:05:18.025 --> 00:05:20.824
<v Speaker 1>also a good good way to see coming

00:05:20.824 --> 00:05:22.025
<v Speaker 1>from the infrastructure

00:05:22.425 --> 00:05:24.585
<v Speaker 1>perspective. Well, that's that's not gonna work then,

00:05:24.585 --> 00:05:26.345
<v Speaker 0>is that? Don't think based on the certificate

00:05:26.345 --> 00:05:27.385
<v Speaker 0>error. Yeah. Probably

00:05:27.625 --> 00:05:28.025
<v Speaker 1>not.

00:05:28.849 --> 00:05:31.410
<v Speaker 0>So it looks like our certificate has expired.

00:05:31.410 --> 00:05:33.810
<v Speaker 0>We cannot speak to the API server.

00:05:34.210 --> 00:05:34.690
<v Speaker 0>As

00:05:35.729 --> 00:05:37.569
<v Speaker 0>pair, we're gonna have to just get onto

00:05:37.569 --> 00:05:39.569
<v Speaker 0>the box. So let's get this teleport session

00:05:39.569 --> 00:05:41.169
<v Speaker 0>available.

00:05:41.169 --> 00:05:41.490
<v Speaker 0>Alright.

00:05:42.645 --> 00:05:44.485
<v Speaker 0>Let me zoom in on this a little

00:05:44.485 --> 00:05:45.125
<v Speaker 0>bit.

00:05:47.445 --> 00:05:48.085
<v Speaker 0>Now,

00:05:49.125 --> 00:05:50.325
<v Speaker 0>you wanna just

00:05:50.565 --> 00:05:52.405
<v Speaker 0>type something. Let's make sure we've got a

00:05:52.405 --> 00:05:53.685
<v Speaker 0>a working pairing setup.

00:05:54.850 --> 00:05:55.570
<v Speaker 1>Okay.

00:05:59.490 --> 00:06:00.850
<v Speaker 0>Did you click connect or did you go

00:06:00.850 --> 00:06:01.890
<v Speaker 0>to join session?

00:06:03.010 --> 00:06:06.210
<v Speaker 1>I am on o o three. I am

00:06:06.210 --> 00:06:07.170
<v Speaker 1>on that session.

00:06:09.185 --> 00:06:10.225
<v Speaker 1>In there.

00:06:10.465 --> 00:06:12.865
<v Speaker 1>Maybe I need to reconnect.

00:06:12.944 --> 00:06:15.104
<v Speaker 0>I know you've got a different session. I'll

00:06:15.104 --> 00:06:17.585
<v Speaker 0>join yours. Okay. Let me It's okay. Okay.

00:06:19.185 --> 00:06:20.145
<v Speaker 0>Let me close this Yeah.

00:06:21.310 --> 00:06:22.190
<v Speaker 0>We're

00:06:22.190 --> 00:06:23.710
<v Speaker 0>now here, echo.

00:06:24.590 --> 00:06:26.270
<v Speaker 0>Well Yep. I don't need to actually fix

00:06:26.270 --> 00:06:27.470
<v Speaker 0>that and type it, but

00:06:28.350 --> 00:06:29.950
<v Speaker 0>alright. Well,

00:06:30.830 --> 00:06:31.950
<v Speaker 0>what do you wanna do first?

00:06:35.014 --> 00:06:38.215
<v Speaker 1>So all that we know so far is

00:06:38.535 --> 00:06:39.175
<v Speaker 1>that

00:06:39.495 --> 00:06:42.295
<v Speaker 1>we can't talk to the control plane. Right?

00:06:43.014 --> 00:06:43.655
<v Speaker 1>And

00:06:44.535 --> 00:06:48.455
<v Speaker 1>what we've done now, we have SSH into

00:06:48.610 --> 00:06:51.650
<v Speaker 1>one of the nodes where control plane components

00:06:51.650 --> 00:06:52.210
<v Speaker 1>are

00:06:52.690 --> 00:06:54.370
<v Speaker 1>located. Right? That's what we

00:06:54.770 --> 00:06:56.370
<v Speaker 1>that's what we did with

00:06:56.370 --> 00:06:57.250
<v Speaker 1>with the

00:06:58.210 --> 00:06:59.410
<v Speaker 1>the SSH.

00:07:00.450 --> 00:07:02.610
<v Speaker 0>I just seen a comment from Justin's and

00:07:02.610 --> 00:07:04.465
<v Speaker 0>he was as kind as possible, which is

00:07:04.465 --> 00:07:06.465
<v Speaker 0>not filling me with any confidence

00:07:06.705 --> 00:07:07.425
<v Speaker 0>No.

00:07:07.985 --> 00:07:09.265
<v Speaker 0>Whatsoever. Not

00:07:09.745 --> 00:07:10.065
<v Speaker 0>at So

00:07:12.385 --> 00:07:13.745
<v Speaker 1>we are now

00:07:14.145 --> 00:07:15.745
<v Speaker 1>in that session that we see on the

00:07:15.745 --> 00:07:18.305
<v Speaker 1>screen. We are on a control plane node.

00:07:18.305 --> 00:07:20.280
<v Speaker 1>Right? We are on a control plane node.

00:07:20.280 --> 00:07:21.320
<v Speaker 0>That is correct. So

00:07:21.800 --> 00:07:23.800
<v Speaker 1>why don't we just have a look around

00:07:23.800 --> 00:07:26.680
<v Speaker 1>what is running there? So, you know,

00:07:28.199 --> 00:07:29.080
<v Speaker 1>PS

00:07:29.080 --> 00:07:32.440
<v Speaker 1>and then looking for control plane components

00:07:32.440 --> 00:07:33.880
<v Speaker 1>like, you know, the Yeah.

00:07:35.415 --> 00:07:37.335
<v Speaker 0>I normally look for the first.

00:07:37.495 --> 00:07:40.455
<v Speaker 0>Yeah. Yeah. That's that's a pretty pretty so

00:07:40.455 --> 00:07:41.175
<v Speaker 1>it's there.

00:07:42.295 --> 00:07:43.895
<v Speaker 0>It is there. Yeah. We we do have

00:07:43.895 --> 00:07:45.255
<v Speaker 0>an API server. Yes.

00:07:45.575 --> 00:07:46.055
<v Speaker 1>Yes. Yes.

00:07:47.735 --> 00:07:48.455
<v Speaker 1>We see

00:07:49.360 --> 00:07:51.440
<v Speaker 1>what we would expect there. Right?

00:07:51.680 --> 00:07:52.480
<v Speaker 1>All

00:07:53.200 --> 00:07:54.560
<v Speaker 1>all the things.

00:07:56.160 --> 00:07:58.480
<v Speaker 0>I love how calm you are.

00:07:58.960 --> 00:08:00.640
<v Speaker 0>I'd say in my head, I am screaming

00:08:00.640 --> 00:08:03.200
<v Speaker 0>already and you're just so collected.

00:08:04.175 --> 00:08:07.135
<v Speaker 1>I'm no. The thing is I'm looking at

00:08:07.135 --> 00:08:10.175
<v Speaker 1>the tiny screen on our internal one rather

00:08:10.175 --> 00:08:13.455
<v Speaker 1>than on the big one. So if that

00:08:13.455 --> 00:08:14.095
<v Speaker 1>if that

00:08:15.295 --> 00:08:17.775
<v Speaker 1>if I increase the font size, then you

00:08:17.775 --> 00:08:18.495
<v Speaker 1>also

00:08:19.070 --> 00:08:20.830
<v Speaker 1>you will literally have the same right here.

00:08:20.830 --> 00:08:23.310
<v Speaker 1>So I shouldn't be doing that. Sorry. Okay.

00:08:23.710 --> 00:08:24.510
<v Speaker 1>Cool.

00:08:24.590 --> 00:08:26.190
<v Speaker 1>So what do we see here?

00:08:34.644 --> 00:08:35.365
<v Speaker 1>Okay.

00:08:35.605 --> 00:08:38.565
<v Speaker 1>Anything that stands out for you? Well,

00:08:39.764 --> 00:08:41.204
<v Speaker 0>we we did see

00:08:42.245 --> 00:08:44.245
<v Speaker 0>that the start had expired.

00:08:44.964 --> 00:08:46.805
<v Speaker 0>Justin's jumped in just to say that because

00:08:46.805 --> 00:08:47.685
<v Speaker 0>we're using teleport,

00:08:48.560 --> 00:08:51.199
<v Speaker 0>there is no MOTD. That is correct. So,

00:08:51.199 --> 00:08:53.279
<v Speaker 0>let's let's run MOTD. Okay.

00:08:54.079 --> 00:08:55.519
<v Speaker 0>Oh, why is my thing being a bit

00:08:55.519 --> 00:08:56.160
<v Speaker 0>weird?

00:08:57.279 --> 00:08:58.640
<v Speaker 0>Well, that's not a command.

00:09:00.000 --> 00:09:01.440
<v Speaker 1>So we need to

00:09:01.755 --> 00:09:03.995
<v Speaker 0>I'm just gonna reload this. My session's been

00:09:03.995 --> 00:09:04.875
<v Speaker 0>a bit funny.

00:09:05.515 --> 00:09:06.395
<v Speaker 0>There we go.

00:09:06.715 --> 00:09:08.555
<v Speaker 0>There should be an MOTD file. Right? Yeah.

00:09:08.555 --> 00:09:09.355
<v Speaker 0>There we go.

00:09:09.755 --> 00:09:09.995
<v Speaker 0>Help.

00:09:17.180 --> 00:09:17.820
<v Speaker 0>So,

00:09:18.540 --> 00:09:19.900
<v Speaker 0>I can't get the cluster to work. I

00:09:19.900 --> 00:09:21.020
<v Speaker 0>have tried running

00:09:22.060 --> 00:09:23.340
<v Speaker 0>trying to deploy

00:09:24.060 --> 00:09:26.060
<v Speaker 0>some Kubernetes example.

00:09:26.220 --> 00:09:28.540
<v Speaker 1>Right. And then exposing it. And then there's

00:09:28.540 --> 00:09:30.540
<v Speaker 0>another problem. Can't resolve DNS.

00:09:34.345 --> 00:09:34.985
<v Speaker 1>Right.

00:09:36.585 --> 00:09:39.385
<v Speaker 1>But given that we have not yet

00:09:40.745 --> 00:09:42.345
<v Speaker 1>access to the

00:09:42.585 --> 00:09:43.945
<v Speaker 1>API server,

00:09:44.024 --> 00:09:46.024
<v Speaker 1>there is really no point. Right? I mean,

00:09:46.024 --> 00:09:46.425
<v Speaker 1>that's

00:09:46.949 --> 00:09:49.350
<v Speaker 1>that's once we have fixed the access to

00:09:49.350 --> 00:09:51.430
<v Speaker 1>the API server. Yeah. I think we're gonna

00:09:51.430 --> 00:09:53.910
<v Speaker 0>have to take a look at these SERPs

00:09:54.230 --> 00:09:55.589
<v Speaker 0>and see if we can see what the

00:09:55.589 --> 00:09:57.269
<v Speaker 0>expiration time on them is

00:09:57.990 --> 00:09:59.430
<v Speaker 0>and then let me just move that up.

00:09:59.430 --> 00:10:01.029
<v Speaker 0>I can see that it's kinda clapping on

00:10:01.029 --> 00:10:01.589
<v Speaker 0>the stream.

00:10:02.365 --> 00:10:04.125
<v Speaker 0>Do you wanna try it then? We'll go

00:10:04.125 --> 00:10:05.485
<v Speaker 0>take a look at these search. Go

00:10:06.125 --> 00:10:08.765
<v Speaker 1>ahead. That's fine. I'm I'm trying to

00:10:09.165 --> 00:10:12.845
<v Speaker 1>assess how evil how evil Justin might

00:10:13.645 --> 00:10:14.525
<v Speaker 1>be. What

00:10:17.040 --> 00:10:20.640
<v Speaker 1>what beyond the obvious could be there? Yeah.

00:10:21.040 --> 00:10:24.160
<v Speaker 0>So we have this inside, etcetera, Kubernetes. We

00:10:24.160 --> 00:10:25.680
<v Speaker 0>have the PKI folder. This is where I

00:10:25.680 --> 00:10:27.600
<v Speaker 0>would expect to find all of the servers.

00:10:28.320 --> 00:10:28.560
<v Speaker 0>Now,

00:10:30.365 --> 00:10:32.444
<v Speaker 0>the API server is probably the one we

00:10:32.444 --> 00:10:34.125
<v Speaker 0>wanna kind of inspect. I

00:10:34.365 --> 00:10:35.964
<v Speaker 0>can never ever

00:10:36.204 --> 00:10:39.404
<v Speaker 0>ever remember the open SSL commands to query

00:10:39.404 --> 00:10:40.764
<v Speaker 0>that. Do you know it or should I

00:10:40.764 --> 00:10:42.285
<v Speaker 0>pop open a quick to go? I know.

00:10:42.699 --> 00:10:44.940
<v Speaker 1>Yes. We we have to look at that.

00:10:44.940 --> 00:10:45.420
<v Speaker 0>Know.

00:10:49.740 --> 00:10:51.740
<v Speaker 1>It's either in my history it's either in

00:10:51.740 --> 00:10:53.660
<v Speaker 1>my history or I have some

00:10:54.060 --> 00:10:56.540
<v Speaker 1>some cheat sheet somewhere. I don't remember

00:10:57.019 --> 00:10:57.579
<v Speaker 1>these things.

00:10:58.214 --> 00:11:00.695
<v Speaker 0>Oh, what? Paste

00:11:00.695 --> 00:11:02.454
<v Speaker 0>is a bit funny. Let's try one more

00:11:02.454 --> 00:11:03.975
<v Speaker 0>time and I'll save it manually.

00:11:05.334 --> 00:11:07.735
<v Speaker 0>Yeah. That's not working. Okay. So it's open

00:11:07.735 --> 00:11:09.495
<v Speaker 0>SSL x five zero nine.

00:11:10.390 --> 00:11:11.910
<v Speaker 0>Oh, no. It's testing. It's just the file

00:11:11.910 --> 00:11:13.670
<v Speaker 0>doesn't exist. I'm just being really

00:11:14.150 --> 00:11:16.230
<v Speaker 0>silly. Alright. Now we wanna take a look

00:11:16.230 --> 00:11:19.110
<v Speaker 0>at the API server key,

00:11:19.750 --> 00:11:20.310
<v Speaker 0>I believe.

00:11:25.125 --> 00:11:27.525
<v Speaker 0>Nope. That is not our trusted certificate.

00:11:27.765 --> 00:11:29.125
<v Speaker 0>Let's try this there.

00:11:31.045 --> 00:11:32.565
<v Speaker 0>Alright. There we go.

00:11:34.165 --> 00:11:35.765
<v Speaker 0>Our certificate expired. Oh,

00:11:36.165 --> 00:11:38.320
<v Speaker 0>he's tamed it well. He's had expire right

00:11:38.320 --> 00:11:39.040
<v Speaker 1>before. Yeah.

00:11:39.520 --> 00:11:40.240
<v Speaker 1>Nice.

00:11:40.960 --> 00:11:42.960
<v Speaker 1>Nice. Nicely done. Thank you.

00:11:43.840 --> 00:11:46.960
<v Speaker 0>So, we're gonna have to renew this certificate.

00:11:50.880 --> 00:11:51.200
<v Speaker 1>Nice.

00:11:53.495 --> 00:11:54.775
<v Speaker 0>How do we do that?

00:11:57.735 --> 00:11:59.095
<v Speaker 0>Open SSL.

00:11:59.255 --> 00:12:00.455
<v Speaker 0>I wish it was just is there a

00:12:00.455 --> 00:12:02.615
<v Speaker 0>cheat sheet? That's what we need.

00:12:03.975 --> 00:12:04.615
<v Speaker 0>There we go.

00:12:08.160 --> 00:12:10.320
<v Speaker 0>I always like when I kinda came up

00:12:10.320 --> 00:12:12.320
<v Speaker 0>with the idea for this show, I always

00:12:12.320 --> 00:12:13.920
<v Speaker 0>said to anyone that I mentioned it to,

00:12:13.920 --> 00:12:15.920
<v Speaker 0>I really hope people don't mess with the

00:12:15.920 --> 00:12:17.840
<v Speaker 0>certificates. It's like the one

00:12:18.080 --> 00:12:20.800
<v Speaker 0>thing. It's I mean, nobody ever remembers this

00:12:21.135 --> 00:12:23.615
<v Speaker 1>What what people really heard was messing with

00:12:23.615 --> 00:12:26.495
<v Speaker 1>the certificate. Gotcha. I I have you covered.

00:12:26.495 --> 00:12:28.335
<v Speaker 1>I'm gonna mess with the certificate.

00:12:30.415 --> 00:12:32.975
<v Speaker 0>So we don't wanna generate any key. We

00:12:32.975 --> 00:12:34.095
<v Speaker 0>just wanna It's it's

00:12:34.720 --> 00:12:36.320
<v Speaker 1>it's not it's not super

00:12:36.480 --> 00:12:38.800
<v Speaker 1>unlikely. Right? These things happen. Right? I mean,

00:12:38.800 --> 00:12:40.080
<v Speaker 1>it's it's not

00:12:40.960 --> 00:12:41.760
<v Speaker 1>totally,

00:12:42.240 --> 00:12:43.040
<v Speaker 1>you know,

00:12:43.440 --> 00:12:44.400
<v Speaker 1>made up. So

00:12:53.595 --> 00:12:56.075
<v Speaker 0>So we're getting lots of, I mean, the

00:12:56.075 --> 00:12:57.995
<v Speaker 0>chat's hard to keep up with,

00:12:58.235 --> 00:12:59.915
<v Speaker 0>but Justin has dropped us. We hadn't, maybe

00:12:59.915 --> 00:13:01.514
<v Speaker 0>I don't need to renew this after all,

00:13:01.514 --> 00:13:04.235
<v Speaker 0>because he just left us one liner and

00:13:10.190 --> 00:13:10.750
<v Speaker 0>yeah.

00:13:11.390 --> 00:13:13.310
<v Speaker 0>Oh, he did. Very kind of him.

00:13:17.735 --> 00:13:20.535
<v Speaker 1>So That's a good question. Are they expired

00:13:20.535 --> 00:13:22.775
<v Speaker 1>on all control plane nodes?

00:13:23.095 --> 00:13:23.975
<v Speaker 0>Yeah.

00:13:23.975 --> 00:13:25.255
<v Speaker 0>That came in from

00:13:26.695 --> 00:13:28.535
<v Speaker 0>Duffy. Yeah. We should probably have to check

00:13:28.535 --> 00:13:30.215
<v Speaker 0>that as well. So

00:13:30.615 --> 00:13:31.415
<v Speaker 0>I think

00:13:32.100 --> 00:13:33.940
<v Speaker 0>I think Justin has been very kind to

00:13:33.940 --> 00:13:36.980
<v Speaker 0>us. There is this .APIserver.CRT.

00:13:37.540 --> 00:13:39.459
<v Speaker 0>I mean, I could just blatantly copy that

00:13:39.459 --> 00:13:41.380
<v Speaker 0>over the top and hope,

00:13:42.339 --> 00:13:43.860
<v Speaker 0>but you know, we do have that open

00:13:43.860 --> 00:13:46.819
<v Speaker 0>SSL command that we check the expiration date.

00:13:46.980 --> 00:13:49.145
<v Speaker 1>Why not? Yeah. Why don't don't we check

00:13:49.145 --> 00:13:50.025
<v Speaker 1>that first?

00:13:50.905 --> 00:13:52.665
<v Speaker 0>Open SSL and

00:13:53.705 --> 00:13:56.265
<v Speaker 0>run it against the the stock version and

00:13:56.265 --> 00:13:57.865
<v Speaker 0>see if that's a better date.

00:13:58.905 --> 00:14:00.505
<v Speaker 0>You're far too kind. Okay.

00:14:02.850 --> 00:14:04.930
<v Speaker 1>I was just, you know, reading from the

00:14:04.930 --> 00:14:07.250
<v Speaker 1>left, like, February 18, like, you and then,

00:14:07.250 --> 00:14:09.329
<v Speaker 1>oh, '22. Okay. We're good.

00:14:09.810 --> 00:14:11.569
<v Speaker 0>Alright. So we could just Thank you very

00:14:11.569 --> 00:14:12.930
<v Speaker 1>much. Yeah. That that

00:14:13.569 --> 00:14:15.170
<v Speaker 0>I'm glad I didn't have to try and

00:14:15.170 --> 00:14:16.050
<v Speaker 0>remember those comments.

00:14:21.665 --> 00:14:23.904
<v Speaker 0>So now that we have replaced, we had

00:14:23.904 --> 00:14:26.305
<v Speaker 0>a broken cert. We have replaced it. We

00:14:26.305 --> 00:14:28.705
<v Speaker 0>just have to restart the API server.

00:14:29.105 --> 00:14:30.065
<v Speaker 0>Is that all I have to do?

00:14:33.560 --> 00:14:35.800
<v Speaker 1>I'm trying to catch up with the Yes.

00:14:35.800 --> 00:14:37.480
<v Speaker 1>Yes. So we can just Well,

00:14:38.440 --> 00:14:40.520
<v Speaker 0>don't know. Maybe the kubelet's already restarted up

00:14:40.520 --> 00:14:42.040
<v Speaker 0>in the search change. I'm not sure. So

00:14:42.040 --> 00:14:44.440
<v Speaker 0>we can always just restart the kubelet.

00:14:46.855 --> 00:14:48.295
<v Speaker 0>Oh, there's a key too.

00:14:48.855 --> 00:14:49.975
<v Speaker 0>Thanks Justin.

00:14:50.855 --> 00:14:52.775
<v Speaker 0>We need to move apiserver.

00:14:52.775 --> 00:14:54.375
<v Speaker 0>Key to apiserver.

00:14:54.375 --> 00:14:55.015
<v Speaker 0>Key.

00:14:58.459 --> 00:15:00.459
<v Speaker 0>Alright. Let's restart the cubelet and hope for

00:15:00.459 --> 00:15:01.180
<v Speaker 0>the best.

00:15:08.620 --> 00:15:10.940
<v Speaker 0>Yes. He was very kind, but that just

00:15:10.940 --> 00:15:12.459
<v Speaker 0>means that the main problem he wants us

00:15:12.459 --> 00:15:14.355
<v Speaker 0>to fix isn't the steps. We

00:15:14.595 --> 00:15:15.395
<v Speaker 1>still got two

00:15:15.955 --> 00:15:16.835
<v Speaker 0>more things. Exactly.

00:15:17.635 --> 00:15:19.475
<v Speaker 0>All right. Now we're on a control plane

00:15:19.475 --> 00:15:21.635
<v Speaker 0>node. That means we have access to

00:15:22.995 --> 00:15:25.875
<v Speaker 0>kubernetes/ecc/kubernetesadmin.com.

00:15:26.360 --> 00:15:28.759
<v Speaker 0>Ever API server is working, I would expect

00:15:28.759 --> 00:15:29.959
<v Speaker 0>this to be able to run get nodes

00:15:29.959 --> 00:15:30.600
<v Speaker 0>now.

00:15:32.519 --> 00:15:35.720
<v Speaker 0>Computer still says no data API server restart.

00:15:35.720 --> 00:15:36.920
<v Speaker 0>Let's just check.

00:15:42.605 --> 00:15:45.245
<v Speaker 0>No. That hasn't restarted, has it? March start.

00:15:45.245 --> 00:15:45.805
<v Speaker 0>Okay.

00:15:47.165 --> 00:15:49.085
<v Speaker 0>My favorite command, till nine.

00:15:52.925 --> 00:15:55.245
<v Speaker 1>Sure. Why why don't you do the sledgehammer?

00:15:55.245 --> 00:15:57.470
<v Speaker 1>That that always helps. I could've said, I

00:15:57.470 --> 00:15:59.790
<v Speaker 0>think, guess, but, you know, like

00:16:00.750 --> 00:16:02.990
<v Speaker 0>so the capability should detect that missing is

00:16:02.990 --> 00:16:05.870
<v Speaker 0>a static manifest. It should be restarted automatically.

00:16:07.550 --> 00:16:09.950
<v Speaker 0>I'm just trying to rewatch on this n

00:16:09.950 --> 00:16:10.270
<v Speaker 0>one.

00:16:11.925 --> 00:16:13.765
<v Speaker 0>And hopefully that goes back up.

00:16:14.084 --> 00:16:16.005
<v Speaker 0>I've never killed minus nine to API server

00:16:16.005 --> 00:16:17.605
<v Speaker 0>before, so I'm hoping there was no other

00:16:18.565 --> 00:16:20.084
<v Speaker 0>I hope that wasn't too harsh.

00:16:25.490 --> 00:16:27.250
<v Speaker 0>We also got a

00:16:27.810 --> 00:16:28.450
<v Speaker 0>comment.

00:16:28.610 --> 00:16:29.090
<v Speaker 0>So

00:16:29.490 --> 00:16:32.290
<v Speaker 0>yeah, QPDM and it faces search API server

00:16:32.290 --> 00:16:34.610
<v Speaker 0>would have, I believe, we proficient or regenerated

00:16:34.610 --> 00:16:35.410
<v Speaker 0>the search.

00:16:36.735 --> 00:16:38.335
<v Speaker 0>I believe if we had done that, we'd

00:16:38.335 --> 00:16:39.615
<v Speaker 0>probably have to do it across all the

00:16:39.615 --> 00:16:41.855
<v Speaker 0>nodes. I'm assuming we maybe won't have to

00:16:41.855 --> 00:16:43.375
<v Speaker 0>do that by using the ones that were

00:16:43.375 --> 00:16:43.855
<v Speaker 0>preferred.

00:16:48.750 --> 00:16:49.390
<v Speaker 0>Thanks.

00:16:50.270 --> 00:16:52.830
<v Speaker 0>My accent is kind of Scottish

00:16:53.550 --> 00:16:54.670
<v Speaker 0>and kind of not.

00:16:56.910 --> 00:16:57.790
<v Speaker 0>That

00:16:57.790 --> 00:16:59.870
<v Speaker 0>kind of worried me there. Where's my API

00:16:59.870 --> 00:17:00.750
<v Speaker 0>server, Mako?

00:17:04.285 --> 00:17:05.565
<v Speaker 0>It didn't come back.

00:17:08.925 --> 00:17:09.644
<v Speaker 1>Right.

00:17:09.964 --> 00:17:10.765
<v Speaker 0>Okay. So

00:17:11.405 --> 00:17:13.885
<v Speaker 1>Oh, the the hint there also mentioned it.

00:17:13.885 --> 00:17:15.244
<v Speaker 1>Right? You need to move

00:17:16.230 --> 00:17:17.830
<v Speaker 1>the manifest QAPI

00:17:17.830 --> 00:17:18.869
<v Speaker 1>server out

00:17:19.670 --> 00:17:21.910
<v Speaker 1>and then in again and then put it

00:17:21.910 --> 00:17:22.789
<v Speaker 1>back again. But

00:17:25.349 --> 00:17:26.550
<v Speaker 1>we restarted the Qplet.

00:17:28.875 --> 00:17:30.795
<v Speaker 1>But apparently, the the static pod is not

00:17:30.795 --> 00:17:31.995
<v Speaker 1>picked up if if

00:17:32.795 --> 00:17:35.195
<v Speaker 1>if it's not moved out in again. So

00:17:35.195 --> 00:17:37.355
<v Speaker 1>if you go to Oh, yeah. The comments

00:17:37.355 --> 00:17:39.915
<v Speaker 0>seem pretty everybody is yelling that. So

00:17:41.330 --> 00:17:43.090
<v Speaker 0>I will I will just do as I'm

00:17:43.090 --> 00:17:43.650
<v Speaker 0>told.

00:17:44.050 --> 00:17:46.370
<v Speaker 0>Okay. So I think that's interesting then. I

00:17:46.370 --> 00:17:47.970
<v Speaker 0>I would have I assumed

00:17:48.050 --> 00:17:50.210
<v Speaker 1>restarting the kuplet would have checked to make

00:17:50.210 --> 00:17:52.130
<v Speaker 0>sure that all the static manifests were running

00:17:52.130 --> 00:17:54.050
<v Speaker 0>and it would appear that that's not the

00:17:54.050 --> 00:17:56.375
<v Speaker 0>case. So that was just a silly assumption

00:17:56.375 --> 00:17:57.495
<v Speaker 0>on my part.

00:17:57.895 --> 00:17:58.455
<v Speaker 0>So

00:17:58.934 --> 00:18:01.735
<v Speaker 1>it's a valuable it's a valuable insight. Right?

00:18:02.375 --> 00:18:03.894
<v Speaker 0>Yeah. Yeah. Definitely.

00:18:04.855 --> 00:18:06.934
<v Speaker 0>So, I've moved it back in and now

00:18:06.934 --> 00:18:09.419
<v Speaker 0>we do the wait. I'm not very good

00:18:09.419 --> 00:18:10.539
<v Speaker 0>at the waiting stage.

00:18:18.059 --> 00:18:20.299
<v Speaker 1>Justin says, is the cubelet running?

00:18:22.059 --> 00:18:24.059
<v Speaker 1>Oh, didn't touch it, but we can check.

00:18:25.755 --> 00:18:28.075
<v Speaker 0>We do have a cubelet. Yes.

00:18:28.555 --> 00:18:30.635
<v Speaker 0>It was restarted a few moments ago, which

00:18:30.635 --> 00:18:32.155
<v Speaker 0>is what we expect. Okay.

00:18:35.355 --> 00:18:36.875
<v Speaker 0>I mean, I definitely could

00:18:37.799 --> 00:18:39.479
<v Speaker 1>Should we check the API server?

00:18:39.799 --> 00:18:40.679
<v Speaker 0>Adrian's

00:18:40.679 --> 00:18:42.600
<v Speaker 0>just went, I've broken it more. Yeah. I

00:18:42.600 --> 00:18:45.240
<v Speaker 0>mean, that's always I was actually more worried

00:18:45.240 --> 00:18:46.679
<v Speaker 0>about copying the key on top of the

00:18:46.679 --> 00:18:47.720
<v Speaker 0>cert or the cert on top of the

00:18:47.720 --> 00:18:49.159
<v Speaker 0>key or messing up something when I was

00:18:49.159 --> 00:18:50.919
<v Speaker 0>restoring the certs, but I think I got

00:18:50.919 --> 00:18:52.039
<v Speaker 0>that okay. So

00:18:52.985 --> 00:18:54.104
<v Speaker 0>I'm not sure

00:18:54.505 --> 00:18:56.664
<v Speaker 0>what the problem is gonna be right now.

00:18:56.664 --> 00:18:59.065
<v Speaker 0>Like one more. Okay, that's definitely not coming

00:18:59.065 --> 00:18:59.624
<v Speaker 0>back.

00:19:01.065 --> 00:19:01.304
<v Speaker 0>So,

00:19:06.480 --> 00:19:08.240
<v Speaker 0>I need to stop watching the comments and

00:19:08.240 --> 00:19:09.840
<v Speaker 0>focus on fixing this. This

00:19:10.480 --> 00:19:12.160
<v Speaker 0>isn't part of the plan. No, it's not

00:19:12.160 --> 00:19:13.760
<v Speaker 0>part of my plan either. Right.

00:19:14.320 --> 00:19:16.240
<v Speaker 0>Let's get this API server back up and

00:19:16.240 --> 00:19:16.560
<v Speaker 0>running.

00:19:20.985 --> 00:19:23.465
<v Speaker 0>A restart of the kubelet should check all

00:19:23.465 --> 00:19:26.264
<v Speaker 0>the static manifests are running. We have even

00:19:26.265 --> 00:19:28.745
<v Speaker 0>removed the manifest. So, let's try one more

00:19:28.745 --> 00:19:30.505
<v Speaker 0>thing before we go into panic, before I

00:19:30.505 --> 00:19:32.664
<v Speaker 0>go into panic mode, sorry. You're pretty cool.

00:19:33.080 --> 00:19:35.960
<v Speaker 0>I'm gonna move this out, restart the Qplet

00:19:35.960 --> 00:19:37.559
<v Speaker 0>and then drop it back in

00:19:37.880 --> 00:19:39.400
<v Speaker 0>just to see if we can kinda take

00:19:39.400 --> 00:19:41.000
<v Speaker 0>things along a little bit here.

00:19:44.680 --> 00:19:47.080
<v Speaker 0>So Just just that this wasn't part of

00:19:47.080 --> 00:19:47.480
<v Speaker 1>the fact.

00:19:50.895 --> 00:19:53.695
<v Speaker 0>Alright. Stay the same. Ian, no worries worries.

00:19:53.695 --> 00:19:55.934
<v Speaker 1>We said forty minutes each. So no matter

00:19:55.934 --> 00:19:58.414
<v Speaker 1>what, after forty minutes, we we switch over.

00:19:58.735 --> 00:20:00.335
<v Speaker 1>And it looks like we're gonna spend the

00:20:00.335 --> 00:20:02.735
<v Speaker 1>first forty minutes in the chat. Have servers

00:20:02.735 --> 00:20:03.215
<v Speaker 1>on it. Something.

00:20:04.200 --> 00:20:06.440
<v Speaker 1>Alright. Where where where are we? We're not

00:20:06.440 --> 00:20:08.280
<v Speaker 0>gonna split this over too because we're very

00:20:08.280 --> 00:20:10.120
<v Speaker 0>lucky and that we have all the tech

00:20:10.120 --> 00:20:12.039
<v Speaker 0>conk and Justin joining us in the comments.

00:20:12.039 --> 00:20:14.600
<v Speaker 0>We will just really leverage any help if

00:20:14.600 --> 00:20:15.720
<v Speaker 0>we start to run out of time. So

00:20:17.065 --> 00:20:18.185
<v Speaker 1>Alright. Kubernetes

00:20:18.185 --> 00:20:20.025
<v Speaker 1>Kubernetes is a team sports. Right? I mean,

00:20:20.025 --> 00:20:22.425
<v Speaker 1>that's that's clearly like I don't wanna go

00:20:22.425 --> 00:20:23.305
<v Speaker 1>walk alone.

00:20:23.945 --> 00:20:25.865
<v Speaker 1>So moving it back I moved it back

00:20:25.865 --> 00:20:27.785
<v Speaker 0>and I'm trying to work out whether I

00:20:27.785 --> 00:20:30.025
<v Speaker 0>want to restart the kubel one more time

00:20:30.025 --> 00:20:32.025
<v Speaker 0>or just kinda see if it's gonna detect

00:20:31.740 --> 00:20:33.260
<v Speaker 0>that. Now we could always pull up the

00:20:33.260 --> 00:20:35.100
<v Speaker 0>logs, right? So let's do In fact, we

00:20:35.100 --> 00:20:36.379
<v Speaker 0>should have done this sooner.

00:20:37.340 --> 00:20:39.419
<v Speaker 0>Let's see what the kubelet is actually

00:20:40.380 --> 00:20:42.220
<v Speaker 0>dropping into our terminal here.

00:20:45.995 --> 00:20:48.235
<v Speaker 0>So it's not finding the node.

00:20:55.435 --> 00:20:57.355
<v Speaker 0>Potentially messing with the certs is a little

00:20:57.355 --> 00:20:58.795
<v Speaker 0>bit more dangerous than we expect.

00:21:01.600 --> 00:21:03.200
<v Speaker 0>Messing with the certs,

00:21:03.200 --> 00:21:04.480
<v Speaker 0>never do that.

00:21:05.600 --> 00:21:08.320
<v Speaker 0>So the kubelet is trying to speak to

00:21:08.320 --> 00:21:11.120
<v Speaker 0>the API server. The API server is not

00:21:11.120 --> 00:21:11.440
<v Speaker 0>there.

00:21:14.294 --> 00:21:16.695
<v Speaker 0>The problem is not the kill nine Adrian,

00:21:16.695 --> 00:21:17.494
<v Speaker 0>come on.

00:21:19.254 --> 00:21:22.294
<v Speaker 0>We've all killed nine a few processes before.

00:21:25.335 --> 00:21:25.815
<v Speaker 0>All right.

00:21:27.350 --> 00:21:30.390
<v Speaker 0>The problem could be that we just need

00:21:30.390 --> 00:21:31.750
<v Speaker 0>to do the search on all of these.

00:21:31.750 --> 00:21:33.190
<v Speaker 0>So I'm gonna quickly jump on to the

00:21:33.190 --> 00:21:35.030
<v Speaker 0>other two control plane nodes.

00:21:35.590 --> 00:21:37.670
<v Speaker 0>Let's just check the search, see if we've

00:21:37.670 --> 00:21:39.430
<v Speaker 0>got the same thing. Let's see if we

00:21:39.430 --> 00:21:41.350
<v Speaker 0>can get something online here. So

00:21:42.445 --> 00:21:44.845
<v Speaker 0>PKI, do we have dot files? We do.

00:21:44.845 --> 00:21:47.645
<v Speaker 0>Okay. So, cert on top of cert

00:21:51.165 --> 00:21:53.245
<v Speaker 0>and key it on top of key

00:21:58.030 --> 00:21:58.910
<v Speaker 0>and

00:21:59.470 --> 00:22:00.910
<v Speaker 0>API server.

00:22:01.710 --> 00:22:02.510
<v Speaker 0>Okay.

00:22:03.070 --> 00:22:04.990
<v Speaker 0>Do we know the number for SIGHUP?

00:22:06.510 --> 00:22:07.950
<v Speaker 0>I'll do this I'll do it a bit

00:22:07.950 --> 00:22:08.750
<v Speaker 0>more gently this time.

00:22:09.525 --> 00:22:11.445
<v Speaker 0>Can I just do stick? I can't remember

00:22:11.445 --> 00:22:13.045
<v Speaker 0>if there's a dash flag for doing that,

00:22:13.045 --> 00:22:13.765
<v Speaker 0>but let's see.

00:22:22.100 --> 00:22:23.140
<v Speaker 0>SIGHUP

00:22:23.700 --> 00:22:24.580
<v Speaker 0>number.

00:22:28.100 --> 00:22:30.900
<v Speaker 0>One. Got it. Okay. Cal one.

00:22:32.580 --> 00:22:35.380
<v Speaker 0>And the process isn't there anymore. So it

00:22:35.380 --> 00:22:37.995
<v Speaker 0>looks like it was restarted this time. Yeah.

00:22:37.995 --> 00:22:39.755
<v Speaker 0>Okay. So control plane

00:22:40.475 --> 00:22:42.475
<v Speaker 0>node two seems to be coming together a

00:22:42.475 --> 00:22:43.275
<v Speaker 0>bit better.

00:22:44.395 --> 00:22:45.755
<v Speaker 0>Let's do this one,

00:22:46.155 --> 00:22:48.635
<v Speaker 0>back into our PKI directory. We've got one

00:22:48.635 --> 00:22:50.955
<v Speaker 0>more dot cert to put over dot cert

00:22:51.450 --> 00:22:54.090
<v Speaker 0>and one more dot key to put over.

00:22:58.330 --> 00:23:01.130
<v Speaker 0>Oh, I copied. I panicked there so much.

00:23:01.130 --> 00:23:02.009
<v Speaker 0>Right, okay.

00:23:03.130 --> 00:23:04.490
<v Speaker 0>I was like, don't do that thing you

00:23:04.490 --> 00:23:05.610
<v Speaker 0>just said you weren't gonna do.

00:23:07.105 --> 00:23:08.544
<v Speaker 0>PS AUX.

00:23:08.544 --> 00:23:10.544
<v Speaker 0>And I'm gonna monitor this one as well

00:23:10.945 --> 00:23:13.264
<v Speaker 0>to see if this is auto restarted. So

00:23:13.264 --> 00:23:16.704
<v Speaker 0>this was started thirty one minutes ago.

00:23:19.264 --> 00:23:23.249
<v Speaker 0>Nope. Okay. Let's do kill one and process.

00:23:24.850 --> 00:23:26.370
<v Speaker 0>Okay. So that should be a sick hop

00:23:26.370 --> 00:23:27.009
<v Speaker 0>here.

00:23:27.490 --> 00:23:29.409
<v Speaker 0>That's been up for three seconds. Okay.

00:23:31.890 --> 00:23:34.130
<v Speaker 0>Now let's come back onto this one. This

00:23:34.130 --> 00:23:35.490
<v Speaker 0>is the one where nothing worked.

00:23:39.085 --> 00:23:39.804
<v Speaker 0>Correct.

00:23:40.205 --> 00:23:41.245
<v Speaker 0>And still

00:23:41.485 --> 00:23:42.284
<v Speaker 0>nothing.

00:23:43.005 --> 00:23:44.845
<v Speaker 0>Alright. We can ignore that one tonight. Do

00:23:44.845 --> 00:23:47.405
<v Speaker 0>you wanna join the session on K67?

00:23:50.200 --> 00:23:51.480
<v Speaker 1>K67,

00:23:51.480 --> 00:23:52.440
<v Speaker 1>yep. Coming.

00:23:52.840 --> 00:23:53.799
<v Speaker 0>And

00:23:53.799 --> 00:23:55.079
<v Speaker 0>we'll see if,

00:23:55.480 --> 00:23:58.279
<v Speaker 0>I'll just reload it. It's really weird. Like

00:23:58.279 --> 00:23:59.880
<v Speaker 0>when it must be a bug. I don't

00:23:59.880 --> 00:24:01.895
<v Speaker 0>know if it's Firefox or something else. Okay.

00:24:01.895 --> 00:24:04.774
<v Speaker 0>Kubernetesadmin.conf

00:24:04.774 --> 00:24:06.054
<v Speaker 0>get nodes.

00:24:07.414 --> 00:24:08.695
<v Speaker 0>Okay. Cool.

00:24:09.414 --> 00:24:11.414
<v Speaker 0>I possibly That's the one that is yeah.

00:24:11.654 --> 00:24:13.654
<v Speaker 0>I possibly broken that one. I'm not sure

00:24:13.654 --> 00:24:14.534
<v Speaker 0>how I've managed it.

00:24:16.060 --> 00:24:17.580
<v Speaker 0>Not sure what's gonna with that static manifest,

00:24:17.580 --> 00:24:18.940
<v Speaker 0>but I'm gonna ignore it for now.

00:24:19.340 --> 00:24:21.500
<v Speaker 0>Do we have the MOTD on all the

00:24:21.500 --> 00:24:22.220
<v Speaker 0>machines?

00:24:23.100 --> 00:24:24.860
<v Speaker 0>Okay. We do. So let's just work from

00:24:24.860 --> 00:24:25.260
<v Speaker 0>this one.

00:24:33.225 --> 00:24:33.945
<v Speaker 1>Sorry.

00:24:34.264 --> 00:24:35.624
<v Speaker 1>You

00:24:38.664 --> 00:24:40.424
<v Speaker 0>need to pass in we should alias.

00:24:41.360 --> 00:24:44.160
<v Speaker 0>Let me do alias k equals cube control

00:24:44.160 --> 00:24:46.080
<v Speaker 0>dash dash cube config

00:24:47.040 --> 00:24:48.880
<v Speaker 0>and I'll just save as a lot of

00:24:49.440 --> 00:24:50.240
<v Speaker 0>pin

00:24:51.840 --> 00:24:52.400
<v Speaker 0>version.

00:24:54.215 --> 00:24:57.015
<v Speaker 0>Oh. There we go. Sorry. I I

00:24:57.415 --> 00:24:59.175
<v Speaker 1>remembered 1.2

00:24:59.175 --> 00:25:01.575
<v Speaker 1>that was from from your machine locally.

00:25:01.735 --> 00:25:03.815
<v Speaker 1>All good. All good. I I thought maybe

00:25:03.815 --> 00:25:05.415
<v Speaker 1>he has he has messed with that as

00:25:05.415 --> 00:25:06.295
<v Speaker 1>well. Okay. Cool.

00:25:07.940 --> 00:25:10.260
<v Speaker 1>Cool. So we should tackle problem one first.

00:25:10.260 --> 00:25:11.780
<v Speaker 0>Alright? Let's Yeah. Let's see if we can

00:25:11.780 --> 00:25:13.299
<v Speaker 0>work this in order. So

00:25:13.780 --> 00:25:16.420
<v Speaker 0>it says that they've tried to do an

00:25:16.420 --> 00:25:18.980
<v Speaker 0>apply of this Kubernetes deployment. So should we

00:25:19.620 --> 00:25:21.299
<v Speaker 0>and that's probably worked, but they've tried to

00:25:21.299 --> 00:25:23.974
<v Speaker 0>expose it and that hasn't worked.

00:25:24.695 --> 00:25:26.614
<v Speaker 0>If we run a get pods,

00:25:27.095 --> 00:25:28.774
<v Speaker 0>we we actually do have the deployment. So

00:25:28.774 --> 00:25:31.414
<v Speaker 0>there's engine next. Can we quickly before we

00:25:31.414 --> 00:25:33.734
<v Speaker 1>do that, can we quickly do a

00:25:36.215 --> 00:25:37.414
<v Speaker 1>it's just a a really

00:25:38.380 --> 00:25:39.259
<v Speaker 1>wide

00:25:39.740 --> 00:25:41.739
<v Speaker 1>look. Oh, okay. There's something.

00:25:43.260 --> 00:25:43.899
<v Speaker 1>Okay.

00:25:44.780 --> 00:25:46.059
<v Speaker 1>That's maybe a little bit

00:25:47.179 --> 00:25:48.619
<v Speaker 1>I like to do

00:25:48.860 --> 00:25:51.565
<v Speaker 1>get all minus a, meaning across all namespaces

00:25:51.565 --> 00:25:53.965
<v Speaker 1>to get a, like, wide look to see

00:25:53.965 --> 00:25:55.964
<v Speaker 1>what's running across everything.

00:25:57.725 --> 00:25:59.245
<v Speaker 1>Just to have a bit of a feeling,

00:25:59.245 --> 00:26:00.204
<v Speaker 1>you know, okay.

00:26:00.365 --> 00:26:03.245
<v Speaker 1>Using Cilium here, even Hubble is installed,

00:26:03.940 --> 00:26:06.740
<v Speaker 1>The WordPress and other things. So one of

00:26:06.740 --> 00:26:08.820
<v Speaker 1>the things, like, you know, just looking around

00:26:08.820 --> 00:26:11.220
<v Speaker 1>a little bit to see if anything,

00:26:13.380 --> 00:26:14.820
<v Speaker 1>you know, stands out.

00:26:15.700 --> 00:26:16.100
<v Speaker 0>Okay.

00:26:17.375 --> 00:26:18.014
<v Speaker 0>So

00:26:18.495 --> 00:26:21.294
<v Speaker 0>when I did the m o t d

00:26:21.294 --> 00:26:24.014
<v Speaker 0>and it says it's expecting a load balancer,

00:26:24.495 --> 00:26:27.294
<v Speaker 0>I'm assuming then that the problem is

00:26:30.640 --> 00:26:32.400
<v Speaker 0>is this pending what they want us to

00:26:32.400 --> 00:26:33.120
<v Speaker 0>debug?

00:26:34.080 --> 00:26:36.080
<v Speaker 1>Yeah. Let's have a let let's describe the

00:26:36.080 --> 00:26:36.960
<v Speaker 1>engine x deployment.

00:26:44.715 --> 00:26:45.514
<v Speaker 1>Okay.

00:26:46.235 --> 00:26:49.355
<v Speaker 1>No events. No nothing. Looks pretty standard.

00:26:50.875 --> 00:26:53.355
<v Speaker 1>Right. And the service? Yeah.

00:26:55.195 --> 00:26:57.275
<v Speaker 0>As we see, internet deployment.

00:27:00.630 --> 00:27:01.510
<v Speaker 1>Location

00:27:01.510 --> 00:27:04.629
<v Speaker 1>field. Alright. So we have in the event

00:27:05.190 --> 00:27:05.830
<v Speaker 1>an

00:27:06.309 --> 00:27:09.030
<v Speaker 1>a message that the metal l b controller

00:27:09.030 --> 00:27:10.950
<v Speaker 1>is unhappy. So let's have a look at

00:27:10.950 --> 00:27:12.150
<v Speaker 1>the metal l b controller.

00:27:13.405 --> 00:27:15.005
<v Speaker 1>What do we have?

00:27:16.525 --> 00:27:18.125
<v Speaker 0>Yeah. Metal l b system.

00:27:19.805 --> 00:27:22.845
<v Speaker 1>Name space. So let's let's

00:27:22.845 --> 00:27:23.804
<v Speaker 1>use that. Right?

00:27:24.925 --> 00:27:26.525
<v Speaker 1>Config.

00:27:28.240 --> 00:27:28.960
<v Speaker 1>Use

00:27:30.480 --> 00:27:31.279
<v Speaker 1>this is

00:27:32.640 --> 00:27:33.759
<v Speaker 1>add on paper.

00:27:35.920 --> 00:27:36.480
<v Speaker 1>Config.

00:27:39.495 --> 00:27:40.294
<v Speaker 1>Use

00:27:40.775 --> 00:27:42.935
<v Speaker 1>oh, without all these plugins, I'm really

00:27:45.815 --> 00:27:47.895
<v Speaker 0>Well, we have our alias. So why don't

00:27:47.895 --> 00:27:49.014
<v Speaker 0>we just do

00:27:49.175 --> 00:27:51.255
<v Speaker 0>this and then for the sake of

00:27:51.495 --> 00:27:53.830
<v Speaker 0>not remembering how to use that thing, we

00:27:53.830 --> 00:27:56.389
<v Speaker 0>can just do metal l b system. So

00:27:56.389 --> 00:27:58.629
<v Speaker 0>now your case should be there. So

00:27:59.350 --> 00:28:01.429
<v Speaker 0>there you go. Fire away. Cool.

00:28:02.710 --> 00:28:03.429
<v Speaker 1>So

00:28:04.789 --> 00:28:07.269
<v Speaker 1>shall we have

00:28:10.085 --> 00:28:11.684
<v Speaker 1>so what is the

00:28:13.045 --> 00:28:15.924
<v Speaker 1>controller using the deployment here? Right?

00:28:20.485 --> 00:28:21.205
<v Speaker 1>Are we in the

00:28:22.245 --> 00:28:23.525
<v Speaker 0>We have a

00:28:24.539 --> 00:28:25.899
<v Speaker 0>we have a speaker

00:28:25.900 --> 00:28:28.619
<v Speaker 0>daemon set and a controller deployment.

00:28:28.940 --> 00:28:31.340
<v Speaker 0>Our controller deployment is failing because of a

00:28:31.340 --> 00:28:32.299
<v Speaker 0>node affinity.

00:28:37.580 --> 00:28:38.779
<v Speaker 1>Oh, we are not in the in the

00:28:38.779 --> 00:28:39.100
<v Speaker 1>middle.

00:28:39.794 --> 00:28:42.514
<v Speaker 1>So get context essentially lists all the context

00:28:42.514 --> 00:28:44.355
<v Speaker 1>there. Right? And we are currently, as you

00:28:44.355 --> 00:28:46.114
<v Speaker 1>can see here, not in the metal.

00:28:46.914 --> 00:28:48.835
<v Speaker 0>So We are. I just I just changed

00:28:48.835 --> 00:28:50.835
<v Speaker 0>the alias to pass in the namespace rather

00:28:50.835 --> 00:28:51.715
<v Speaker 0>than update the context.

00:28:53.890 --> 00:28:55.409
<v Speaker 1>Oh, okay. Okay.

00:28:55.890 --> 00:28:58.290
<v Speaker 1>Oh, I I I forgot that you prefer

00:28:58.290 --> 00:28:59.330
<v Speaker 1>sledgehammers.

00:29:01.170 --> 00:29:01.889
<v Speaker 1>Okay.

00:29:02.610 --> 00:29:04.210
<v Speaker 1>So what I tried to figure out was

00:29:04.210 --> 00:29:06.995
<v Speaker 1>what the owner of so you did get

00:29:06.995 --> 00:29:08.434
<v Speaker 1>pods. Right?

00:29:08.914 --> 00:29:11.154
<v Speaker 1>So we have these pods.

00:29:11.154 --> 00:29:11.714
<v Speaker 1>Right?

00:29:11.955 --> 00:29:12.994
<v Speaker 1>Yes. And

00:29:13.794 --> 00:29:15.154
<v Speaker 1>I wanted to see

00:29:15.715 --> 00:29:17.955
<v Speaker 1>who owns these pods. Is it I'm I'm

00:29:17.955 --> 00:29:19.950
<v Speaker 1>not that familiar with with metal l b.

00:29:20.190 --> 00:29:22.030
<v Speaker 0>The speaker is a daemon set and the

00:29:22.030 --> 00:29:24.350
<v Speaker 0>controller is a deployment code controller.

00:29:27.230 --> 00:29:29.470
<v Speaker 1>Okay. So if you say

00:29:31.285 --> 00:29:33.045
<v Speaker 1>it's gonna play here. Right? Yeah. And I

00:29:33.045 --> 00:29:34.805
<v Speaker 0>think it's got affinity that it doesn't want

00:29:34.805 --> 00:29:36.885
<v Speaker 0>scheduled together, which is why we're seeing so

00:29:36.885 --> 00:29:37.924
<v Speaker 0>many of them

00:29:38.485 --> 00:29:39.525
<v Speaker 0>failing to schedule.

00:29:54.140 --> 00:29:55.259
<v Speaker 1>These are nice.

00:29:55.740 --> 00:29:55.980
<v Speaker 1>So,

00:29:56.674 --> 00:30:00.275
<v Speaker 0>given I'm pretty familiar with running Kubernetes on

00:30:00.275 --> 00:30:01.475
<v Speaker 0>Equinix Medal.

00:30:01.635 --> 00:30:02.114
<v Speaker 0>I

00:30:02.755 --> 00:30:04.515
<v Speaker 0>I think there's no defending on the controller

00:30:04.515 --> 00:30:06.034
<v Speaker 0>is potentially

00:30:06.034 --> 00:30:07.075
<v Speaker 0>a red heading

00:30:07.955 --> 00:30:10.070
<v Speaker 0>and what I want to confirm is that

00:30:10.070 --> 00:30:12.150
<v Speaker 0>our CCM is actually running, which is what

00:30:12.150 --> 00:30:14.870
<v Speaker 0>would be requesting the Elastic IP from

00:30:15.350 --> 00:30:16.549
<v Speaker 0>Equinix Medal.

00:30:17.590 --> 00:30:19.190
<v Speaker 1>Right. But you're essentially

00:30:19.750 --> 00:30:20.870
<v Speaker 1>you you know

00:30:21.270 --> 00:30:23.030
<v Speaker 1>already, like, but how do you get there?

00:30:23.030 --> 00:30:24.870
<v Speaker 1>Right? How do you get from

00:30:27.665 --> 00:30:28.385
<v Speaker 1>seeing

00:30:28.785 --> 00:30:29.745
<v Speaker 1>that message

00:30:30.385 --> 00:30:31.585
<v Speaker 1>in service?

00:30:32.225 --> 00:30:33.985
<v Speaker 1>Right? But the the message we saw in

00:30:33.985 --> 00:30:35.665
<v Speaker 1>in the service that says, okay. You know,

00:30:35.665 --> 00:30:38.065
<v Speaker 1>the the metal will be controller has some

00:30:38.065 --> 00:30:38.305
<v Speaker 1>issue.

00:30:39.510 --> 00:30:42.230
<v Speaker 1>Jumping to the conclusion that you just did,

00:30:42.790 --> 00:30:45.430
<v Speaker 1>I I guess that's that's maybe useful for

00:30:45.430 --> 00:30:48.070
<v Speaker 1>people to to see. Right? How did you

00:30:48.070 --> 00:30:50.390
<v Speaker 1>get there? How did you besides that you

00:30:50.390 --> 00:30:50.790
<v Speaker 1>know it.

00:30:51.525 --> 00:30:52.804
<v Speaker 0>Yeah. So,

00:30:53.205 --> 00:30:55.845
<v Speaker 0>like, when I see this, I think, yeah,

00:30:55.845 --> 00:30:57.365
<v Speaker 0>the no definite is a problem, we do

00:30:57.365 --> 00:30:58.485
<v Speaker 0>have one running

00:30:58.965 --> 00:31:01.205
<v Speaker 0>controller. So my thought process is, like, I'm

00:31:01.205 --> 00:31:02.965
<v Speaker 0>actually not that worried about that. The speakers

00:31:02.965 --> 00:31:03.605
<v Speaker 0>are okay.

00:31:04.600 --> 00:31:06.360
<v Speaker 0>The error that we see when we describe

00:31:06.360 --> 00:31:07.399
<v Speaker 0>the service

00:31:07.720 --> 00:31:09.559
<v Speaker 0>sorry, I'm gonna have to retweet our alias,

00:31:09.559 --> 00:31:10.919
<v Speaker 0>my sledgehammer, sorry.

00:31:12.200 --> 00:31:14.360
<v Speaker 0>So I can just get that back. So

00:31:14.360 --> 00:31:16.039
<v Speaker 0>if we describe our service,

00:31:16.679 --> 00:31:19.159
<v Speaker 0>which we know is

00:31:18.645 --> 00:31:19.445
<v Speaker 0>failing,

00:31:19.765 --> 00:31:21.525
<v Speaker 0>it says it can't get an IP address.

00:31:21.525 --> 00:31:23.765
<v Speaker 0>Now, the thing that is responsible for getting

00:31:23.765 --> 00:31:25.685
<v Speaker 0>an IP address here for a load balancer

00:31:25.685 --> 00:31:27.845
<v Speaker 0>service is the cloud controller manager.

00:31:28.165 --> 00:31:30.485
<v Speaker 0>So my hypothesis says he's removed our cloud

00:31:30.485 --> 00:31:32.405
<v Speaker 0>controller manager or broken it in some way.

00:31:32.580 --> 00:31:34.260
<v Speaker 1>But then let's check if that

00:31:35.220 --> 00:31:37.620
<v Speaker 0>So we should see our packet cloud controller

00:31:37.620 --> 00:31:39.059
<v Speaker 0>manager running here.

00:31:40.419 --> 00:31:42.500
<v Speaker 0>Yep. And it's been running for fourteen days.

00:31:42.500 --> 00:31:44.499
<v Speaker 0>I was kinda hoping to see

00:31:47.059 --> 00:31:48.465
<v Speaker 0>that broken. Have a look at the logs.

00:31:48.465 --> 00:31:49.745
<v Speaker 1>Right? Let's let's have a look at the

00:31:49.745 --> 00:31:50.225
<v Speaker 1>logs.

00:31:50.785 --> 00:31:52.625
<v Speaker 1>If there is anything in in the logs

00:31:52.625 --> 00:31:54.705
<v Speaker 1>of the packet cloud controller manager.

00:32:01.070 --> 00:32:03.390
<v Speaker 0>Yeah. Maybe we should do it. I've control

00:32:03.390 --> 00:32:04.590
<v Speaker 0>c that but we'll need to give it

00:32:04.590 --> 00:32:06.510
<v Speaker 0>a second I think. Right. I was gonna

00:32:06.510 --> 00:32:08.269
<v Speaker 0>add a sense to it.

00:32:09.230 --> 00:32:11.230
<v Speaker 0>So when is that from? That's from that's

00:32:11.230 --> 00:32:12.589
<v Speaker 0>from today. Okay. So

00:32:13.149 --> 00:32:14.429
<v Speaker 0>we

00:32:14.425 --> 00:32:15.065
<v Speaker 0>ah.

00:32:15.305 --> 00:32:16.025
<v Speaker 0>Okay.

00:32:17.705 --> 00:32:20.185
<v Speaker 0>So the API token that our cloud controller

00:32:20.185 --> 00:32:22.105
<v Speaker 0>manager is using to speak to the cloud

00:32:22.105 --> 00:32:24.185
<v Speaker 0>provider API to get us an Elastic IP

00:32:24.185 --> 00:32:25.544
<v Speaker 0>is now unauthenticated. Right.

00:32:27.785 --> 00:32:29.145
<v Speaker 1>So we have the line here

00:32:30.880 --> 00:32:33.600
<v Speaker 1>that there is an invalid authentication token there.

00:32:33.600 --> 00:32:36.000
<v Speaker 1>Right? Yes. But the controller tries to speak

00:32:36.000 --> 00:32:38.240
<v Speaker 1>with the packet API and

00:32:40.080 --> 00:32:40.720
<v Speaker 1>so

00:32:41.200 --> 00:32:42.960
<v Speaker 1>something in the controller.

00:32:43.840 --> 00:32:46.095
<v Speaker 0>There should be a config map and the

00:32:46.095 --> 00:32:47.535
<v Speaker 0>cube system namespace

00:32:47.535 --> 00:32:48.654
<v Speaker 0>that has

00:32:48.815 --> 00:32:50.975
<v Speaker 0>the details that we need

00:32:51.855 --> 00:32:53.054
<v Speaker 0>for that to work.

00:32:54.095 --> 00:32:56.575
<v Speaker 1>Now we could theoretically

00:32:56.655 --> 00:32:58.840
<v Speaker 1>get into and retrieve.

00:32:59.640 --> 00:33:01.399
<v Speaker 1>Okay. I'm I'm just kidding.

00:33:01.880 --> 00:33:03.480
<v Speaker 1>Let's let's let's

00:33:04.040 --> 00:33:06.200
<v Speaker 1>where where does that config map come from?

00:33:06.200 --> 00:33:07.399
<v Speaker 1>Like, it's

00:33:08.440 --> 00:33:10.200
<v Speaker 1>how do you create it? I'm not that

00:33:10.200 --> 00:33:11.000
<v Speaker 1>familiar with

00:33:11.545 --> 00:33:13.225
<v Speaker 0>Yeah. So I think we can just recreate

00:33:13.225 --> 00:33:14.664
<v Speaker 0>it manually.

00:33:14.665 --> 00:33:16.585
<v Speaker 0>Now, this is where Justin doesn't know the

00:33:16.585 --> 00:33:18.745
<v Speaker 0>setup and I do and

00:33:19.145 --> 00:33:20.985
<v Speaker 0>this is actually more painful than I actually

00:33:20.985 --> 00:33:22.745
<v Speaker 0>wanted it to be because, you know, as

00:33:22.745 --> 00:33:23.945
<v Speaker 0>much as I trust the people I give

00:33:23.945 --> 00:33:26.669
<v Speaker 0>these clusters to, I don't trust them. No.

00:33:26.669 --> 00:33:28.829
<v Speaker 1>Don't trust them. So, there's project

00:33:28.909 --> 00:33:30.269
<v Speaker 0>keys for each,

00:33:30.909 --> 00:33:33.870
<v Speaker 0>but let's just check. In fact, Waleed, I

00:33:33.870 --> 00:33:34.909
<v Speaker 0>think you and I just have to say

00:33:34.909 --> 00:33:36.269
<v Speaker 0>my dear at the same time there. It's

00:33:36.269 --> 00:33:37.870
<v Speaker 0>not actually a config map. It's a secret,

00:33:37.870 --> 00:33:38.509
<v Speaker 0>isn't it? So,

00:33:41.195 --> 00:33:43.515
<v Speaker 0>yeah. There is a packet cloud config.

00:33:43.995 --> 00:33:44.635
<v Speaker 1>Right.

00:33:45.675 --> 00:33:47.755
<v Speaker 1>So But it's also fourteen days old, right?

00:33:47.755 --> 00:33:48.715
<v Speaker 1>There is nothing

00:33:50.555 --> 00:33:51.835
<v Speaker 1>nothing changed there.

00:33:53.420 --> 00:33:55.260
<v Speaker 0>That is true. Yeah. Just that you wanna

00:33:55.260 --> 00:33:57.180
<v Speaker 0>confirm that we are working on the right

00:33:57.180 --> 00:33:58.620
<v Speaker 0>problem here and I'm not

00:33:59.260 --> 00:34:01.260
<v Speaker 0>working on something that isn't relevant

00:34:03.500 --> 00:34:05.500
<v Speaker 0>before I go trying to before I go

00:34:05.500 --> 00:34:08.060
<v Speaker 0>flashing the auth token from this config anyway

00:34:07.684 --> 00:34:09.445
<v Speaker 0>and then trying to fix something that isn't

00:34:09.445 --> 00:34:10.645
<v Speaker 0>actually correct.

00:34:16.405 --> 00:34:18.005
<v Speaker 0>But we looked at the CCM logs. We

00:34:18.005 --> 00:34:19.605
<v Speaker 0>know that it's trying to request an IP

00:34:19.605 --> 00:34:21.780
<v Speaker 0>and it can't. Right. The authentication is the

00:34:21.780 --> 00:34:23.940
<v Speaker 0>problem. That's config map. That's secret, sorry.

00:34:24.739 --> 00:34:26.340
<v Speaker 0>Feels to me like we're looking in the

00:34:26.340 --> 00:34:28.100
<v Speaker 0>right place, but you're right. The fourteen days

00:34:28.100 --> 00:34:29.540
<v Speaker 0>on it is when I I

00:34:31.219 --> 00:34:32.660
<v Speaker 0>I wonder if he's just modified the time

00:34:32.660 --> 00:34:33.220
<v Speaker 0>in I

00:34:33.620 --> 00:34:34.739
<v Speaker 0>wonder if he's been that sneaky.

00:34:35.864 --> 00:34:38.745
<v Speaker 1>Justin confirmed it's it's a missing token. Right?

00:34:39.385 --> 00:34:40.105
<v Speaker 1>But

00:34:41.864 --> 00:34:43.945
<v Speaker 1>somehow I think it has not

00:34:44.185 --> 00:34:46.185
<v Speaker 1>much to do with that secret here.

00:34:46.505 --> 00:34:48.824
<v Speaker 1>I mean, given that it hasn't been touched.

00:34:49.130 --> 00:34:52.090
<v Speaker 0>Ah, what if you modify the CCM deployment

00:34:52.170 --> 00:34:52.970
<v Speaker 0>and then

00:34:53.370 --> 00:34:55.610
<v Speaker 0>change them the configuration?

00:34:55.610 --> 00:34:56.010
<v Speaker 1>You

00:34:57.450 --> 00:34:58.890
<v Speaker 1>think he's that sneaky? Yeah. Let's have a

00:34:58.890 --> 00:35:00.010
<v Speaker 1>look at the deployment. That's

00:35:00.730 --> 00:35:03.974
<v Speaker 1>I think yeah. He he may be mean,

00:35:03.974 --> 00:35:05.895
<v Speaker 1>but he's not like cool.

00:35:06.775 --> 00:35:09.255
<v Speaker 0>Fourteen days as well. And he's also I

00:35:09.494 --> 00:35:11.255
<v Speaker 0>know we're we're pushing our forty minute mark

00:35:11.255 --> 00:35:13.015
<v Speaker 0>here. Right? So thank you for the tips,

00:35:13.015 --> 00:35:15.414
<v Speaker 0>Justin. But he said, he's surprised the secret

00:35:15.414 --> 00:35:18.160
<v Speaker 0>doesn't say it was modified and edited. That's

00:35:18.160 --> 00:35:21.040
<v Speaker 0>probably a bug. So I hope we found

00:35:21.040 --> 00:35:22.640
<v Speaker 0>the bug. Would be awesome.

00:35:24.240 --> 00:35:25.840
<v Speaker 0>So this secret has I see what you

00:35:26.160 --> 00:35:28.400
<v Speaker 0>been modified. Let's let's fix it. Right? So

00:35:28.400 --> 00:35:30.240
<v Speaker 0>we can do edit secret. And I don't

00:35:30.240 --> 00:35:31.920
<v Speaker 0>mind flashing this. This token is not gonna

00:35:31.920 --> 00:35:34.555
<v Speaker 0>live much more than this episode anyway. So,

00:35:36.635 --> 00:35:37.755
<v Speaker 0>edit secrets.

00:35:37.995 --> 00:35:38.555
<v Speaker 0>This

00:35:40.155 --> 00:35:43.115
<v Speaker 0>there is my token cloud dash s a

00:35:43.115 --> 00:35:43.835
<v Speaker 0>dot json.

00:35:48.440 --> 00:35:50.440
<v Speaker 1>Well, no. It's not a bug because it

00:35:50.599 --> 00:35:53.160
<v Speaker 1>what it lists what the list view does,

00:35:53.160 --> 00:35:56.040
<v Speaker 1>it shows the creation timestamp, not the the,

00:35:56.359 --> 00:35:56.680
<v Speaker 1>you know

00:35:57.559 --> 00:35:59.400
<v Speaker 0>Last modified one. That's right. Right.

00:36:00.785 --> 00:36:01.345
<v Speaker 0>So,

00:36:02.065 --> 00:36:03.985
<v Speaker 0>is cloud dot se.

00:36:03.985 --> 00:36:06.545
<v Speaker 0>Json, is that what we're looking for? Let's

00:36:06.545 --> 00:36:07.105
<v Speaker 0>check

00:36:08.145 --> 00:36:09.265
<v Speaker 0>kube system,

00:36:09.265 --> 00:36:11.185
<v Speaker 0>edit, deploy, packet,

00:36:11.265 --> 00:36:12.065
<v Speaker 0>cloud,

00:36:12.065 --> 00:36:12.785
<v Speaker 0>CCM.

00:36:13.730 --> 00:36:15.490
<v Speaker 0>What was the packet cloud?

00:36:18.049 --> 00:36:19.890
<v Speaker 0>Let's just run get deploys again.

00:36:20.690 --> 00:36:21.890
<v Speaker 0>I'm not gonna remember.

00:36:22.130 --> 00:36:24.450
<v Speaker 0>Packet cloud control machine. Edit deploy. Yeah. And

00:36:24.450 --> 00:36:25.650
<v Speaker 0>I'll just copy and paste.

00:36:26.895 --> 00:36:29.135
<v Speaker 0>Alright. So what secret is this trying to

00:36:29.135 --> 00:36:30.015
<v Speaker 0>bring in?

00:36:32.735 --> 00:36:33.295
<v Speaker 1>Secret.

00:36:36.415 --> 00:36:39.055
<v Speaker 0>So that's just the I could cut configure.

00:36:39.135 --> 00:36:39.615
<v Speaker 1>Yep.

00:36:46.150 --> 00:36:49.190
<v Speaker 0>Packet cloud config. Yeah, that's the right name.

00:36:49.190 --> 00:36:51.430
<v Speaker 0>It's not specifying sub keys. So let's just

00:36:51.430 --> 00:36:52.550
<v Speaker 0>go to the volume mount.

00:36:56.335 --> 00:36:57.615
<v Speaker 0>So

00:36:59.455 --> 00:37:01.375
<v Speaker 0>we can just add dot JSON.

00:37:03.135 --> 00:37:03.855
<v Speaker 1>Okay.

00:37:04.815 --> 00:37:05.615
<v Speaker 1>Get deploy.

00:37:07.310 --> 00:37:08.910
<v Speaker 0>Is that restarted yet?

00:37:09.070 --> 00:37:12.750
<v Speaker 0>Get pods. Probably need to yeah. Oh, No.

00:37:13.070 --> 00:37:13.630
<v Speaker 0>Nice.

00:37:18.270 --> 00:37:20.110
<v Speaker 1>Don't we all love to see crash loop

00:37:20.110 --> 00:37:20.430
<v Speaker 1>back up?

00:37:21.805 --> 00:37:23.965
<v Speaker 0>I thought I got that okay. Hold on.

00:37:23.965 --> 00:37:25.645
<v Speaker 0>Oh yeah. It looked it looked good. Did

00:37:25.645 --> 00:37:27.485
<v Speaker 1>you did you store?

00:37:29.245 --> 00:37:30.045
<v Speaker 0>Oh,

00:37:31.245 --> 00:37:32.525
<v Speaker 0>wait. That's the mount path.

00:37:34.780 --> 00:37:35.900
<v Speaker 0>That is wrong.

00:37:36.060 --> 00:37:39.020
<v Speaker 1>Dot JSON. Yeah. Dot JSON. Yeah. No. No.

00:37:39.020 --> 00:37:40.300
<v Speaker 0>That's the volume then.

00:37:44.140 --> 00:37:45.260
<v Speaker 0>I'm not gonna use that.

00:37:47.575 --> 00:37:48.455
<v Speaker 0>Volume.

00:37:48.615 --> 00:37:49.095
<v Speaker 0>Okay,

00:37:49.575 --> 00:37:51.495
<v Speaker 0>let's revert this so that I've not touched

00:37:51.495 --> 00:37:52.135
<v Speaker 0>it.

00:37:55.255 --> 00:37:55.895
<v Speaker 1>Yeah.

00:37:56.615 --> 00:37:58.695
<v Speaker 0>Yeah. So, main path is to a directory

00:37:58.695 --> 00:38:00.135
<v Speaker 0>called CloudSA.

00:38:00.295 --> 00:38:02.215
<v Speaker 0>That is the name of the volume, isn't

00:38:02.215 --> 00:38:03.300
<v Speaker 0>it? Yeah.

00:38:04.020 --> 00:38:04.740
<v Speaker 0>Yeah.

00:38:04.980 --> 00:38:06.740
<v Speaker 0>So, the file name that the CCM is

00:38:06.740 --> 00:38:07.620
<v Speaker 0>affecting us.

00:38:16.885 --> 00:38:18.805
<v Speaker 0>Alright, let's get the logs again. I feel

00:38:18.805 --> 00:38:20.484
<v Speaker 0>like we're missing something here.

00:38:22.565 --> 00:38:23.205
<v Speaker 1>Yeah,

00:38:24.404 --> 00:38:25.525
<v Speaker 1>what are we missing?

00:38:26.325 --> 00:38:27.684
<v Speaker 0>Sends 10 ms,

00:38:31.029 --> 00:38:32.950
<v Speaker 0>invalid authentication token.

00:38:34.789 --> 00:38:36.630
<v Speaker 0>Now he might have just changed the path.

00:38:36.630 --> 00:38:37.270
<v Speaker 0>Don't

00:38:37.829 --> 00:38:39.190
<v Speaker 0>know that off the top of my head.

00:38:39.190 --> 00:38:42.390
<v Speaker 0>I'm gonna So just just said he deleted

00:38:42.390 --> 00:38:44.790
<v Speaker 1>data dot token from the secret.

00:38:44.950 --> 00:38:45.670
<v Speaker 1>So

00:38:46.655 --> 00:38:47.535
<v Speaker 1>let's

00:38:47.775 --> 00:38:48.895
<v Speaker 1>get to the

00:38:49.215 --> 00:38:50.015
<v Speaker 1>secret.

00:38:50.895 --> 00:38:51.535
<v Speaker 1>Alright.

00:38:54.255 --> 00:38:55.615
<v Speaker 0>I never told you how much I hate.

00:38:55.615 --> 00:38:56.415
<v Speaker 0>That's sure.

00:38:59.055 --> 00:39:01.455
<v Speaker 1>We're all together in it. No worries.

00:39:04.300 --> 00:39:05.900
<v Speaker 0>So is this just supposed to be called

00:39:05.900 --> 00:39:06.620
<v Speaker 0>token?

00:39:10.060 --> 00:39:11.660
<v Speaker 0>I'm gonna check another one.

00:39:13.180 --> 00:39:14.860
<v Speaker 0>I can't do that. Don't have one handy.

00:39:14.860 --> 00:39:16.140
<v Speaker 0>Let's have another broken one.

00:39:19.225 --> 00:39:20.825
<v Speaker 0>Okay. I'm

00:39:20.825 --> 00:39:21.865
<v Speaker 1>not entirely sure.

00:39:32.620 --> 00:39:34.460
<v Speaker 0>Where does the CCM live?

00:39:36.540 --> 00:39:37.980
<v Speaker 1>There we go. Is there a

00:39:41.020 --> 00:39:42.060
<v Speaker 0>Where is the secret?

00:39:44.555 --> 00:39:46.635
<v Speaker 0>I'll just check the code because I'm gonna

00:39:46.635 --> 00:39:48.235
<v Speaker 0>drive myself around in circles here.

00:39:57.069 --> 00:39:58.990
<v Speaker 0>So I'm going to declare this a, does

00:39:58.990 --> 00:40:00.990
<v Speaker 0>this have an example of kind secret?

00:40:03.630 --> 00:40:03.950
<v Speaker 0>Nope.

00:40:16.065 --> 00:40:17.505
<v Speaker 0>Alright. Let's grab this.

00:40:32.900 --> 00:40:33.780
<v Speaker 0>That looks fine.

00:40:37.224 --> 00:40:39.465
<v Speaker 1>That's the unbase 64

00:40:39.625 --> 00:40:40.425
<v Speaker 1>what?

00:40:41.785 --> 00:40:42.585
<v Speaker 1>The

00:40:45.065 --> 00:40:46.585
<v Speaker 1>value of cloud is a JSON.

00:40:53.140 --> 00:40:54.820
<v Speaker 1>Marcus has a nice suggestion.

00:41:14.035 --> 00:41:14.675
<v Speaker 0>Okay.

00:41:19.750 --> 00:41:21.990
<v Speaker 0>Alright. Let's tackle his second problem.

00:41:24.790 --> 00:41:26.870
<v Speaker 1>Okay. So we theoretically have an answer for

00:41:26.870 --> 00:41:30.630
<v Speaker 1>the search third one. Right? So that's

00:41:30.185 --> 00:41:30.985
<v Speaker 1>that's something.

00:41:33.385 --> 00:41:35.625
<v Speaker 0>Prompt is there's

00:41:35.625 --> 00:41:36.585
<v Speaker 0>no DNS.

00:41:41.625 --> 00:41:43.625
<v Speaker 0>Yeah. Okay. So Justin changed the token.

00:41:44.109 --> 00:41:45.790
<v Speaker 0>Yeah. That's what I was trying to alluding

00:41:45.790 --> 00:41:48.589
<v Speaker 0>to when I said that I'm aware of

00:41:48.589 --> 00:41:49.950
<v Speaker 0>the setup and you're not, but I used

00:41:49.950 --> 00:41:52.750
<v Speaker 0>very specific tokens for each project and then

00:41:52.910 --> 00:41:53.950
<v Speaker 0>Okay.

00:41:54.109 --> 00:41:55.390
<v Speaker 0>Dropping that back in

00:41:56.875 --> 00:41:58.635
<v Speaker 0>a little bit more difficult than I'd actually

00:41:58.635 --> 00:42:00.155
<v Speaker 0>like it to be. Anyway.

00:42:00.555 --> 00:42:02.235
<v Speaker 1>How are we doing time wise?

00:42:02.795 --> 00:42:03.595
<v Speaker 1>You said

00:42:04.235 --> 00:42:06.155
<v Speaker 0>Yeah. We'll we'll give let's see if we

00:42:06.155 --> 00:42:07.835
<v Speaker 0>can fix this tech problem in five minutes

00:42:07.835 --> 00:42:09.675
<v Speaker 0>and move on to the other cluster. Yep.

00:42:09.675 --> 00:42:11.755
<v Speaker 1>Let's time that. That that makes sense. Yeah.

00:42:11.755 --> 00:42:13.980
<v Speaker 0>Yeah. So, there's no DNS to say the

00:42:13.980 --> 00:42:14.700
<v Speaker 0>cluster.

00:42:16.380 --> 00:42:17.900
<v Speaker 1>Me jump on this. They want us to

00:42:17.900 --> 00:42:19.340
<v Speaker 0>run this command.

00:42:21.660 --> 00:42:22.220
<v Speaker 1>And

00:42:23.580 --> 00:42:26.220
<v Speaker 1>I need to use case. I get the

00:42:26.220 --> 00:42:26.780
<v Speaker 0>token.

00:42:31.295 --> 00:42:33.135
<v Speaker 0>We have a command prompt

00:42:33.295 --> 00:42:35.135
<v Speaker 0>and then to dig Kubernetes

00:42:36.575 --> 00:42:38.735
<v Speaker 0>and we didn't get a response. So our

00:42:38.735 --> 00:42:39.935
<v Speaker 0>cluster DNS

00:42:40.390 --> 00:42:42.869
<v Speaker 0>is using the correct IP address, looks like

00:42:42.869 --> 00:42:44.790
<v Speaker 0>for internal

00:42:44.869 --> 00:42:45.750
<v Speaker 0>DNS,

00:42:45.750 --> 00:42:47.190
<v Speaker 0>but not resolving.

00:42:47.830 --> 00:42:50.310
<v Speaker 0>So, what's step one here then, Michael?

00:42:55.735 --> 00:42:58.295
<v Speaker 1>Sorry. I tried to to get onto that

00:42:58.295 --> 00:43:00.455
<v Speaker 1>session but somehow it's it's disconnected.

00:43:00.535 --> 00:43:01.975
<v Speaker 0>Are we not in the same session? Oh,

00:43:02.295 --> 00:43:05.735
<v Speaker 1>okay. I k f I thought but I

00:43:05.815 --> 00:43:08.455
<v Speaker 1>if I say join here then it says

00:43:08.880 --> 00:43:10.320
<v Speaker 1>now I am. Right.

00:43:10.720 --> 00:43:11.920
<v Speaker 1>That's the one. Right?

00:43:16.160 --> 00:43:17.280
<v Speaker 0>Yeah. He's

00:43:17.440 --> 00:43:18.720
<v Speaker 0>I'll

00:43:18.720 --> 00:43:20.000
<v Speaker 0>just reload. Okay.

00:43:21.279 --> 00:43:22.319
<v Speaker 0>Yes. So Cool.

00:43:26.315 --> 00:43:28.395
<v Speaker 0>We got a hint. Okay. So let's use

00:43:28.395 --> 00:43:30.475
<v Speaker 0>the hint since we're time boxed here

00:43:32.555 --> 00:43:34.635
<v Speaker 0>to take a look at the resolve.conf.

00:43:41.550 --> 00:43:45.390
<v Speaker 0>Default sbccluster.localsbcdot.

00:43:48.510 --> 00:43:50.510
<v Speaker 1>What's that name server here?

00:43:52.145 --> 00:43:54.145
<v Speaker 0>I'm pretty sure that's the

00:43:59.105 --> 00:44:00.785
<v Speaker 0>core d a k d n s service

00:44:00.785 --> 00:44:01.505
<v Speaker 0>IP.

00:44:02.625 --> 00:44:03.265
<v Speaker 0>Yeah.

00:44:04.464 --> 00:44:04.865
<v Speaker 1>Good.

00:44:08.580 --> 00:44:09.380
<v Speaker 1>Okay.

00:44:14.740 --> 00:44:15.540
<v Speaker 1>But

00:44:18.020 --> 00:44:20.020
<v Speaker 0>Looks okay. The resolve dot conf.

00:44:23.605 --> 00:44:25.525
<v Speaker 0>Let's go back in the container.

00:44:25.605 --> 00:44:27.605
<v Speaker 0>Let's try doing a dig at

00:44:28.565 --> 00:44:30.725
<v Speaker 0>mean, that's pretty much the same thing anyway.

00:44:31.685 --> 00:44:33.445
<v Speaker 0>This could just be an NDots problem.

00:44:34.329 --> 00:44:35.290
<v Speaker 0>Kubernetes.

00:44:35.290 --> 00:44:39.530
<v Speaker 0>Svc. Custard

00:44:40.410 --> 00:44:40.810
<v Speaker 0>local.

00:44:47.255 --> 00:44:48.775
<v Speaker 0>Yeah. That works. Okay.

00:44:52.695 --> 00:44:54.615
<v Speaker 0>Yeah. I think the n dot five

00:44:54.935 --> 00:44:56.615
<v Speaker 0>I think that was the default. I don't

00:44:56.615 --> 00:44:57.095
<v Speaker 0>know.

00:44:59.335 --> 00:45:00.295
<v Speaker 0>Cluster DNS

00:45:01.410 --> 00:45:02.370
<v Speaker 0>worked though.

00:45:03.970 --> 00:45:08.609
<v Speaker 0>Just not with the dots. Let's

00:45:08.609 --> 00:45:09.570
<v Speaker 0>change.

00:45:11.329 --> 00:45:12.290
<v Speaker 0>Get

00:45:12.530 --> 00:45:15.329
<v Speaker 0>I think Justin, sorry, a comment flew past

00:45:15.329 --> 00:45:15.570
<v Speaker 0>there.

00:45:16.505 --> 00:45:18.665
<v Speaker 0>That's not what I had. I don't know

00:45:18.665 --> 00:45:19.625
<v Speaker 0>why it's broken.

00:45:24.025 --> 00:45:26.105
<v Speaker 0>Again, I really hate this show. Okay.

00:45:26.745 --> 00:45:28.425
<v Speaker 0>Edit core DNS conflict map.

00:45:31.870 --> 00:45:32.750
<v Speaker 0>Centimeters.

00:45:35.550 --> 00:45:37.790
<v Speaker 0>No end up configuration in here.

00:45:52.184 --> 00:45:52.985
<v Speaker 0>Alright.

00:45:53.065 --> 00:45:53.785
<v Speaker 0>Let's see.

00:46:01.869 --> 00:46:04.109
<v Speaker 1>Duffy says it's not ended. Okay.

00:46:09.805 --> 00:46:11.965
<v Speaker 1>And Brent says, look at the search again.

00:46:11.965 --> 00:46:13.965
<v Speaker 1>I am assuming

00:46:14.925 --> 00:46:16.525
<v Speaker 1>the dig here. Yeah.

00:46:17.965 --> 00:46:19.005
<v Speaker 1>So what have we got?

00:46:35.910 --> 00:46:37.350
<v Speaker 1>Anything that stands out?

00:46:41.815 --> 00:46:43.974
<v Speaker 1>Okay. Just as I said, he changed resolve

00:46:43.974 --> 00:46:46.375
<v Speaker 1>conf on the worker nodes and updated the

00:46:46.375 --> 00:46:48.855
<v Speaker 1>cubit config map to use my modified result.

00:46:51.810 --> 00:46:52.690
<v Speaker 1>Okay.

00:46:56.050 --> 00:46:58.530
<v Speaker 1>Yeah. I agree. Definitely. It's interesting.

00:47:00.610 --> 00:47:03.490
<v Speaker 1>Cool. But we're kind of like we we

00:47:03.650 --> 00:47:05.090
<v Speaker 1>can't really reproduce

00:47:05.090 --> 00:47:06.130
<v Speaker 1>the

00:47:06.625 --> 00:47:08.705
<v Speaker 1>error or the actual

00:47:09.825 --> 00:47:11.985
<v Speaker 1>brokenness. Is that an English word?

00:47:12.465 --> 00:47:14.545
<v Speaker 0>I don't know. You know, I was

00:47:14.865 --> 00:47:16.545
<v Speaker 0>I I was still sure we we were

00:47:16.545 --> 00:47:17.825
<v Speaker 0>gonna do really well today that I brought

00:47:17.825 --> 00:47:19.425
<v Speaker 0>myself a victory beer that I don't think

00:47:19.425 --> 00:47:20.625
<v Speaker 0>I'm gonna get to drink anymore.

00:47:23.640 --> 00:47:24.440
<v Speaker 0>Nice.

00:47:24.760 --> 00:47:25.400
<v Speaker 0>Well

00:47:25.880 --> 00:47:28.280
<v Speaker 0>Alright. I would say I think that was

00:47:28.280 --> 00:47:29.880
<v Speaker 1>fun and we learned something.

00:47:31.320 --> 00:47:32.680
<v Speaker 1>How about we

00:47:32.855 --> 00:47:33.575
<v Speaker 1>we

00:47:33.895 --> 00:47:35.974
<v Speaker 1>prepare ourselves for a little bit more pain?

00:47:37.015 --> 00:47:39.095
<v Speaker 0>Yeah. Let's jump onto cluster two. We wanna

00:47:39.095 --> 00:47:40.775
<v Speaker 0>make sure we, you know, allocate enough time

00:47:40.775 --> 00:47:43.335
<v Speaker 0>to both. Justin has a repository of an

00:47:43.335 --> 00:47:45.575
<v Speaker 0>Ansible playbook that he used to break this.

00:47:45.575 --> 00:47:47.015
<v Speaker 0>We'll also do the write up in the

00:47:47.015 --> 00:47:47.654
<v Speaker 0>post mortem.

00:47:48.350 --> 00:47:50.590
<v Speaker 0>So I think we got the first issue,

00:47:51.710 --> 00:47:53.550
<v Speaker 0>which Well, we got the service fixed. Thank

00:47:53.550 --> 00:47:55.630
<v Speaker 0>you for leaving nice working service on that

00:47:55.630 --> 00:47:58.030
<v Speaker 0>directory. The second one was the API token,

00:47:58.030 --> 00:47:59.470
<v Speaker 0>which we could fix, but

00:47:59.950 --> 00:48:01.630
<v Speaker 0>I can't get an API token right now.

00:48:01.925 --> 00:48:03.925
<v Speaker 0>And then the third one is the DNS.

00:48:04.885 --> 00:48:07.765
<v Speaker 0>I'm not entirely sure what's broken. I'm really

00:48:07.765 --> 00:48:10.085
<v Speaker 0>surprised to see that a deg. Coup, like

00:48:10.085 --> 00:48:11.365
<v Speaker 0>a fully resolved

00:48:11.765 --> 00:48:12.565
<v Speaker 0>name

00:48:12.724 --> 00:48:14.245
<v Speaker 0>works, but not

00:48:17.285 --> 00:48:18.230
<v Speaker 0>the, but not with the

00:48:19.750 --> 00:48:21.510
<v Speaker 0>fluffy match. I don't even know if that's

00:48:21.510 --> 00:48:23.270
<v Speaker 0>a technical term, it's that's no, but I'm

00:48:23.270 --> 00:48:24.310
<v Speaker 0>always gonna call it.

00:48:24.950 --> 00:48:27.030
<v Speaker 0>Not sure why that's working. I'm looking forward

00:48:27.030 --> 00:48:28.230
<v Speaker 0>to seeing the Ansible playbook.

00:48:29.255 --> 00:48:31.975
<v Speaker 0>You have a beat, Justin. Well done.

00:48:32.855 --> 00:48:33.575
<v Speaker 1>Absolutely.

00:48:34.055 --> 00:48:34.855
<v Speaker 0>Alright.

00:48:34.855 --> 00:48:37.415
<v Speaker 0>Let's move on to cluster number two, which

00:48:37.415 --> 00:48:38.775
<v Speaker 0>is 006

00:48:38.775 --> 00:48:39.655
<v Speaker 0>broken

00:48:39.655 --> 00:48:42.055
<v Speaker 0>by team SIGHONK.

00:48:43.575 --> 00:48:44.775
<v Speaker 0>Alright.

00:48:45.150 --> 00:48:47.309
<v Speaker 1>So So, what did we say there? We

00:48:47.309 --> 00:48:48.510
<v Speaker 1>first need to

00:48:51.390 --> 00:48:52.510
<v Speaker 0>Well, I'm worried.

00:48:53.869 --> 00:48:56.029
<v Speaker 0>We have our teleport screen which is only

00:48:56.029 --> 00:48:57.390
<v Speaker 0>listing our worker nodes.

00:48:58.925 --> 00:48:59.565
<v Speaker 0>Right.

00:49:00.605 --> 00:49:03.405
<v Speaker 0>No control plane nodes. No control plane nodes.

00:49:03.405 --> 00:49:05.725
<v Speaker 1>Yep. Let me grab an IP address for

00:49:05.725 --> 00:49:07.405
<v Speaker 0>one of these control plane nodes.

00:49:09.805 --> 00:49:11.005
<v Speaker 0>I have a terminal here.

00:49:11.610 --> 00:49:13.850
<v Speaker 0>Let's export the cube config. I know I'm

00:49:13.850 --> 00:49:15.450
<v Speaker 1>gonna run and get notes and just hope

00:49:15.450 --> 00:49:17.690
<v Speaker 1>that it works, but you know, it's not

00:49:17.690 --> 00:49:18.570
<v Speaker 0>looking good.

00:49:20.570 --> 00:49:21.690
<v Speaker 0>No. Okay.

00:49:22.410 --> 00:49:24.410
<v Speaker 0>You'll need to use the

00:49:24.650 --> 00:49:26.570
<v Speaker 0>broadcast view. Wait. Oh, wait. That did work.

00:49:28.655 --> 00:49:29.935
<v Speaker 1>Are you sure that you're in the right

00:49:30.095 --> 00:49:32.335
<v Speaker 1>oh, yeah. O six. Yeah. I I I

00:49:32.335 --> 00:49:34.495
<v Speaker 1>remember that one, being in the right in

00:49:34.495 --> 00:49:36.175
<v Speaker 1>the right directory in the for the right

00:49:36.175 --> 00:49:37.055
<v Speaker 1>cluster. Right?

00:49:37.695 --> 00:49:38.735
<v Speaker 1>That's a gotcha.

00:49:39.455 --> 00:49:40.095
<v Speaker 1>But

00:49:41.860 --> 00:49:44.020
<v Speaker 1>why is it is that really let me

00:49:44.020 --> 00:49:45.460
<v Speaker 1>double check. Is that really

00:49:45.780 --> 00:49:48.340
<v Speaker 1>yeah. No. Those are actually everything is

00:49:49.380 --> 00:49:52.260
<v Speaker 1>everything is ready. That's too nice. That's

00:49:52.615 --> 00:49:55.255
<v Speaker 1>I almost don't believe it. Alright.

00:49:56.455 --> 00:49:57.095
<v Speaker 0>Well,

00:49:58.535 --> 00:50:00.215
<v Speaker 0>we have an issue report.

00:50:00.615 --> 00:50:02.375
<v Speaker 0>Oh, okay. And a directory.

00:50:03.095 --> 00:50:05.415
<v Speaker 0>Hi admins. I can see from kubectl get

00:50:05.415 --> 00:50:07.550
<v Speaker 0>pods dash a there, pods and things running

00:50:07.550 --> 00:50:08.910
<v Speaker 0>on the control play notes.

00:50:09.470 --> 00:50:10.830
<v Speaker 0>But when I SSHN,

00:50:10.830 --> 00:50:12.670
<v Speaker 0>I can't see anything running.

00:50:12.990 --> 00:50:15.150
<v Speaker 0>Signed a confused guess.

00:50:16.190 --> 00:50:17.150
<v Speaker 1>Maybe

00:50:17.790 --> 00:50:18.670
<v Speaker 1>Specsaver,

00:50:18.670 --> 00:50:21.070
<v Speaker 1>if you can't see. But but it only

00:50:21.070 --> 00:50:21.870
<v Speaker 1>works in The UK.

00:50:23.445 --> 00:50:24.245
<v Speaker 1>Alright.

00:50:27.445 --> 00:50:28.165
<v Speaker 1>So

00:50:28.245 --> 00:50:30.085
<v Speaker 1>what have we got here?

00:50:31.445 --> 00:50:33.285
<v Speaker 1>There are some really nice

00:50:36.085 --> 00:50:38.485
<v Speaker 1>are you contained

00:50:38.550 --> 00:50:39.510
<v Speaker 1>binaries?

00:50:41.590 --> 00:50:42.310
<v Speaker 1>Are

00:50:42.870 --> 00:50:44.790
<v Speaker 1>you familiar with are you contained?

00:50:45.670 --> 00:50:47.590
<v Speaker 0>I am a little bit. Yes.

00:50:48.150 --> 00:50:48.630
<v Speaker 0>Okay.

00:50:51.815 --> 00:50:53.494
<v Speaker 0>Has our SSH

00:50:55.494 --> 00:50:56.295
<v Speaker 0>process

00:50:56.775 --> 00:50:57.655
<v Speaker 0>been replaced?

00:51:05.000 --> 00:51:06.599
<v Speaker 0>I feel like I wanna go into the

00:51:06.599 --> 00:51:08.359
<v Speaker 0>proc and start digging her in. You know

00:51:08.359 --> 00:51:11.240
<v Speaker 1>what? If if sick if sick honk has

00:51:11.240 --> 00:51:12.920
<v Speaker 1>replaced that one,

00:51:13.720 --> 00:51:15.640
<v Speaker 1>we are really screwed. We have pretty much

00:51:15.640 --> 00:51:16.839
<v Speaker 1>no chance to

00:51:17.000 --> 00:51:18.680
<v Speaker 1>no. That's

00:51:21.115 --> 00:51:24.075
<v Speaker 1>so that's your hypothesis. You you you think

00:51:24.075 --> 00:51:24.635
<v Speaker 1>that

00:51:25.195 --> 00:51:26.555
<v Speaker 1>the SSH

00:51:26.555 --> 00:51:27.755
<v Speaker 1>team is

00:51:28.475 --> 00:51:30.795
<v Speaker 1>not what we think it is.

00:51:32.880 --> 00:51:34.079
<v Speaker 0>I mean Is that your

00:51:34.880 --> 00:51:36.000
<v Speaker 0>I don't know.

00:51:39.760 --> 00:51:41.520
<v Speaker 1>Do you think like, I'm

00:51:41.680 --> 00:51:44.079
<v Speaker 1>pretty sure We do. Our root fail system

00:51:44.079 --> 00:51:46.994
<v Speaker 0>is an overlay fail system. We yeah. This

00:51:46.994 --> 00:51:49.315
<v Speaker 0>SSH has not taken us into the host.

00:51:50.275 --> 00:51:51.795
<v Speaker 0>Because

00:51:52.194 --> 00:51:54.515
<v Speaker 0>our root fail system is an overlay. We've

00:51:54.515 --> 00:51:55.155
<v Speaker 0>got

00:51:56.275 --> 00:51:58.194
<v Speaker 0>c groups leaking through.

00:52:01.539 --> 00:52:02.740
<v Speaker 0>Yeah. This is

00:52:03.539 --> 00:52:04.340
<v Speaker 0>interesting.

00:52:10.339 --> 00:52:11.140
<v Speaker 0>Let's

00:52:11.140 --> 00:52:12.660
<v Speaker 0>run a PSWW.

00:52:12.660 --> 00:52:14.020
<v Speaker 0>That should give us that without

00:52:14.420 --> 00:52:17.955
<v Speaker 0>cutting anything off. So that's our SSHD binary.

00:52:18.914 --> 00:52:19.714
<v Speaker 1>Right.

00:52:19.714 --> 00:52:21.715
<v Speaker 0>Which doesn't look right either.

00:52:26.515 --> 00:52:28.355
<v Speaker 0>And there's our yeah, we're

00:52:29.910 --> 00:52:31.670
<v Speaker 0>I'm not really sure I know where to

00:52:31.670 --> 00:52:33.349
<v Speaker 0>start with this one. How do we get

00:52:33.349 --> 00:52:34.550
<v Speaker 0>out of this container?

00:52:36.150 --> 00:52:38.150
<v Speaker 0>Well, oh, we can do that, right?

00:52:38.470 --> 00:52:39.829
<v Speaker 0>Because our cube control worked.

00:52:43.905 --> 00:52:45.585
<v Speaker 0>So we can get on the host

00:52:47.185 --> 00:52:49.025
<v Speaker 0>with a privileged pod

00:52:49.025 --> 00:52:50.385
<v Speaker 0>and fix SSH.

00:52:50.385 --> 00:52:51.505
<v Speaker 0>Well,

00:52:53.105 --> 00:52:55.025
<v Speaker 1>let's give it a try. Why not? Yeah.

00:52:56.465 --> 00:52:58.705
<v Speaker 1>If that is if that is

00:52:59.820 --> 00:53:02.460
<v Speaker 1>your hypothesis list, let's check it. Or do

00:53:02.460 --> 00:53:05.180
<v Speaker 0>you agree with me? Do you have something

00:53:05.020 --> 00:53:05.500
<v Speaker 0>Yeah.

00:53:06.380 --> 00:53:08.540
<v Speaker 1>No. That like I haven't seen anything.

00:53:09.900 --> 00:53:11.340
<v Speaker 1>Well, I just We

00:53:12.140 --> 00:53:13.905
<v Speaker 0>we can run git pods, we can run

00:53:13.905 --> 00:53:16.625
<v Speaker 0>git nodes. Our control plane is fine. Obviously,

00:53:16.625 --> 00:53:17.985
<v Speaker 0>SSH doesn't work.

00:53:18.385 --> 00:53:20.785
<v Speaker 0>We were in a container. They've

00:53:20.785 --> 00:53:23.745
<v Speaker 0>got themselves access to the host, replaced SSH.

00:53:23.745 --> 00:53:24.945
<v Speaker 1>Right. So I think if we just run

00:53:24.945 --> 00:53:25.905
<v Speaker 0>a privileged container,

00:53:26.380 --> 00:53:29.260
<v Speaker 0>get onto the host, try and fix SSH.

00:53:32.540 --> 00:53:33.180
<v Speaker 1>Right.

00:53:33.820 --> 00:53:36.060
<v Speaker 1>I would say let's give it a try,

00:53:36.060 --> 00:53:36.940
<v Speaker 1>but I'm

00:53:39.335 --> 00:53:41.655
<v Speaker 1>wondering if if they really are

00:53:41.815 --> 00:53:43.494
<v Speaker 1>that nice to us.

00:53:44.135 --> 00:53:44.694
<v Speaker 1>But we

00:53:46.375 --> 00:53:48.135
<v Speaker 1>well, let's give it a try. Why not?

00:53:48.135 --> 00:53:48.695
<v Speaker 1>Yeah.

00:53:53.335 --> 00:53:54.375
<v Speaker 1>Let's

00:53:55.470 --> 00:53:57.950
<v Speaker 0>okay. So let's get a deployment. Yaml. If

00:53:57.950 --> 00:53:59.070
<v Speaker 0>we are if we are going on the

00:53:59.070 --> 00:54:00.990
<v Speaker 0>wrong path, sec honk, please

00:54:01.390 --> 00:54:02.350
<v Speaker 0>interject.

00:54:04.190 --> 00:54:06.350
<v Speaker 0>Help us out. Yeah. Yeah. Give give us

00:54:06.350 --> 00:54:07.950
<v Speaker 1>a little bit of of feedback if we

00:54:07.950 --> 00:54:10.424
<v Speaker 1>are working in the right direction or not.

00:54:10.424 --> 00:54:13.224
<v Speaker 1>That would So we can create a deployment.

00:54:13.224 --> 00:54:15.305
<v Speaker 1>I know. We can spec this out.

00:54:16.184 --> 00:54:18.265
<v Speaker 0>I'm not really caring what it's called. I

00:54:18.265 --> 00:54:20.984
<v Speaker 0>don't even care what image we particularly run.

00:54:21.305 --> 00:54:22.105
<v Speaker 0>Let's just do

00:54:22.930 --> 00:54:24.610
<v Speaker 0>let's just do it out pane.

00:54:25.490 --> 00:54:28.050
<v Speaker 1>Duffy just gave us a hint saying proxy

00:54:28.050 --> 00:54:30.290
<v Speaker 1>or service and take a peek. Yeah. Why

00:54:30.290 --> 00:54:30.850
<v Speaker 1>not?

00:54:31.330 --> 00:54:32.130
<v Speaker 1>That's

00:54:32.450 --> 00:54:33.490
<v Speaker 1>a low hanging fruit.

00:54:40.075 --> 00:54:42.235
<v Speaker 0>Yeah. Shall we do that? Yeah.

00:54:43.355 --> 00:54:45.675
<v Speaker 0>So pass our SS agent SS agent through

00:54:45.675 --> 00:54:47.035
<v Speaker 0>to one of the working nodes and use

00:54:47.035 --> 00:54:48.155
<v Speaker 0>that to go onto one of the other

00:54:48.155 --> 00:54:49.595
<v Speaker 0>machines. Is that what we're saying?

00:54:51.390 --> 00:54:53.550
<v Speaker 0>Yes. That would work. I mean, think the

00:54:53.550 --> 00:54:55.470
<v Speaker 0>plan of running a privileged container and using

00:54:55.470 --> 00:54:56.829
<v Speaker 0>that to get onto the host is more

00:54:56.829 --> 00:54:58.830
<v Speaker 0>fun. But that would involve Another

00:55:00.030 --> 00:55:00.670
<v Speaker 1>hint.

00:55:00.910 --> 00:55:01.950
<v Speaker 1>Check your deployment.

00:55:03.965 --> 00:55:06.205
<v Speaker 1>We need to see that WordPress site.

00:55:06.285 --> 00:55:07.005
<v Speaker 1>Okay.

00:55:10.685 --> 00:55:11.405
<v Speaker 1>Right.

00:55:11.565 --> 00:55:12.285
<v Speaker 1>Six

00:55:12.845 --> 00:55:13.485
<v Speaker 1>days.

00:55:22.530 --> 00:55:23.570
<v Speaker 0>Port forward.

00:55:24.290 --> 00:55:25.970
<v Speaker 1>Yeah. That's the cluster IP.

00:55:26.369 --> 00:55:28.130
<v Speaker 1>I noticed. I used to extend all IP

00:55:28.130 --> 00:55:29.010
<v Speaker 0>but Yeah.

00:55:30.050 --> 00:55:32.290
<v Speaker 1>It's just I can't remember if I actually

00:55:32.290 --> 00:55:33.250
<v Speaker 0>sell working anyways.

00:55:37.995 --> 00:55:41.195
<v Speaker 1>Yeah. Of course. Of course. Thank you. Thank

00:55:41.195 --> 00:55:43.515
<v Speaker 1>you. Thank you. Thanks. Thanks, honk. We have

00:55:43.515 --> 00:55:45.435
<v Speaker 1>been Always a pleasure. Honk.

00:55:46.155 --> 00:55:47.195
<v Speaker 1>We have been honked.

00:55:47.940 --> 00:55:49.940
<v Speaker 1>Okay. So you had your fun. Thank you

00:55:49.940 --> 00:55:52.500
<v Speaker 1>very much. I'm I'm kind of like, you

00:55:52.500 --> 00:55:54.900
<v Speaker 1>know, trusting in Duffy here. Kind of like,

00:55:54.900 --> 00:55:57.540
<v Speaker 1>he he was just messing with us. That

00:55:57.540 --> 00:55:59.220
<v Speaker 1>was awesome. Thank you. Okay.

00:56:00.395 --> 00:56:02.474
<v Speaker 0>So we can Good thing that'll be full

00:56:02.474 --> 00:56:04.635
<v Speaker 1>and paid forward. That's fine. Let's see if

00:56:04.635 --> 00:56:06.795
<v Speaker 0>our kind of workers are affected. I'm assuming

00:56:06.795 --> 00:56:09.515
<v Speaker 0>with the fact that they're listed and teleport

00:56:09.515 --> 00:56:11.194
<v Speaker 0>means they're yeah. They're system d and stuff.

00:56:11.194 --> 00:56:11.595
<v Speaker 0>Okay.

00:56:12.075 --> 00:56:13.940
<v Speaker 0>How do I how do I put through

00:56:13.940 --> 00:56:15.700
<v Speaker 0>my SS agent again? Or how do I

00:56:15.700 --> 00:56:17.220
<v Speaker 0>proxy for a machine? I can never remember

00:56:17.220 --> 00:56:18.260
<v Speaker 0>the flags for this.

00:56:19.299 --> 00:56:20.180
<v Speaker 0>Wow.

00:56:20.740 --> 00:56:22.020
<v Speaker 0>Forward agent.

00:56:22.020 --> 00:56:23.220
<v Speaker 0>No. Minus

00:56:23.460 --> 00:56:24.980
<v Speaker 1>t minus t, was it?

00:56:29.465 --> 00:56:30.905
<v Speaker 0>What's the flag?

00:56:33.545 --> 00:56:35.545
<v Speaker 0>We could just do forward agent. There must

00:56:35.545 --> 00:56:36.985
<v Speaker 0>be a flag for that though.

00:56:39.385 --> 00:56:40.345
<v Speaker 1>Scroll up again.

00:56:55.000 --> 00:56:56.440
<v Speaker 0>Alright. Thanks for the hint,

00:56:57.174 --> 00:56:58.055
<v Speaker 0>Duffy.

00:56:58.615 --> 00:57:00.375
<v Speaker 0>So if we go back into this, this

00:57:00.375 --> 00:57:01.494
<v Speaker 0>is our I just wanna make sure it's

00:57:01.494 --> 00:57:03.015
<v Speaker 0>still the broken one. No, that was the

00:57:03.015 --> 00:57:03.734
<v Speaker 0>other one.

00:57:06.135 --> 00:57:07.414
<v Speaker 0>Is that the broken one?

00:57:09.350 --> 00:57:10.070
<v Speaker 0>Yeah.

00:57:10.390 --> 00:57:12.790
<v Speaker 0>Duffy suggested using a different port number.

00:57:16.550 --> 00:57:18.310
<v Speaker 0>Oh, it's a small p.

00:57:18.950 --> 00:57:19.590
<v Speaker 0>Yeah.

00:57:20.710 --> 00:57:21.190
<v Speaker 0>Okay.

00:57:22.485 --> 00:57:23.285
<v Speaker 0>Phew.

00:57:23.525 --> 00:57:24.245
<v Speaker 1>Okay.

00:57:29.605 --> 00:57:31.765
<v Speaker 0>Okay. We're on the host.

00:57:32.645 --> 00:57:33.845
<v Speaker 0>I'm gonna

00:57:35.990 --> 00:57:38.470
<v Speaker 0>they disabled my thing. Okay.

00:57:40.790 --> 00:57:43.270
<v Speaker 0>Let's get us back onto our shared terminal.

00:57:50.755 --> 00:57:52.995
<v Speaker 0>Okay. We have our control plane node.

00:57:53.315 --> 00:57:55.715
<v Speaker 1>Okay. Alright. You should be able to join

00:57:55.715 --> 00:57:57.635
<v Speaker 0>the session. It's gonna break my screen

00:57:58.115 --> 00:57:58.835
<v Speaker 0>maybe.

00:57:59.555 --> 00:58:00.355
<v Speaker 1>Let's see.

00:58:01.410 --> 00:58:02.609
<v Speaker 1>Did it break anything?

00:58:03.650 --> 00:58:05.490
<v Speaker 0>No. It's it's still working.

00:58:05.730 --> 00:58:07.890
<v Speaker 1>Looks like it works. Okay.

00:58:08.049 --> 00:58:10.609
<v Speaker 1>What create pod objects? Well, a lot a

00:58:10.609 --> 00:58:12.369
<v Speaker 1>lot of things create pod objects.

00:58:12.450 --> 00:58:14.849
<v Speaker 1>Right? Replication controllers

00:58:15.734 --> 00:58:17.255
<v Speaker 1>or replica sets.

00:58:22.214 --> 00:58:23.494
<v Speaker 1>Well, let's have a look.

00:58:24.135 --> 00:58:25.175
<v Speaker 0>Oh, sorry.

00:58:25.414 --> 00:58:27.095
<v Speaker 0>I'll I'll lay off the tape in.

00:58:28.295 --> 00:58:29.815
<v Speaker 0>You'll need to set an alias for key

00:58:29.815 --> 00:58:30.055
<v Speaker 0>though.

00:58:31.410 --> 00:58:32.290
<v Speaker 1>Words.

00:58:32.530 --> 00:58:33.970
<v Speaker 1>I can't have control.

00:58:36.530 --> 00:58:39.250
<v Speaker 0>And then dash dash kube config slash e

00:58:39.250 --> 00:58:41.730
<v Speaker 0>c c kubernetes admin. I

00:58:41.730 --> 00:58:42.930
<v Speaker 0>have that somewhere.

00:58:43.730 --> 00:58:45.285
<v Speaker 0>Do you want me to do it? You

00:58:45.285 --> 00:58:47.125
<v Speaker 0>got it. Yeah. If you if you have

00:58:47.125 --> 00:58:48.005
<v Speaker 1>it somewhere.

00:58:49.045 --> 00:58:50.165
<v Speaker 1>Putting everything.

00:58:50.724 --> 00:58:52.565
<v Speaker 0>I just I I'm I'm getting really good

00:58:52.565 --> 00:58:53.525
<v Speaker 0>at typing this one line.

00:58:58.550 --> 00:59:01.030
<v Speaker 0>Does it need Yeah. You need yep.

00:59:01.510 --> 00:59:05.190
<v Speaker 1>That's right. There you go. Okay. Okay. Cool.

00:59:05.590 --> 00:59:06.390
<v Speaker 1>So

00:59:07.750 --> 00:59:08.150
<v Speaker 1>Okay.

00:59:14.595 --> 00:59:15.555
<v Speaker 1>This is

00:59:17.635 --> 00:59:18.355
<v Speaker 1>okay.

00:59:18.994 --> 00:59:19.635
<v Speaker 1>And

00:59:20.675 --> 00:59:22.115
<v Speaker 1>rapid cassettes.

00:59:22.115 --> 00:59:22.755
<v Speaker 1>So

00:59:23.715 --> 00:59:24.915
<v Speaker 1>there is

00:59:25.955 --> 00:59:26.835
<v Speaker 1>one

00:59:28.390 --> 00:59:29.430
<v Speaker 1>that's

00:59:29.510 --> 00:59:31.910
<v Speaker 1>so something changed there. Right?

00:59:32.710 --> 00:59:35.990
<v Speaker 1>So Six days ago versus forty five hours.

00:59:35.990 --> 00:59:38.070
<v Speaker 0>It looks like the scale down my replica

00:59:38.070 --> 00:59:40.310
<v Speaker 0>set and then spun up their own replica

00:59:40.310 --> 00:59:42.150
<v Speaker 0>set with the desired one, which must be

00:59:42.150 --> 00:59:42.950
<v Speaker 0>a broken one.

00:59:43.885 --> 00:59:44.765
<v Speaker 1>Mhmm.

00:59:46.285 --> 00:59:48.365
<v Speaker 0>Can you do a get replica sets?

00:59:50.685 --> 00:59:51.805
<v Speaker 1>Purchase it.

00:59:52.445 --> 00:59:53.165
<v Speaker 0>Yeah.

00:59:53.485 --> 00:59:53.965
<v Speaker 0>Just that.

00:59:56.609 --> 00:59:58.530
<v Speaker 0>Okay.

01:00:01.329 --> 01:00:02.289
<v Speaker 1>I think I said

01:00:03.569 --> 01:00:05.730
<v Speaker 0>I just did get alright. Does that return?

01:00:05.730 --> 01:00:06.210
<v Speaker 0>Yeah.

01:00:07.650 --> 01:00:09.730
<v Speaker 0>Right. Oh, that was already doing it. Right.

01:00:09.730 --> 01:00:09.890
<v Speaker 0>Okay.

01:00:12.925 --> 01:00:13.725
<v Speaker 0>Let's

01:00:15.165 --> 01:00:16.525
<v Speaker 0>I mean, I don't I mean, can we

01:00:16.525 --> 01:00:18.205
<v Speaker 0>just delete their one and and scale up

01:00:18.205 --> 01:00:19.165
<v Speaker 0>our old one?

01:00:20.365 --> 01:00:22.925
<v Speaker 0>Like, that would be a Well, if the

01:00:22.925 --> 01:00:24.045
<v Speaker 1>deployment

01:00:24.205 --> 01:00:27.680
<v Speaker 1>that owns that replica set hasn't been tampered

01:00:27.680 --> 01:00:30.640
<v Speaker 1>with, then, you know, one one only lives

01:00:30.640 --> 01:00:31.360
<v Speaker 1>once.

01:00:32.000 --> 01:00:34.400
<v Speaker 0>Yes. Slash Hammer. Come on. Embrace team slash.

01:00:34.400 --> 01:00:37.119
<v Speaker 1>Yeah. Why why not? Right? Do I have

01:00:37.119 --> 01:00:38.319
<v Speaker 1>to do yeah. I do have to do

01:00:38.319 --> 01:00:40.160
<v Speaker 1>a copy paste here. Right? Yeah.

01:00:47.705 --> 01:00:48.585
<v Speaker 1>Nice.

01:00:49.705 --> 01:00:50.505
<v Speaker 1>Okay.

01:00:50.905 --> 01:00:55.065
<v Speaker 0>So Kubernetes admin cannot delete replica sets.

01:00:55.225 --> 01:00:56.185
<v Speaker 0>Nice. Thanks.

01:01:03.160 --> 01:01:05.640
<v Speaker 0>So, shall we check our Rawkode binding, our

01:01:05.640 --> 01:01:07.400
<v Speaker 0>rule bindings Yeah. For the user?

01:01:07.480 --> 01:01:07.800
<v Speaker 1>Yeah.

01:01:08.785 --> 01:01:10.145
<v Speaker 1>Yeah. Let's do that.

01:01:10.545 --> 01:01:11.345
<v Speaker 0>Alright.

01:01:11.345 --> 01:01:14.385
<v Speaker 0>So, we should have a cluster rule

01:01:14.705 --> 01:01:15.665
<v Speaker 0>binding.

01:01:18.945 --> 01:01:20.545
<v Speaker 1>No. Of course, we're not allowed to do

01:01:20.545 --> 01:01:21.105
<v Speaker 1>anything. Right?

01:01:24.750 --> 01:01:26.830
<v Speaker 0>Nope. Sorry. I I dual

01:01:27.069 --> 01:01:27.869
<v Speaker 0>taping.

01:01:31.230 --> 01:01:32.830
<v Speaker 1>Platform. Okay. Anyways.

01:01:33.630 --> 01:01:35.710
<v Speaker 0>Let's look at this deployment we've got. Let's

01:01:35.710 --> 01:01:35.950
<v Speaker 0>see.

01:01:43.595 --> 01:01:46.315
<v Speaker 1>Yeah. You see that he or they didn't

01:01:47.195 --> 01:01:47.995
<v Speaker 1>touch

01:01:48.315 --> 01:01:50.980
<v Speaker 1>the deployment. Right? The deployment is still the

01:01:50.980 --> 01:01:53.140
<v Speaker 1>the original one six days ago.

01:01:53.700 --> 01:01:55.700
<v Speaker 1>It's really just a replica set.

01:01:58.260 --> 01:01:58.660
<v Speaker 1>Right?

01:02:03.595 --> 01:02:05.035
<v Speaker 1>Aren't you rude, love?

01:02:05.835 --> 01:02:07.595
<v Speaker 0>There is a yeah.

01:02:08.075 --> 01:02:09.995
<v Speaker 0>Duffy taught me this command and he's also

01:02:09.995 --> 01:02:11.675
<v Speaker 0>just been very kind enough to put it

01:02:11.675 --> 01:02:12.235
<v Speaker 0>here.

01:02:12.875 --> 01:02:14.075
<v Speaker 0>The off can I?

01:02:16.560 --> 01:02:17.280
<v Speaker 0>Let's see.

01:02:32.565 --> 01:02:34.565
<v Speaker 1>So should those be stars

01:02:35.765 --> 01:02:37.685
<v Speaker 1>or is Blank also a star?

01:02:39.205 --> 01:02:40.805
<v Speaker 1>Oh, no. Wait. We've only got get list

01:02:40.805 --> 01:02:42.245
<v Speaker 0>watch and all of this. Yeah.

01:02:42.970 --> 01:02:43.370
<v Speaker 1>Yeah.

01:03:04.815 --> 01:03:06.575
<v Speaker 0>Okay. Something. Let's

01:03:08.815 --> 01:03:10.494
<v Speaker 0>I will not be beaten by Geese.

01:03:10.930 --> 01:03:11.570
<v Speaker 0>So

01:03:17.570 --> 01:03:19.730
<v Speaker 0>So, there's no touch to adminconf.

01:03:21.410 --> 01:03:24.050
<v Speaker 0>Let's check the API server configuration.

01:03:27.655 --> 01:03:29.335
<v Speaker 0>The

01:03:29.335 --> 01:03:30.535
<v Speaker 0>plot thickens.

01:03:31.895 --> 01:03:32.535
<v Speaker 0>So

01:03:36.295 --> 01:03:38.055
<v Speaker 0>there must be something here

01:03:38.214 --> 01:03:39.655
<v Speaker 0>that is modifying

01:03:39.655 --> 01:03:40.615
<v Speaker 0>the way.

01:03:47.630 --> 01:03:50.430
<v Speaker 1>Openload our back. Looks okay.

01:03:50.510 --> 01:03:51.710
<v Speaker 1>Not privileged.

01:03:53.070 --> 01:03:54.750
<v Speaker 1>Do we have any PSPs?

01:04:08.260 --> 01:04:10.580
<v Speaker 1>Well, I mean, the image doesn't

01:04:10.580 --> 01:04:12.420
<v Speaker 1>look very trustworthy,

01:04:12.420 --> 01:04:13.220
<v Speaker 1>does it now?

01:04:15.620 --> 01:04:17.780
<v Speaker 1>I mean How's it I missed that?

01:04:18.740 --> 01:04:19.300
<v Speaker 1>I mean,

01:04:20.945 --> 01:04:22.385
<v Speaker 1>don't take it personally Duffy but

01:04:24.465 --> 01:04:25.025
<v Speaker 1>Right?

01:04:25.665 --> 01:04:26.385
<v Speaker 1>Yeah.

01:04:28.145 --> 01:04:30.145
<v Speaker 1>Maybe let's let's replace that with a proper

01:04:30.145 --> 01:04:32.305
<v Speaker 1>like upstream clean,

01:04:33.185 --> 01:04:35.510
<v Speaker 1>you know, real API server.

01:04:35.510 --> 01:04:36.230
<v Speaker 1>Yeah.

01:04:36.550 --> 01:04:37.910
<v Speaker 0>Okay. I actually don't know what that is

01:04:37.910 --> 01:04:39.030
<v Speaker 0>off the top of my head to be

01:04:39.030 --> 01:04:39.590
<v Speaker 0>fair.

01:04:41.830 --> 01:04:42.550
<v Speaker 0>Kubernetes.

01:04:45.510 --> 01:04:48.470
<v Speaker 1>Probably cube dash API server but

01:04:50.545 --> 01:04:51.905
<v Speaker 1>probably the

01:04:52.065 --> 01:04:52.865
<v Speaker 1>the full

01:04:52.945 --> 01:04:53.745
<v Speaker 1>URL.

01:04:56.785 --> 01:04:58.145
<v Speaker 1>Sneaky bastard.

01:04:58.865 --> 01:05:01.825
<v Speaker 1>You're placing the API server there. I'm gonna

01:05:01.825 --> 01:05:02.945
<v Speaker 0>assume it's gonna be the one with the

01:05:02.945 --> 01:05:04.300
<v Speaker 0>most. No, it's not the one with the

01:05:04.300 --> 01:05:05.100
<v Speaker 0>most downloads.

01:05:05.420 --> 01:05:06.940
<v Speaker 0>Oh, well, maybe it's just not on Docker

01:05:06.940 --> 01:05:07.500
<v Speaker 0>Hub.

01:05:09.579 --> 01:05:11.180
<v Speaker 0>Let's check the oh no.

01:05:13.020 --> 01:05:14.619
<v Speaker 0>What would our API server be?

01:05:17.185 --> 01:05:19.425
<v Speaker 0>I'm gonna look it up. Hold on.

01:05:23.505 --> 01:05:25.665
<v Speaker 0>IP address from the other cluster.

01:05:26.625 --> 01:05:27.825
<v Speaker 0>That's where it's coming to.

01:05:34.030 --> 01:05:34.910
<v Speaker 0>Okay.

01:05:34.990 --> 01:05:35.710
<v Speaker 0>So

01:05:35.870 --> 01:05:37.790
<v Speaker 0>let me just do this quickly.

01:05:38.350 --> 01:05:38.910
<v Speaker 0>Yes.

01:05:47.165 --> 01:05:48.205
<v Speaker 0>Kubernetes

01:05:48.925 --> 01:05:49.805
<v Speaker 0>manifests

01:05:50.045 --> 01:05:51.645
<v Speaker 0>cube API.

01:05:53.565 --> 01:05:55.725
<v Speaker 0>The image is very cool.

01:05:56.400 --> 01:05:57.520
<v Speaker 0>And

01:05:59.839 --> 01:06:02.079
<v Speaker 0>let's go back to our shared terminal. We

01:06:02.079 --> 01:06:03.840
<v Speaker 0>can fix it here.

01:06:07.920 --> 01:06:08.640
<v Speaker 0>Okay.

01:06:08.880 --> 01:06:09.600
<v Speaker 0>Cool.

01:06:10.000 --> 01:06:10.480
<v Speaker 1>Now.

01:06:14.474 --> 01:06:16.315
<v Speaker 0>Running for 62.

01:06:16.315 --> 01:06:17.915
<v Speaker 0>So kill dash one,

01:06:18.555 --> 01:06:20.075
<v Speaker 0>not nine. So

01:06:20.395 --> 01:06:23.035
<v Speaker 1>Duffy says the rest is fine, which means

01:06:23.035 --> 01:06:25.275
<v Speaker 1>we should not trust him and double check

01:06:25.275 --> 01:06:25.994
<v Speaker 1>everything else.

01:06:26.790 --> 01:06:29.750
<v Speaker 1>Like, that's just that's just me being paranoid.

01:06:32.710 --> 01:06:33.350
<v Speaker 0>Okay.

01:06:33.670 --> 01:06:35.430
<v Speaker 0>So we've replaced the image

01:06:35.510 --> 01:06:37.190
<v Speaker 0>and what you were trying to do prior

01:06:37.190 --> 01:06:39.590
<v Speaker 0>to that was delete this new Right. Replica

01:06:39.590 --> 01:06:42.635
<v Speaker 0>set. Right. In the hope that

01:06:43.835 --> 01:06:45.195
<v Speaker 1>still for a bit. Nice.

01:06:46.475 --> 01:06:48.075
<v Speaker 1>Did it pick it up? Do we actually

01:06:48.395 --> 01:06:49.915
<v Speaker 1>are we running the new

01:06:50.155 --> 01:06:52.635
<v Speaker 1>API server? The sec up may have just

01:06:52.715 --> 01:06:53.355
<v Speaker 0>I was

01:06:55.640 --> 01:06:56.920
<v Speaker 1>was looking at the

01:06:57.160 --> 01:06:58.760
<v Speaker 1>at the chat. I didn't

01:06:59.800 --> 01:07:01.640
<v Speaker 1>follow along if you actually

01:07:01.720 --> 01:07:02.920
<v Speaker 1>applied that.

01:07:04.120 --> 01:07:05.000
<v Speaker 0>Well,

01:07:05.000 --> 01:07:07.160
<v Speaker 0>I modified the manifest and I sent a

01:07:07.160 --> 01:07:09.875
<v Speaker 0>sec up to the API server, but that

01:07:09.875 --> 01:07:11.395
<v Speaker 0>one actually work as the sync up to

01:07:11.395 --> 01:07:12.595
<v Speaker 0>the API server.

01:07:15.234 --> 01:07:16.995
<v Speaker 1>Can we just do a PS and see?

01:07:17.555 --> 01:07:18.275
<v Speaker 1>Oh, yeah.

01:07:18.515 --> 01:07:20.194
<v Speaker 0>Oh, yeah. It's it's there, but Oh, yeah.

01:07:20.194 --> 01:07:21.474
<v Speaker 0>You know, it's just a thing. I don't

01:07:21.474 --> 01:07:22.835
<v Speaker 0>even know if it's using the right image.

01:07:27.630 --> 01:07:28.270
<v Speaker 0>Now,

01:07:28.510 --> 01:07:29.870
<v Speaker 0>when we try and speak to the API

01:07:29.870 --> 01:07:31.390
<v Speaker 0>server, we could be getting thrown to a

01:07:31.390 --> 01:07:32.910
<v Speaker 0>different machine. So, I guess we're gonna have

01:07:32.910 --> 01:07:35.230
<v Speaker 0>to SSH onto the other ones and fix

01:07:35.230 --> 01:07:36.110
<v Speaker 0>the image there too.

01:07:40.025 --> 01:07:42.025
<v Speaker 0>So, me grab the IP addresses.

01:07:42.825 --> 01:07:43.545
<v Speaker 1>Okay.

01:07:45.545 --> 01:07:46.105
<v Speaker 0>So,

01:07:46.424 --> 01:07:47.545
<v Speaker 0>SSH

01:07:47.545 --> 01:07:48.425
<v Speaker 0>port

01:07:50.025 --> 01:07:51.385
<v Speaker 0>22

01:07:55.410 --> 01:07:56.530
<v Speaker 0>Kubernetes

01:07:57.490 --> 01:07:58.450
<v Speaker 0>manifests

01:07:58.450 --> 01:07:59.890
<v Speaker 0>API server

01:08:00.450 --> 01:08:01.970
<v Speaker 0>that he changed them all,

01:08:03.090 --> 01:08:05.410
<v Speaker 0>that they changed them all. Sorry, forget your

01:08:05.410 --> 01:08:07.865
<v Speaker 0>team just because Duffy's comment.

01:08:09.145 --> 01:08:10.505
<v Speaker 1>Copy

01:08:13.065 --> 01:08:13.785
<v Speaker 0>that.

01:08:16.265 --> 01:08:16.904
<v Speaker 1>Good.

01:08:18.024 --> 01:08:19.545
<v Speaker 0>Okay.

01:08:24.160 --> 01:08:25.520
<v Speaker 0>Let's restart this one.

01:08:26.720 --> 01:08:29.120
<v Speaker 1>Yeah. Why not? One more tab and we

01:08:29.120 --> 01:08:31.359
<v Speaker 0>need to do the other control plane node.

01:08:33.600 --> 01:08:35.920
<v Speaker 1>Now, we also found a subtitle for clustered.

01:08:35.920 --> 01:08:37.439
<v Speaker 1>It's the sledgehammer parade.

01:08:42.314 --> 01:08:43.915
<v Speaker 1>Alright. Manifest.

01:08:43.915 --> 01:08:47.114
<v Speaker 0>Kip APIs there were image.

01:08:48.395 --> 01:08:49.194
<v Speaker 0>Delete

01:08:49.354 --> 01:08:51.195
<v Speaker 0>and copy the image name.

01:08:52.050 --> 01:08:53.010
<v Speaker 0>There we go.

01:08:53.729 --> 01:08:54.290
<v Speaker 1>This

01:08:54.689 --> 01:08:55.810
<v Speaker 1>proves it again.

01:08:56.130 --> 01:08:59.489
<v Speaker 1>Kubernetes engineers are YAML engineers.

01:09:02.450 --> 01:09:03.090
<v Speaker 0>Okay.

01:09:03.649 --> 01:09:04.530
<v Speaker 0>Hopefully,

01:09:04.530 --> 01:09:06.210
<v Speaker 0>that's like I I mean I I'm not

01:09:06.210 --> 01:09:08.425
<v Speaker 0>entirely sure that that's a cup is actually

01:09:08.425 --> 01:09:09.145
<v Speaker 0>doing

01:09:10.025 --> 01:09:12.185
<v Speaker 0>an image pool, but we can run a

01:09:12.185 --> 01:09:13.625
<v Speaker 0>get r s.

01:09:15.064 --> 01:09:16.505
<v Speaker 0>Must be the wrong one.

01:09:17.465 --> 01:09:18.185
<v Speaker 0>Wrong one.

01:09:23.090 --> 01:09:25.409
<v Speaker 0>Oh, no. It's in teleport. No.

01:09:28.210 --> 01:09:29.409
<v Speaker 0>Delete RS.

01:09:30.929 --> 01:09:33.489
<v Speaker 0>No. Okay. So that setup may not actually

01:09:33.489 --> 01:09:35.649
<v Speaker 0>be pulling or expecting the image. It could

01:09:35.649 --> 01:09:36.929
<v Speaker 0>just be restarting the process.

01:09:40.645 --> 01:09:41.925
<v Speaker 0>William suggested

01:09:41.925 --> 01:09:44.485
<v Speaker 0>let's try running the auth

01:09:44.485 --> 01:09:45.285
<v Speaker 0>again.

01:09:45.604 --> 01:09:46.564
<v Speaker 0>Good idea.

01:09:48.085 --> 01:09:50.564
<v Speaker 0>We still got get list watch. So let's

01:09:50.564 --> 01:09:53.285
<v Speaker 0>assume the hypothesis here is that the sec

01:09:53.285 --> 01:09:55.340
<v Speaker 0>hop Well, we has to change the image.

01:09:55.340 --> 01:09:56.139
<v Speaker 1>We

01:09:56.780 --> 01:09:59.420
<v Speaker 1>don't have delete. That's why we can't delete

01:09:59.420 --> 01:10:01.419
<v Speaker 1>it. We only have get list watch.

01:10:03.739 --> 01:10:05.500
<v Speaker 0>Much. Duffies will just look in this file

01:10:05.500 --> 01:10:05.820
<v Speaker 0>again.

01:10:12.965 --> 01:10:14.565
<v Speaker 0>Quite a blatant

01:10:14.565 --> 01:10:15.765
<v Speaker 0>hint. Wow.

01:10:17.685 --> 01:10:19.605
<v Speaker 0>Okay. So I knew there. Mean

01:10:21.400 --> 01:10:24.119
<v Speaker 0>What we wanna do is check our kubelet

01:10:24.200 --> 01:10:25.239
<v Speaker 0>configuration.

01:10:28.440 --> 01:10:31.320
<v Speaker 0>Let's see if the static manifest path has

01:10:31.320 --> 01:10:32.040
<v Speaker 0>been changed.

01:10:35.205 --> 01:10:37.284
<v Speaker 0>Let's look at the kubeletconf.

01:10:42.165 --> 01:10:44.005
<v Speaker 0>Won't be anything in there actually, that's silly.

01:10:46.370 --> 01:10:48.130
<v Speaker 0>So we need to look in the

01:10:48.450 --> 01:10:49.409
<v Speaker 0>flags

01:10:49.650 --> 01:10:52.210
<v Speaker 0>and maybe this configuration

01:10:52.450 --> 01:10:54.210
<v Speaker 0>or if I is it this one?

01:10:54.530 --> 01:10:56.290
<v Speaker 0>I don't know. I'll just check them all.

01:11:01.795 --> 01:11:04.034
<v Speaker 0>You fail. Alright. Next.

01:11:05.155 --> 01:11:06.114
<v Speaker 0>This one.

01:11:11.635 --> 01:11:12.675
<v Speaker 0>Manifest.

01:11:12.835 --> 01:11:13.315
<v Speaker 0>Nope.

01:11:17.050 --> 01:11:19.369
<v Speaker 0>Alright. Let's check the flags,

01:11:19.850 --> 01:11:21.369
<v Speaker 0>etcetera, default.

01:11:25.610 --> 01:11:26.650
<v Speaker 0>What was that out there?

01:11:36.565 --> 01:11:37.445
<v Speaker 0>Oh, garlic.

01:11:41.980 --> 01:11:42.699
<v Speaker 1>It's probably

01:11:44.300 --> 01:11:45.019
<v Speaker 0>Nothing.

01:11:47.500 --> 01:11:49.260
<v Speaker 0>Where would the static manifest?

01:11:49.659 --> 01:11:51.260
<v Speaker 0>Where's that path configured?

01:11:51.980 --> 01:11:53.739
<v Speaker 0>Must be one of those files we've looked

01:11:53.739 --> 01:11:56.300
<v Speaker 0>in. Let's run a status

01:11:56.705 --> 01:11:58.225
<v Speaker 0>on our kubelet.

01:12:05.825 --> 01:12:06.545
<v Speaker 0>This

01:12:06.865 --> 01:12:07.905
<v Speaker 0>service file.

01:12:15.080 --> 01:12:16.920
<v Speaker 0>Oh, wait, there's logs there too.

01:12:19.640 --> 01:12:21.240
<v Speaker 0>I feel like I'm chasing my tail.

01:12:28.485 --> 01:12:30.645
<v Speaker 1>Brent just pointed out container

01:12:30.645 --> 01:12:32.965
<v Speaker 1>path looked off. Okay.

01:12:52.835 --> 01:12:54.114
<v Speaker 0>Alright. So

01:12:55.235 --> 01:12:57.074
<v Speaker 0>did I miss that in the

01:12:57.395 --> 01:12:58.914
<v Speaker 0>the configs?

01:13:03.554 --> 01:13:04.835
<v Speaker 1>I certainly missed it.

01:13:12.639 --> 01:13:15.359
<v Speaker 1>Whatever. Let's let's make I

01:13:16.239 --> 01:13:17.920
<v Speaker 0>searched for manifest. I should have set for

01:13:17.920 --> 01:13:19.039
<v Speaker 0>static. Okay.

01:13:19.565 --> 01:13:22.284
<v Speaker 0>Right. Well, we've already updated the image and

01:13:22.284 --> 01:13:23.725
<v Speaker 0>I don't wanna have to do that again.

01:13:23.725 --> 01:13:25.965
<v Speaker 0>So I'm going back to this. Yeah.

01:13:27.165 --> 01:13:28.445
<v Speaker 1>Kudos

01:13:28.445 --> 01:13:29.965
<v Speaker 1>to Eagle Eye.

01:13:30.125 --> 01:13:30.684
<v Speaker 1>Thank

01:13:31.804 --> 01:13:32.364
<v Speaker 1>you very much.

01:13:33.360 --> 01:13:35.199
<v Speaker 0>Alright. And then we

01:13:35.199 --> 01:13:37.040
<v Speaker 0>will need to restart the kubelet because of

01:13:37.040 --> 01:13:38.079
<v Speaker 0>that. We

01:13:41.760 --> 01:13:43.280
<v Speaker 0>have a new API server.

01:13:45.364 --> 01:13:46.885
<v Speaker 0>We still have no permissions.

01:13:48.645 --> 01:13:49.925
<v Speaker 0>And do we have a new API server?

01:13:49.925 --> 01:13:52.085
<v Speaker 0>Is that nineteen seconds or nineteen minutes? That's

01:13:53.205 --> 01:13:54.565
<v Speaker 0>Nineteen minutes. Okay.

01:13:55.844 --> 01:13:57.445
<v Speaker 1>That's still the old one. Right?

01:13:59.070 --> 01:14:01.389
<v Speaker 1>Eighteen o five. That was the old one.

01:14:01.389 --> 01:14:01.789
<v Speaker 1>Yeah.

01:14:03.230 --> 01:14:05.149
<v Speaker 1>Yeah. That looks better.

01:14:05.389 --> 01:14:07.309
<v Speaker 1>Alright. Let's give it a try.

01:14:09.869 --> 01:14:10.349
<v Speaker 1>Nope.

01:14:12.025 --> 01:14:13.465
<v Speaker 1>I guess we're gonna have to update them

01:14:13.465 --> 01:14:14.264
<v Speaker 0>all. I

01:14:15.945 --> 01:14:18.824
<v Speaker 0>love how it keeps on my actual SSH

01:14:18.824 --> 01:14:21.304
<v Speaker 0>session. It keeps sending me messages.

01:14:23.304 --> 01:14:24.024
<v Speaker 1>Well,

01:14:24.585 --> 01:14:25.144
<v Speaker 1>you have

01:14:25.704 --> 01:14:28.020
<v Speaker 0>What was that fail called? It was the

01:14:28.020 --> 01:14:30.340
<v Speaker 0>barlep tuplet. Okay. I think no one.

01:14:34.180 --> 01:14:36.020
<v Speaker 0>No problem. Yeah.

01:14:38.340 --> 01:14:39.300
<v Speaker 0>Config

01:14:39.540 --> 01:14:40.260
<v Speaker 0>static.

01:14:41.060 --> 01:14:42.100
<v Speaker 0>Oh, that one's okay.

01:14:46.895 --> 01:14:48.255
<v Speaker 0>Vembar

01:14:48.255 --> 01:14:48.895
<v Speaker 0>the

01:14:49.855 --> 01:14:51.215
<v Speaker 0>kubelet config

01:14:51.215 --> 01:14:52.175
<v Speaker 0>static.

01:14:52.175 --> 01:14:53.295
<v Speaker 0>Yep. That one's broken.

01:14:58.739 --> 01:15:00.340
<v Speaker 0>I am not frustrated.

01:15:00.500 --> 01:15:02.019
<v Speaker 0>No, I definitely am.

01:15:04.900 --> 01:15:07.380
<v Speaker 0>It's like, I think every time someone has

01:15:07.380 --> 01:15:10.900
<v Speaker 0>broken a cluster, they have like, maybe it's

01:15:10.275 --> 01:15:11.955
<v Speaker 0>just me. Right? But I I don't think

01:15:11.955 --> 01:15:13.395
<v Speaker 0>I would break all of the the control

01:15:13.395 --> 01:15:15.475
<v Speaker 0>plane nodes. I think I would be more

01:15:15.475 --> 01:15:16.835
<v Speaker 0>forgiving than that. Everyone

01:15:17.475 --> 01:15:18.675
<v Speaker 0>has been on it as a breaker has

01:15:18.675 --> 01:15:20.434
<v Speaker 0>been so consistent in their

01:15:20.755 --> 01:15:21.874
<v Speaker 0>their breaks.

01:15:22.515 --> 01:15:23.394
<v Speaker 0>Mean.

01:15:23.395 --> 01:15:24.915
<v Speaker 0>Yeah. They are mean, aren't they?

01:15:28.180 --> 01:15:29.219
<v Speaker 0>Kubernetes

01:15:29.300 --> 01:15:30.260
<v Speaker 0>manifest.

01:15:30.260 --> 01:15:32.420
<v Speaker 0>Okay. Hang on. Hang on.

01:15:33.860 --> 01:15:35.220
<v Speaker 1>No. That's o o six.

01:15:38.875 --> 01:15:39.594
<v Speaker 1>Okay.

01:15:41.355 --> 01:15:43.675
<v Speaker 0>I will earn this beer. Alright.

01:15:46.155 --> 01:15:48.395
<v Speaker 0>Okay. All those Oh, you mean the home.

01:15:48.395 --> 01:15:49.195
<v Speaker 1>Okay.

01:15:52.475 --> 01:15:53.035
<v Speaker 1>Alright.

01:15:55.250 --> 01:15:57.170
<v Speaker 1>Let's see how that goes. Oh, yeah. One

01:15:57.170 --> 01:15:59.570
<v Speaker 0>of the machines ah. This is Justin's wall

01:15:59.570 --> 01:16:01.010
<v Speaker 0>command. Okay. So one of my machines Now

01:16:02.690 --> 01:16:04.450
<v Speaker 1>now I got it as well. Alright. Well,

01:16:04.450 --> 01:16:05.810
<v Speaker 0>hopefully that's them all fixed.

01:16:09.435 --> 01:16:11.515
<v Speaker 0>I don't even know anymore. What day is

01:16:11.515 --> 01:16:12.635
<v Speaker 0>it? So

01:16:15.195 --> 01:16:16.715
<v Speaker 0>API server.

01:16:18.875 --> 01:16:19.835
<v Speaker 0>Okay.

01:16:19.835 --> 01:16:21.915
<v Speaker 0>So let me just close that with three.

01:16:21.915 --> 01:16:22.955
<v Speaker 0>Like, go away.

01:16:26.840 --> 01:16:28.120
<v Speaker 0>Config.

01:16:28.360 --> 01:16:30.920
<v Speaker 0>Let's try from another machine and see if

01:16:30.920 --> 01:16:33.000
<v Speaker 0>we're getting a little bit better success.

01:16:33.240 --> 01:16:34.200
<v Speaker 0>Oh, can I?

01:16:36.705 --> 01:16:38.625
<v Speaker 0>No, we're still getting the same thing across

01:16:38.625 --> 01:16:39.505
<v Speaker 0>them all.

01:16:40.864 --> 01:16:42.784
<v Speaker 0>So even though we have a new API

01:16:42.784 --> 01:16:45.104
<v Speaker 0>server with the correct manifests

01:16:48.465 --> 01:16:49.905
<v Speaker 1>It looks like

01:16:59.520 --> 01:17:02.880
<v Speaker 1>nothing but love or heart. Heart, is that

01:17:02.880 --> 01:17:03.360
<v Speaker 1>a hint?

01:17:05.325 --> 01:17:07.325
<v Speaker 1>Duffy said he has nothing but

01:17:08.045 --> 01:17:11.165
<v Speaker 1>heart or love. I don't know which it

01:17:11.165 --> 01:17:13.325
<v Speaker 1>is for you. I'm not sure if that's

01:17:13.325 --> 01:17:13.725
<v Speaker 1>a hint.

01:17:20.989 --> 01:17:21.630
<v Speaker 0>Yeah.

01:17:21.870 --> 01:17:22.829
<v Speaker 0>Not there.

01:17:23.150 --> 01:17:25.389
<v Speaker 0>Just making sure it wasn't overwritten on the

01:17:25.710 --> 01:17:27.230
<v Speaker 0>command line items or something.

01:17:34.775 --> 01:17:35.655
<v Speaker 1>So

01:17:36.375 --> 01:17:39.655
<v Speaker 1>we're still trying to figure out if we're

01:17:39.655 --> 01:17:40.534
<v Speaker 1>actually

01:17:40.935 --> 01:17:42.935
<v Speaker 1>talking with clean

01:17:45.820 --> 01:17:47.500
<v Speaker 1>API service. Right?

01:17:49.260 --> 01:17:51.020
<v Speaker 0>I think something

01:17:51.900 --> 01:17:54.140
<v Speaker 0>yeah. They pass over, not the kubelet. You

01:17:54.140 --> 01:17:56.540
<v Speaker 1>need to hack the output, which output or

01:17:56.540 --> 01:17:58.220
<v Speaker 1>the the

01:17:59.155 --> 01:18:00.434
<v Speaker 1>yeah, which output.

01:18:05.074 --> 01:18:08.195
<v Speaker 1>There's an additional role that gives you view,

01:18:08.995 --> 01:18:09.954
<v Speaker 1>but we

01:18:10.355 --> 01:18:11.074
<v Speaker 1>do

01:18:11.475 --> 01:18:12.435
<v Speaker 1>view. Right?

01:18:15.600 --> 01:18:16.320
<v Speaker 1>Oh.

01:18:18.800 --> 01:18:19.520
<v Speaker 1>Oh.

01:18:21.520 --> 01:18:24.320
<v Speaker 0>Oh, so ah, okay. Now I get it.

01:18:24.320 --> 01:18:25.040
<v Speaker 0>Yeah. Okay.

01:18:28.165 --> 01:18:28.885
<v Speaker 1>Gotcha.

01:18:28.965 --> 01:18:31.205
<v Speaker 1>So that So do we think this is

01:18:31.205 --> 01:18:32.325
<v Speaker 0>gonna work?

01:18:33.925 --> 01:18:34.725
<v Speaker 0>Hey.

01:18:35.365 --> 01:18:36.165
<v Speaker 1>Hey.

01:18:36.725 --> 01:18:39.685
<v Speaker 0>Confusing ourselves there by not viewing the top

01:18:39.685 --> 01:18:42.150
<v Speaker 0>of the can I output? Yeah. Sorry. You

01:18:42.150 --> 01:18:43.750
<v Speaker 1>can be kind. Thank you.

01:18:47.110 --> 01:18:49.270
<v Speaker 1>Yes. They are right, Ian.

01:18:49.590 --> 01:18:51.990
<v Speaker 1>It's it's your your combined

01:18:51.990 --> 01:18:53.590
<v Speaker 1>evilness. It's not just

01:18:53.990 --> 01:18:55.190
<v Speaker 1>individuals.

01:18:55.190 --> 01:18:57.645
<v Speaker 1>Right? Alright. So we have deleted They conquer

01:18:57.645 --> 01:18:58.605
<v Speaker 0>making us Wait.

01:18:59.725 --> 01:19:01.085
<v Speaker 1>Did it come up again?

01:19:06.845 --> 01:19:08.205
<v Speaker 0>Okay. So

01:19:09.260 --> 01:19:11.019
<v Speaker 0>let's do get service

01:19:11.739 --> 01:19:12.940
<v Speaker 0>port forward.

01:19:16.940 --> 01:19:18.699
<v Speaker 0>Oh no. Why am I doing this here?

01:19:25.415 --> 01:19:29.175
<v Speaker 0>Zero zero six export to config port forward

01:19:29.175 --> 01:19:31.175
<v Speaker 0>WordPress. Do I at least have my normal

01:19:31.175 --> 01:19:32.375
<v Speaker 0>WordPress back?

01:19:32.615 --> 01:19:33.015
<v Speaker 1>Yes.

01:19:33.540 --> 01:19:35.460
<v Speaker 1>Let's see. No. Nope.

01:19:35.860 --> 01:19:36.420
<v Speaker 0>I've pressed That

01:19:37.220 --> 01:19:38.659
<v Speaker 1>would have been too easy.

01:19:40.420 --> 01:19:41.219
<v Speaker 0>Why not?

01:19:41.860 --> 01:19:43.540
<v Speaker 0>Oh, no. Because it's skilled then.

01:19:45.140 --> 01:19:47.140
<v Speaker 0>Yeah. This is the deployment, doesn't it?

01:19:50.085 --> 01:19:51.284
<v Speaker 0>Deployment.

01:19:52.965 --> 01:19:53.684
<v Speaker 0>No.

01:19:56.724 --> 01:19:58.324
<v Speaker 0>Edit, deploy

01:19:58.565 --> 01:19:59.125
<v Speaker 0>WordPress.

01:20:03.760 --> 01:20:05.119
<v Speaker 0>Replicas one.

01:20:05.280 --> 01:20:06.480
<v Speaker 0>Okay. So the

01:20:08.239 --> 01:20:10.239
<v Speaker 0>I guess we can just make an artificial

01:20:10.239 --> 01:20:11.040
<v Speaker 0>change.

01:20:11.040 --> 01:20:12.880
<v Speaker 0>Oh no. We can just fix the actual

01:20:12.880 --> 01:20:13.280
<v Speaker 0>image.

01:20:16.155 --> 01:20:16.954
<v Speaker 0>WordPress.

01:20:17.594 --> 01:20:19.195
<v Speaker 0>I can't remember if that's the right image.

01:20:19.195 --> 01:20:20.074
<v Speaker 0>Let's find out.

01:20:27.195 --> 01:20:29.835
<v Speaker 0>We've got a new replica set. Desired as

01:20:29.835 --> 01:20:30.074
<v Speaker 0>one.

01:20:30.940 --> 01:20:32.940
<v Speaker 0>That should be pulling the image.

01:20:33.660 --> 01:20:34.780
<v Speaker 0>I'm confident.

01:20:35.660 --> 01:20:36.219
<v Speaker 0>Hopefully.

01:20:42.140 --> 01:20:44.300
<v Speaker 0>I better. I guess I should confirm the

01:20:44.300 --> 01:20:46.845
<v Speaker 0>image is definitely called WordPress. In fact, I

01:20:46.845 --> 01:20:47.804
<v Speaker 0>have it locally.

01:20:50.445 --> 01:20:52.364
<v Speaker 0>We deploy workload

01:20:54.925 --> 01:20:55.805
<v Speaker 0>automated here.

01:21:00.820 --> 01:21:04.180
<v Speaker 1>Teamwork makes the dream work. Yep. I agree

01:21:04.180 --> 01:21:04.660
<v Speaker 1>with them.

01:21:22.755 --> 01:21:24.275
<v Speaker 0>Woah. Why is it trying to open it?

01:21:27.250 --> 01:21:28.130
<v Speaker 0>Computers,

01:21:30.210 --> 01:21:31.249
<v Speaker 0>just hate them.

01:21:31.650 --> 01:21:32.849
<v Speaker 0>Yeah. Yeah.

01:21:34.610 --> 01:21:36.130
<v Speaker 1>I can totally agree.

01:21:36.610 --> 01:21:38.850
<v Speaker 0>Alright. That I said damaged the right thing.

01:21:40.835 --> 01:21:42.835
<v Speaker 0>Close enough. Okay. I

01:21:43.315 --> 01:21:45.395
<v Speaker 0>think the problem

01:21:46.035 --> 01:21:49.555
<v Speaker 0>is something else. So we took our s.

01:21:51.875 --> 01:21:52.755
<v Speaker 1>Yeah. That's definitely.

01:21:54.050 --> 01:21:55.090
<v Speaker 1>Oh, hang on.

01:22:00.850 --> 01:22:02.850
<v Speaker 0>I'm gonna set the tool policy to always

01:22:02.850 --> 01:22:05.250
<v Speaker 0>in case they've messed with something there too.

01:22:07.410 --> 01:22:07.810
<v Speaker 1>Okay.

01:22:11.715 --> 01:22:13.555
<v Speaker 0>And I'm gonna set that up just to

01:22:15.315 --> 01:22:15.955
<v Speaker 0>force it.

01:22:29.810 --> 01:22:31.490
<v Speaker 0>So how do we think this is going?

01:22:33.410 --> 01:22:34.450
<v Speaker 1>Awesome.

01:22:36.050 --> 01:22:37.730
<v Speaker 0>Alright. So something is wrong.

01:22:40.575 --> 01:22:41.614
<v Speaker 0>Scrape,

01:22:41.855 --> 01:22:42.815
<v Speaker 0>deploy

01:22:44.175 --> 01:22:45.054
<v Speaker 0>WordPress.

01:22:49.775 --> 01:22:51.535
<v Speaker 0>We've got our scaling events.

01:22:56.639 --> 01:22:58.320
<v Speaker 1>But there are no pods. Right? Oh, you're

01:22:58.320 --> 01:22:58.960
<v Speaker 1>you're on the

01:23:01.599 --> 01:23:03.360
<v Speaker 0>Yeah. We're not getting any pods. I think

01:23:03.360 --> 01:23:05.440
<v Speaker 0>we need to take a look at

01:23:06.285 --> 01:23:07.405
<v Speaker 0>cubit logs.

01:23:10.205 --> 01:23:12.285
<v Speaker 1>Do you think that they maybe

01:23:12.845 --> 01:23:15.725
<v Speaker 1>even replace the controller manager?

01:23:17.565 --> 01:23:17.965
<v Speaker 1>Maybe?

01:23:19.100 --> 01:23:20.460
<v Speaker 1>Screwing with the

01:23:22.700 --> 01:23:23.980
<v Speaker 1>replica set.

01:23:26.060 --> 01:23:27.179
<v Speaker 1>Shall we have a look?

01:23:29.020 --> 01:23:31.435
<v Speaker 0>We got a few errors here but I'm

01:23:31.435 --> 01:23:33.915
<v Speaker 0>now at a stage of delusion of debugging

01:23:33.915 --> 01:23:35.675
<v Speaker 0>this. I have no idea what is a

01:23:35.675 --> 01:23:37.835
<v Speaker 0>real symptom and what is

01:23:39.115 --> 01:23:40.075
<v Speaker 0>is noise.

01:23:42.715 --> 01:23:43.115
<v Speaker 0>Well,

01:23:49.330 --> 01:23:51.410
<v Speaker 1>Okay. We we take hint.

01:23:54.690 --> 01:23:56.530
<v Speaker 0>What's going on here? What turns the replica

01:23:56.530 --> 01:23:59.410
<v Speaker 1>set into pods? Well, deployments for example. Right?

01:23:59.575 --> 01:24:00.615
<v Speaker 1>So,

01:24:00.615 --> 01:24:02.455
<v Speaker 1>if we looked at the deployment We're not

01:24:02.455 --> 01:24:05.014
<v Speaker 0>getting any pods showing up.

01:24:05.015 --> 01:24:05.415
<v Speaker 0>So

01:24:06.455 --> 01:24:09.095
<v Speaker 1>Right. But I guess what Duffy hinted at

01:24:09.095 --> 01:24:10.054
<v Speaker 1>was that

01:24:10.375 --> 01:24:12.534
<v Speaker 1>there's something wrong with the deployment.

01:24:13.735 --> 01:24:15.080
<v Speaker 1>That's my interpretation.

01:24:21.640 --> 01:24:23.160
<v Speaker 0>Should we get the logs on the controller

01:24:23.160 --> 01:24:23.960
<v Speaker 0>manager?

01:24:24.440 --> 01:24:25.480
<v Speaker 0>I guess. I

01:24:27.000 --> 01:24:27.800
<v Speaker 1>think he

01:24:28.120 --> 01:24:30.200
<v Speaker 1>literally meant just the

01:24:31.535 --> 01:24:33.375
<v Speaker 1>the WordPress deployment. Right?

01:24:36.095 --> 01:24:38.895
<v Speaker 0>No. I think we have fixed that. I

01:24:38.895 --> 01:24:40.735
<v Speaker 0>think we have a replica set that's being

01:24:40.735 --> 01:24:43.295
<v Speaker 0>created. I think then the controller manager's

01:24:43.630 --> 01:24:44.910
<v Speaker 0>not able or

01:24:45.630 --> 01:24:48.750
<v Speaker 0>not Okay. Doing something with that to create

01:24:48.750 --> 01:24:49.630
<v Speaker 0>the pods.

01:24:49.790 --> 01:24:51.870
<v Speaker 0>Okay. Let's test that. But

01:24:52.990 --> 01:24:53.870
<v Speaker 0>why is it

01:24:55.550 --> 01:24:56.670
<v Speaker 0>cube system

01:24:56.750 --> 01:24:58.030
<v Speaker 0>get pods

01:24:58.665 --> 01:25:00.265
<v Speaker 0>log dash f.

01:25:00.345 --> 01:25:02.265
<v Speaker 0>Why did that not get any logs? Oh,

01:25:02.265 --> 01:25:03.065
<v Speaker 0>there we go.

01:25:03.705 --> 01:25:05.225
<v Speaker 0>Okay. We do have a problem.

01:25:06.745 --> 01:25:07.304
<v Speaker 1>Okay.

01:25:07.865 --> 01:25:08.185
<v Speaker 1>So,

01:25:16.930 --> 01:25:19.250
<v Speaker 0>We're getting a connection refused when the controller

01:25:19.250 --> 01:25:21.170
<v Speaker 0>manager is trying to speak to.

01:25:24.415 --> 01:25:27.534
<v Speaker 0>Okay. So cannot get resource endpoints.

01:25:31.295 --> 01:25:31.695
<v Speaker 1>Right.

01:25:37.920 --> 01:25:40.240
<v Speaker 1>But that looks more like an RPIC issue,

01:25:40.240 --> 01:25:40.800
<v Speaker 0>no?

01:25:41.120 --> 01:25:44.320
<v Speaker 0>So

01:25:44.320 --> 01:25:45.440
<v Speaker 0>I think

01:25:51.184 --> 01:25:52.704
<v Speaker 0>Let's take a look at the cube controller

01:25:52.704 --> 01:25:53.504
<v Speaker 0>manager.

01:25:57.744 --> 01:25:58.945
<v Speaker 0>Okay. Deploy.

01:26:01.744 --> 01:26:04.650
<v Speaker 0>Oh, it's a static manifest, isn't it?

01:26:12.170 --> 01:26:15.050
<v Speaker 0>Yeah. What's the change here? Look look look

01:26:15.050 --> 01:26:16.250
<v Speaker 1>out for honks.

01:26:17.130 --> 01:26:19.605
<v Speaker 1>Right? Always look out for honks.

01:26:21.445 --> 01:26:24.085
<v Speaker 1>That would've been too easy. The image looks

01:26:24.085 --> 01:26:25.045
<v Speaker 1>okay.

01:26:25.445 --> 01:26:27.125
<v Speaker 0>It's like conquer off my Christmas card list

01:26:27.125 --> 01:26:27.685
<v Speaker 0>from now on.

01:26:30.310 --> 01:26:32.790
<v Speaker 1>Okay. So that is that nothing wrong with

01:26:32.790 --> 01:26:35.910
<v Speaker 1>the controller manager permissions or binary.

01:26:35.990 --> 01:26:36.710
<v Speaker 1>Okay.

01:26:37.670 --> 01:26:38.710
<v Speaker 1>Well, that's

01:26:39.030 --> 01:26:40.390
<v Speaker 1>good and

01:26:40.870 --> 01:26:41.510
<v Speaker 1>bad.

01:26:44.775 --> 01:26:48.535
<v Speaker 1>Right. Deployment deployment controller, replica set replica set

01:26:48.535 --> 01:26:49.415
<v Speaker 1>controller.

01:26:49.735 --> 01:26:50.455
<v Speaker 1>So

01:26:55.095 --> 01:26:57.495
<v Speaker 1>but the replica set

01:26:57.870 --> 01:27:01.710
<v Speaker 1>controller is part of the controller manager. Right?

01:27:01.950 --> 01:27:04.430
<v Speaker 0>I it is. Yeah. As far as I

01:27:04.430 --> 01:27:05.230
<v Speaker 0>know. So

01:27:09.870 --> 01:27:10.910
<v Speaker 1>those controllers,

01:27:10.910 --> 01:27:11.790
<v Speaker 1>though. Yeah.

01:27:13.005 --> 01:27:14.285
<v Speaker 1>Bad controllers.

01:27:17.325 --> 01:27:18.125
<v Speaker 1>What

01:27:18.205 --> 01:27:19.885
<v Speaker 1>are we looking at?

01:27:22.365 --> 01:27:26.410
<v Speaker 1>User system cube controller manager cannot get resource

01:27:26.410 --> 01:27:27.369
<v Speaker 1>endpoint.

01:27:27.850 --> 01:27:29.290
<v Speaker 0>This beer was supposed to be a victory

01:27:29.290 --> 01:27:31.290
<v Speaker 0>beer. Now it's a consolidation beer.

01:27:32.810 --> 01:27:33.530
<v Speaker 1>Alright.

01:27:36.970 --> 01:27:38.650
<v Speaker 0>Yes, Ian. I will

01:27:39.465 --> 01:27:41.304
<v Speaker 0>I will get you a card

01:27:42.425 --> 01:27:44.104
<v Speaker 0>for all major holidays.

01:27:45.945 --> 01:27:46.664
<v Speaker 1>So

01:27:47.625 --> 01:27:50.184
<v Speaker 1>let's get back to the the

01:27:50.185 --> 01:27:51.224
<v Speaker 1>replica

01:27:51.304 --> 01:27:52.185
<v Speaker 1>set

01:27:53.770 --> 01:27:54.969
<v Speaker 1>controller.

01:27:58.810 --> 01:27:59.769
<v Speaker 1>Controller.

01:28:01.850 --> 01:28:02.650
<v Speaker 1>What?

01:28:02.969 --> 01:28:03.929
<v Speaker 0>What's the star?

01:28:12.545 --> 01:28:13.505
<v Speaker 1>I do not know.

01:28:20.760 --> 01:28:23.000
<v Speaker 0>I mean, should we even be overriding the

01:28:23.000 --> 01:28:24.519
<v Speaker 0>controllers? If I had move that, is it

01:28:24.519 --> 01:28:26.359
<v Speaker 0>gonna default to something sensible?

01:28:27.079 --> 01:28:28.440
<v Speaker 0>Will we comment that out and see what

01:28:28.440 --> 01:28:31.880
<v Speaker 0>happens? Sure. Kubernetes has absolutely same

01:28:31.880 --> 01:28:34.519
<v Speaker 1>default. Why not? I mean, I'm just I'm

01:28:34.519 --> 01:28:35.079
<v Speaker 0>absolutely

01:28:35.885 --> 01:28:37.885
<v Speaker 0>I'm guessing I mean, it's worse than I

01:28:37.885 --> 01:28:39.245
<v Speaker 0>guess now, to be honest.

01:28:41.485 --> 01:28:43.005
<v Speaker 0>Alright. Let's see.

01:28:45.485 --> 01:28:48.525
<v Speaker 0>Where's our controller manager? It has been running.

01:28:48.525 --> 01:28:50.525
<v Speaker 0>Okay. It's been restarted now. So,

01:28:51.900 --> 01:28:53.340
<v Speaker 0>do we have any pods?

01:28:53.980 --> 01:28:54.700
<v Speaker 0>No.

01:28:56.060 --> 01:28:56.940
<v Speaker 1>Wait.

01:28:58.540 --> 01:29:00.140
<v Speaker 1>Oh, that's my SQL. Yeah.

01:29:07.295 --> 01:29:09.535
<v Speaker 0>Okay. So maybe we don't have sensible defaults

01:29:09.535 --> 01:29:10.255
<v Speaker 0>here.

01:29:13.615 --> 01:29:16.335
<v Speaker 0>Oh, wait. So It's a dash replica set.

01:29:18.880 --> 01:29:20.960
<v Speaker 1>It's so small I cannot Oh, I I

01:29:20.960 --> 01:29:21.679
<v Speaker 1>can actually

01:29:22.079 --> 01:29:25.039
<v Speaker 0>because that mean don't run the replica set

01:29:25.039 --> 01:29:25.839
<v Speaker 0>controller.

01:29:26.159 --> 01:29:27.999
<v Speaker 0>I've never used that syntax before.

01:29:30.800 --> 01:29:31.840
<v Speaker 0>Did it restart yet?

01:29:33.395 --> 01:29:34.915
<v Speaker 1>Don't know off the top of my head

01:29:34.915 --> 01:29:37.155
<v Speaker 1>if that is the case. Oh, now I

01:29:37.155 --> 01:29:38.275
<v Speaker 0>don't have a controller manager.

01:29:45.330 --> 01:29:47.090
<v Speaker 0>Oh, no. It's back. Okay. Do I have

01:29:47.090 --> 01:29:47.730
<v Speaker 0>pods?

01:29:49.490 --> 01:29:50.770
<v Speaker 0>Maybe

01:29:52.450 --> 01:29:53.810
<v Speaker 0>it's just not ready yet.

01:29:55.650 --> 01:29:57.090
<v Speaker 0>Thought sure that was gonna be it.

01:29:59.175 --> 01:30:00.614
<v Speaker 1>Yeah. Let's let's

01:30:00.695 --> 01:30:03.335
<v Speaker 1>let's follow valid advice

01:30:03.335 --> 01:30:05.335
<v Speaker 1>regarding the manifest. Let's go back to the

01:30:05.335 --> 01:30:07.655
<v Speaker 1>manifest and double check again.

01:30:09.815 --> 01:30:11.414
<v Speaker 1>The options there.

01:30:12.135 --> 01:30:13.335
<v Speaker 0>Yeah. I don't like that star.

01:30:16.159 --> 01:30:17.920
<v Speaker 1>Should it all be star?

01:30:19.600 --> 01:30:21.679
<v Speaker 1>You know what? Have a let's have a

01:30:21.679 --> 01:30:23.760
<v Speaker 1>look at the actual dogs.

01:30:24.159 --> 01:30:25.679
<v Speaker 1>I I was told that this is a

01:30:25.679 --> 01:30:26.719
<v Speaker 1>lot of fun. Let me have a look

01:30:26.719 --> 01:30:27.360
<v Speaker 1>at the

01:30:29.815 --> 01:30:32.535
<v Speaker 1>at the reference here. Kubernetes.

01:30:37.015 --> 01:30:38.215
<v Speaker 1>That's the

01:30:38.935 --> 01:30:39.415
<v Speaker 1>control.

01:30:43.670 --> 01:30:47.190
<v Speaker 0>Oh yeah, star is a sensible default. Okay.

01:30:47.190 --> 01:30:49.590
<v Speaker 0>So, of controllers to enable star, enables all

01:30:49.590 --> 01:30:52.710
<v Speaker 0>owned by default controllers, foo enables controller foo,

01:30:52.710 --> 01:30:54.790
<v Speaker 0>dash foo disables foo.

01:30:56.395 --> 01:30:59.355
<v Speaker 0>Okay. Let's go with so if we ah,

01:30:59.355 --> 01:31:01.835
<v Speaker 1>right. Got it. So by setting

01:31:02.075 --> 01:31:04.635
<v Speaker 1>any of them here except for just star,

01:31:05.115 --> 01:31:07.355
<v Speaker 0>that'll be deleted there. So the default should

01:31:07.355 --> 01:31:08.555
<v Speaker 0>have been Yeah. Just

01:31:08.870 --> 01:31:11.750
<v Speaker 1>just do star which is the default which

01:31:11.750 --> 01:31:12.710
<v Speaker 1>means all.

01:31:13.110 --> 01:31:15.670
<v Speaker 1>Right? That's what the docs say. I guess

01:31:15.670 --> 01:31:17.830
<v Speaker 0>this might not be the active control plane

01:31:17.830 --> 01:31:18.790
<v Speaker 0>controller.

01:31:19.190 --> 01:31:21.430
<v Speaker 0>So, I really need to do this on

01:31:21.430 --> 01:31:22.950
<v Speaker 0>the other two machines as well.

01:31:24.765 --> 01:31:25.405
<v Speaker 1>Right.

01:31:30.045 --> 01:31:32.364
<v Speaker 0>Which is probably why, in fact, removing it

01:31:32.364 --> 01:31:33.725
<v Speaker 0>should run the default and I think the

01:31:33.725 --> 01:31:35.245
<v Speaker 0>reason I never got the default behavior when

01:31:35.245 --> 01:31:37.565
<v Speaker 0>I tested it last time was purely because

01:31:37.565 --> 01:31:40.860
<v Speaker 0>it wasn't the leader. So that's j g.

01:31:41.500 --> 01:31:43.019
<v Speaker 0>That's the six w,

01:31:43.980 --> 01:31:46.140
<v Speaker 0>which means I need to get onto the

01:31:46.140 --> 01:31:48.059
<v Speaker 0>machine. Let me look over here.

01:31:49.580 --> 01:31:51.340
<v Speaker 0>P. Alright. Just this one.

01:31:52.085 --> 01:31:53.844
<v Speaker 1>Yeah. I know William. This is it's a

01:31:54.005 --> 01:31:56.005
<v Speaker 1>it almost feels like cheating. Right? Looking at

01:31:56.005 --> 01:31:58.324
<v Speaker 1>the dogs and actually RTFM,

01:31:58.324 --> 01:32:00.085
<v Speaker 1>we need to find manual.

01:32:00.085 --> 01:32:00.324
<v Speaker 1>That's

01:32:01.205 --> 01:32:02.005
<v Speaker 1>I know.

01:32:02.405 --> 01:32:03.844
<v Speaker 0>Yeah. That was a good idea. I'm not

01:32:03.844 --> 01:32:05.045
<v Speaker 0>sure how long I would have given that

01:32:05.045 --> 01:32:06.885
<v Speaker 0>before I gave Keith then and finally reached

01:32:06.885 --> 01:32:08.540
<v Speaker 0>for the dog. I should just get in

01:32:08.540 --> 01:32:10.619
<v Speaker 0>the habit of doing that sooner. Alright.

01:32:10.860 --> 01:32:13.099
<v Speaker 0>All of our controller managers

01:32:13.740 --> 01:32:15.740
<v Speaker 0>should hopefully have restarted and I'm not I'm

01:32:15.740 --> 01:32:18.300
<v Speaker 0>gonna ask them the default should okay. So

01:32:19.260 --> 01:32:20.860
<v Speaker 0>k get pods.

01:32:22.675 --> 01:32:25.315
<v Speaker 1>Duffy asks how many controller managers do you

01:32:25.315 --> 01:32:27.155
<v Speaker 1>have? Well, how many do we need?

01:32:27.555 --> 01:32:28.275
<v Speaker 1>I

01:32:31.795 --> 01:32:33.955
<v Speaker 0>wonder how far behind the comments are. I

01:32:33.955 --> 01:32:34.675
<v Speaker 0>feel like

01:32:35.520 --> 01:32:37.600
<v Speaker 0>they're giving me advice right after I say

01:32:37.600 --> 01:32:38.239
<v Speaker 0>something.

01:32:40.400 --> 01:32:41.840
<v Speaker 1>Time stamp looks okay.

01:32:43.040 --> 01:32:44.880
<v Speaker 0>Oh, wait. Controller manager.

01:32:47.040 --> 01:32:48.240
<v Speaker 0>Okay. 32.

01:32:51.485 --> 01:32:52.284
<v Speaker 0>Ta da.

01:32:53.165 --> 01:32:54.205
<v Speaker 1>Well done.

01:32:54.845 --> 01:32:56.445
<v Speaker 1>Great job, David.

01:32:57.405 --> 01:33:00.685
<v Speaker 1>Well, let's not let's not, you know, we're

01:33:00.685 --> 01:33:04.010
<v Speaker 1>not yet allowed to grab a pint because

01:33:04.330 --> 01:33:06.090
<v Speaker 1>we wanna see we wanna see if we

01:33:06.090 --> 01:33:07.929
<v Speaker 1>have been de honked. Right?

01:33:11.850 --> 01:33:14.010
<v Speaker 1>Duffy, I'm not that sure if if if

01:33:14.010 --> 01:33:16.090
<v Speaker 1>I agree that's oh, there you go. That's

01:33:16.090 --> 01:33:16.330
<v Speaker 1>what

01:33:16.890 --> 01:33:19.284
<v Speaker 1>is it? But is it? Oh, I don't

01:33:19.284 --> 01:33:21.925
<v Speaker 0>I don't think once you said? Let's

01:33:21.925 --> 01:33:23.764
<v Speaker 1>let's let's move on to the next.

01:33:25.045 --> 01:33:26.645
<v Speaker 0>I think Yeah. I I bet that you

01:33:26.645 --> 01:33:28.405
<v Speaker 1>you you folks have a lot of fun

01:33:28.405 --> 01:33:31.605
<v Speaker 1>seeing us sweating here, our pants

01:33:32.170 --> 01:33:34.170
<v Speaker 1>for how we doing time work. I didn't

01:33:34.170 --> 01:33:35.690
<v Speaker 0>realize it was still dark in my room.

01:33:35.690 --> 01:33:39.369
<v Speaker 1>Oh, damn it. Let me quickly let

01:33:44.090 --> 01:33:45.130
<v Speaker 1>me quickly

01:33:45.450 --> 01:33:47.545
<v Speaker 0>Alright. SecHonk, please let us know if we

01:33:47.545 --> 01:33:49.304
<v Speaker 0>got everything there. Is there anything else we

01:33:49.304 --> 01:33:50.985
<v Speaker 0>need to look at? Oh, so Michael, you've

01:33:50.985 --> 01:33:53.065
<v Speaker 0>got a hard stop. I'm sorry. We went

01:33:53.065 --> 01:33:53.544
<v Speaker 0>two minutes I

01:33:55.385 --> 01:33:56.104
<v Speaker 1>just

01:33:56.905 --> 01:33:58.425
<v Speaker 1>it's a fucking wrap up.

01:33:59.145 --> 01:34:00.105
<v Speaker 0>Alright. So let's

01:34:01.550 --> 01:34:04.510
<v Speaker 0>those were two great clusters there.

01:34:05.310 --> 01:34:07.310
<v Speaker 1>Right. I think we had a a very

01:34:07.310 --> 01:34:09.710
<v Speaker 0>varied set of problems there.

01:34:10.830 --> 01:34:12.910
<v Speaker 0>I'm not sure we've fixed everything

01:34:12.990 --> 01:34:15.574
<v Speaker 0>on Justin's cluster. Cluster. I'm looking forward to

01:34:15.574 --> 01:34:18.054
<v Speaker 0>reading the Ansible playbook and

01:34:18.135 --> 01:34:20.295
<v Speaker 0>compiling that post mortem together to really show

01:34:20.295 --> 01:34:22.455
<v Speaker 0>what happened and how to fix it. It

01:34:22.455 --> 01:34:23.735
<v Speaker 0>looks like we have some sort of weird

01:34:23.735 --> 01:34:26.215
<v Speaker 0>discrepancy between what's happening on the teleport SSH

01:34:26.215 --> 01:34:27.975
<v Speaker 0>versus the standard SSH.

01:34:27.975 --> 01:34:30.429
<v Speaker 0>So something I just I

01:34:30.989 --> 01:34:33.070
<v Speaker 1>just say hi to Bartek who was so

01:34:33.070 --> 01:34:35.070
<v Speaker 1>kind joining us now.

01:34:35.310 --> 01:34:37.550
<v Speaker 1>I'll be over in a a moment. That

01:34:37.550 --> 01:34:39.790
<v Speaker 1>was really fun. Thanks a lot. That I

01:34:39.790 --> 01:34:42.505
<v Speaker 1>I I definitely learned a lot, like, how

01:34:42.505 --> 01:34:44.584
<v Speaker 1>mean people can be. So and

01:34:46.264 --> 01:34:47.864
<v Speaker 1>and hope it was useful and and fun

01:34:47.864 --> 01:34:50.505
<v Speaker 1>for others as well. I certainly have. Alright.

01:34:50.505 --> 01:34:53.864
<v Speaker 0>Well, thank you, Justin, teams like Honk, and

01:34:53.864 --> 01:34:55.144
<v Speaker 0>Michael for joining me today.

01:34:56.590 --> 01:34:58.830
<v Speaker 0>It it's so challenging being on this site.

01:34:58.830 --> 01:35:00.750
<v Speaker 0>I thought like, you were so calm. I

01:35:00.750 --> 01:35:02.190
<v Speaker 0>don't know how you how you just keep

01:35:02.190 --> 01:35:04.670
<v Speaker 0>so collected through that. Like, inside my head,

01:35:04.670 --> 01:35:06.830
<v Speaker 0>I am literally screaming all the worst words

01:35:06.830 --> 01:35:08.910
<v Speaker 0>in the world to our breakers. So

01:35:10.815 --> 01:35:13.055
<v Speaker 0>I I learned stuff today about some of

01:35:13.055 --> 01:35:15.215
<v Speaker 0>the configuration and stuff. And that's the point

01:35:15.215 --> 01:35:16.975
<v Speaker 0>of this. So thank you to our breakers.

01:35:16.975 --> 01:35:18.095
<v Speaker 0>We're

01:35:18.095 --> 01:35:20.335
<v Speaker 0>all learning together and hopefully having some fun

01:35:20.335 --> 01:35:21.935
<v Speaker 0>while we do it. Michael, thank you again

01:35:21.935 --> 01:35:23.935
<v Speaker 0>for spending this session with me, and I

01:35:23.935 --> 01:35:25.719
<v Speaker 0>will speak to you soon. Thanks to everyone

01:35:25.719 --> 01:35:27.159
<v Speaker 0>who joined I've not seen who won the

01:35:27.159 --> 01:35:29.159
<v Speaker 0>but whoever it was, congratulations.

01:35:29.639 --> 01:35:31.800
<v Speaker 0>Alright. Thanks a lot. Bye bye. Cheers. Bye

01:35:31.800 --> 01:35:31.960
<v Speaker 0>now.
