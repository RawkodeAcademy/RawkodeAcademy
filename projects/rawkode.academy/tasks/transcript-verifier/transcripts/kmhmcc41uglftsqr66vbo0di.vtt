WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: 865c1660-57d1-41cb-812c-20b5c85b1dc6
Created: 2025-04-29T18:40:16.435Z
Duration: 4952.4746
Channels: 1

00:01:32.414 --> 00:01:34.814
<v Speaker 0>If I wanted to write comments during Hello.

00:01:34.895 --> 00:01:36.094
<v Speaker 1>Oh, look. Yeah.

00:01:38.094 --> 00:01:40.174
<v Speaker 1>Hello, everyone. Welcome to today's episode of Rawkode

00:01:40.174 --> 00:01:42.760
<v Speaker 1>Live. This is clustered, the show where I

00:01:42.760 --> 00:01:45.080
<v Speaker 1>get to look really silly fixing broken clusters

00:01:45.080 --> 00:01:47.240
<v Speaker 1>by members of the Kubernetes community.

00:01:47.560 --> 00:01:49.400
<v Speaker 1>And before we get started, there's just a

00:01:49.400 --> 00:01:51.080
<v Speaker 1>little bit of housekeeping.

00:01:52.120 --> 00:01:54.520
<v Speaker 1>I would encourage you all to join where's

00:01:54.520 --> 00:01:55.000
<v Speaker 1>my button?

00:01:57.345 --> 00:01:58.785
<v Speaker 1>I swear I've done this before. It's been

00:01:58.785 --> 00:02:02.065
<v Speaker 1>a break. Please join the Discord channel, Rawkode.chat.

00:02:02.065 --> 00:02:04.225
<v Speaker 1>There's a 300 and something people in there

00:02:04.225 --> 00:02:06.465
<v Speaker 1>now talking all things Kubernetes and cloud native.

00:02:06.465 --> 00:02:07.985
<v Speaker 1>Come and say hello. It'd be a pleasure

00:02:07.985 --> 00:02:09.345
<v Speaker 1>to have you there. Also,

00:02:09.585 --> 00:02:11.570
<v Speaker 1>if you've not subscribed to the YouTube channel,

00:02:11.570 --> 00:02:13.650
<v Speaker 1>you should do so now. Remember to click

00:02:13.650 --> 00:02:15.570
<v Speaker 1>the bell and you will get notifications for

00:02:15.570 --> 00:02:18.130
<v Speaker 1>all future episodes of clustered and other episodes

00:02:18.130 --> 00:02:19.330
<v Speaker 1>of Rawkode live.

00:02:19.730 --> 00:02:21.330
<v Speaker 1>I will do my best to cover all

00:02:21.330 --> 00:02:23.345
<v Speaker 1>of the different technologies in the cloud native

00:02:23.345 --> 00:02:25.985
<v Speaker 1>landscape, giving us a hands on tutorial on

00:02:25.985 --> 00:02:27.265
<v Speaker 1>how to get started.

00:02:28.145 --> 00:02:30.545
<v Speaker 1>Alright. Now for cluster today, I am joined

00:02:30.545 --> 00:02:33.185
<v Speaker 1>by Mahmoud and Marcus. I almost called you

00:02:33.185 --> 00:02:34.785
<v Speaker 1>Displeak there because I was looking at your

00:02:34.785 --> 00:02:36.625
<v Speaker 1>face and your name. But thank you both

00:02:36.625 --> 00:02:37.345
<v Speaker 1>for joining me today.

00:02:38.120 --> 00:02:39.560
<v Speaker 1>Mahmoud, how are you?

00:02:40.120 --> 00:02:41.560
<v Speaker 0>Thank you. Thank you for having me. I'm

00:02:41.560 --> 00:02:43.959
<v Speaker 0>doing great. My name is Mahmoud. I also

00:02:43.959 --> 00:02:44.920
<v Speaker 0>go by Moody.

00:02:45.560 --> 00:02:47.480
<v Speaker 0>I'm very excited to be here and work

00:02:47.480 --> 00:02:50.724
<v Speaker 0>on the the the what we described as

00:02:50.724 --> 00:02:52.805
<v Speaker 0>a car crash of a cluster that Marx

00:02:52.805 --> 00:02:54.805
<v Speaker 0>has set up for us. I'm very excited

00:02:54.805 --> 00:02:55.445
<v Speaker 0>for that.

00:02:55.845 --> 00:02:58.644
<v Speaker 1>The clusters are always fun. And, Marcus, please

00:02:58.644 --> 00:02:59.765
<v Speaker 1>tell us who you are.

00:03:00.565 --> 00:03:01.205
<v Speaker 2>Yeah.

00:03:01.444 --> 00:03:02.780
<v Speaker 2>Marcus Johansen.

00:03:02.780 --> 00:03:05.420
<v Speaker 2>I work at Equinix Metal on all sorts

00:03:05.420 --> 00:03:09.019
<v Speaker 2>of integrations, Kubernetes and Terraform and SDKs,

00:03:09.019 --> 00:03:09.660
<v Speaker 2>etcetera.

00:03:10.220 --> 00:03:12.540
<v Speaker 2>And, yeah, also looking

00:03:12.860 --> 00:03:14.940
<v Speaker 2>I I looking forward is, like, not the

00:03:14.940 --> 00:03:17.019
<v Speaker 2>right set of words, but

00:03:17.435 --> 00:03:18.795
<v Speaker 2>this will be an adventure.

00:03:19.915 --> 00:03:21.754
<v Speaker 1>You're right. Definitely.

00:03:21.754 --> 00:03:23.915
<v Speaker 0>I I I totally forgot to introduce myself.

00:03:23.915 --> 00:03:24.875
<v Speaker 0>Sorry. I'm

00:03:25.754 --> 00:03:28.795
<v Speaker 0>I I work at Carta as an SRE,

00:03:29.435 --> 00:03:29.915
<v Speaker 0>and

00:03:30.235 --> 00:03:33.360
<v Speaker 0>I I'm we're hiring. If anyone's interested, please

00:03:33.360 --> 00:03:35.680
<v Speaker 0>DM me. That's it. I I just assumed

00:03:35.680 --> 00:03:37.280
<v Speaker 1>you didn't want to share with us. That

00:03:37.280 --> 00:03:39.440
<v Speaker 1>was all, you know, but no. Thank you

00:03:39.440 --> 00:03:40.400
<v Speaker 1>for that as well.

00:03:41.599 --> 00:03:43.599
<v Speaker 1>It's it's interesting that you say you're looking

00:03:43.599 --> 00:03:44.959
<v Speaker 1>forward to it and we talk about car

00:03:44.959 --> 00:03:46.000
<v Speaker 1>crashes. Like,

00:03:46.575 --> 00:03:49.135
<v Speaker 1>it's definitely the most daunting thing that I

00:03:49.135 --> 00:03:50.894
<v Speaker 1>do on a weekly basis. But at the

00:03:50.894 --> 00:03:52.575
<v Speaker 1>same time, it's weirdly

00:03:52.655 --> 00:03:53.215
<v Speaker 1>fun

00:03:53.855 --> 00:03:55.614
<v Speaker 1>and I'm hoping we we all enjoy this

00:03:55.614 --> 00:03:56.255
<v Speaker 1>today.

00:03:57.455 --> 00:03:58.175
<v Speaker 1>Okay.

00:03:58.495 --> 00:03:59.935
<v Speaker 1>Well, let's get started.

00:04:01.200 --> 00:04:03.520
<v Speaker 1>I will pop up my screen. I'm hoping

00:04:03.520 --> 00:04:06.320
<v Speaker 1>you both have access to our Teleport Clusters.

00:04:06.560 --> 00:04:09.840
<v Speaker 1>Custard number 29 on episode 13 is from

00:04:09.840 --> 00:04:11.360
<v Speaker 1>Marcus here. So

00:04:12.160 --> 00:04:13.680
<v Speaker 1>will I call you Muddy? Is that what

00:04:13.680 --> 00:04:14.080
<v Speaker 1>you prefer?

00:04:14.735 --> 00:04:17.135
<v Speaker 0>Yeah, sure. Muddy. Right. Okay, Muddy.

00:04:17.935 --> 00:04:19.695
<v Speaker 1>We're jumping into this one together. Are you

00:04:19.695 --> 00:04:20.255
<v Speaker 1>ready?

00:04:21.055 --> 00:04:22.575
<v Speaker 0>Sounds good. I'm

00:04:23.294 --> 00:04:25.135
<v Speaker 0>excited and scared at the same time.

00:04:27.294 --> 00:04:28.975
<v Speaker 1>Oh, good Firefoxes.

00:04:29.455 --> 00:04:30.095
<v Speaker 1>Oh, there we go.

00:04:31.540 --> 00:04:33.540
<v Speaker 1>My computer has been struggling today. I hope

00:04:33.540 --> 00:04:34.420
<v Speaker 1>this is not

00:04:35.380 --> 00:04:37.620
<v Speaker 1>part of episode thirteen's curse,

00:04:37.780 --> 00:04:39.860
<v Speaker 1>but I am in a session.

00:04:40.580 --> 00:04:42.260
<v Speaker 1>I will type all echo hello.

00:04:42.854 --> 00:04:44.455
<v Speaker 1>If you wanna just do the same, let

00:04:44.455 --> 00:04:45.815
<v Speaker 1>me know you're in the same session. There

00:04:45.815 --> 00:04:47.014
<v Speaker 1>we go. Perfect.

00:04:47.655 --> 00:04:48.455
<v Speaker 1>Yay.

00:04:48.694 --> 00:04:49.335
<v Speaker 1>Wonderful. Alright.

00:04:50.134 --> 00:04:51.414
<v Speaker 1>So we've got a little bit of setting

00:04:51.414 --> 00:04:53.014
<v Speaker 1>up to do. I'll do this for you

00:04:53.014 --> 00:04:54.615
<v Speaker 1>and then I will give you the honors

00:04:54.615 --> 00:04:57.870
<v Speaker 1>of running whatever command you want to check

00:04:57.870 --> 00:04:59.710
<v Speaker 1>if we have an API server.

00:05:00.750 --> 00:05:01.710
<v Speaker 1>Oh gosh.

00:05:02.669 --> 00:05:04.270
<v Speaker 1>The flow Should I should I be able

00:05:04.270 --> 00:05:05.789
<v Speaker 2>to see the should I be able to

00:05:05.789 --> 00:05:07.150
<v Speaker 2>see the session too or housekeeping?

00:05:10.615 --> 00:05:12.294
<v Speaker 1>I'm hoping you can see my screen.

00:05:13.014 --> 00:05:15.574
<v Speaker 2>I can see your screen. I can't see

00:05:15.574 --> 00:05:17.335
<v Speaker 2>the session in the list of session in

00:05:17.335 --> 00:05:19.094
<v Speaker 2>the list of active session. It's a different

00:05:19.094 --> 00:05:21.094
<v Speaker 1>cluster. You'll just need because you're the breaker,

00:05:21.094 --> 00:05:22.854
<v Speaker 1>you don't get access to the terminal. You're

00:05:22.854 --> 00:05:25.094
<v Speaker 1>Why not? Alright. To the broadcast view.

00:05:25.680 --> 00:05:26.480
<v Speaker 2>Okay.

00:05:28.320 --> 00:05:29.040
<v Speaker 0>Cool.

00:05:29.600 --> 00:05:30.320
<v Speaker 0>I guess,

00:05:31.039 --> 00:05:33.120
<v Speaker 0>should should we get started?

00:05:33.360 --> 00:05:35.840
<v Speaker 1>Yeah. Go for it. I recommend get nodes,

00:05:35.840 --> 00:05:37.520
<v Speaker 1>get pods, pick whatever one you want. It's

00:05:37.520 --> 00:05:39.199
<v Speaker 1>always good to work out if we have

00:05:39.199 --> 00:05:41.294
<v Speaker 1>an API server first before we start doing

00:05:41.294 --> 00:05:44.335
<v Speaker 1>anything else. Yeah. Oh, thanks for the alias.

00:05:44.335 --> 00:05:46.335
<v Speaker 0>Yeah. I guess we'll check. Oh, we have

00:05:46.335 --> 00:05:49.695
<v Speaker 0>we have a response. That's good. Around 01:20.4.

00:05:50.255 --> 00:05:50.895
<v Speaker 0>Awesome.

00:05:51.455 --> 00:05:52.255
<v Speaker 0>Let's check

00:05:52.729 --> 00:05:54.810
<v Speaker 0>what's going on with the nodes. Are our

00:05:54.810 --> 00:05:57.690
<v Speaker 0>nodes okay? Looks looks fine.

00:05:58.009 --> 00:05:59.050
<v Speaker 0>We can check

00:05:59.530 --> 00:06:00.570
<v Speaker 0>pods.

00:06:00.810 --> 00:06:02.889
<v Speaker 0>Alright. Let's check the default first. The default

00:06:02.889 --> 00:06:03.370
<v Speaker 0>namespace

00:06:05.565 --> 00:06:07.565
<v Speaker 0>no real pods. Let me check if there's

00:06:07.565 --> 00:06:08.045
<v Speaker 0>any

00:06:09.005 --> 00:06:10.285
<v Speaker 0>deployments, maybe.

00:06:11.565 --> 00:06:12.445
<v Speaker 0>See that the

00:06:13.245 --> 00:06:14.845
<v Speaker 0>this was scaled down. I don't know if

00:06:14.845 --> 00:06:17.165
<v Speaker 0>this is part of the puzzle, but let

00:06:17.725 --> 00:06:18.605
<v Speaker 0>let's

00:06:18.780 --> 00:06:20.139
<v Speaker 0>maybe we're

00:06:20.620 --> 00:06:22.540
<v Speaker 0>maybe there are notes here for us that

00:06:22.540 --> 00:06:24.220
<v Speaker 0>we can look at. So let me see.

00:06:26.060 --> 00:06:27.740
<v Speaker 0>Nope. No notes here.

00:06:28.060 --> 00:06:28.780
<v Speaker 0>Okay.

00:06:28.940 --> 00:06:29.500
<v Speaker 0>So

00:06:32.060 --> 00:06:32.860
<v Speaker 0>services,

00:06:33.500 --> 00:06:34.220
<v Speaker 0>ingresses.

00:06:34.795 --> 00:06:38.235
<v Speaker 0>Any ideas? David, please. Yeah. Yeah. So let

00:06:38.235 --> 00:06:39.515
<v Speaker 1>let me catch up there. I had to

00:06:39.515 --> 00:06:41.355
<v Speaker 1>refresh my screen just because there's there's a

00:06:41.355 --> 00:06:43.275
<v Speaker 1>weird bug in Teleport that's not gonna affect.

00:06:43.275 --> 00:06:45.515
<v Speaker 1>But you ran it get pods dash a.

00:06:45.515 --> 00:06:47.515
<v Speaker 1>Right? And I'm I kinda missed out there.

00:06:47.515 --> 00:06:49.639
<v Speaker 1>So what we see is this is a

00:06:49.639 --> 00:06:52.280
<v Speaker 1>pretty healthy looking cluster with the exception of

00:06:52.280 --> 00:06:54.120
<v Speaker 1>when you run get deploys,

00:06:55.080 --> 00:06:56.680
<v Speaker 1>it looks like a skilled then.

00:06:57.319 --> 00:06:59.560
<v Speaker 1>Mhmm. I I would suggest we just list

00:06:59.560 --> 00:07:01.560
<v Speaker 1>edit that deployment and check what the replicas

00:07:01.560 --> 00:07:03.000
<v Speaker 1>are set to, try and scale it back

00:07:03.000 --> 00:07:05.255
<v Speaker 1>up. I'm assuming it's not gonna be that

00:07:05.255 --> 00:07:08.055
<v Speaker 1>simple. However, we'll we'll find out. Trying to

00:07:08.055 --> 00:07:09.895
<v Speaker 1>look at Marcus's face and see if he's

00:07:09.895 --> 00:07:11.815
<v Speaker 1>laughing or sneaking or not. Yeah.

00:07:12.375 --> 00:07:14.615
<v Speaker 0>We need to we need to monitor Marcus.

00:07:14.615 --> 00:07:16.215
<v Speaker 0>So I'm gonna say one replica. Does that

00:07:16.215 --> 00:07:18.530
<v Speaker 0>sound good? Yeah. Go for it. One of

00:07:18.530 --> 00:07:19.650
<v Speaker 1>the things I love about this show is

00:07:19.650 --> 00:07:20.850
<v Speaker 1>just seeing the amount of ways that people

00:07:20.850 --> 00:07:22.930
<v Speaker 1>modify and interact with the manifest. I'm a

00:07:22.930 --> 00:07:24.530
<v Speaker 1>I'm a I'm a cube control edit kind

00:07:24.530 --> 00:07:25.970
<v Speaker 1>of person, but a lot of people like

00:07:25.970 --> 00:07:28.770
<v Speaker 1>doing like deploys and scales and stuff like

00:07:28.770 --> 00:07:29.570
<v Speaker 2>that. Yeah.

00:07:30.290 --> 00:07:32.130
<v Speaker 0>Sorry. I hope you can't hear that noise.

00:07:32.130 --> 00:07:33.785
<v Speaker 0>I I I'm in New York there's a

00:07:33.785 --> 00:07:36.185
<v Speaker 0>lot of noise outside. Hopefully you can No.

00:07:36.185 --> 00:07:37.225
<v Speaker 1>All good. Yeah.

00:07:37.945 --> 00:07:39.545
<v Speaker 0>Alright. So okay.

00:07:39.865 --> 00:07:40.345
<v Speaker 0>So

00:07:40.905 --> 00:07:43.065
<v Speaker 0>yeah. Go ahead. Sorry. I was just gonna

00:07:43.065 --> 00:07:44.265
<v Speaker 1>say your your skills are up to one

00:07:44.265 --> 00:07:46.025
<v Speaker 1>replica. We can see we have one desired

00:07:46.025 --> 00:07:48.825
<v Speaker 1>but we're we're not getting anything here.

00:07:49.570 --> 00:07:52.210
<v Speaker 1>No pods. Yeah. We've ran a replica set.

00:07:52.690 --> 00:07:53.170
<v Speaker 1>Mhmm.

00:07:53.810 --> 00:07:56.210
<v Speaker 1>Our control plane is potentially being played with

00:07:56.210 --> 00:07:57.250
<v Speaker 1>a little bit here.

00:07:58.530 --> 00:08:00.370
<v Speaker 0>I wanna look at, yeah, I wanna look

00:08:00.370 --> 00:08:02.210
<v Speaker 0>at the the deployment.

00:08:02.770 --> 00:08:06.435
<v Speaker 0>Think it's called Yeah. Plus third. Yeah. Thanks.

00:08:07.155 --> 00:08:09.555
<v Speaker 0>Alright. We just see that it's scaled. We're

00:08:09.555 --> 00:08:12.275
<v Speaker 0>not seeing any other events listed here.

00:08:12.995 --> 00:08:16.835
<v Speaker 0>Failed to create replica failure. This could be

00:08:20.460 --> 00:08:21.500
<v Speaker 0>interesting.

00:08:22.780 --> 00:08:25.020
<v Speaker 0>Yeah. Let's look at the the concern that

00:08:25.020 --> 00:08:27.500
<v Speaker 2>the break isn't the break that actually happens.

00:08:29.020 --> 00:08:31.500
<v Speaker 1>My first thought is the flags

00:08:31.500 --> 00:08:32.860
<v Speaker 1>on control

00:08:32.860 --> 00:08:36.645
<v Speaker 1>plane components. I've removed the replica set controller.

00:08:38.725 --> 00:08:39.605
<v Speaker 0>So

00:08:40.565 --> 00:08:42.885
<v Speaker 0>The flag the flag on on where? Sorry.

00:08:44.885 --> 00:08:46.645
<v Speaker 1>On the API server,

00:08:46.805 --> 00:08:48.725
<v Speaker 1>it's actually a controller of controllers.

00:08:49.930 --> 00:08:52.170
<v Speaker 1>And you can actually disable individual controllers like

00:08:52.170 --> 00:08:54.410
<v Speaker 1>the replica set controller or the pod controller.

00:08:54.810 --> 00:08:57.290
<v Speaker 1>I suspect that could potentially have been messed

00:08:57.290 --> 00:08:57.850
<v Speaker 1>with.

00:08:58.730 --> 00:09:00.970
<v Speaker 0>Let's let's look let's look at the cube

00:09:00.970 --> 00:09:01.690
<v Speaker 0>system,

00:09:01.850 --> 00:09:02.250
<v Speaker 0>actually.

00:09:03.050 --> 00:09:04.490
<v Speaker 0>Let's see if all our

00:09:04.995 --> 00:09:08.515
<v Speaker 0>what what's running in here? Etcd API server

00:09:08.515 --> 00:09:10.115
<v Speaker 0>controller manager

00:09:10.275 --> 00:09:11.235
<v Speaker 0>scheduler

00:09:12.035 --> 00:09:15.555
<v Speaker 0>core DNS. I mean, everything seems suspiciously

00:09:15.555 --> 00:09:16.515
<v Speaker 0>normal in here.

00:09:17.490 --> 00:09:19.490
<v Speaker 0>Oh, wait. I do see I do see

00:09:19.730 --> 00:09:21.570
<v Speaker 0>oh, that's the name of the cluster. Right?

00:09:21.570 --> 00:09:24.050
<v Speaker 0>This plague. That's your handle. Right? That's his

00:09:24.050 --> 00:09:25.890
<v Speaker 1>handle. Right? Time every time I see it

00:09:25.890 --> 00:09:28.210
<v Speaker 2>on screen, I'm, like, getting highlights. It's like

00:09:28.210 --> 00:09:29.970
<v Speaker 2>Slack highlights going off in my head.

00:09:30.855 --> 00:09:32.375
<v Speaker 2>I can't I

00:09:32.455 --> 00:09:34.135
<v Speaker 2>can't help but try to respond to the

00:09:34.135 --> 00:09:34.695
<v Speaker 2>screen.

00:09:35.975 --> 00:09:36.775
<v Speaker 0>Yeah.

00:09:37.175 --> 00:09:39.335
<v Speaker 0>So, David, you were saying you wanna look

00:09:39.335 --> 00:09:41.575
<v Speaker 0>at one of those controllers?

00:09:42.775 --> 00:09:45.175
<v Speaker 1>Yeah. Let let's let's go to the

00:09:45.860 --> 00:09:47.459
<v Speaker 1>the manifest directory,

00:09:47.699 --> 00:09:49.139
<v Speaker 1>and we'll see if Marcus has been kind

00:09:49.139 --> 00:09:49.699
<v Speaker 1>enough to

00:09:51.060 --> 00:09:53.060
<v Speaker 1>it doesn't look like anything's been modified, but

00:09:53.060 --> 00:09:55.380
<v Speaker 1>that doesn't really tell us anything. So

00:09:56.339 --> 00:09:58.100
<v Speaker 1>my first explanation was they should

00:09:58.755 --> 00:10:00.835
<v Speaker 1>Sorry? All those folks who go out all

00:10:00.835 --> 00:10:03.635
<v Speaker 2>those folks who go after file times like

00:10:03.875 --> 00:10:06.995
<v Speaker 2>this can be manipulated so easily. Yeah.

00:10:07.635 --> 00:10:09.635
<v Speaker 1>Yeah. I think on the cluster I broke,

00:10:09.635 --> 00:10:11.395
<v Speaker 1>I set them all to like nineteen forty

00:10:11.395 --> 00:10:12.770
<v Speaker 1>two or something like that.

00:10:13.250 --> 00:10:14.610
<v Speaker 1>Just to confuse people.

00:10:14.850 --> 00:10:15.810
<v Speaker 1>Alright. So

00:10:16.770 --> 00:10:17.970
<v Speaker 1>my gut tells me that we should be

00:10:17.970 --> 00:10:19.810
<v Speaker 1>looking on the API server here.

00:10:20.130 --> 00:10:21.410
<v Speaker 1>There is a

00:10:24.610 --> 00:10:24.930
<v Speaker 0>No.

00:10:25.905 --> 00:10:27.345
<v Speaker 0>What are we look are we looking for

00:10:27.345 --> 00:10:29.745
<v Speaker 0>honks? What are we looking for? Yeah.

00:10:30.385 --> 00:10:32.145
<v Speaker 1>Well, maybe I'm looking at the wrong one,

00:10:32.145 --> 00:10:33.185
<v Speaker 1>but there's

00:10:33.585 --> 00:10:35.585
<v Speaker 1>there's a flag you can pass to the

00:10:35.585 --> 00:10:36.465
<v Speaker 1>API server

00:10:37.950 --> 00:10:39.710
<v Speaker 1>to tell it which controller. Oh, in fact,

00:10:39.710 --> 00:10:42.270
<v Speaker 1>It's controller manager. I'm I'm being ridiculous.

00:10:42.670 --> 00:10:44.750
<v Speaker 0>Yeah. Maybe control manager. Let's see.

00:10:45.630 --> 00:10:48.270
<v Speaker 0>So what do we got here? Yeah. Here.

00:10:48.270 --> 00:10:49.310
<v Speaker 1>So this

00:10:51.435 --> 00:10:52.635
<v Speaker 1>modified controllers.

00:10:52.635 --> 00:10:54.635
<v Speaker 1>Now the star means run everything,

00:10:55.195 --> 00:10:57.835
<v Speaker 1>but you can actually do replica sets to

00:10:57.835 --> 00:11:00.475
<v Speaker 1>disable that controller, but I don't see that.

00:11:01.515 --> 00:11:03.515
<v Speaker 1>So there is my hypothesis.

00:11:04.795 --> 00:11:06.795
<v Speaker 0>The so the controller of controllers

00:11:07.389 --> 00:11:09.950
<v Speaker 0>is most likely running the

00:11:10.190 --> 00:11:12.190
<v Speaker 0>this that that specific control. They're having, like,

00:11:12.190 --> 00:11:13.470
<v Speaker 0>a set controller. Right?

00:11:14.110 --> 00:11:16.830
<v Speaker 1>So Right now, I would assume it's running.

00:11:16.910 --> 00:11:19.790
<v Speaker 1>So my next thought is we probably wanna

00:11:19.790 --> 00:11:21.630
<v Speaker 1>take a look at the logs of the

00:11:21.630 --> 00:11:22.510
<v Speaker 1>controller manager.

00:11:24.225 --> 00:11:25.745
<v Speaker 1>That's not sent to you. Okay.

00:11:26.625 --> 00:11:28.065
<v Speaker 0>Yeah. Sure.

00:11:28.464 --> 00:11:31.584
<v Speaker 0>Let's find the pod and cube system.

00:11:34.880 --> 00:11:36.560
<v Speaker 0>And I'll say logs,

00:11:36.560 --> 00:11:38.720
<v Speaker 0>tail I don't know. 100.

00:11:39.600 --> 00:11:42.720
<v Speaker 0>Oh, I have to say cube system. Sorry.

00:11:43.920 --> 00:11:45.200
<v Speaker 0>Alright. There you go.

00:11:46.480 --> 00:11:46.959
<v Speaker 0>Interesting.

00:11:49.305 --> 00:11:52.665
<v Speaker 0>Minimum CPU per container is one. Request is

00:11:52.665 --> 00:11:55.064
<v Speaker 0>500. Minimum memory usage is container is two

00:11:55.064 --> 00:11:57.065
<v Speaker 0>fifty six, but required one twenty eight.

00:11:57.944 --> 00:11:58.985
<v Speaker 0>Oh,

00:11:59.384 --> 00:12:00.505
<v Speaker 0>this okay.

00:12:01.305 --> 00:12:02.345
<v Speaker 0>This feels familiar.

00:12:04.320 --> 00:12:05.600
<v Speaker 0>I'll

00:12:05.600 --> 00:12:07.520
<v Speaker 0>say what I think is going on. It

00:12:07.520 --> 00:12:10.240
<v Speaker 0>it it might be a limit range going

00:12:10.240 --> 00:12:10.720
<v Speaker 0>on

00:12:11.120 --> 00:12:12.880
<v Speaker 0>in that namespace perhaps.

00:12:13.440 --> 00:12:16.000
<v Speaker 1>Yeah. Either the limit range has been set

00:12:16.000 --> 00:12:17.280
<v Speaker 1>of the namespace

00:12:17.280 --> 00:12:19.555
<v Speaker 1>or because of the deployment

00:12:19.715 --> 00:12:21.395
<v Speaker 1>has been modified. Yeah. I think we should

00:12:21.395 --> 00:12:22.195
<v Speaker 1>check both.

00:12:23.955 --> 00:12:26.515
<v Speaker 0>Okay. Do you wanna do one of them?

00:12:28.355 --> 00:12:29.555
<v Speaker 1>Sure.

00:12:29.555 --> 00:12:30.915
<v Speaker 1>Okay. So

00:12:32.100 --> 00:12:34.980
<v Speaker 1>I know what the manifest should look like.

00:12:34.980 --> 00:12:36.900
<v Speaker 1>So I'm gonna jump straight in

00:12:38.020 --> 00:12:39.300
<v Speaker 1>Yeah.

00:12:39.300 --> 00:12:42.420
<v Speaker 1>Into here. Alright. You're the main author. That's

00:12:42.420 --> 00:12:42.980
<v Speaker 0>right. Yeah.

00:12:43.615 --> 00:12:46.415
<v Speaker 1>Yeah. This is my my million dollar application.

00:12:47.455 --> 00:12:48.015
<v Speaker 1>So

00:12:49.535 --> 00:12:52.255
<v Speaker 0>Mark Marcus, you did you say something? Sorry.

00:12:52.255 --> 00:12:54.335
<v Speaker 2>No. I said that's just it's cheating that

00:12:54.335 --> 00:12:56.015
<v Speaker 2>he has the whole he's got, like, a

00:12:56.015 --> 00:12:57.535
<v Speaker 2>built in differ in his head.

00:12:58.779 --> 00:13:01.019
<v Speaker 1>Yeah. So I think it's probably gonna be

00:13:01.019 --> 00:13:03.420
<v Speaker 1>limit ranges. Do you wanna pull them out?

00:13:04.699 --> 00:13:06.860
<v Speaker 0>Yeah. Let's let's look at that. So limit

00:13:06.860 --> 00:13:07.740
<v Speaker 0>range.

00:13:09.100 --> 00:13:09.579
<v Speaker 1>Oh, look.

00:13:11.065 --> 00:13:13.625
<v Speaker 0>Default created on today.

00:13:13.704 --> 00:13:14.745
<v Speaker 0>Sometime today.

00:13:14.985 --> 00:13:17.305
<v Speaker 0>Okay. So let's describe it.

00:13:17.865 --> 00:13:19.945
<v Speaker 0>Limit range default.

00:13:20.024 --> 00:13:20.584
<v Speaker 0>Oops.

00:13:22.264 --> 00:13:23.144
<v Speaker 0>I got it here.

00:13:23.960 --> 00:13:25.800
<v Speaker 0>Okay. So so that's

00:13:25.960 --> 00:13:27.800
<v Speaker 0>it looks like we found the first

00:13:28.280 --> 00:13:29.080
<v Speaker 0>main

00:13:29.800 --> 00:13:30.520
<v Speaker 0>issue.

00:13:31.160 --> 00:13:33.400
<v Speaker 0>Let's see what happens. Should we turn it

00:13:33.400 --> 00:13:35.000
<v Speaker 0>off or delete it, or do you wanna

00:13:35.000 --> 00:13:37.800
<v Speaker 0>change the resources on the deployment? Either one

00:13:37.800 --> 00:13:38.440
<v Speaker 0>would work. Right?

00:13:39.605 --> 00:13:42.005
<v Speaker 1>We could just delete that limit range. That's

00:13:42.005 --> 00:13:43.605
<v Speaker 1>that's not doing us any favors.

00:13:44.485 --> 00:13:47.765
<v Speaker 0>Alright. Let's do it. So delete limit range.

00:13:48.245 --> 00:13:49.205
<v Speaker 0>I'm gonna say

00:13:51.579 --> 00:13:53.899
<v Speaker 0>you know, it's funny because I'm laughing because

00:13:53.899 --> 00:13:56.380
<v Speaker 0>I I had similar ideas when I was

00:13:56.380 --> 00:13:58.779
<v Speaker 0>thinking about the cluster the cluster that I

00:13:58.779 --> 00:14:01.420
<v Speaker 0>would break. So this is that that's awesome.

00:14:02.620 --> 00:14:05.005
<v Speaker 0>Yeah. The limit rate. And that customer I

00:14:05.005 --> 00:14:06.685
<v Speaker 1>broke, I used limit range as well because

00:14:06.685 --> 00:14:08.845
<v Speaker 1>I thought they're so esoteric. Nobody would know

00:14:08.845 --> 00:14:09.805
<v Speaker 1>to look there.

00:14:10.125 --> 00:14:12.605
<v Speaker 1>And they apparently, everybody just knows limit ranges

00:14:12.605 --> 00:14:13.645
<v Speaker 1>are a thing. So

00:14:14.605 --> 00:14:16.125
<v Speaker 0>I I guess so.

00:14:16.365 --> 00:14:18.365
<v Speaker 0>If anyone didn't know there, now you know.

00:14:20.519 --> 00:14:22.760
<v Speaker 0>Okay. So should we look at the logs

00:14:22.760 --> 00:14:24.680
<v Speaker 0>again? Because I'm not seeing the pod show

00:14:24.680 --> 00:14:26.279
<v Speaker 0>up. So Yeah. I think that's a good

00:14:26.279 --> 00:14:26.760
<v Speaker 1>idea.

00:14:28.040 --> 00:14:28.600
<v Speaker 0>Oh, I

00:14:29.480 --> 00:14:31.959
<v Speaker 0>I'm typing, but I'm not getting any feedback.

00:14:31.959 --> 00:14:33.765
<v Speaker 0>Do you mind typing it instead? Because it's

00:14:33.765 --> 00:14:35.685
<v Speaker 0>it's not typing for me. Yeah.

00:14:37.845 --> 00:14:38.885
<v Speaker 1>Danger.

00:14:40.565 --> 00:14:43.285
<v Speaker 0>Uh-oh. Okay. I'll I'll rejoin I'll refresh and

00:14:43.285 --> 00:14:45.285
<v Speaker 0>rejoin the session. Yeah. I'm gonna relook today.

00:14:47.970 --> 00:14:48.850
<v Speaker 0>Reload.

00:14:50.530 --> 00:14:52.050
<v Speaker 0>Uh-oh. Uh-oh.

00:14:53.330 --> 00:14:55.330
<v Speaker 1>I While while I was breaking it, my

00:14:55.330 --> 00:14:57.570
<v Speaker 2>Wi Fi, like, cut out while I was

00:14:57.570 --> 00:14:59.330
<v Speaker 2>doing it, and I worried that I had

00:14:59.330 --> 00:14:59.890
<v Speaker 2>done

00:15:00.210 --> 00:15:02.210
<v Speaker 2>something I had not intended to do.

00:15:04.125 --> 00:15:05.964
<v Speaker 0>Oh, man. I no I don't think I

00:15:05.964 --> 00:15:07.644
<v Speaker 0>have access to

00:15:08.764 --> 00:15:11.485
<v Speaker 1>Yeah. I think Teleport is down.

00:15:15.324 --> 00:15:16.845
<v Speaker 1>Marcus, did you Teleport?

00:15:17.870 --> 00:15:20.029
<v Speaker 2>I my hands are right here.

00:15:23.070 --> 00:15:25.070
<v Speaker 0>The wait. Did we did we do something

00:15:25.070 --> 00:15:26.510
<v Speaker 0>that broke teleport?

00:15:26.670 --> 00:15:28.910
<v Speaker 0>I mean, all we did was delete the

00:15:28.910 --> 00:15:31.470
<v Speaker 0>limit range. Could that have

00:15:32.084 --> 00:15:33.605
<v Speaker 1>delete

00:15:34.004 --> 00:15:36.884
<v Speaker 1>happy kind of debugger. I suspect the max

00:15:36.884 --> 00:15:38.644
<v Speaker 1>of one gig on the memory

00:15:38.964 --> 00:15:41.685
<v Speaker 1>potentially let something loose. But I didn't see

00:15:41.685 --> 00:15:43.285
<v Speaker 1>any other pods running on the system.

00:15:44.259 --> 00:15:46.980
<v Speaker 0>The the the tell was was Teleport

00:15:48.420 --> 00:15:50.259
<v Speaker 0>did it go out of memory or something?

00:15:50.259 --> 00:15:52.100
<v Speaker 0>I don't know. Something happened for sure. Should

00:15:52.180 --> 00:15:54.019
<v Speaker 1>well, let's ask Marcus. Should Teleport still be

00:15:54.019 --> 00:15:54.579
<v Speaker 1>working?

00:15:55.139 --> 00:15:56.500
<v Speaker 2>It should still be working as far as

00:15:56.500 --> 00:15:58.740
<v Speaker 2>I know. Yeah. Although it's great to watch

00:15:58.740 --> 00:16:01.425
<v Speaker 2>you, like, just, like, paint this bridge that

00:16:01.425 --> 00:16:02.545
<v Speaker 2>you're gonna drive down and

00:16:03.665 --> 00:16:06.545
<v Speaker 1>Alright. So as a backup, I've if you

00:16:06.545 --> 00:16:08.225
<v Speaker 1>wanna just jump over to my screen share,

00:16:08.225 --> 00:16:10.225
<v Speaker 1>we'll try and SSH up to the host.

00:16:10.465 --> 00:16:12.065
<v Speaker 0>Yeah. Yeah. Yeah. Sounds good. The host is

00:16:12.065 --> 00:16:14.865
<v Speaker 1>done. Oh, there we go. Okay. So

00:16:17.880 --> 00:16:19.400
<v Speaker 1>Marcus, what have you done?

00:16:20.600 --> 00:16:23.080
<v Speaker 1>It's it's How how are the other nodes?

00:16:23.640 --> 00:16:24.360
<v Speaker 1>Well,

00:16:24.920 --> 00:16:27.080
<v Speaker 1>yeah, I guess. I've got I've filled up

00:16:27.080 --> 00:16:29.160
<v Speaker 1>the portal, but, yeah, why don't I try

00:16:29.160 --> 00:16:29.959
<v Speaker 1>another node first?

00:16:31.214 --> 00:16:32.735
<v Speaker 0>Oh, yeah. Yeah. Let's try the work. The

00:16:32.735 --> 00:16:35.855
<v Speaker 2>coincidence the the timing is uncanny, but Yeah.

00:16:35.935 --> 00:16:38.015
<v Speaker 2>I really don't think I I

00:16:39.455 --> 00:16:40.895
<v Speaker 2>don't think I triggered this.

00:16:42.175 --> 00:16:44.350
<v Speaker 0>Let's see. So the other so yes. Something

00:16:44.350 --> 00:16:46.670
<v Speaker 1>happened. When we deleted that limit range, there's

00:16:46.670 --> 00:16:47.470
<v Speaker 1>been a

00:16:48.110 --> 00:16:49.390
<v Speaker 1>causal event.

00:16:51.790 --> 00:16:54.110
<v Speaker 0>It feels, yeah, it feels almost like a

00:16:54.110 --> 00:16:54.430
<v Speaker 0>direct

00:16:55.805 --> 00:16:57.805
<v Speaker 0>side of The teleport's back. It's back. It's

00:16:57.805 --> 00:17:00.925
<v Speaker 0>back. Okay. Okay. Go. Go. Go. Alright.

00:17:01.245 --> 00:17:02.365
<v Speaker 0>Refreshing. Our

00:17:03.725 --> 00:17:05.005
<v Speaker 1>session is still there.

00:17:05.645 --> 00:17:06.204
<v Speaker 1>Yeah.

00:17:06.925 --> 00:17:09.085
<v Speaker 1>Let's see if the CPUs went

00:17:09.244 --> 00:17:09.645
<v Speaker 1>wild.

00:17:10.450 --> 00:17:11.810
<v Speaker 1>The API server

00:17:12.050 --> 00:17:13.250
<v Speaker 1>no. That's okay.

00:17:13.410 --> 00:17:16.690
<v Speaker 1>Load average actually hasn't changed. Okay. That that

00:17:16.690 --> 00:17:18.530
<v Speaker 1>timing is uncanny, but I think it was

00:17:22.765 --> 00:17:23.484
<v Speaker 0>Yeah.

00:17:23.804 --> 00:17:25.005
<v Speaker 0>I'm

00:17:25.005 --> 00:17:26.924
<v Speaker 0>looking at the I'm looking, yeah, I'm looking

00:17:26.924 --> 00:17:27.724
<v Speaker 0>at the

00:17:28.525 --> 00:17:30.205
<v Speaker 0>the the what's it called?

00:17:30.765 --> 00:17:33.885
<v Speaker 0>The three CPU metrics, and everything looks

00:17:34.780 --> 00:17:36.139
<v Speaker 0>looks okay.

00:17:36.540 --> 00:17:38.540
<v Speaker 0>Yeah. I I think it's fine. I think

00:17:38.540 --> 00:17:39.259
<v Speaker 1>that was

00:17:40.059 --> 00:17:42.140
<v Speaker 1>I I don't really believe in coincidences,

00:17:42.140 --> 00:17:43.419
<v Speaker 1>but it must have been a coincidence. I

00:17:43.980 --> 00:17:45.420
<v Speaker 0>mean, we can we can look at the

00:17:45.420 --> 00:17:47.764
<v Speaker 0>teleport pod and see what happened. Right? Yeah.

00:17:47.764 --> 00:17:49.284
<v Speaker 1>It's running on a host because I don't

00:17:49.284 --> 00:17:50.485
<v Speaker 1>trust people not to kill it in a

00:17:50.485 --> 00:17:53.684
<v Speaker 1>container. Oh, gotcha. Gotcha. Okay. Okay. So,

00:17:54.164 --> 00:17:56.164
<v Speaker 0>Marcus, how are we doing? Give us, like,

00:17:56.164 --> 00:17:58.085
<v Speaker 0>a a maybe a little hint.

00:17:58.085 --> 00:17:59.284
<v Speaker 0>How are we doing? Are we okay? Are

00:17:59.284 --> 00:18:01.445
<v Speaker 0>we doing good? Or No. Doing good.

00:18:02.130 --> 00:18:03.570
<v Speaker 2>Like like I said, I I

00:18:06.610 --> 00:18:08.529
<v Speaker 2>I love the paths that you're

00:18:08.690 --> 00:18:09.570
<v Speaker 2>setting

00:18:10.930 --> 00:18:13.730
<v Speaker 2>and that you're exploring. I think it's kinda

00:18:13.730 --> 00:18:16.210
<v Speaker 2>giving giving me some insight into things to

00:18:16.210 --> 00:18:17.410
<v Speaker 2>look for in your cluster.

00:18:18.184 --> 00:18:21.465
<v Speaker 2>So keep keep playing those tabs and Okay.

00:18:21.385 --> 00:18:22.664
<v Speaker 0>And take note.

00:18:23.065 --> 00:18:23.865
<v Speaker 1>Alright.

00:18:24.585 --> 00:18:26.825
<v Speaker 1>So looking at logs, it looks like we

00:18:26.825 --> 00:18:28.664
<v Speaker 1>got a pod created.

00:18:30.585 --> 00:18:31.945
<v Speaker 0>Oh, image pull

00:18:32.750 --> 00:18:35.390
<v Speaker 0>Back off. Okay. Good. Let me just pop

00:18:35.550 --> 00:18:37.310
<v Speaker 1>this terminal up so that I'll cut off

00:18:37.310 --> 00:18:38.190
<v Speaker 1>that. And,

00:18:38.910 --> 00:18:40.910
<v Speaker 1>Khalid said, just joined, what am I missing?

00:18:40.910 --> 00:18:42.910
<v Speaker 1>I'll do a quick ten second summary while

00:18:42.910 --> 00:18:43.710
<v Speaker 1>we do that.

00:18:44.110 --> 00:18:46.670
<v Speaker 1>Currently, Moody and I are working on Marcus's

00:18:46.670 --> 00:18:47.070
<v Speaker 1>cluster.

00:18:48.225 --> 00:18:50.785
<v Speaker 1>Marcus used a limit range to stop our

00:18:50.785 --> 00:18:54.384
<v Speaker 1>clustered pod from being created, which we've deleted,

00:18:54.465 --> 00:18:56.705
<v Speaker 1>and that blew up our cluster, but magically

00:18:56.705 --> 00:18:58.065
<v Speaker 1>it came back. We don't know why. We're

00:18:58.065 --> 00:18:58.784
<v Speaker 1>not gonna

00:18:59.105 --> 00:19:00.545
<v Speaker 1>yeah. Actually, if that just now.

00:19:01.370 --> 00:19:03.290
<v Speaker 1>We're now seeing an image pull back off

00:19:03.290 --> 00:19:05.930
<v Speaker 1>error on our containers, our pod.

00:19:05.930 --> 00:19:07.370
<v Speaker 1>And it looks like

00:19:09.850 --> 00:19:13.530
<v Speaker 1>we're getting a forbidden from GitHub container registry,

00:19:13.530 --> 00:19:15.530
<v Speaker 1>which is a Four

00:19:15.075 --> 00:19:16.274
<v Speaker 0>four zero three. Yeah.

00:19:17.715 --> 00:19:18.354
<v Speaker 0>So

00:19:19.155 --> 00:19:20.595
<v Speaker 0>is that well,

00:19:20.995 --> 00:19:22.674
<v Speaker 0>I'm gonna assume this is part of the

00:19:22.674 --> 00:19:23.315
<v Speaker 0>plan

00:19:23.554 --> 00:19:26.034
<v Speaker 0>and that there's probably some

00:19:27.235 --> 00:19:29.554
<v Speaker 0>like, maybe a image do we have an

00:19:29.554 --> 00:19:30.355
<v Speaker 0>image pull secret,

00:19:30.889 --> 00:19:32.570
<v Speaker 0>I guess, on this? Yeah. I think so.

00:19:32.570 --> 00:19:34.330
<v Speaker 1>Like, this is a public repository and a

00:19:34.330 --> 00:19:36.409
<v Speaker 1>public image. The only way this error I

00:19:36.409 --> 00:19:38.490
<v Speaker 1>think would happen is if someone added Docker

00:19:38.490 --> 00:19:41.610
<v Speaker 1>cred style secret for that domain, which we

00:19:41.610 --> 00:19:42.250
<v Speaker 1>don't need.

00:19:42.825 --> 00:19:45.465
<v Speaker 1>So So let's yeah. Let's take a look

00:19:45.465 --> 00:19:46.264
<v Speaker 0>at the

00:19:46.904 --> 00:19:48.745
<v Speaker 0>I guess there's two places I can think

00:19:48.745 --> 00:19:51.705
<v Speaker 0>of the deployment itself or the pod,

00:19:52.424 --> 00:19:54.024
<v Speaker 0>which actually we have up here. So let's

00:19:54.024 --> 00:19:55.864
<v Speaker 0>look. Is there an image pull

00:19:56.745 --> 00:19:58.679
<v Speaker 0>is there an image pull secret here? I

00:19:58.679 --> 00:20:00.600
<v Speaker 0>don't I'm not seeing one. If we run

00:20:00.600 --> 00:20:03.399
<v Speaker 1>a k get secrets, we'll be able to

00:20:03.399 --> 00:20:04.599
<v Speaker 1>see if there's anything

00:20:04.840 --> 00:20:06.919
<v Speaker 1>configured on the namespace.

00:20:07.320 --> 00:20:07.960
<v Speaker 1>Is there

00:20:08.520 --> 00:20:10.840
<v Speaker 1>oh, yeah. There is. There's a docker config

00:20:10.840 --> 00:20:11.880
<v Speaker 1>JSON called Kubernetes.

00:20:12.595 --> 00:20:13.475
<v Speaker 1>Kubernetes.

00:20:13.555 --> 00:20:14.835
<v Speaker 1>Yeah. Which I think is to find

00:20:15.475 --> 00:20:16.995
<v Speaker 1>hide the fact that it's

00:20:17.475 --> 00:20:18.115
<v Speaker 1>weird.

00:20:19.395 --> 00:20:20.835
<v Speaker 0>But would it be would it be here,

00:20:20.835 --> 00:20:23.155
<v Speaker 0>you think? If I say I don't know.

00:20:23.155 --> 00:20:24.275
<v Speaker 0>Yeah. Get the deployment

00:20:24.830 --> 00:20:28.270
<v Speaker 0>in YAML format. Would we hopefully see a

00:20:28.270 --> 00:20:29.309
<v Speaker 0>Kubernetes

00:20:29.390 --> 00:20:30.990
<v Speaker 0>image pull secret here?

00:20:31.950 --> 00:20:33.389
<v Speaker 0>Image pull policy.

00:20:34.430 --> 00:20:36.750
<v Speaker 1>The secret will be configured with a a

00:20:36.750 --> 00:20:38.029
<v Speaker 1>registry domain.

00:20:38.590 --> 00:20:39.630
<v Speaker 1>Do you mind if I type?

00:20:40.155 --> 00:20:42.635
<v Speaker 0>Yeah. Sorry. Go for it. Yeah. So if

00:20:42.635 --> 00:20:44.875
<v Speaker 1>we do a get Kubernetes dash o y

00:20:44.875 --> 00:20:45.674
<v Speaker 1>m o.

00:20:49.835 --> 00:20:51.515
<v Speaker 1>I really need to upgrade these clusters to

00:20:51.515 --> 00:20:52.635
<v Speaker 1>one two one and get rid of all

00:20:52.635 --> 00:20:55.115
<v Speaker 1>this in here. Am I missing it?

00:20:56.420 --> 00:20:58.660
<v Speaker 0>I'm thinking the server maybe it's in the

00:20:58.660 --> 00:20:59.539
<v Speaker 0>service account.

00:21:00.179 --> 00:21:02.420
<v Speaker 0>What do you like a like, service accounts

00:21:02.420 --> 00:21:04.980
<v Speaker 0>can have image pull secrets. Maybe

00:21:05.780 --> 00:21:08.595
<v Speaker 0>we maybe we can describe that. I don't

00:21:08.595 --> 00:21:10.914
<v Speaker 0>know. But, yeah, let's look at this first.

00:21:11.155 --> 00:21:12.755
<v Speaker 0>Bananas. There we go.

00:21:15.395 --> 00:21:16.995
<v Speaker 0>There it is. But

00:21:17.395 --> 00:21:20.035
<v Speaker 0>it was attached somehow to that service account.

00:21:20.035 --> 00:21:22.675
<v Speaker 0>Right? So can we describe the the default

00:21:22.675 --> 00:21:25.289
<v Speaker 0>service account? I don't think that's

00:21:25.850 --> 00:21:28.970
<v Speaker 1>how the oh, maybe I'm completely wrong. So

00:21:30.490 --> 00:21:31.210
<v Speaker 1>I

00:21:32.570 --> 00:21:33.289
<v Speaker 0>don't know.

00:21:33.850 --> 00:21:34.730
<v Speaker 0>I'll

00:21:34.730 --> 00:21:36.785
<v Speaker 0>I'll it just for for the exercise. Yeah.

00:21:36.785 --> 00:21:38.624
<v Speaker 1>Please. Yeah. I'm curious, Niro.

00:21:39.184 --> 00:21:41.345
<v Speaker 1>Because I thought I think the secret exists,

00:21:41.345 --> 00:21:44.304
<v Speaker 1>it gets hard. There there you go. Yeah.

00:21:44.304 --> 00:21:46.225
<v Speaker 0>I knew it. I felt it. Nice.

00:21:46.705 --> 00:21:49.184
<v Speaker 1>See? I'm learning shit. So I'm happy.

00:21:50.700 --> 00:21:52.700
<v Speaker 0>Oh my god. Marcus,

00:21:52.700 --> 00:21:53.019
<v Speaker 0>your

00:21:53.500 --> 00:21:54.219
<v Speaker 0>our

00:21:54.620 --> 00:21:56.059
<v Speaker 0>thought process is

00:21:56.620 --> 00:21:57.820
<v Speaker 0>very aligned

00:21:57.820 --> 00:22:01.019
<v Speaker 0>even though yeah. So it's that's crazy. That's

00:22:01.019 --> 00:22:01.260
<v Speaker 0>awesome.

00:22:03.065 --> 00:22:06.184
<v Speaker 1>Alright. So we should either modify that service

00:22:06.184 --> 00:22:08.264
<v Speaker 1>account to remove the pool secret.

00:22:10.665 --> 00:22:12.184
<v Speaker 0>What do you yeah. What do you do

00:22:12.184 --> 00:22:13.545
<v Speaker 0>you think yeah. Should we edit

00:22:14.265 --> 00:22:16.030
<v Speaker 0>you like to do keep still edit, so

00:22:16.030 --> 00:22:17.710
<v Speaker 0>let's do that. I I love a good

00:22:17.710 --> 00:22:19.550
<v Speaker 1>edit. Push me in Vim. I'm happy in

00:22:19.550 --> 00:22:20.190
<v Speaker 1>Vim. So

00:22:22.110 --> 00:22:24.669
<v Speaker 0>Alright. So I guess we can remove the

00:22:25.550 --> 00:22:28.030
<v Speaker 0>the no. No. The top image push secrets.

00:22:28.455 --> 00:22:30.614
<v Speaker 0>Yeah. Yeah. We could just delete those.

00:22:31.575 --> 00:22:33.014
<v Speaker 0>Okay. So now

00:22:34.215 --> 00:22:36.054
<v Speaker 0>I think if we delete the pod, it

00:22:36.054 --> 00:22:36.774
<v Speaker 0>should just

00:22:37.495 --> 00:22:39.094
<v Speaker 0>fix itself, hopefully.

00:22:40.294 --> 00:22:41.174
<v Speaker 0>Hopefully,

00:22:41.815 --> 00:22:42.934
<v Speaker 1>it's my favorite part too.

00:22:43.580 --> 00:22:45.580
<v Speaker 0>Yeah. I mean or it will take us

00:22:45.580 --> 00:22:47.420
<v Speaker 0>to the next piece of the puzzle. We'll

00:22:47.420 --> 00:22:47.899
<v Speaker 0>see.

00:22:50.220 --> 00:22:51.660
<v Speaker 1>Don't need to wait on that. Let's just

00:22:51.660 --> 00:22:52.620
<v Speaker 1>see what's happening.

00:22:52.940 --> 00:22:54.700
<v Speaker 1>We got container creating.

00:22:55.020 --> 00:22:55.899
<v Speaker 0>Creating.

00:22:56.380 --> 00:22:56.860
<v Speaker 1>Looks good.

00:22:59.985 --> 00:23:00.785
<v Speaker 0>Alright.

00:23:00.945 --> 00:23:02.545
<v Speaker 0>I think we can maybe look at the

00:23:02.545 --> 00:23:04.305
<v Speaker 0>logs if we have to, but this looks

00:23:04.305 --> 00:23:04.785
<v Speaker 0>good.

00:23:05.505 --> 00:23:07.665
<v Speaker 0>Nice. Good job. Well,

00:23:08.465 --> 00:23:10.945
<v Speaker 1>we're still missing our database container.

00:23:11.105 --> 00:23:11.185
<v Speaker 1>Oh,

00:23:13.350 --> 00:23:15.910
<v Speaker 0>so do we have a stateful set or

00:23:15.910 --> 00:23:16.950
<v Speaker 0>something? Oh, yeah.

00:23:17.429 --> 00:23:18.070
<v Speaker 0>Okay.

00:23:18.630 --> 00:23:21.270
<v Speaker 0>So I'm I'm internally fuming because I think

00:23:21.270 --> 00:23:23.749
<v Speaker 2>one of my barriers didn't go up. But

00:23:25.830 --> 00:23:27.030
<v Speaker 1>Maybe you could tell us a bit of

00:23:27.030 --> 00:23:29.335
<v Speaker 1>that when we go through the next hard

00:23:29.335 --> 00:23:29.815
<v Speaker 1>build.

00:23:30.695 --> 00:23:32.455
<v Speaker 1>I think that's the best part about cluster.

00:23:32.455 --> 00:23:33.815
<v Speaker 1>That you do all these things and then

00:23:33.815 --> 00:23:35.414
<v Speaker 1>you hope that they fall in a certain

00:23:35.414 --> 00:23:37.575
<v Speaker 1>way and then it just doesn't really work

00:23:37.575 --> 00:23:38.294
<v Speaker 1>that way.

00:23:38.934 --> 00:23:39.815
<v Speaker 1>Alright.

00:23:39.815 --> 00:23:41.895
<v Speaker 1>Do you wanna describe our Postgres and we'll

00:23:41.895 --> 00:23:43.015
<v Speaker 1>see what's happening here?

00:23:43.740 --> 00:23:44.460
<v Speaker 0>Sure.

00:23:44.940 --> 00:23:47.820
<v Speaker 0>Stateful set PostgresQL.

00:23:48.860 --> 00:23:50.940
<v Speaker 0>Nothing. I think I had nothing. Know STS

00:23:50.940 --> 00:23:52.940
<v Speaker 1>was a shorthand for Stateful set.

00:23:53.580 --> 00:23:55.500
<v Speaker 0>Oh, yeah. I I use it all the

00:23:55.500 --> 00:23:55.980
<v Speaker 0>time.

00:23:56.380 --> 00:23:57.740
<v Speaker 0>The the there was a

00:23:58.345 --> 00:24:00.585
<v Speaker 0>was it API resources that shows you these

00:24:00.585 --> 00:24:01.065
<v Speaker 0>things?

00:24:02.025 --> 00:24:03.945
<v Speaker 0>I believe. Yeah. So you can look and

00:24:03.945 --> 00:24:04.825
<v Speaker 0>you can run

00:24:05.225 --> 00:24:09.305
<v Speaker 0>kubectl API resources and see all the abbreviations

00:24:09.385 --> 00:24:10.265
<v Speaker 0>in here.

00:24:10.585 --> 00:24:12.265
<v Speaker 0>So I I just picked them up as

00:24:12.265 --> 00:24:14.980
<v Speaker 0>I go. So you'll probably find stateful yeah.

00:24:14.980 --> 00:24:16.580
<v Speaker 0>There's the stateful set one.

00:24:17.460 --> 00:24:18.259
<v Speaker 1>Nice.

00:24:18.900 --> 00:24:22.100
<v Speaker 0>Cool. So but yeah. Back to what we're

00:24:22.100 --> 00:24:23.539
<v Speaker 0>doing. I think we just need to scale

00:24:23.539 --> 00:24:25.700
<v Speaker 0>up this stateful set to I think it's

00:24:25.700 --> 00:24:27.140
<v Speaker 0>scaled down. So

00:24:28.175 --> 00:24:29.934
<v Speaker 0>let me just scale it up if that

00:24:29.934 --> 00:24:31.294
<v Speaker 0>sounds good to you.

00:24:33.775 --> 00:24:34.894
<v Speaker 1>We got

00:24:35.295 --> 00:24:37.294
<v Speaker 1>more people joining late.

00:24:37.535 --> 00:24:40.175
<v Speaker 1>This is the episode 13 curse because I

00:24:40.175 --> 00:24:42.015
<v Speaker 1>had the YouTube time wrong,

00:24:42.015 --> 00:24:44.369
<v Speaker 1>I'm afraid. But thanks for joining anyway.

00:24:44.929 --> 00:24:46.289
<v Speaker 1>And you can always catch the Maybe

00:24:48.450 --> 00:24:50.370
<v Speaker 0>it's maybe it's not maybe it's not a

00:24:50.370 --> 00:24:51.329
<v Speaker 0>curse because

00:24:51.649 --> 00:24:54.849
<v Speaker 0>that means more broken clusters, more broken things,

00:24:55.490 --> 00:24:57.409
<v Speaker 0>which is which is I guess a positive

00:24:57.409 --> 00:24:59.025
<v Speaker 0>in this context. Yeah.

00:24:59.985 --> 00:25:01.665
<v Speaker 0>I'm not seeing anything here.

00:25:03.185 --> 00:25:03.825
<v Speaker 0>Interesting.

00:25:04.385 --> 00:25:05.825
<v Speaker 1>Yeah. We got a class we got a

00:25:05.825 --> 00:25:08.145
<v Speaker 1>pod that can't terminate and we got our

00:25:08.145 --> 00:25:10.385
<v Speaker 1>stateful set which hasn't been scheduled.

00:25:10.945 --> 00:25:12.305
<v Speaker 1>Do we have a replica set for a

00:25:12.305 --> 00:25:14.660
<v Speaker 1>stateful set? Oh, no. Didn't get replica set.

00:25:14.660 --> 00:25:15.620
<v Speaker 1>This would be a part.

00:25:16.260 --> 00:25:18.340
<v Speaker 1>Oh. Oh, a little more limits.

00:25:19.540 --> 00:25:22.179
<v Speaker 0>Another limit issue. The failed quota.

00:25:22.500 --> 00:25:25.380
<v Speaker 1>Uh-huh. Default must specify limits.

00:25:25.380 --> 00:25:27.845
<v Speaker 0>Oh, this okay. So now we're oh, this

00:25:27.845 --> 00:25:29.845
<v Speaker 0>is different. So this is almost like

00:25:30.565 --> 00:25:31.365
<v Speaker 0>either

00:25:32.885 --> 00:25:35.285
<v Speaker 0>well, it's coming from the stateful set controller.

00:25:35.285 --> 00:25:37.365
<v Speaker 0>So this is the first thing I look

00:25:37.365 --> 00:25:39.765
<v Speaker 0>for is where this event is coming from.

00:25:39.765 --> 00:25:41.125
<v Speaker 0>So that means it's probably

00:25:41.840 --> 00:25:43.840
<v Speaker 0>a native Kubernetes thing

00:25:44.640 --> 00:25:45.679
<v Speaker 0>such as

00:25:46.320 --> 00:25:49.520
<v Speaker 0>pod security policy or something like that. Well,

00:25:49.520 --> 00:25:51.600
<v Speaker 1>there is this resource quotas on the namespace

00:25:51.600 --> 00:25:53.520
<v Speaker 1>that we should probably check if they exist.

00:25:54.475 --> 00:25:58.634
<v Speaker 0>Oh, yeah. Yeah. Okay. So get resource

00:25:58.875 --> 00:25:59.594
<v Speaker 0>quota.

00:26:00.794 --> 00:26:02.714
<v Speaker 0>I've rarely had to use this

00:26:03.755 --> 00:26:06.235
<v Speaker 0>the resource quotas, but that's I'm learning. So

00:26:07.970 --> 00:26:10.850
<v Speaker 0>request dot CPU, request dot memory. So it

00:26:10.850 --> 00:26:11.970
<v Speaker 0>looks like it's

00:26:12.770 --> 00:26:13.250
<v Speaker 0>it's

00:26:13.730 --> 00:26:15.330
<v Speaker 0>I'm trying to read the complaint here. So

00:26:15.330 --> 00:26:17.090
<v Speaker 0>it's forbidden because

00:26:17.330 --> 00:26:19.330
<v Speaker 0>you must specify a limit

00:26:19.570 --> 00:26:21.410
<v Speaker 0>for each of those. I see. So we

00:26:21.410 --> 00:26:23.650
<v Speaker 0>can either specify the limit or delete the

00:26:23.945 --> 00:26:25.384
<v Speaker 0>source quota?

00:26:26.265 --> 00:26:28.425
<v Speaker 1>I'm a big fan of the sledgehammer delete

00:26:28.425 --> 00:26:29.065
<v Speaker 1>approach.

00:26:30.184 --> 00:26:32.825
<v Speaker 1>But don't don't let me gauge you.

00:26:33.705 --> 00:26:35.065
<v Speaker 0>Oh, you you wanna do it? Go for

00:26:35.065 --> 00:26:36.505
<v Speaker 0>it. Yeah. No. No. I said don't let

00:26:36.505 --> 00:26:37.785
<v Speaker 1>me lead you down a dark path. If

00:26:37.785 --> 00:26:38.905
<v Speaker 1>you don't want me to delete it, just

00:26:38.905 --> 00:26:40.550
<v Speaker 1>tell me to shut up. But if you're

00:26:40.550 --> 00:26:41.990
<v Speaker 1>happy to delete it, I think we delete

00:26:41.990 --> 00:26:42.549
<v Speaker 1>it. I

00:26:43.030 --> 00:26:44.870
<v Speaker 0>love it. I love it. Sledgehammer.

00:26:45.030 --> 00:26:46.149
<v Speaker 0>Let's do it.

00:26:47.030 --> 00:26:49.990
<v Speaker 0>Alright. Let's hope we hope that the stateful

00:26:49.990 --> 00:26:51.029
<v Speaker 0>set controller

00:26:52.230 --> 00:26:54.150
<v Speaker 0>picks this up. I might have to

00:26:55.695 --> 00:26:57.934
<v Speaker 0>scale up and down or something to trigger

00:26:57.934 --> 00:26:59.054
<v Speaker 0>it. It's not

00:26:59.615 --> 00:27:02.255
<v Speaker 1>Yeah. We may have to describe the stateful

00:27:02.255 --> 00:27:03.134
<v Speaker 1>set again.

00:27:03.934 --> 00:27:04.894
<v Speaker 0>Describe

00:27:05.054 --> 00:27:05.294
<v Speaker 0>state

00:27:06.095 --> 00:27:06.975
<v Speaker 0>stateful

00:27:06.975 --> 00:27:09.530
<v Speaker 0>set postgresql.

00:27:11.130 --> 00:27:13.770
<v Speaker 0>That's still upset. Maybe there's a retry.

00:27:14.650 --> 00:27:16.410
<v Speaker 0>It's like doing a back off kind of

00:27:16.410 --> 00:27:17.530
<v Speaker 0>thing. So maybe

00:27:19.690 --> 00:27:20.010
<v Speaker 0>yeah.

00:27:21.815 --> 00:27:24.934
<v Speaker 1>That could be a validating web controller,

00:27:25.095 --> 00:27:25.654
<v Speaker 1>maybe.

00:27:26.535 --> 00:27:28.615
<v Speaker 0>Okay. Yeah. Let's look at that.

00:27:29.174 --> 00:27:30.375
<v Speaker 0>Validating

00:27:30.695 --> 00:27:34.855
<v Speaker 1>Never, my web Configurations.

00:27:34.855 --> 00:27:35.095
<v Speaker 1>Yeah.

00:27:36.140 --> 00:27:38.140
<v Speaker 0>No. All namespaces?

00:27:38.140 --> 00:27:39.099
<v Speaker 0>No? Okay.

00:27:40.539 --> 00:27:42.700
<v Speaker 0>I'll also look at me just just so

00:27:42.700 --> 00:27:44.460
<v Speaker 0>we know. We should have done this earlier.

00:27:44.539 --> 00:27:46.620
<v Speaker 0>Just, like, so we can rule this out.

00:27:46.620 --> 00:27:49.419
<v Speaker 0>Good. So none of that. Can we look

00:27:49.419 --> 00:27:50.059
<v Speaker 0>at

00:27:50.595 --> 00:27:51.715
<v Speaker 0>pods again?

00:27:52.195 --> 00:27:53.394
<v Speaker 0>Oh, it is not.

00:27:53.955 --> 00:27:54.835
<v Speaker 0>Pending.

00:27:56.355 --> 00:27:58.115
<v Speaker 1>Pending is not normally a good thing.

00:27:59.475 --> 00:28:00.914
<v Speaker 0>Spry pod.

00:28:01.155 --> 00:28:04.240
<v Speaker 0>What is another piece of the puzzle maybe?

00:28:05.120 --> 00:28:07.280
<v Speaker 0>Oh god. Okay. So

00:28:09.280 --> 00:28:10.640
<v Speaker 0>alright. So we have

00:28:10.960 --> 00:28:12.080
<v Speaker 0>how are we on time, by the way?

00:28:12.080 --> 00:28:13.440
<v Speaker 0>I wanna make sure we're we're doing good.

00:28:13.440 --> 00:28:14.960
<v Speaker 0>Oh. We're we're good. We got we got

00:28:14.960 --> 00:28:16.640
<v Speaker 1>fifteen minutes there.

00:28:16.960 --> 00:28:18.000
<v Speaker 0>Oh, nice. Okay.

00:28:19.145 --> 00:28:19.945
<v Speaker 0>Alright.

00:28:20.265 --> 00:28:23.625
<v Speaker 0>So, obviously, Affinity, there's a taint that we're

00:28:23.625 --> 00:28:24.904
<v Speaker 0>not tolerating

00:28:25.625 --> 00:28:26.744
<v Speaker 0>that's called

00:28:27.625 --> 00:28:28.744
<v Speaker 0>master

00:28:31.625 --> 00:28:33.705
<v Speaker 0>okay. So

00:28:33.169 --> 00:28:35.729
<v Speaker 0>maybe we edit the stateful set and

00:28:35.890 --> 00:28:37.570
<v Speaker 0>either remove the that

00:28:38.210 --> 00:28:40.850
<v Speaker 0>or let's see. Maybe the nodes are tainted.

00:28:40.850 --> 00:28:43.009
<v Speaker 0>Right? So if I say get nodes,

00:28:43.090 --> 00:28:45.249
<v Speaker 0>is it show taints? Is that a flag?

00:28:45.970 --> 00:28:47.570
<v Speaker 0>I know there's a show labels,

00:28:49.054 --> 00:28:51.695
<v Speaker 0>look at that too. But maybe the labels

00:28:51.695 --> 00:28:52.815
<v Speaker 0>were edited.

00:28:53.294 --> 00:28:55.855
<v Speaker 1>Just do a get node stash o yaml

00:28:55.855 --> 00:28:58.015
<v Speaker 1>and just let it list them all straight

00:28:58.015 --> 00:28:58.575
<v Speaker 1>up.

00:28:59.455 --> 00:29:00.414
<v Speaker 0>Like that? Yeah.

00:29:03.350 --> 00:29:05.509
<v Speaker 0>And then I do like that show labels.

00:29:08.549 --> 00:29:10.230
<v Speaker 0>Yeah. It comes in handy. Oh,

00:29:11.669 --> 00:29:13.590
<v Speaker 0>go ahead. Sorry. I I like the way

00:29:13.590 --> 00:29:17.195
<v Speaker 2>you're, like, spelling out mutating webhook and configuration

00:29:17.195 --> 00:29:19.115
<v Speaker 2>as though as though that's not what you

00:29:19.115 --> 00:29:20.554
<v Speaker 2>used in yours. So

00:29:21.035 --> 00:29:22.235
<v Speaker 2>I'm on to you.

00:29:25.355 --> 00:29:28.955
<v Speaker 0>I'm not gonna answer just to keep things

00:29:28.240 --> 00:29:29.200
<v Speaker 0>suspenseful.

00:29:32.399 --> 00:29:34.159
<v Speaker 0>I'm looking for taints here. Should I just

00:29:34.159 --> 00:29:36.799
<v Speaker 0>grep or something? This is a little noisy.

00:29:36.799 --> 00:29:38.640
<v Speaker 1>It is noisy. Right. Yeah. Just why don't

00:29:38.640 --> 00:29:40.320
<v Speaker 1>we just describe one of the nodes maybe

00:29:40.320 --> 00:29:41.360
<v Speaker 1>or or do that. Yeah.

00:29:42.225 --> 00:29:42.945
<v Speaker 0>Yeah.

00:29:43.265 --> 00:29:45.825
<v Speaker 0>Tate, so I see here there's a only

00:29:45.825 --> 00:29:48.065
<v Speaker 0>the master node is it look I I'm

00:29:48.065 --> 00:29:49.745
<v Speaker 0>guessing this is the master node that has

00:29:49.745 --> 00:29:50.304
<v Speaker 0>this

00:29:50.625 --> 00:29:53.345
<v Speaker 0>thing. So we should just edit the stateful

00:29:53.345 --> 00:29:53.905
<v Speaker 0>set, I think,

00:29:55.790 --> 00:29:57.390
<v Speaker 0>and just look at what the heck is

00:29:57.390 --> 00:29:58.909
<v Speaker 0>going on with affinity

00:29:59.310 --> 00:30:00.190
<v Speaker 0>or

00:30:00.350 --> 00:30:02.750
<v Speaker 0>note selector or something like that. What's that?

00:30:02.750 --> 00:30:03.389
<v Speaker 0>Sorry.

00:30:04.110 --> 00:30:05.950
<v Speaker 1>Yeah. You're right on it. There's a note

00:30:05.950 --> 00:30:07.310
<v Speaker 1>selector for named PostgreSQL.

00:30:10.225 --> 00:30:10.864
<v Speaker 0>Yeah.

00:30:12.705 --> 00:30:14.225
<v Speaker 0>I don't remember seeing

00:30:14.544 --> 00:30:16.624
<v Speaker 0>it's like, a label like that.

00:30:18.705 --> 00:30:20.945
<v Speaker 0>But why is it try Remove it. What

00:30:21.505 --> 00:30:23.940
<v Speaker 0>Yeah. We should remove it. I I'm I'm

00:30:23.940 --> 00:30:26.100
<v Speaker 0>just really wondering something else now is why

00:30:26.100 --> 00:30:26.979
<v Speaker 0>did it say

00:30:27.860 --> 00:30:30.100
<v Speaker 0>that it that it's it can't tolerate the

00:30:30.100 --> 00:30:30.739
<v Speaker 0>the

00:30:31.140 --> 00:30:33.940
<v Speaker 0>the master. I guess it's trying it's it's

00:30:33.940 --> 00:30:35.460
<v Speaker 0>just one of the things that failed, I

00:30:35.460 --> 00:30:37.985
<v Speaker 0>guess. So it's trying to find this label.

00:30:37.985 --> 00:30:39.985
<v Speaker 0>It can't find it and it also doesn't

00:30:39.985 --> 00:30:42.544
<v Speaker 0>tolerate the master. Yeah. So I think here

00:30:42.544 --> 00:30:44.784
<v Speaker 1>the node selector is trying to play it.

00:30:44.945 --> 00:30:46.465
<v Speaker 1>Let's yeah. You're right. Let's walk it through

00:30:46.465 --> 00:30:48.225
<v Speaker 1>before we go delete it. So let's drop

00:30:48.225 --> 00:30:49.664
<v Speaker 1>it at s and run get nodes again

00:30:49.664 --> 00:30:52.065
<v Speaker 1>and then let's describe our control plane node

00:30:52.730 --> 00:30:54.570
<v Speaker 1>or show labels. Yeah. Maybe that would maybe

00:30:54.570 --> 00:30:55.770
<v Speaker 1>that shows what we need.

00:30:56.570 --> 00:30:58.810
<v Speaker 0>So yeah. So we wanna look for like

00:30:58.810 --> 00:30:59.850
<v Speaker 0>a Postgres

00:31:00.170 --> 00:31:00.890
<v Speaker 0>here.

00:31:01.130 --> 00:31:03.450
<v Speaker 0>Sorry. I too much text.

00:31:04.490 --> 00:31:06.810
<v Speaker 0>Okay. So there's no Postgres label anywhere.

00:31:07.605 --> 00:31:10.404
<v Speaker 0>Yet somehow it was complaining about the

00:31:11.205 --> 00:31:14.405
<v Speaker 0>not tolerating the master taint or something that

00:31:14.405 --> 00:31:17.285
<v Speaker 0>looked kinda like this, like mast IO slash

00:31:17.285 --> 00:31:18.004
<v Speaker 0>master.

00:31:18.325 --> 00:31:20.485
<v Speaker 1>Yeah. I expected to see a label for

00:31:20.485 --> 00:31:23.060
<v Speaker 1>the node selector to resolve to the control

00:31:23.060 --> 00:31:24.179
<v Speaker 1>plane and

00:31:24.500 --> 00:31:25.860
<v Speaker 1>that didn't happen.

00:31:26.740 --> 00:31:28.500
<v Speaker 0>That's an inter yeah. That I find that

00:31:28.500 --> 00:31:32.260
<v Speaker 0>interesting that the error is almost misleading.

00:31:32.580 --> 00:31:34.180
<v Speaker 0>Let's look at it one more time. Sorry.

00:31:36.955 --> 00:31:39.115
<v Speaker 0>So we solved that we solved that. Oh,

00:31:39.115 --> 00:31:40.394
<v Speaker 0>sorry. The pod. So

00:31:41.195 --> 00:31:42.794
<v Speaker 0>describe pod, Postgres,

00:31:43.755 --> 00:31:44.634
<v Speaker 0>l zero.

00:31:46.875 --> 00:31:47.755
<v Speaker 2>Too many s's.

00:31:48.870 --> 00:31:49.750
<v Speaker 0>Sorry.

00:31:50.390 --> 00:31:52.550
<v Speaker 0>Yeah. So That's the only clue. That's the

00:31:52.550 --> 00:31:53.590
<v Speaker 2>only hint I give.

00:31:56.950 --> 00:31:59.270
<v Speaker 0>Very generous. Thank you. So

00:32:01.110 --> 00:32:03.270
<v Speaker 0>oh, I see. So one node had a

00:32:03.270 --> 00:32:03.750
<v Speaker 0>taint

00:32:04.265 --> 00:32:05.065
<v Speaker 0>master

00:32:05.625 --> 00:32:08.505
<v Speaker 0>that the pod didn't tolerate. Three nodes didn't

00:32:08.505 --> 00:32:10.105
<v Speaker 0>match the pod. Okay. Got it. Got it.

00:32:10.105 --> 00:32:12.345
<v Speaker 0>So I only read the first part. So

00:32:12.345 --> 00:32:14.825
<v Speaker 0>it's trying to the first so the control

00:32:14.825 --> 00:32:16.745
<v Speaker 0>plane, it couldn't schedule

00:32:16.745 --> 00:32:17.705
<v Speaker 0>there because

00:32:17.865 --> 00:32:20.649
<v Speaker 0>of not tolerating that taint. I wonder if

00:32:20.649 --> 00:32:22.570
<v Speaker 1>this is like a default behavior. If your

00:32:22.570 --> 00:32:25.210
<v Speaker 1>node selector fails, does it automatically default like

00:32:25.210 --> 00:32:27.370
<v Speaker 1>the control plane because it would assume those

00:32:27.370 --> 00:32:30.169
<v Speaker 1>exist and then the taint there is causing

00:32:30.169 --> 00:32:31.609
<v Speaker 1>the weird error message.

00:32:33.049 --> 00:32:33.450
<v Speaker 1>Yeah.

00:32:34.255 --> 00:32:36.095
<v Speaker 1>So we Like, if we change the I'm

00:32:36.095 --> 00:32:37.695
<v Speaker 1>curious. If we change the node selector to

00:32:37.695 --> 00:32:39.375
<v Speaker 1>be named Moodie,

00:32:39.375 --> 00:32:41.054
<v Speaker 1>do we still get the same error? Like,

00:32:41.054 --> 00:32:43.455
<v Speaker 1>is it defaulting to that control plane? Got

00:32:43.455 --> 00:32:45.374
<v Speaker 0>it. Yeah. Yeah. Uh-oh.

00:32:45.775 --> 00:32:47.934
<v Speaker 1>Has it gone again? Think my sec my

00:32:47.934 --> 00:32:48.495
<v Speaker 0>session

00:32:48.735 --> 00:32:49.135
<v Speaker 0>oh, no.

00:32:50.309 --> 00:32:52.789
<v Speaker 0>Oh, no. Did we did we cause Teleport

00:32:52.789 --> 00:32:54.309
<v Speaker 0>to crash again? Oh, no.

00:32:58.789 --> 00:33:00.309
<v Speaker 0>Yeah. Teleport is down again.

00:33:02.725 --> 00:33:04.485
<v Speaker 1>I'm on. I I often think that this

00:33:04.485 --> 00:33:06.804
<v Speaker 2>show should be, like, sponsored by Teleport, and

00:33:06.804 --> 00:33:07.284
<v Speaker 2>then

00:33:07.684 --> 00:33:09.284
<v Speaker 2>you run into these things. And I'm like,

00:33:09.284 --> 00:33:11.124
<v Speaker 2>ah, I know why the sponsor's on here.

00:33:11.845 --> 00:33:14.004
<v Speaker 1>I don't think that Teleport is the problem

00:33:14.004 --> 00:33:16.325
<v Speaker 1>here. I think it's you, Marcus,

00:33:17.029 --> 00:33:19.749
<v Speaker 1>and you're you're

00:33:19.750 --> 00:33:21.429
<v Speaker 1>breaking of clusters.

00:33:27.510 --> 00:33:29.590
<v Speaker 1>Hopefully, it comes back again in a minute.

00:33:29.909 --> 00:33:31.350
<v Speaker 2>I really do think it's just timing.

00:33:33.085 --> 00:33:35.405
<v Speaker 1>Yeah. Do you have any rogue processes on

00:33:35.405 --> 00:33:38.045
<v Speaker 1>this machine doing nefarious activities? Is there a

00:33:38.045 --> 00:33:40.045
<v Speaker 1>Bitcoin miner on my hardware, Marcus?

00:33:40.925 --> 00:33:43.565
<v Speaker 2>There are no Bitcoin miners on your hardware.

00:33:44.365 --> 00:33:46.925
<v Speaker 0>All only only Ethereum, Cardano, and.

00:33:49.060 --> 00:33:51.220
<v Speaker 1>Yeah. The comment. I saw messing with Teleport

00:33:51.220 --> 00:33:52.740
<v Speaker 1>was a big no no. It is a

00:33:52.740 --> 00:33:54.660
<v Speaker 1>big no no. We don't we don't break

00:33:54.660 --> 00:33:55.540
<v Speaker 1>Teleport.

00:33:56.180 --> 00:33:57.940
<v Speaker 0>I think I think we're back. I think

00:33:57.940 --> 00:33:59.380
<v Speaker 0>it just came back online.

00:34:00.180 --> 00:34:02.305
<v Speaker 2>And what are all the rules again? Just

00:34:02.305 --> 00:34:04.945
<v Speaker 2>to restate them all. Like, rules and the

00:34:05.025 --> 00:34:07.025
<v Speaker 2>what the expectation is. You cannot break the

00:34:07.025 --> 00:34:09.425
<v Speaker 1>bootloader, and you must not break Teleport.

00:34:10.784 --> 00:34:12.784
<v Speaker 2>And then what what is the the goal

00:34:12.784 --> 00:34:13.824
<v Speaker 2>of the

00:34:13.920 --> 00:34:16.719
<v Speaker 2>the whole session is to have what happened?

00:34:18.239 --> 00:34:20.400
<v Speaker 1>For us to be able to modify the

00:34:20.400 --> 00:34:22.799
<v Speaker 1>cluster deployment from version one to version two

00:34:22.799 --> 00:34:24.799
<v Speaker 1>and then browse to it and see a

00:34:24.799 --> 00:34:25.839
<v Speaker 1>cloud native quote.

00:34:28.475 --> 00:34:30.795
<v Speaker 1>Okay. So let's test our theory there. We

00:34:30.795 --> 00:34:32.315
<v Speaker 1>are back. I don't know.

00:34:33.275 --> 00:34:35.195
<v Speaker 1>Did I what kind of hardware did I

00:34:35.195 --> 00:34:36.715
<v Speaker 1>throw in this? Is this just a shitty

00:34:36.715 --> 00:34:37.355
<v Speaker 1>box?

00:34:38.074 --> 00:34:39.275
<v Speaker 0>I don't know. Yeah.

00:34:40.920 --> 00:34:43.960
<v Speaker 0>Oh, yeah. At this point, we're we're investigating

00:34:44.199 --> 00:34:46.199
<v Speaker 0>to the teleport issue,

00:34:46.440 --> 00:34:48.119
<v Speaker 0>but I think we should maybe

00:34:48.440 --> 00:34:50.199
<v Speaker 1>Yeah. This box is fine. Okay. Hopefully, it

00:34:50.199 --> 00:34:51.239
<v Speaker 1>doesn't happen again.

00:34:51.719 --> 00:34:52.119
<v Speaker 1>Okay.

00:34:54.144 --> 00:34:56.304
<v Speaker 1>Let's so I had a theory and I'm

00:34:56.304 --> 00:34:58.944
<v Speaker 1>curious, but please if you've got anything better,

00:34:58.944 --> 00:35:01.585
<v Speaker 1>let's say, let's jump. Yeah. Yeah. Shoot. But

00:35:01.585 --> 00:35:03.904
<v Speaker 1>I think I wanna try editing this node

00:35:03.904 --> 00:35:04.704
<v Speaker 1>selector

00:35:05.930 --> 00:35:07.530
<v Speaker 1>to see if Oh, yeah. Still get the

00:35:07.530 --> 00:35:09.770
<v Speaker 1>same message. I'm wondering if it if it's

00:35:09.770 --> 00:35:12.330
<v Speaker 1>doing some sort of weird default policy here

00:35:12.570 --> 00:35:14.730
<v Speaker 1>where if it can't match the selector,

00:35:15.290 --> 00:35:17.130
<v Speaker 1>it just says, okay, you probably just wanna

00:35:17.130 --> 00:35:18.730
<v Speaker 1>run this on the control plane. Although I

00:35:18.730 --> 00:35:20.250
<v Speaker 1>would expect a better error message.

00:35:21.135 --> 00:35:22.095
<v Speaker 0>Yeah.

00:35:22.095 --> 00:35:23.055
<v Speaker 0>Let's take a look.

00:35:25.615 --> 00:35:28.175
<v Speaker 0>Oh, it looks oh, wait. Seventy five seconds

00:35:28.175 --> 00:35:29.775
<v Speaker 0>feels too long ago.

00:35:30.255 --> 00:35:31.695
<v Speaker 1>I'm gonna delete it.

00:35:32.495 --> 00:35:34.015
<v Speaker 0>Yeah. Sounds good.

00:35:34.920 --> 00:35:38.119
<v Speaker 1>3Period04.

00:35:38.119 --> 00:35:40.520
<v Speaker 0>The sledgehammer just keeps coming. Yeah.

00:35:42.520 --> 00:35:44.520
<v Speaker 1>I know. I have a I used to

00:35:44.520 --> 00:35:45.800
<v Speaker 1>tell a story about when I was an

00:35:45.800 --> 00:35:47.865
<v Speaker 1>SRE formerly. And like if I got paged

00:35:47.865 --> 00:35:49.145
<v Speaker 1>in the middle the night because of a

00:35:49.145 --> 00:35:51.145
<v Speaker 1>desk would fill up, I would just blow

00:35:51.145 --> 00:35:53.545
<v Speaker 1>away Varlib log and go back to sleep.

00:35:53.785 --> 00:35:54.345
<v Speaker 1>I

00:35:55.065 --> 00:35:56.665
<v Speaker 1>do like my sledgehammers.

00:35:57.865 --> 00:35:58.265
<v Speaker 0>Awesome.

00:35:59.640 --> 00:36:01.480
<v Speaker 0>Okay. So Same message. Exact

00:36:01.799 --> 00:36:04.519
<v Speaker 0>same error. So it's I guess the part

00:36:04.519 --> 00:36:06.200
<v Speaker 0>I'm looking at is the second part. Three

00:36:06.200 --> 00:36:08.920
<v Speaker 0>nodes or, I guess, worker nodes probably

00:36:09.160 --> 00:36:12.440
<v Speaker 0>didn't match the pod's node affinity. So let's

00:36:12.440 --> 00:36:14.714
<v Speaker 0>just take it out. You're yeah. Let's just

00:36:14.714 --> 00:36:16.714
<v Speaker 0>remove the node selector. Do you want me

00:36:16.714 --> 00:36:18.474
<v Speaker 0>to do that? Yeah. Go for it. Yeah.

00:36:19.035 --> 00:36:20.635
<v Speaker 1>And let's just throw it in there. Let's

00:36:20.635 --> 00:36:21.835
<v Speaker 1>make sure there's no other

00:36:23.595 --> 00:36:24.555
<v Speaker 1>scheduling

00:36:24.555 --> 00:36:25.914
<v Speaker 1>annotations of anything.

00:36:27.240 --> 00:36:29.800
<v Speaker 0>Okay. Yeah. So let's look for tolerations.

00:36:29.880 --> 00:36:31.480
<v Speaker 0>Nothing. Let's look for

00:36:31.960 --> 00:36:32.760
<v Speaker 0>affinity.

00:36:32.920 --> 00:36:33.720
<v Speaker 0>Nothing.

00:36:33.960 --> 00:36:34.760
<v Speaker 0>Nothing.

00:36:34.760 --> 00:36:37.640
<v Speaker 0>I think this should be it. Yeah. Let

00:36:37.800 --> 00:36:40.200
<v Speaker 0>let's test. Let's see. Edited

00:36:40.680 --> 00:36:41.400
<v Speaker 0>odds.

00:36:43.035 --> 00:36:43.915
<v Speaker 0>Come on.

00:36:45.194 --> 00:36:45.915
<v Speaker 0>Sure.

00:36:47.434 --> 00:36:48.395
<v Speaker 0>I

00:36:50.875 --> 00:36:53.035
<v Speaker 0>love how we're just killing database pods. Like,

00:36:53.035 --> 00:36:54.795
<v Speaker 0>it's like, oh, yeah. It's just a database.

00:36:54.795 --> 00:36:56.474
<v Speaker 1>Just kill it. The data's loaded in a

00:36:56.474 --> 00:36:58.234
<v Speaker 1>in a container, but we are past pending.

00:36:58.530 --> 00:36:58.850
<v Speaker 1>So

00:36:59.570 --> 00:37:01.890
<v Speaker 0>Oh, yeah. Okay. It's it's looks like we

00:37:02.130 --> 00:37:04.690
<v Speaker 0>yeah. We got past this part. Let's see

00:37:04.690 --> 00:37:05.250
<v Speaker 0>what

00:37:05.650 --> 00:37:07.250
<v Speaker 0>else is gonna come up now.

00:37:08.770 --> 00:37:09.970
<v Speaker 0>Alright. It's good.

00:37:10.930 --> 00:37:11.490
<v Speaker 0>Awesome.

00:37:12.275 --> 00:37:15.315
<v Speaker 1>Okay. Let's try and browse through our application.

00:37:15.315 --> 00:37:17.155
<v Speaker 1>I'll run a put forward locally.

00:37:17.875 --> 00:37:19.715
<v Speaker 1>Okay. I was trying to be time sensitive

00:37:19.715 --> 00:37:21.555
<v Speaker 2>too. Like, I'm wondering if I'm, like,

00:37:21.955 --> 00:37:24.275
<v Speaker 2>coming right up on a forty minute solve.

00:37:24.930 --> 00:37:25.490
<v Speaker 2>But,

00:37:25.970 --> 00:37:27.890
<v Speaker 2>yeah, as as I'm seeing things, it's like,

00:37:27.890 --> 00:37:29.810
<v Speaker 2>you know, there there was that opportunity.

00:37:29.810 --> 00:37:31.490
<v Speaker 2>There was that thing I considered doing that

00:37:31.490 --> 00:37:33.170
<v Speaker 2>I didn't do, and that would've been great

00:37:33.170 --> 00:37:34.050
<v Speaker 2>right about now.

00:37:34.530 --> 00:37:35.170
<v Speaker 0>Yeah.

00:37:35.410 --> 00:37:37.250
<v Speaker 0>I mean, did we finish do you think

00:37:37.250 --> 00:37:38.130
<v Speaker 0>we finished everything

00:37:38.775 --> 00:37:40.535
<v Speaker 0>that you wanted us to work on

00:37:41.255 --> 00:37:44.135
<v Speaker 0>that you planned? Did your evil plan work,

00:37:44.135 --> 00:37:46.215
<v Speaker 0>or did we not finish the task?

00:37:46.454 --> 00:37:46.855
<v Speaker 2>Well, I

00:37:47.815 --> 00:37:50.135
<v Speaker 2>Alright. Our application is working.

00:37:50.135 --> 00:37:52.135
<v Speaker 1>Although the video doesn't work in Firefox,

00:37:52.135 --> 00:37:53.335
<v Speaker 1>so let's confirm.

00:37:53.840 --> 00:37:57.120
<v Speaker 2>This this website broke my Chrome really hard.

00:37:57.120 --> 00:37:58.480
<v Speaker 2>Like, the the Chrome

00:37:58.720 --> 00:37:59.760
<v Speaker 2>the UI,

00:37:59.760 --> 00:38:02.000
<v Speaker 2>the the the borders the window borders on

00:38:02.000 --> 00:38:04.000
<v Speaker 2>a Mac were flickering red,

00:38:04.240 --> 00:38:05.760
<v Speaker 2>which I don't think is a thing that

00:38:05.760 --> 00:38:06.880
<v Speaker 2>you're supposed to be able to do.

00:38:07.704 --> 00:38:09.545
<v Speaker 2>It was only my only time I've ever

00:38:09.545 --> 00:38:10.985
<v Speaker 2>seen it is loading that website.

00:38:12.105 --> 00:38:14.585
<v Speaker 0>I've I've had this Chrome issue. I had

00:38:14.585 --> 00:38:15.625
<v Speaker 0>to turn off

00:38:15.865 --> 00:38:17.944
<v Speaker 0>I've I hate this bug, by the way.

00:38:17.944 --> 00:38:19.065
<v Speaker 0>It's a bug in Chrome

00:38:19.305 --> 00:38:22.240
<v Speaker 0>when accelerated graphics are turned on. If you

00:38:22.240 --> 00:38:25.280
<v Speaker 0>turn off accelerated graphics in Chrome, it might

00:38:25.680 --> 00:38:26.880
<v Speaker 0>fix the issue.

00:38:30.320 --> 00:38:33.280
<v Speaker 1>And Yeah. It's We have a fixed cluster.

00:38:33.440 --> 00:38:35.120
<v Speaker 2>Do we know that it's the right version?

00:38:35.120 --> 00:38:36.160
<v Speaker 2>How do you know if it's the right

00:38:36.160 --> 00:38:36.480
<v Speaker 2>version?

00:38:38.435 --> 00:38:39.155
<v Speaker 0>Oh,

00:38:39.555 --> 00:38:40.915
<v Speaker 0>the version of

00:38:41.475 --> 00:38:43.715
<v Speaker 2>The image? The image. Yeah.

00:38:46.355 --> 00:38:47.715
<v Speaker 1>It's a different video.

00:38:49.395 --> 00:38:50.515
<v Speaker 2>It's a different video.

00:38:51.710 --> 00:38:53.630
<v Speaker 0>I think the text If you can't see,

00:38:53.630 --> 00:38:55.789
<v Speaker 2>it's a different thing. Come on. Work. I

00:38:55.789 --> 00:38:57.950
<v Speaker 0>I think the title on top was was

00:38:57.950 --> 00:39:00.750
<v Speaker 0>different. May your bag something something? I don't

00:39:00.750 --> 00:39:02.589
<v Speaker 2>know. Oh, yeah. That's it's just cloud native

00:39:02.589 --> 00:39:04.349
<v Speaker 1>quotes from It's a brand name. People of

00:39:04.349 --> 00:39:06.030
<v Speaker 1>the Kubernetes community that tweeted.

00:39:06.595 --> 00:39:08.595
<v Speaker 1>I mean, I can always open this in

00:39:09.715 --> 00:39:11.715
<v Speaker 1>Chrome and then my computer Just see, like,

00:39:11.715 --> 00:39:14.035
<v Speaker 2>what the running pod is. There's something

00:39:14.035 --> 00:39:15.955
<v Speaker 2>that I'm not sure if it's

00:39:17.235 --> 00:39:19.155
<v Speaker 2>if it's working as expect if it's not

00:39:19.155 --> 00:39:20.035
<v Speaker 2>working as expected.

00:39:20.470 --> 00:39:22.870
<v Speaker 1>Alright. Let's try opening Chrome. And, hopefully, my

00:39:22.870 --> 00:39:24.310
<v Speaker 1>computer doesn't fall over.

00:39:30.150 --> 00:39:32.870
<v Speaker 1>Here. If you could just check the

00:39:34.055 --> 00:39:36.135
<v Speaker 1>I'm a fan, dude, that you need proof.

00:39:36.135 --> 00:39:38.454
<v Speaker 1>I mean I need proof. I need proof.

00:39:38.454 --> 00:39:40.214
<v Speaker 0>He needs proof. No. I maybe that's I

00:39:40.214 --> 00:39:41.654
<v Speaker 2>expected something

00:39:42.295 --> 00:39:44.375
<v Speaker 2>I mean, there's still something that's

00:39:45.015 --> 00:39:47.850
<v Speaker 2>staring you in the face that's, like, you're

00:39:47.850 --> 00:39:48.570
<v Speaker 2>ignoring.

00:39:48.650 --> 00:39:50.810
<v Speaker 2>But it's it's not a problem if if

00:39:50.810 --> 00:39:52.810
<v Speaker 2>the site works, so fair enough.

00:39:54.090 --> 00:39:56.090
<v Speaker 0>Nice. Yeah. He's giving us a clue a

00:39:56.090 --> 00:39:57.930
<v Speaker 0>clue, David. He's he's trying to help us.

00:39:57.930 --> 00:39:58.250
<v Speaker 0>Yeah.

00:40:00.535 --> 00:40:02.375
<v Speaker 2>Well, I mean, if your if your perspective

00:40:02.375 --> 00:40:04.855
<v Speaker 2>is that everything is working, then everything's working.

00:40:04.855 --> 00:40:06.935
<v Speaker 2>So I I can't I can't argue with

00:40:06.935 --> 00:40:07.415
<v Speaker 2>that.

00:40:10.215 --> 00:40:11.655
<v Speaker 1>Port forward.

00:40:12.055 --> 00:40:13.335
<v Speaker 1>Running container

00:40:13.415 --> 00:40:13.815
<v Speaker 1>ET.

00:40:16.140 --> 00:40:16.860
<v Speaker 0>Okay.

00:40:17.819 --> 00:40:18.620
<v Speaker 1>Reload.

00:40:21.339 --> 00:40:23.180
<v Speaker 1>I really have to rebuild this app and

00:40:23.180 --> 00:40:24.060
<v Speaker 1>make it less shit.

00:40:29.385 --> 00:40:32.505
<v Speaker 0>Yeah. I I struggled with the video streaming

00:40:32.905 --> 00:40:34.665
<v Speaker 0>as well, but I don't know why. Yeah.

00:40:34.665 --> 00:40:36.185
<v Speaker 2>I don't I didn't I I don't expect

00:40:36.185 --> 00:40:38.585
<v Speaker 2>that I broke the video. I'm just how

00:40:38.585 --> 00:40:39.865
<v Speaker 2>do we know that this is the right

00:40:39.865 --> 00:40:40.665
<v Speaker 2>version of

00:40:41.010 --> 00:40:41.970
<v Speaker 2>of the app?

00:40:42.450 --> 00:40:44.610
<v Speaker 0>Let's yeah. Let's let's look at the

00:40:44.850 --> 00:40:47.570
<v Speaker 0>the actual deploy the pod, maybe? The pod

00:40:47.650 --> 00:40:49.730
<v Speaker 0>describe the pod and see what the heck,

00:40:50.530 --> 00:40:52.370
<v Speaker 0>yeah, that's going on. It could it could

00:40:52.370 --> 00:40:54.290
<v Speaker 2>very well be the right one, and I'm

00:40:54.290 --> 00:40:55.170
<v Speaker 2>just

00:40:55.785 --> 00:40:56.825
<v Speaker 2>I'm just

00:40:57.704 --> 00:41:00.185
<v Speaker 2>salty that things didn't go as planned.

00:41:00.984 --> 00:41:02.984
<v Speaker 0>Gonna yeah. I'm gonna describe the pod and

00:41:02.984 --> 00:41:03.465
<v Speaker 0>see.

00:41:04.505 --> 00:41:05.465
<v Speaker 0>It's saying

00:41:06.184 --> 00:41:08.744
<v Speaker 0>the image looks right. Yep. V two It

00:41:08.744 --> 00:41:09.224
<v Speaker 2>looks good.

00:41:10.630 --> 00:41:13.510
<v Speaker 1>Alright. Salty Marcus is then we Salty is.

00:41:13.510 --> 00:41:15.510
<v Speaker 2>Yes. Fixed the cluster

00:41:16.230 --> 00:41:18.470
<v Speaker 1>just in the nick of time. Good job.

00:41:19.590 --> 00:41:21.750
<v Speaker 0>Nice. So so are you gonna give us

00:41:21.750 --> 00:41:23.030
<v Speaker 0>the the debrief, Marcus?

00:41:23.595 --> 00:41:25.675
<v Speaker 2>Yeah. So, I mean, the the thing that

00:41:25.675 --> 00:41:26.395
<v Speaker 2>I thought

00:41:27.515 --> 00:41:28.475
<v Speaker 2>there there

00:41:29.355 --> 00:41:29.595
<v Speaker 2>were

00:41:32.635 --> 00:41:34.555
<v Speaker 2>the thing that I thought would have triggered

00:41:34.555 --> 00:41:35.195
<v Speaker 2>here

00:41:35.355 --> 00:41:37.515
<v Speaker 2>is the reason why you have the terminating

00:41:37.515 --> 00:41:38.235
<v Speaker 2>pod still,

00:41:38.920 --> 00:41:41.240
<v Speaker 2>and that's that there's a finalizer that I

00:41:41.240 --> 00:41:44.040
<v Speaker 2>put into the into the deployment

00:41:44.360 --> 00:41:45.240
<v Speaker 2>spec.

00:41:46.040 --> 00:41:46.600
<v Speaker 2>And

00:41:47.720 --> 00:41:49.960
<v Speaker 2>when I was when I was messing with

00:41:49.960 --> 00:41:50.440
<v Speaker 2>that earlier,

00:41:51.575 --> 00:41:53.654
<v Speaker 2>it seemed like it prevented the scaling it

00:41:53.654 --> 00:41:55.575
<v Speaker 2>prevented the scaling from working and prevented the

00:41:55.575 --> 00:41:57.335
<v Speaker 2>upgrading from working or at least that's what

00:41:57.335 --> 00:41:59.414
<v Speaker 2>appeared to happen for me. So I thought

00:41:59.414 --> 00:42:01.414
<v Speaker 2>that that would have blocked you from getting

00:42:01.414 --> 00:42:02.455
<v Speaker 2>the new pod.

00:42:03.414 --> 00:42:06.214
<v Speaker 2>I kinda thought it would have torn down

00:42:06.970 --> 00:42:09.210
<v Speaker 2>the old before starting up the new. So

00:42:09.210 --> 00:42:10.570
<v Speaker 2>I guess that's a

00:42:11.050 --> 00:42:13.610
<v Speaker 2>a scaling parameter that I could have specified,

00:42:13.610 --> 00:42:14.650
<v Speaker 2>didn't specify.

00:42:17.130 --> 00:42:19.850
<v Speaker 1>You know the position on finalizers. Like, I'm

00:42:19.850 --> 00:42:21.930
<v Speaker 1>actually offended that you even went down that

00:42:21.930 --> 00:42:22.170
<v Speaker 1>route.

00:42:22.944 --> 00:42:24.944
<v Speaker 2>Yeah. I it was just an annoyance. Purely

00:42:24.944 --> 00:42:27.345
<v Speaker 1>for deleting all finalizers and clusters. They get

00:42:27.345 --> 00:42:29.105
<v Speaker 1>on my nerves so much. Like, I understand

00:42:29.105 --> 00:42:31.585
<v Speaker 1>why they exist. They're amazing except when I

00:42:31.585 --> 00:42:33.425
<v Speaker 1>wanna do something with a sledgehammer. And then

00:42:33.425 --> 00:42:35.665
<v Speaker 1>I'm like, no. Go away finalizers.

00:42:37.680 --> 00:42:39.200
<v Speaker 2>Awesome. Yeah. I think that

00:42:39.839 --> 00:42:41.360
<v Speaker 0>Yeah. Oh, go ahead. Yep.

00:42:42.160 --> 00:42:42.960
<v Speaker 2>The

00:42:42.960 --> 00:42:45.680
<v Speaker 2>other thing that I wanted to, like, keep

00:42:45.680 --> 00:42:47.120
<v Speaker 2>the entire problem

00:42:47.760 --> 00:42:50.240
<v Speaker 2>scope, like, limited to things that a user

00:42:50.240 --> 00:42:52.555
<v Speaker 2>could shoot themselves in the foot with. I

00:42:52.555 --> 00:42:54.235
<v Speaker 2>didn't reach out to,

00:42:55.035 --> 00:42:57.275
<v Speaker 2>like, system processes or

00:42:57.435 --> 00:42:58.955
<v Speaker 2>configuration,

00:42:59.595 --> 00:43:01.515
<v Speaker 2>but it it's fun

00:43:01.995 --> 00:43:04.475
<v Speaker 2>to me to watch you, like, suspect that

00:43:04.475 --> 00:43:07.090
<v Speaker 2>it might be something more nefarious.

00:43:08.530 --> 00:43:10.930
<v Speaker 0>I I think David David's been bit too

00:43:10.930 --> 00:43:13.890
<v Speaker 0>hard. I think he's he's he's yeah. This

00:43:13.890 --> 00:43:17.330
<v Speaker 0>is PTSD right there. Yeah. After 13 episodes,

00:43:17.330 --> 00:43:18.930
<v Speaker 1>I trust no one anymore.

00:43:21.224 --> 00:43:23.944
<v Speaker 1>Alright. Awesome. Good work, Marcus. Great work fixing

00:43:23.944 --> 00:43:28.424
<v Speaker 1>that. That was awesome, Marcus. Yeah. Thank Let's

00:43:28.424 --> 00:43:30.105
<v Speaker 1>see. Now it's time to cry. Yeah. Let's

00:43:30.105 --> 00:43:31.545
<v Speaker 1>see what else we got. This is cluster

00:43:31.545 --> 00:43:32.105
<v Speaker 1>30.

00:43:33.030 --> 00:43:35.110
<v Speaker 1>Marcus, I will open a session

00:43:35.990 --> 00:43:36.870
<v Speaker 1>and

00:43:37.270 --> 00:43:38.310
<v Speaker 1>type hello.

00:43:38.470 --> 00:43:40.710
<v Speaker 1>Please let me know when you are available.

00:43:40.790 --> 00:43:41.190
<v Speaker 0>And

00:43:43.270 --> 00:43:45.350
<v Speaker 1>I will make a font a bit bigger.

00:43:45.350 --> 00:43:46.630
<v Speaker 1>Oh, I got that weird bug. I think

00:43:46.630 --> 00:43:47.910
<v Speaker 1>that means you've maybe joined.

00:43:48.684 --> 00:43:50.765
<v Speaker 1>There we go. I'm just gonna reload now

00:43:50.765 --> 00:43:51.885
<v Speaker 1>because it's annoying.

00:43:53.085 --> 00:43:54.765
<v Speaker 1>I need to reach out to teleport and

00:43:54.765 --> 00:43:56.445
<v Speaker 1>ask them to fix that because

00:43:56.684 --> 00:43:58.365
<v Speaker 1>I wonder if it's Firefox maybe I should

00:43:58.365 --> 00:44:01.244
<v Speaker 1>just start using Chrome. Anyway, let's not digress.

00:44:03.060 --> 00:44:03.860
<v Speaker 1>Let's

00:44:03.940 --> 00:44:06.260
<v Speaker 1>set up our kube config

00:44:06.420 --> 00:44:09.300
<v Speaker 1>and then work out which awful things my

00:44:09.300 --> 00:44:11.700
<v Speaker 1>mood has done to this Kubernetes cluster.

00:44:11.780 --> 00:44:13.380
<v Speaker 0>I I I'll I'll give you guys one

00:44:13.380 --> 00:44:15.380
<v Speaker 0>thing that I wanna say is that there's

00:44:15.380 --> 00:44:15.860
<v Speaker 0>a

00:44:16.260 --> 00:44:18.815
<v Speaker 0>text file in your home directory. That's all

00:44:18.815 --> 00:44:19.695
<v Speaker 0>I'm gonna say.

00:44:21.214 --> 00:44:23.454
<v Speaker 1>If anyone has seen custard before, it is

00:44:23.454 --> 00:44:24.974
<v Speaker 1>never a good saying when someone leaves you

00:44:24.974 --> 00:44:25.935
<v Speaker 1>breadcrumbs.

00:44:29.855 --> 00:44:30.895
<v Speaker 2>Good. Alright.

00:44:35.060 --> 00:44:36.260
<v Speaker 1>Nice SKR.

00:44:36.260 --> 00:44:38.340
<v Speaker 1>Alright. My NGINX pod would come up for

00:44:38.340 --> 00:44:40.260
<v Speaker 1>some reason. Can you please take a look?

00:44:40.260 --> 00:44:41.060
<v Speaker 1>Securly,

00:44:41.060 --> 00:44:41.780
<v Speaker 1>I'm at.

00:44:42.340 --> 00:44:44.820
<v Speaker 1>Alright, Marcus. Do the thing please. Do we

00:44:44.820 --> 00:44:45.940
<v Speaker 1>have a control plane?

00:44:51.925 --> 00:44:53.845
<v Speaker 1>You went for API version.

00:44:57.125 --> 00:44:58.965
<v Speaker 2>That's oh, I do have We got a

00:45:00.480 --> 00:45:02.720
<v Speaker 2>Yeah. I'm kind of and I'm, like, kinda

00:45:02.720 --> 00:45:04.080
<v Speaker 2>curious if there's anything

00:45:04.480 --> 00:45:05.760
<v Speaker 2>odd installed.

00:45:06.880 --> 00:45:07.600
<v Speaker 2>Okay.

00:45:07.840 --> 00:45:09.840
<v Speaker 2>I think these are all your standard installs.

00:45:09.840 --> 00:45:10.400
<v Speaker 2>Right?

00:45:11.840 --> 00:45:14.355
<v Speaker 1>We'll find out in all in good time,

00:45:14.355 --> 00:45:15.075
<v Speaker 1>I'm sure.

00:45:15.955 --> 00:45:17.875
<v Speaker 1>Let's try some of the basics. Yeah. There

00:45:17.875 --> 00:45:20.675
<v Speaker 1>we go. We've got our working notes.

00:45:22.755 --> 00:45:23.955
<v Speaker 1>We got

00:45:26.049 --> 00:45:27.970
<v Speaker 1>things and stuff. Okay.

00:45:29.730 --> 00:45:31.250
<v Speaker 1>It's all stuck in containers. Yeah.

00:45:31.970 --> 00:45:33.650
<v Speaker 2>And those all look like they're in bad

00:45:33.650 --> 00:45:36.130
<v Speaker 2>shape. So let's

00:45:37.785 --> 00:45:39.625
<v Speaker 2>go straight for the Podigo.

00:45:39.704 --> 00:45:41.545
<v Speaker 2>Take a look at a deployment first.

00:45:52.800 --> 00:45:53.840
<v Speaker 1>Looks good.

00:45:55.520 --> 00:45:57.760
<v Speaker 1>Let's describe where I put that clustered pod

00:45:57.760 --> 00:45:59.040
<v Speaker 1>and see if we can

00:46:00.560 --> 00:46:02.000
<v Speaker 1>get anything there.

00:46:03.760 --> 00:46:05.520
<v Speaker 1>Oh, you're gonna need the name again though.

00:46:07.454 --> 00:46:08.494
<v Speaker 2>You

00:46:08.494 --> 00:46:10.095
<v Speaker 2>have

00:46:18.750 --> 00:46:21.070
<v Speaker 2>It's like the various

00:46:21.070 --> 00:46:23.630
<v Speaker 2>forms of injecting things into the shell have

00:46:24.190 --> 00:46:26.190
<v Speaker 2>changed, so I'll just throw it into temp

00:46:26.190 --> 00:46:29.070
<v Speaker 2>where somebody else can write into it for

00:46:29.070 --> 00:46:30.590
<v Speaker 2>two seconds before I source it.

00:46:33.485 --> 00:46:35.565
<v Speaker 2>And now we can have more fun.

00:46:37.325 --> 00:46:38.125
<v Speaker 1>Hopefully.

00:46:38.125 --> 00:46:39.485
<v Speaker 1>I faint a lot of the time the

00:46:39.485 --> 00:46:42.205
<v Speaker 1>completion doesn't always work, but let's let's hope.

00:46:43.005 --> 00:46:45.005
<v Speaker 1>Oh, it doesn't have to spelling clustered. Right?

00:46:46.460 --> 00:46:49.020
<v Speaker 2>Did I? You spelled cub. Cub.

00:46:49.740 --> 00:46:52.140
<v Speaker 2>Cub? Alright. I see q. At the end,

00:46:52.140 --> 00:46:53.980
<v Speaker 1>you put cub and then hit tab instead

00:46:53.980 --> 00:46:55.580
<v Speaker 1>of cla and then tab.

00:46:56.539 --> 00:46:57.340
<v Speaker 2>Oh,

00:46:57.819 --> 00:46:58.299
<v Speaker 2>alright.

00:46:59.685 --> 00:47:02.325
<v Speaker 2>Sorry, guys. Sorry, guys. This does work. Yeah.

00:47:02.325 --> 00:47:02.885
<v Speaker 0>Yeah.

00:47:07.605 --> 00:47:08.325
<v Speaker 0>Nice.

00:47:08.485 --> 00:47:09.125
<v Speaker 0>Yeah.

00:47:10.165 --> 00:47:12.005
<v Speaker 2>And then I'm gonna avoid the tab complete

00:47:12.005 --> 00:47:14.200
<v Speaker 2>and try to copy paste it. Yeah. We

00:47:14.200 --> 00:47:16.440
<v Speaker 2>did defeat the purpose. Alright. We have to

00:47:16.440 --> 00:47:18.760
<v Speaker 1>find plugins c n a.

00:47:19.560 --> 00:47:20.360
<v Speaker 1>Awesome.

00:47:21.160 --> 00:47:21.960
<v Speaker 2>Great.

00:47:22.440 --> 00:47:25.560
<v Speaker 2>Let's

00:47:25.560 --> 00:47:27.480
<v Speaker 1>check our cube system namespace

00:47:28.215 --> 00:47:29.815
<v Speaker 1>and see if our

00:47:31.655 --> 00:47:34.215
<v Speaker 1>extended control plane is happy.

00:47:34.935 --> 00:47:37.495
<v Speaker 2>Yeah. Okay. Let's get pods everywhere and see

00:47:37.495 --> 00:47:41.655
<v Speaker 2>if anybody is acting unusual. Nope. Nope. Nope.

00:47:41.655 --> 00:47:41.895
<v Speaker 1>Nope.

00:47:42.720 --> 00:47:44.640
<v Speaker 1>That's a lot of broken things.

00:47:46.000 --> 00:47:47.520
<v Speaker 1>So, yeah, we don't have our cilium d

00:47:47.680 --> 00:47:48.560
<v Speaker 2>Core DNS.

00:47:50.880 --> 00:47:52.800
<v Speaker 2>Core DNS, cilium.

00:47:53.200 --> 00:47:54.320
<v Speaker 2>Who else is broken?

00:47:54.815 --> 00:47:56.975
<v Speaker 2>Take inventory. Queue proxy.

00:47:58.095 --> 00:48:00.335
<v Speaker 0>It's it's And it's pulled back up. Episode

00:48:00.335 --> 00:48:01.775
<v Speaker 0>it's episode 13,

00:48:01.775 --> 00:48:03.615
<v Speaker 0>so you can't expect anything

00:48:04.335 --> 00:48:06.815
<v Speaker 0>good. Do you know? CCM's

00:48:06.815 --> 00:48:07.375
<v Speaker 2>busted.

00:48:08.589 --> 00:48:11.950
<v Speaker 2>That'll allow b is not happy. CSI's

00:48:12.910 --> 00:48:15.070
<v Speaker 2>we're in trouble. No. I think this is

00:48:15.070 --> 00:48:16.430
<v Speaker 1>a cascading

00:48:16.670 --> 00:48:18.750
<v Speaker 1>failure. The fact that we're seeing so many

00:48:18.750 --> 00:48:21.070
<v Speaker 1>container create tells me I think that's a

00:48:21.070 --> 00:48:24.065
<v Speaker 1>byproduct of Cilium potentially being fucked. So let's

00:48:24.065 --> 00:48:25.665
<v Speaker 1>focus on Cilium first.

00:48:29.825 --> 00:48:32.464
<v Speaker 1>Maybe. Cilium deployment or is it a That's

00:48:32.464 --> 00:48:33.505
<v Speaker 1>even cycled Cilium.

00:48:38.640 --> 00:48:39.120
<v Speaker 2>And

00:48:46.240 --> 00:48:48.160
<v Speaker 1>maybe in the Cilium next phase. I think

00:48:48.160 --> 00:48:49.520
<v Speaker 1>Cilium goes in Oh, okay.

00:48:52.335 --> 00:48:54.175
<v Speaker 2>This one's cube proxy. Do we have any

00:48:54.175 --> 00:48:55.055
<v Speaker 2>hints

00:48:55.615 --> 00:48:56.495
<v Speaker 2>in here?

00:48:57.775 --> 00:48:59.695
<v Speaker 1>No. I wouldn't have thought so.

00:49:00.575 --> 00:49:01.295
<v Speaker 1>Alright.

00:49:03.055 --> 00:49:03.375
<v Speaker 2>Celeb.

00:49:12.840 --> 00:49:14.520
<v Speaker 1>Let's take a look at one of the

00:49:14.680 --> 00:49:16.120
<v Speaker 1>pods. I think we need to get

00:49:18.040 --> 00:49:19.960
<v Speaker 1>What have you done to this cluster?

00:49:23.855 --> 00:49:25.535
<v Speaker 1>Alright. Let me do a little bit of

00:49:26.255 --> 00:49:27.935
<v Speaker 1>because I'm I'm I'm just Oh, see what

00:49:28.015 --> 00:49:29.615
<v Speaker 2>yeah. Okay. I see it when I'm like

00:49:29.615 --> 00:49:31.295
<v Speaker 2>scroll wheel scrolling,

00:49:31.535 --> 00:49:33.695
<v Speaker 2>it's for my own benefit. Nobody sees me

00:49:33.695 --> 00:49:36.780
<v Speaker 2>doing that. Yeah. Yeah. You you pager.

00:49:36.860 --> 00:49:38.380
<v Speaker 1>Oh, look at that. We got our first

00:49:38.380 --> 00:49:39.420
<v Speaker 1>honky honk.

00:49:43.900 --> 00:49:44.620
<v Speaker 1>Okay.

00:49:44.780 --> 00:49:45.420
<v Speaker 1>That

00:49:45.980 --> 00:49:47.660
<v Speaker 1>at least is an easy fix.

00:49:57.025 --> 00:49:58.065
<v Speaker 1>The plot seconds.

00:50:02.450 --> 00:50:04.530
<v Speaker 1>Is there any containers?

00:50:06.130 --> 00:50:08.050
<v Speaker 1>That's the only image here.

00:50:09.250 --> 00:50:12.289
<v Speaker 2>And this is you're looking at the the

00:50:12.289 --> 00:50:15.089
<v Speaker 2>daemon set? Yeah. So is it they modify

00:50:15.089 --> 00:50:18.265
<v Speaker 2>the replica set or the pods?

00:50:21.545 --> 00:50:23.465
<v Speaker 1>Yeah. There won't be back propagation on any

00:50:23.465 --> 00:50:24.585
<v Speaker 1>of that stuff. Right?

00:50:24.825 --> 00:50:25.465
<v Speaker 1>So

00:50:25.945 --> 00:50:27.545
<v Speaker 1>oh, no. But the daemon set create doesn't

00:50:27.545 --> 00:50:29.385
<v Speaker 1>create replica sets. It's just straight up pods.

00:50:29.790 --> 00:50:31.950
<v Speaker 1>But how is the image changing from the

00:50:31.950 --> 00:50:32.990
<v Speaker 1>daemon set?

00:50:33.310 --> 00:50:34.350
<v Speaker 1>This could

00:50:35.790 --> 00:50:37.950
<v Speaker 1>if you added a container d on this.

00:50:39.470 --> 00:50:40.830
<v Speaker 1>I'm looking to see if he's laughing.

00:50:44.335 --> 00:50:46.895
<v Speaker 1>Are you familiar with that feature, Marcus? Poker

00:50:46.895 --> 00:50:49.215
<v Speaker 0>face. That's my poker face. This is I

00:50:49.215 --> 00:50:50.895
<v Speaker 1>hate it. It's the worst

00:50:51.055 --> 00:50:53.055
<v Speaker 1>option ever, but someone bit me over it

00:50:53.055 --> 00:50:54.895
<v Speaker 1>in the past. What what is it that

00:50:54.895 --> 00:50:56.200
<v Speaker 2>you're suspecting?

00:50:56.840 --> 00:50:59.000
<v Speaker 1>Okay. So container d I I was thinking

00:50:59.000 --> 00:51:01.000
<v Speaker 2>that maybe the the webhooks

00:51:01.000 --> 00:51:03.560
<v Speaker 2>that maybe he's taken us down that path

00:51:03.560 --> 00:51:05.240
<v Speaker 2>since he pretended to not be able to

00:51:05.240 --> 00:51:08.600
<v Speaker 2>spell it. You are 100% correct that we

00:51:08.600 --> 00:51:10.440
<v Speaker 1>should definitely check for mutating webhooks.

00:51:10.674 --> 00:51:12.835
<v Speaker 1>But the thing that really bothered me though

00:51:12.835 --> 00:51:13.474
<v Speaker 1>is

00:51:14.194 --> 00:51:16.195
<v Speaker 1>the daemon set hasn't been updated.

00:51:17.234 --> 00:51:19.474
<v Speaker 1>And if there was a mutating webhook, we

00:51:19.474 --> 00:51:21.635
<v Speaker 1>would still see the change here.

00:51:22.275 --> 00:51:24.515
<v Speaker 1>Right? Because this comes from the API server.

00:51:27.690 --> 00:51:30.650
<v Speaker 1>I need to satisfy my curiosity.

00:51:30.890 --> 00:51:32.730
<v Speaker 1>There's a dump config on this but I

00:51:32.730 --> 00:51:34.330
<v Speaker 1>can never remember how to do it.

00:51:38.570 --> 00:51:39.450
<v Speaker 1>Where is it?

00:51:41.505 --> 00:51:42.145
<v Speaker 1>Config.

00:51:54.350 --> 00:51:56.430
<v Speaker 1>Gonna have to go to it. Is

00:51:57.070 --> 00:51:58.190
<v Speaker 1>it container d?

00:52:02.510 --> 00:52:03.630
<v Speaker 1>Yeah. Config.

00:52:07.134 --> 00:52:09.375
<v Speaker 1>So this is the container deconfiguration.

00:52:12.095 --> 00:52:14.255
<v Speaker 1>And it allows you to see

00:52:15.375 --> 00:52:17.934
<v Speaker 1>any time someone requests this image, give them

00:52:17.934 --> 00:52:18.894
<v Speaker 1>something else instead.

00:52:20.769 --> 00:52:22.450
<v Speaker 1>And you can actually swap out the images

00:52:22.450 --> 00:52:23.330
<v Speaker 1>that way.

00:52:24.450 --> 00:52:25.970
<v Speaker 1>Oh, we should probably take a look at

00:52:25.970 --> 00:52:27.730
<v Speaker 1>this file as it exists,

00:52:27.970 --> 00:52:29.650
<v Speaker 1>but I would expect to see

00:52:31.410 --> 00:52:32.210
<v Speaker 1>something

00:52:32.210 --> 00:52:32.930
<v Speaker 1>in here.

00:52:34.724 --> 00:52:36.244
<v Speaker 1>There was no honk. Right?

00:52:39.684 --> 00:52:41.845
<v Speaker 1>Oh, there we go. There's a plugin for

00:52:41.845 --> 00:52:43.045
<v Speaker 2>honky.io.

00:52:47.420 --> 00:52:48.780
<v Speaker 1>So honk.

00:52:49.260 --> 00:52:51.660
<v Speaker 1>We will remove all honks.

00:52:52.380 --> 00:52:54.860
<v Speaker 0>I've I've actually never been to that domain,

00:52:54.860 --> 00:52:57.340
<v Speaker 0>so I don't recommend anyone to try.

00:52:59.340 --> 00:53:01.420
<v Speaker 2>It's IO, so it's gotta be tech related.

00:53:02.815 --> 00:53:04.575
<v Speaker 1>Okay. So we need to

00:53:05.215 --> 00:53:06.255
<v Speaker 1>restart.

00:53:06.975 --> 00:53:08.575
<v Speaker 2>That was one of the paths I was

00:53:08.575 --> 00:53:10.895
<v Speaker 2>gonna I was gonna register something similar to

00:53:11.055 --> 00:53:12.895
<v Speaker 2>ghcr.io.

00:53:13.055 --> 00:53:15.295
<v Speaker 2>Unicode advantage of DNS.

00:53:15.880 --> 00:53:18.760
<v Speaker 2>Yeah. No no more Unicode changes with o's

00:53:18.760 --> 00:53:20.920
<v Speaker 1>that look like o's. I'm not having it.

00:53:20.920 --> 00:53:21.640
<v Speaker 1>Done.

00:53:24.359 --> 00:53:24.920
<v Speaker 1>Alright.

00:53:25.640 --> 00:53:28.520
<v Speaker 1>Where are we? So they get pods.

00:53:29.560 --> 00:53:31.080
<v Speaker 1>I'm gonna have to roll those out, aren't

00:53:31.080 --> 00:53:34.385
<v Speaker 1>we? Do you remember the rollout command?

00:53:34.705 --> 00:53:36.545
<v Speaker 1>Or will I just go sledgehammer?

00:53:37.105 --> 00:53:38.945
<v Speaker 2>We tap our way through it.

00:53:39.505 --> 00:53:41.265
<v Speaker 1>Yeah. Go for it. I think it's

00:53:42.465 --> 00:53:42.865
<v Speaker 1>if it

00:53:43.745 --> 00:53:44.625
<v Speaker 1>rollout,

00:53:44.785 --> 00:53:45.665
<v Speaker 1>restart.

00:53:45.665 --> 00:53:45.985
<v Speaker 1>Yeah.

00:53:46.859 --> 00:53:47.660
<v Speaker 1>And then,

00:53:48.059 --> 00:53:50.540
<v Speaker 1>yeah, daemon set Cilium. Cool.

00:53:51.420 --> 00:53:53.740
<v Speaker 1>I like it when people configure tab complete.

00:53:55.740 --> 00:53:57.579
<v Speaker 2>I think that that it's my lesson for

00:53:57.579 --> 00:53:57.980
<v Speaker 2>the day.

00:53:59.955 --> 00:54:01.875
<v Speaker 2>Which one in the Solium?

00:54:02.195 --> 00:54:02.835
<v Speaker 1>Yeah.

00:54:04.035 --> 00:54:06.275
<v Speaker 1>Alright. Let's keep an eye on those pods

00:54:06.275 --> 00:54:08.115
<v Speaker 1>and see if we can get some image

00:54:08.115 --> 00:54:08.835
<v Speaker 1>pools at least.

00:54:15.980 --> 00:54:16.780
<v Speaker 1>No.

00:54:19.579 --> 00:54:21.500
<v Speaker 1>Alright. Let's describe that first one.

00:54:35.695 --> 00:54:37.215
<v Speaker 2>That's how long ago?

00:54:38.175 --> 00:54:39.775
<v Speaker 2>That's about when we did it. Right?

00:54:44.490 --> 00:54:47.210
<v Speaker 1>Let's check that container deconfig again. Is there

00:54:47.210 --> 00:54:47.850
<v Speaker 1>maybe

00:54:49.850 --> 00:54:51.850
<v Speaker 0>I can do you guys want a hint?

00:54:51.850 --> 00:54:54.090
<v Speaker 1>No, not yet. You be quiet. You little

00:54:54.090 --> 00:54:54.730
<v Speaker 1>person.

00:54:55.290 --> 00:54:56.010
<v Speaker 0>I'm

00:54:56.090 --> 00:54:56.570
<v Speaker 0>I'm not here.

00:54:58.635 --> 00:55:01.115
<v Speaker 1>Okay. If the honk's definitely gone and I

00:55:01.115 --> 00:55:02.955
<v Speaker 1>did restart container d,

00:55:03.995 --> 00:55:05.755
<v Speaker 1>maybe we need to

00:55:07.755 --> 00:55:09.435
<v Speaker 1>maybe give the kubelet a nudge.

00:55:14.550 --> 00:55:17.190
<v Speaker 2>I'll pass the pass the control over to

00:55:17.190 --> 00:55:19.350
<v Speaker 2>you. You wanna restart that? Yeah.

00:55:20.390 --> 00:55:22.150
<v Speaker 2>It says container gaze.

00:55:22.310 --> 00:55:23.030
<v Speaker 2>Okay.

00:55:25.845 --> 00:55:27.605
<v Speaker 1>Because I would expect that error to have

00:55:27.605 --> 00:55:29.285
<v Speaker 1>been fixed. And you know what? I am

00:55:29.285 --> 00:55:32.485
<v Speaker 1>just gonna go sledgehammer here. Actual sledgehammer.

00:55:36.210 --> 00:55:38.370
<v Speaker 1>The problem with the sledgehammer approach is sometimes

00:55:38.370 --> 00:55:40.690
<v Speaker 1>is you make it worse for yourself.

00:55:43.250 --> 00:55:44.530
<v Speaker 1>Image pull.

00:55:45.810 --> 00:55:47.650
<v Speaker 1>I'm assuming that's gonna give us the same

00:55:47.650 --> 00:55:48.450
<v Speaker 1>error. So

00:55:49.255 --> 00:55:51.495
<v Speaker 1>did my containerd restart not work?

00:55:55.494 --> 00:55:56.535
<v Speaker 1>Oh, the shims.

00:56:03.130 --> 00:56:04.650
<v Speaker 1>That shouldn't be a matter.

00:56:06.250 --> 00:56:08.090
<v Speaker 1>This is where my knowledge of

00:56:08.250 --> 00:56:10.490
<v Speaker 1>this is gonna be. Like, container d is

00:56:10.490 --> 00:56:13.370
<v Speaker 1>responsible for pulling the image. Right? So

00:56:13.734 --> 00:56:15.735
<v Speaker 1>this process was restarted.

00:56:16.935 --> 00:56:18.775
<v Speaker 2>I'm I'm I'm just sort of wondering if

00:56:18.775 --> 00:56:20.935
<v Speaker 2>he also played the finalizer game with those

00:56:20.935 --> 00:56:21.975
<v Speaker 2>not deleting.

00:56:23.095 --> 00:56:23.815
<v Speaker 1>Container.

00:56:23.974 --> 00:56:25.494
<v Speaker 1>They're still honking at me.

00:56:31.520 --> 00:56:33.840
<v Speaker 2>I'll Extra container d configs?

00:56:34.160 --> 00:56:35.920
<v Speaker 2>I can't remember why. I wanna tell you

00:56:35.920 --> 00:56:37.280
<v Speaker 0>guys so that you don't, like, you don't

00:56:37.280 --> 00:56:39.040
<v Speaker 0>get too stuck in this stage.

00:56:39.360 --> 00:56:39.920
<v Speaker 0>Like,

00:56:41.840 --> 00:56:43.680
<v Speaker 0>does container d run-in

00:56:43.680 --> 00:56:44.240
<v Speaker 0>one place?

00:56:45.435 --> 00:56:46.715
<v Speaker 1>Of course.

00:56:46.715 --> 00:56:48.475
<v Speaker 1>You modified every host.

00:56:51.915 --> 00:56:54.075
<v Speaker 1>That's it. All future episodes are getting one

00:56:54.075 --> 00:56:54.395
<v Speaker 1>machine.

00:56:56.760 --> 00:56:58.440
<v Speaker 1>But we only need one machine to make

00:56:58.440 --> 00:56:59.960
<v Speaker 1>it work. Right? Yeah.

00:57:02.520 --> 00:57:03.080
<v Speaker 1>That

00:57:03.320 --> 00:57:04.680
<v Speaker 1>I should have thought of that. That was

00:57:04.680 --> 00:57:05.960
<v Speaker 1>me just being silly.

00:57:07.240 --> 00:57:10.520
<v Speaker 0>I I always fall into that trap because

00:57:10.600 --> 00:57:12.120
<v Speaker 0>we're always

00:57:11.855 --> 00:57:14.414
<v Speaker 0>treating Kubernetes as this distributed thing. And then

00:57:14.414 --> 00:57:16.734
<v Speaker 0>containerd is that one thing that's like just

00:57:16.734 --> 00:57:18.414
<v Speaker 0>like the cubelet is like all over the

00:57:18.414 --> 00:57:19.455
<v Speaker 0>place. So

00:57:21.375 --> 00:57:22.734
<v Speaker 1>Yeah. I guess you would have to set

00:57:22.734 --> 00:57:24.174
<v Speaker 1>it on them all. Otherwise, it would be

00:57:24.174 --> 00:57:25.934
<v Speaker 1>an intermittent bug and that would be a

00:57:25.934 --> 00:57:26.575
<v Speaker 1>pain in the ass.

00:57:28.840 --> 00:57:31.480
<v Speaker 1>You're actually being kind with your devilishness.

00:57:33.640 --> 00:57:34.120
<v Speaker 1>Alright.

00:57:39.535 --> 00:57:40.255
<v Speaker 1>So

00:57:40.495 --> 00:57:41.375
<v Speaker 1>refrain.

00:57:42.175 --> 00:57:43.615
<v Speaker 1>I'll do it the nice way.

00:57:48.895 --> 00:57:50.575
<v Speaker 1>Hey, we have a pod initializing.

00:57:51.690 --> 00:57:52.730
<v Speaker 1>That's better.

00:57:54.490 --> 00:57:56.250
<v Speaker 1>Alright. Thanks for the heads up.

00:57:56.490 --> 00:57:57.850
<v Speaker 1>Oh, fuck off.

00:58:03.770 --> 00:58:04.250
<v Speaker 1>Alright.

00:58:06.095 --> 00:58:07.214
<v Speaker 2>Colin says

00:58:07.454 --> 00:58:09.615
<v Speaker 2>check CRI CTL logs.

00:58:10.335 --> 00:58:11.775
<v Speaker 1>It's still

00:58:11.775 --> 00:58:12.575
<v Speaker 1>honking.

00:58:15.855 --> 00:58:16.815
<v Speaker 1>Is that expected,

00:58:18.920 --> 00:58:21.800
<v Speaker 1>Amit? Yes. Yes. Okay. Yeah. Yeah. Alright. Just

00:58:21.800 --> 00:58:23.640
<v Speaker 1>checking it's not just me being an idiot

00:58:23.640 --> 00:58:25.720
<v Speaker 1>with my container d restarts.

00:58:27.240 --> 00:58:30.440
<v Speaker 1>I think, Marcus, you were probably right earlier.

00:58:30.520 --> 00:58:32.680
<v Speaker 1>Will we check for mutating webhooks?

00:58:45.105 --> 00:58:47.860
<v Speaker 2>What was the other Validating, but format.

00:58:48.340 --> 00:58:50.420
<v Speaker 1>Validating webhook configurations.

00:58:50.500 --> 00:58:52.900
<v Speaker 1>But they can't actually modify the resource. So

00:58:54.260 --> 00:58:55.140
<v Speaker 1>okay.

00:58:55.380 --> 00:58:56.900
<v Speaker 1>Let's sync this one through.

00:58:59.460 --> 00:59:00.980
<v Speaker 1>I'm curious now

00:59:01.140 --> 00:59:02.420
<v Speaker 1>through whatever

00:59:03.935 --> 00:59:05.055
<v Speaker 1>mechanic

00:59:05.135 --> 00:59:07.615
<v Speaker 1>ever daemon set has been modified or there's

00:59:07.615 --> 00:59:09.535
<v Speaker 1>still something happening on the horse.

00:59:20.730 --> 00:59:22.010
<v Speaker 1>Let's check the image.

00:59:22.250 --> 00:59:24.650
<v Speaker 1>Yeah. Okay. So something's happening between

00:59:25.609 --> 00:59:26.970
<v Speaker 1>this and

00:59:26.970 --> 00:59:28.650
<v Speaker 1>the controller to run that.

00:59:39.365 --> 00:59:40.725
<v Speaker 1>And if there's no sorry.

00:59:41.045 --> 00:59:41.605
<v Speaker 1>I need go, Marcus.

00:59:43.109 --> 00:59:46.790
<v Speaker 2>No. There's a there's a dump command that

00:59:48.549 --> 00:59:50.549
<v Speaker 2>yeah. I've been trying to find ways to

00:59:50.549 --> 00:59:53.269
<v Speaker 2>just get everything, and then we just search

00:59:53.269 --> 00:59:55.109
<v Speaker 2>everything in one blast for honk.

00:59:57.635 --> 00:59:59.155
<v Speaker 2>Uh-huh. I I thought it was, a dump

00:59:59.155 --> 01:00:00.275
<v Speaker 2>a dump command.

01:00:00.515 --> 01:00:01.555
<v Speaker 2>What is it, though?

01:00:02.115 --> 01:00:04.035
<v Speaker 1>I mean, we could do get all dash

01:00:04.035 --> 01:00:06.195
<v Speaker 1>o y m o grep honk.

01:00:07.475 --> 01:00:07.955
<v Speaker 2>Yeah.

01:00:09.339 --> 01:00:10.940
<v Speaker 1>You've got a lot of honks.

01:00:13.580 --> 01:00:16.220
<v Speaker 1>Okay. So Yeah. All all all only shows

01:00:16.220 --> 01:00:18.859
<v Speaker 2>a few resource types too. I was hoping

01:00:18.859 --> 01:00:20.700
<v Speaker 2>for something that would show even more. What's

01:00:20.700 --> 01:00:22.619
<v Speaker 1>the format for the before and after?

01:00:23.855 --> 01:00:24.815
<v Speaker 1>Oh, there we go.

01:00:25.375 --> 01:00:26.095
<v Speaker 2>Yeah.

01:00:26.895 --> 01:00:27.454
<v Speaker 2>There's also

01:00:28.255 --> 01:00:31.934
<v Speaker 2>well, in GitGrep, I recently learned about dash

01:00:31.934 --> 01:00:33.694
<v Speaker 2>p, which gives you the context of the

01:00:33.694 --> 01:00:35.694
<v Speaker 2>function you're in. I'm not sure if what

01:00:35.694 --> 01:00:37.375
<v Speaker 2>that would do in YAML and if that's

01:00:37.375 --> 01:00:38.255
<v Speaker 2>supported in this one.

01:00:39.030 --> 01:00:41.110
<v Speaker 1>Alright. We need more lanes.

01:00:44.150 --> 01:00:46.150
<v Speaker 1>I don't like all this honky business.

01:00:48.070 --> 01:00:49.670
<v Speaker 2>You can also just pipe less it and

01:00:49.670 --> 01:00:51.190
<v Speaker 2>then use less to search.

01:00:52.550 --> 01:00:53.910
<v Speaker 2>Oh, net without the gripping.

01:00:55.025 --> 01:00:56.705
<v Speaker 2>Just use less for Yeah. That's right. Bet

01:00:56.705 --> 01:00:57.905
<v Speaker 1>right there. In fact, why don't you just

01:00:57.905 --> 01:00:58.625
<v Speaker 1>take over?

01:01:00.545 --> 01:01:01.425
<v Speaker 1>Thanks.

01:01:02.385 --> 01:01:03.825
<v Speaker 1>Alright. Honk one.

01:01:05.425 --> 01:01:06.785
<v Speaker 1>Cluster direct like a set.

01:01:10.859 --> 01:01:12.780
<v Speaker 2>Did we get the name letter?

01:01:13.099 --> 01:01:13.660
<v Speaker 2>I

01:01:15.099 --> 01:01:17.340
<v Speaker 2>saw that all the managed fields weren't in

01:01:17.340 --> 01:01:19.820
<v Speaker 2>a more recent Yeah. One twenty one. Using.

01:01:19.820 --> 01:01:21.740
<v Speaker 1>And this is a one twenty cluster, sadly.

01:01:22.625 --> 01:01:24.785
<v Speaker 2>It says it's clustered itself,

01:01:25.505 --> 01:01:26.945
<v Speaker 2>the clustered pod.

01:01:32.464 --> 01:01:33.425
<v Speaker 2>Are they all this?

01:01:36.500 --> 01:01:36.900
<v Speaker 2>That

01:01:37.380 --> 01:01:38.900
<v Speaker 2>do we already look at that?

01:01:39.220 --> 01:01:40.660
<v Speaker 1>Let's do the get all in this I

01:01:40.660 --> 01:01:42.900
<v Speaker 1>mean, we we've got bigger issues still. Right?

01:01:44.260 --> 01:01:46.020
<v Speaker 1>Yeah. We've got bigger issues in the cluster

01:01:46.020 --> 01:01:46.660
<v Speaker 1>pod.

01:01:46.820 --> 01:01:48.580
<v Speaker 1>Let's do a get all on the Selium

01:01:48.580 --> 01:01:51.185
<v Speaker 1>namespace and less it for honk.

01:02:03.820 --> 01:02:05.339
<v Speaker 2>That

01:02:05.339 --> 01:02:07.740
<v Speaker 2>was that was silly of me. Alright. So

01:02:07.740 --> 01:02:08.940
<v Speaker 1>there's that image.

01:02:13.099 --> 01:02:14.619
<v Speaker 2>So every image That's the best.

01:02:17.675 --> 01:02:19.195
<v Speaker 2>Every image everywhere

01:02:19.195 --> 01:02:21.035
<v Speaker 2>is the hunk image? Is that maybe what

01:02:21.035 --> 01:02:23.835
<v Speaker 2>we're getting at? So that's interesting. Something's modifying

01:02:23.835 --> 01:02:25.115
<v Speaker 1>the pod spec,

01:02:25.115 --> 01:02:26.875
<v Speaker 1>but not the daemon set spec.

01:02:29.515 --> 01:02:30.155
<v Speaker 2>Image.

01:02:32.460 --> 01:02:34.380
<v Speaker 1>Yeah. So we never actually checked that. Do

01:02:34.380 --> 01:02:36.460
<v Speaker 1>wanna describe that part? And instead of just

01:02:36.460 --> 01:02:38.220
<v Speaker 1>looking at the header, we'll see the image

01:02:38.220 --> 01:02:39.100
<v Speaker 1>as the home.

01:02:39.340 --> 01:02:39.660
<v Speaker 1>So

01:02:50.365 --> 01:02:51.085
<v Speaker 1>Yeah.

01:02:54.205 --> 01:02:56.525
<v Speaker 1>Yeah. Cool. So the image on them is

01:02:56.765 --> 01:02:58.925
<v Speaker 1>yeah. That makes sense. I don't know how

01:02:58.925 --> 01:03:00.205
<v Speaker 1>it's to get in there, but it makes

01:03:00.205 --> 01:03:00.765
<v Speaker 1>sense now.

01:03:01.650 --> 01:03:02.770
<v Speaker 1>So the demon set

01:03:07.010 --> 01:03:07.970
<v Speaker 1>what

01:03:08.690 --> 01:03:09.490
<v Speaker 1>is this magic?

01:03:14.535 --> 01:03:16.135
<v Speaker 0>There's a comment from,

01:03:16.615 --> 01:03:19.175
<v Speaker 0>Khaled who says, try another name.

01:03:22.375 --> 01:03:24.454
<v Speaker 0>Also, the fire flash says there can never

01:03:24.454 --> 01:03:26.295
<v Speaker 0>be enough honks and rick rolls.

01:03:30.420 --> 01:03:31.220
<v Speaker 1>Right.

01:03:34.420 --> 01:03:35.780
<v Speaker 2>Could the c r I c t l

01:03:35.780 --> 01:03:39.220
<v Speaker 2>logs tell us anything useful? We've that. No.

01:03:39.220 --> 01:03:42.420
<v Speaker 1>This isn't container d anymore because the pod

01:03:42.420 --> 01:03:44.755
<v Speaker 1>spec has actually modified.

01:03:45.475 --> 01:03:47.555
<v Speaker 1>Yeah. So Alright. But the d m s

01:03:47.555 --> 01:03:49.635
<v Speaker 1>has the correct one. So

01:03:51.155 --> 01:03:52.435
<v Speaker 1>I'm trying to work out.

01:03:57.740 --> 01:03:59.180
<v Speaker 2>Anything running?

01:04:02.380 --> 01:04:05.260
<v Speaker 2>Because whatever is running could be the the

01:04:05.260 --> 01:04:05.900
<v Speaker 2>instigator.

01:04:14.815 --> 01:04:16.494
<v Speaker 2>And we also know oh, no. We don't.

01:04:16.494 --> 01:04:17.935
<v Speaker 2>I was gonna say we know that

01:04:19.375 --> 01:04:21.615
<v Speaker 2>this teleport session was working, but you say

01:04:21.615 --> 01:04:23.214
<v Speaker 2>that's not managed by Kubernetes.

01:04:24.980 --> 01:04:27.780
<v Speaker 1>So this is the static manifest.

01:04:29.140 --> 01:04:31.460
<v Speaker 1>And we've got our cube controller manager here,

01:04:31.460 --> 01:04:33.859
<v Speaker 1>which has not had this timestamp reset, which

01:04:33.859 --> 01:04:34.579
<v Speaker 1>is always fun.

01:04:36.015 --> 01:04:37.935
<v Speaker 1>And I'm looking for a

01:04:38.494 --> 01:04:40.335
<v Speaker 1>So there like you can have mutate and

01:04:40.335 --> 01:04:42.895
<v Speaker 1>webhooks which are dynamic admission controllers, but we

01:04:42.895 --> 01:04:45.375
<v Speaker 1>can also have static admission controllers defined in

01:04:45.375 --> 01:04:46.175
<v Speaker 1>this file.

01:04:47.295 --> 01:04:48.255
<v Speaker 1>And I'm curious.

01:04:54.359 --> 01:04:55.800
<v Speaker 1>There's just something in here.

01:05:05.015 --> 01:05:07.495
<v Speaker 2>Yeah. Looks good. The Hulk controller.

01:05:07.495 --> 01:05:08.055
<v Speaker 2>Yeah.

01:05:10.935 --> 01:05:12.615
<v Speaker 2>Get the image. Yeah.

01:05:14.695 --> 01:05:15.575
<v Speaker 1>Sneaky.

01:05:16.535 --> 01:05:17.655
<v Speaker 1>Alright. So

01:05:18.430 --> 01:05:20.190
<v Speaker 0>I can give you guys the

01:05:20.670 --> 01:05:22.110
<v Speaker 0>the actual image

01:05:22.430 --> 01:05:25.070
<v Speaker 0>that was there before. Would that help you

01:05:25.070 --> 01:05:25.550
<v Speaker 0>guys?

01:05:25.870 --> 01:05:31.390
<v Speaker 1>Yeah. So it's kate.gcr.i0/kipcontrollermanager.

01:05:31.390 --> 01:05:31.950
<v Speaker 1>Is that right?

01:05:34.955 --> 01:05:37.915
<v Speaker 0>Yeah. It and it was version version number?

01:05:38.395 --> 01:05:41.195
<v Speaker 0>Version one one dot 20 dot four. Yeah.

01:05:41.195 --> 01:05:41.755
<v Speaker 1>Yep.

01:05:42.475 --> 01:05:44.235
<v Speaker 1>Sneaky. I I think there's a there's a

01:05:44.235 --> 01:05:46.075
<v Speaker 0>v in the tag.

01:05:46.235 --> 01:05:48.155
<v Speaker 0>There's a v at the beginning of the

01:05:47.880 --> 01:05:48.920
<v Speaker 0>version. Yeah.

01:05:49.319 --> 01:05:49.960
<v Speaker 1>Awesome.

01:05:56.440 --> 01:05:58.279
<v Speaker 1>So our controller.

01:06:05.965 --> 01:06:06.925
<v Speaker 1>There we go.

01:06:08.045 --> 01:06:10.925
<v Speaker 1>So you modified that. Yeah. Of course. Like,

01:06:10.925 --> 01:06:12.525
<v Speaker 1>so the daemon set doesn't have any other

01:06:12.525 --> 01:06:14.810
<v Speaker 1>controllers that create the pods except speaking to

01:06:14.810 --> 01:06:16.410
<v Speaker 1>the pod control. So you just modified the

01:06:16.410 --> 01:06:19.130
<v Speaker 1>controller manager to actually change the image on

01:06:19.130 --> 01:06:20.170
<v Speaker 1>all pods?

01:06:21.450 --> 01:06:23.370
<v Speaker 0>Exactly. Yeah. On the

01:06:23.610 --> 01:06:26.010
<v Speaker 0>create pod step, so there's a part that

01:06:26.170 --> 01:06:27.610
<v Speaker 0>where it creates pods. I can actually

01:06:28.395 --> 01:06:30.875
<v Speaker 0>put the code here somewhere if you if

01:06:30.875 --> 01:06:32.795
<v Speaker 0>you if you want. But it's like a

01:06:32.795 --> 01:06:34.555
<v Speaker 0>little block that basically says

01:06:35.115 --> 01:06:39.115
<v Speaker 0>replace every container's image to honky honk, basically.

01:06:41.570 --> 01:06:43.570
<v Speaker 1>So the container d alias was really just

01:06:43.570 --> 01:06:45.730
<v Speaker 1>to throw us off this the track. Right?

01:06:45.730 --> 01:06:47.970
<v Speaker 0>So so it wasn't a throw off. It

01:06:47.970 --> 01:06:49.970
<v Speaker 0>was another piece of the puzzle that I

01:06:49.970 --> 01:06:51.490
<v Speaker 0>was trying to add. So

01:06:51.890 --> 01:06:53.890
<v Speaker 0>so I was trying I was hoping that

01:06:53.890 --> 01:06:56.234
<v Speaker 0>after you do this fix that you would

01:06:56.234 --> 01:06:57.035
<v Speaker 0>have other

01:06:57.515 --> 01:06:58.715
<v Speaker 0>things to look for.

01:06:59.595 --> 01:07:00.315
<v Speaker 0>Actually,

01:07:01.194 --> 01:07:03.275
<v Speaker 0>let's see if any of them worked, but

01:07:03.275 --> 01:07:05.035
<v Speaker 0>something tells me they probably didn't.

01:07:06.395 --> 01:07:07.835
<v Speaker 0>Like, my my own

01:07:08.555 --> 01:07:10.155
<v Speaker 0>my own disruptions

01:07:10.240 --> 01:07:12.560
<v Speaker 0>don't seem to have taken effect, but I

01:07:12.560 --> 01:07:14.800
<v Speaker 0>tried a couple of things. I did the

01:07:14.800 --> 01:07:16.400
<v Speaker 0>container deconfiguration

01:07:17.440 --> 01:07:18.960
<v Speaker 0>to basically say,

01:07:19.760 --> 01:07:21.680
<v Speaker 0>instead of pulling from docker dot I o,

01:07:22.160 --> 01:07:23.280
<v Speaker 0>pull from somewhere else,

01:07:24.555 --> 01:07:26.635
<v Speaker 0>honky dot I o. And then

01:07:27.835 --> 01:07:29.675
<v Speaker 0>the other thing I tried to do was

01:07:29.675 --> 01:07:30.315
<v Speaker 0>to

01:07:30.635 --> 01:07:32.954
<v Speaker 0>do something very similar to what Marcus did,

01:07:32.954 --> 01:07:33.995
<v Speaker 0>which was to

01:07:36.075 --> 01:07:38.234
<v Speaker 0>change the service account image pull secrets,

01:07:39.320 --> 01:07:41.640
<v Speaker 0>right, so that it fails to pull the

01:07:41.640 --> 01:07:42.200
<v Speaker 0>image.

01:07:43.720 --> 01:07:45.960
<v Speaker 0>So well done, Mark Marcus on that.

01:07:47.880 --> 01:07:50.040
<v Speaker 2>One of one silly looks good.

01:07:50.600 --> 01:07:50.920
<v Speaker 1>Yeah.

01:07:51.975 --> 01:07:54.215
<v Speaker 1>The image put back also the older ones.

01:07:54.215 --> 01:07:55.895
<v Speaker 1>We need to roll out the

01:07:58.215 --> 01:07:59.575
<v Speaker 1>you know what? Can I can I just

01:07:59.575 --> 01:08:00.375
<v Speaker 1>slide time on this?

01:08:04.810 --> 01:08:07.530
<v Speaker 2>Needs a dash capital a for good measure.

01:08:09.050 --> 01:08:11.530
<v Speaker 1>That may be step two, I think. But

01:08:11.530 --> 01:08:13.450
<v Speaker 1>that should get as at least Cilium daemon

01:08:13.450 --> 01:08:15.530
<v Speaker 1>set running, the Cilium operator running, which we

01:08:15.530 --> 01:08:17.449
<v Speaker 1>also need for all of us to even

01:08:17.449 --> 01:08:17.689
<v Speaker 1>work.

01:08:18.395 --> 01:08:20.635
<v Speaker 1>It should hopefully allow us to start restarting

01:08:20.635 --> 01:08:23.114
<v Speaker 1>pods and other namespaces and not be fumbled

01:08:23.114 --> 01:08:25.354
<v Speaker 1>by the CNI plugin. But

01:08:25.515 --> 01:08:27.755
<v Speaker 1>we've no idea what else, if anything else

01:08:27.755 --> 01:08:28.635
<v Speaker 1>to expect.

01:08:29.354 --> 01:08:31.435
<v Speaker 1>That's looking healthy now. You wanna start

01:08:32.250 --> 01:08:33.689
<v Speaker 1>in a bit of digging and see what

01:08:33.689 --> 01:08:34.649
<v Speaker 1>else we've got?

01:08:36.810 --> 01:08:39.210
<v Speaker 2>So what do we what do we know

01:08:39.210 --> 01:08:39.849
<v Speaker 2>about

01:08:46.250 --> 01:08:48.984
<v Speaker 2>over ciliums are coming up. They look like

01:08:48.984 --> 01:08:51.064
<v Speaker 2>they're okay? Like Yeah. They are. They look

01:08:51.705 --> 01:08:53.145
<v Speaker 2>Alright. Let's

01:08:54.345 --> 01:08:55.864
<v Speaker 2>take a look at the clustered.

01:08:58.825 --> 01:08:59.385
<v Speaker 2>Line

01:09:01.740 --> 01:09:03.340
<v Speaker 2>line wrap is messing me up here.

01:09:15.564 --> 01:09:16.284
<v Speaker 2>Okay.

01:09:20.045 --> 01:09:21.404
<v Speaker 2>And the pods,

01:09:22.604 --> 01:09:23.244
<v Speaker 2>those

01:09:25.164 --> 01:09:26.125
<v Speaker 1>Oh, fancy.

01:09:27.990 --> 01:09:30.069
<v Speaker 2>It worked. Oh, yeah. Because the name is

01:09:30.069 --> 01:09:32.390
<v Speaker 2>different, but now I can tab complete it.

01:09:32.390 --> 01:09:32.869
<v Speaker 2>Right?

01:09:34.390 --> 01:09:35.189
<v Speaker 1>True.

01:09:37.350 --> 01:09:39.029
<v Speaker 1>And so we're still yeah. We need to

01:09:39.029 --> 01:09:40.870
<v Speaker 1>rotate these because we're still getting honky.

01:09:42.024 --> 01:09:45.145
<v Speaker 2>And you killed everything in Cilium namespace or

01:09:45.145 --> 01:09:47.465
<v Speaker 2>everywhere? Just the Cilium namespace.

01:09:56.090 --> 01:09:58.489
<v Speaker 1>I'm curious about those NGINX deployments and why

01:09:58.489 --> 01:09:59.929
<v Speaker 1>they're there. But I'm

01:10:00.489 --> 01:10:01.770
<v Speaker 1>gonna ignore them for now. It's

01:10:02.889 --> 01:10:06.409
<v Speaker 2>The user decided to create their own NGINX

01:10:06.409 --> 01:10:07.369
<v Speaker 2>deployments.

01:10:07.530 --> 01:10:09.449
<v Speaker 1>I don't really believe it's NGINX. I think

01:10:09.449 --> 01:10:10.090
<v Speaker 1>that's

01:10:11.235 --> 01:10:13.635
<v Speaker 1>maybe that's my cynicism coming through. Maybe it's

01:10:13.635 --> 01:10:15.715
<v Speaker 1>just NGINX. Maybe you just really wanted the

01:10:15.715 --> 01:10:18.275
<v Speaker 1>hello world NGINX thing running on my cluster.

01:10:18.355 --> 01:10:19.554
<v Speaker 1>That's fine.

01:10:23.074 --> 01:10:25.155
<v Speaker 1>So what did I get pods show? Anything?

01:10:26.800 --> 01:10:28.480
<v Speaker 2>I was just looking for those finalizers because

01:10:28.480 --> 01:10:31.120
<v Speaker 2>those deletes didn't go through there. What

01:10:32.880 --> 01:10:35.760
<v Speaker 2>did the get pods show? Yeah. Just get

01:10:35.760 --> 01:10:36.960
<v Speaker 1>pods. That's vanilla. Yeah.

01:10:37.680 --> 01:10:38.480
<v Speaker 2>Let's get rid of that.

01:10:46.035 --> 01:10:47.235
<v Speaker 1>Okay. Good.

01:10:51.155 --> 01:10:52.355
<v Speaker 2>That looks a little too good.

01:10:53.070 --> 01:10:55.310
<v Speaker 1>Alright. Let's do the test. Let me port

01:10:55.310 --> 01:10:55.949
<v Speaker 1>forward.

01:10:56.590 --> 01:10:57.630
<v Speaker 2>You got it?

01:10:58.110 --> 01:10:58.829
<v Speaker 2>Or

01:11:00.030 --> 01:11:01.869
<v Speaker 2>do we need to check something about the

01:11:01.869 --> 01:11:04.189
<v Speaker 2>NGINX app as opposed to the cluster app?

01:11:04.670 --> 01:11:06.670
<v Speaker 1>The NGINX is is not mine. I'm gonna

01:11:06.670 --> 01:11:08.195
<v Speaker 1>ignore it for now.

01:11:09.475 --> 01:11:11.155
<v Speaker 1>I am gonna do a port forward to

01:11:11.155 --> 01:11:12.515
<v Speaker 1>our cluster pod though.

01:11:27.300 --> 01:11:29.940
<v Speaker 1>Looks like it's spinning, which would tell me

01:11:29.940 --> 01:11:32.179
<v Speaker 1>we probably got a

01:11:32.500 --> 01:11:34.420
<v Speaker 1>failure to reach the database.

01:11:36.715 --> 01:11:38.395
<v Speaker 1>Yeah. We don't need to wait for that.

01:11:38.395 --> 01:11:41.675
<v Speaker 1>So either yeah. I'm assuming core DNS probably

01:11:41.675 --> 01:11:43.115
<v Speaker 1>needs to restart it. Right? Do wanna do

01:11:43.115 --> 01:11:45.275
<v Speaker 1>a check gib system or something?

01:11:48.635 --> 01:11:49.595
<v Speaker 2>Yeah.

01:11:56.050 --> 01:11:58.530
<v Speaker 1>Yeah. We're still got a carnage in here.

01:12:00.210 --> 01:12:02.050
<v Speaker 1>I'll let you decide the best way to

01:12:02.050 --> 01:12:03.489
<v Speaker 1>get all those pods running again.

01:12:08.425 --> 01:12:09.864
<v Speaker 2>How long how long do you have?

01:12:10.665 --> 01:12:11.304
<v Speaker 0>Don't

01:12:11.545 --> 01:12:13.545
<v Speaker 0>don't try this at home, yeah, for the

01:12:13.545 --> 01:12:16.184
<v Speaker 0>audience. Never I mean, this this will recover.

01:12:16.185 --> 01:12:18.505
<v Speaker 1>It will recover. Yeah. You're right. That's that's

01:12:18.505 --> 01:12:18.985
<v Speaker 2>the point.

01:12:21.370 --> 01:12:23.930
<v Speaker 1>But not something we recommend running in the

01:12:23.930 --> 01:12:25.210
<v Speaker 1>real world.

01:12:26.090 --> 01:12:27.610
<v Speaker 1>Probably a bad idea.

01:12:28.730 --> 01:12:30.890
<v Speaker 1>Oh, look at that. Kevin's just signed up

01:12:30.890 --> 01:12:32.010
<v Speaker 1>to be on the show.

01:12:32.410 --> 01:12:34.844
<v Speaker 1>There you go. He's got some naughty ideas

01:12:34.844 --> 01:12:35.965
<v Speaker 1>he wants to try.

01:12:36.764 --> 01:12:38.764
<v Speaker 1>I'll reach out to you afterwards, mate.

01:12:39.405 --> 01:12:40.204
<v Speaker 2>Is

01:12:40.764 --> 01:12:42.764
<v Speaker 2>does that help our port forward at all?

01:12:42.925 --> 01:12:44.445
<v Speaker 1>I would suspect.

01:12:45.565 --> 01:12:47.244
<v Speaker 1>Or maybe I hope. Not sure what the

01:12:47.244 --> 01:12:48.524
<v Speaker 1>right word is there, but

01:12:49.380 --> 01:12:50.659
<v Speaker 1>yeah. We got our app.

01:12:51.699 --> 01:12:53.780
<v Speaker 1>So we should try and update to v

01:12:53.780 --> 01:12:54.340
<v Speaker 1>two.

01:12:55.940 --> 01:12:58.580
<v Speaker 0>Yeah. Does does import forward go through Q

01:12:58.580 --> 01:12:59.219
<v Speaker 0>proxy,

01:12:59.620 --> 01:13:00.580
<v Speaker 0>I think? Yeah.

01:13:02.745 --> 01:13:03.624
<v Speaker 0>Well, no.

01:13:04.745 --> 01:13:05.704
<v Speaker 0>Or does it?

01:13:06.745 --> 01:13:08.505
<v Speaker 0>Always forget. Yeah. Oh, sure.

01:13:09.304 --> 01:13:11.625
<v Speaker 1>Yeah. The networking state of Kubernetes is where

01:13:11.625 --> 01:13:14.505
<v Speaker 1>I've been completely ignorant my entire Kubernetes career.

01:13:16.140 --> 01:13:18.060
<v Speaker 1>It's just that other people deal with that.

01:13:18.620 --> 01:13:20.940
<v Speaker 2>I don't know the the fancy command to

01:13:20.940 --> 01:13:22.940
<v Speaker 2>upgrade the v one to the v two.

01:13:23.660 --> 01:13:24.940
<v Speaker 2>So I'm just gonna do it the dumb

01:13:24.940 --> 01:13:25.580
<v Speaker 2>way.

01:13:25.900 --> 01:13:27.340
<v Speaker 2>We're going to two? Yep.

01:13:39.155 --> 01:13:39.875
<v Speaker 1>Looks alright.

01:13:44.170 --> 01:13:45.369
<v Speaker 2>They're creating.

01:13:48.250 --> 01:13:49.930
<v Speaker 1>I mean, that's to hopefully just pulling the

01:13:49.930 --> 01:13:50.250
<v Speaker 1>image.

01:14:03.665 --> 01:14:05.025
<v Speaker 2>Big is this image?

01:14:07.265 --> 01:14:08.864
<v Speaker 1>It's just a rust bainery.

01:14:09.105 --> 01:14:10.385
<v Speaker 1>Although it does have an m p four

01:14:10.385 --> 01:14:12.385
<v Speaker 1>in it with dot move, whatever it is

01:14:12.385 --> 01:14:13.185
<v Speaker 1>with the

01:14:13.940 --> 01:14:15.860
<v Speaker 1>the thing, but it's not too big.

01:14:23.780 --> 01:14:25.380
<v Speaker 2>That seems unusual.

01:14:25.620 --> 01:14:26.980
<v Speaker 1>Yeah. It does seem unusual.

01:14:28.614 --> 01:14:30.135
<v Speaker 1>I'm looking at your moody.

01:14:34.215 --> 01:14:36.934
<v Speaker 0>Well, I I I this is unexpected, so

01:14:36.935 --> 01:14:37.494
<v Speaker 0>I'll do that.

01:14:40.920 --> 01:14:42.760
<v Speaker 0>It should yeah. I think this is this

01:14:42.760 --> 01:14:46.200
<v Speaker 0>is probably more g GitHub GitHub thing than

01:14:46.680 --> 01:14:47.320
<v Speaker 0>yep.

01:14:48.120 --> 01:14:49.800
<v Speaker 0>Or is it, actually?

01:14:53.014 --> 01:14:54.454
<v Speaker 2>Yeah. I don't know if the simple way

01:14:54.454 --> 01:14:56.774
<v Speaker 2>to pull images just to test that

01:14:57.415 --> 01:14:59.655
<v Speaker 2>that we could do that. I don't know

01:14:59.655 --> 01:15:01.735
<v Speaker 1>if we I've never done that with CryoController

01:15:01.735 --> 01:15:03.735
<v Speaker 1>or anything. All images.

01:15:06.135 --> 01:15:07.335
<v Speaker 1>That is gonna list them.

01:15:11.550 --> 01:15:12.830
<v Speaker 1>Oh, wait. That was the first one. I'm

01:15:12.830 --> 01:15:14.590
<v Speaker 1>looking at these clusters.

01:15:14.750 --> 01:15:15.550
<v Speaker 1>So

01:15:15.630 --> 01:15:17.230
<v Speaker 1>pull the

01:15:17.550 --> 01:15:18.430
<v Speaker 1>r.

01:15:18.990 --> 01:15:20.830
<v Speaker 2>I couldn't figure out how to use, like,

01:15:20.830 --> 01:15:22.830
<v Speaker 2>CRI CTL to run an image.

01:15:24.375 --> 01:15:26.295
<v Speaker 2>It seemed like to do so, you need

01:15:26.295 --> 01:15:27.974
<v Speaker 2>to set up a a manifest.

01:15:29.095 --> 01:15:30.375
<v Speaker 2>Like, you have you you need, like, a

01:15:30.455 --> 01:15:32.295
<v Speaker 2>at least, like, a five line YAML,

01:15:32.615 --> 01:15:34.615
<v Speaker 2>and I just I couldn't accept that. Was

01:15:34.615 --> 01:15:36.375
<v Speaker 2>looking for ways to run it. I read

01:15:36.455 --> 01:15:38.770
<v Speaker 1>the answers. There we go. I ran into

01:15:38.770 --> 01:15:40.770
<v Speaker 0>this. Yeah. You need the runtime endpoint to

01:15:40.770 --> 01:15:43.010
<v Speaker 0>be the Oh, yeah. Yeah. The run socket

01:15:43.010 --> 01:15:45.969
<v Speaker 0>thing. Yeah. The container d socket, I think.

01:15:45.969 --> 01:15:46.610
<v Speaker 0>Yeah.

01:15:47.969 --> 01:15:49.889
<v Speaker 0>I don't know why it's not the default.

01:15:49.889 --> 01:15:51.330
<v Speaker 0>I always wondered that. Yeah.

01:15:55.595 --> 01:15:57.755
<v Speaker 0>Oh, is it slash run? I think it's

01:15:57.755 --> 01:15:58.795
<v Speaker 0>slash run.

01:15:59.195 --> 01:16:00.715
<v Speaker 1>There we go. I just missed a I

01:16:00.715 --> 01:16:03.595
<v Speaker 1>just missed a container d. Correct. Yeah. Yeah.

01:16:08.955 --> 01:16:09.595
<v Speaker 0>Nice.

01:16:09.890 --> 01:16:11.489
<v Speaker 1>I think it's run time endpoint.

01:16:12.370 --> 01:16:13.570
<v Speaker 1>I don't know if we should be seeing

01:16:13.570 --> 01:16:14.929
<v Speaker 1>any progress.

01:16:17.490 --> 01:16:19.010
<v Speaker 0>Unless we Okay.

01:16:20.050 --> 01:16:21.730
<v Speaker 1>I mean, that should be fast. Yeah. Okay.

01:16:21.730 --> 01:16:24.290
<v Speaker 1>So maybe it's just okay. Some something wrong

01:16:24.290 --> 01:16:24.930
<v Speaker 1>with

01:16:25.485 --> 01:16:27.005
<v Speaker 1>DNS networking.

01:16:29.965 --> 01:16:30.764
<v Speaker 1>Dig

01:16:30.844 --> 01:16:31.564
<v Speaker 1>at

01:16:32.685 --> 01:16:33.645
<v Speaker 1>google.com.

01:16:33.645 --> 01:16:35.564
<v Speaker 1>I'm using Cloudflare to do Google.

01:16:35.885 --> 01:16:37.324
<v Speaker 1>That made me laugh at least.

01:16:37.645 --> 01:16:38.364
<v Speaker 1>I don't think

01:16:41.180 --> 01:16:42.380
<v Speaker 1>we've got DNS.

01:16:43.180 --> 01:16:45.500
<v Speaker 2>There's a debug flag that we could try

01:16:45.500 --> 01:16:47.580
<v Speaker 2>in that c r c q.

01:16:52.780 --> 01:16:53.500
<v Speaker 1>Awesome.

01:16:56.265 --> 01:16:56.905
<v Speaker 0>Holy.

01:16:58.825 --> 01:17:00.585
<v Speaker 1>I don't know if it's just pulling in

01:17:00.585 --> 01:17:01.865
<v Speaker 1>slowly or

01:17:06.760 --> 01:17:08.760
<v Speaker 1>I'm gonna try it locally. Let's let's try

01:17:08.760 --> 01:17:09.880
<v Speaker 1>it. Maybe it's

01:17:10.360 --> 01:17:12.760
<v Speaker 1>image. Maybe we could try an entirely different

01:17:12.760 --> 01:17:13.479
<v Speaker 2>image.

01:17:14.360 --> 01:17:15.479
<v Speaker 1>Oh, no. It pulled.

01:17:16.040 --> 01:17:17.960
<v Speaker 1>There we go. Oh, it pulled. It's just

01:17:18.119 --> 01:17:19.239
<v Speaker 0>maybe just low. Yeah.

01:17:22.145 --> 01:17:23.585
<v Speaker 1>That's it. It worked.

01:17:24.305 --> 01:17:24.785
<v Speaker 1>Yeah.

01:17:25.905 --> 01:17:27.185
<v Speaker 0>Good job, guys.

01:17:28.625 --> 01:17:31.265
<v Speaker 0>So yeah. Is there anything else? I

01:17:31.505 --> 01:17:32.385
<v Speaker 0>think you did.

01:17:32.945 --> 01:17:34.465
<v Speaker 0>There was one more thing.

01:17:34.865 --> 01:17:37.060
<v Speaker 0>I think that I mean, it's so subtle.

01:17:37.060 --> 01:17:38.740
<v Speaker 0>I didn't think you guys would notice, but

01:17:38.740 --> 01:17:41.620
<v Speaker 0>there is a in the container deconfiguration,

01:17:41.620 --> 01:17:42.660
<v Speaker 0>there was a

01:17:43.700 --> 01:17:44.660
<v Speaker 0>a platform

01:17:44.740 --> 01:17:47.220
<v Speaker 0>field where I put ARM 64

01:17:47.380 --> 01:17:51.074
<v Speaker 0>hoping that it would only pull ARM 64

01:17:51.955 --> 01:17:54.594
<v Speaker 0>man or images, met manifests so

01:17:55.795 --> 01:17:57.795
<v Speaker 0>that so that what would happen is you

01:17:57.795 --> 01:18:00.275
<v Speaker 0>would find other unexpected issues in the process

01:18:00.275 --> 01:18:01.315
<v Speaker 0>itself because

01:18:01.555 --> 01:18:04.515
<v Speaker 0>the ARM 64 version of NGINX, for example,

01:18:04.515 --> 01:18:07.840
<v Speaker 0>would have completely different behavior on an AMD

01:18:07.840 --> 01:18:08.800
<v Speaker 0>sixty four

01:18:09.840 --> 01:18:11.920
<v Speaker 0>platform. But, yeah, that I couldn't get that

01:18:11.920 --> 01:18:13.520
<v Speaker 0>to work. So if anybody knows, I would

01:18:13.520 --> 01:18:15.440
<v Speaker 0>love to get some input. But yeah.

01:18:16.720 --> 01:18:20.075
<v Speaker 1>Alright. Awesome. Great breaks, both of you. Great

01:18:20.075 --> 01:18:21.115
<v Speaker 1>fixing to

01:18:21.595 --> 01:18:24.315
<v Speaker 1>terrible. They were terrible breaks. Nobody

01:18:24.635 --> 01:18:26.795
<v Speaker 2>should have to ever deal with these problems.

01:18:27.595 --> 01:18:29.275
<v Speaker 2>I don't know why everything is so, like,

01:18:29.275 --> 01:18:31.195
<v Speaker 2>happy. You know? But these things do happen

01:18:31.195 --> 01:18:33.115
<v Speaker 1>though. Right? Like, misconfiguration

01:18:33.115 --> 01:18:35.570
<v Speaker 1>is is definitely entirely possible.

01:18:35.650 --> 01:18:37.010
<v Speaker 1>I mean, I'm not sure I'd ever end

01:18:37.010 --> 01:18:39.010
<v Speaker 1>up with a honky controller manager. That was

01:18:39.010 --> 01:18:40.210
<v Speaker 1>a nice touch. But

01:18:41.170 --> 01:18:43.090
<v Speaker 0>I did not expect you guys to go

01:18:43.090 --> 01:18:45.570
<v Speaker 0>that route at all. That was that was

01:18:45.730 --> 01:18:49.455
<v Speaker 0>unexpected, like, trying to debug Cilium first. It

01:18:49.455 --> 01:18:51.055
<v Speaker 0>made sense, but it was never part of

01:18:51.055 --> 01:18:51.775
<v Speaker 0>the plan.

01:18:52.175 --> 01:18:54.015
<v Speaker 0>But I can see how that ended up

01:18:54.015 --> 01:18:56.415
<v Speaker 0>that way. The idea was to kind of

01:18:56.415 --> 01:18:57.215
<v Speaker 0>scatter

01:18:57.535 --> 01:18:59.780
<v Speaker 0>everything so that you kind of figure out

01:18:59.780 --> 01:19:01.460
<v Speaker 0>what the root cause is. So it kind

01:19:01.460 --> 01:19:03.460
<v Speaker 0>of hopefully, you guys have enjoyed it. Yeah.

01:19:03.460 --> 01:19:06.740
<v Speaker 1>Yeah. Running get pods all and seeing a

01:19:06.740 --> 01:19:09.540
<v Speaker 1>literal clusterfuck on every pod was not something

01:19:09.540 --> 01:19:10.420
<v Speaker 1>I expected to see.

01:19:12.465 --> 01:19:14.385
<v Speaker 2>Yeah. So where where is the code for

01:19:14.385 --> 01:19:15.505
<v Speaker 2>your controller at?

01:19:17.344 --> 01:19:19.505
<v Speaker 0>It's it's I can I don't know if

01:19:19.505 --> 01:19:20.144
<v Speaker 0>I can

01:19:21.105 --> 01:19:22.945
<v Speaker 0>can I share screen? Maybe I can You

01:19:22.945 --> 01:19:23.665
<v Speaker 0>can. Yeah. If you want.

01:19:24.880 --> 01:19:26.400
<v Speaker 0>Okay. Let me see if I can I'm

01:19:26.400 --> 01:19:28.560
<v Speaker 2>curious about, like, the exclusions that that you

01:19:28.560 --> 01:19:29.920
<v Speaker 2>had to bake into it.

01:19:31.120 --> 01:19:34.080
<v Speaker 0>Yeah. Here. Let me try this share screen

01:19:34.080 --> 01:19:35.040
<v Speaker 0>window.

01:19:35.840 --> 01:19:38.675
<v Speaker 0>This guy. Does that work? Yeah. Yeah. Cool.

01:19:38.675 --> 01:19:41.395
<v Speaker 0>So if you guys can see in the

01:19:41.395 --> 01:19:44.355
<v Speaker 0>Kubernetes project under package controller

01:19:44.515 --> 01:19:46.435
<v Speaker 0>control controller utils,

01:19:46.515 --> 01:19:48.915
<v Speaker 0>there is a function called create pods.

01:19:49.075 --> 01:19:50.915
<v Speaker 0>You can guess what that does. It basically

01:19:50.915 --> 01:19:52.595
<v Speaker 0>creates pods

01:19:52.870 --> 01:19:53.830
<v Speaker 0>for any

01:19:54.230 --> 01:19:54.470
<v Speaker 0>con

01:19:55.430 --> 01:19:58.710
<v Speaker 0>controller that's inside the controller managers. For example,

01:19:59.350 --> 01:20:01.750
<v Speaker 0>the daemon set con the daemon set controller,

01:20:01.910 --> 01:20:04.790
<v Speaker 0>the replica set controller, the deployment controller, the

01:20:04.790 --> 01:20:07.590
<v Speaker 0>stateful set controller, they all basically call

01:20:07.965 --> 01:20:11.244
<v Speaker 0>they all basically call this function. Yeah. Sorry.

01:20:12.685 --> 01:20:14.685
<v Speaker 0>So, yeah, I I just you can kind

01:20:14.685 --> 01:20:17.965
<v Speaker 0>of read this four five liner. That's

01:20:17.965 --> 01:20:19.485
<v Speaker 0>exactly what what I did. Yeah.

01:20:20.860 --> 01:20:21.659
<v Speaker 1>Awesome.

01:20:21.739 --> 01:20:23.580
<v Speaker 2>It would have been interesting if there was,

01:20:23.580 --> 01:20:25.100
<v Speaker 2>like, an init container, and we would have

01:20:25.100 --> 01:20:27.180
<v Speaker 2>seen we would have noticed that, yeah, it

01:20:27.180 --> 01:20:28.380
<v Speaker 2>didn't pick up that.

01:20:30.060 --> 01:20:30.940
<v Speaker 2>I I

01:20:31.500 --> 01:20:33.900
<v Speaker 2>I was thinking about ways to use a

01:20:33.980 --> 01:20:36.275
<v Speaker 2>an init container for mine to

01:20:36.595 --> 01:20:38.035
<v Speaker 2>to just

01:20:38.115 --> 01:20:40.675
<v Speaker 2>cause extra havoc, but didn't in in this

01:20:40.675 --> 01:20:41.555
<v Speaker 2>case, that would have maybe

01:20:43.235 --> 01:20:44.355
<v Speaker 2>well, I don't know if they would have

01:20:44.355 --> 01:20:46.275
<v Speaker 2>pointed us in a better direction. Having having

01:20:46.275 --> 01:20:48.989
<v Speaker 2>the hunky controller manager,

01:20:50.750 --> 01:20:52.909
<v Speaker 2>let's say, in retrospect, it seems like that's

01:20:52.909 --> 01:20:54.349
<v Speaker 2>the only way that could have been done.

01:20:55.710 --> 01:20:58.270
<v Speaker 0>Yeah. Yeah. The the you like, the part

01:20:58.270 --> 01:21:00.909
<v Speaker 0>where you you you look at the deployment,

01:21:00.909 --> 01:21:02.829
<v Speaker 0>you're like, that I that should be the

01:21:02.829 --> 01:21:04.804
<v Speaker 0>image that gets gets created and it's not.

01:21:04.804 --> 01:21:05.925
<v Speaker 0>Right? Like, so

01:21:06.725 --> 01:21:09.125
<v Speaker 0>that was the main clue or or puzzle.

01:21:09.125 --> 01:21:09.604
<v Speaker 1>Yeah.

01:21:10.245 --> 01:21:12.965
<v Speaker 1>Awesome. Well, thank you both. Two very different

01:21:12.965 --> 01:21:15.925
<v Speaker 1>breaks there. We got the nuclear approach

01:21:16.080 --> 01:21:17.920
<v Speaker 1>from Moody. We got the death by a

01:21:17.920 --> 01:21:19.520
<v Speaker 1>thousand cuts by Marcus.

01:21:19.840 --> 01:21:22.240
<v Speaker 1>Both very interesting to text. Thank you both

01:21:22.240 --> 01:21:24.400
<v Speaker 1>for joining me. It was a real pleasure.

01:21:24.400 --> 01:21:25.440
<v Speaker 1>I had a lot of fun with these

01:21:25.440 --> 01:21:26.080
<v Speaker 1>clusters.

01:21:26.560 --> 01:21:28.720
<v Speaker 1>And hopefully, the cluster 13 curse will not

01:21:28.720 --> 01:21:30.240
<v Speaker 1>follow us into future episodes.

01:21:32.355 --> 01:21:34.915
<v Speaker 1>Alright. Well, that's us for today. Thank you

01:21:34.915 --> 01:21:37.075
<v Speaker 1>for taking the time out joining me. If

01:21:37.075 --> 01:21:38.595
<v Speaker 1>you're watching and you wanna take part in

01:21:38.595 --> 01:21:40.675
<v Speaker 1>clustered, reach out to me in the Discord

01:21:40.675 --> 01:21:42.435
<v Speaker 1>or on Twitter. We're always looking for new

01:21:42.435 --> 01:21:44.515
<v Speaker 1>people and new breaks and new fixers.

01:21:44.515 --> 01:21:45.795
<v Speaker 1>And it'll be a pleasure to have you

01:21:45.795 --> 01:21:45.955
<v Speaker 1>all.

01:21:47.290 --> 01:21:48.010
<v Speaker 1>Okay.

01:21:48.970 --> 01:21:51.450
<v Speaker 1>Have a great evening, afternoon.

01:21:51.930 --> 01:21:54.170
<v Speaker 1>Yeah. Afternoon, I guess, for you both. Thank

01:21:54.170 --> 01:21:55.210
<v Speaker 1>you very much. I'll speak to you all

01:21:55.210 --> 01:21:58.090
<v Speaker 1>soon. Take Friday off. Cheers. Bye.

01:21:58.890 --> 01:21:59.450
<v Speaker 0>Bye.
