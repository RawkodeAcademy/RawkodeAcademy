WEBVTT

NOTE
Transcription provided by Deepgram
Request Id: 3cc5a703-9e3a-4193-b86b-2dfc52fe839a
Created: 2025-04-29T19:48:06.206Z
Duration: 7085.088
Channels: 1

00:01:11.545 --> 00:01:14.585
<v Speaker 0>Hello and welcome to today's episode of Rawkode

00:01:14.460 --> 00:01:17.900
<v Speaker 0>live. This is the special clustered edition part

00:01:17.900 --> 00:01:18.700
<v Speaker 0>two.

00:01:19.740 --> 00:01:21.420
<v Speaker 0>We are going to be

00:01:21.580 --> 00:01:25.820
<v Speaker 0>attempting to fix some broken Kubernetes clusters. These

00:01:25.820 --> 00:01:29.020
<v Speaker 0>Kubernetes clusters are broken by friends, colleagues and

00:01:29.020 --> 00:01:31.165
<v Speaker 0>members of the community. Community. We have two

00:01:31.165 --> 00:01:32.284
<v Speaker 0>clusters today

00:01:32.365 --> 00:01:34.045
<v Speaker 0>and to help me fix them, I am

00:01:34.045 --> 00:01:36.445
<v Speaker 0>going to be joined by my friend and

00:01:36.445 --> 00:01:37.165
<v Speaker 0>colleague

00:01:37.884 --> 00:01:40.045
<v Speaker 0>Dan Fennerin. Hey Dan, how's it going?

00:01:40.604 --> 00:01:42.924
<v Speaker 1>It's going well, thank you very much. I

00:01:42.924 --> 00:01:43.485
<v Speaker 1>am

00:01:44.365 --> 00:01:47.860
<v Speaker 1>very excited and slightly nervous for today but

00:01:47.860 --> 00:01:48.979
<v Speaker 1>it should be fun.

00:01:49.220 --> 00:01:50.420
<v Speaker 0>It will definitely

00:01:50.740 --> 00:01:51.700
<v Speaker 0>be fun

00:01:52.420 --> 00:01:54.580
<v Speaker 0>whether it will be successful we'll have yet

00:01:54.580 --> 00:01:55.220
<v Speaker 0>to see.

00:01:55.780 --> 00:01:57.460
<v Speaker 0>To the people watching us and joining us

00:01:57.460 --> 00:01:59.619
<v Speaker 0>at home please remember to subscribe and click

00:01:59.619 --> 00:02:02.259
<v Speaker 0>the bell on YouTube it helps other people

00:02:01.575 --> 00:02:04.055
<v Speaker 0>find these videos and we have a discord

00:02:04.055 --> 00:02:06.134
<v Speaker 0>chat which will be visible throughout our session.

00:02:06.134 --> 00:02:07.735
<v Speaker 0>Feel free to jump in and join us

00:02:07.735 --> 00:02:08.215
<v Speaker 0>there.

00:02:08.935 --> 00:02:09.574
<v Speaker 0>Now,

00:02:09.974 --> 00:02:11.495
<v Speaker 0>why don't we just start with a quick

00:02:11.495 --> 00:02:12.935
<v Speaker 0>introduction then Dan? Why don't you tell us

00:02:12.935 --> 00:02:14.694
<v Speaker 0>a little bit about yourself and then we'll

00:02:14.694 --> 00:02:16.650
<v Speaker 0>take a look at last week's clusters.

00:02:17.370 --> 00:02:18.170
<v Speaker 1>Excellent.

00:02:18.170 --> 00:02:20.410
<v Speaker 1>Yes. So my name is Dan Finnerin.

00:02:20.730 --> 00:02:22.970
<v Speaker 1>I am part of Equinix Metal, part of

00:02:22.970 --> 00:02:23.530
<v Speaker 1>the

00:02:24.170 --> 00:02:26.170
<v Speaker 1>developer relations engineering team.

00:02:27.405 --> 00:02:29.565
<v Speaker 1>Spend a lot of my time in Kubernetes

00:02:29.565 --> 00:02:31.165
<v Speaker 1>clusters or in

00:02:31.965 --> 00:02:33.885
<v Speaker 1>the container space. I

00:02:35.245 --> 00:02:38.605
<v Speaker 1>come to Equinix Messle from Hetero VMware, and

00:02:38.605 --> 00:02:40.925
<v Speaker 1>prior to that, I was at Docker. So

00:02:42.170 --> 00:02:45.370
<v Speaker 1>I'm hoping through that I've I've accrued some

00:02:45.370 --> 00:02:47.130
<v Speaker 1>knowledge that may help me today.

00:02:47.930 --> 00:02:49.370
<v Speaker 1>I feel a little bit as though this

00:02:49.370 --> 00:02:51.610
<v Speaker 1>is punishment for being mean last week with

00:02:51.610 --> 00:02:52.970
<v Speaker 1>breaking my clusters.

00:02:54.010 --> 00:02:56.615
<v Speaker 1>But, yeah, I'm excited. Well why don't we

00:02:56.615 --> 00:02:58.775
<v Speaker 0>quickly talk about that then. So we actually

00:02:58.775 --> 00:03:00.935
<v Speaker 0>have our first comment from none other than

00:03:00.935 --> 00:03:03.175
<v Speaker 0>Waleed himself who says, hey Dan.

00:03:04.535 --> 00:03:06.695
<v Speaker 0>Hey Waleed, thank you for joining us again.

00:03:06.855 --> 00:03:08.135
<v Speaker 1>I'm gonna get you.

00:03:09.415 --> 00:03:12.190
<v Speaker 0>Well let's cover what happened week then. I've

00:03:12.190 --> 00:03:12.990
<v Speaker 0>got the

00:03:13.390 --> 00:03:13.870
<v Speaker 0>repository

00:03:14.350 --> 00:03:16.350
<v Speaker 0>up so like we want this to be

00:03:16.350 --> 00:03:18.430
<v Speaker 0>a valuable learning resource as well as entertaining

00:03:18.430 --> 00:03:19.950
<v Speaker 0>for the people that are watching and following

00:03:19.950 --> 00:03:21.790
<v Speaker 0>along. So what we're gonna try and do

00:03:21.790 --> 00:03:23.870
<v Speaker 0>week after week as we air new episodes

00:03:23.870 --> 00:03:24.805
<v Speaker 0>of clustered,

00:03:25.125 --> 00:03:27.844
<v Speaker 0>is just publish the manifests that we use

00:03:27.844 --> 00:03:29.765
<v Speaker 0>to create the clusters using cluster API on

00:03:29.765 --> 00:03:31.844
<v Speaker 0>Equinix metal but also we're going to try

00:03:31.844 --> 00:03:33.924
<v Speaker 0>and document what went wrong, what the symptoms

00:03:33.924 --> 00:03:36.004
<v Speaker 0>were and then we've also going to have

00:03:36.004 --> 00:03:37.125
<v Speaker 0>each of the breakers

00:03:37.290 --> 00:03:39.769
<v Speaker 0>just contribute and tell us what actually happened.

00:03:39.769 --> 00:03:40.250
<v Speaker 0>So

00:03:40.810 --> 00:03:42.730
<v Speaker 0>Wally joined me last week, Wally and I

00:03:42.730 --> 00:03:44.969
<v Speaker 0>were on team fixed, our clusters were broken

00:03:44.969 --> 00:03:47.049
<v Speaker 0>by Lee Briggs of Pulumi and Dan who

00:03:47.049 --> 00:03:48.010
<v Speaker 0>is with me now.

00:03:48.329 --> 00:03:49.769
<v Speaker 0>You'll see there's a readme in each of

00:03:49.769 --> 00:03:51.530
<v Speaker 0>these, we can see that cluster one from

00:03:51.530 --> 00:03:52.010
<v Speaker 0>Lee

00:03:52.725 --> 00:03:55.685
<v Speaker 0>had a small typo and the CNI slash

00:03:55.685 --> 00:03:56.965
<v Speaker 0>Cilium configuration

00:03:57.205 --> 00:03:59.285
<v Speaker 0>which broke networking on the cluster.

00:03:59.765 --> 00:04:01.605
<v Speaker 0>We discovered the symptom was that our Cilium

00:04:01.605 --> 00:04:03.285
<v Speaker 0>agents were in clash with back off, we

00:04:03.285 --> 00:04:05.285
<v Speaker 0>actually missed that, I'm not sure how I'm

00:04:05.285 --> 00:04:07.030
<v Speaker 0>gonna blame TMux, so we're not using it

00:04:07.030 --> 00:04:07.910
<v Speaker 0>today and

00:04:08.629 --> 00:04:10.549
<v Speaker 0>scrolling on TMUX is just not something I

00:04:10.549 --> 00:04:12.150
<v Speaker 0>was good at. Anyway we we managed to

00:04:12.150 --> 00:04:13.510
<v Speaker 0>fix it so that was good, it took

00:04:13.510 --> 00:04:15.269
<v Speaker 0>us twenty five minutes, it was good fun,

00:04:15.269 --> 00:04:16.390
<v Speaker 0>thank you very much Lee.

00:04:17.190 --> 00:04:20.229
<v Speaker 0>And then there's the novel that is Dan's

00:04:19.904 --> 00:04:20.464
<v Speaker 0>cluster.

00:04:22.545 --> 00:04:24.865
<v Speaker 0>So discovered symptoms, we worked out well first

00:04:24.865 --> 00:04:27.025
<v Speaker 0>and foremost SSH wasn't running on the standard

00:04:27.025 --> 00:04:28.785
<v Speaker 0>port. Mean that was just a major fuck

00:04:28.785 --> 00:04:30.465
<v Speaker 0>you right from the start Dan, come on.

00:04:31.745 --> 00:04:33.665
<v Speaker 0>I spent ten minutes trying to work out

00:04:33.665 --> 00:04:35.509
<v Speaker 0>how to go on the thing. Unfortunately you

00:04:35.509 --> 00:04:37.030
<v Speaker 0>were joining us and left us a comment

00:04:37.030 --> 00:04:38.389
<v Speaker 0>to help us out. So we did get

00:04:38.389 --> 00:04:40.150
<v Speaker 0>on the port I should have guessed but

00:04:40.150 --> 00:04:42.949
<v Speaker 0>again you get this blinker days when you've

00:04:42.949 --> 00:04:43.910
<v Speaker 0>got people watching over your We

00:04:45.349 --> 00:04:47.565
<v Speaker 0>had an unresponsive API server, it was in

00:04:47.565 --> 00:04:50.045
<v Speaker 0>crash loop back off. We discovered a few

00:04:50.045 --> 00:04:52.685
<v Speaker 0>contributing factors which we documented and then Dan

00:04:52.685 --> 00:04:56.205
<v Speaker 0>very kindly provided all of the fibr he

00:04:56.205 --> 00:04:58.525
<v Speaker 0>applied to that cluster. So lots of interesting

00:04:58.525 --> 00:05:00.260
<v Speaker 0>stuff for there to debug and fix.

00:05:00.580 --> 00:05:02.500
<v Speaker 1>I went a little bit crazy, I think.

00:05:02.900 --> 00:05:04.500
<v Speaker 1>A lot of it is kind of issues

00:05:04.500 --> 00:05:06.180
<v Speaker 1>that I tend to do when I'm kind

00:05:06.180 --> 00:05:08.100
<v Speaker 1>of quickly throwing things up though, like

00:05:08.580 --> 00:05:09.780
<v Speaker 1>building a machine

00:05:10.020 --> 00:05:12.384
<v Speaker 1>that by default has swap enabled, turn swap

00:05:12.384 --> 00:05:13.905
<v Speaker 1>off, install Kubernetes,

00:05:13.905 --> 00:05:16.064
<v Speaker 1>and then rebooting. And then the cubelet is

00:05:16.064 --> 00:05:17.985
<v Speaker 1>basically like, well, I'm not starting because swap's

00:05:17.985 --> 00:05:20.865
<v Speaker 1>enabled. Yeah. So I kind of reverted it

00:05:20.865 --> 00:05:22.465
<v Speaker 1>back to the sort of issues that I

00:05:22.465 --> 00:05:23.345
<v Speaker 1>created myself.

00:05:23.824 --> 00:05:25.425
<v Speaker 0>What I I think what I loved and

00:05:25.425 --> 00:05:27.090
<v Speaker 0>hated at the same time about everything that

00:05:27.090 --> 00:05:28.530
<v Speaker 0>you broke as well is you didn't just

00:05:28.530 --> 00:05:29.810
<v Speaker 0>do it on the control plane or do

00:05:29.810 --> 00:05:31.650
<v Speaker 0>you actually replicated it to every node in

00:05:31.650 --> 00:05:34.210
<v Speaker 0>the cluster which made fixing it all a

00:05:34.210 --> 00:05:35.090
<v Speaker 0>more painful.

00:05:35.730 --> 00:05:37.330
<v Speaker 1>Yeah. But it was good. Yeah. I

00:05:37.810 --> 00:05:39.250
<v Speaker 1>one of the issues I think I was

00:05:39.250 --> 00:05:40.050
<v Speaker 1>interesting,

00:05:40.050 --> 00:05:41.645
<v Speaker 1>I guess I hadn't really considered it, was

00:05:41.645 --> 00:05:44.445
<v Speaker 1>that once HCD got to three

00:05:45.245 --> 00:05:47.645
<v Speaker 1>three nodes as part of its configuration, breaking

00:05:47.645 --> 00:05:48.445
<v Speaker 1>that

00:05:48.605 --> 00:05:51.005
<v Speaker 1>meant that HCD would never actually reach quorum.

00:05:51.005 --> 00:05:53.180
<v Speaker 1>So fixing the first node

00:05:53.340 --> 00:05:55.100
<v Speaker 1>still left you at a point where nothing

00:05:55.100 --> 00:05:56.300
<v Speaker 1>was actually working.

00:05:56.940 --> 00:05:57.740
<v Speaker 0>Yep.

00:05:59.260 --> 00:06:00.220
<v Speaker 0>Alright. Sorry.

00:06:01.180 --> 00:06:03.100
<v Speaker 0>But but that was that was last week.

00:06:03.260 --> 00:06:05.020
<v Speaker 0>Waleed thanks for joining us today. Thanks for

00:06:05.020 --> 00:06:06.220
<v Speaker 0>joining me last week. It was a whole

00:06:06.220 --> 00:06:06.780
<v Speaker 0>lot of fun.

00:06:07.775 --> 00:06:09.535
<v Speaker 0>In fact Vale just said no, don't worry

00:06:09.535 --> 00:06:11.935
<v Speaker 0>Dan. It was fun. Which just means leads

00:06:11.935 --> 00:06:13.615
<v Speaker 0>at me. I'm curious to see what will

00:06:13.615 --> 00:06:14.895
<v Speaker 0>lead. Will lead is one of our breakers

00:06:14.895 --> 00:06:18.015
<v Speaker 0>today. So a couple more highs. Hi

00:06:18.175 --> 00:06:20.015
<v Speaker 0>Benziden. Nice to see you.

00:06:20.335 --> 00:06:22.060
<v Speaker 0>Hey Mark, how's it going? Good to see

00:06:22.060 --> 00:06:24.620
<v Speaker 0>you. Of course we've got Nuno thanks for

00:06:24.620 --> 00:06:25.580
<v Speaker 0>joining us.

00:06:27.500 --> 00:06:29.980
<v Speaker 0>Yeah awesome, oh sorry Frank I missed you,

00:06:29.980 --> 00:06:31.420
<v Speaker 0>there we go. There's all the hellos done.

00:06:31.420 --> 00:06:33.180
<v Speaker 0>Feel free to jump into discord or use

00:06:33.180 --> 00:06:35.260
<v Speaker 0>YouTube comments as we go, we will definitely

00:06:35.260 --> 00:06:37.445
<v Speaker 0>appreciate the help. This is

00:06:37.845 --> 00:06:39.685
<v Speaker 0>a little difficult at times.

00:06:40.724 --> 00:06:43.525
<v Speaker 0>Alright, so we're not using TMux today.

00:06:44.965 --> 00:06:47.604
<v Speaker 0>I have been slightly more prepared and I

00:06:47.604 --> 00:06:49.764
<v Speaker 0>want us to be able to still have

00:06:49.764 --> 00:06:53.340
<v Speaker 0>that TMux flexibility or teammate function functionality where

00:06:53.340 --> 00:06:55.340
<v Speaker 0>we can actually share a terminal type together,

00:06:55.340 --> 00:06:58.060
<v Speaker 0>but with actual decent scrolling. So today we're

00:06:58.060 --> 00:06:59.180
<v Speaker 0>using teleport,

00:06:59.979 --> 00:07:03.020
<v Speaker 0>which means we have an SSH connection open

00:07:03.020 --> 00:07:04.699
<v Speaker 0>on our first node with RAM PS to

00:07:04.699 --> 00:07:06.315
<v Speaker 0>make sure it works. Dan has the same

00:07:06.315 --> 00:07:08.315
<v Speaker 0>on his side. Dan type hello.

00:07:09.755 --> 00:07:11.195
<v Speaker 0>You've

00:07:11.195 --> 00:07:13.195
<v Speaker 0>lost the window. Should have warned you. There

00:07:13.195 --> 00:07:15.675
<v Speaker 0>we go. So we're gonna try

00:07:15.915 --> 00:07:18.235
<v Speaker 0>and take it a little bit slower

00:07:18.640 --> 00:07:19.520
<v Speaker 0>and

00:07:19.600 --> 00:07:20.560
<v Speaker 0>methodological,

00:07:20.560 --> 00:07:24.880
<v Speaker 0>I'm

00:07:24.880 --> 00:07:28.720
<v Speaker 0>Scottish I think a Methodically.

00:07:29.120 --> 00:07:30.080
<v Speaker 0>Methodically.

00:07:30.080 --> 00:07:30.960
<v Speaker 0>Thank you. Try

00:07:31.760 --> 00:07:34.375
<v Speaker 0>and fix this together, taken, try to follow

00:07:34.375 --> 00:07:37.015
<v Speaker 0>each other's hypothesis and really explain what we're

00:07:37.015 --> 00:07:38.695
<v Speaker 0>thinking as we go. So

00:07:40.215 --> 00:07:41.095
<v Speaker 0>I guess

00:07:41.495 --> 00:07:43.815
<v Speaker 0>really what we wanna do first and I'm

00:07:43.815 --> 00:07:45.735
<v Speaker 0>gonna jump to my local terminal first just

00:07:45.735 --> 00:07:47.495
<v Speaker 0>because I do have a cube config there

00:07:47.495 --> 00:07:49.895
<v Speaker 0>and I'm gonna run just to get nodes.

00:07:52.190 --> 00:07:53.470
<v Speaker 0>I guess, I mean that's the best way

00:07:53.470 --> 00:07:54.750
<v Speaker 0>to get started, isn't it?

00:07:55.150 --> 00:07:55.950
<v Speaker 0>We're on cluster

00:07:58.750 --> 00:08:01.150
<v Speaker 0>three, this was broken by one of our

00:08:01.150 --> 00:08:03.070
<v Speaker 0>colleagues Jason

00:08:04.235 --> 00:08:05.914
<v Speaker 0>Does that strike fear into you a little

00:08:05.914 --> 00:08:09.995
<v Speaker 0>bit? It does. I I I'm I'm intrigued.

00:08:09.995 --> 00:08:11.514
<v Speaker 1>I know he is

00:08:12.634 --> 00:08:15.514
<v Speaker 1>well into the internals of Kubernetes

00:08:14.800 --> 00:08:15.840
<v Speaker 1>So I

00:08:16.320 --> 00:08:18.479
<v Speaker 1>I don't know what he may have may

00:08:18.479 --> 00:08:20.560
<v Speaker 1>have may have done, but I guess it's

00:08:20.560 --> 00:08:22.479
<v Speaker 1>time to try and find out. As you

00:08:22.479 --> 00:08:23.040
<v Speaker 1>mentioned,

00:08:24.000 --> 00:08:26.639
<v Speaker 1>I guess, this methodically, so we'll kind of

00:08:26.639 --> 00:08:28.240
<v Speaker 1>test from outside in

00:08:28.560 --> 00:08:29.919
<v Speaker 1>by

00:08:29.535 --> 00:08:30.975
<v Speaker 1>poking it from the outside,

00:08:31.455 --> 00:08:33.455
<v Speaker 1>seeing what works, what doesn't works and then

00:08:33.455 --> 00:08:35.375
<v Speaker 1>starting to go layer by layer until we

00:08:35.375 --> 00:08:36.175
<v Speaker 1>hopefully

00:08:37.054 --> 00:08:38.335
<v Speaker 1>find out what he's done.

00:08:38.895 --> 00:08:42.335
<v Speaker 0>Nice. Alright. Let's just tackle a few more

00:08:41.520 --> 00:08:43.360
<v Speaker 0>and we'll get started. Well he'd asked if

00:08:43.360 --> 00:08:45.200
<v Speaker 0>we have it CD backups. That's

00:08:46.480 --> 00:08:47.120
<v Speaker 1>terrifying.

00:08:48.720 --> 00:08:51.120
<v Speaker 0>Alex is joining us, Anise you're definitely not

00:08:51.120 --> 00:08:53.280
<v Speaker 0>too late for hello's, thanks for joining us

00:08:54.320 --> 00:08:55.945
<v Speaker 0>and Sandy Blaber, hey,

00:08:56.345 --> 00:08:58.745
<v Speaker 0>alright let's fix some stuff. So

00:09:00.425 --> 00:09:02.425
<v Speaker 0>one thing I got stuck on last week

00:09:02.425 --> 00:09:05.065
<v Speaker 0>as I didn't realize that get component statuses

00:09:05.065 --> 00:09:07.770
<v Speaker 0>was actually deprecated so this is well I'm

00:09:07.770 --> 00:09:09.370
<v Speaker 0>on the wrong cube con pic,

00:09:09.690 --> 00:09:12.090
<v Speaker 0>gave myself a heart attack already. Well,

00:09:13.130 --> 00:09:14.970
<v Speaker 0>it's not responding anyway. Just

00:09:16.330 --> 00:09:17.770
<v Speaker 0>a little bit slower. I can't remember where

00:09:17.770 --> 00:09:19.930
<v Speaker 0>I stuck this cluster actually. I think

00:09:20.475 --> 00:09:21.835
<v Speaker 0>maybe in Chicago,

00:09:22.075 --> 00:09:23.115
<v Speaker 0>so there might be a little bit of

00:09:23.115 --> 00:09:25.355
<v Speaker 0>latency but teleport will fix that. Anyway, component

00:09:25.355 --> 00:09:27.195
<v Speaker 0>status is supposed to red heading last week.

00:09:27.195 --> 00:09:29.275
<v Speaker 0>This has been deprecated for a few releases

00:09:29.275 --> 00:09:31.115
<v Speaker 0>I've now found out, so we can ignore

00:09:31.115 --> 00:09:33.435
<v Speaker 0>those errors and I'm really happy that we

00:09:33.435 --> 00:09:35.035
<v Speaker 0>even got a response anyway, we can even

00:09:35.035 --> 00:09:35.755
<v Speaker 0>run a get nodes.

00:09:36.260 --> 00:09:37.220
<v Speaker 0>That's a healthy This

00:09:38.660 --> 00:09:40.820
<v Speaker 1>is worrying though, this is where you immediately

00:09:40.820 --> 00:09:42.580
<v Speaker 1>start tripping yourself up and thinking we're on

00:09:42.580 --> 00:09:43.620
<v Speaker 1>an easy street.

00:09:45.460 --> 00:09:47.540
<v Speaker 0>Yeah, yeah, definitely got that.

00:09:49.700 --> 00:09:50.100
<v Speaker 0>So,

00:09:51.220 --> 00:09:52.875
<v Speaker 0>so that we can type together, I guess

00:09:52.875 --> 00:09:54.394
<v Speaker 0>the best thing for us to do is

00:09:54.394 --> 00:09:56.635
<v Speaker 0>just export a cube config here

00:09:57.675 --> 00:09:59.275
<v Speaker 0>use the admin token.

00:10:00.555 --> 00:10:03.834
<v Speaker 1>Mhmm. Make sure we can still get notes.

00:10:04.829 --> 00:10:08.029
<v Speaker 0>Okay. Okay. So I'm gonna let you

00:10:08.670 --> 00:10:10.029
<v Speaker 0>I'll let you take for a little bit.

00:10:10.029 --> 00:10:11.069
<v Speaker 0>Why don't you do a little bit of

00:10:11.069 --> 00:10:12.589
<v Speaker 0>explanation and see if we can find out

00:10:12.589 --> 00:10:12.910
<v Speaker 0>for So

00:10:15.550 --> 00:10:17.824
<v Speaker 1>these have something running on them, don't they?

00:10:18.065 --> 00:10:20.305
<v Speaker 0>There is a WordPress workload that runs on

00:10:20.305 --> 00:10:22.305
<v Speaker 0>all clusters clusters, which we should be able

00:10:22.305 --> 00:10:24.065
<v Speaker 0>to, I mean I can port forward to

00:10:24.065 --> 00:10:25.105
<v Speaker 0>it locally and browse to it if you

00:10:25.105 --> 00:10:26.545
<v Speaker 0>want or you can have curl whatever you

00:10:26.545 --> 00:10:28.384
<v Speaker 0>feel like, but you should be able to

00:10:28.384 --> 00:10:30.625
<v Speaker 0>have that IP on port 80 or I

00:10:30.625 --> 00:10:31.904
<v Speaker 0>guess you can use the node port there.

00:10:32.850 --> 00:10:35.650
<v Speaker 0>If you wanna do local host and 30314

00:10:36.850 --> 00:10:37.810
<v Speaker 0>or do that.

00:10:40.850 --> 00:10:42.290
<v Speaker 0>Oh, I forgot I configured

00:10:43.090 --> 00:10:43.810
<v Speaker 0>load balancing.

00:10:44.365 --> 00:10:45.165
<v Speaker 0>Yeah.

00:10:47.565 --> 00:10:48.285
<v Speaker 0>So

00:10:48.765 --> 00:10:50.925
<v Speaker 0>So that's Our workload works.

00:10:52.205 --> 00:10:54.125
<v Speaker 1>Okay. Well, I put forward to it just

00:10:54.125 --> 00:10:55.245
<v Speaker 0>for the and see if we can browse

00:10:55.245 --> 00:10:57.005
<v Speaker 0>to actually in a real visual browser.

00:10:59.160 --> 00:11:00.680
<v Speaker 1>I want I'm just gonna have a quick

00:11:00.680 --> 00:11:02.040
<v Speaker 1>look at some other

00:11:02.280 --> 00:11:03.800
<v Speaker 1>well, let's have a look at actually what's

00:11:03.800 --> 00:11:05.480
<v Speaker 1>running on there first, I think, and then

00:11:05.480 --> 00:11:06.120
<v Speaker 1>we'll

00:11:06.600 --> 00:11:08.680
<v Speaker 1>if that's okay. Yeah. Of course. Go for

00:11:08.680 --> 00:11:08.840
<v Speaker 0>it.

00:11:09.795 --> 00:11:12.115
<v Speaker 1>Before we before we start looking into applications,

00:11:12.115 --> 00:11:12.755
<v Speaker 1>let's

00:11:13.714 --> 00:11:16.035
<v Speaker 1>let's actually see what's what's kinda running on

00:11:16.035 --> 00:11:17.955
<v Speaker 1>here. I have often wondered if a customer's

00:11:17.955 --> 00:11:20.115
<v Speaker 0>only automatically fix itself in some way, but

00:11:20.115 --> 00:11:21.475
<v Speaker 0>I hope that never happens.

00:11:24.515 --> 00:11:27.510
<v Speaker 1>So we have a Cilium namespace with all

00:11:27.510 --> 00:11:28.870
<v Speaker 1>of the the

00:11:29.270 --> 00:11:31.750
<v Speaker 1>various components that are required for Cilium.

00:11:32.150 --> 00:11:34.150
<v Speaker 1>We have default namespace where we have our

00:11:34.150 --> 00:11:35.350
<v Speaker 1>application running.

00:11:35.990 --> 00:11:37.590
<v Speaker 1>And then in cube system,

00:11:38.565 --> 00:11:41.125
<v Speaker 1>API server, various proxies,

00:11:41.285 --> 00:11:42.485
<v Speaker 1>core DNS,

00:11:43.605 --> 00:11:47.205
<v Speaker 1>the packet or Equinix metal cloud controller manager.

00:11:47.205 --> 00:11:47.765
<v Speaker 1>And

00:11:49.045 --> 00:11:51.605
<v Speaker 1>looking here for things that have rebooted a

00:11:51.605 --> 00:11:53.445
<v Speaker 1>number of times or have been restarted.

00:11:53.700 --> 00:11:56.340
<v Speaker 1>There are a few things, but normally, we

00:11:56.340 --> 00:11:57.860
<v Speaker 1>would see things restart,

00:11:59.060 --> 00:12:01.700
<v Speaker 1>namely during the convergence of all these components

00:12:01.700 --> 00:12:02.980
<v Speaker 1>actually coming up

00:12:04.420 --> 00:12:05.380
<v Speaker 1>and

00:12:05.380 --> 00:12:06.740
<v Speaker 1>all of the ceph

00:12:07.060 --> 00:12:09.464
<v Speaker 1>components for our persistent storage. Storage.

00:12:11.464 --> 00:12:13.145
<v Speaker 1>So, I mean, from the outside,

00:12:14.985 --> 00:12:17.065
<v Speaker 1>everything is kind of looking okay.

00:12:19.545 --> 00:12:21.464
<v Speaker 0>Did he forget to break our cluster? I'm

00:12:21.464 --> 00:12:23.360
<v Speaker 0>sure not. I I did see him

00:12:24.959 --> 00:12:26.959
<v Speaker 1>saying that everything should be should be working

00:12:26.959 --> 00:12:27.680
<v Speaker 1>okay.

00:12:28.959 --> 00:12:31.360
<v Speaker 1>Everything should be I'm sorry. I saw a

00:12:31.360 --> 00:12:32.959
<v Speaker 1>message from him saying that he had finished

00:12:32.959 --> 00:12:35.025
<v Speaker 1>breaking everything last night. So

00:12:36.865 --> 00:12:38.225
<v Speaker 1>I guess the kind of thing is that

00:12:38.225 --> 00:12:40.065
<v Speaker 1>we're gonna have to determine what's broken here.

00:12:40.065 --> 00:12:41.265
<v Speaker 1>So how how do you want me to

00:12:41.265 --> 00:12:42.065
<v Speaker 1>go about that?

00:12:42.385 --> 00:12:43.345
<v Speaker 1>I mean, do you do you want to

00:12:43.345 --> 00:12:44.785
<v Speaker 1>deploy a new workload on there and see

00:12:44.785 --> 00:12:45.505
<v Speaker 1>what happens? Or

00:12:46.385 --> 00:12:47.425
<v Speaker 0>Yeah. Why don't we

00:12:48.129 --> 00:12:50.290
<v Speaker 0>try and modify the WordPress?

00:12:52.209 --> 00:12:54.129
<v Speaker 0>Let's try and pretend we're doing an upgrade

00:12:54.129 --> 00:12:56.529
<v Speaker 0>of our WordPress component. We'll change the tag

00:12:56.529 --> 00:12:57.970
<v Speaker 0>on that WordPress image

00:12:58.529 --> 00:13:00.545
<v Speaker 0>and we'll see if anything breaks through there.

00:13:03.745 --> 00:13:04.464
<v Speaker 1>So

00:13:05.584 --> 00:13:07.505
<v Speaker 1>is this a deployment or is it just

00:13:07.505 --> 00:13:09.505
<v Speaker 1>a single? It's a deployment code word pressure.

00:13:14.890 --> 00:13:16.410
<v Speaker 1>Might come out outside. Oh, there we go.

00:13:33.965 --> 00:13:35.805
<v Speaker 1>I'm not so bad. It's just

00:13:36.045 --> 00:13:38.205
<v Speaker 0>the elicit now before we Yeah. Before

00:13:38.525 --> 00:13:39.085
<v Speaker 0>we forget.

00:13:42.380 --> 00:13:44.860
<v Speaker 0>And so let's just change that tag, right?

00:13:44.860 --> 00:13:46.620
<v Speaker 0>Like just take the Apache off and do

00:13:46.620 --> 00:13:47.660
<v Speaker 0>a 4.8.

00:13:47.660 --> 00:13:49.100
<v Speaker 0>We'll just force that to pull a new

00:13:49.100 --> 00:13:50.940
<v Speaker 0>image and see what happens.

00:13:58.115 --> 00:13:59.075
<v Speaker 1>Yes,

00:13:59.075 --> 00:14:01.875
<v Speaker 1>one second. Yeah, do it though. I'll do

00:14:01.875 --> 00:14:03.395
<v Speaker 0>that repeatedly as well.

00:14:05.635 --> 00:14:07.635
<v Speaker 0>So that could be pulling an image,

00:14:07.795 --> 00:14:09.555
<v Speaker 0>we could describe it and see the event

00:14:09.555 --> 00:14:11.680
<v Speaker 0>log just to confirm or we can just

00:14:11.680 --> 00:14:13.520
<v Speaker 0>be patient which is definitely not one of

00:14:13.520 --> 00:14:14.480
<v Speaker 0>my strong suits.

00:14:15.600 --> 00:14:17.760
<v Speaker 1>No patience has already expired. I see what's

00:14:17.760 --> 00:14:18.480
<v Speaker 1>going on.

00:14:20.320 --> 00:14:20.720
<v Speaker 0>I

00:14:21.200 --> 00:14:22.240
<v Speaker 0>forgot to play.

00:14:22.560 --> 00:14:23.120
<v Speaker 0>I apologize.

00:14:26.895 --> 00:14:28.575
<v Speaker 0>What? It's running.

00:14:32.175 --> 00:14:33.455
<v Speaker 1>This is confusing.

00:14:37.295 --> 00:14:38.895
<v Speaker 1>Okay. I wonder what he's done.

00:14:41.040 --> 00:14:43.360
<v Speaker 1>I wonder what's actually broken here then.

00:14:44.959 --> 00:14:47.600
<v Speaker 0>So let's confirm our WordPress is working. I

00:14:47.600 --> 00:14:49.200
<v Speaker 0>am gonna do the port forward now and

00:14:49.200 --> 00:14:50.959
<v Speaker 0>browse to it. Make sure it's hitting my

00:14:50.959 --> 00:14:53.200
<v Speaker 0>scale. It's getting post. It's happy.

00:14:53.760 --> 00:14:54.320
<v Speaker 0>I'll let

00:14:54.880 --> 00:14:57.075
<v Speaker 1>you drive them. Yeah. I'll just do that

00:14:57.075 --> 00:14:57.715
<v Speaker 0>from,

00:14:58.595 --> 00:15:00.435
<v Speaker 0>I guess I could do the put forward

00:15:00.435 --> 00:15:01.075
<v Speaker 0>from

00:15:03.635 --> 00:15:04.835
<v Speaker 0>Sorry. You know, I'll do it for my

00:15:04.835 --> 00:15:05.715
<v Speaker 0>machine now.

00:15:07.395 --> 00:15:08.755
<v Speaker 0>Okay. Get pods

00:15:08.915 --> 00:15:09.715
<v Speaker 0>for

00:15:09.875 --> 00:15:10.435
<v Speaker 0>forward.

00:15:15.190 --> 00:15:17.430
<v Speaker 0>Eighty, eighty, 80. And then I'll jump over

00:15:17.430 --> 00:15:18.630
<v Speaker 0>to my browser.

00:15:29.964 --> 00:15:32.444
<v Speaker 0>Well, I haven't installed WordPress yet, but it

00:15:32.444 --> 00:15:33.324
<v Speaker 0>is working.

00:15:34.764 --> 00:15:37.420
<v Speaker 0>I'm sure I did that. There's no three.

00:15:37.420 --> 00:15:38.220
<v Speaker 0>Well,

00:15:39.580 --> 00:15:40.460
<v Speaker 0>sure.

00:15:45.500 --> 00:15:47.100
<v Speaker 0>And if I remove this,

00:15:48.060 --> 00:15:49.740
<v Speaker 0>it's speaking to the database.

00:15:51.019 --> 00:15:52.459
<v Speaker 0>There's nothing

00:15:53.635 --> 00:15:54.595
<v Speaker 0>obvious.

00:15:55.395 --> 00:15:56.995
<v Speaker 0>Yes. I shouldn't type here.

00:16:04.275 --> 00:16:05.795
<v Speaker 1>I wonder what we're missing here then.

00:16:14.130 --> 00:16:16.370
<v Speaker 0>I mean, we have a working API server,

00:16:16.370 --> 00:16:18.610
<v Speaker 0>our workload is intact, we have no,

00:16:21.415 --> 00:16:23.415
<v Speaker 0>there's no pods aren't happy.

00:16:23.975 --> 00:16:26.615
<v Speaker 1>Yeah. That's I'm gonna I will try and

00:16:26.615 --> 00:16:29.175
<v Speaker 1>deploy. I'm gonna quickly deploy NGINX and expose

00:16:29.175 --> 00:16:31.415
<v Speaker 1>it. Yeah. Go for it. See see what

00:16:31.415 --> 00:16:32.055
<v Speaker 1>happens.

00:16:34.055 --> 00:16:34.695
<v Speaker 1>So

00:16:35.095 --> 00:16:36.360
<v Speaker 1>this is from

00:16:37.560 --> 00:16:38.920
<v Speaker 1>the case examples.

00:16:39.640 --> 00:16:41.480
<v Speaker 1>So we have NGINX deployed,

00:16:43.720 --> 00:16:46.680
<v Speaker 1>and I am now gonna expose this. You

00:16:46.680 --> 00:16:47.480
<v Speaker 0>know what?

00:16:48.200 --> 00:16:49.720
<v Speaker 0>I think we are in the wrong cluster.

00:16:54.225 --> 00:16:55.745
<v Speaker 0>I bet you Jason's

00:16:55.745 --> 00:16:57.825
<v Speaker 0>clustered four and I'm just making an absolute

00:16:57.825 --> 00:16:58.865
<v Speaker 0>arse of this.

00:17:00.145 --> 00:17:01.825
<v Speaker 1>Well, I'd like to imagine we've done a

00:17:01.825 --> 00:17:03.585
<v Speaker 1>very good job of debugging our working person

00:17:03.585 --> 00:17:04.464
<v Speaker 1>profile.

00:17:05.185 --> 00:17:06.785
<v Speaker 1>Although

00:17:06.240 --> 00:17:09.039
<v Speaker 1>this hasn't exposed us. Oh, there we go.

00:17:13.440 --> 00:17:15.280
<v Speaker 1>That might take a little while anyway as

00:17:15.280 --> 00:17:17.279
<v Speaker 1>it gets to my p address. Okay.

00:17:17.680 --> 00:17:19.119
<v Speaker 1>I don't know if you want to check

00:17:19.119 --> 00:17:21.040
<v Speaker 1>whether O4O4 is the one that we should

00:17:21.040 --> 00:17:21.520
<v Speaker 1>film them.

00:17:22.694 --> 00:17:24.054
<v Speaker 0>Yep. What I'm gonna do is we are

00:17:24.054 --> 00:17:25.494
<v Speaker 0>gonna have to jump to teammate for this

00:17:25.494 --> 00:17:27.654
<v Speaker 0>one then. So I'll send you the link.

00:17:27.895 --> 00:17:29.494
<v Speaker 0>I just moved to off screen.

00:17:30.535 --> 00:17:31.815
<v Speaker 0>We're gonna have to do this one the

00:17:31.815 --> 00:17:33.255
<v Speaker 0>hard way but that's alright.

00:17:34.070 --> 00:17:36.870
<v Speaker 1>Well, least we're warmed up now. Well, yeah.

00:17:37.110 --> 00:17:39.430
<v Speaker 0>We've shown everyone how to check a working

00:17:39.430 --> 00:17:40.230
<v Speaker 0>cluster.

00:17:43.190 --> 00:17:45.270
<v Speaker 0>Jason's probably going, I had no idea what

00:17:45.270 --> 00:17:46.595
<v Speaker 0>they're doing. I shouldn't bark.

00:17:46.835 --> 00:17:48.035
<v Speaker 0>So

00:17:49.795 --> 00:17:52.434
<v Speaker 0>we'll use teleport for the WALI cluster.

00:17:54.035 --> 00:17:55.795
<v Speaker 0>So let me export

00:17:55.795 --> 00:17:57.075
<v Speaker 0>the cube config.

00:17:58.915 --> 00:18:00.435
<v Speaker 0>You've got the command. Let me know when

00:18:00.435 --> 00:18:01.770
<v Speaker 0>you're in. We can test it. We type

00:18:01.770 --> 00:18:04.330
<v Speaker 0>it. Let's run get pods.

00:18:05.370 --> 00:18:06.890
<v Speaker 0>Are we looking with something that's a bit

00:18:06.890 --> 00:18:07.690
<v Speaker 0>more broken?

00:18:09.610 --> 00:18:11.610
<v Speaker 0>We see a broken thing.

00:18:13.130 --> 00:18:13.690
<v Speaker 1>One second.

00:18:22.265 --> 00:18:23.624
<v Speaker 1>Okay, I'm in.

00:18:25.225 --> 00:18:29.785
<v Speaker 0>Alright, we've got a control player node which

00:18:27.769 --> 00:18:29.609
<v Speaker 0>is very much unhappy.

00:18:29.690 --> 00:18:32.009
<v Speaker 0>A worker node which is very much unhappy.

00:18:33.129 --> 00:18:35.049
<v Speaker 0>Our pods at least look okay and the

00:18:35.049 --> 00:18:36.570
<v Speaker 0>workload namespace.

00:18:37.610 --> 00:18:39.850
<v Speaker 0>I'll show the SSH command anyway. Oops.

00:18:44.275 --> 00:18:47.315
<v Speaker 0>I trust y'all. That's a stupid idea but

00:18:49.075 --> 00:18:50.515
<v Speaker 0>and now I need to remember how to

00:18:50.515 --> 00:18:51.075
<v Speaker 0>do

00:18:51.795 --> 00:18:53.395
<v Speaker 0>scrolling and t max.

00:18:55.795 --> 00:18:56.515
<v Speaker 0>There we go.

00:18:59.370 --> 00:19:00.649
<v Speaker 0>Alright, so I think

00:19:01.450 --> 00:19:02.970
<v Speaker 0>we just need to get some control plane

00:19:02.970 --> 00:19:04.009
<v Speaker 0>notes online.

00:19:05.210 --> 00:19:06.970
<v Speaker 0>So how do you wanna start debugging this

00:19:06.970 --> 00:19:08.169
<v Speaker 0>then? Here's

00:19:08.169 --> 00:19:11.370
<v Speaker 0>our first symptom, two notes offline and do

00:19:10.485 --> 00:19:12.005
<v Speaker 0>you wanna SSH onto one of them? Do

00:19:12.005 --> 00:19:13.365
<v Speaker 0>you wanna do some cube commands? What do

00:19:13.365 --> 00:19:14.164
<v Speaker 0>wanna do first?

00:19:15.924 --> 00:19:18.565
<v Speaker 1>I mean, we could do a describe nodes

00:19:18.565 --> 00:19:20.164
<v Speaker 1>or see if there's any events

00:19:20.885 --> 00:19:23.445
<v Speaker 1>on the node that is not that is

00:19:23.445 --> 00:19:23.924
<v Speaker 1>not ready.

00:19:25.550 --> 00:19:28.350
<v Speaker 1>I think we probably can hop straight onto

00:19:28.350 --> 00:19:30.430
<v Speaker 1>the SSH onto that node and see its

00:19:30.430 --> 00:19:31.470
<v Speaker 1>current state.

00:19:32.270 --> 00:19:35.070
<v Speaker 0>Alright. Let's take a look at JSC.

00:19:41.685 --> 00:19:43.365
<v Speaker 0>Alright. I'll let you drive from now on

00:19:43.365 --> 00:19:45.205
<v Speaker 0>since you've got you've got a plan.

00:19:45.525 --> 00:19:46.325
<v Speaker 1>Alright.

00:19:46.485 --> 00:19:47.205
<v Speaker 1>Okay.

00:19:49.525 --> 00:19:51.525
<v Speaker 0>So what's normally What would be the first

00:19:51.525 --> 00:19:53.045
<v Speaker 0>thing you'd wanna look at when you see

00:19:53.045 --> 00:19:54.565
<v Speaker 0>that a node is offline or not ready?

00:19:55.700 --> 00:19:57.940
<v Speaker 1>What so, I mean, normally, a node that

00:19:57.940 --> 00:19:58.980
<v Speaker 1>is no longer

00:19:59.380 --> 00:20:01.380
<v Speaker 1>marked as ready has either been powered off,

00:20:01.380 --> 00:20:04.419
<v Speaker 1>rebooted, or the cubelet has basically stopped responding.

00:20:05.380 --> 00:20:08.100
<v Speaker 1>So my first step really would be to

00:20:08.905 --> 00:20:10.665
<v Speaker 1>check that the cubelet is actually up and

00:20:10.665 --> 00:20:11.304
<v Speaker 1>running,

00:20:14.184 --> 00:20:16.105
<v Speaker 1>which it is.

00:20:18.825 --> 00:20:21.720
<v Speaker 1>Oh, pot thickens. Okay. That's fine.

00:20:22.600 --> 00:20:25.159
<v Speaker 1>But why is it not ready?

00:20:25.640 --> 00:20:27.080
<v Speaker 0>I guess we maybe wanna take a look

00:20:27.080 --> 00:20:28.279
<v Speaker 0>at the kiblet logs.

00:20:29.640 --> 00:20:30.279
<v Speaker 1>Yes.

00:20:30.600 --> 00:20:31.640
<v Speaker 1>So

00:20:46.015 --> 00:20:48.255
<v Speaker 0>Connection refused. I see a few of those

00:20:48.255 --> 00:20:49.375
<v Speaker 0>scrolling past. Yeah.

00:20:51.920 --> 00:20:54.080
<v Speaker 1>Okay. So we basically set that to follow

00:20:54.080 --> 00:20:55.920
<v Speaker 1>so we can start to see everything that's

00:20:55.920 --> 00:20:56.480
<v Speaker 1>going on.

00:21:07.055 --> 00:21:09.055
<v Speaker 1>There are a lot of errors here. Well,

00:21:09.055 --> 00:21:10.414
<v Speaker 1>the cubelet is

00:21:10.575 --> 00:21:12.415
<v Speaker 1>trying to so what's the IP address of

00:21:12.415 --> 00:21:12.815
<v Speaker 1>this box?

00:21:23.070 --> 00:21:25.150
<v Speaker 1>So it's trying to loop back to itself

00:21:25.150 --> 00:21:28.990
<v Speaker 1>to speak to the local API server component.

00:21:28.990 --> 00:21:29.550
<v Speaker 1>So

00:21:29.870 --> 00:21:31.390
<v Speaker 1>the kubelet

00:21:31.550 --> 00:21:34.990
<v Speaker 1>the kubelet's main role is

00:21:34.034 --> 00:21:36.514
<v Speaker 1>to start a bunch of static pods from

00:21:36.514 --> 00:21:37.794
<v Speaker 1>static manifests

00:21:37.794 --> 00:21:39.794
<v Speaker 1>of which the API server is one of

00:21:39.794 --> 00:21:40.274
<v Speaker 1>them

00:21:41.154 --> 00:21:44.355
<v Speaker 1>and also to be given instruction by those

00:21:44.355 --> 00:21:47.154
<v Speaker 1>API servers in order to

00:21:47.880 --> 00:21:49.240
<v Speaker 1>to start things.

00:21:51.560 --> 00:21:52.280
<v Speaker 1>So

00:21:52.920 --> 00:21:54.040
<v Speaker 1>let's see

00:21:55.000 --> 00:21:57.080
<v Speaker 1>what is actually up and running

00:21:57.480 --> 00:21:58.200
<v Speaker 1>from

00:21:58.600 --> 00:22:00.200
<v Speaker 1>a cube perspective, I suppose.

00:22:06.174 --> 00:22:08.174
<v Speaker 1>So we have the scheduler.

00:22:08.174 --> 00:22:09.614
<v Speaker 1>We have the controller.

00:22:09.695 --> 00:22:11.695
<v Speaker 1>We have the cubelet. We have cube proxy.

00:22:18.400 --> 00:22:21.200
<v Speaker 1>The API server isn't starting, though. We could

00:22:21.200 --> 00:22:22.800
<v Speaker 1>see that in the cubelet logs.

00:22:24.560 --> 00:22:26.640
<v Speaker 1>And I I guess the other component that

00:22:26.640 --> 00:22:27.680
<v Speaker 1>we need to check

00:22:30.560 --> 00:22:31.920
<v Speaker 1>is etcd,

00:22:33.044 --> 00:22:33.764
<v Speaker 1>which

00:22:36.565 --> 00:22:37.445
<v Speaker 1>also

00:22:37.684 --> 00:22:39.364
<v Speaker 1>doesn't appear to be running.

00:22:39.684 --> 00:22:42.085
<v Speaker 1>Now if etcd is not running,

00:22:42.804 --> 00:22:44.885
<v Speaker 1>it looks to me like it's probably

00:22:45.150 --> 00:22:45.870
<v Speaker 1>issue.

00:22:46.030 --> 00:22:47.789
<v Speaker 1>We kinda saw this before

00:22:48.350 --> 00:22:49.230
<v Speaker 1>in that

00:22:50.270 --> 00:22:51.230
<v Speaker 1>etcd

00:22:51.230 --> 00:22:52.910
<v Speaker 1>needs to bind to all of the other

00:22:52.910 --> 00:22:54.030
<v Speaker 1>nodes in order for it to come up

00:22:54.030 --> 00:22:54.830
<v Speaker 1>successfully,

00:22:54.830 --> 00:22:56.590
<v Speaker 1>and the API server

00:22:56.830 --> 00:22:58.045
<v Speaker 1>needs to be able to speak to the

00:22:58.045 --> 00:22:59.725
<v Speaker 1>XCD server in order for that to work

00:22:59.725 --> 00:23:00.365
<v Speaker 1>as well.

00:23:01.005 --> 00:23:01.725
<v Speaker 1>Yep.

00:23:02.365 --> 00:23:03.005
<v Speaker 1>So

00:23:05.645 --> 00:23:07.885
<v Speaker 0>So just my point of view, right, is

00:23:07.885 --> 00:23:10.045
<v Speaker 0>like Yeah. We can see the Qplet running.

00:23:10.045 --> 00:23:11.805
<v Speaker 0>We can see the connection refused.

00:23:11.805 --> 00:23:14.350
<v Speaker 0>I think if we can get past that

00:23:14.350 --> 00:23:16.510
<v Speaker 0>first to try and identify the networking issue

00:23:16.510 --> 00:23:18.909
<v Speaker 0>there, do you think that's likely to maybe

00:23:18.990 --> 00:23:19.789
<v Speaker 0>assuming

00:23:20.350 --> 00:23:22.429
<v Speaker 0>there's some sort of root misconfiguration or IP

00:23:22.429 --> 00:23:24.510
<v Speaker 0>table blocking it, we can maybe that would

00:23:24.510 --> 00:23:26.590
<v Speaker 0>bring the other components online or

00:23:27.070 --> 00:23:28.270
<v Speaker 0>is that not a fair assessment?

00:23:29.125 --> 00:23:31.205
<v Speaker 1>Yeah. That's that's fair to me. I I

00:23:31.205 --> 00:23:33.205
<v Speaker 1>think the problem here is that XCD

00:23:33.924 --> 00:23:36.485
<v Speaker 1>can't speak to the other XCD

00:23:37.285 --> 00:23:39.684
<v Speaker 1>the other XCD members. But that wouldn't cause

00:23:39.684 --> 00:23:42.165
<v Speaker 0>a connection refused on the Qiplet, would it?

00:23:42.529 --> 00:23:44.450
<v Speaker 1>It will so the connection you're seeing there

00:23:44.450 --> 00:23:46.049
<v Speaker 1>is it trying to speak to the API

00:23:46.049 --> 00:23:46.769
<v Speaker 1>server.

00:23:47.010 --> 00:23:49.730
<v Speaker 1>The API server can't speak to the NCD

00:23:49.730 --> 00:23:51.570
<v Speaker 1>services cascading failures.

00:23:54.610 --> 00:23:55.090
<v Speaker 0>Let's

00:23:55.490 --> 00:23:58.205
<v Speaker 0>I guess, should we get some ETCD logs?

00:23:59.885 --> 00:24:01.244
<v Speaker 1>Yes. So

00:24:08.525 --> 00:24:10.044
<v Speaker 1>so there's ETCD.

00:24:10.520 --> 00:24:12.519
<v Speaker 1>Oh, these are siblings, aren't they?

00:24:17.640 --> 00:24:18.440
<v Speaker 0>Uh-oh.

00:24:22.360 --> 00:24:25.045
<v Speaker 0>And if I'm reading that correctly, has he

00:24:25.845 --> 00:24:28.485
<v Speaker 0>explicitly downgraded one of the members of the

00:24:28.485 --> 00:24:29.205
<v Speaker 0>cluster?

00:24:32.325 --> 00:24:35.445
<v Speaker 1>I think what I'm seeing here is

00:24:35.445 --> 00:24:36.645
<v Speaker 1>he's actually

00:24:37.445 --> 00:24:38.965
<v Speaker 1>possibly removed

00:24:40.140 --> 00:24:41.100
<v Speaker 1>from this

00:24:42.940 --> 00:24:43.820
<v Speaker 1>member.

00:24:44.700 --> 00:24:46.860
<v Speaker 1>It doesn't appear to have any idea of

00:24:46.860 --> 00:24:48.380
<v Speaker 1>other members to join.

00:24:48.780 --> 00:24:49.659
<v Speaker 0>But why Sorry.

00:24:50.140 --> 00:24:50.860
<v Speaker 0>On your go.

00:24:51.580 --> 00:24:53.020
<v Speaker 1>There's also the new raft

00:24:54.635 --> 00:24:57.355
<v Speaker 1>line, which is the second error mess second

00:24:57.355 --> 00:24:57.674
<v Speaker 1>log

00:24:58.315 --> 00:24:59.754
<v Speaker 1>second to last log

00:25:00.075 --> 00:25:00.955
<v Speaker 1>entry.

00:25:02.715 --> 00:25:04.475
<v Speaker 0>Okay. So is that line that says cluster

00:25:04.475 --> 00:25:06.554
<v Speaker 0>cannot be downgraded current version is lower than

00:25:06.554 --> 00:25:08.635
<v Speaker 0>the term clustered version, a red herring?

00:25:09.560 --> 00:25:11.799
<v Speaker 1>I think so because it's not joining.

00:25:12.600 --> 00:25:13.960
<v Speaker 1>It doesn't appear to be

00:25:15.080 --> 00:25:17.000
<v Speaker 1>attempting to join

00:25:18.040 --> 00:25:19.480
<v Speaker 1>any other

00:25:21.880 --> 00:25:23.400
<v Speaker 1>there's there's no mention of it trying to

00:25:23.400 --> 00:25:24.975
<v Speaker 1>join the rest of cluster.

00:25:26.815 --> 00:25:29.535
<v Speaker 0>Well, there's a restarting member in cluster with

00:25:29.535 --> 00:25:30.495
<v Speaker 0>two unique IDs.

00:25:38.740 --> 00:25:39.780
<v Speaker 0>Okay. So

00:25:40.820 --> 00:25:42.740
<v Speaker 0>can we take a look at the entity

00:25:42.740 --> 00:25:44.980
<v Speaker 0>configuration and see if it is configured to

00:25:44.980 --> 00:25:47.299
<v Speaker 0>speak to the other two control play notes?

00:25:49.940 --> 00:25:51.860
<v Speaker 1>Yes. I mean, we can

00:26:02.705 --> 00:26:05.265
<v Speaker 1>I'm already concerned. I'm going I've I've talked

00:26:05.265 --> 00:26:07.185
<v Speaker 1>to myself into a corner here about something

00:26:07.185 --> 00:26:09.800
<v Speaker 1>that's possibly wrong. But Well, I don't see

00:26:09.800 --> 00:26:11.640
<v Speaker 0>any conflict there. So why don't we take

00:26:11.640 --> 00:26:13.960
<v Speaker 0>a look at the system d unit file

00:26:14.520 --> 00:26:16.360
<v Speaker 0>for it to do? They Or the manifest?

00:26:16.360 --> 00:26:16.760
<v Speaker 0>Yes.

00:26:20.600 --> 00:26:22.685
<v Speaker 0>Yeah. I keep forgetting the static manifest for

00:26:22.685 --> 00:26:25.245
<v Speaker 0>XCD.

00:26:25.245 --> 00:26:27.245
<v Speaker 1>So red herring here, the date has changed

00:26:27.245 --> 00:26:29.005
<v Speaker 1>on the XCD manifest compared to all the

00:26:29.005 --> 00:26:30.365
<v Speaker 1>others. These are all created at the same

00:26:30.365 --> 00:26:30.925
<v Speaker 1>time.

00:26:33.325 --> 00:26:35.485
<v Speaker 1>Yeah.

00:26:35.485 --> 00:26:37.710
<v Speaker 1>So what what have you done?

00:26:44.030 --> 00:26:46.270
<v Speaker 0>Alright. I'm gonna need you to explain every

00:26:46.270 --> 00:26:47.630
<v Speaker 0>argument past the STD here.

00:26:48.285 --> 00:26:49.085
<v Speaker 1>Everybody

00:26:49.085 --> 00:26:50.285
<v Speaker 1>hold on to your app.

00:26:51.885 --> 00:26:54.924
<v Speaker 1>So effectively, this config is generated

00:26:54.925 --> 00:26:55.565
<v Speaker 1>by

00:26:56.765 --> 00:26:57.565
<v Speaker 1>kubeadm

00:26:57.565 --> 00:26:58.044
<v Speaker 1>and

00:26:59.245 --> 00:27:01.325
<v Speaker 1>it will create these manifests

00:27:01.405 --> 00:27:03.270
<v Speaker 1>and and give it all the information it

00:27:03.270 --> 00:27:05.029
<v Speaker 1>needs in order for this to come up.

00:27:07.110 --> 00:27:08.950
<v Speaker 1>Given that we appear to be having some

00:27:08.950 --> 00:27:10.389
<v Speaker 1>sort of networking

00:27:11.110 --> 00:27:13.395
<v Speaker 1>or some sort of binding issue of things

00:27:13.395 --> 00:27:16.755
<v Speaker 1>coming up. I presume that something in here

00:27:16.755 --> 00:27:18.995
<v Speaker 1>is not the way it's meant to be.

00:27:23.075 --> 00:27:23.795
<v Speaker 1>So

00:27:26.275 --> 00:27:26.995
<v Speaker 1>what have you done?

00:27:32.920 --> 00:27:35.080
<v Speaker 0>People are enjoying watching us suffer here. I've

00:27:35.080 --> 00:27:37.560
<v Speaker 0>gotta tell you that. I I think what

00:27:37.560 --> 00:27:40.120
<v Speaker 1>we could do is possibly look at one

00:27:40.120 --> 00:27:41.480
<v Speaker 1>of the other

00:27:42.325 --> 00:27:43.845
<v Speaker 1>one of the other manifests or one of

00:27:43.845 --> 00:27:44.885
<v Speaker 1>the other control

00:27:45.125 --> 00:27:46.965
<v Speaker 1>plane nodes and see what that looks like

00:27:46.965 --> 00:27:48.725
<v Speaker 1>and compare the two. Yeah. Do a state

00:27:48.725 --> 00:27:50.885
<v Speaker 0>by state comparison. Definitely. Yep.

00:27:53.125 --> 00:27:53.845
<v Speaker 0>Alright.

00:27:54.325 --> 00:27:55.685
<v Speaker 0>Tell you what, why don't we

00:27:58.190 --> 00:27:59.469
<v Speaker 0>Wrong button.

00:28:01.230 --> 00:28:03.869
<v Speaker 0>Aljet is on to the other node.

00:28:07.470 --> 00:28:09.875
<v Speaker 0>I'll just grab the oh, that closed that.

00:28:09.875 --> 00:28:10.434
<v Speaker 0>Okay.

00:28:12.434 --> 00:28:13.475
<v Speaker 0>Four.

00:28:13.554 --> 00:28:16.595
<v Speaker 0>Okay. Four. Get nodes white. I'll just grab

00:28:16.595 --> 00:28:18.355
<v Speaker 0>them all. But no. We just want control

00:28:18.355 --> 00:28:19.075
<v Speaker 0>plane.

00:28:20.595 --> 00:28:22.080
<v Speaker 0>And we'll just grab one of those working

00:28:22.080 --> 00:28:22.799
<v Speaker 0>ones.

00:28:24.799 --> 00:28:25.919
<v Speaker 1>So

00:28:35.120 --> 00:28:36.559
<v Speaker 1>How how are doing for time?

00:28:38.255 --> 00:28:40.815
<v Speaker 0>Plenty. Yeah. Okay. That's fine then.

00:28:42.415 --> 00:28:43.695
<v Speaker 1>No no rush.

00:28:44.015 --> 00:28:46.495
<v Speaker 1>Talk amongst yourselves. Alright. Well, mean, if I

00:28:46.495 --> 00:28:48.495
<v Speaker 0>knew how to do a vertical split that,

00:28:48.975 --> 00:28:49.615
<v Speaker 0>you know,

00:28:50.460 --> 00:28:52.300
<v Speaker 0>may have a horizontal split that might have

00:28:52.300 --> 00:28:54.140
<v Speaker 0>helped do a side by side comparison but

00:28:54.140 --> 00:28:55.500
<v Speaker 0>if you could want to just scroll the

00:28:55.500 --> 00:28:56.620
<v Speaker 0>top one and we'll try and do it

00:28:56.620 --> 00:28:59.420
<v Speaker 0>roughly at the same time like synchronize shelling.

00:28:59.420 --> 00:28:59.820
<v Speaker 0>Oh

00:29:01.179 --> 00:29:02.380
<v Speaker 0>no we can't do that because it's not

00:29:02.380 --> 00:29:04.525
<v Speaker 0>two cursors, one. Alright

00:29:04.525 --> 00:29:05.165
<v Speaker 0>okay.

00:29:05.885 --> 00:29:06.525
<v Speaker 0>So

00:29:06.925 --> 00:29:08.525
<v Speaker 0>let's see what do we got.

00:29:10.285 --> 00:29:12.605
<v Speaker 0>Well the advertised client URL should be different

00:29:12.605 --> 00:29:14.125
<v Speaker 0>right? That's each each

00:29:14.285 --> 00:29:17.245
<v Speaker 0>unique node just doing this thing. Server search

00:29:17.245 --> 00:29:18.845
<v Speaker 0>okay, it's off true.

00:29:19.919 --> 00:29:21.519
<v Speaker 0>Direct The list of members

00:29:21.679 --> 00:29:22.479
<v Speaker 1>looks

00:29:25.200 --> 00:29:29.279
<v Speaker 1>one second. The initial advertised peer URLs,

00:29:29.520 --> 00:29:30.559
<v Speaker 0>would that be

00:29:30.880 --> 00:29:32.875
<v Speaker 0>the it's on URL as well? I guess

00:29:32.875 --> 00:29:35.835
<v Speaker 0>so. Yes. That's I believe that's when it

00:29:35.835 --> 00:29:37.514
<v Speaker 1>first starts up the first time.

00:29:41.835 --> 00:29:43.434
<v Speaker 1>The initial cluster,

00:29:43.995 --> 00:29:45.995
<v Speaker 1>the reason why those those are different, I

00:29:45.995 --> 00:29:48.400
<v Speaker 1>believe, is due to what nodes it is

00:29:48.400 --> 00:29:49.680
<v Speaker 1>aware of when you actually do the Kube

00:29:49.680 --> 00:29:50.640
<v Speaker 1>ADM join.

00:29:51.040 --> 00:29:51.680
<v Speaker 0>Okay.

00:29:52.080 --> 00:29:52.800
<v Speaker 1>So

00:29:54.880 --> 00:29:56.960
<v Speaker 1>the node on the bottom half will have

00:29:56.960 --> 00:29:58.720
<v Speaker 1>only been aware of itself and whatever was

00:29:58.880 --> 00:30:00.400
<v Speaker 1>itself when it was being added.

00:30:01.515 --> 00:30:02.875
<v Speaker 1>The one at the top will have been

00:30:02.875 --> 00:30:04.875
<v Speaker 1>the last node to join, so it will

00:30:04.875 --> 00:30:06.795
<v Speaker 1>have been aware of the the first two

00:30:06.795 --> 00:30:08.395
<v Speaker 1>and it being the third. That's why there's

00:30:08.395 --> 00:30:09.675
<v Speaker 1>three there on the

00:30:10.715 --> 00:30:11.915
<v Speaker 1>initial cluster flag.

00:30:16.020 --> 00:30:17.379
<v Speaker 1>Keep going down.

00:30:26.500 --> 00:30:28.180
<v Speaker 1>All ports are correct.

00:30:28.865 --> 00:30:30.304
<v Speaker 1>I will loop back

00:30:32.545 --> 00:30:34.065
<v Speaker 1>a little bit further, please.

00:30:36.225 --> 00:30:39.825
<v Speaker 1>Okay. Three dot three snapshot count, and the

00:30:40.145 --> 00:30:41.265
<v Speaker 1>image is different.

00:30:41.745 --> 00:30:42.145
<v Speaker 0>Yep.

00:30:43.440 --> 00:30:45.200
<v Speaker 0>I told you it was the image.

00:30:47.840 --> 00:30:49.840
<v Speaker 1>I'm I'm just gonna sit here quietly I

00:30:49.840 --> 00:30:50.399
<v Speaker 1>think.

00:30:51.520 --> 00:30:53.119
<v Speaker 1>Okay. Let's

00:30:53.120 --> 00:30:54.720
<v Speaker 0>let's at least lay them up. Right? So

00:30:54.720 --> 00:30:56.159
<v Speaker 0>I what I saw in the log with

00:30:56.159 --> 00:30:58.245
<v Speaker 0>that downgraded version thing made me think that

00:30:58.245 --> 00:30:58.965
<v Speaker 0>because

00:30:59.205 --> 00:31:01.765
<v Speaker 0>there's obviously some sort of data format change

00:31:01.765 --> 00:31:03.525
<v Speaker 0>on the disk, couldn't load the data as

00:31:03.525 --> 00:31:05.924
<v Speaker 0>it couldn't join the cluster, it's kinda where

00:31:07.045 --> 00:31:09.685
<v Speaker 0>let's let's try it. Right? Reload,

00:31:09.685 --> 00:31:11.205
<v Speaker 0>in fact it's not reload. You shouldn't need

00:31:11.205 --> 00:31:11.765
<v Speaker 1>to do anything.

00:31:12.470 --> 00:31:14.070
<v Speaker 0>Oh, yeah. The pods have just come up.

00:31:14.070 --> 00:31:17.830
<v Speaker 0>Right? Yeah. The cubelet will check the shards

00:31:17.830 --> 00:31:19.350
<v Speaker 1>or the m d fives or whatever and

00:31:19.350 --> 00:31:21.990
<v Speaker 1>realize that the static pod manifest has changed

00:31:21.990 --> 00:31:23.750
<v Speaker 1>at which point it will restart it.

00:31:26.025 --> 00:31:26.664
<v Speaker 0>Okay.

00:31:31.865 --> 00:31:33.625
<v Speaker 0>Let's make our lives a little bit simpler

00:31:33.625 --> 00:31:35.705
<v Speaker 0>here. So get pods

00:31:35.945 --> 00:31:37.145
<v Speaker 0>cube system,

00:31:38.345 --> 00:31:39.625
<v Speaker 0>grab that CD.

00:31:41.305 --> 00:31:42.650
<v Speaker 0>Oh, well, I'm on the node that's not

00:31:42.650 --> 00:31:44.010
<v Speaker 0>gonna work in that CD so that was

00:31:44.010 --> 00:31:44.649
<v Speaker 0>smart.

00:31:45.930 --> 00:31:47.610
<v Speaker 1>Maybe on its way back up again at

00:31:47.610 --> 00:31:48.330
<v Speaker 1>this point.

00:31:49.210 --> 00:31:52.809
<v Speaker 0>Yeah. Looks like it. Let's

00:31:52.809 --> 00:31:54.890
<v Speaker 1>check the logs and find out if there's

00:31:54.890 --> 00:31:57.375
<v Speaker 1>anything else wrong with that CD, I suppose.

00:31:57.535 --> 00:31:59.934
<v Speaker 0>Alright. Those were in Barlab containers. Right?

00:32:00.415 --> 00:32:02.415
<v Speaker 1>Barlab containers? Oh, that's

00:32:03.455 --> 00:32:04.895
<v Speaker 0>Yeah. You're right.

00:32:05.215 --> 00:32:07.775
<v Speaker 0>And then we catered the FCD file.

00:32:10.495 --> 00:32:11.890
<v Speaker 1>So it's established,

00:32:11.890 --> 00:32:14.049
<v Speaker 1>blah blah blah, with all of its peers.

00:32:17.570 --> 00:32:19.250
<v Speaker 1>I see a lot of infos.

00:32:19.250 --> 00:32:19.730
<v Speaker 1>I

00:32:20.210 --> 00:32:22.210
<v Speaker 0>It looks happier. Yeah. It does look a

00:32:22.210 --> 00:32:22.930
<v Speaker 1>little bit happier. Yep.

00:32:26.284 --> 00:32:28.284
<v Speaker 1>Health is okay from the endpoint.

00:32:29.404 --> 00:32:31.404
<v Speaker 1>It looks like our API server still hasn't

00:32:31.404 --> 00:32:32.284
<v Speaker 1>come up though.

00:32:34.125 --> 00:32:35.404
<v Speaker 0>Cube API.

00:32:36.445 --> 00:32:38.600
<v Speaker 0>I'll make sure I've got messed up that.

00:32:38.840 --> 00:32:40.680
<v Speaker 0>Yeah. Okay. So now we need to work

00:32:40.680 --> 00:32:42.280
<v Speaker 0>out the API server problem.

00:32:45.720 --> 00:32:47.320
<v Speaker 1>So in here, it should be the the

00:32:47.320 --> 00:32:49.000
<v Speaker 1>API server logs.

00:32:49.640 --> 00:32:50.040
<v Speaker 1>Yep.

00:32:52.120 --> 00:32:52.760
<v Speaker 0>That is

00:32:53.955 --> 00:32:56.354
<v Speaker 1>failing to connect to local hosts

00:32:56.595 --> 00:32:59.634
<v Speaker 1>and when did that fail last? Yeah.

00:33:00.595 --> 00:33:01.874
<v Speaker 0>That was four minutes ago.

00:33:04.355 --> 00:33:05.715
<v Speaker 0>It's four four minutes ago.

00:33:06.360 --> 00:33:09.240
<v Speaker 0>So that's 12:29. We're 12:33 at the moment.

00:33:09.960 --> 00:33:10.759
<v Speaker 1>Okay.

00:33:20.840 --> 00:33:22.525
<v Speaker 1>Why is that restarted?

00:33:31.325 --> 00:33:33.245
<v Speaker 0>Okay. Let's see if we can do a

00:33:35.725 --> 00:33:37.249
<v Speaker 0>countless containers.

00:33:37.409 --> 00:33:39.010
<v Speaker 0>Well, that didn't work last week either. Maybe

00:33:39.010 --> 00:33:41.649
<v Speaker 0>that's just that command. I think that's yeah.

00:33:42.210 --> 00:33:44.529
<v Speaker 1>So why is the API server not restarted?

00:33:46.769 --> 00:33:48.849
<v Speaker 0>Let's make sure it's in the manifests.

00:33:48.850 --> 00:33:49.169
<v Speaker 1>Yep.

00:33:52.664 --> 00:33:54.585
<v Speaker 1>There it is. And in theory, that doesn't

00:33:54.585 --> 00:33:56.504
<v Speaker 1>really look like it's been modified.

00:33:57.865 --> 00:33:59.465
<v Speaker 0>I mean, he could have been really sneaky

00:33:59.465 --> 00:34:01.385
<v Speaker 0>and changed the date on that, but you're

00:34:01.385 --> 00:34:02.984
<v Speaker 0>right. Probably unlikely.

00:34:03.945 --> 00:34:05.865
<v Speaker 1>Well, yeah. I mean, it could have been

00:34:05.865 --> 00:34:07.420
<v Speaker 1>very sneaky. That would be very good. That

00:34:07.420 --> 00:34:09.020
<v Speaker 1>would be very sneaky to do that. Now

00:34:09.020 --> 00:34:11.179
<v Speaker 0>we're giving people hints for future episodes. But

00:34:11.420 --> 00:34:12.220
<v Speaker 0>Yes.

00:34:14.780 --> 00:34:16.300
<v Speaker 1>So if I drive for a few minutes

00:34:16.380 --> 00:34:18.620
<v Speaker 0>Please please do. Yeah. Go for it. Around.

00:34:26.264 --> 00:34:28.425
<v Speaker 1>I mean, I don't feel like there's gonna

00:34:28.425 --> 00:34:29.945
<v Speaker 1>be any major issues with this,

00:34:31.530 --> 00:34:34.410
<v Speaker 1>But let's check that that CD is actually

00:34:34.410 --> 00:34:36.250
<v Speaker 1>listening to where we expect it to be

00:34:36.250 --> 00:34:36.890
<v Speaker 1>listening.

00:34:43.690 --> 00:34:46.010
<v Speaker 1>Well, it's listening on 2379,

00:34:46.010 --> 00:34:47.625
<v Speaker 1>and something is looping back to it as

00:34:47.625 --> 00:34:48.185
<v Speaker 1>well.

00:35:00.905 --> 00:35:03.305
<v Speaker 1>Now the API server has come up

00:35:04.400 --> 00:35:05.200
<v Speaker 1>What we've been

00:35:06.240 --> 00:35:08.319
<v Speaker 0>Well, so we hold on. Maybe we were

00:35:08.319 --> 00:35:09.839
<v Speaker 0>just a bit quick then. Like, how long

00:35:09.839 --> 00:35:11.039
<v Speaker 0>would it take for a member in the

00:35:11.039 --> 00:35:13.279
<v Speaker 0>NCD cluster to really join the quorum and

00:35:13.279 --> 00:35:14.799
<v Speaker 0>get healthy again? Were we just impatient?

00:35:15.775 --> 00:35:17.695
<v Speaker 1>Etcd can take a little while

00:35:18.575 --> 00:35:20.095
<v Speaker 1>but there's also

00:35:20.575 --> 00:35:21.695
<v Speaker 1>cubelet which

00:35:22.335 --> 00:35:23.935
<v Speaker 1>may I I don't know off the top

00:35:23.935 --> 00:35:25.375
<v Speaker 1>of my head but maybe that has some

00:35:25.375 --> 00:35:27.215
<v Speaker 1>level of crash back

00:35:28.975 --> 00:35:30.255
<v Speaker 1>before it actually comes up.

00:35:31.220 --> 00:35:33.300
<v Speaker 0>I think we've there's no doubt it's ready.

00:35:33.300 --> 00:35:34.740
<v Speaker 0>I ran get nodes.

00:35:35.460 --> 00:35:37.140
<v Speaker 0>Looks like we just wanna jump on to

00:35:37.140 --> 00:35:38.260
<v Speaker 0>worker or

00:35:38.740 --> 00:35:40.100
<v Speaker 0>TW seven.

00:35:40.420 --> 00:35:41.460
<v Speaker 0>Okay. Let's see if we can get this

00:35:41.460 --> 00:35:42.579
<v Speaker 0>one healthy then. So

00:35:45.924 --> 00:35:48.645
<v Speaker 0>yeah. We confident this machine's okay? Yeah.

00:35:48.885 --> 00:35:51.445
<v Speaker 1>Well, the FCD has rejoined the quorum.

00:35:51.605 --> 00:35:53.605
<v Speaker 1>The API server is looping back to the

00:35:53.605 --> 00:35:55.045
<v Speaker 1>FCD instance

00:35:55.045 --> 00:35:56.965
<v Speaker 1>and reporting itself as ready.

00:35:58.325 --> 00:36:00.484
<v Speaker 1>Alright. So from my perspective, this node looks

00:36:00.484 --> 00:36:00.805
<v Speaker 1>okay.

00:36:01.779 --> 00:36:03.460
<v Speaker 1>We've yet to try and run workload on

00:36:03.460 --> 00:36:04.980
<v Speaker 1>it. So I mean, we could be we

00:36:04.980 --> 00:36:06.099
<v Speaker 1>could be back here

00:36:06.420 --> 00:36:08.820
<v Speaker 1>for long king through logs at any moment.

00:36:09.700 --> 00:36:12.420
<v Speaker 0>We'll see in a minute. Let's get

00:36:13.220 --> 00:36:13.700
<v Speaker 0>this one.

00:36:17.845 --> 00:36:20.725
<v Speaker 0>Okay. So this node is unready. Now, I

00:36:20.725 --> 00:36:22.405
<v Speaker 0>guess very much like the first node, what

00:36:22.405 --> 00:36:23.845
<v Speaker 0>we wanna do is we wanna check that

00:36:23.845 --> 00:36:25.845
<v Speaker 0>the core components are running. So we're gonna

00:36:25.845 --> 00:36:27.525
<v Speaker 0>look for the API server.

00:36:27.765 --> 00:36:29.125
<v Speaker 0>No. We're look for to be No. No.

00:36:29.125 --> 00:36:31.045
<v Speaker 1>It's not API server. No. We have a

00:36:31.045 --> 00:36:33.260
<v Speaker 0>kubelet. Alright. Okay. So

00:36:34.380 --> 00:36:36.060
<v Speaker 0>oh, no. We don't have a kubelet.

00:36:36.380 --> 00:36:38.780
<v Speaker 0>We have a CSI node driver registrar.

00:36:38.940 --> 00:36:40.460
<v Speaker 0>Okay. So this one has nothing.

00:36:41.740 --> 00:36:42.460
<v Speaker 1>So

00:36:42.619 --> 00:36:45.180
<v Speaker 1>kubelet normally runs as a system d unit

00:36:45.180 --> 00:36:46.300
<v Speaker 1>or a system d

00:36:47.484 --> 00:36:48.045
<v Speaker 1>instance.

00:36:48.525 --> 00:36:49.165
<v Speaker 1>So

00:36:49.325 --> 00:36:52.365
<v Speaker 1>first thing really would be to check whether

00:36:52.685 --> 00:36:54.125
<v Speaker 1>that actually exists.

00:36:55.725 --> 00:36:56.365
<v Speaker 0>Okay.

00:36:56.765 --> 00:36:57.485
<v Speaker 0>Oh.

00:36:58.205 --> 00:37:00.365
<v Speaker 1>It's it's a worker. There'll be no admin.com

00:37:00.365 --> 00:37:01.140
<v Speaker 1>from here.

00:37:01.619 --> 00:37:03.460
<v Speaker 0>Of course, silly me.

00:37:05.140 --> 00:37:07.380
<v Speaker 0>Alright. So you wanted to check if there

00:37:07.380 --> 00:37:09.619
<v Speaker 0>was a system d kubelet.

00:37:12.740 --> 00:37:13.619
<v Speaker 0>So there we go.

00:37:14.705 --> 00:37:16.385
<v Speaker 0>We have some errors.

00:37:16.385 --> 00:37:16.785
<v Speaker 0>Let's

00:37:24.545 --> 00:37:27.185
<v Speaker 1>So there's something very wrong with the config

00:37:27.185 --> 00:37:29.025
<v Speaker 1>for this cubelet by the looks of things.

00:37:29.185 --> 00:37:32.040
<v Speaker 1>There's about a terabyte of logs fly past.

00:37:33.880 --> 00:37:36.440
<v Speaker 1>It looks like something has broken the flags

00:37:36.440 --> 00:37:38.440
<v Speaker 1>on this so that it is

00:37:41.400 --> 00:37:43.720
<v Speaker 1>it's basically instead of it working, it's error

00:37:43.720 --> 00:37:45.995
<v Speaker 1>printing out all of the flags as in

00:37:45.995 --> 00:37:47.835
<v Speaker 1>you've missed done one of the flags here,

00:37:47.835 --> 00:37:49.355
<v Speaker 1>all of the flags work out what you've

00:37:49.355 --> 00:37:50.075
<v Speaker 1>done wrong.

00:37:53.115 --> 00:37:54.955
<v Speaker 1>So I think

00:37:57.790 --> 00:37:59.950
<v Speaker 1>we could do to be able to scroll

00:37:59.950 --> 00:38:02.190
<v Speaker 1>around in these logs to work out where

00:38:04.910 --> 00:38:07.069
<v Speaker 0>Why don't we just try stopping the service

00:38:07.069 --> 00:38:09.070
<v Speaker 0>and running the complete command

00:38:09.390 --> 00:38:10.350
<v Speaker 0>manually

00:38:10.910 --> 00:38:11.309
<v Speaker 0>try and

00:38:12.225 --> 00:38:13.985
<v Speaker 1>Well, so at the top of all of

00:38:13.985 --> 00:38:15.985
<v Speaker 1>this output should be the line that it's

00:38:15.985 --> 00:38:18.065
<v Speaker 1>finding wrong as in we passed the wrong

00:38:18.065 --> 00:38:18.785
<v Speaker 1>flag.

00:38:20.785 --> 00:38:21.905
<v Speaker 0>Okay. Let's take a look.

00:38:33.890 --> 00:38:35.650
<v Speaker 0>Yeah. You're gonna need that no

00:38:36.450 --> 00:38:37.490
<v Speaker 0>page or Here we go.

00:38:39.885 --> 00:38:42.125
<v Speaker 1>Unknown flag bootstrap config.

00:38:44.285 --> 00:38:46.845
<v Speaker 1>So this is the issue. Oh, this appears

00:38:46.845 --> 00:38:47.805
<v Speaker 1>to be the issue.

00:38:48.685 --> 00:38:51.085
<v Speaker 1>We are passing a flag that it doesn't

00:38:50.490 --> 00:38:51.050
<v Speaker 1>understand.

00:38:53.530 --> 00:38:54.890
<v Speaker 0>Right. Well, I guess we should go take

00:38:54.890 --> 00:38:56.170
<v Speaker 0>a look at that unit fail.

00:38:58.810 --> 00:39:00.490
<v Speaker 1>So this is either going to be in

00:39:00.490 --> 00:39:02.090
<v Speaker 1>the kubelet config.

00:39:02.890 --> 00:39:05.315
<v Speaker 1>You can pass additional flags in some of

00:39:05.315 --> 00:39:07.555
<v Speaker 1>the files that the kubelet config imports,

00:39:07.714 --> 00:39:09.075
<v Speaker 1>or it will be in the the system

00:39:09.075 --> 00:39:10.835
<v Speaker 1>d unit files as you mentioned.

00:39:12.275 --> 00:39:14.435
<v Speaker 1>So we will start with

00:39:18.550 --> 00:39:19.670
<v Speaker 1>it's in system.

00:39:22.710 --> 00:39:23.910
<v Speaker 1>It is. So

00:39:26.550 --> 00:39:28.630
<v Speaker 1>this is the config that system d uses

00:39:28.630 --> 00:39:30.550
<v Speaker 1>to start it with to begin with. Hold

00:39:30.550 --> 00:39:32.069
<v Speaker 0>on a minute. I I I'm not I

00:39:32.069 --> 00:39:34.185
<v Speaker 0>can't let that slide by. More? Who uses

00:39:34.185 --> 00:39:34.825
<v Speaker 0>more?

00:39:35.785 --> 00:39:37.945
<v Speaker 1>I do because I want I want more.

00:39:38.585 --> 00:39:39.145
<v Speaker 1>And

00:39:39.785 --> 00:39:41.465
<v Speaker 1>yeah. No. I should use less. But

00:39:43.945 --> 00:39:45.465
<v Speaker 0>Sorry. I didn't mean to ruin your train

00:39:45.465 --> 00:39:46.985
<v Speaker 0>of thought there. No. That's that's fine.

00:39:47.600 --> 00:39:48.400
<v Speaker 1>So

00:39:49.600 --> 00:39:52.560
<v Speaker 1>we can see here there is the dash

00:39:52.560 --> 00:39:54.800
<v Speaker 1>dash bootstrap dash cube config.

00:39:54.960 --> 00:39:57.280
<v Speaker 1>The line on the top oops.

00:39:57.680 --> 00:39:59.920
<v Speaker 1>My crazy mouse just gone a bit crazy

00:39:59.805 --> 00:40:00.205
<v Speaker 1>there.

00:40:00.925 --> 00:40:02.684
<v Speaker 1>It appears to be this line that's causing

00:40:02.684 --> 00:40:03.565
<v Speaker 1>it problem.

00:40:03.964 --> 00:40:06.045
<v Speaker 0>The cube, like, cube config RX?

00:40:07.005 --> 00:40:09.405
<v Speaker 1>Yes. Where we are passing that dash dash

00:40:09.405 --> 00:40:10.925
<v Speaker 1>bootstrap dash cube config.

00:40:14.460 --> 00:40:15.100
<v Speaker 1>Now

00:40:15.740 --> 00:40:17.420
<v Speaker 1>I don't even think there's anything in the

00:40:17.420 --> 00:40:19.740
<v Speaker 1>bootstrap kubelet conf anyway.

00:40:19.740 --> 00:40:21.020
<v Speaker 1>There normally isn't.

00:40:23.180 --> 00:40:24.620
<v Speaker 1>Am I gonna now have to live with

00:40:24.620 --> 00:40:26.025
<v Speaker 1>the fact that I use more?

00:40:26.345 --> 00:40:27.865
<v Speaker 1>I been mocks for it.

00:40:28.265 --> 00:40:31.385
<v Speaker 0>I haven't used more since, you know, 02/2003.

00:40:31.385 --> 00:40:31.865
<v Speaker 0>So

00:40:33.545 --> 00:40:35.704
<v Speaker 1>I mean, I'm all for just basically removing

00:40:35.704 --> 00:40:38.105
<v Speaker 1>the dash dash bootstrap dash q config because

00:40:38.105 --> 00:40:39.865
<v Speaker 1>there's nothing even in that file to read.

00:40:42.080 --> 00:40:42.480
<v Speaker 1>However

00:40:42.880 --> 00:40:44.640
<v Speaker 0>Let's try it. We I mean, we do

00:40:44.640 --> 00:40:46.640
<v Speaker 0>have a q config parameter after it. So

00:40:46.640 --> 00:40:48.800
<v Speaker 0>the bootstrap config, I'm not really sure.

00:40:49.760 --> 00:40:50.720
<v Speaker 0>You know?

00:40:50.960 --> 00:40:52.800
<v Speaker 0>Yeah. I I I think you're right. Let's

00:40:52.800 --> 00:40:54.880
<v Speaker 0>let's remove that and then see where we

00:40:54.880 --> 00:40:55.520
<v Speaker 0>are after that.

00:40:59.545 --> 00:41:02.025
<v Speaker 1>I mean, again, I we could, you know,

00:41:02.025 --> 00:41:03.945
<v Speaker 1>kinda go away and look at what

00:41:05.704 --> 00:41:07.224
<v Speaker 1>is on the other nodes.

00:41:15.520 --> 00:41:17.520
<v Speaker 1>Just whilst we're in here as well.

00:41:21.440 --> 00:41:21.840
<v Speaker 1>Okay.

00:41:23.865 --> 00:41:25.705
<v Speaker 1>I mean, the bootstrap command was the one

00:41:25.705 --> 00:41:26.985
<v Speaker 1>that I had issue with.

00:41:30.345 --> 00:41:31.625
<v Speaker 1>And we can

00:41:32.905 --> 00:41:33.705
<v Speaker 1>oops.

00:41:35.625 --> 00:41:37.330
<v Speaker 0>I mean if that worked, system d would

00:41:37.330 --> 00:41:39.250
<v Speaker 0>have attempted to restart it by now.

00:41:42.450 --> 00:41:43.330
<v Speaker 1>Okay.

00:41:43.570 --> 00:41:44.609
<v Speaker 1>Do we need to do anything for system

00:41:44.609 --> 00:41:45.890
<v Speaker 1>d to pick those up or should it

00:41:45.890 --> 00:41:47.730
<v Speaker 0>just? No. We didn't modify the unit files

00:41:47.730 --> 00:41:49.250
<v Speaker 0>so we don't need to do a reload.

00:41:49.250 --> 00:41:50.609
<v Speaker 0>Okay. We can just

00:41:54.184 --> 00:41:56.905
<v Speaker 0>It would appear still a little unhappy.

00:41:59.144 --> 00:42:01.384
<v Speaker 0>Yep. We're not getting a kubelet. Let's jump

00:42:01.384 --> 00:42:02.505
<v Speaker 0>back into the

00:42:04.904 --> 00:42:05.305
<v Speaker 0>pager.

00:42:10.460 --> 00:42:11.900
<v Speaker 1>Invalid argument.

00:42:16.220 --> 00:42:16.700
<v Speaker 0>My

00:42:18.255 --> 00:42:21.695
<v Speaker 0>my tmux foo is particularly poor. So

00:42:24.894 --> 00:42:26.095
<v Speaker 0>it seems

00:42:31.055 --> 00:42:32.494
<v Speaker 0>I don't see an error.

00:42:37.730 --> 00:42:40.530
<v Speaker 0>Pairs that describe resources as for non Kubernetes

00:42:40.530 --> 00:42:41.410
<v Speaker 0>components.

00:42:41.890 --> 00:42:43.490
<v Speaker 1>That's that's just output from

00:42:43.810 --> 00:42:44.770
<v Speaker 1>minus

00:42:44.770 --> 00:42:45.170
<v Speaker 1>h.

00:42:50.325 --> 00:42:51.765
<v Speaker 0>It don't appear to be getting much. It

00:42:51.765 --> 00:42:52.805
<v Speaker 0>might have been silly.

00:42:53.685 --> 00:42:55.045
<v Speaker 1>We need

00:42:57.605 --> 00:42:58.965
<v Speaker 1>to get to the top of because it

00:42:59.205 --> 00:43:01.125
<v Speaker 1>the problem is when kubelet fails with a

00:43:01.125 --> 00:43:03.220
<v Speaker 1>wrong argument, it prints out like a mega

00:43:03.220 --> 00:43:03.940
<v Speaker 1>random

00:43:04.500 --> 00:43:06.500
<v Speaker 1>additional flags that it could be.

00:43:07.620 --> 00:43:10.020
<v Speaker 0>See, thought that yellow line meant that's the

00:43:10.020 --> 00:43:12.100
<v Speaker 0>the most recent restart and I thought that

00:43:12.100 --> 00:43:13.300
<v Speaker 0>would just show me what I wanted.

00:43:19.494 --> 00:43:21.415
<v Speaker 0>There we go. Okay. So now

00:43:22.535 --> 00:43:24.135
<v Speaker 0>that shift key took away. I was a

00:43:24.135 --> 00:43:25.335
<v Speaker 0>little worried there. There we go.

00:43:27.910 --> 00:43:30.070
<v Speaker 1>Oh, it skips out the bits we need

00:43:30.070 --> 00:43:31.270
<v Speaker 1>to see if that's helpful.

00:43:36.310 --> 00:43:37.190
<v Speaker 1>Yeah. We we we

00:43:38.150 --> 00:43:40.155
<v Speaker 0>I'm gonna stop it. Right? So

00:43:41.675 --> 00:43:43.595
<v Speaker 0>I mean I hate fighting with journal d

00:43:43.595 --> 00:43:45.275
<v Speaker 0>so what I'm gonna suggest is we do

00:43:45.275 --> 00:43:47.835
<v Speaker 0>this, we cat that, we do a

00:43:48.475 --> 00:43:49.515
<v Speaker 0>kubelet,

00:43:50.235 --> 00:43:51.835
<v Speaker 0>kube config

00:43:51.480 --> 00:43:52.120
<v Speaker 0>equals

00:43:53.880 --> 00:43:54.760
<v Speaker 0>etcetera.

00:43:54.760 --> 00:43:55.560
<v Speaker 0>Kubernetes,

00:43:56.440 --> 00:43:58.040
<v Speaker 0>kubelet dot conf,

00:43:58.040 --> 00:43:59.880
<v Speaker 0>config equals bar.

00:44:05.400 --> 00:44:06.605
<v Speaker 0>I can work with.

00:44:06.924 --> 00:44:08.205
<v Speaker 1>I see. Okay.

00:44:09.244 --> 00:44:09.885
<v Speaker 1>So

00:44:12.204 --> 00:44:14.445
<v Speaker 0>it couldn't parse that triplet

00:44:15.405 --> 00:44:16.605
<v Speaker 0>config. Let me

00:44:20.450 --> 00:44:22.290
<v Speaker 0>I don't know what happened there either.

00:44:23.170 --> 00:44:25.329
<v Speaker 0>And it cannot connect to the Docker daemon,

00:44:25.329 --> 00:44:27.250
<v Speaker 0>which we aren't running Docker, so that makes

00:44:27.250 --> 00:44:27.810
<v Speaker 0>sense.

00:44:28.529 --> 00:44:30.289
<v Speaker 1>Yeah. That's where the error is. So if

00:44:30.289 --> 00:44:31.490
<v Speaker 1>we look to the left,

00:44:32.049 --> 00:44:37.170
<v Speaker 1>we can see there's a w one I

00:44:35.745 --> 00:44:37.185
<v Speaker 1>info e for error

00:44:37.505 --> 00:44:39.745
<v Speaker 1>is basically the reason why it's not not

00:44:39.745 --> 00:44:40.305
<v Speaker 1>running.

00:44:40.625 --> 00:44:42.705
<v Speaker 1>I wonder whether someone has changed this conflict

00:44:42.705 --> 00:44:44.945
<v Speaker 1>to use docker instead of container d.

00:44:45.665 --> 00:44:47.185
<v Speaker 0>Alright. I guess we should take a look

00:44:47.185 --> 00:44:47.745
<v Speaker 0>at that then.

00:44:49.800 --> 00:44:50.360
<v Speaker 0>So

00:44:50.680 --> 00:44:52.360
<v Speaker 0>is that in the

00:44:54.040 --> 00:44:55.000
<v Speaker 0>this file

00:44:55.160 --> 00:44:56.600
<v Speaker 0>here, kubelet comp?

00:44:57.160 --> 00:45:00.280
<v Speaker 1>No. That's the that's the for the cert.

00:45:01.160 --> 00:45:03.720
<v Speaker 0>So it's the config here? Config that yaml.

00:45:03.720 --> 00:45:03.880
<v Speaker 0>Yeah.

00:45:06.815 --> 00:45:09.375
<v Speaker 1>Normally in here you would find the what

00:45:09.375 --> 00:45:10.335
<v Speaker 1>was it in here?

00:45:14.734 --> 00:45:17.535
<v Speaker 0>I'm assuming the lack of CRI configuration

00:45:17.535 --> 00:45:19.890
<v Speaker 0>maybe defaults to Docker on this version of

00:45:19.890 --> 00:45:20.610
<v Speaker 0>Kubernetes.

00:45:21.010 --> 00:45:22.849
<v Speaker 0>So maybe we need to actually provide the

00:45:22.849 --> 00:45:24.050
<v Speaker 0>configuration for that.

00:45:25.010 --> 00:45:27.329
<v Speaker 0>Should we pull up another working work worker

00:45:27.329 --> 00:45:27.890
<v Speaker 0>node?

00:45:28.290 --> 00:45:30.530
<v Speaker 1>Yeah. Start with the quickest and easiest way.

00:45:30.530 --> 00:45:31.884
<v Speaker 1>I don't think there's gonna be much in

00:45:31.884 --> 00:45:33.724
<v Speaker 1>here that's actually node specific.

00:45:35.085 --> 00:45:36.525
<v Speaker 0>Alright.

00:45:38.125 --> 00:45:39.244
<v Speaker 0>Grab one of these.

00:45:41.164 --> 00:45:42.525
<v Speaker 0>One four five.

00:45:44.125 --> 00:45:47.010
<v Speaker 0>Put one to the broken one, David. And

00:45:53.170 --> 00:45:55.890
<v Speaker 0>we just really wanna compare this to Yep.

00:45:55.970 --> 00:45:57.410
<v Speaker 0>This config.

00:45:57.410 --> 00:45:59.330
<v Speaker 0>I'll just commit config gamble.

00:46:03.005 --> 00:46:04.605
<v Speaker 0>Yeah. Don't know what happened there.

00:46:06.684 --> 00:46:07.244
<v Speaker 1>So

00:46:09.325 --> 00:46:09.885
<v Speaker 0>I

00:46:10.365 --> 00:46:11.965
<v Speaker 0>don't see anything

00:46:12.285 --> 00:46:15.005
<v Speaker 0>that says container d on it

00:46:14.730 --> 00:46:16.890
<v Speaker 0>socket or Yeah. I'm not seeing any socket

00:46:16.890 --> 00:46:17.610
<v Speaker 1>anywhere.

00:46:17.930 --> 00:46:19.850
<v Speaker 0>Maybe not this fail. In fact, we can

00:46:19.850 --> 00:46:21.450
<v Speaker 0>use that we trick that you've now taught

00:46:21.450 --> 00:46:24.010
<v Speaker 0>everybody who's like, has this fail even changed?

00:46:26.970 --> 00:46:27.610
<v Speaker 0>No.

00:46:27.850 --> 00:46:28.330
<v Speaker 0>No.

00:46:33.035 --> 00:46:34.315
<v Speaker 0>Alright. So

00:46:34.555 --> 00:46:35.355
<v Speaker 0>let's

00:46:35.675 --> 00:46:37.355
<v Speaker 0>so the cube that can be modified with

00:46:37.355 --> 00:46:38.635
<v Speaker 0>additional configuration

00:46:38.635 --> 00:46:40.875
<v Speaker 0>by passing parameters to the unit failed. Did

00:46:40.875 --> 00:46:42.715
<v Speaker 0>we maybe miss something in there?

00:46:42.955 --> 00:46:44.555
<v Speaker 1>Yeah. I think we'll open up the unit

00:46:44.555 --> 00:46:46.690
<v Speaker 1>file one more time and see what else

00:46:46.690 --> 00:46:49.010
<v Speaker 1>it imports for config paths.

00:46:54.690 --> 00:46:56.530
<v Speaker 0>Where was that for

00:46:57.250 --> 00:46:57.890
<v Speaker 0>system d?

00:47:12.930 --> 00:47:13.890
<v Speaker 0>Alright.

00:47:14.369 --> 00:47:16.930
<v Speaker 0>Not that one, so it's this one.

00:47:19.650 --> 00:47:21.330
<v Speaker 0>There we go. So

00:47:24.130 --> 00:47:26.130
<v Speaker 0>it could be the QBDM flags

00:47:26.855 --> 00:47:28.455
<v Speaker 0>or the default file.

00:47:28.694 --> 00:47:30.775
<v Speaker 0>That's all we've got. Yep.

00:47:31.815 --> 00:47:32.694
<v Speaker 0>Okay.

00:47:32.694 --> 00:47:33.734
<v Speaker 0>Farnib.

00:47:33.734 --> 00:47:36.055
<v Speaker 0>He's

00:47:36.055 --> 00:47:38.135
<v Speaker 0>definitely making his run around. Is that right?

00:47:44.630 --> 00:47:47.510
<v Speaker 0>Is that right? Remote and is that socket

00:47:47.510 --> 00:47:48.550
<v Speaker 0>path correct?

00:47:48.630 --> 00:47:50.230
<v Speaker 1>Well, the easiest way is to quickly compare

00:47:50.230 --> 00:47:51.350
<v Speaker 1>it on the other node.

00:47:51.750 --> 00:47:52.950
<v Speaker 1>So if we pop through the pane and

00:47:52.950 --> 00:47:54.070
<v Speaker 1>look at the same one.

00:47:55.990 --> 00:47:57.734
<v Speaker 1>They are the same.

00:47:58.135 --> 00:47:59.415
<v Speaker 1>They are the same.

00:48:00.055 --> 00:48:00.454
<v Speaker 0>So

00:48:01.335 --> 00:48:03.015
<v Speaker 1>One other thing then to check is to

00:48:03.015 --> 00:48:04.775
<v Speaker 1>whether he's actually changed the path of container

00:48:04.775 --> 00:48:05.655
<v Speaker 1>d as well.

00:48:06.694 --> 00:48:08.295
<v Speaker 1>So whilst that's open, if we should do

00:48:08.295 --> 00:48:10.214
<v Speaker 1>an l s on the path to

00:48:11.450 --> 00:48:14.009
<v Speaker 1>slash run slash container d slash container d

00:48:14.009 --> 00:48:14.970
<v Speaker 1>dot sock.

00:48:20.170 --> 00:48:23.369
<v Speaker 0>No. It's run. It's run container d. Container

00:48:23.369 --> 00:48:24.010
<v Speaker 0>d

00:48:24.650 --> 00:48:27.665
<v Speaker 0>container d. Container dot sock. Okay. That's it.

00:48:31.744 --> 00:48:33.825
<v Speaker 0>So there was that one other fail, wasn't

00:48:33.825 --> 00:48:34.385
<v Speaker 0>there,

00:48:35.265 --> 00:48:37.265
<v Speaker 0>that could provide overwrites?

00:48:39.025 --> 00:48:41.290
<v Speaker 1>Slash etsy default.

00:48:44.410 --> 00:48:45.690
<v Speaker 1>Doesn't exist. Okay.

00:48:48.809 --> 00:48:50.250
<v Speaker 0>That's interesting then.

00:48:50.410 --> 00:48:51.210
<v Speaker 1>Yes.

00:48:53.130 --> 00:48:55.315
<v Speaker 0>So as far as we are concerned,

00:48:55.635 --> 00:48:58.435
<v Speaker 0>our kubelet is configured to correctly speak to

00:48:58.435 --> 00:49:01.555
<v Speaker 0>container d but for some weird reason as

00:49:02.675 --> 00:49:04.195
<v Speaker 0>trying to speak to Docker.

00:49:04.915 --> 00:49:06.835
<v Speaker 0>I'm gonna close this other one for now.

00:49:11.019 --> 00:49:14.059
<v Speaker 0>Does the kubelet fall back to alternative run

00:49:14.059 --> 00:49:16.220
<v Speaker 0>times if the configured run time fails? Like

00:49:16.220 --> 00:49:18.619
<v Speaker 0>in my head I'm thinking, is it are

00:49:18.619 --> 00:49:20.619
<v Speaker 0>we messing somewhere the config has been overwritten

00:49:20.619 --> 00:49:22.059
<v Speaker 0>to tell to use Docker or is it

00:49:22.059 --> 00:49:23.900
<v Speaker 0>doing that as a fallback because it can't

00:49:23.900 --> 00:49:26.425
<v Speaker 0>speak to container d? Do we know? I'm

00:49:26.425 --> 00:49:28.585
<v Speaker 1>not sure. I'm okay driving for a second.

00:49:28.585 --> 00:49:29.704
<v Speaker 1>Should not have a quick one more look

00:49:29.704 --> 00:49:32.105
<v Speaker 1>at the cubelet logs. Please do. I'm ready

00:49:32.105 --> 00:49:32.505
<v Speaker 0>to leave.

00:49:37.650 --> 00:49:39.250
<v Speaker 1>Everyone, I'm using less.

00:49:42.849 --> 00:49:43.970
<v Speaker 1>So

00:49:51.305 --> 00:49:53.785
<v Speaker 1>Okay. So bootstrap config, we know that doesn't

00:49:53.785 --> 00:49:54.425
<v Speaker 1>work.

00:49:57.224 --> 00:50:00.025
<v Speaker 1>Let's set the timer. What's the

00:50:20.375 --> 00:50:22.455
<v Speaker 1>How do I get to the end here

00:50:22.455 --> 00:50:23.735
<v Speaker 1>so I can go up?

00:50:25.335 --> 00:50:27.735
<v Speaker 0>We've had a few comments. Next suggests our

00:50:27.735 --> 00:50:29.175
<v Speaker 0>kubelet version may have changed.

00:50:29.790 --> 00:50:32.030
<v Speaker 0>Alex is saying could it be permissions on

00:50:32.030 --> 00:50:32.990
<v Speaker 0>the socket?

00:50:34.030 --> 00:50:36.830
<v Speaker 0>Both things we should probably confirm. Yeah, definitely.

00:50:40.190 --> 00:50:42.110
<v Speaker 1>One sec. Let me

00:50:50.445 --> 00:50:52.845
<v Speaker 1>try to get to a recent log. There's

00:50:52.845 --> 00:50:54.125
<v Speaker 1>so many logs in here. It's really hard

00:50:54.125 --> 00:50:55.005
<v Speaker 0>to find them.

00:50:57.165 --> 00:50:59.369
<v Speaker 0>Yeah. Why don't just run it manually the

00:50:59.369 --> 00:51:00.970
<v Speaker 0>way we did earlier? Just control r dot

00:51:00.970 --> 00:51:02.650
<v Speaker 0>kubect command and then just get the output

00:51:02.650 --> 00:51:04.730
<v Speaker 0>from that. That'll be a bit easier.

00:51:05.690 --> 00:51:07.210
<v Speaker 1>One second.

00:51:07.210 --> 00:51:07.849
<v Speaker 1>So

00:51:08.250 --> 00:51:09.770
<v Speaker 1>I was looking for about the bootstrap. When

00:51:09.770 --> 00:51:10.809
<v Speaker 1>did we change that? That was quite a

00:51:10.809 --> 00:51:12.645
<v Speaker 1>while ago, isn't it? Well, yeah. The failed

00:51:12.645 --> 00:51:14.565
<v Speaker 0>that exist so we removed the flag.

00:51:15.925 --> 00:51:17.925
<v Speaker 1>So let's go to five minutes ago.

00:51:18.325 --> 00:51:19.285
<v Speaker 1>That isn't.

00:51:21.605 --> 00:51:24.245
<v Speaker 0>So you could point from what we're just

00:51:24.245 --> 00:51:26.085
<v Speaker 0>saying couldn't we just rejoin the node. We

00:51:26.085 --> 00:51:29.010
<v Speaker 0>could just use QD, QDM to rejoin, but,

00:51:29.090 --> 00:51:30.850
<v Speaker 0>you know, would be nice We could. Because

00:51:30.850 --> 00:51:32.370
<v Speaker 0>it would be nice to dig in and

00:51:32.370 --> 00:51:33.250
<v Speaker 0>fix it.

00:51:35.730 --> 00:51:39.250
<v Speaker 1>So still complaining. Let's move to what's the

00:51:39.250 --> 00:51:40.690
<v Speaker 1>time now? 12:51.

00:51:55.800 --> 00:51:57.560
<v Speaker 0>So what are you looking for?

00:51:58.280 --> 00:52:00.680
<v Speaker 1>I am just flipping forward through the logs

00:52:00.680 --> 00:52:02.280
<v Speaker 1>to a more recent

00:52:04.520 --> 00:52:08.040
<v Speaker 1>oh, so this has not been restarted since

00:52:06.675 --> 00:52:07.875
<v Speaker 1>12:44.

00:52:07.875 --> 00:52:08.435
<v Speaker 1>So

00:52:10.275 --> 00:52:12.195
<v Speaker 0>Oh, I stopped the kubelet. Stop.

00:52:13.235 --> 00:52:14.595
<v Speaker 0>To run it manually.

00:52:16.115 --> 00:52:17.475
<v Speaker 0>Sorry. Cool.

00:52:18.275 --> 00:52:18.995
<v Speaker 1>No. That's fine.

00:52:21.299 --> 00:52:23.059
<v Speaker 0>No. It wants a reload. How do we

00:52:23.059 --> 00:52:25.300
<v Speaker 1>need to with the new config?

00:52:29.299 --> 00:52:31.780
<v Speaker 0>Demon. Oh, there we go. Silly me.

00:52:32.099 --> 00:52:33.220
<v Speaker 0>And start.

00:52:34.019 --> 00:52:35.365
<v Speaker 0>Yeah. I wonder if we fixed it and

00:52:35.365 --> 00:52:37.204
<v Speaker 0>then just forgot to start it there. I

00:52:37.204 --> 00:52:37.685
<v Speaker 0>forgot

00:52:38.644 --> 00:52:40.645
<v Speaker 0>to start it as I look shifty.

00:52:45.125 --> 00:52:47.540
<v Speaker 0>No. We still have no so

00:52:47.540 --> 00:52:48.340
<v Speaker 0>we can

00:52:48.820 --> 00:52:50.580
<v Speaker 0>grab the logs one more time.

00:52:52.100 --> 00:52:53.860
<v Speaker 0>There is a last flag isn't there? I

00:52:53.860 --> 00:52:54.740
<v Speaker 0>keep forgetting.

00:52:57.460 --> 00:52:58.660
<v Speaker 0>Scroll.

00:52:58.660 --> 00:53:00.100
<v Speaker 0>Let's see if we can find the start

00:53:00.100 --> 00:53:01.035
<v Speaker 0>this time.

00:53:01.595 --> 00:53:03.595
<v Speaker 1>This is 2AM. This is these these aren't

00:53:03.595 --> 00:53:04.555
<v Speaker 1>the right logs.

00:53:09.115 --> 00:53:10.234
<v Speaker 0>I think it's last.

00:53:22.260 --> 00:53:24.099
<v Speaker 0>Shift g, let it jump down.

00:53:26.795 --> 00:53:27.675
<v Speaker 0>There we go.

00:53:28.315 --> 00:53:30.875
<v Speaker 1>Okay. What are we completing that? Config has

00:53:30.875 --> 00:53:31.995
<v Speaker 0>been deprecated.

00:53:35.035 --> 00:53:36.715
<v Speaker 0>Unknown cloud provider.

00:53:38.474 --> 00:53:39.675
<v Speaker 0>Let's put on our no page.

00:53:41.800 --> 00:53:43.640
<v Speaker 0>If anyone in the chat knows how to

00:53:43.640 --> 00:53:45.400
<v Speaker 0>just get the last 50 lanes.

00:53:45.960 --> 00:53:46.680
<v Speaker 0>I

00:53:47.319 --> 00:53:48.520
<v Speaker 0>have a bit of a brain blank at

00:53:48.520 --> 00:53:49.960
<v Speaker 0>the moment and I just can't

00:53:51.000 --> 00:53:51.480
<v Speaker 0>remember.

00:53:54.525 --> 00:53:55.405
<v Speaker 1>Oh, dear.

00:54:02.445 --> 00:54:03.885
<v Speaker 0>I'm

00:54:03.885 --> 00:54:04.525
<v Speaker 0>gonna Google it.

00:54:09.170 --> 00:54:09.970
<v Speaker 0>Journal

00:54:09.970 --> 00:54:10.770
<v Speaker 0>CTL

00:54:10.770 --> 00:54:11.730
<v Speaker 0>last

00:54:11.890 --> 00:54:13.810
<v Speaker 0>yeah. There we go. Last 100 lines I'll

00:54:13.810 --> 00:54:14.050
<v Speaker 0>do.

00:54:18.555 --> 00:54:20.795
<v Speaker 0>Dash n, okay. Not

00:54:26.474 --> 00:54:28.795
<v Speaker 0>super responsive to my control c, but hopefully

00:54:28.795 --> 00:54:30.395
<v Speaker 0>that's just a standard out flush.

00:54:31.890 --> 00:54:32.930
<v Speaker 0>Alright. Okay.

00:54:34.210 --> 00:54:37.570
<v Speaker 0>Dash n 100 please. There we go.

00:54:39.170 --> 00:54:41.890
<v Speaker 1>Use pod manifest happens that I know the

00:54:41.890 --> 00:54:44.930
<v Speaker 0>provider external worries me more than the config

00:54:44.930 --> 00:54:45.809
<v Speaker 0>being deprecated.

00:54:48.315 --> 00:54:50.875
<v Speaker 0>Let's

00:54:50.875 --> 00:54:51.755
<v Speaker 0>check the

00:54:52.315 --> 00:54:53.435
<v Speaker 0>version.

00:54:54.315 --> 00:54:55.755
<v Speaker 0>Oh, for one

00:54:56.555 --> 00:54:57.115
<v Speaker 0>four seven.

00:55:01.050 --> 00:55:03.130
<v Speaker 0>This is a 1.2

00:55:03.130 --> 00:55:04.650
<v Speaker 0>Yes. Zero cluster.

00:55:05.530 --> 00:55:07.050
<v Speaker 1>I mean, in the real world, I'm not

00:55:07.050 --> 00:55:08.890
<v Speaker 1>entirely sure how many people would find a

00:55:08.890 --> 00:55:11.210
<v Speaker 1>version of Cubelet that's, like, three years old.

00:55:16.625 --> 00:55:19.105
<v Speaker 0>You happy with that? I'm very happy with

00:55:23.744 --> 00:55:26.464
<v Speaker 0>We actually had a one nineteen four available.

00:55:26.464 --> 00:55:29.184
<v Speaker 0>Maybe just over overkill the binary.

00:55:31.020 --> 00:55:33.260
<v Speaker 0>I'll

00:55:33.260 --> 00:55:34.700
<v Speaker 0>put it back to the version that thinks

00:55:34.700 --> 00:55:35.580
<v Speaker 0>installed.

00:55:35.980 --> 00:55:37.340
<v Speaker 0>So I think he's been out of his

00:55:37.340 --> 00:55:39.100
<v Speaker 0>way to find a really old kubelet binary

00:55:39.100 --> 00:55:40.620
<v Speaker 0>and just dropped in the machine.

00:55:40.940 --> 00:55:42.700
<v Speaker 1>Yeah. Mean, so the the error that you

00:55:42.700 --> 00:55:45.420
<v Speaker 1>were getting there is I guess cloud providers

00:55:45.420 --> 00:55:47.875
<v Speaker 1>weren't even a thing back then.

00:55:51.315 --> 00:55:52.835
<v Speaker 1>But, yeah, effectively,

00:55:55.155 --> 00:55:56.755
<v Speaker 1>that was mean. I like that.

00:55:57.315 --> 00:55:58.755
<v Speaker 1>I mean, congratulations.

00:55:58.835 --> 00:56:00.194
<v Speaker 1>That that was that was mean.

00:56:00.810 --> 00:56:02.330
<v Speaker 0>That's just my alias

00:56:02.410 --> 00:56:03.690
<v Speaker 0>that I got wrong.

00:56:04.730 --> 00:56:06.170
<v Speaker 0>I don't actually know. I don't work on

00:56:06.170 --> 00:56:08.250
<v Speaker 0>how to You won't be able to there's

00:56:08.250 --> 00:56:10.170
<v Speaker 1>no admin.com for anything. I need to go

00:56:10.170 --> 00:56:11.050
<v Speaker 1>to one of the other ones.

00:56:12.585 --> 00:56:12.985
<v Speaker 1>Alrighty.

00:56:13.464 --> 00:56:14.984
<v Speaker 1>So we pop back to the control plane

00:56:14.984 --> 00:56:17.305
<v Speaker 1>or your your local terminal.

00:56:23.224 --> 00:56:24.025
<v Speaker 0>Ta da.

00:56:27.785 --> 00:56:29.570
<v Speaker 1>Okay. That was a good one. I like

00:56:29.570 --> 00:56:30.770
<v Speaker 0>that. That was good.

00:56:31.410 --> 00:56:32.290
<v Speaker 1>Well done.

00:56:33.490 --> 00:56:35.890
<v Speaker 1>That was that was interesting. I mean, yeah,

00:56:35.890 --> 00:56:37.570
<v Speaker 1>I it does it can happen.

00:56:38.530 --> 00:56:41.330
<v Speaker 1>It's just I I I after watching last

00:56:41.330 --> 00:56:43.255
<v Speaker 1>week, was I was in my head, I

00:56:43.255 --> 00:56:45.015
<v Speaker 1>was like, don't get dragged into looking in

00:56:45.015 --> 00:56:46.375
<v Speaker 1>the wrong place. Don't get dragged down the

00:56:46.375 --> 00:56:47.335
<v Speaker 1>rabbit holes.

00:56:47.735 --> 00:56:50.135
<v Speaker 1>And that's exactly what's occurring right here.

00:56:50.935 --> 00:56:53.815
<v Speaker 0>So actually, missed Nick's comment, but he called

00:56:53.815 --> 00:56:56.060
<v Speaker 0>it earlier. I reckon it's an old Kooplit

00:56:56.060 --> 00:56:56.780
<v Speaker 0>binary.

00:56:57.020 --> 00:56:58.060
<v Speaker 0>Well done mate.

00:56:59.660 --> 00:57:01.260
<v Speaker 0>Alright. Well I mean maybe I should just

00:57:01.260 --> 00:57:03.340
<v Speaker 1>sit and read the YouTube comments and do

00:57:03.340 --> 00:57:04.460
<v Speaker 1>this much quicker.

00:57:05.660 --> 00:57:06.380
<v Speaker 0>Yeah.

00:57:06.780 --> 00:57:08.060
<v Speaker 0>I I you

00:57:08.620 --> 00:57:10.665
<v Speaker 0>know, never thought to check the version. You

00:57:10.665 --> 00:57:12.185
<v Speaker 0>obviously never thought to check the version. I

00:57:12.185 --> 00:57:13.545
<v Speaker 0>just that was a

00:57:13.945 --> 00:57:16.105
<v Speaker 1>I suppose why why would I though? You

00:57:17.385 --> 00:57:19.465
<v Speaker 1>know, cluster APIs install all this. It's all

00:57:19.465 --> 00:57:20.745
<v Speaker 1>installed the same version. Why?

00:57:22.029 --> 00:57:22.750
<v Speaker 0>Okay.

00:57:24.029 --> 00:57:27.869
<v Speaker 0>Nice work, Jason. Let's jump over to Wally's

00:57:27.869 --> 00:57:28.510
<v Speaker 0>cluster.

00:57:29.150 --> 00:57:31.710
<v Speaker 1>Was that Jason's cluster, was it? Yes.

00:57:32.349 --> 00:57:33.150
<v Speaker 0>Okay.

00:57:34.750 --> 00:57:35.150
<v Speaker 0>Okay.

00:57:38.775 --> 00:57:39.895
<v Speaker 0>We got there.

00:57:40.535 --> 00:57:43.895
<v Speaker 0>We did. Doesn't

00:57:43.895 --> 00:57:44.455
<v Speaker 0>matter.

00:57:45.255 --> 00:57:46.855
<v Speaker 0>I feel like, yeah, maybe I should have

00:57:46.855 --> 00:57:48.535
<v Speaker 0>checked the version correctly but I think we

00:57:48.535 --> 00:57:49.495
<v Speaker 0>were we were

00:57:49.815 --> 00:57:51.734
<v Speaker 0>we did go slow and we we talked

00:57:51.734 --> 00:57:53.255
<v Speaker 0>and we we thought about it. I just

00:57:53.255 --> 00:57:54.800
<v Speaker 0>I guess it just never occurred to us

00:57:54.800 --> 00:57:55.360
<v Speaker 0>and

00:57:56.000 --> 00:57:57.680
<v Speaker 0>there was the STD issue as well which

00:57:57.680 --> 00:57:59.840
<v Speaker 0>we fixed. Couple of really smart

00:58:00.160 --> 00:58:03.200
<v Speaker 0>issues there. Alright, well at least cluster, let's

00:58:03.200 --> 00:58:04.560
<v Speaker 0>try to teleport this time so we don't

00:58:04.560 --> 00:58:05.920
<v Speaker 0>have to t mux and I don't have

00:58:05.920 --> 00:58:08.625
<v Speaker 0>to remember all those weird emaxi style shortcuts.

00:58:08.625 --> 00:58:09.185
<v Speaker 1>Okay.

00:58:11.025 --> 00:58:13.425
<v Speaker 0>Well let's just jump on to our control

00:58:13.425 --> 00:58:14.465
<v Speaker 0>plane note

00:58:15.185 --> 00:58:16.705
<v Speaker 0>and you should be able to join the

00:58:16.705 --> 00:58:18.945
<v Speaker 0>session. I will zoom in on the

00:58:19.665 --> 00:58:20.545
<v Speaker 0>terminal.

00:58:20.545 --> 00:58:22.170
<v Speaker 0>Yeah, I think that looks alright.

00:58:25.290 --> 00:58:28.410
<v Speaker 0>Now Waleed tell me upfront there's potentially a

00:58:28.410 --> 00:58:29.690
<v Speaker 0>readme available.

00:58:30.250 --> 00:58:31.930
<v Speaker 0>He doesn't tell me where.

00:58:32.650 --> 00:58:34.490
<v Speaker 0>I know you're in the chat Waleed if

00:58:34.490 --> 00:58:35.904
<v Speaker 0>you wanna save me a few clicks feel

00:58:35.904 --> 00:58:37.025
<v Speaker 0>free to tell us where the read me

00:58:37.025 --> 00:58:37.585
<v Speaker 0>is.

00:58:38.785 --> 00:58:40.785
<v Speaker 0>What I'll do first is my

00:58:41.184 --> 00:58:42.464
<v Speaker 0>of the alias.

00:58:43.505 --> 00:58:45.345
<v Speaker 0>Have you joined the session yet? Okay.

00:58:45.904 --> 00:58:47.744
<v Speaker 1>I am I just need to get my

00:58:48.865 --> 00:58:51.830
<v Speaker 1>my authenticator access up and running. I'm now

00:58:51.830 --> 00:58:52.550
<v Speaker 1>in the

00:58:54.150 --> 00:58:55.750
<v Speaker 1>well then, what have we got?

00:58:56.870 --> 00:58:58.630
<v Speaker 1>Oh, I got a broken cluster.

00:59:01.350 --> 00:59:03.465
<v Speaker 0>Alright. Like, he says it's not on this

00:59:03.465 --> 00:59:05.785
<v Speaker 0>control plane notes. I'm gonna pop open.

00:59:07.545 --> 00:59:09.385
<v Speaker 0>There we go. We do have a read

00:59:09.385 --> 00:59:10.025
<v Speaker 0>me.

00:59:13.145 --> 00:59:15.480
<v Speaker 0>Hi, David. Thank you for giving me and

00:59:15.480 --> 00:59:18.120
<v Speaker 0>the auditor a chance to check cluster 005.

00:59:18.120 --> 00:59:20.680
<v Speaker 0>So other say things are not always as

00:59:20.680 --> 00:59:21.480
<v Speaker 0>they seem,

00:59:21.880 --> 00:59:24.120
<v Speaker 0>the first appearances deceive many.

00:59:25.240 --> 00:59:27.320
<v Speaker 0>Also a user passed by and reported pods

00:59:27.320 --> 00:59:29.480
<v Speaker 0>cannot access the API server, she was testing

00:59:29.480 --> 00:59:31.705
<v Speaker 0>with from inside a pod to verify with

00:59:31.705 --> 00:59:33.465
<v Speaker 0>this command. Best of luck, I

00:59:34.425 --> 00:59:36.345
<v Speaker 0>love that you set a scene, thanks.

00:59:37.385 --> 00:59:39.065
<v Speaker 1>Like that, set the mood.

00:59:39.305 --> 00:59:39.865
<v Speaker 0>Yeah,

00:59:40.105 --> 00:59:42.425
<v Speaker 0>let's get our alias on this machine as

00:59:42.425 --> 00:59:43.385
<v Speaker 0>well

00:59:46.329 --> 00:59:48.090
<v Speaker 0>And we did, I think the

00:59:48.410 --> 00:59:50.490
<v Speaker 0>get nodes failed on that other machine didn't

00:59:50.490 --> 00:59:53.050
<v Speaker 0>it? So probably gonna fail from here too.

00:59:55.050 --> 00:59:56.730
<v Speaker 0>So I guess it's the same,

00:59:56.970 --> 00:59:58.650
<v Speaker 0>I mean our starting steps are just gonna

00:59:58.650 --> 00:59:59.895
<v Speaker 0>be the same, right? We wanna check for

00:59:59.895 --> 01:00:01.975
<v Speaker 0>the core components running on this machine

01:00:02.135 --> 01:00:04.455
<v Speaker 0>see if we can identify some really obvious

01:00:04.455 --> 01:00:05.895
<v Speaker 0>things upfront. So

01:00:06.935 --> 01:00:07.735
<v Speaker 0>kiblet.

01:00:10.935 --> 01:00:11.895
<v Speaker 1>You didn't grab.

01:00:13.175 --> 01:00:14.375
<v Speaker 0>We do have a kiblet.

01:00:15.260 --> 01:00:17.260
<v Speaker 0>We do have an API server

01:00:18.060 --> 01:00:19.339
<v Speaker 0>and I thought we really need to get

01:00:19.339 --> 01:00:22.540
<v Speaker 0>started. We have an entity so

01:00:23.500 --> 01:00:25.340
<v Speaker 0>things look alright up front.

01:00:26.540 --> 01:00:27.180
<v Speaker 1>But

01:00:27.635 --> 01:00:29.795
<v Speaker 1>so the error that we had was that

01:00:29.795 --> 01:00:31.395
<v Speaker 1>we well, we didn't get an error, but

01:00:31.395 --> 01:00:32.755
<v Speaker 1>we kubectl

01:00:32.755 --> 01:00:34.435
<v Speaker 1>should speak to

01:00:36.595 --> 01:00:38.355
<v Speaker 1>you used the admin.com from this one, didn't

01:00:38.355 --> 01:00:38.835
<v Speaker 1>you?

01:00:39.714 --> 01:00:40.515
<v Speaker 0>I did.

01:00:42.194 --> 01:00:44.160
<v Speaker 1>And that will have its local address and

01:00:44.160 --> 01:00:45.360
<v Speaker 1>port in there,

01:00:45.840 --> 01:00:46.880
<v Speaker 1>right at the top.

01:00:47.359 --> 01:00:48.160
<v Speaker 0>Oh yeah.

01:00:48.960 --> 01:00:49.600
<v Speaker 0>So

01:00:56.320 --> 01:00:59.204
<v Speaker 0>that's over our I mean, could change that

01:00:59.204 --> 01:01:00.405
<v Speaker 0>to 127001.

01:01:00.405 --> 01:01:01.125
<v Speaker 0>Would that work?

01:01:02.484 --> 01:01:03.845
<v Speaker 1>Yeah. That would be fine.

01:01:04.325 --> 01:01:06.005
<v Speaker 1>And I believe it should be signed for

01:01:06.005 --> 01:01:07.925
<v Speaker 1>local host. If not, then you'll get a

01:01:07.925 --> 01:01:08.724
<v Speaker 1>TLS error.

01:01:11.070 --> 01:01:12.830
<v Speaker 1>But, I mean, we can just

01:01:12.990 --> 01:01:15.150
<v Speaker 1>look at net stats to see if it's

01:01:15.150 --> 01:01:16.990
<v Speaker 1>actually up and running on that port.

01:01:17.790 --> 01:01:19.550
<v Speaker 0>Alright. So first of all, I'm gonna

01:01:21.470 --> 01:01:22.910
<v Speaker 0>so that IP address should be the IP

01:01:22.910 --> 01:01:24.350
<v Speaker 0>address of this machine. Right?

01:01:24.750 --> 01:01:25.630
<v Speaker 1>It should. Yeah.

01:01:29.875 --> 01:01:32.755
<v Speaker 0>So we've got two IP no. One IPV

01:01:32.755 --> 01:01:34.515
<v Speaker 0>four 80 seven 30 eight.

01:01:35.235 --> 01:01:35.875
<v Speaker 0>Yep.

01:01:38.595 --> 01:01:39.395
<v Speaker 0>LN.

01:01:39.395 --> 01:01:40.435
<v Speaker 0>What would you use here?

01:01:42.420 --> 01:01:43.380
<v Speaker 1>A n

01:01:46.420 --> 01:01:49.140
<v Speaker 1>and grep for six four four three.

01:01:53.220 --> 01:01:54.020
<v Speaker 0>Yeah. It's there.

01:01:56.405 --> 01:01:58.165
<v Speaker 0>We have an established connection to that, so

01:01:58.165 --> 01:01:59.765
<v Speaker 0>I'm gonna assume it's alright.

01:02:05.605 --> 01:02:07.605
<v Speaker 1>The get nodes didn't work.

01:02:07.765 --> 01:02:08.645
<v Speaker 1>Is that alright?

01:02:08.965 --> 01:02:10.805
<v Speaker 0>Maybe I'll let it actually time out. Give

01:02:10.805 --> 01:02:11.765
<v Speaker 0>me an error this time.

01:02:19.020 --> 01:02:21.340
<v Speaker 0>Timed out. SCD timed out, not the API

01:02:21.340 --> 01:02:22.620
<v Speaker 0>server. Oh, okay.

01:02:23.660 --> 01:02:24.780
<v Speaker 1>That's strange.

01:02:26.300 --> 01:02:27.580
<v Speaker 0>I hate SCD problems.

01:02:29.015 --> 01:02:32.215
<v Speaker 1>Is the STD running on this this node

01:02:31.895 --> 01:02:32.295
<v Speaker 1>Well,

01:02:34.935 --> 01:02:37.255
<v Speaker 0>I mean it looks like it of course.

01:02:37.255 --> 01:02:38.615
<v Speaker 1>It certainly does.

01:02:41.575 --> 01:02:43.175
<v Speaker 0>So is there

01:02:44.010 --> 01:02:45.290
<v Speaker 0>is there a way for us to check

01:02:45.290 --> 01:02:47.050
<v Speaker 0>the health? I mean, if entity is running

01:02:47.050 --> 01:02:48.410
<v Speaker 0>to me, that normally means that it's healthy

01:02:48.410 --> 01:02:49.690
<v Speaker 0>because it wouldn't be able to join the

01:02:49.690 --> 01:02:50.810
<v Speaker 0>cluster otherwise.

01:02:51.450 --> 01:02:53.050
<v Speaker 1>Yeah. I mean, the first thing probably would

01:02:53.050 --> 01:02:55.850
<v Speaker 1>be check the FCD logs, find out what

01:02:55.850 --> 01:02:58.410
<v Speaker 1>it's saying and how healthy it thinks it

01:02:58.410 --> 01:02:58.570
<v Speaker 1>is.

01:03:01.205 --> 01:03:02.005
<v Speaker 1>K.

01:03:03.365 --> 01:03:04.725
<v Speaker 1>In fact, we can just go to top

01:03:04.725 --> 01:03:05.525
<v Speaker 1>Follow-up containment.

01:03:13.620 --> 01:03:15.780
<v Speaker 0>Oh,

01:03:16.820 --> 01:03:17.460
<v Speaker 0>no.

01:03:19.220 --> 01:03:21.460
<v Speaker 0>It's your bad data in our etcd.

01:03:23.940 --> 01:03:25.140
<v Speaker 1>Failed to apply.

01:03:28.375 --> 01:03:30.215
<v Speaker 1>There is a c t m space.

01:03:35.975 --> 01:03:38.695
<v Speaker 0>So it looks like a a value to

01:03:39.255 --> 01:03:41.015
<v Speaker 0>be oh, no desk?

01:03:41.335 --> 01:03:42.295
<v Speaker 1>No desk space.

01:03:44.570 --> 01:03:46.410
<v Speaker 1>I'm sorry. I managed to log on if

01:03:46.410 --> 01:03:49.050
<v Speaker 1>that was the case. No. This looks alright.

01:03:51.050 --> 01:03:53.370
<v Speaker 0>And although it's running on a container, let's

01:03:53.370 --> 01:03:55.130
<v Speaker 0>take a look at our manifest for this

01:03:55.130 --> 01:03:57.210
<v Speaker 0>and see if there's any weird configuration.

01:03:57.684 --> 01:03:59.525
<v Speaker 1>Oh, it's running read only or something like

01:03:59.525 --> 01:04:00.085
<v Speaker 1>that.

01:04:01.525 --> 01:04:03.045
<v Speaker 1>Possibly before we start.

01:04:09.684 --> 01:04:12.110
<v Speaker 0>We do have a volume but I don't

01:04:12.110 --> 01:04:13.710
<v Speaker 0>believe those are no. That is the data

01:04:13.710 --> 01:04:15.390
<v Speaker 0>directory. Varlib etcd.

01:04:16.830 --> 01:04:18.510
<v Speaker 0>And that volume is

01:04:18.750 --> 01:04:20.270
<v Speaker 0>a host path

01:04:20.350 --> 01:04:20.830
<v Speaker 0>here.

01:04:23.325 --> 01:04:24.845
<v Speaker 0>No, that's not the same one, is it?

01:04:24.845 --> 01:04:27.565
<v Speaker 0>No. Etcd data. Where's Etcd data?

01:04:27.885 --> 01:04:28.765
<v Speaker 0>Oh yeah.

01:04:29.565 --> 01:04:30.605
<v Speaker 0>Varlib Etcd.

01:04:36.170 --> 01:04:38.170
<v Speaker 0>Not a special mode path or anything, is

01:04:38.170 --> 01:04:38.650
<v Speaker 0>it?

01:04:40.010 --> 01:04:40.410
<v Speaker 0>No.

01:04:50.245 --> 01:04:50.805
<v Speaker 1>Yeah.

01:04:55.685 --> 01:04:57.685
<v Speaker 0>So it's not the horse which leads me

01:04:57.685 --> 01:05:01.125
<v Speaker 0>to must be something to do with the

01:05:03.500 --> 01:05:04.460
<v Speaker 0>I don't know.

01:05:05.340 --> 01:05:07.099
<v Speaker 1>I'm

01:05:07.099 --> 01:05:08.780
<v Speaker 1>not an Nets CD expert if I can

01:05:08.780 --> 01:05:09.420
<v Speaker 1>kind of

01:05:11.500 --> 01:05:11.980
<v Speaker 0>I

01:05:12.460 --> 01:05:13.980
<v Speaker 0>wanna go back to

01:05:15.675 --> 01:05:16.555
<v Speaker 0>to this.

01:05:19.035 --> 01:05:20.715
<v Speaker 0>Let me go through a little bit slower.

01:05:20.715 --> 01:05:22.075
<v Speaker 0>So I'm not worried about the commands. I

01:05:22.075 --> 01:05:24.235
<v Speaker 0>don't think there's anything there. You can't tell

01:05:24.235 --> 01:05:26.555
<v Speaker 0>STD not to rate to this location. We've

01:05:26.555 --> 01:05:28.475
<v Speaker 0>got varlib etcd as the data there. So

01:05:28.475 --> 01:05:30.955
<v Speaker 0>let's confirm that's where we meant it. Yeah.

01:05:30.955 --> 01:05:32.155
<v Speaker 0>So varlib

01:05:33.089 --> 01:05:34.130
<v Speaker 0>that

01:05:34.770 --> 01:05:35.410
<v Speaker 0>looks

01:05:35.970 --> 01:05:36.690
<v Speaker 0>alright.

01:05:40.369 --> 01:05:43.170
<v Speaker 0>I'm not fussed about the probes resource. There's

01:05:43.170 --> 01:05:44.529
<v Speaker 0>no constraints or limits.

01:05:47.735 --> 01:05:48.935
<v Speaker 1>I mean, there's

01:05:49.895 --> 01:05:51.015
<v Speaker 0>there's nothing there

01:05:53.015 --> 01:05:54.935
<v Speaker 0>that makes me think that can't run.

01:06:00.599 --> 01:06:03.079
<v Speaker 0>And that CD is running, but it's failing.

01:06:03.799 --> 01:06:04.440
<v Speaker 0>Yes.

01:06:12.039 --> 01:06:14.039
<v Speaker 1>And does that CD have a fixed size

01:06:14.039 --> 01:06:16.255
<v Speaker 1>database? Is there too much in it? Or

01:06:18.735 --> 01:06:20.095
<v Speaker 1>I wouldn't

01:06:24.735 --> 01:06:26.895
<v Speaker 0>where's my CD does have a yeah. Does

01:06:26.895 --> 01:06:28.735
<v Speaker 1>have a command line thing, isn't it? It

01:06:28.735 --> 01:06:30.015
<v Speaker 0>does, but I can never remember how to

01:06:30.015 --> 01:06:31.320
<v Speaker 0>do it and I always fall back on

01:06:31.320 --> 01:06:32.120
<v Speaker 0>one of these

01:06:33.160 --> 01:06:34.360
<v Speaker 0>things so

01:06:35.960 --> 01:06:37.320
<v Speaker 1>Well there'll be a lesson to you Google

01:06:37.320 --> 01:06:39.160
<v Speaker 1>is the answer. Always.

01:06:40.680 --> 01:06:43.480
<v Speaker 0>Alright. We don't actually have the etcd command

01:06:43.480 --> 01:06:44.280
<v Speaker 0>line tools.

01:06:47.855 --> 01:06:49.535
<v Speaker 0>And if I could remember how to do

01:06:49.535 --> 01:06:51.615
<v Speaker 0>a NS enter into that

01:06:52.575 --> 01:06:54.335
<v Speaker 0>mount fail system, I would.

01:06:57.855 --> 01:06:59.535
<v Speaker 0>In fact, we could just do that. Right?

01:07:05.349 --> 01:07:06.470
<v Speaker 0>It's pet

01:07:08.069 --> 01:07:10.150
<v Speaker 0>three nine eight zero seven nine.

01:07:11.430 --> 01:07:12.630
<v Speaker 0>LSNS.

01:07:13.029 --> 01:07:14.390
<v Speaker 0>NS enter.

01:07:15.190 --> 01:07:16.905
<v Speaker 0>Let's see if I can remember the syntax

01:07:16.905 --> 01:07:17.625
<v Speaker 0>on this.

01:07:21.305 --> 01:07:24.265
<v Speaker 0>N s. We want the mount namespace.

01:07:26.345 --> 01:07:28.105
<v Speaker 0>Don't know how you do that? Oh no.

01:07:28.105 --> 01:07:30.985
<v Speaker 0>There's a number and the namespace mount and

01:07:30.985 --> 01:07:31.945
<v Speaker 0>then

01:07:32.240 --> 01:07:34.799
<v Speaker 0>I'll

01:07:34.799 --> 01:07:37.359
<v Speaker 0>remember. I'll get there. Yeah. NS enter

01:07:38.319 --> 01:07:40.400
<v Speaker 0>four zero two. This is the last time

01:07:40.400 --> 01:07:41.680
<v Speaker 0>I'm trying. I know there's a way to

01:07:41.680 --> 01:07:42.079
<v Speaker 0>do this.

01:07:46.125 --> 01:07:47.725
<v Speaker 0>Screw you NS enter.

01:07:50.125 --> 01:07:51.965
<v Speaker 0>NS enter m.

01:07:55.325 --> 01:07:57.565
<v Speaker 1>If I much need to install it, see

01:07:57.565 --> 01:07:59.085
<v Speaker 1>download it from

01:08:00.445 --> 01:08:03.839
<v Speaker 0>I know it should it should. 398079.

01:08:03.839 --> 01:08:06.080
<v Speaker 0>I'm gonna try one more thing. Okay.

01:08:10.160 --> 01:08:12.000
<v Speaker 0>Or pet ah, okay.

01:08:12.960 --> 01:08:14.080
<v Speaker 0>Maybe I just need that.

01:08:19.095 --> 01:08:21.255
<v Speaker 0>No, right, pain, forget it.

01:08:22.455 --> 01:08:24.215
<v Speaker 0>I'm gonna Google that for the next pain

01:08:24.215 --> 01:08:25.814
<v Speaker 0>because that's twice I felt that Anna Center

01:08:25.814 --> 01:08:26.854
<v Speaker 0>would have been really useful.

01:08:33.390 --> 01:08:35.229
<v Speaker 1>We just need that CD client, don't we?

01:08:43.630 --> 01:08:44.750
<v Speaker 0>Well, that keeps failing.

01:08:47.824 --> 01:08:48.944
<v Speaker 1>We may just have to grab the x

01:08:48.944 --> 01:08:50.784
<v Speaker 1>c d binary then from

01:09:03.200 --> 01:09:04.000
<v Speaker 0>Okay.

01:09:08.000 --> 01:09:09.520
<v Speaker 0>Tripped up by the silly things.

01:09:14.104 --> 01:09:16.344
<v Speaker 1>I'm gonna grab the lot by those things.

01:09:17.784 --> 01:09:19.544
<v Speaker 0>AMD sixty four.

01:09:24.184 --> 01:09:25.304
<v Speaker 0>Curl l.

01:09:31.000 --> 01:09:31.960
<v Speaker 0>Extract.

01:09:34.920 --> 01:09:35.960
<v Speaker 0>That's more than I want to. Oh my

01:09:35.960 --> 01:09:36.599
<v Speaker 0>goodness.

01:09:38.760 --> 01:09:40.120
<v Speaker 0>NCT.

01:09:40.120 --> 01:09:41.854
<v Speaker 0>There we go. Okay. So

01:09:43.375 --> 01:09:44.175
<v Speaker 0>NCT,

01:09:44.255 --> 01:09:45.375
<v Speaker 0>CTL.

01:09:47.774 --> 01:09:49.935
<v Speaker 1>Oh, what? Did you grab Mac OS one?

01:09:49.935 --> 01:09:51.135
<v Speaker 0>Why am I my host?

01:10:05.370 --> 01:10:06.890
<v Speaker 1>Oh, you're in the prop file system trying

01:10:06.890 --> 01:10:07.929
<v Speaker 1>to download it there.

01:10:09.450 --> 01:10:11.655
<v Speaker 0>I'm shooting myself in foot far too much

01:10:11.655 --> 01:10:12.774
<v Speaker 0>here anyway.

01:10:13.175 --> 01:10:14.135
<v Speaker 0>SCD

01:10:14.135 --> 01:10:15.175
<v Speaker 0>CTL.

01:10:15.735 --> 01:10:17.094
<v Speaker 0>Alright. Where's

01:10:17.094 --> 01:10:18.054
<v Speaker 0>that cheat sheet?

01:10:18.295 --> 01:10:20.614
<v Speaker 0>I've exported all those things which should get

01:10:20.614 --> 01:10:21.574
<v Speaker 0>us started.

01:10:21.815 --> 01:10:23.574
<v Speaker 0>Let's test this command works.

01:10:26.750 --> 01:10:29.470
<v Speaker 0>Alright. We have the ability to query etcd.

01:10:31.710 --> 01:10:33.230
<v Speaker 1>Wow. That's wonderful.

01:10:33.470 --> 01:10:35.470
<v Speaker 0>Yeah. I think it's just binary keys inside

01:10:35.470 --> 01:10:36.910
<v Speaker 0>of that to be fair.

01:10:38.990 --> 01:10:40.270
<v Speaker 1>Looking at

01:10:41.230 --> 01:10:41.870
<v Speaker 1>the

01:10:42.355 --> 01:10:44.355
<v Speaker 1>effects of the logs for not the logs,

01:10:44.355 --> 01:10:47.314
<v Speaker 1>the Kubernetes documentation for NCD,

01:10:48.994 --> 01:10:50.114
<v Speaker 1>there are a number of things that we

01:10:50.114 --> 01:10:51.795
<v Speaker 1>can actually kind of start to look at

01:10:51.795 --> 01:10:52.914
<v Speaker 1>to determine

01:10:52.915 --> 01:10:54.275
<v Speaker 1>kind of the current state of it.

01:10:57.750 --> 01:10:59.350
<v Speaker 1>Things like the snapshot

01:10:59.350 --> 01:11:00.790
<v Speaker 1>size and things like that.

01:11:02.230 --> 01:11:03.990
<v Speaker 0>I need this pointer to just tell link

01:11:03.990 --> 01:11:06.950
<v Speaker 0>in the docs, s c d op gate

01:11:06.950 --> 01:11:07.990
<v Speaker 0>maintenance.

01:11:07.990 --> 01:11:09.750
<v Speaker 0>I'm assuming that's gonna have some commands on

01:11:09.750 --> 01:11:09.910
<v Speaker 0>it.

01:11:21.335 --> 01:11:23.175
<v Speaker 1>Space quota. Yeah. That sounds

01:11:26.090 --> 01:11:28.649
<v Speaker 1>so table endpoint status, I guess.

01:11:31.849 --> 01:11:33.050
<v Speaker 0>Do you wanna tape if you know what

01:11:33.050 --> 01:11:33.769
<v Speaker 0>you're doing?

01:11:34.329 --> 01:11:36.329
<v Speaker 1>I do. I do not know what I'm

01:11:36.329 --> 01:11:38.650
<v Speaker 1>doing, but oh, I'm gonna kick out again.

01:11:40.815 --> 01:11:41.934
<v Speaker 1>One second.

01:11:42.335 --> 01:11:43.855
<v Speaker 0>I'm just gonna type health and see if

01:11:43.855 --> 01:11:45.534
<v Speaker 0>anything does anything. No.

01:11:49.855 --> 01:11:52.014
<v Speaker 0>I should know more etcd stuff.

01:11:55.380 --> 01:11:56.980
<v Speaker 1>Well, mean if you're lucky, you never really

01:11:56.980 --> 01:11:58.420
<v Speaker 1>have to touch etcd.

01:12:00.340 --> 01:12:02.900
<v Speaker 1>Which node are you on? M5.

01:12:02.900 --> 01:12:04.420
<v Speaker 0>M 5 R Zed G. Yep.

01:12:10.835 --> 01:12:11.554
<v Speaker 1>Okay.

01:12:12.915 --> 01:12:14.035
<v Speaker 0>I'm not sure what's happened.

01:12:21.640 --> 01:12:23.159
<v Speaker 1>Yeah

01:12:25.960 --> 01:12:29.400
<v Speaker 0>my screen seems to have since

01:12:29.400 --> 01:12:31.000
<v Speaker 0>you joined it just went up at ski

01:12:31.000 --> 01:12:32.840
<v Speaker 0>west but I'll just keep scrolling down manually.

01:12:46.225 --> 01:12:47.745
<v Speaker 0>It says it's healthy.

01:12:48.385 --> 01:12:48.785
<v Speaker 1>Yeah.

01:12:50.630 --> 01:12:52.310
<v Speaker 0>Should we run that compaction?

01:12:53.110 --> 01:12:55.030
<v Speaker 1>I just wanna get the

01:13:00.950 --> 01:13:01.989
<v Speaker 1>one second.

01:13:02.310 --> 01:13:04.390
<v Speaker 1>There was a size command which should.

01:13:05.105 --> 01:13:07.425
<v Speaker 0>Yeah. I saw the size command for setting

01:13:07.425 --> 01:13:09.344
<v Speaker 0>it. I never saw a way to query

01:13:09.344 --> 01:13:09.985
<v Speaker 0>it.

01:13:11.344 --> 01:13:12.304
<v Speaker 0>Let's see.

01:13:13.745 --> 01:13:15.824
<v Speaker 0>Quarter back end size.

01:13:19.905 --> 01:13:21.480
<v Speaker 1>Woah. Do we need to

01:13:30.120 --> 01:13:32.040
<v Speaker 1>because scrolling's a bit weird sometimes.

01:13:32.520 --> 01:13:34.200
<v Speaker 0>Yeah. I've had a bit of issues there

01:13:34.200 --> 01:13:34.600
<v Speaker 0>with it.

01:13:36.435 --> 01:13:39.874
<v Speaker 1>Watch version blah blah blah. Snapshot status.

01:13:40.034 --> 01:13:41.474
<v Speaker 0>Yeah. If we do that,

01:13:41.795 --> 01:13:43.795
<v Speaker 0>write out table endpoint status. Did you run

01:13:43.795 --> 01:13:47.875
<v Speaker 0>that? There's

01:13:47.875 --> 01:13:50.810
<v Speaker 0>also an entity control alarm list which I

01:13:50.810 --> 01:13:52.650
<v Speaker 0>think will list out some problems.

01:13:54.810 --> 01:13:55.849
<v Speaker 1>No space. So

01:13:56.490 --> 01:13:58.490
<v Speaker 1>I think we're getting close to working out

01:13:58.490 --> 01:14:00.570
<v Speaker 1>where we're looking here. Okay. There was also

01:14:00.570 --> 01:14:01.130
<v Speaker 0>the

01:14:01.690 --> 01:14:03.345
<v Speaker 0>fact let me just drop this command and

01:14:03.345 --> 01:14:04.385
<v Speaker 0>then see if it works.

01:14:05.105 --> 01:14:07.344
<v Speaker 0>It seems to list something.

01:14:07.745 --> 01:14:10.305
<v Speaker 0>There we go. So we've got an endpoint

01:14:10.305 --> 01:14:13.345
<v Speaker 0>state is there looking at the table and

01:14:13.345 --> 01:14:14.224
<v Speaker 0>we can see

01:14:14.945 --> 01:14:17.425
<v Speaker 0>the size, the DB size is 18 meg.

01:14:17.425 --> 01:14:19.345
<v Speaker 0>So I guess we're gonna have to increase

01:14:19.080 --> 01:14:21.080
<v Speaker 0>that or do a compaction to free up

01:14:21.080 --> 01:14:22.520
<v Speaker 0>some space.

01:14:22.840 --> 01:14:23.480
<v Speaker 1>Yes.

01:14:24.040 --> 01:14:26.680
<v Speaker 1>So compact will compact the event history as

01:14:26.680 --> 01:14:27.800
<v Speaker 1>we can see here.

01:14:29.320 --> 01:14:31.480
<v Speaker 1>I'm guessing our our events we have that

01:14:31.480 --> 01:14:33.480
<v Speaker 1>many events that there's no space left. So

01:14:35.755 --> 01:14:37.195
<v Speaker 0>Well, we just set well, we just make

01:14:37.195 --> 01:14:38.074
<v Speaker 0>it really big.

01:14:38.635 --> 01:14:40.794
<v Speaker 1>Yeah. That's entirely too really.

01:14:41.915 --> 01:14:43.994
<v Speaker 0>Alright. Well, I've got that command from the

01:14:43.994 --> 01:14:46.795
<v Speaker 0>maintenance gauge. Let's set this to we don't

01:14:46.795 --> 01:14:48.900
<v Speaker 0>want 16 meg. I'm gonna go for

01:14:49.219 --> 01:14:50.099
<v Speaker 0>a gig.

01:14:54.100 --> 01:14:55.860
<v Speaker 0>Oh no, you start at CD with a

01:14:55.860 --> 01:14:57.620
<v Speaker 0>quarter back inside. Okay. So we're gonna have

01:14:57.620 --> 01:14:58.500
<v Speaker 0>to modify

01:14:59.699 --> 01:15:02.405
<v Speaker 0>the static manifest to change the quota back

01:15:02.405 --> 01:15:03.284
<v Speaker 0>end sites.

01:15:08.245 --> 01:15:09.445
<v Speaker 0>Do we have one?

01:15:12.245 --> 01:15:14.005
<v Speaker 0>No. Okay. So

01:15:21.389 --> 01:15:23.229
<v Speaker 0>one zero two four.

01:15:23.230 --> 01:15:24.189
<v Speaker 0>You happy?

01:15:24.510 --> 01:15:25.229
<v Speaker 0>Yeah.

01:15:26.350 --> 01:15:28.190
<v Speaker 0>No. I'm not sure if it's static manifest,

01:15:28.190 --> 01:15:30.030
<v Speaker 0>but that automatically restart. Do we need to

01:15:30.190 --> 01:15:31.469
<v Speaker 1>Yes. It will do.

01:15:32.485 --> 01:15:35.125
<v Speaker 1>Any change to static manifest will be detected

01:15:35.125 --> 01:15:36.324
<v Speaker 1>by Qubelet.

01:15:36.885 --> 01:15:38.804
<v Speaker 1>It keeps track of all those files.

01:15:39.045 --> 01:15:41.284
<v Speaker 1>So it should restart at CD.

01:15:42.005 --> 01:15:43.045
<v Speaker 0>Alright. Well,

01:15:43.525 --> 01:15:46.650
<v Speaker 0>Jason has now joined us. Hey, man. We

01:15:47.050 --> 01:15:49.690
<v Speaker 0>spent a solid hour on your cluster. Thanks

01:15:49.690 --> 01:15:50.409
<v Speaker 0>for that.

01:15:54.330 --> 01:15:55.130
<v Speaker 0>Alright.

01:15:55.210 --> 01:15:56.090
<v Speaker 0>Let's

01:15:56.330 --> 01:15:56.810
<v Speaker 0>see.

01:16:00.905 --> 01:16:02.105
<v Speaker 1>So we should be able to do that

01:16:02.105 --> 01:16:03.945
<v Speaker 1>right endpoint status again.

01:16:04.825 --> 01:16:06.025
<v Speaker 1>Etcd's been up.

01:16:11.430 --> 01:16:14.470
<v Speaker 1>It's not been restarting the system. That's just

01:16:14.470 --> 01:16:16.389
<v Speaker 0>a cube API server, isn't it? So

01:16:22.150 --> 01:16:23.190
<v Speaker 0>I've now broken it.

01:16:27.395 --> 01:16:28.275
<v Speaker 0>Tail

01:16:28.275 --> 01:16:29.315
<v Speaker 0>etcd.

01:16:31.795 --> 01:16:33.235
<v Speaker 0>Alright. We need more.

01:16:34.115 --> 01:16:35.075
<v Speaker 0>I've made it worse.

01:16:39.280 --> 01:16:42.320
<v Speaker 0>Invalid value, flag if I missed that. Okay.

01:16:42.320 --> 01:16:43.679
<v Speaker 0>It doesn't like the

01:16:44.080 --> 01:16:46.079
<v Speaker 1>the math where the you've added in.

01:16:47.360 --> 01:16:48.880
<v Speaker 0>Alright. I guess I can just type a

01:16:48.880 --> 01:16:49.360
<v Speaker 0>big number.

01:17:01.035 --> 01:17:02.635
<v Speaker 0>Yeah. Of course, that shell expansion is not

01:17:02.635 --> 01:17:03.835
<v Speaker 0>gonna work in a static manifest.

01:17:07.730 --> 01:17:08.610
<v Speaker 0>There we go. So

01:17:10.130 --> 01:17:12.210
<v Speaker 0>we had a rake. I loved it control

01:17:12.210 --> 01:17:13.570
<v Speaker 0>r just worked in that and that's a

01:17:13.570 --> 01:17:15.650
<v Speaker 0>browser window. That was awesome.

01:17:17.330 --> 01:17:19.010
<v Speaker 0>And I changed the retriever.

01:17:23.535 --> 01:17:24.175
<v Speaker 0>Where did I

01:17:25.055 --> 01:17:26.895
<v Speaker 1>It's in your home directory, isn't it? Yeah.

01:17:26.895 --> 01:17:27.614
<v Speaker 0>Thank you.

01:17:29.615 --> 01:17:31.775
<v Speaker 0>Yeah. There we go. Okay. So right at

01:17:31.775 --> 01:17:32.175
<v Speaker 0>table.

01:17:32.610 --> 01:17:33.810
<v Speaker 0>It's

01:17:33.810 --> 01:17:35.010
<v Speaker 0>still 80 meg.

01:17:43.730 --> 01:17:44.210
<v Speaker 1>What's

01:17:44.770 --> 01:17:46.715
<v Speaker 1>what does the compact actually do then? Will

01:17:46.715 --> 01:17:48.074
<v Speaker 1>that not help us yet?

01:17:54.395 --> 01:17:55.915
<v Speaker 0>So there seems to be a defrag and

01:17:55.915 --> 01:17:56.794
<v Speaker 0>a compact.

01:17:56.795 --> 01:17:57.594
<v Speaker 0>Will we try both?

01:18:00.100 --> 01:18:02.180
<v Speaker 1>I don't really know what defrag does but

01:18:02.580 --> 01:18:04.020
<v Speaker 0>I remember what it used to do in

01:18:04.020 --> 01:18:05.860
<v Speaker 0>my old hard drives back in the day.

01:18:06.020 --> 01:18:06.659
<v Speaker 0>Yeah.

01:18:08.580 --> 01:18:09.460
<v Speaker 0>Compact?

01:18:09.780 --> 01:18:12.100
<v Speaker 0>Well, it needs one argument. I should look

01:18:12.100 --> 01:18:12.980
<v Speaker 0>at the docs but.

01:18:16.625 --> 01:18:19.264
<v Speaker 1>The revision number, I think, for compact.

01:18:20.784 --> 01:18:22.304
<v Speaker 0>Do I pick a random number?

01:18:24.065 --> 01:18:25.824
<v Speaker 1>It's version three, isn't it?

01:18:26.304 --> 01:18:28.145
<v Speaker 1>That's CD. I'm look I'm looking at the

01:18:28.145 --> 01:18:29.105
<v Speaker 1>XCD logs there.

01:18:30.190 --> 01:18:31.790
<v Speaker 0>If it's just the three at once? No.

01:18:31.790 --> 01:18:33.310
<v Speaker 0>I think it's getting the revision from that

01:18:33.310 --> 01:18:34.429
<v Speaker 0>write out table.

01:18:35.469 --> 01:18:37.630
<v Speaker 0>Oh, that's the wrong terminal. Need to stop

01:18:37.630 --> 01:18:38.429
<v Speaker 0>doing that.

01:18:38.989 --> 01:18:41.469
<v Speaker 0>Write out. Is there a revision here?

01:18:44.015 --> 01:18:46.014
<v Speaker 0>Is it grabbing it from that version?

01:18:48.095 --> 01:18:49.695
<v Speaker 0>313.

01:18:50.895 --> 01:18:52.575
<v Speaker 0>Alright. I'll just try three then.

01:19:00.670 --> 01:19:02.030
<v Speaker 0>That would be a nope.

01:19:05.390 --> 01:19:08.110
<v Speaker 1>Out of range, required revision has been compacted.

01:19:09.625 --> 01:19:10.264
<v Speaker 1>What?

01:19:11.784 --> 01:19:13.705
<v Speaker 0>Yeah. There is some sort of revision and

01:19:13.705 --> 01:19:16.425
<v Speaker 0>there are write out JSON. So sorry. I

01:19:16.425 --> 01:19:17.784
<v Speaker 0>keep on doing the wrong thing.

01:19:18.185 --> 01:19:20.905
<v Speaker 0>That write out command, I guess the dash

01:19:20.905 --> 01:19:22.425
<v Speaker 0>o JSON is gonna give us

01:19:24.025 --> 01:19:24.425
<v Speaker 0>more.

01:19:28.570 --> 01:19:30.489
<v Speaker 0>I'll write out equals JSON.

01:19:32.889 --> 01:19:34.730
<v Speaker 0>This is why you should read the documentation

01:19:34.730 --> 01:19:35.369
<v Speaker 0>instead of.

01:19:41.555 --> 01:19:42.515
<v Speaker 0>To have j q

01:19:44.595 --> 01:19:46.675
<v Speaker 0>I don't see the oh, there's the revision

01:19:46.675 --> 01:19:49.475
<v Speaker 0>there. Oh, there. 730154.

01:19:51.750 --> 01:19:52.630
<v Speaker 0>7

01:19:52.710 --> 01:19:54.790
<v Speaker 0>3 0 1 5

01:19:55.430 --> 01:19:56.150
<v Speaker 0>4.

01:19:56.790 --> 01:19:58.230
<v Speaker 0>Compacted. Okay.

01:20:01.110 --> 01:20:02.950
<v Speaker 0>Let's go back to the table output and

01:20:02.950 --> 01:20:04.630
<v Speaker 0>see if it's still got an alarm and

01:20:04.630 --> 01:20:06.824
<v Speaker 0>it does. Although the db size is now

01:20:06.824 --> 01:20:07.945
<v Speaker 0>only five meg.

01:20:08.184 --> 01:20:08.824
<v Speaker 0>So

01:20:09.625 --> 01:20:11.544
<v Speaker 0>I have no idea what we're doing.

01:20:14.824 --> 01:20:17.545
<v Speaker 1>Yeah. I I how's it still complaining now

01:20:17.545 --> 01:20:19.144
<v Speaker 1>that we've reduced the

01:20:21.480 --> 01:20:23.080
<v Speaker 1>it appears to be no longer the leader

01:20:23.080 --> 01:20:23.800
<v Speaker 1>either.

01:20:26.920 --> 01:20:28.920
<v Speaker 0>Should we go to the leader, I guess?

01:20:28.920 --> 01:20:29.159
<v Speaker 0>Like

01:20:33.255 --> 01:20:34.775
<v Speaker 1>I don't know whether we need to replicate

01:20:34.775 --> 01:20:36.535
<v Speaker 1>this across all of the members.

01:20:37.815 --> 01:20:40.535
<v Speaker 0>Let's try it. We already have another machine

01:20:40.535 --> 01:20:43.575
<v Speaker 0>here. We'll copy the etcd cheat sheet.

01:20:44.375 --> 01:20:47.175
<v Speaker 0>Where's my cheat sheet? To set up etcd.

01:20:51.290 --> 01:20:53.449
<v Speaker 0>And I don't have the binary again.

01:21:04.065 --> 01:21:04.864
<v Speaker 0>Hello.

01:21:06.145 --> 01:21:06.864
<v Speaker 0>Car.

01:21:08.465 --> 01:21:09.504
<v Speaker 0>Let's see the

01:21:12.304 --> 01:21:13.024
<v Speaker 0>what

01:21:13.905 --> 01:21:15.025
<v Speaker 0>was that? Write out command.

01:21:16.100 --> 01:21:17.699
<v Speaker 0>Endpoint status.

01:21:17.940 --> 01:21:18.580
<v Speaker 0>Mhmm.

01:21:22.180 --> 01:21:24.580
<v Speaker 0>Dash dash right out table.

01:21:25.860 --> 01:21:27.540
<v Speaker 0>See, one of the good things about this

01:21:27.540 --> 01:21:29.540
<v Speaker 0>is obviously we have no idea what we're

01:21:29.540 --> 01:21:30.785
<v Speaker 0>doing with entity but I feel like I'm

01:21:30.785 --> 01:21:32.625
<v Speaker 0>learning how to work with entity. I

01:21:32.945 --> 01:21:35.025
<v Speaker 1>do feel as though I am I'm learning

01:21:35.025 --> 01:21:36.305
<v Speaker 1>a little bit. I mean, I have written

01:21:36.305 --> 01:21:38.465
<v Speaker 1>a bunch of code around Raft before and

01:21:38.465 --> 01:21:39.745
<v Speaker 1>found that very weird.

01:21:40.305 --> 01:21:42.785
<v Speaker 1>But a learning experience, but finding out how,

01:21:43.630 --> 01:21:45.630
<v Speaker 1>I guess this database sits on top of

01:21:45.630 --> 01:21:47.230
<v Speaker 1>Raft is is kinda interesting.

01:21:47.790 --> 01:21:48.429
<v Speaker 0>Yeah.

01:21:48.670 --> 01:21:51.070
<v Speaker 0>I'm gonna run that defrag and then this

01:21:51.070 --> 01:21:52.670
<v Speaker 0>is the leader. So I'm gonna do that

01:21:52.670 --> 01:21:54.750
<v Speaker 0>right out JSON again, get the revision ID

01:21:54.750 --> 01:21:55.150
<v Speaker 0>and

01:21:55.870 --> 01:21:58.264
<v Speaker 0>then we're gonna run compact

01:21:58.264 --> 01:22:00.664
<v Speaker 0>on 730154.

01:22:05.145 --> 01:22:07.304
<v Speaker 1>It did we get the defog already?

01:22:09.465 --> 01:22:11.625
<v Speaker 0>Did that revision ID change? No.

01:22:15.099 --> 01:22:16.460
<v Speaker 0>11301.

01:22:16.460 --> 01:22:18.139
<v Speaker 0>That worked on the other machine, didn't it?

01:22:18.139 --> 01:22:19.260
<v Speaker 1>It did. Yeah.

01:22:20.219 --> 01:22:20.939
<v Speaker 1>It's

01:22:21.500 --> 01:22:24.619
<v Speaker 1>it's Rawkode version. Oh, required revision has been

01:22:24.619 --> 01:22:25.499
<v Speaker 0>compacted.

01:22:25.500 --> 01:22:26.540
<v Speaker 0>So Oh, okay.

01:22:28.735 --> 01:22:31.055
<v Speaker 1>But it's still no space, still have the

01:22:31.055 --> 01:22:33.055
<v Speaker 1>same error. Yeah. The db size is now

01:22:33.055 --> 01:22:34.575
<v Speaker 0>only two meg.

01:22:35.935 --> 01:22:36.495
<v Speaker 1>Well,

01:22:36.815 --> 01:22:38.895
<v Speaker 1>we're saving disk space one way or another.

01:22:45.690 --> 01:22:47.209
<v Speaker 0>Alright. Let's see.

01:22:47.769 --> 01:22:49.690
<v Speaker 0>Wally just dropped us a hint. He's feeling

01:22:49.690 --> 01:22:52.650
<v Speaker 0>sorry for us now. Check the etcd manifest

01:22:52.650 --> 01:22:55.210
<v Speaker 0>in here. So I guess something different on

01:22:55.210 --> 01:22:56.489
<v Speaker 0>this note perhaps.

01:22:59.985 --> 01:23:02.224
<v Speaker 0>Yeah. I'll let you scroll through this.

01:23:04.065 --> 01:23:06.145
<v Speaker 1>Looks like my screen has an update with

01:23:06.145 --> 01:23:07.104
<v Speaker 1>this particular

01:23:07.264 --> 01:23:07.985
<v Speaker 1>one.

01:23:09.425 --> 01:23:12.224
<v Speaker 0>Over on the oh, I don't remember.

01:23:13.185 --> 01:23:15.489
<v Speaker 0>BJLW4Node.

01:23:15.490 --> 01:23:16.210
<v Speaker 0>Okay.

01:23:18.450 --> 01:23:21.010
<v Speaker 1>True LCD manifest in here. Okay.

01:23:21.650 --> 01:23:24.290
<v Speaker 1>Quote to back end bytes kind of stands

01:23:24.290 --> 01:23:25.250
<v Speaker 1>out to me there.

01:23:26.130 --> 01:23:27.570
<v Speaker 0>Oh, yeah. It has been changed here.

01:23:28.945 --> 01:23:31.025
<v Speaker 1>Before we actually change that, let's

01:23:31.265 --> 01:23:31.745
<v Speaker 1>oh.

01:23:34.945 --> 01:23:36.065
<v Speaker 1>The

01:23:36.065 --> 01:23:38.225
<v Speaker 1>dates on a few things are different here,

01:23:38.945 --> 01:23:40.785
<v Speaker 1>but definitely, that CD has been modified.

01:23:43.690 --> 01:23:44.409
<v Speaker 0>Yep.

01:23:46.570 --> 01:23:49.370
<v Speaker 1>I'm just gonna pop to the other node

01:23:49.370 --> 01:23:51.050
<v Speaker 1>and see how that one looks.

01:23:55.815 --> 01:23:57.255
<v Speaker 1>So I'm just in the other window at

01:23:57.255 --> 01:24:00.614
<v Speaker 1>the moment. I'm on M 5 r. Yeah.

01:24:00.614 --> 01:24:02.295
<v Speaker 0>I've got it. Okay.

01:24:05.815 --> 01:24:08.614
<v Speaker 1>I'll use less so people oh, I can't.

01:24:09.574 --> 01:24:11.335
<v Speaker 0>Cool. You want me to tape a tape?

01:24:11.335 --> 01:24:12.350
<v Speaker 0>Oh, you got it?

01:24:13.870 --> 01:24:16.830
<v Speaker 1>Okay. So that line isn't even oh, That's

01:24:16.830 --> 01:24:18.030
<v Speaker 1>the current back end bytes that you put

01:24:18.030 --> 01:24:20.190
<v Speaker 1>in, wasn't it? Yeah. I made up that

01:24:20.190 --> 01:24:20.830
<v Speaker 0>number.

01:24:21.310 --> 01:24:23.870
<v Speaker 1>Okay. We could probably just take that out

01:24:23.870 --> 01:24:24.670
<v Speaker 0>I suppose.

01:24:25.550 --> 01:24:26.270
<v Speaker 0>Or

01:24:26.430 --> 01:24:27.755
<v Speaker 0>maybe we should copy it from the other

01:24:27.755 --> 01:24:30.315
<v Speaker 0>node so they're the same consistently across all

01:24:30.315 --> 01:24:32.314
<v Speaker 0>the members of the cluster.

01:24:34.074 --> 01:24:35.915
<v Speaker 0>Let me check the control plane node and

01:24:35.915 --> 01:24:37.675
<v Speaker 0>just tell you if there's anything different.

01:24:41.010 --> 01:24:44.610
<v Speaker 0>So Kubernetes manifest has anything here been changed.

01:24:45.170 --> 01:24:47.730
<v Speaker 0>Right. No. That's actually No. This is this

01:24:47.730 --> 01:24:48.610
<v Speaker 1>is fresh.

01:24:49.489 --> 01:24:51.489
<v Speaker 1>Does it even have the thing in there?

01:24:51.809 --> 01:24:53.889
<v Speaker 0>It does not. So I think we just

01:24:53.889 --> 01:24:55.565
<v Speaker 0>remove the quarter back end base from all

01:24:55.565 --> 01:24:57.324
<v Speaker 0>of them and let it restart. So

01:24:58.284 --> 01:25:00.685
<v Speaker 1>I've removed it from the one control play

01:25:00.685 --> 01:25:02.284
<v Speaker 1>node that begins with b.

01:25:04.445 --> 01:25:05.965
<v Speaker 1>If you wanna just remove it from that

01:25:05.965 --> 01:25:07.324
<v Speaker 1>node that you're on there.

01:25:09.540 --> 01:25:11.380
<v Speaker 0>Oh, this is just a less, isn't it?

01:25:12.099 --> 01:25:13.219
<v Speaker 0>Oh, yep.

01:25:14.739 --> 01:25:16.739
<v Speaker 0>Let me try and then my way through

01:25:16.739 --> 01:25:17.619
<v Speaker 0>it. So

01:25:18.500 --> 01:25:19.219
<v Speaker 0>done.

01:25:20.420 --> 01:25:21.219
<v Speaker 0>Alrighty.

01:25:21.860 --> 01:25:23.540
<v Speaker 0>Did you you'd removed it from the one

01:25:23.540 --> 01:25:26.015
<v Speaker 0>I set. I have. I have. Yeah. Okay.

01:25:27.855 --> 01:25:28.415
<v Speaker 1>So

01:25:30.655 --> 01:25:34.015
<v Speaker 1>there is no maximum sizes on things now.

01:25:36.430 --> 01:25:37.790
<v Speaker 0>What was the endpoint

01:25:38.110 --> 01:25:39.070
<v Speaker 0>status?

01:25:39.550 --> 01:25:41.070
<v Speaker 0>Oh, status endpoint.

01:25:43.070 --> 01:25:43.630
<v Speaker 0>Yeah.

01:25:44.750 --> 01:25:46.910
<v Speaker 0>Right. Oh, it's such a terrible name for

01:25:46.910 --> 01:25:48.590
<v Speaker 0>that flag. It yeah.

01:25:49.790 --> 01:25:51.790
<v Speaker 1>I'm still getting the no alarm the no

01:25:51.790 --> 01:25:52.885
<v Speaker 1>space alarm.

01:25:53.605 --> 01:25:54.965
<v Speaker 1>I don't know if this will take some

01:25:54.965 --> 01:25:55.844
<v Speaker 1>time to

01:25:57.125 --> 01:25:59.525
<v Speaker 0>Yeah. If our SSD has even restarted yet,

01:25:59.525 --> 01:26:00.165
<v Speaker 0>guess.

01:26:02.645 --> 01:26:05.740
<v Speaker 0>13 20 5. Yeah. Potentially. Let's give it

01:26:05.740 --> 01:26:06.380
<v Speaker 0>a minute.

01:26:09.340 --> 01:26:11.180
<v Speaker 1>I mean we can see where the cube

01:26:11.180 --> 01:26:13.180
<v Speaker 1>CTL is actually giving us a working cluster

01:26:13.180 --> 01:26:14.060
<v Speaker 1>at this point.

01:26:15.340 --> 01:26:16.699
<v Speaker 0>Yeah. Why not? Every

01:26:17.260 --> 01:26:18.885
<v Speaker 0>time I click on that I really should

01:26:18.885 --> 01:26:23.605
<v Speaker 0>have used real service. Let's

01:26:23.605 --> 01:26:26.645
<v Speaker 0>go to this is five export. Okay. Get

01:26:26.645 --> 01:26:27.445
<v Speaker 0>notes.

01:26:30.005 --> 01:26:30.324
<v Speaker 0>Hey.

01:26:32.160 --> 01:26:33.360
<v Speaker 0>We're back in action.

01:26:35.200 --> 01:26:36.400
<v Speaker 0>Our pods

01:26:37.040 --> 01:26:38.000
<v Speaker 0>all running,

01:26:38.320 --> 01:26:39.920
<v Speaker 0>grab dash v.

01:26:43.280 --> 01:26:46.080
<v Speaker 0>HCD is coming up on one of them.

01:26:46.954 --> 01:26:47.754
<v Speaker 0>Mhmm.

01:26:52.875 --> 01:26:53.754
<v Speaker 0>System.

01:26:53.994 --> 01:26:55.354
<v Speaker 0>Just create pod.

01:26:59.275 --> 01:27:00.875
<v Speaker 0>Ah, okay. We've got one more thing to

01:27:00.875 --> 01:27:02.120
<v Speaker 0>fix it looks like.

01:27:03.480 --> 01:27:04.520
<v Speaker 1>What is that?

01:27:07.160 --> 01:27:10.200
<v Speaker 0>So which which node is this? I really

01:27:10.200 --> 01:27:13.880
<v Speaker 0>should have checked. So contain

01:27:14.295 --> 01:27:15.335
<v Speaker 0>white.

01:27:18.535 --> 01:27:20.295
<v Speaker 0>That was a stupid thing to grip on

01:27:20.295 --> 01:27:22.695
<v Speaker 0>wasn't it? No. Because it's not an inverse.

01:27:22.695 --> 01:27:25.495
<v Speaker 0>There we go. We wanna jump onto m

01:27:25.495 --> 01:27:27.415
<v Speaker 0>five r z g then.

01:27:28.135 --> 01:27:29.519
<v Speaker 0>Okay. Which we are.

01:27:33.280 --> 01:27:35.360
<v Speaker 0>Now what was that error again? Sorry. Wait

01:27:35.360 --> 01:27:35.999
<v Speaker 0>a minute.

01:27:36.400 --> 01:27:37.599
<v Speaker 0>Scatterbrained.

01:27:37.679 --> 01:27:38.479
<v Speaker 0>Yeah.

01:27:38.639 --> 01:27:40.560
<v Speaker 0>It can't open

01:27:41.965 --> 01:27:43.885
<v Speaker 1>host. Let's see hosts.

01:27:45.325 --> 01:27:47.485
<v Speaker 0>So is it maybe using host networking or

01:27:47.485 --> 01:27:48.205
<v Speaker 0>something?

01:27:50.845 --> 01:27:54.230
<v Speaker 0>It is, but it should. Right? Does that

01:27:54.230 --> 01:27:55.990
<v Speaker 0>city use host network? Yes. Yeah. Because it

01:27:55.990 --> 01:27:57.350
<v Speaker 1>binds to local host.

01:27:59.190 --> 01:28:01.750
<v Speaker 1>This looks like a file issue though.

01:28:02.470 --> 01:28:04.710
<v Speaker 1>I'm trying to access that Etsy hosts.

01:28:10.625 --> 01:28:12.545
<v Speaker 0>Let's get proper logs from it to either

01:28:12.545 --> 01:28:13.825
<v Speaker 0>it. Just

01:28:18.625 --> 01:28:19.105
<v Speaker 0>cattle.

01:28:24.550 --> 01:28:26.470
<v Speaker 0>Older and new. Older and new.

01:28:27.110 --> 01:28:29.190
<v Speaker 1>I'm still getting them. Yeah. It's still the

01:28:29.190 --> 01:28:29.670
<v Speaker 0>size thing.

01:28:47.284 --> 01:28:48.324
<v Speaker 1>What's the

01:28:48.565 --> 01:28:51.045
<v Speaker 1>time currently? So these are yeah. These are

01:28:51.045 --> 01:28:52.800
<v Speaker 1>from a minute ago. Yeah. Well, it says

01:28:52.800 --> 01:28:55.440
<v Speaker 0>it's just three more simple things. Yes. Thanks,

01:28:55.440 --> 01:28:56.639
<v Speaker 0>Ovid. Oh.

01:28:57.679 --> 01:29:00.560
<v Speaker 1>I I deeply regret upsetting you last week,

01:29:00.560 --> 01:29:02.320
<v Speaker 1>but I think I think you've definitely

01:29:03.520 --> 01:29:05.054
<v Speaker 1>taken your revenge here.

01:29:07.295 --> 01:29:08.255
<v Speaker 0>Alright. Let's

01:29:10.495 --> 01:29:11.295
<v Speaker 0>what's going on?

01:29:20.960 --> 01:29:22.239
<v Speaker 1>What have you done?

01:29:23.520 --> 01:29:25.440
<v Speaker 1>Blah blah blah. That looks fine.

01:29:25.680 --> 01:29:27.040
<v Speaker 0>That'd be it. Nothing.

01:29:27.680 --> 01:29:29.360
<v Speaker 1>Is there anything else in the config

01:29:29.760 --> 01:29:31.840
<v Speaker 1>in the in the flags that are being

01:29:31.840 --> 01:29:32.160
<v Speaker 1>passed?

01:29:36.094 --> 01:29:37.054
<v Speaker 0>So

01:29:38.894 --> 01:29:41.534
<v Speaker 1>advertising, fine. Data, blah blah blah.

01:29:42.974 --> 01:29:44.655
<v Speaker 1>All the peers are all there.

01:29:47.775 --> 01:29:49.460
<v Speaker 1>What are we missing here?

01:29:51.860 --> 01:29:53.699
<v Speaker 1>I mean, I I'm not actually seeing

01:29:55.699 --> 01:29:57.300
<v Speaker 1>this all looks fine to me.

01:29:57.940 --> 01:29:59.140
<v Speaker 0>It does.

01:30:03.065 --> 01:30:04.825
<v Speaker 0>Wonder if that log is just

01:30:06.745 --> 01:30:07.705
<v Speaker 0>well wrong.

01:30:09.625 --> 01:30:10.905
<v Speaker 0>Let's just check.

01:30:12.745 --> 01:30:15.465
<v Speaker 0>Editor opening of our lab kubelip

01:30:15.785 --> 01:30:17.570
<v Speaker 0>pods Etsy hosts.

01:30:19.010 --> 01:30:21.330
<v Speaker 0>I'm gonna just copy this file path actually.

01:30:34.994 --> 01:30:36.275
<v Speaker 0>Why would

01:30:36.835 --> 01:30:38.835
<v Speaker 0>think why would that fail?

01:30:42.720 --> 01:30:44.239
<v Speaker 1>Is this an old error? Are we are

01:30:44.239 --> 01:30:46.640
<v Speaker 1>we doing a really long loop back five

01:30:46.640 --> 01:30:48.880
<v Speaker 1>minute wait before restarting it or something?

01:30:49.840 --> 01:30:52.719
<v Speaker 0>Know, you're it's it's definitely possible of course.

01:30:53.760 --> 01:30:55.920
<v Speaker 0>Bar log containers

01:30:55.920 --> 01:30:57.280
<v Speaker 0>tail etcd.

01:30:58.925 --> 01:31:00.044
<v Speaker 0>No. It's still

01:31:02.525 --> 01:31:04.284
<v Speaker 0>it's still morning.

01:31:05.724 --> 01:31:07.405
<v Speaker 0>But I feel like we fixed this error.

01:31:09.450 --> 01:31:10.890
<v Speaker 0>The no space one.

01:31:11.210 --> 01:31:12.570
<v Speaker 1>Yes. No. Absolutely.

01:31:21.050 --> 01:31:21.850
<v Speaker 0>Let's run.

01:31:23.085 --> 01:31:25.485
<v Speaker 0>We have access to etcd.

01:31:27.805 --> 01:31:30.525
<v Speaker 0>We were running endpoint health.

01:31:32.205 --> 01:31:34.845
<v Speaker 0>Good. We run endpoint status.

01:31:36.285 --> 01:31:38.620
<v Speaker 0>We're still getting that alarm.

01:31:38.620 --> 01:31:39.420
<v Speaker 0>Yes.

01:31:42.860 --> 01:31:45.820
<v Speaker 1>There's leader, there's learner, blah blah blah. The

01:31:45.820 --> 01:31:47.020
<v Speaker 1>db size is

01:31:48.380 --> 01:31:49.980
<v Speaker 1>tiny compared to where it needs to be.

01:31:52.195 --> 01:31:55.075
<v Speaker 0>We actually fix all those manifests

01:31:55.635 --> 01:31:56.195
<v Speaker 0>quota.

01:31:56.755 --> 01:31:58.515
<v Speaker 1>Yes. There's none in the third one.

01:32:06.160 --> 01:32:07.360
<v Speaker 0>So that is

01:32:07.680 --> 01:32:10.079
<v Speaker 0>R8M5

01:32:10.320 --> 01:32:12.159
<v Speaker 0>and this is also R8.

01:32:13.520 --> 01:32:15.680
<v Speaker 0>It's going to be I'm sure I've got

01:32:15.680 --> 01:32:17.840
<v Speaker 0>multiple windows in each thing though but

01:32:20.720 --> 01:32:22.595
<v Speaker 1>What have you done now? There is no

01:32:22.595 --> 01:32:23.955
<v Speaker 0>quarters on any of this.

01:32:54.715 --> 01:32:56.954
<v Speaker 1>I think SCD is still restarting.

01:33:00.635 --> 01:33:01.915
<v Speaker 0>It is. You're right.

01:33:05.840 --> 01:33:07.919
<v Speaker 1>Why are you restarting?

01:33:11.679 --> 01:33:12.400
<v Speaker 1>So,

01:33:15.040 --> 01:33:17.395
<v Speaker 1>I mean, yeah, it restarted two

01:33:17.395 --> 01:33:18.354
<v Speaker 1>minutes ago.

01:33:21.235 --> 01:33:23.554
<v Speaker 0>Looks like I said he's popular. Jason also

01:33:23.554 --> 01:33:25.635
<v Speaker 0>tried to do some STD carnage on his

01:33:25.635 --> 01:33:29.800
<v Speaker 0>cluster, but then do some STD carnage. STD

01:33:28.440 --> 01:33:28.920
<v Speaker 0>on his

01:33:30.520 --> 01:33:31.559
<v Speaker 0>cluster, but then

01:33:32.120 --> 01:33:33.239
<v Speaker 0>break it in the way heats up.

01:33:44.115 --> 01:33:45.554
<v Speaker 1>Starting as a member. Yep.

01:33:46.515 --> 01:33:48.675
<v Speaker 1>Added as members as expected.

01:33:50.115 --> 01:33:51.875
<v Speaker 1>Started streaming with peers.

01:33:53.795 --> 01:33:55.795
<v Speaker 1>And then we got the same error.

01:33:56.115 --> 01:33:56.835
<v Speaker 1>No space.

01:33:57.290 --> 01:33:59.130
<v Speaker 0>Should we run a compaction on them all

01:33:59.130 --> 01:34:00.410
<v Speaker 0>again? Just

01:34:03.050 --> 01:34:05.850
<v Speaker 1>Founded valid file directory a b c. That's

01:34:05.850 --> 01:34:07.450
<v Speaker 1>one that you created, isn't it? So ignore

01:34:07.450 --> 01:34:10.010
<v Speaker 1>that. You just made sure that you could

01:34:09.495 --> 01:34:11.574
<v Speaker 1>actually write to the I did. Yeah.

01:34:12.055 --> 01:34:12.775
<v Speaker 0>Mhmm.

01:34:14.615 --> 01:34:16.375
<v Speaker 1>So we're still just getting effects of the

01:34:16.375 --> 01:34:18.135
<v Speaker 1>error that we're still getting is

01:34:20.055 --> 01:34:20.775
<v Speaker 1>no space.

01:34:21.829 --> 01:34:23.670
<v Speaker 0>Even though we removed the quota bytes, we've

01:34:23.670 --> 01:34:24.869
<v Speaker 0>restarted the etcd.

01:34:35.114 --> 01:34:37.434
<v Speaker 0>Alright. Well, it's we're approaching the end of

01:34:37.434 --> 01:34:38.715
<v Speaker 0>our time, so if you wanna throw us

01:34:38.715 --> 01:34:40.155
<v Speaker 0>a hint to get us past this, that

01:34:40.155 --> 01:34:41.434
<v Speaker 0>would be appreciated.

01:34:43.275 --> 01:34:45.195
<v Speaker 0>I joined out JSON and to see if

01:34:45.195 --> 01:34:47.514
<v Speaker 0>there's anything. I wanna see the revision ID,

01:34:47.514 --> 01:34:48.875
<v Speaker 0>I wanna know if it's changed. I wanna

01:34:48.875 --> 01:34:50.530
<v Speaker 0>kinda I feel like I should check it

01:34:50.530 --> 01:34:52.449
<v Speaker 0>across the nodes. Yeah. The revisions are same.

01:34:52.449 --> 01:34:54.210
<v Speaker 0>So '70 o one The version is same.

01:34:54.210 --> 01:34:54.610
<v Speaker 0>Yeah.

01:34:55.650 --> 01:34:56.369
<v Speaker 0>Okay.

01:34:57.010 --> 01:34:58.929
<v Speaker 0>Well, it has given us a command which

01:34:58.929 --> 01:35:00.290
<v Speaker 0>I will type in.

01:35:04.435 --> 01:35:05.395
<v Speaker 0>Endpoint

01:35:06.515 --> 01:35:09.395
<v Speaker 0>and paint. That's wishful thinking. Let's do this

01:35:09.395 --> 01:35:11.715
<v Speaker 0>right. At this point, definitely.

01:35:13.475 --> 01:35:14.435
<v Speaker 0>Egrep.

01:35:14.515 --> 01:35:15.075
<v Speaker 0>Wish

01:35:16.275 --> 01:35:17.499
<v Speaker 0>I could copy this.

01:35:20.460 --> 01:35:22.139
<v Speaker 0>Oh, nine star.

01:35:28.780 --> 01:35:30.540
<v Speaker 1>The original is the same one that we

01:35:30.225 --> 01:35:30.785
<v Speaker 1>used.

01:35:31.505 --> 01:35:33.585
<v Speaker 0>Yeah. Alright. I'm gonna should it be a

01:35:33.585 --> 01:35:35.985
<v Speaker 0>compaction we're running? I'll do a defrag and

01:35:35.985 --> 01:35:37.425
<v Speaker 1>a compact again, I guess.

01:35:40.545 --> 01:35:42.785
<v Speaker 0>730154.

01:35:44.305 --> 01:35:46.910
<v Speaker 0>There's a yeah, it's already been compacted.

01:35:46.990 --> 01:35:47.870
<v Speaker 0>Jason,

01:35:48.510 --> 01:35:50.830
<v Speaker 0>did we clear the alarms? They probably don't

01:35:50.830 --> 01:35:51.870
<v Speaker 0>clear themselves.

01:35:52.750 --> 01:35:53.550
<v Speaker 0>Clear

01:35:56.510 --> 01:35:57.390
<v Speaker 0>alarms.

01:35:58.830 --> 01:35:59.795
<v Speaker 1>No. Alarms clear.

01:36:00.995 --> 01:36:02.355
<v Speaker 0>Let's see what we've got.

01:36:07.235 --> 01:36:08.995
<v Speaker 0>Alarm less than disarm.

01:36:10.435 --> 01:36:12.115
<v Speaker 0>Alarm less. Alarm disarm.

01:36:12.750 --> 01:36:13.949
<v Speaker 0>Disarm.

01:36:18.830 --> 01:36:20.190
<v Speaker 0>It's gone. Alright.

01:36:23.470 --> 01:36:24.270
<v Speaker 0>Let's

01:36:25.230 --> 01:36:26.275
<v Speaker 0>do we need to do that in all

01:36:26.275 --> 01:36:28.195
<v Speaker 0>the nodes? I hope not. Let's go back

01:36:28.195 --> 01:36:28.594
<v Speaker 1>into

01:36:30.034 --> 01:36:31.394
<v Speaker 0>our container logs

01:36:31.954 --> 01:36:34.594
<v Speaker 0>and see if it stops restarting now.

01:36:36.434 --> 01:36:38.275
<v Speaker 1>Oh, hello. It's healthy.

01:36:38.870 --> 01:36:39.989
<v Speaker 1>I think it's healthy.

01:36:41.990 --> 01:36:43.510
<v Speaker 1>Clear alarms people,

01:36:43.910 --> 01:36:44.630
<v Speaker 1>apparently.

01:36:45.590 --> 01:36:47.110
<v Speaker 1>That's my tip of the day.

01:36:48.870 --> 01:36:51.030
<v Speaker 0>Get pods. Great. Are they all running?

01:36:53.465 --> 01:36:54.584
<v Speaker 0>There we go.

01:36:54.905 --> 01:36:55.624
<v Speaker 0>Almost.

01:36:56.744 --> 01:36:57.224
<v Speaker 0>So

01:37:01.065 --> 01:37:02.184
<v Speaker 0>I think we may have to clear the

01:37:02.184 --> 01:37:03.704
<v Speaker 0>alarm on the other two notes. It doesn't

01:37:03.704 --> 01:37:05.465
<v Speaker 0>look like that is automatic.

01:37:05.465 --> 01:37:07.880
<v Speaker 0>I know Jason does say that it's cluster

01:37:07.880 --> 01:37:10.920
<v Speaker 0>wide. Maybe I'm just being very impatient, but

01:37:13.080 --> 01:37:14.840
<v Speaker 0>we can check. We've got them all open.

01:37:14.840 --> 01:37:15.320
<v Speaker 0>Right? So

01:37:19.385 --> 01:37:21.704
<v Speaker 0>does I not download it on this machine?

01:37:28.425 --> 01:37:29.465
<v Speaker 0>I'm

01:37:29.465 --> 01:37:31.465
<v Speaker 0>sure I've got it somewhere on all machines.

01:37:33.619 --> 01:37:35.939
<v Speaker 0>I'm going to the wrong directory. That's why.

01:37:38.579 --> 01:37:40.419
<v Speaker 0>There we go. Okay. So

01:37:46.645 --> 01:37:47.844
<v Speaker 1>Are you in CD?

01:37:48.485 --> 01:37:49.364
<v Speaker 0>I know.

01:37:49.685 --> 01:37:50.485
<v Speaker 0>It's

01:37:50.885 --> 01:37:52.405
<v Speaker 0>time being particularly

01:37:52.645 --> 01:37:53.925
<v Speaker 0>wonderful today

01:37:55.925 --> 01:37:57.844
<v Speaker 0>and I won't have all those exports will

01:37:57.844 --> 01:37:58.405
<v Speaker 0>I?

01:37:59.685 --> 01:38:00.564
<v Speaker 0>Cheat sheet.

01:38:01.205 --> 01:38:02.940
<v Speaker 0>This is now my favorite is page in

01:38:02.940 --> 01:38:03.579
<v Speaker 0>the world.

01:38:07.420 --> 01:38:09.900
<v Speaker 0>What happened there? They're all running now. Oh,

01:38:09.900 --> 01:38:11.579
<v Speaker 0>are they? Just to make it. Yes.

01:38:12.140 --> 01:38:13.900
<v Speaker 0>Alright. This took some time.

01:38:15.100 --> 01:38:16.295
<v Speaker 1>Oh, my goodness.

01:38:17.575 --> 01:38:18.215
<v Speaker 0>That

01:38:19.655 --> 01:38:20.455
<v Speaker 0>was fun.

01:38:21.015 --> 01:38:23.895
<v Speaker 1>I well, your definition of fun is mine.

01:38:25.015 --> 01:38:25.895
<v Speaker 1>I mean,

01:38:26.775 --> 01:38:27.815
<v Speaker 1>databases.

01:38:29.575 --> 01:38:31.170
<v Speaker 1>Well, we need to check that the application's

01:38:31.170 --> 01:38:31.810
<v Speaker 1>working.

01:38:38.770 --> 01:38:40.530
<v Speaker 0>You mean the WordPress app?

01:38:40.690 --> 01:38:41.090
<v Speaker 1>Yes.

01:38:45.025 --> 01:38:46.945
<v Speaker 0>I actually don't think that ever broke.

01:38:48.065 --> 01:38:49.665
<v Speaker 0>I think it was quite happy just working

01:38:49.665 --> 01:38:50.864
<v Speaker 0>away in the background.

01:38:52.865 --> 01:38:54.465
<v Speaker 0>Maybe we never tested it.

01:39:00.920 --> 01:39:01.639
<v Speaker 1>Oh,

01:39:02.360 --> 01:39:03.239
<v Speaker 1>I mean

01:39:10.600 --> 01:39:11.719
<v Speaker 0>let's restart it.

01:39:18.215 --> 01:39:20.135
<v Speaker 1>There's his read me which said that they

01:39:20.135 --> 01:39:22.454
<v Speaker 1>were trying to do curls internally.

01:39:23.495 --> 01:39:25.575
<v Speaker 1>I wonder if he's broken internal DNS or

01:39:25.575 --> 01:39:25.815
<v Speaker 1>something.

01:39:28.150 --> 01:39:30.230
<v Speaker 0>Alright. Let's see if this pod restart gets

01:39:30.230 --> 01:39:31.909
<v Speaker 0>it online and running.

01:39:32.150 --> 01:39:34.070
<v Speaker 0>We can jump and say that we could

01:39:34.070 --> 01:39:36.230
<v Speaker 0>test quickly pod networking

01:39:36.230 --> 01:39:37.189
<v Speaker 0>quickly.

01:39:38.150 --> 01:39:39.989
<v Speaker 1>Can tell you what's missing here from doing

01:39:39.989 --> 01:39:41.190
<v Speaker 1>a quick get pods.

01:39:45.155 --> 01:39:46.675
<v Speaker 1>It's always DNS.

01:39:53.555 --> 01:39:55.074
<v Speaker 1>Call DNS isn't running.

01:39:55.875 --> 01:39:58.510
<v Speaker 1>Do a get pods minus capital a and

01:39:58.510 --> 01:40:01.390
<v Speaker 1>grep for DNS? Okay. So WordPress to put

01:40:01.390 --> 01:40:03.630
<v Speaker 0>forward work. It just couldn't yeah. Okay. So

01:40:03.630 --> 01:40:05.310
<v Speaker 0>there's no good service discovery.

01:40:07.070 --> 01:40:08.990
<v Speaker 0>Sorry. I'll use this. I shall shared.

01:40:11.675 --> 01:40:12.474
<v Speaker 0>So

01:40:12.795 --> 01:40:14.474
<v Speaker 0>namespace get

01:40:14.554 --> 01:40:15.195
<v Speaker 0>pods.

01:40:24.630 --> 01:40:27.349
<v Speaker 0>Windows. I need to contain myself next time.

01:40:27.590 --> 01:40:30.309
<v Speaker 0>Cooper. I can't even spell Cooper. We

01:40:35.429 --> 01:40:37.830
<v Speaker 0>have no cube

01:40:37.175 --> 01:40:38.054
<v Speaker 0>DNS.

01:40:38.295 --> 01:40:40.455
<v Speaker 0>Now how harsh has he been? Do we

01:40:40.455 --> 01:40:41.094
<v Speaker 0>have

01:40:43.975 --> 01:40:45.735
<v Speaker 1>They also the API server and things like

01:40:45.735 --> 01:40:48.855
<v Speaker 1>that are missing. Alright. Like there's there's

01:40:48.935 --> 01:40:50.535
<v Speaker 0>a bit of a problem there

01:40:53.090 --> 01:40:55.090
<v Speaker 0>Two unready pods.

01:40:57.650 --> 01:40:59.490
<v Speaker 0>Let's describe our deployment.

01:41:10.005 --> 01:41:12.245
<v Speaker 0>I don't see a scheduling adder, which is

01:41:12.245 --> 01:41:14.645
<v Speaker 0>what I was kind of expecting. Is it

01:41:17.205 --> 01:41:19.685
<v Speaker 1>We're probably

01:41:21.470 --> 01:41:24.590
<v Speaker 1>replica failure, replica create, minimum replicas

01:41:24.590 --> 01:41:25.470
<v Speaker 1>blah blah blah.

01:41:31.070 --> 01:41:32.990
<v Speaker 0>Why have we not got a scheduling error

01:41:32.990 --> 01:41:33.310
<v Speaker 0>here?

01:41:34.505 --> 01:41:36.425
<v Speaker 1>Mean, that's because all events are missing.

01:41:39.304 --> 01:41:40.824
<v Speaker 1>They would have been in the database.

01:41:42.425 --> 01:41:44.105
<v Speaker 0>Oh, we don't have an API server or

01:41:44.105 --> 01:41:44.744
<v Speaker 0>scheduler.

01:41:46.520 --> 01:41:48.840
<v Speaker 0>We don't we don't have a control plane.

01:41:49.000 --> 01:41:50.840
<v Speaker 1>Yes. I was wondering about that.

01:41:52.199 --> 01:41:53.960
<v Speaker 1>And I wonder if you've done something funny

01:41:53.960 --> 01:41:55.480
<v Speaker 1>with the manifest so that they're in a

01:41:55.480 --> 01:41:56.600
<v Speaker 1>namespace that doesn't exist.

01:41:59.715 --> 01:42:01.235
<v Speaker 0>Alright. I'll take a look

01:42:02.115 --> 01:42:04.915
<v Speaker 0>at cube API server. We've got a pod.

01:42:06.035 --> 01:42:07.875
<v Speaker 0>Namespace cube system.

01:42:09.235 --> 01:42:11.155
<v Speaker 1>Yeah. They're all that's all fine.

01:42:11.795 --> 01:42:13.750
<v Speaker 0>We have an API server. Maybe it's just

01:42:13.750 --> 01:42:15.350
<v Speaker 0>not come online yet. Should we just reboot

01:42:15.350 --> 01:42:15.910
<v Speaker 0>them?

01:42:17.990 --> 01:42:19.750
<v Speaker 0>I mean, taking a CD off is normally

01:42:19.750 --> 01:42:22.310
<v Speaker 0>quite catastrophic. This could just be a side

01:42:22.310 --> 01:42:23.110
<v Speaker 0>effect. Side effect.

01:42:27.385 --> 01:42:29.945
<v Speaker 0>Yeah. I'll just kill dash name.

01:42:30.665 --> 01:42:32.505
<v Speaker 0>I'm not gonna get my old complete. Copy

01:42:32.505 --> 01:42:32.985
<v Speaker 0>the ped.

01:42:45.200 --> 01:42:46.400
<v Speaker 0>Give it a second.

01:42:55.440 --> 01:42:56.925
<v Speaker 0>Alright. Okay. It's back.

01:42:58.445 --> 01:43:00.605
<v Speaker 0>Does that now show up?

01:43:04.525 --> 01:43:04.925
<v Speaker 0>No.

01:43:11.199 --> 01:43:13.840
<v Speaker 0>So our API server logs are what we

01:43:13.840 --> 01:43:14.320
<v Speaker 0>need. Right?

01:43:24.405 --> 01:43:25.525
<v Speaker 1>So why is

01:43:25.844 --> 01:43:26.724
<v Speaker 1>not

01:43:26.725 --> 01:43:27.604
<v Speaker 1>coming up?

01:43:28.645 --> 01:43:29.764
<v Speaker 0>Because there's no scheduler.

01:43:37.300 --> 01:43:38.500
<v Speaker 0>Let's cat

01:43:39.540 --> 01:43:39.860
<v Speaker 0>this.

01:44:07.540 --> 01:44:08.900
<v Speaker 0>Do you see an error?

01:44:14.100 --> 01:44:14.739
<v Speaker 1>I

01:44:15.139 --> 01:44:15.699
<v Speaker 1>am.

01:44:17.715 --> 01:44:19.554
<v Speaker 0>I know I'm scrolling fast.

01:44:19.715 --> 01:44:21.474
<v Speaker 0>Yeah. If you pop out here

01:44:23.395 --> 01:44:24.835
<v Speaker 1>look at the scheduler logs.

01:44:31.650 --> 01:44:32.690
<v Speaker 0>Scheduler.

01:44:47.175 --> 01:44:48.695
<v Speaker 0>I can't reach

01:44:49.815 --> 01:44:51.094
<v Speaker 0>API server.

01:44:58.775 --> 01:45:00.360
<v Speaker 1>So the scheduler can't reach the

01:45:05.400 --> 01:45:07.640
<v Speaker 1>what have you done now? Honestly, this is

01:45:07.640 --> 01:45:09.000
<v Speaker 0>this is a good one.

01:45:15.160 --> 01:45:17.405
<v Speaker 0>It's it's getting connection refused on port

01:45:18.925 --> 01:45:19.965
<v Speaker 0>663

01:45:19.965 --> 01:45:21.644
<v Speaker 0>on 14540.

01:45:21.724 --> 01:45:23.564
<v Speaker 0>Let's check the IP address.

01:45:24.764 --> 01:45:30.429
<v Speaker 0>14568143.

01:45:30.430 --> 01:45:32.590
<v Speaker 0>Alright. So has the port changed?

01:45:43.390 --> 01:45:45.125
<v Speaker 0>That looks alright to me.

01:45:49.365 --> 01:45:51.605
<v Speaker 0>Secure port 683.

01:45:53.125 --> 01:45:54.725
<v Speaker 0>I'm pretty sure we should remove that in

01:45:54.725 --> 01:45:56.405
<v Speaker 0>secure port. That's not even a thing anymore.

01:45:56.405 --> 01:45:56.565
<v Speaker 0>Right?

01:46:00.869 --> 01:46:02.309
<v Speaker 0>Has the style changed?

01:46:03.829 --> 01:46:04.469
<v Speaker 0>Yes.

01:46:05.269 --> 01:46:06.389
<v Speaker 1>Right. Yeah.

01:46:06.789 --> 01:46:08.469
<v Speaker 0>I don't think insecure that's not been a

01:46:08.469 --> 01:46:09.110
<v Speaker 0>thing for a while.

01:46:15.125 --> 01:46:16.805
<v Speaker 0>I'm just gonna look and see if I

01:46:16.805 --> 01:46:17.844
<v Speaker 0>see anything.

01:46:18.805 --> 01:46:20.405
<v Speaker 0>The line of this probe be going over

01:46:20.405 --> 01:46:22.725
<v Speaker 0>the IP or should it be used in

01:46:22.725 --> 01:46:23.844
<v Speaker 0>the pod IP?

01:46:26.165 --> 01:46:28.230
<v Speaker 0>Like 127001.

01:46:29.670 --> 01:46:31.270
<v Speaker 0>I mean, we haven't checked to see if

01:46:31.270 --> 01:46:33.190
<v Speaker 0>this is restarting or if it's

01:46:34.390 --> 01:46:35.510
<v Speaker 0>running but not working.

01:46:46.105 --> 01:46:48.745
<v Speaker 0>Time out some immediate seconds like okay. Yeah.

01:46:48.745 --> 01:46:50.184
<v Speaker 0>They don't worry me.

01:46:52.265 --> 01:46:53.225
<v Speaker 0>This is stressful.

01:46:57.410 --> 01:46:59.170
<v Speaker 1>Look. I can't see any gray hair underneath

01:46:59.170 --> 01:47:01.969
<v Speaker 1>this packet hat, so I'm good to go.

01:47:04.690 --> 01:47:05.969
<v Speaker 0>Alright. Let's

01:47:08.610 --> 01:47:10.130
<v Speaker 0>API server's not there anymore.

01:47:13.925 --> 01:47:15.605
<v Speaker 1>If you edited the file then it'll be

01:47:15.605 --> 01:47:16.405
<v Speaker 1>restarted.

01:47:16.485 --> 01:47:18.085
<v Speaker 0>Ah. Yeah. You're right.

01:47:20.405 --> 01:47:23.205
<v Speaker 0>Okay. So this is PED7417.

01:47:24.420 --> 01:47:25.940
<v Speaker 0>Is that gonna change?

01:47:28.100 --> 01:47:29.060
<v Speaker 1>Mean, I can

01:47:29.540 --> 01:47:31.460
<v Speaker 1>kill local host 6443

01:47:31.460 --> 01:47:32.980
<v Speaker 1>is fine so I can loop back to

01:47:32.980 --> 01:47:34.580
<v Speaker 1>the API server.

01:47:39.855 --> 01:47:41.295
<v Speaker 0>And secure. Yeah.

01:47:42.735 --> 01:47:43.614
<v Speaker 0>That's good.

01:47:48.975 --> 01:47:51.215
<v Speaker 1>This So there's nothing This must be networking.

01:47:56.880 --> 01:47:57.920
<v Speaker 1>But what they what they

01:47:59.199 --> 01:48:01.599
<v Speaker 0>So how did API servers elect the leader?

01:48:01.679 --> 01:48:01.840
<v Speaker 0>Because

01:48:08.005 --> 01:48:09.844
<v Speaker 1>To do it through the to do it

01:48:09.844 --> 01:48:10.405
<v Speaker 1>through the.

01:48:16.485 --> 01:48:17.605
<v Speaker 0>Sailorium's okay.

01:48:22.820 --> 01:48:24.500
<v Speaker 0>Are you okay for time? Because I know

01:48:24.500 --> 01:48:25.780
<v Speaker 0>we've went a bit over.

01:48:26.500 --> 01:48:28.100
<v Speaker 0>Yeah. I'm okay. Okay.

01:48:31.605 --> 01:48:33.285
<v Speaker 0>Jason is telling us to use the Hubble

01:48:33.285 --> 01:48:34.085
<v Speaker 0>UI.

01:48:34.805 --> 01:48:36.645
<v Speaker 0>We do have it available.

01:48:36.805 --> 01:48:38.005
<v Speaker 0>I guess it wouldn't hurt to take a

01:48:38.005 --> 01:48:38.885
<v Speaker 0>look with it.

01:48:41.445 --> 01:48:42.165
<v Speaker 1>Okay.

01:48:43.285 --> 01:48:45.365
<v Speaker 0>It's a good idea. Hubble is a really

01:48:45.365 --> 01:48:46.910
<v Speaker 0>cool product as part of the sub m

01:48:46.910 --> 01:48:47.710
<v Speaker 0>c n a.

01:48:50.590 --> 01:48:52.350
<v Speaker 0>That will show us if there's any

01:48:52.590 --> 01:48:54.030
<v Speaker 0>network

01:48:54.030 --> 01:48:56.350
<v Speaker 0>policies or traffic being blocked, etcetera.

01:48:59.515 --> 01:49:01.275
<v Speaker 0>I don't know what port it runs on.

01:49:01.275 --> 01:49:02.715
<v Speaker 0>And now I feel like I'm

01:49:03.195 --> 01:49:05.435
<v Speaker 0>I need to change my command from here.

01:49:08.315 --> 01:49:09.115
<v Speaker 0>Not configured.

01:49:24.440 --> 01:49:26.120
<v Speaker 0>Getting myself in a pickle.

01:49:26.520 --> 01:49:27.160
<v Speaker 0>Describe

01:49:28.255 --> 01:49:29.135
<v Speaker 0>pod

01:49:29.535 --> 01:49:30.335
<v Speaker 0>UI.

01:49:30.335 --> 01:49:31.455
<v Speaker 0>Give me a port

01:49:32.495 --> 01:49:34.735
<v Speaker 0>80. I really should have just took a

01:49:34.735 --> 01:49:35.615
<v Speaker 0>shot on that.

01:49:37.615 --> 01:49:38.335
<v Speaker 0>Alright.

01:49:39.135 --> 01:49:40.655
<v Speaker 0>So if we browse to this IP address

01:49:40.655 --> 01:49:41.775
<v Speaker 0>of 80 80.

01:49:47.460 --> 01:49:48.739
<v Speaker 0>Nothing's gonna happen.

01:49:49.940 --> 01:49:51.460
<v Speaker 0>Alright.

01:49:53.060 --> 01:49:54.900
<v Speaker 0>Can't be bothered fighting with that. Okay.

01:49:55.540 --> 01:49:57.940
<v Speaker 0>Well, it says think

01:49:57.385 --> 01:49:59.304
<v Speaker 0>simple Kubernetes resources.

01:49:59.465 --> 01:50:01.785
<v Speaker 0>Let's just stick to what we know.

01:50:04.585 --> 01:50:05.865
<v Speaker 0>Are there any network policies?

01:50:11.800 --> 01:50:12.440
<v Speaker 0>Yes.

01:50:16.040 --> 01:50:17.640
<v Speaker 0>Scrape NetPol

01:50:17.640 --> 01:50:18.760
<v Speaker 0>MVP one.

01:50:26.635 --> 01:50:27.915
<v Speaker 0>That just seems to be in the live

01:50:27.915 --> 01:50:29.835
<v Speaker 0>everything, doesn't it? Yeah.

01:50:33.515 --> 01:50:36.795
<v Speaker 0>Hello, created yesterday at 6PM. So I'm gonna

01:50:36.450 --> 01:50:37.410
<v Speaker 0>delete it.

01:50:48.210 --> 01:50:50.050
<v Speaker 1>I'm gonna suppose to allow any egress traffic

01:50:50.050 --> 01:50:52.824
<v Speaker 1>not with that block any

01:50:52.985 --> 01:50:53.705
<v Speaker 1>external.

01:51:03.860 --> 01:51:05.619
<v Speaker 0>Actually, this was a block all.

01:51:06.500 --> 01:51:06.900
<v Speaker 0>Yep.

01:51:21.705 --> 01:51:23.624
<v Speaker 0>Well, you've just given a sense. It's still

01:51:23.625 --> 01:51:26.985
<v Speaker 0>feeling pretty. What hates pods? Right? Why would

01:51:26.985 --> 01:51:28.824
<v Speaker 0>something not show up on get pods?

01:51:30.985 --> 01:51:34.025
<v Speaker 0>Let's take a look at the

01:51:36.410 --> 01:51:36.970
<v Speaker 0>Yeah.

01:51:39.610 --> 01:51:41.210
<v Speaker 1>I'm starting to draw a blank here.

01:51:42.090 --> 01:51:43.610
<v Speaker 0>Right. I only have a few minutes and

01:51:43.610 --> 01:51:44.810
<v Speaker 0>then I I really need to leave.

01:51:46.515 --> 01:51:48.594
<v Speaker 0>So we'll we'll go for three more minutes.

01:51:48.594 --> 01:51:49.475
<v Speaker 0>If we don't get it, we don't get

01:51:49.475 --> 01:51:50.915
<v Speaker 0>it. That's fine. We will get the post

01:51:50.915 --> 01:51:52.515
<v Speaker 0>mortem into the read me while these will

01:51:52.515 --> 01:51:53.795
<v Speaker 0>add all of his notes to tell us

01:51:53.795 --> 01:51:55.235
<v Speaker 0>what he did. We can all learn from

01:51:55.235 --> 01:51:56.835
<v Speaker 0>that. I can imagine his notes are gonna

01:51:56.835 --> 01:51:58.835
<v Speaker 1>be a book at this. I

01:51:59.795 --> 01:52:01.719
<v Speaker 1>must have spent a week doing this.

01:52:03.320 --> 01:52:04.760
<v Speaker 0>Better run a git all, see if I

01:52:04.760 --> 01:52:06.039
<v Speaker 0>can see anything.

01:52:09.400 --> 01:52:10.679
<v Speaker 0>I don't wanna give up.

01:52:27.820 --> 01:52:31.100
<v Speaker 0>Alright. He said check pod security policies.

01:52:31.820 --> 01:52:32.620
<v Speaker 0>So

01:52:37.740 --> 01:52:39.625
<v Speaker 0>the speaker will be met They'll be the

01:52:39.625 --> 01:52:42.105
<v Speaker 0>Rooker's Rook. That no privilege.

01:52:43.785 --> 01:52:45.305
<v Speaker 0>I'm gonna describe

01:52:56.560 --> 01:52:57.760
<v Speaker 0>What's this thing?

01:52:58.320 --> 01:53:00.800
<v Speaker 0>Allow privilege escalation true. Run is only run

01:53:00.800 --> 01:53:01.760
<v Speaker 0>is only running.

01:53:02.880 --> 01:53:04.320
<v Speaker 0>I don't think that's

01:53:05.360 --> 01:53:06.560
<v Speaker 0>am I misreading that?

01:53:15.335 --> 01:53:17.415
<v Speaker 0>It's called null privilege but it doesn't appear

01:53:17.415 --> 01:53:18.775
<v Speaker 0>to be blocking anything.

01:53:25.040 --> 01:53:26.320
<v Speaker 0>Let's just delete it.

01:53:27.600 --> 01:53:29.760
<v Speaker 0>Well, it's there you go. He's dropping some

01:53:29.760 --> 01:53:31.840
<v Speaker 0>knowledge on us now. No privilege hates static

01:53:31.840 --> 01:53:32.640
<v Speaker 0>pods.

01:53:33.360 --> 01:53:34.640
<v Speaker 0>I had no

01:53:34.800 --> 01:53:35.280
<v Speaker 0>idea.

01:53:39.225 --> 01:53:41.545
<v Speaker 1>I mean, I've hidden static pods by putting

01:53:42.185 --> 01:53:44.185
<v Speaker 1>if you put a different namespace that doesn't

01:53:44.185 --> 01:53:45.864
<v Speaker 1>exist in the static pod,

01:53:46.265 --> 01:53:49.065
<v Speaker 1>cubes kubelet will start it, but the API

01:53:49.065 --> 01:53:50.425
<v Speaker 1>server doesn't know what to do it do

01:53:50.425 --> 01:53:50.745
<v Speaker 1>with it.

01:53:54.220 --> 01:53:56.860
<v Speaker 1>Okay. So with that gone, we should see

01:53:56.860 --> 01:53:58.540
<v Speaker 1>things like the API server.

01:53:58.940 --> 01:54:00.460
<v Speaker 0>Yeah. I'm wondering if it's only the wee

01:54:00.460 --> 01:54:01.820
<v Speaker 0>cheeky push, though.

01:54:08.205 --> 01:54:09.324
<v Speaker 1>I shouldn't think so.

01:54:10.525 --> 01:54:12.685
<v Speaker 0>I've given up just assuming I know anything

01:54:12.685 --> 01:54:13.805
<v Speaker 0>anymore so.

01:54:17.485 --> 01:54:19.405
<v Speaker 0>Alright. What machine are we on? That is

01:54:19.405 --> 01:54:21.139
<v Speaker 0>m five r eight

01:54:23.060 --> 01:54:23.939
<v Speaker 0>and

01:54:24.179 --> 01:54:26.179
<v Speaker 0>I'll give this last one a push because

01:54:26.179 --> 01:54:27.380
<v Speaker 0>we're wrapping up.

01:54:28.340 --> 01:54:29.940
<v Speaker 0>See if we even have a working API

01:54:29.940 --> 01:54:32.435
<v Speaker 0>server yet. It's so weird I'm creating the

01:54:32.435 --> 01:54:33.875
<v Speaker 0>API server and I can't see it on

01:54:33.875 --> 01:54:34.835
<v Speaker 0>a pod list.

01:54:36.195 --> 01:54:38.035
<v Speaker 1>It is quite confusing, isn't it? Yep. Still

01:54:38.035 --> 01:54:38.835
<v Speaker 1>cast there.

01:54:39.235 --> 01:54:41.075
<v Speaker 0>He says this one last issue something to

01:54:41.075 --> 01:54:43.715
<v Speaker 0>do with the kernel sentence for forward and

01:54:44.675 --> 01:54:47.420
<v Speaker 0>I mean, I definitely have my depth there.

01:54:50.460 --> 01:54:52.300
<v Speaker 1>So that's ETC

01:54:53.580 --> 01:54:55.019
<v Speaker 1>CTL. Alright.

01:54:55.739 --> 01:54:56.860
<v Speaker 0>What have we got?

01:54:57.500 --> 01:54:58.860
<v Speaker 1>What's the date on these?

01:55:03.465 --> 01:55:05.785
<v Speaker 0>There's some Selium configurations here.

01:55:15.240 --> 01:55:17.400
<v Speaker 1>So he's disabled something,

01:55:17.400 --> 01:55:20.920
<v Speaker 1>I guess, in /etcsysCTL.com.

01:55:21.960 --> 01:55:23.560
<v Speaker 1>Always done it manually, I guess.

01:55:37.925 --> 01:55:39.580
<v Speaker 0>Yeah. I think it's been done manually. Those

01:55:39.580 --> 01:55:41.020
<v Speaker 0>fails look fine to me.

01:55:47.820 --> 01:55:49.500
<v Speaker 1>I'm gonna need to lie down after this.

01:55:51.900 --> 01:55:53.980
<v Speaker 1>Man alive. I've never been so stressed in

01:55:53.980 --> 01:55:55.434
<v Speaker 1>my life. This is insane.

01:55:59.435 --> 01:56:01.515
<v Speaker 0>I'm gonna concede. I'm sorry. I don't think

01:56:01.515 --> 01:56:02.715
<v Speaker 0>we're gonna get it, Ari.

01:56:02.955 --> 01:56:04.555
<v Speaker 1>We're It doesn't it certainly doesn't look like

01:56:04.555 --> 01:56:05.114
<v Speaker 1>it.

01:56:05.515 --> 01:56:08.235
<v Speaker 1>The the API server is still hidden

01:56:09.200 --> 01:56:11.920
<v Speaker 1>inside the API which is kind of amusing.

01:56:12.880 --> 01:56:13.920
<v Speaker 0>Alright.

01:56:16.320 --> 01:56:18.560
<v Speaker 0>So let's let's let's call it. Like, we

01:56:18.960 --> 01:56:21.120
<v Speaker 0>we could fix valid cluster.

01:56:23.055 --> 01:56:24.895
<v Speaker 0>I'm looking forward to reading what you actually

01:56:24.895 --> 01:56:27.935
<v Speaker 0>done and learning. I love that trick with

01:56:27.935 --> 01:56:29.614
<v Speaker 0>the no privilege. I mean even looking at

01:56:29.614 --> 01:56:31.695
<v Speaker 0>that podcast security policy, I was like it's

01:56:31.695 --> 01:56:33.055
<v Speaker 0>not doing anything.

01:56:33.990 --> 01:56:35.750
<v Speaker 0>Definitely need to research that more and understand

01:56:35.750 --> 01:56:36.630
<v Speaker 0>why

01:56:36.630 --> 01:56:38.790
<v Speaker 0>that hates a static pod benefit, have static

01:56:38.790 --> 01:56:39.990
<v Speaker 0>pods like I just

01:56:40.470 --> 01:56:42.390
<v Speaker 0>right now I don't understand that at all.

01:56:43.190 --> 01:56:43.910
<v Speaker 1>Alright,

01:56:45.350 --> 01:56:48.070
<v Speaker 0>thank you Jason, thank you for lead, those

01:56:48.070 --> 01:56:51.574
<v Speaker 0>were both extremely tough. Thank you. That

01:56:53.495 --> 01:56:54.054
<v Speaker 1>was

01:56:54.855 --> 01:56:57.095
<v Speaker 1>was brutal. I I will take at least

01:56:57.095 --> 01:56:58.855
<v Speaker 1>we got one cluster up and we got

01:56:58.855 --> 01:57:00.535
<v Speaker 1>kind of partially towards

01:57:00.870 --> 01:57:03.350
<v Speaker 1>this one. Yeah. But that was that was

01:57:03.350 --> 01:57:04.710
<v Speaker 1>that was pretty brutal.

01:57:05.830 --> 01:57:06.710
<v Speaker 1>Thank you. Yeah.

01:57:07.190 --> 01:57:08.390
<v Speaker 0>Alright. Dan,

01:57:08.870 --> 01:57:11.670
<v Speaker 0>thank you for working through that with me.

01:57:12.230 --> 01:57:14.310
<v Speaker 0>It is stressful. It is fun.

01:57:14.550 --> 01:57:16.950
<v Speaker 0>I'm learning stuff. I hope others are learning

01:57:16.695 --> 01:57:19.014
<v Speaker 0>stuff too. Thank you for everyone that joined

01:57:19.014 --> 01:57:21.735
<v Speaker 0>us for that massive two hour session.

01:57:23.415 --> 01:57:25.255
<v Speaker 0>Alright. I'm gonna get for a long time.

01:57:25.255 --> 01:57:27.735
<v Speaker 0>Yeah. Let's take a nice break, well deserved.

01:57:27.735 --> 01:57:29.255
<v Speaker 0>Alright. I'll speak to you soon. Everyone else,

01:57:29.255 --> 01:57:30.820
<v Speaker 0>thanks a lot. I'll see you soon. Bye,

01:57:30.820 --> 01:57:31.060
<v Speaker 1>everyone.
