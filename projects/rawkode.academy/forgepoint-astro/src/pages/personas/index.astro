---
import AppLayout from "../../components/AppLayout.astro";
import { getCollection } from "astro:content";

const personas = await getCollection("personas");
---

<AppLayout title="Personas - ForgePoint">
	<style>
		.personas-list {
			max-width: 1200px;
			margin: 0 auto;
		}

		.page-header {
			margin-bottom: 32px;
		}

		.page-title {
			font-size: 24px;
			font-weight: 600;
			color: #fff;
			margin-bottom: 8px;
		}

		.page-subtitle {
			font-size: 14px;
			color: #8b8b8d;
		}

		.personas-grid {
			display: grid;
			grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
			gap: 16px;
		}

		.persona-card {
			display: block;
			background-color: #0e0e10;
			border: 1px solid #1f1f23;
			border-radius: 8px;
			padding: 20px;
			text-decoration: none;
			transition: all 0.1s ease;
		}

		.persona-card:hover {
			background-color: #1a1a1d;
			border-color: #2a2a2d;
			transform: translateY(-2px);
		}

		.persona-icon {
			width: 48px;
			height: 48px;
			background: linear-gradient(135deg, #5e6ad2 0%, #8b6ce6 100%);
			border-radius: 12px;
			display: flex;
			align-items: center;
			justify-content: center;
			margin-bottom: 16px;
			color: #fff;
			font-size: 24px;
			font-weight: 600;
		}

		.persona-title {
			font-size: 18px;
			font-weight: 600;
			color: #e1e1e3;
			margin-bottom: 8px;
		}

		.persona-description {
			font-size: 13px;
			color: #8b8b8d;
			line-height: 1.6;
			margin-bottom: 16px;
		}

		.persona-details {
			display: flex;
			flex-direction: column;
			gap: 8px;
			margin-bottom: 16px;
		}

		.detail-item {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 12px;
		}

		.detail-label {
			color: #6b6b6d;
			font-weight: 500;
			min-width: 80px;
		}

		.detail-value {
			color: #a8a8a9;
		}

		.goals-section {
			background-color: #1a1a1d;
			border: 1px solid #2a2a2d;
			border-radius: 6px;
			padding: 12px;
		}

		.goals-label {
			font-size: 11px;
			font-weight: 600;
			color: #5e6ad2;
			text-transform: uppercase;
			letter-spacing: 0.05em;
			margin-bottom: 8px;
		}

		.goals-list {
			list-style: none;
			padding: 0;
			margin: 0;
		}

		.goal-item {
			font-size: 12px;
			color: #e1e1e3;
			padding: 4px 0;
			padding-left: 16px;
			position: relative;
		}

		.goal-item::before {
			content: "â€¢";
			position: absolute;
			left: 0;
			color: #5e6ad2;
		}

		.empty-state {
			text-align: center;
			padding: 48px;
			color: #6b6b6d;
		}

		.empty-state-icon {
			width: 48px;
			height: 48px;
			margin: 0 auto 16px;
			opacity: 0.5;
		}

		.empty-state-text {
			font-size: 14px;
			margin-bottom: 8px;
		}
	</style>

	<div class="personas-list">
		<div class="page-header">
			<h1 class="page-title">Personas</h1>
			<p class="page-subtitle">User personas that represent your target audience</p>
		</div>
		
		<div class="personas-grid">
			{personas.map((persona) => (
				<a href={`/personas/${persona.slug}`} class="persona-card">
					<div class="persona-icon">
						{persona.data.title.charAt(0).toUpperCase()}
					</div>
					
					<h2 class="persona-title">{persona.data.title}</h2>
					
					<p class="persona-description">{persona.data.description}</p>
					
					<div class="persona-details">
						{persona.data.role && (
							<div class="detail-item">
								<span class="detail-label">Role:</span>
								<span class="detail-value">{persona.data.role}</span>
							</div>
						)}
						
						{persona.data.experience && (
							<div class="detail-item">
								<span class="detail-label">Experience:</span>
								<span class="detail-value">{persona.data.experience}</span>
							</div>
						)}
					</div>
					
					<div class="goals-section">
						<div class="goals-label">Top Goals</div>
						<ul class="goals-list">
							{persona.data.goals.slice(0, 3).map((goal) => (
								<li class="goal-item">{goal}</li>
							))}
						</ul>
					</div>
				</a>
			))}
		</div>
		
		{personas.length === 0 && (
			<div class="empty-state">
				<svg class="empty-state-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
					<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
					<circle cx="12" cy="7" r="4"></circle>
				</svg>
				<p class="empty-state-text">No personas yet</p>
			</div>
		)}
	</div>
</AppLayout>