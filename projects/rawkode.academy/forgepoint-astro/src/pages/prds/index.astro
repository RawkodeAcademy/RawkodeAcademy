---
import { getCollection } from "astro:content";
import Layout from "../../layouts/BaseLayout.astro";

const prds = await getCollection("prds");

const statusColors = {
	proposed: "bg-blue-100 text-blue-800",
	accepted: "bg-green-100 text-green-800",
	completed: "bg-purple-100 text-purple-800",
	deprecated: "bg-gray-100 text-gray-800",
};
---

<Layout title="Product Requirement Documents">
	<main class="container mx-auto px-4 py-8">
		<h1 class="text-4xl font-bold mb-8">Product Requirement Documents (PRDs)</h1>
		
		<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
			{prds.map((prd) => (
				<article class="border border-gray-200 rounded-lg p-6 hover:shadow-lg transition-shadow">
					<div class="flex items-start justify-between mb-4">
						<h2 class="text-2xl font-semibold">
							<a href={`/prds/${prd.slug}`} class="hover:text-blue-600 transition-colors">
								{prd.data.title}
							</a>
						</h2>
						<span class={`px-2 py-1 rounded text-xs font-medium ${statusColors[prd.data.status]}`}>
							{prd.data.status.toUpperCase()}
						</span>
					</div>
					
					<p class="text-gray-600 mb-4">{prd.data.description}</p>
					
					<div class="space-y-3 mb-4">
						<div class="bg-gray-50 p-3 rounded">
							<h3 class="text-sm font-semibold text-gray-700 mb-1">Problem</h3>
							<p class="text-sm text-gray-600 line-clamp-2">{prd.data.problem}</p>
						</div>
						
						<div class="bg-gray-50 p-3 rounded">
							<h3 class="text-sm font-semibold text-gray-700 mb-1">Solution</h3>
							<p class="text-sm text-gray-600 line-clamp-2">{prd.data.solution}</p>
						</div>
					</div>
					
					<div class="flex items-center justify-between text-sm text-gray-500">
						<span>
							<span class="font-medium">Owner:</span> {prd.data.owner}
						</span>
						{prd.data.requirements && (
							<span>
								<span class="font-medium">Requirements:</span> {prd.data.requirements.length}
							</span>
						)}
					</div>
				</article>
			))}
		</div>
		
		{prds.length === 0 && (
			<p class="text-gray-500 text-center py-8">No PRDs have been created yet.</p>
		)}
	</main>
</Layout>